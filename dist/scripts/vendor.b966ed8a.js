if(function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||ca;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=pa.type(a);return"function"===c||pa.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function e(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}function f(a,b,c){return pa.isFunction(b)?pa.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?pa.grep(a,function(a){return a===b!==c}):"string"!=typeof b?pa.grep(a,function(a){return ha.call(b,a)>-1!==c}):za.test(b)?pa.filter(b,a,c):(b=pa.filter(b,a),pa.grep(a,function(a){return ha.call(b,a)>-1!==c&&1===a.nodeType}))}function g(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function h(a){var b={};return pa.each(a.match(Fa)||[],function(a,c){b[c]=!0}),b}function i(a){return a}function j(a){throw a}function k(a,b,c,d){var e;try{a&&pa.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&pa.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}function l(){ca.removeEventListener("DOMContentLoaded",l),a.removeEventListener("load",l),pa.ready()}function m(){this.expando=pa.expando+m.uid++}function n(a){return"true"===a?!0:"false"===a?!1:"null"===a?null:a===+a+""?+a:Ma.test(a)?JSON.parse(a):a}function o(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Na,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=n(c)}catch(e){}La.set(a,b,c)}else c=void 0;return c}function p(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return pa.css(a,b,"")},i=h(),j=c&&c[3]||(pa.cssNumber[b]?"":"px"),k=(pa.cssNumber[b]||"px"!==j&&+i)&&Pa.exec(pa.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,pa.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function q(a){var b,c=a.ownerDocument,d=a.nodeName,e=Ta[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=pa.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Ta[d]=e,e)}function r(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ka.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Ra(d)&&(e[f]=q(d))):"none"!==c&&(e[f]="none",Ka.set(d,"display",c)));for(f=0;g>f;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function s(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&e(a,b)?pa.merge([a],c):c}function t(a,b){for(var c=0,d=a.length;d>c;c++)Ka.set(a[c],"globalEval",!b||Ka.get(b[c],"globalEval"))}function u(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;o>n;n++)if(f=a[n],f||0===f)if("object"===pa.type(f))pa.merge(m,f.nodeType?[f]:f);else if(Ya.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Va.exec(f)||["",""])[1].toLowerCase(),i=Xa[h]||Xa._default,g.innerHTML=i[1]+pa.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;pa.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&pa.inArray(f,d)>-1)e&&e.push(f);else if(j=pa.contains(f.ownerDocument,f),g=s(l.appendChild(f),"script"),j&&t(g),c)for(k=0;f=g[k++];)Wa.test(f.type||"")&&c.push(f);return l}function v(){return!0}function w(){return!1}function x(){try{return ca.activeElement}catch(a){}}function y(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)y(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=w;else if(!e)return a;return 1===f&&(g=e,e=function(a){return pa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=pa.guid++)),a.each(function(){pa.event.add(this,b,e,d,c)})}function z(a,b){return e(a,"table")&&e(11!==b.nodeType?b:b.firstChild,"tr")?pa(">tbody",a)[0]||a:a}function A(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function B(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function C(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ka.hasData(a)&&(f=Ka.access(a),g=Ka.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)pa.event.add(b,e,j[e][c])}La.hasData(a)&&(h=La.access(a),i=pa.extend({},h),La.set(b,i))}}function D(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ua.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function E(a,b,d,e){b=fa.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=pa.isFunction(o);if(p||m>1&&"string"==typeof o&&!na.checkClone&&db.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),E(f,b,d,e)});if(m&&(f=u(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=pa.map(s(f,"script"),A),i=h.length;m>l;l++)j=f,l!==n&&(j=pa.clone(j,!0,!0),i&&pa.merge(h,s(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,pa.map(h,B),l=0;i>l;l++)j=h[l],Wa.test(j.type||"")&&!Ka.access(j,"globalEval")&&pa.contains(k,j)&&(j.src?pa._evalUrl&&pa._evalUrl(j.src):c(j.textContent.replace(fb,""),k))}return a}function F(a,b,c){for(var d,e=b?pa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||pa.cleanData(s(d)),d.parentNode&&(c&&pa.contains(d.ownerDocument,d)&&t(s(d,"script")),d.parentNode.removeChild(d));return a}function G(a,b,c){var d,e,f,g,h=a.style;return c=c||ib(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||pa.contains(a.ownerDocument,a)||(g=pa.style(a,b)),!na.pixelMarginRight()&&hb.test(g)&&gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function H(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function I(a){if(a in ob)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=nb.length;c--;)if(a=nb[c]+b,a in ob)return a}function J(a){var b=pa.cssProps[a];return b||(b=pa.cssProps[a]=I(a)||a),b}function K(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function L(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;4>f;f+=2)"margin"===c&&(g+=pa.css(a,c+Qa[f],!0,e)),d?("content"===c&&(g-=pa.css(a,"padding"+Qa[f],!0,e)),"margin"!==c&&(g-=pa.css(a,"border"+Qa[f]+"Width",!0,e))):(g+=pa.css(a,"padding"+Qa[f],!0,e),"padding"!==c&&(g+=pa.css(a,"border"+Qa[f]+"Width",!0,e)));return g}function M(a,b,c){var d,e=ib(a),f=G(a,b,e),g="border-box"===pa.css(a,"boxSizing",!1,e);return hb.test(f)?f:(d=g&&(na.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),f=parseFloat(f)||0,f+L(a,b,c||(g?"border":"content"),d,e)+"px")}function N(a,b,c,d,e){return new N.prototype.init(a,b,c,d,e)}function O(){qb&&(ca.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(O):a.setTimeout(O,pa.fx.interval),pa.fx.tick())}function P(){return a.setTimeout(function(){pb=void 0}),pb=pa.now()}function Q(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=Qa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function R(a,b,c){for(var d,e=(U.tweeners[b]||[]).concat(U.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function S(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&Ra(a),q=Ka.get(a,"fxshow");c.queue||(g=pa._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,pa.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],rb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||pa.style(a,d)}if(i=!pa.isEmptyObject(b),i||!pa.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=Ka.get(a,"display")),k=pa.css(a,"display"),"none"===k&&(j?k=j:(r([a],!0),j=a.style.display||j,k=pa.css(a,"display"),r([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===pa.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=Ka.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&r([a],!0),m.done(function(){p||r([a]),Ka.remove(a,"fxshow");for(d in n)pa.style(a,d,n[d])})),i=R(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function T(a,b){var c,d,e,f,g;for(c in a)if(d=pa.camelCase(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=pa.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function U(a,b,c){var d,e,f=0,g=U.prefilters.length,h=pa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=pb||P(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:pa.extend({},b),opts:pa.extend(!0,{specialEasing:{},easing:pa.easing._default},c),originalProperties:b,originalOptions:c,startTime:pb||P(),duration:c.duration,tweens:[],createTween:function(b,c){var d=pa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(T(k,j.opts.specialEasing);g>f;f++)if(d=U.prefilters[f].call(j,a,k,j.opts))return pa.isFunction(d.stop)&&(pa._queueHooks(j.elem,j.opts.queue).stop=pa.proxy(d.stop,d)),d;return pa.map(k,R,j),pa.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),pa.fx.timer(pa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}function V(a){var b=a.match(Fa)||[];return b.join(" ")}function W(a){return a.getAttribute&&a.getAttribute("class")||""}function X(a,b,c,d){var e;if(Array.isArray(b))pa.each(b,function(b,e){c||Cb.test(a)?d(a,e):X(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==pa.type(b))d(a,b);else for(e in b)X(a+"["+e+"]",b[e],c,d)}function Y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Fa)||[];if(pa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Z(a,b,c,d){function e(h){var i;return f[h]=!0,pa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Ob;return e(b.dataTypes[0])||!f["*"]&&e("*")}function $(a,b){var c,d,e=pa.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&pa.extend(!0,a,d),a}function _(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function aa(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}var ba=[],ca=a.document,da=Object.getPrototypeOf,ea=ba.slice,fa=ba.concat,ga=ba.push,ha=ba.indexOf,ia={},ja=ia.toString,ka=ia.hasOwnProperty,la=ka.toString,ma=la.call(Object),na={},oa="3.2.1",pa=function(a,b){return new pa.fn.init(a,b)},qa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ra=/^-ms-/,sa=/-([a-z])/g,ta=function(a,b){return b.toUpperCase()};pa.fn=pa.prototype={jquery:oa,constructor:pa,length:0,toArray:function(){return ea.call(this)},get:function(a){return null==a?ea.call(this):0>a?this[a+this.length]:this[a]},pushStack:function(a){var b=pa.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return pa.each(this,a)},map:function(a){return this.pushStack(pa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ea.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:ga,sort:ba.sort,splice:ba.splice},pa.extend=pa.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||pa.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(pa.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&pa.isPlainObject(c)?c:{},g[b]=pa.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},pa.extend({expando:"jQuery"+(oa+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===pa.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=pa.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return a&&"[object Object]"===ja.call(a)?(b=da(a))?(c=ka.call(b,"constructor")&&b.constructor,"function"==typeof c&&la.call(c)===ma):!0:!1},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ia[ja.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(ra,"ms-").replace(sa,ta)},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;c>e&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(qa,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?pa.merge(c,"string"==typeof a?[a]:a):ga.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ha.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;e>g;g++)f=b(a[g],g,c),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,c),null!=f&&h.push(f);return fa.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),pa.isFunction(a)?(d=ea.call(arguments,2),e=function(){return a.apply(b||this,d.concat(ea.call(arguments)))},e.guid=a.guid=a.guid||pa.guid++,e):void 0},now:Date.now,support:na}),"function"==typeof Symbol&&(pa.fn[Symbol.iterator]=ba[Symbol.iterator]),pa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ia["[object "+b+"]"]=b.toLowerCase()});var ua=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(p){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ya(b)===a:b.disabled===a:"label"in b?b.disabled===a:!1}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;e>d&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,d>h&&t(a.slice(h,d)),e>d&&t(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wa=function(a,b){return b?"\x00"===a?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(za){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}}):(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),x.find.TAG=w.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&J?b.getElementsByClassName(a):void 0},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);
return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){(!d||(e=ia.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&J&&x.relative[f[1].type]){if(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);pa.find=ua,pa.expr=ua.selectors,pa.expr[":"]=pa.expr.pseudos,pa.uniqueSort=pa.unique=ua.uniqueSort,pa.text=ua.getText,pa.isXMLDoc=ua.isXML,pa.contains=ua.contains,pa.escapeSelector=ua.escape;var va=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&pa(a).is(c))break;d.push(a)}return d},wa=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},xa=pa.expr.match.needsContext,ya=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,za=/^.[^:#\[\.,]*$/;pa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?pa.find.matchesSelector(d,a)?[d]:[]:pa.find.matches(a,pa.grep(b,function(a){return 1===a.nodeType}))},pa.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(pa(a).filter(function(){for(b=0;d>b;b++)if(pa.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;d>b;b++)pa.find(a,e[b],c);return d>1?pa.uniqueSort(c):c},filter:function(a){return this.pushStack(f(this,a||[],!1))},not:function(a){return this.pushStack(f(this,a||[],!0))},is:function(a){return!!f(this,"string"==typeof a&&xa.test(a)?pa(a):a||[],!1).length}});var Aa,Ba=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ca=pa.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||Aa,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:Ba.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof pa?b[0]:b,pa.merge(this,pa.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:ca,!0)),ya.test(d[1])&&pa.isPlainObject(b))for(d in b)pa.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=ca.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):pa.isFunction(a)?void 0!==c.ready?c.ready(a):a(pa):pa.makeArray(a,this)};Ca.prototype=pa.fn,Aa=pa(ca);var Da=/^(?:parents|prev(?:Until|All))/,Ea={children:!0,contents:!0,next:!0,prev:!0};pa.fn.extend({has:function(a){var b=pa(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(pa.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&pa(a);if(!xa.test(a))for(;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&pa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?pa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ha.call(pa(a),this[0]):ha.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(pa.uniqueSort(pa.merge(this.get(),pa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),pa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return va(a,"parentNode")},parentsUntil:function(a,b,c){return va(a,"parentNode",c)},next:function(a){return g(a,"nextSibling")},prev:function(a){return g(a,"previousSibling")},nextAll:function(a){return va(a,"nextSibling")},prevAll:function(a){return va(a,"previousSibling")},nextUntil:function(a,b,c){return va(a,"nextSibling",c)},prevUntil:function(a,b,c){return va(a,"previousSibling",c)},siblings:function(a){return wa((a.parentNode||{}).firstChild,a)},children:function(a){return wa(a.firstChild)},contents:function(a){return e(a,"iframe")?a.contentDocument:(e(a,"template")&&(a=a.content||a),pa.merge([],a.childNodes))}},function(a,b){pa.fn[a]=function(c,d){var e=pa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=pa.filter(d,e)),this.length>1&&(Ea[a]||pa.uniqueSort(e),Da.test(a)&&e.reverse()),this.pushStack(e)}});var Fa=/[^\x20\t\r\n\f]+/g;pa.Callbacks=function(a){a="string"==typeof a?h(a):pa.extend({},a);var b,c,d,e,f=[],g=[],i=-1,j=function(){for(e=e||a.once,d=b=!0;g.length;i=-1)for(c=g.shift();++i<f.length;)f[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,g.push(c)),function d(b){pa.each(b,function(b,c){pa.isFunction(c)?a.unique&&k.has(c)||f.push(c):c&&c.length&&"string"!==pa.type(c)&&d(c)})}(arguments),c&&!b&&j()),this},remove:function(){return pa.each(arguments,function(a,b){for(var c;(c=pa.inArray(b,f,c))>-1;)f.splice(c,1),i>=c&&i--}),this},has:function(a){return a?pa.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},pa.extend({Deferred:function(b){var c=[["notify","progress",pa.Callbacks("memory"),pa.Callbacks("memory"),2],["resolve","done",pa.Callbacks("once memory"),pa.Callbacks("once memory"),0,"resolved"],["reject","fail",pa.Callbacks("once memory"),pa.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return pa.Deferred(function(b){pa.each(c,function(c,d){var e=pa.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&pa.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var h=this,k=arguments,l=function(){var a,l;if(!(g>b)){if(a=d.apply(h,k),a===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,pa.isFunction(l)?e?l.call(a,f(g,c,i,e),f(g,c,j,e)):(g++,l.call(a,f(g,c,i,e),f(g,c,j,e),f(g,c,i,c.notifyWith))):(d!==i&&(h=void 0,k=[a]),(e||c.resolveWith)(h,k))}},m=e?l:function(){try{l()}catch(a){pa.Deferred.exceptionHook&&pa.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==j&&(h=void 0,k=[a]),c.rejectWith(h,k))}};b?m():(pa.Deferred.getStackHook&&(m.stackTrace=pa.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return pa.Deferred(function(a){c[0][3].add(f(0,a,pa.isFunction(e)?e:i,a.notifyWith)),c[1][3].add(f(0,a,pa.isFunction(b)?b:i)),c[2][3].add(f(0,a,pa.isFunction(d)?d:j))}).promise()},promise:function(a){return null!=a?pa.extend(a,e):e}},f={};return pa.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=ea.call(arguments),f=pa.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?ea.call(arguments):c,--b||f.resolveWith(d,e)}};if(1>=b&&(k(a,f.done(g(c)).resolve,f.reject,!b),"pending"===f.state()||pa.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)k(e[c],g(c),f.reject);return f.promise()}});var Ga=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pa.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Ga.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},pa.readyException=function(b){a.setTimeout(function(){throw b})};var Ha=pa.Deferred();pa.fn.ready=function(a){return Ha.then(a)["catch"](function(a){pa.readyException(a)}),this},pa.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--pa.readyWait:pa.isReady)||(pa.isReady=!0,a!==!0&&--pa.readyWait>0||Ha.resolveWith(ca,[pa]))}}),pa.ready.then=Ha.then,"complete"===ca.readyState||"loading"!==ca.readyState&&!ca.documentElement.doScroll?a.setTimeout(pa.ready):(ca.addEventListener("DOMContentLoaded",l),a.addEventListener("load",l));var Ia=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===pa.type(c)){e=!0;for(h in c)Ia(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,pa.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(pa(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ja=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};m.uid=1,m.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ja(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[pa.camelCase(b)]=c;else for(d in b)e[pa.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][pa.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(pa.camelCase):(b=pa.camelCase(b),b=b in d?[b]:b.match(Fa)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||pa.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!pa.isEmptyObject(b)}};var Ka=new m,La=new m,Ma=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Na=/[A-Z]/g;pa.extend({hasData:function(a){return La.hasData(a)||Ka.hasData(a)},data:function(a,b,c){return La.access(a,b,c)},removeData:function(a,b){La.remove(a,b)},_data:function(a,b,c){return Ka.access(a,b,c)},_removeData:function(a,b){Ka.remove(a,b)}}),pa.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=La.get(f),1===f.nodeType&&!Ka.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=pa.camelCase(d.slice(5)),o(f,d,e[d])));Ka.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){La.set(this,a)}):Ia(this,function(b){var c;if(f&&void 0===b){if(c=La.get(f,a),void 0!==c)return c;if(c=o(f,a),void 0!==c)return c}else this.each(function(){La.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){La.remove(this,a)})}}),pa.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=Ka.get(a,b),c&&(!d||Array.isArray(c)?d=Ka.access(a,b,pa.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=pa.queue(a,b),d=c.length,e=c.shift(),f=pa._queueHooks(a,b),g=function(){pa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ka.get(a,c)||Ka.access(a,c,{empty:pa.Callbacks("once memory").add(function(){Ka.remove(a,[b+"queue",c])})})}}),pa.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?pa.queue(this[0],a):void 0===b?this:this.each(function(){var c=pa.queue(this,a,b);pa._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&pa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){pa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=pa.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=Ka.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Oa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pa=new RegExp("^(?:([+-])=|)("+Oa+")([a-z%]*)$","i"),Qa=["Top","Right","Bottom","Left"],Ra=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&pa.contains(a.ownerDocument,a)&&"none"===pa.css(a,"display")},Sa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ta={};pa.fn.extend({show:function(){return r(this,!0)},hide:function(){return r(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ra(this)?pa(this).show():pa(this).hide()})}});var Ua=/^(?:checkbox|radio)$/i,Va=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Wa=/^$|\/(?:java|ecma)script/i,Xa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xa.optgroup=Xa.option,Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead,Xa.th=Xa.td;var Ya=/<|&#?\w+;/;!function(){var a=ca.createDocumentFragment(),b=a.appendChild(ca.createElement("div")),c=ca.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),na.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",na.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Za=ca.documentElement,$a=/^key/,_a=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ab=/^([^.]*)(?:\.(.+)|)/;pa.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ka.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&pa.find.matchesSelector(Za,e),c.guid||(c.guid=pa.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof pa&&pa.event.triggered!==b.type?pa.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Fa)||[""],j=b.length;j--;)h=ab.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=pa.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=pa.event.special[n]||{},k=pa.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&pa.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),pa.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ka.hasData(a)&&Ka.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Fa)||[""],j=b.length;j--;)if(h=ab.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=pa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||pa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)pa.event.remove(a,n+b[j],c,d,!0);pa.isEmptyObject(i)&&Ka.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=pa.event.fix(a),i=new Array(arguments.length),j=(Ka.get(this,"events")||{})[h.type]||[],k=pa.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,h)!==!1){for(g=pa.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)(!h.rnamespace||h.rnamespace.test(f.namespace))&&(h.handleObj=f,h.data=f.data,d=((pa.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i),void 0!==d&&(h.result=d)===!1&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;i>c;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?pa(e,this).index(j)>-1:pa.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(pa.Event.prototype,a,{enumerable:!0,configurable:!0,get:pa.isFunction(b)?function(){return this.originalEvent?b(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[a]:void 0},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[pa.expando]?a:new pa.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==x()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===x()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&e(this,"input")?(this.click(),!1):void 0},_default:function(a){return e(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},pa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},pa.Event=function(a,b){return this instanceof pa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?v:w,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&pa.extend(this,b),this.timeStamp=a&&a.timeStamp||pa.now(),void(this[pa.expando]=!0)):new pa.Event(a,b)},pa.Event.prototype={constructor:pa.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=v,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=v,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=v,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},pa.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&$a.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&_a.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},pa.event.addProp),pa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){pa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!pa.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),pa.fn.extend({on:function(a,b,c,d){return y(this,a,b,c,d)},one:function(a,b,c,d){return y(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,pa(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=w),this.each(function(){pa.event.remove(this,a,c,b)})}});var bb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,cb=/<script|<style|<link/i,db=/checked\s*(?:[^=]|=\s*.checked.)/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pa.extend({htmlPrefilter:function(a){return a.replace(bb,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=pa.contains(a.ownerDocument,a);if(!(na.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||pa.isXMLDoc(a)))for(g=s(h),f=s(a),d=0,e=f.length;e>d;d++)D(f[d],g[d]);if(b)if(c)for(f=f||s(a),g=g||s(h),d=0,e=f.length;e>d;d++)C(f[d],g[d]);else C(a,h);return g=s(h,"script"),g.length>0&&t(g,!i&&s(a,"script")),h},cleanData:function(a){for(var b,c,d,e=pa.event.special,f=0;void 0!==(c=a[f]);f++)if(Ja(c)){if(b=c[Ka.expando]){if(b.events)for(d in b.events)e[d]?pa.event.remove(c,d):pa.removeEvent(c,d,b.handle);c[Ka.expando]=void 0}c[La.expando]&&(c[La.expando]=void 0)}}}),pa.fn.extend({detach:function(a){return F(this,a,!0)},remove:function(a){return F(this,a)},text:function(a){return Ia(this,function(a){return void 0===a?pa.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return E(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=z(this,a);b.appendChild(a)}})},prepend:function(){return E(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=z(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return E(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return E(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(pa.cleanData(s(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return pa.clone(this,a,b)})},html:function(a){return Ia(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!cb.test(a)&&!Xa[(Va.exec(a)||["",""])[1].toLowerCase()]){a=pa.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(pa.cleanData(s(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return E(this,arguments,function(b){var c=this.parentNode;pa.inArray(this,a)<0&&(pa.cleanData(s(this)),c&&c.replaceChild(b,this))},a)}}),pa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){pa.fn[a]=function(a){for(var c,d=[],e=pa(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),pa(e[g])[b](c),ga.apply(d,c.get());return this.pushStack(d)}});var gb=/^margin/,hb=new RegExp("^("+Oa+")(?!px)[a-z%]+$","i"),ib=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Za.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Za.removeChild(g),h=null}}var c,d,e,f,g=ca.createElement("div"),h=ca.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",na.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),pa.extend(na,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var jb=/^(none|table(?!-c[ea]).+)/,kb=/^--/,lb={position:"absolute",visibility:"hidden",display:"block"},mb={letterSpacing:"0",fontWeight:"400"},nb=["Webkit","Moz","ms"],ob=ca.createElement("div").style;pa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=G(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=pa.camelCase(b),i=kb.test(b),j=a.style;return i||(b=J(h)),g=pa.cssHooks[b]||pa.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:(f=typeof c,"string"===f&&(e=Pa.exec(c))&&e[1]&&(c=p(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(pa.cssNumber[h]?"":"px")),na.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=pa.camelCase(b),i=kb.test(b);return i||(b=J(h)),g=pa.cssHooks[b]||pa.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=G(a,b,d)),"normal"===e&&b in mb&&(e=mb[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),pa.each(["height","width"],function(a,b){pa.cssHooks[b]={get:function(a,c,d){return c?!jb.test(pa.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?M(a,b,d):Sa(a,lb,function(){return M(a,b,d)}):void 0},set:function(a,c,d){var e,f=d&&ib(a),g=d&&L(a,b,d,"border-box"===pa.css(a,"boxSizing",!1,f),f);return g&&(e=Pa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=pa.css(a,b)),K(a,c,g)}}}),pa.cssHooks.marginLeft=H(na.reliableMarginLeft,function(a,b){return b?(parseFloat(G(a,"marginLeft"))||a.getBoundingClientRect().left-Sa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),pa.each({margin:"",padding:"",border:"Width"},function(a,b){pa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Qa[d]+b]=f[d]||f[d-2]||f[0];return e}},gb.test(a)||(pa.cssHooks[a+b].set=K)}),pa.fn.extend({css:function(a,b){return Ia(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=ib(a),e=b.length;e>g;g++)f[b[g]]=pa.css(a,b[g],!1,d);return f}return void 0!==c?pa.style(a,b,c):pa.css(a,b)},a,b,arguments.length>1)}}),pa.Tween=N,N.prototype={constructor:N,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||pa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(pa.cssNumber[c]?"":"px")},cur:function(){var a=N.propHooks[this.prop];return a&&a.get?a.get(this):N.propHooks._default.get(this)},run:function(a){var b,c=N.propHooks[this.prop];return this.options.duration?this.pos=b=pa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=pa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){pa.fx.step[a.prop]?pa.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[pa.cssProps[a.prop]]&&!pa.cssHooks[a.prop]?a.elem[a.prop]=a.now:pa.style(a.elem,a.prop,a.now+a.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},pa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},pa.fx=N.prototype.init,pa.fx.step={};var pb,qb,rb=/^(?:toggle|show|hide)$/,sb=/queueHooks$/;pa.Animation=pa.extend(U,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return p(c.elem,a,Pa.exec(b),c),c}]},tweener:function(a,b){pa.isFunction(a)?(b=a,a=["*"]):a=a.match(Fa);for(var c,d=0,e=a.length;e>d;d++)c=a[d],U.tweeners[c]=U.tweeners[c]||[],U.tweeners[c].unshift(b)},prefilters:[S],prefilter:function(a,b){b?U.prefilters.unshift(a):U.prefilters.push(a)}}),pa.speed=function(a,b,c){var d=a&&"object"==typeof a?pa.extend({},a):{complete:c||!c&&b||pa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!pa.isFunction(b)&&b};return pa.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in pa.fx.speeds?d.duration=pa.fx.speeds[d.duration]:d.duration=pa.fx.speeds._default),(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){pa.isFunction(d.old)&&d.old.call(this),d.queue&&pa.dequeue(this,d.queue)},d},pa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ra).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=pa.isEmptyObject(a),f=pa.speed(b,c,d),g=function(){var b=U(this,pa.extend({},a),f);(e||Ka.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){
var b=!0,e=null!=a&&a+"queueHooks",f=pa.timers,g=Ka.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&sb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&pa.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=Ka.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=pa.timers,g=d?d.length:0;for(c.finish=!0,pa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),pa.each(["toggle","show","hide"],function(a,b){var c=pa.fn[b];pa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Q(b,!0),a,d,e)}}),pa.each({slideDown:Q("show"),slideUp:Q("hide"),slideToggle:Q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){pa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),pa.timers=[],pa.fx.tick=function(){var a,b=0,c=pa.timers;for(pb=pa.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||pa.fx.stop(),pb=void 0},pa.fx.timer=function(a){pa.timers.push(a),pa.fx.start()},pa.fx.interval=13,pa.fx.start=function(){qb||(qb=!0,O())},pa.fx.stop=function(){qb=null},pa.fx.speeds={slow:600,fast:200,_default:400},pa.fn.delay=function(b,c){return b=pa.fx?pa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=ca.createElement("input"),b=ca.createElement("select"),c=b.appendChild(ca.createElement("option"));a.type="checkbox",na.checkOn=""!==a.value,na.optSelected=c.selected,a=ca.createElement("input"),a.value="t",a.type="radio",na.radioValue="t"===a.value}();var tb,ub=pa.expr.attrHandle;pa.fn.extend({attr:function(a,b){return Ia(this,pa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){pa.removeAttr(this,a)})}}),pa.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?pa.prop(a,b,c):(1===f&&pa.isXMLDoc(a)||(e=pa.attrHooks[b.toLowerCase()]||(pa.expr.match.bool.test(b)?tb:void 0)),void 0!==c?null===c?void pa.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=pa.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!na.radioValue&&"radio"===b&&e(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Fa);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),tb={set:function(a,b,c){return b===!1?pa.removeAttr(a,c):a.setAttribute(c,c),c}},pa.each(pa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ub[b]||pa.find.attr;ub[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=ub[g],ub[g]=e,e=null!=c(a,b,d)?g:null,ub[g]=f),e}});var vb=/^(?:input|select|textarea|button)$/i,wb=/^(?:a|area)$/i;pa.fn.extend({prop:function(a,b){return Ia(this,pa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[pa.propFix[a]||a]})}}),pa.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&pa.isXMLDoc(a)||(b=pa.propFix[b]||b,e=pa.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=pa.find.attr(a,"tabindex");return b?parseInt(b,10):vb.test(a.nodeName)||wb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),na.optSelected||(pa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),pa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pa.propFix[this.toLowerCase()]=this}),pa.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(pa.isFunction(a))return this.each(function(b){pa(this).addClass(a.call(this,b,W(this)))});if("string"==typeof a&&a)for(b=a.match(Fa)||[];c=this[i++];)if(e=W(c),d=1===c.nodeType&&" "+V(e)+" "){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=V(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(pa.isFunction(a))return this.each(function(b){pa(this).removeClass(a.call(this,b,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Fa)||[];c=this[i++];)if(e=W(c),d=1===c.nodeType&&" "+V(e)+" "){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=V(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):pa.isFunction(a)?this.each(function(c){pa(this).toggleClass(a.call(this,c,W(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=pa(this),f=a.match(Fa)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(void 0===a||"boolean"===c)&&(b=W(this),b&&Ka.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":Ka.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+V(W(c))+" ").indexOf(b)>-1)return!0;return!1}});var xb=/\r/g;pa.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=pa.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,pa(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=pa.map(e,function(a){return null==a?"":a+""})),b=pa.valHooks[this.type]||pa.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=pa.valHooks[e.type]||pa.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(xb,""):null==c?"":c)}}}),pa.extend({valHooks:{option:{get:function(a){var b=pa.find.attr(a,"value");return null!=b?b:V(pa.text(a))}},select:{get:function(a){var b,c,d,f=a.options,g=a.selectedIndex,h="select-one"===a.type,i=h?null:[],j=h?g+1:f.length;for(d=0>g?j:h?g:0;j>d;d++)if(c=f[d],(c.selected||d===g)&&!c.disabled&&(!c.parentNode.disabled||!e(c.parentNode,"optgroup"))){if(b=pa(c).val(),h)return b;i.push(b)}return i},set:function(a,b){for(var c,d,e=a.options,f=pa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=pa.inArray(pa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),pa.each(["radio","checkbox"],function(){pa.valHooks[this]={set:function(a,b){return Array.isArray(b)?a.checked=pa.inArray(pa(a).val(),b)>-1:void 0}},na.checkOn||(pa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var yb=/^(?:focusinfocus|focusoutblur)$/;pa.extend(pa.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||ca],n=ka.call(b,"type")?b.type:b,o=ka.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||ca,3!==d.nodeType&&8!==d.nodeType&&!yb.test(n+pa.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[pa.expando]?b:new pa.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:pa.makeArray(c,[b]),l=pa.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!pa.isWindow(d)){for(i=l.delegateType||n,yb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||ca)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ka.get(g,"events")||{})[b.type]&&Ka.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&Ja(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!Ja(d)||j&&pa.isFunction(d[n])&&!pa.isWindow(d)&&(h=d[j],h&&(d[j]=null),pa.event.triggered=n,d[n](),pa.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=pa.extend(new pa.Event,c,{type:a,isSimulated:!0});pa.event.trigger(d,null,b)}}),pa.fn.extend({trigger:function(a,b){return this.each(function(){pa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?pa.event.trigger(a,b,c,!0):void 0}}),pa.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){pa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),pa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),na.focusin="onfocusin"in a,na.focusin||pa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){pa.event.simulate(b,a.target,pa.event.fix(a))};pa.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ka.access(d,b);e||d.addEventListener(a,c,!0),Ka.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ka.access(d,b)-1;e?Ka.access(d,b,e):(d.removeEventListener(a,c,!0),Ka.remove(d,b))}}});var zb=a.location,Ab=pa.now(),Bb=/\?/;pa.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return(!c||c.getElementsByTagName("parsererror").length)&&pa.error("Invalid XML: "+b),c};var Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;pa.param=function(a,b){var c,d=[],e=function(a,b){var c=pa.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!pa.isPlainObject(a))pa.each(a,function(){e(this.name,this.value)});else for(c in a)X(c,a[c],b,e);return d.join("&")},pa.fn.extend({serialize:function(){return pa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=pa.prop(this,"elements");return a?pa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!pa(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!Ua.test(a))}).map(function(a,b){var c=pa(this).val();return null==c?null:Array.isArray(c)?pa.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}});var Gb=/%20/g,Hb=/#.*$/,Ib=/([?&])_=[^&]*/,Jb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Kb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lb=/^(?:GET|HEAD)$/,Mb=/^\/\//,Nb={},Ob={},Pb="*/".concat("*"),Qb=ca.createElement("a");Qb.href=zb.href,pa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb.href,type:"GET",isLocal:Kb.test(zb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Pb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?$($(a,pa.ajaxSettings),b):$(pa.ajaxSettings,a)},ajaxPrefilter:Y(Nb),ajaxTransport:Y(Ob),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=_(o,x,d)),u=aa(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(pa.lastModified[f]=v),v=x.getResponseHeader("etag"),v&&(pa.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,(b||!w)&&(w="error",0>b&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--pa.active||pa.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=pa.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?pa(p):pa.event,r=pa.Deferred(),s=pa.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Jb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||zb.href)+"").replace(Mb,zb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Fa)||[""],null==o.crossDomain){j=ca.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Qb.protocol+"//"+Qb.host!=j.protocol+"//"+j.host}catch(y){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=pa.param(o.data,o.traditional)),Z(Nb,o,c,x),k)return x;l=pa.event&&o.global,l&&0===pa.active++&&pa.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Lb.test(o.type),f=o.url.replace(Hb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Gb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(Bb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ib,"$1"),n=(Bb.test(f)?"&":"?")+"_="+Ab++ +n),o.url=f+n),o.ifModified&&(pa.lastModified[f]&&x.setRequestHeader("If-Modified-Since",pa.lastModified[f]),pa.etag[f]&&x.setRequestHeader("If-None-Match",pa.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Pb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,x,o)===!1||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=Z(Ob,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(y){if(k)throw y;d(-1,y)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return pa.get(a,b,c,"json")},getScript:function(a,b){return pa.get(a,void 0,b,"script")}}),pa.each(["get","post"],function(a,b){pa[b]=function(a,c,d,e){return pa.isFunction(c)&&(e=e||d,d=c,c=void 0),pa.ajax(pa.extend({url:a,type:b,dataType:e,data:c,success:d},pa.isPlainObject(a)&&a))}}),pa._evalUrl=function(a){return pa.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pa.fn.extend({wrapAll:function(a){var b;return this[0]&&(pa.isFunction(a)&&(a=a.call(this[0])),b=pa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return pa.isFunction(a)?this.each(function(b){pa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=pa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=pa.isFunction(a);return this.each(function(c){pa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){pa(this).replaceWith(this.childNodes)}),this}}),pa.expr.pseudos.hidden=function(a){return!pa.expr.pseudos.visible(a)},pa.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},pa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=pa.ajaxSettings.xhr();na.cors=!!Sb&&"withCredentials"in Sb,na.ajax=Sb=!!Sb,pa.ajaxTransport(function(b){var c,d;return na.cors||Sb&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),pa.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),pa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return pa.globalEval(a),a}}}),pa.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),pa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=pa("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),ca.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;pa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||pa.expando+"_"+Ab++;return this[a]=!0,a}}),pa.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=pa.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):b.jsonp!==!1&&(b.url+=(Bb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||pa.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?pa(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&pa.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),na.createHTMLDocument=function(){var a=ca.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),pa.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(na.createHTMLDocument?(b=ca.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=ca.location.href,b.head.appendChild(d)):b=ca),e=ya.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=u([a],b,f),f&&f.length&&pa(f).remove(),pa.merge([],e.childNodes))},pa.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=V(a.slice(h)),a=a.slice(0,h)),pa.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&pa.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?pa("<div>").append(pa.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},pa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){pa.fn[b]=function(a){return this.on(b,a)}}),pa.expr.pseudos.animated=function(a){return pa.grep(pa.timers,function(b){return a===b.elem}).length},pa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=pa.css(a,"position"),l=pa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=pa.css(a,"top"),i=pa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),pa.isFunction(b)&&(b=b.call(a,c,pa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},pa.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){pa.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),b=f.ownerDocument,c=b.documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===pa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),e(a[0],"html")||(d=a.offset()),d={top:d.top+pa.css(a[0],"borderTopWidth",!0),left:d.left+pa.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-pa.css(c,"marginTop",!0),left:b.left-d.left-pa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===pa.css(a,"position");)a=a.offsetParent;return a||Za})}}),pa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;pa.fn[a]=function(d){return Ia(this,function(a,d,e){var f;return pa.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),pa.each(["top","left"],function(a,b){pa.cssHooks[b]=H(na.pixelPosition,function(a,c){return c?(c=G(a,b),hb.test(c)?pa(a).position()[b]+"px":c):void 0})}),pa.each({Height:"height",Width:"width"},function(a,b){pa.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){pa.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return Ia(this,function(b,c,e){var f;return pa.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?pa.css(b,c,h):pa.style(b,c,e,h)},b,g?e:void 0,g)}})}),pa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),pa.holdReady=function(a){a?pa.readyWait++:pa.ready(!0)},pa.isArray=Array.isArray,pa.parseJSON=JSON.parse,pa.nodeName=e,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pa});var Vb=a.jQuery,Wb=a.$;return pa.noConflict=function(b){return a.$===pa&&(a.$=Wb),b&&a.jQuery===pa&&(a.jQuery=Vb),pa},b||(a.jQuery=a.$=pa),pa}),function(a){"use strict";function b(a,b){return b=b||Error,function(){var c,d,e=arguments[0],f=arguments[1],g="["+(a?a+":":"")+e+"] ",h=U(arguments,2).map(function(a){return ya(a,Xd.objectMaxDepth)});for(g+=f.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b<h.length?h[b]:a}),g+="\nhttp://errors.angularjs.org/1.6.4/"+(a?a+"/":"")+e,d=0,c="?";d<h.length;d++,c="&")g+=c+"p"+d+"="+encodeURIComponent(h[d]);return new b(g)}}function c(a){return v(a)?void(u(a.objectMaxDepth)&&(Xd.objectMaxDepth=d(a.objectMaxDepth)?a.objectMaxDepth:NaN)):Xd}function d(a){return y(a)&&a>0}function e(a){if(null==a||C(a))return!1;if(ne(a)||x(a)||be&&a instanceof be)return!0;var b="length"in Object(a)&&a.length;return y(b)&&(b>=0&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function f(a,b,c){var d,g;if(a)if(A(a))for(d in a)"prototype"!==d&&"length"!==d&&"name"!==d&&a.hasOwnProperty(d)&&b.call(c,a[d],d,a);else if(ne(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else if(w(a))for(d in a)b.call(c,a[d],d,a);else if("function"==typeof a.hasOwnProperty)for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);else for(d in a)Wd.call(a,d)&&b.call(c,a[d],d,a);return a}function g(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function h(a){return function(b,c){a(c,b)}}function i(){return++le}function j(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function k(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;f>e;++e){var g=b[e];if(v(g)||A(g))for(var h=Object.keys(g),i=0,l=h.length;l>i;i++){var m=h[i],n=g[m];c&&v(n)?z(n)?a[m]=new Date(n.valueOf()):B(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):L(n)?a[m]=n.clone():(v(a[m])||(a[m]=ne(n)?[]:{}),k(a[m],[n],!0)):a[m]=n}}return j(a,d),a}function l(a){return k(a,ee.call(arguments,1),!1)}function m(a){return k(a,ee.call(arguments,1),!0)}function n(a){return parseInt(a,10)}function o(a,b){return l(Object.create(a),b)}function p(){}function q(a){return a}function r(a){return function(){return a}}function s(a){return A(a.toString)&&a.toString!==he}function t(a){return"undefined"==typeof a}function u(a){return"undefined"!=typeof a}function v(a){return null!==a&&"object"==typeof a}function w(a){return null!==a&&"object"==typeof a&&!ie(a)}function x(a){return"string"==typeof a}function y(a){return"number"==typeof a}function z(a){return"[object Date]"===he.call(a)}function A(a){return"function"==typeof a}function B(a){return"[object RegExp]"===he.call(a)}function C(a){return a&&a.window===a}function D(a){return a&&a.$evalAsync&&a.$watch}function E(a){return"[object File]"===he.call(a)}function F(a){return"[object FormData]"===he.call(a)}function G(a){return"[object Blob]"===he.call(a)}function H(a){return"boolean"==typeof a}function I(a){return a&&A(a.then)}function J(a){return a&&y(a.length)&&oe.test(he.call(a))}function K(a){return"[object ArrayBuffer]"===he.call(a)}function L(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function M(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function N(a){return Yd(a.nodeName||a[0]&&a[0].nodeName)}function O(a,b){return-1!==Array.prototype.indexOf.call(a,b)}function P(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c}function Q(a,b,c){function e(a,b,c){if(c--,0>c)return"...";var d,e=b.$$hashKey;if(ne(a))for(var f=0,h=a.length;h>f;f++)b.push(g(a[f],c));else if(w(a))for(d in a)b[d]=g(a[d],c);else if(a&&"function"==typeof a.hasOwnProperty)for(d in a)a.hasOwnProperty(d)&&(b[d]=g(a[d],c));else for(d in a)Wd.call(a,d)&&(b[d]=g(a[d],c));return j(b,e),b}function g(a,b){if(!v(a))return a;var c=i.indexOf(a);if(-1!==c)return k[c];if(C(a)||D(a))throw je("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var d=!1,f=h(a);return void 0===f&&(f=ne(a)?[]:Object.create(ie(a)),d=!0),i.push(a),k.push(f),d?e(a,f,b):f}function h(a){switch(he.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(g(a.buffer),a.byteOffset,a.length);case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);return new Uint8Array(b).set(new Uint8Array(a)),b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":var c=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]);return c.lastIndex=a.lastIndex,c;case"[object Blob]":return new a.constructor([a],{type:a.type})}return A(a.cloneNode)?a.cloneNode(!0):void 0}var i=[],k=[];if(c=d(c)?c:NaN,b){if(J(b)||K(b))throw je("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===b)throw je("cpi","Can't copy! Source and destination are identical.");return ne(b)?b.length=0:f(b,function(a,c){"$$hashKey"!==c&&delete b[c]}),i.push(a),k.push(b),e(a,b,c)}return g(a,c)}function R(a,b){return a===b||a!==a&&b!==b}function S(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c,d,e,f=typeof a,g=typeof b;if(f===g&&"object"===f){if(!ne(a)){if(z(a))return z(b)?R(a.getTime(),b.getTime()):!1;if(B(a))return B(b)?a.toString()===b.toString():!1;if(D(a)||D(b)||C(a)||C(b)||ne(b)||z(b)||B(b))return!1;e=ta();for(d in a)if("$"!==d.charAt(0)&&!A(a[d])){if(!S(a[d],b[d]))return!1;e[d]=!0}for(d in b)if(!(d in e)&&"$"!==d.charAt(0)&&u(b[d])&&!A(b[d]))return!1;return!0}if(!ne(b))return!1;if((c=a.length)===b.length){for(d=0;c>d;d++)if(!S(a[d],b[d]))return!1;return!0}}return!1}function T(a,b,c){return a.concat(ee.call(b,c))}function U(a,b){return ee.call(a,b||0)}function V(a,b){var c=arguments.length>2?U(arguments,2):[];return!A(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,T(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function W(b,c){var d=c;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?d=void 0:C(c)?d="$WINDOW":c&&a.document===c?d="$DOCUMENT":D(c)&&(d="$SCOPE"),d}function X(a,b){return t(a)?void 0:(y(b)||(b=b?2:null),JSON.stringify(a,W,b))}function Y(a){return x(a)?JSON.parse(a):a}function Z(a,b){a=a.replace(te,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return me(c)?b:c}function $(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function _(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=Z(b,d);return $(a,c*(e-d))}function aa(a){a=be(a).clone();try{a.empty()}catch(b){}var c=be("<div>").append(a).html();try{return a[0].nodeType===Ae?Yd(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+Yd(b)})}catch(b){return Yd(c)}}function ba(a){try{return decodeURIComponent(a)}catch(b){}}function ca(a){var b={};return f((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(d=a.substring(0,c),e=a.substring(c+1)),d=ba(d),u(d)&&(e=u(e)?ba(e):!0,Wd.call(b,d)?ne(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))}),b}function da(a){var b=[];return f(a,function(a,c){ne(a)?f(a,function(a){b.push(fa(c,!0)+(a===!0?"":"="+fa(a,!0)))}):b.push(fa(c,!0)+(a===!0?"":"="+fa(a,!0)))}),b.length?b.join("&"):""}function ea(a){return fa(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function fa(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ga(a,b){var c,d,e=ue.length;for(d=0;e>d;++d)if(c=ue[d]+b,x(c=a.getAttribute(c)))return c;return null}function ha(b){var c=b.currentScript;if(!c)return!0;if(!(c instanceof a.HTMLScriptElement||c instanceof a.SVGScriptElement))return!1;var d=c.attributes,e=[d.getNamedItem("src"),d.getNamedItem("href"),d.getNamedItem("xlink:href")];return e.every(function(a){if(!a)return!0;if(!a.value)return!1;var c=b.createElement("a");if(c.href=a.value,b.location.origin===c.origin)return!0;switch(c.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}function ia(b,c){var d,e,g={};if(f(ue,function(a){var c=a+"app";!d&&b.hasAttribute&&b.hasAttribute(c)&&(d=b,e=b.getAttribute(c))}),f(ue,function(a){var c,f=a+"app";!d&&(c=b.querySelector("["+f.replace(":","\\:")+"]"))&&(d=c,e=c.getAttribute(f))}),d){if(!ve)return void a.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");g.strictDi=null!==ga(d,"strict-di"),c(d,e?[e]:[],g)}}function ja(b,c,d){v(d)||(d={});var e={strictDi:!1};d=l(e,d);var g=function(){if(b=be(b),b.injector()){var e=b[0]===a.document?"document":aa(b);throw je("btstrpd","App already bootstrapped with this element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"));
}c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),d.debugInfoEnabled&&c.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),c.unshift("ng");var f=lb(c,d.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},h=/^NG_ENABLE_DEBUG_INFO!/,i=/^NG_DEFER_BOOTSTRAP!/;return a&&h.test(a.name)&&(d.debugInfoEnabled=!0,a.name=a.name.replace(h,"")),a&&!i.test(a.name)?g():(a.name=a.name.replace(i,""),ke.resumeBootstrap=function(a){return f(a,function(a){c.push(a)}),g()},void(A(ke.resumeDeferredBootstrap)&&ke.resumeDeferredBootstrap()))}function ka(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function la(a){var b=ke.element(a).injector();if(!b)throw je("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ma(a,b){return b=b||"_",a.replace(we,function(a,c){return(c?b:"")+a.toLowerCase()})}function na(){var b;if(!xe){var c=se();ce=t(c)?a.jQuery:c?a[c]:void 0,ce&&ce.fn.on?(be=ce,l(ce.fn,{scope:Re.scope,isolateScope:Re.isolateScope,controller:Re.controller,injector:Re.injector,inheritedData:Re.inheritedData}),b=ce.cleanData,ce.cleanData=function(a){for(var c,d,e=0;null!=(d=a[e]);e++)c=ce._data(d,"events"),c&&c.$destroy&&ce(d).triggerHandler("$destroy");b(a)}):be=Ka,ke.element=be,xe=!0}}function oa(a,b,c){if(!a)throw je("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function pa(a,b,c){return c&&ne(a)&&(a=a[a.length-1]),oa(A(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function qa(a,b){if("hasOwnProperty"===a)throw je("badname","hasOwnProperty is not a valid {0} name",b)}function ra(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&A(a)?V(f,a):a}function sa(a){for(var b,c=a[0],d=a[a.length-1],e=1;c!==d&&(c=c.nextSibling);e++)(b||a[e]!==c)&&(b||(b=be(ee.call(a,0,e))),b.push(c));return b||a}function ta(){return Object.create(null)}function ua(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=!s(a)||ne(a)||z(a)?X(a):a.toString()}return a}function va(a){function c(a,b,c){return a[b]||(a[b]=c())}var d=b("$injector"),e=b("ng"),f=c(a,"angular",Object);return f.$$minErr=f.$$minErr||b,c(f,"module",function(){var a={};return function(b,f,g){var h={},i=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return i(b,"module"),f&&a.hasOwnProperty(b)&&(a[b]=null),c(a,b,function(){function a(a,b,c,d){return d||(d=i),function(){return d[c||"push"]([a,b,arguments]),m}}function c(a,c,d){return d||(d=i),function(e,f){return f&&A(f)&&(f.$$moduleName=b),d.push([a,c,arguments]),m}}if(!f)throw d("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",b);var i=[],j=[],k=[],l=a("$injector","invoke","push",j),m={_invokeQueue:i,_configBlocks:j,_runBlocks:k,info:function(a){if(u(a)){if(!v(a))throw e("aobj","Argument '{0}' must be an object","value");return h=a,this}return h},requires:f,name:b,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:c("$provide","decorator",j),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:l,run:function(a){return k.push(a),this}};return g&&l(g),m})}})}function wa(a,b){if(ne(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(v(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function xa(a,b){var c=[];return d(b)&&(a=Q(a,null,b)),JSON.stringify(a,function(a,b){if(b=W(a,b),v(b)){if(c.indexOf(b)>=0)return"...";c.push(b)}return b})}function ya(a,b){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):t(a)?"undefined":"string"!=typeof a?xa(a,b):a}function za(d){l(d,{errorHandlingConfig:c,bootstrap:ja,copy:Q,extend:l,merge:m,equals:S,element:be,forEach:f,injector:lb,noop:p,bind:V,toJson:X,fromJson:Y,identity:q,isUndefined:t,isDefined:u,isString:x,isFunction:A,isObject:v,isNumber:y,isElement:L,isArray:ne,version:Ee,isDate:z,lowercase:Yd,uppercase:Zd,callbacks:{$$counter:0},getTestability:la,reloadWithDebugInfo:ka,$$minErr:b,$$csp:re,$$encodeUriSegment:ea,$$encodeUriQuery:fa,$$stringify:ua}),de=va(a),de("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Dc}),a.provider("$compile",wb).directive({a:$f,input:sg,textarea:sg,form:eg,script:mh,select:ph,option:qh,ngBind:vg,ngBindHtml:xg,ngBindTemplate:wg,ngClass:zg,ngClassEven:Bg,ngClassOdd:Ag,ngCloak:Cg,ngController:Dg,ngForm:fg,ngHide:fh,ngIf:Gg,ngInclude:Hg,ngInit:Jg,ngNonBindable:Yg,ngPluralize:ah,ngRepeat:bh,ngShow:eh,ngStyle:gh,ngSwitch:hh,ngSwitchWhen:ih,ngSwitchDefault:jh,ngOptions:_g,ngTransclude:lh,ngModel:Vg,ngList:Kg,ngChange:yg,pattern:sh,ngPattern:sh,required:rh,ngRequired:rh,minlength:uh,ngMinlength:uh,maxlength:th,ngMaxlength:th,ngValue:ug,ngModelOptions:Xg}).directive({ngInclude:Ig}).directive(_f).directive(Eg),a.provider({$anchorScroll:mb,$animate:hf,$animateCss:lf,$$animateJs:ff,$$animateQueue:gf,$$AnimateRunner:kf,$$animateAsyncRun:jf,$browser:sb,$cacheFactory:tb,$controller:Cb,$document:Db,$$isDocumentHidden:Eb,$exceptionHandler:Fb,$filter:Sc,$$forceReflow:sf,$interpolate:Tb,$interval:Ub,$http:Pb,$httpParamSerializer:Hb,$httpParamSerializerJQLike:Ib,$httpBackend:Rb,$xhrFactory:Qb,$jsonpCallbacks:Af,$location:hc,$log:ic,$parse:xc,$rootScope:Cc,$q:yc,$$q:zc,$sce:Ic,$sceDelegate:Hc,$sniffer:Jc,$templateCache:ub,$templateRequest:Kc,$$testability:Lc,$timeout:Mc,$window:Pc,$$rAF:Bc,$$jqLite:eb,$$Map:Xe,$$cookieReader:Rc})}]).info({angularVersion:"1.6.4"})}function Aa(){return++Ge}function Ba(a){return Da(a.replace(Ie,"ms-"))}function Ca(a,b){return b.toUpperCase()}function Da(a){return a.replace(He,Ca)}function Ea(a){return!Me.test(a)}function Fa(a){var b=a.nodeType;return b===ye||!b||b===Ce}function Ga(a){for(var b in Fe[a.ng339])return!0;return!1}function Ha(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(Ea(a))i.push(b.createTextNode(a));else{for(c=h.appendChild(b.createElement("div")),d=(Ne.exec(a)||["",""])[1].toLowerCase(),e=Pe[d]||Pe._default,c.innerHTML=e[1]+a.replace(Oe,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=T(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function Ia(b,c){c=c||a.document;var d;return(d=Le.exec(b))?[c.createElement(d[1])]:(d=Ha(b,c))?d.childNodes:[]}function Ja(a,b){var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)}function Ka(a){if(a instanceof Ka)return a;var b;if(x(a)&&(a=pe(a),b=!0),!(this instanceof Ka)){if(b&&"<"!==a.charAt(0))throw Ke("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ka(a)}b?Ua(this,Ia(a)):A(a)?$a(a):Ua(this,a)}function La(a){return a.cloneNode(!0)}function Ma(a,b){!b&&Fa(a)&&be.cleanData([a]),a.querySelectorAll&&be.cleanData(a.querySelectorAll("*"))}function Na(a,b,c,d){if(u(d))throw Ke("offargs","jqLite#off() does not support the `selector` argument");var e=Pa(a),g=e&&e.events,h=e&&e.handle;if(h)if(b){var i=function(b){var d=g[b];u(c)&&P(d||[],c),u(c)&&d&&d.length>0||(a.removeEventListener(b,h),delete g[b])};f(b.split(" "),function(a){i(a),Je[a]&&i(Je[a])})}else for(b in g)"$destroy"!==b&&a.removeEventListener(b,h),delete g[b]}function Oa(a,b){var c=a.ng339,d=c&&Fe[c];if(d){if(b)return void delete d.data[b];d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Na(a)),delete Fe[c],a.ng339=void 0}}function Pa(a,b){var c=a.ng339,d=c&&Fe[c];return b&&!d&&(a.ng339=c=Aa(),d=Fe[c]={events:{},data:{},handle:void 0}),d}function Qa(a,b,c){if(Fa(a)){var d,e=u(c),f=!e&&b&&!v(b),g=!b,h=Pa(a,!f),i=h&&h.data;if(e)i[Da(b)]=c;else{if(g)return i;if(f)return i&&i[Da(b)];for(d in b)i[Da(d)]=b[d]}}}function Ra(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Sa(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",pe((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+pe(b)+" "," ")))})}function Ta(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=pe(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",pe(c))}}function Ua(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Va(a,b){return Wa(a,"$"+(b||"ngController")+"Controller")}function Wa(a,b,c){a.nodeType===Ce&&(a=a.documentElement);for(var d=ne(b)?b:[b];a;){for(var e=0,f=d.length;f>e;e++)if(u(c=be.data(a,d[e])))return c;a=a.parentNode||a.nodeType===De&&a.host}}function Xa(a){for(Ma(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ya(a,b){b||Ma(a);var c=a.parentNode;c&&c.removeChild(a)}function Za(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):be(c).on("load",b)}function $a(b){function c(){a.document.removeEventListener("DOMContentLoaded",c),a.removeEventListener("load",c),b()}"complete"===a.document.readyState?a.setTimeout(b):(a.document.addEventListener("DOMContentLoaded",c),a.addEventListener("load",c))}function _a(a,b){var c=Se[b.toLowerCase()];return c&&Te[N(a)]&&c}function ab(a){return Ue[a]}function bb(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(t(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0};var h=e.specialHandlerWrapper||cb;f>1&&(e=wa(e));for(var i=0;f>i;i++)c.isImmediatePropagationStopped()||h(a,c,e[i])}};return c.elem=a,c}function cb(a,b,c){c.call(a,b)}function db(a,b,c){var d=b.relatedTarget;(!d||d!==a&&!Qe.call(a,d))&&c.call(a,b)}function eb(){this.$get=function(){return l(Ka,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ra(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Ta(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Sa(a,b)}})}}function fb(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||i)():d+":"+a}function gb(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function hb(a){return Function.prototype.toString.call(a)}function ib(a){var b=hb(a).replace(af,""),c=b.match(Ye)||b.match(Ze);return c}function jb(a){var b=ib(a);return b?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function kb(a,b,c){var d,e,g;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw x(c)&&c||(c=a.name||jb(a)),bf("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=ib(a),f(e[1].split($e),function(a){a.replace(_e,function(a,b,c){d.push(c)})})}a.$inject=d}}else ne(a)?(g=a.length-1,pa(a[g],"fn"),d=a.slice(0,g)):pa(a,"fn",!0);return d}function lb(a,b){function c(a){return function(b,c){return v(b)?void f(b,h(a)):a(b,c)}}function d(a,b){if(qa(a,"service"),(A(b)||ne(b))&&(b=w.instantiate(b)),!b.$get)throw bf("pget","Provider '{0}' must define $get factory method.",a);return u[a+p]=b}function e(a,b){return function(){var c=B.invoke(b,this);if(t(c))throw bf("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function g(a,b,c){return d(a,{$get:c!==!1?e(a,b):b})}function i(a,b){return g(a,["$injector",function(a){return a.instantiate(b)}])}function j(a,b){return g(a,r(b),!1)}function k(a,b){qa(a,"constant"),u[a]=b,y[a]=b}function l(a,b){var c=w.get(a+p),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}function m(a){oa(t(a)||ne(a),"modulesToLoad","not an array");var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=w.get(d[0]);e[d[1]].apply(e,d[2])}}if(!s.get(a)){s.set(a,!0);try{x(a)?(b=de(a),B.modules[a]=b,c=c.concat(m(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):A(a)?c.push(w.invoke(a)):ne(a)?c.push(w.invoke(a)):pa(a,"module")}catch(e){throw ne(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),bf("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function n(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===o)throw bf("cdep","Circular dependency found: {0}",b+" <- "+q.join(" <- "));return a[b]}try{return q.unshift(b),a[b]=o,a[b]=c(b,d),a[b]}catch(e){throw a[b]===o&&delete a[b],e}finally{q.shift()}}function e(a,c,e){for(var f=[],g=lb.$$annotate(a,b,e),h=0,i=g.length;i>h;h++){var j=g[h];if("string"!=typeof j)throw bf("itkn","Incorrect injection token! Expected service name as string, got {0}",j);f.push(c&&c.hasOwnProperty(j)?c[j]:d(j,e))}return f}function f(a){if(ae||"function"!=typeof a)return!1;var b=a.$$ngIsClass;return H(b)||(b=a.$$ngIsClass=/^(?:class\b|constructor\()/.test(hb(a))),b}function g(a,b,c,d){"string"==typeof c&&(d=c,c=null);var g=e(a,c,d);return ne(a)&&(a=a[a.length-1]),f(a)?(g.unshift(null),new(Function.prototype.bind.apply(a,g))):a.apply(b,g)}function h(a,b,c){var d=ne(a)?a[a.length-1]:a,f=e(a,b,c);return f.unshift(null),new(Function.prototype.bind.apply(d,f))}return{invoke:g,instantiate:h,get:d,annotate:lb.$$annotate,has:function(b){return u.hasOwnProperty(b+p)||a.hasOwnProperty(b)}}}b=b===!0;var o={},p="Provider",q=[],s=new We,u={$provide:{provider:c(d),factory:c(g),service:c(i),value:c(j),constant:c(k),decorator:l}},w=u.$injector=n(u,function(a,b){throw ke.isString(b)&&q.push(b),bf("unpr","Unknown provider: {0}",q.join(" <- "))}),y={},z=n(y,function(a,b){var c=w.get(a+p,b);return B.invoke(c.$get,c,void 0,a)}),B=z;u["$injector"+p]={$get:r(z)},B.modules=w.modules=ta();var C=m(a);return B=z.get("$injector"),B.strictDi=b,f(C,function(a){a&&B.invoke(a)}),B}function mb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===N(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(A(a))a=a();else if(L(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else y(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(a){a=x(a)?a:y(a)?a.toString():c.hash();var b;a?(b=i.getElementById(a))?g(b):(b=e(i.getElementsByName(a)))?g(b):"top"===a&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Za(function(){d.$evalAsync(h)})}),h}]}function nb(a,b){return a||b?a?b?(ne(a)&&(a=a.join(" ")),ne(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function ob(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===df)return c}}function pb(a){x(a)&&(a=a.split(" "));var b=ta();return f(a,function(a){a.length&&(b[a]=!0)}),b}function qb(a){return v(a)?a:{}}function rb(a,b,c,d){function e(a){try{a.apply(null,U(arguments,1))}finally{if(r--,0===r)for(;s.length;)try{s.pop()()}catch(b){c.error(b)}}}function g(a){var b=a.indexOf("#");return-1===b?"":a.substr(b)}function h(){y=null,j()}function i(){u=z(),u=t(u)?null:u,S(u,C)&&(u=C),C=u,v=u}function j(){var a=v;i(),(w!==k.url()||a!==u)&&(w=k.url(),v=u,f(A,function(a){a(k.url(),u)}))}var k=this,l=a.location,m=a.history,n=a.setTimeout,o=a.clearTimeout,q={};k.isMock=!1;var r=0,s=[];k.$$completeOutstandingRequest=e,k.$$incOutstandingRequestCount=function(){r++},k.notifyWhenNoOutstandingRequests=function(a){0===r?a():s.push(a)};var u,v,w=l.href,x=b.find("base"),y=null,z=d.history?function(){try{return m.state}catch(a){}}:p;i(),k.url=function(b,c,e){if(t(e)&&(e=null),l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){var f=v===e;if(w===b&&(!d.history||f))return k;var h=w&&$b(w)===$b(b);return w=b,v=e,!d.history||h&&f?(h||(y=b),c?l.replace(b):h?l.hash=g(b):l.href=b,l.href!==b&&(y=b)):(m[c?"replaceState":"pushState"](e,"",b),i()),y&&(y=b),k}return y||l.href.replace(/%27/g,"'")},k.state=function(){return u};var A=[],B=!1,C=null;k.onUrlChange=function(b){return B||(d.history&&be(a).on("popstate",h),be(a).on("hashchange",h),B=!0),A.push(b),b},k.$$applicationDestroyed=function(){be(a).off("hashchange popstate",h)},k.$$checkUrlChange=j,k.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?:)?\/\/[^\/]*/,""):""},k.defer=function(a,b){var c;return r++,c=n(function(){delete q[c],e(a)},b||0),q[c]=!0,c},k.defer.cancel=function(a){return q[a]?(delete q[a],o(a),e(p),!0):!1}}function sb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new rb(a,d,b,c)}]}function tb(){this.$get=function(){function a(a,d){function e(a){a!==m&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in c)throw b("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},d,{id:a}),i=ta(),j=d&&d.capacity||Number.MAX_VALUE,k=ta(),m=null,n=null;return c[a]={put:function(a,b){if(!t(b)){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b}},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b===m&&(m=b.p),b===n&&(n=b.n),f(b.n,b.p),delete k[a]}a in i&&(delete i[a],g--)},removeAll:function(){i=ta(),g=0,k=ta(),m=n=null},destroy:function(){i=null,h=null,k=null,delete c[a]},info:function(){return l({},h,{size:g})}}}var c={};return a.info=function(){var a={};return f(c,function(b,c){a[c]=b.info()}),a},a.get=function(a){return c[a]},a}}function ub(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function vb(){}function wb(b,c){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,e=ta();return f(a,function(a,f){if(a in B)return void(e[f]=B[a]);var g=a.match(d);if(!g)throw mf("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f},g[4]&&(B[a]=e[f])}),e}function e(a,b){var c={isolateScope:null,bindToController:null};if(v(a.scope)&&(a.bindToController===!0?(c.bindToController=d(a.scope,b,!0),c.isolateScope={}):c.isolateScope=d(a.scope,b,!1)),v(a.bindToController)&&(c.bindToController=d(a.bindToController,b,!0)),c.bindToController&&!a.controller)throw mf("noctrl","Cannot bind to controller without directive '{0}'s controller.",b);return c}function g(a){var b=a.charAt(0);if(!b||b!==Yd(b))throw mf("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw mf("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a)}function i(a){var b=a.require||a.controller&&a.name;return!ne(b)&&v(b)&&f(b,function(a,c){var d=a.match(y),e=a.substring(d[0].length);e||(b[c]=d[0]+c)}),b}function j(a,b){if(a&&(!x(a)||!/[EACM]/.test(a)))throw mf("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",a,b);return a||"EA"}var k={},m="Directive",n=/^\s*directive:\s*([\w-]+)\s+(.*)$/,s=/(([\w-]+)(?::([^;]+))?;?)/,w=M("ngSrc,ngSrcset,src,srcset"),y=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,z=/^(on[a-z]+|formaction)$/,B=ta();this.directive=function J(a,c){return oa(a,"name"),qa(a,"directive"),x(a)?(g(a),oa(c,"directiveFactory"),k.hasOwnProperty(a)||(k[a]=[],b.factory(a+m,["$injector","$exceptionHandler",function(b,c){var d=[];return f(k[a],function(e,f){try{var g=b.invoke(e);A(g)?g={compile:r(g)}:!g.compile&&g.link&&(g.compile=r(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||a,g.require=i(g),g.restrict=j(g.restrict,a),g.$$moduleName=e.$$moduleName,d.push(g)}catch(h){c(h)}}),d}])),k[a].push(c)):f(a,h(J)),this},this.component=function(a,b){function c(a){function c(b){return A(b)||ne(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var e=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:Bb(b.controller)||b.controllerAs||"$ctrl",template:c(e),templateUrl:c(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};return f(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)}),g}var d=b.controller||function(){};return f(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,A(d)&&(d[b]=a))}),c.$inject=["$injector"],this.directive(a,c)},this.aHrefSanitizationWhitelist=function(a){return u(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return u(a)?(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};var C=!0;this.debugInfoEnabled=function(a){return u(a)?(C=a,this):C};var E=!1;this.preAssignBindingsEnabled=function(a){return u(a)?(E=a,this):E};var F=10;this.onChangesTtl=function(a){return arguments.length?(F=a,this):F};var G=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(G=a,this):G};var I=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(I=a,this):I},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(b,c,d,g,h,i,j,r,B,J){function K(){try{if(!--Da)throw ya=void 0,mf("infchng","{0} $onChanges() iterations reached. Aborting!\n",F);j.$apply(function(){for(var a=[],b=0,c=ya.length;c>b;++b)try{ya[b]()}catch(d){a.push(d)}if(ya=void 0,a.length)throw a})}finally{Da++}}function L(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a}function M(a,b,c){Aa.innerHTML="<span "+b+">";var d=Aa.firstChild.attributes,e=d[0];d.removeNamedItem(e.name),e.value=c,a.attributes.setNamedItem(e)}function O(a,b){try{a.addClass(b)}catch(c){}}function Q(a,b,c,d,e){a instanceof be||(a=be(a));var f=W(a,b,a,c,d,e);Q.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw mf("multilink","This element has already been linked.");oa(b,"scope"),e&&e.needsNewScope&&(b=b.$parent.$new()),d=d||{};var h=d.parentBoundTranscludeFn,i=d.transcludeControllers,j=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude),g||(g=T(j));var k;if(k="html"!==g?be(qa(g,be("<div>").append(a).html())):c?Re.clone.call(a):a,i)for(var l in i)k.data("$"+l+"Controller",i[l].instance);return Q.$$addScopeInfo(k,b),c&&c(k,b),f&&f(b,k,k,h),c||(a=f=null),k}}function T(a){var b=a&&a[0];return b&&"foreignobject"!==N(b)&&he.call(b).match(/SVG/)?"svg":"html"}function W(a,b,c,d,e,f){function g(a,c,d,e){var f,g,h,i,j,k,l,m,p;if(n){var q=c.length;for(p=new Array(q),j=0;j<o.length;j+=3)l=o[j],p[l]=c[l]}else p=c;for(j=0,k=o.length;k>j;)h=p[o[j++]],f=o[j++],g=o[j++],f?(f.scope?(i=a.$new(),Q.$$addScopeInfo(be(h),i)):i=a,m=f.transcludeOnThisElement?Y(a,f.transclude,e):!f.templateOnThisElement&&e?e:!e&&b?Y(a,b):null,f(g,i,h,d,m)):g&&g(a,h.childNodes,void 0,e)}for(var h,i,j,k,l,m,n,o=[],p=ne(a)||a instanceof be,q=0;q<a.length;q++)h=new L,11===ae&&X(a,q,p),i=Z(a[q],[],h,0===q?d:void 0,e),j=i.length?da(i,a[q],h,b,c,null,[],[],f):null,j&&j.scope&&Q.$$addScopeClass(h.$$element),l=j&&j.terminal||!(k=a[q].childNodes)||!k.length?null:W(k,j?(j.transcludeOnThisElement||!j.templateOnThisElement)&&j.transclude:b),(j||l)&&(o.push(q,j,l),m=!0,n=n||j),f=null;return m?g:null}function X(a,b,c){var d,e=a[b],f=e.parentNode;if(e.nodeType===Ae)for(;;){if(d=f?e.nextSibling:a[b+1],!d||d.nodeType!==Ae)break;e.nodeValue=e.nodeValue+d.nodeValue,d.parentNode&&d.parentNode.removeChild(d),c&&d===a[b+1]&&a.splice(b+1,1)}}function Y(a,b,c){function d(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}var e=d.$$slots=ta();for(var f in b.$$slots)b.$$slots[f]?e[f]=Y(a,b.$$slots[f],c):e[f]=null;return d}function Z(a,b,c,d,e){var f,g,h,i=a.nodeType,j=c.$attr;switch(i){case ye:g=N(a),ha(b,yb(g),"E",d,e);for(var k,l,m,n,o,p,q=a.attributes,r=0,t=q&&q.length;t>r;r++){var u=!1,w=!1;k=q[r],l=k.name,o=k.value,n=yb(l),p=Ia.test(n),p&&(l=l.replace(of,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=n.match(Ja);y&&ia(y[1])&&(u=l,w=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6)),m=yb(l.toLowerCase()),j[m]=l,(p||!c.hasOwnProperty(m))&&(c[m]=o,_a(a,m)&&(c[m]=!0)),sa(a,b,o,m,p),ha(b,m,"A",d,e,u,w)}if("input"===g&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off"),!Ca)break;if(h=a.className,v(h)&&(h=h.animVal),x(h)&&""!==h)for(;f=s.exec(h);)m=yb(f[2]),ha(b,m,"C",d,e)&&(c[m]=pe(f[3])),h=h.substr(f.index+f[0].length);break;case Ae:pa(b,a.nodeValue);break;case Be:if(!Ba)break;$(a,b,c,d,e)}return b.sort(la),b}function $(a,b,c,d,e){try{var f=n.exec(a.nodeValue);if(f){var g=yb(f[1]);ha(b,g,"M",d,e)&&(c[g]=pe(f[2]))}}catch(h){}}function _(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw mf("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType===ye&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return be(d)}function ba(a,b,c){return function(d,e,f,g,h){return e=_(e[0],b,c),a(d,e,f,g,h)}}function ca(a,b,c,d,e,f){var g;return a?Q(b,c,d,e,f):function(){return g||(g=Q(b,c,d,e,f),b=c=f=null),g.apply(this,arguments)}}function da(a,b,c,e,g,h,i,j,k){function m(a,b,c,d){a&&(c&&(a=ba(a,c,d)),a.require=o.require,a.directiveName=p,(y===o||o.$$isolateScope)&&(a=va(a,{isolateScope:!0})),i.push(a)),b&&(c&&(b=ba(b,c,d)),b.require=o.require,b.directiveName=p,(y===o||o.$$isolateScope)&&(b=va(b,{isolateScope:!0})),j.push(b))}function n(a,e,g,h,k){function m(a,b,c,d){var e;if(D(a)||(d=c,c=b,b=a,a=void 0),G&&(e=s),c||(c=G?B.parent():B),!d)return k(a,b,e,c,N);var f=k.$$slots[d];if(f)return f(a,b,e,c,N);if(t(f))throw mf("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',d,aa(B))}var n,o,p,q,r,s,u,B,C,F;b===g?(C=c,B=c.$$element):(B=be(g),C=new L(B,c)),r=e,y?q=e.$new(!0):w&&(r=e.$parent),k&&(u=m,u.$$boundTransclude=k,u.isSlotFilled=function(a){return!!k.$$slots[a]}),x&&(s=fa(B,C,u,x,q,e,y)),y&&(Q.$$addScopeInfo(B,q,!0,!(z&&(z===y||z===y.$$originalDirective))),Q.$$addScopeClass(B,!0),q.$$isolateBindings=y.$$isolateBindings,F=xa(e,C,q,q.$$isolateBindings,y),F.removeWatches&&q.$on("$destroy",F.removeWatches));for(var H in s){var I=x[H],J=s[H],K=I.$$bindings.bindToController;if(E){K?J.bindingInfo=xa(r,C,J.instance,K,I):J.bindingInfo={};var M=J();M!==J.instance&&(J.instance=M,B.data("$"+I.name+"Controller",M),J.bindingInfo.removeWatches&&J.bindingInfo.removeWatches(),J.bindingInfo=xa(r,C,J.instance,K,I))}else J.instance=J(),B.data("$"+I.name+"Controller",J.instance),J.bindingInfo=xa(r,C,J.instance,K,I)}for(f(x,function(a,b){var c=a.require;a.bindToController&&!ne(c)&&v(c)&&l(s[b].instance,ea(b,c,B,s))}),f(s,function(a){var b=a.instance;if(A(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(c){d(c)}if(A(b.$onInit))try{b.$onInit()}catch(c){d(c)}A(b.$doCheck)&&(r.$watch(function(){b.$doCheck()}),b.$doCheck()),A(b.$onDestroy)&&r.$on("$destroy",function(){b.$onDestroy()})}),n=0,o=i.length;o>n;n++)p=i[n],wa(p,p.isolateScope?q:e,B,C,p.require&&ea(p.directiveName,p.require,B,s),u);var N=e;for(y&&(y.template||null===y.templateUrl)&&(N=q),a&&a(N,g.childNodes,void 0,k),n=j.length-1;n>=0;n--)p=j[n],wa(p,p.isolateScope?q:e,B,C,p.require&&ea(p.directiveName,p.require,B,s),u);f(s,function(a){var b=a.instance;A(b.$postLink)&&b.$postLink()})}k=k||{};for(var o,p,q,r,s,u=-Number.MAX_VALUE,w=k.newScopeDirective,x=k.controllerDirectives,y=k.newIsolateScopeDirective,z=k.templateDirective,B=k.nonTlbTranscludeDirective,C=!1,F=!1,G=k.hasElementTranscludeDirective,H=c.$$element=be(b),I=h,J=e,K=!1,M=!1,O=0,P=a.length;P>O;O++){o=a[O];var R=o.$$start,S=o.$$end;if(R&&(H=_(b,R,S)),q=void 0,u>o.priority)break;if(s=o.scope,s&&(o.templateUrl||(v(s)?(na("new/isolated scope",y||w,o,H),y=o):na("new/isolated scope",y,o,H)),w=w||o),p=o.name,!K&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(var T,W=O+1;T=a[W++];)if(T.transclude&&!T.$$tlb||T.replace&&(T.templateUrl||T.template)){M=!0;break}K=!0}if(!o.templateUrl&&o.controller&&(x=x||ta(),na("'"+p+"' controller",x[p],o,H),x[p]=o),s=o.transclude)if(C=!0,o.$$tlb||(na("transclusion",B,o,H),B=o),"element"===s)G=!0,u=o.priority,q=H,H=c.$$element=be(Q.$$createComment(p,c[p])),b=H[0],ua(g,U(q),b),q[0].$$parentNode=q[0].parentNode,J=ca(M,q,e,u,I&&I.name,{nonTlbTranscludeDirective:B});else{var X=ta();if(v(s)){q=[];var Y=ta(),$=ta();f(s,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a,Y[a]=b,X[b]=null,$[b]=c}),f(H.contents(),function(a){var b=Y[yb(N(a))];b?($[b]=!0,X[b]=X[b]||[],X[b].push(a)):q.push(a)}),f($,function(a,b){if(!a)throw mf("reqslot","Required transclusion slot `{0}` was not filled.",b)});for(var da in X)X[da]&&(X[da]=ca(M,X[da],e))}else q=be(La(b)).contents();H.empty(),J=ca(M,q,e,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope}),J.$$slots=X}if(o.template)if(F=!0,na("template",z,o,H),z=o,s=A(o.template)?o.template(H,c):o.template,s=Ha(s),o.replace){if(I=o,q=Ea(s)?[]:Ab(qa(o.templateNamespace,pe(s))),b=q[0],1!==q.length||b.nodeType!==ye)throw mf("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");ua(g,H,b);var ha={$attr:{}},ia=Z(b,[],ha),la=a.splice(O+1,a.length-(O+1));(y||w)&&ga(ia,y,w),a=a.concat(ia).concat(la),ja(c,ha),P=a.length}else H.html(s);if(o.templateUrl)F=!0,na("template",z,o,H),z=o,o.replace&&(I=o),n=ka(a.splice(O,a.length-O),H,c,g,C&&J,i,j,{controllerDirectives:x,newScopeDirective:w!==o&&w,newIsolateScopeDirective:y,templateDirective:z,nonTlbTranscludeDirective:B}),P=a.length;else if(o.compile)try{r=o.compile(H,c,J);var ma=o.$$originalDirective||o;A(r)?m(null,V(ma,r),R,S):r&&m(V(ma,r.pre),V(ma,r.post),R,S)}catch(oa){d(oa,aa(H))}o.terminal&&(n.terminal=!0,u=Math.max(u,o.priority))}return n.scope=w&&w.scope===!0,n.transcludeOnThisElement=C,n.templateOnThisElement=F,n.transclude=J,k.hasElementTranscludeDirective=G,n}function ea(a,b,c,d){var e;if(x(b)){var g=b.match(y),h=b.substring(g[0].length),i=g[1]||g[3],j="?"===g[2];if("^^"===i?c=c.parent():(e=d&&d[h],e=e&&e.instance),!e){var k="$"+h+"Controller";e=i?c.inheritedData(k):c.data(k)}if(!e&&!j)throw mf("ctreq","Controller '{0}', required by directive '{1}', can't be found!",h,a)}else if(ne(b)){e=[];for(var l=0,m=b.length;m>l;l++)e[l]=ea(a,b[l],c,d)}else v(b)&&(e={},f(b,function(b,f){e[f]=ea(a,b,c,d)}));return e||null}function fa(a,b,c,d,e,f,g){var h=ta();for(var j in d){var k=d[j],l={$scope:k===g||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},m=k.controller;"@"===m&&(m=b[k.name]);var n=i(m,l,!0,k.controllerAs);h[k.name]=n,a.data("$"+k.name+"Controller",n.instance)}return h}function ga(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d]=o(a[d],{$$isolateScope:b,$$newScope:c})}function ha(a,c,d,f,g,h,i){if(c===g)return null;var j=null;if(k.hasOwnProperty(c))for(var l,n=b.get(c+m),p=0,q=n.length;q>p;p++)if(l=n[p],(t(f)||f>l.priority)&&-1!==l.restrict.indexOf(d)){if(h&&(l=o(l,{$$start:h,$$end:i})),!l.$$bindings){var r=l.$$bindings=e(l,l.name);v(r.isolateScope)&&(l.$$isolateBindings=r.isolateScope)}a.push(l),j=l}return j}function ia(a){if(k.hasOwnProperty(a))for(var c,d=b.get(a+m),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1;
}function ja(a,b){var c=b.$attr,d=a.$attr;f(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d.length?d+=("style"===e?";":" ")+b[e]:d=b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function ka(a,b,c,e,h,i,j,k){var l,m,n=[],p=b[0],q=a.shift(),r=o(q,{templateUrl:null,transclude:null,replace:null,$$originalDirective:q}),s=A(q.templateUrl)?q.templateUrl(b,c):q.templateUrl,t=q.templateNamespace;return b.empty(),g(s).then(function(d){var g,o,u,w;if(d=Ha(d),q.replace){if(u=Ea(d)?[]:Ab(qa(t,pe(d))),g=u[0],1!==u.length||g.nodeType!==ye)throw mf("tplrt","Template for directive '{0}' must have exactly one root element. {1}",q.name,s);o={$attr:{}},ua(e,b,g);var x=Z(g,[],o);v(q.scope)&&ga(x,!0),a=x.concat(a),ja(c,o)}else g=p,b.html(d);for(a.unshift(r),l=da(a,g,c,h,b,q,i,j,k),f(e,function(a,c){a===g&&(e[c]=b[0])}),m=W(b[0].childNodes,h);n.length;){var y=n.shift(),z=n.shift(),A=n.shift(),B=n.shift(),C=b[0];if(!y.$$destroyed){if(z!==p){var D=z.className;k.hasElementTranscludeDirective&&q.replace||(C=La(g)),ua(A,be(z),C),O(be(C),D)}w=l.transcludeOnThisElement?Y(y,l.transclude,B):B,l(m,y,C,e,w)}}n=null})["catch"](function(a){a instanceof Error&&d(a)}),function(a,b,c,d,e){var f=e;b.$$destroyed||(n?n.push(b,c,d,f):(l.transcludeOnThisElement&&(f=Y(b,l.transclude,e)),l(m,b,c,d,f)))}}function la(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function na(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw mf("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,aa(d))}function pa(a,b){var d=c(b,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent(),c=!!b.length;return c&&Q.$$addBindingClass(b),function(a,b){var e=b.parent();c||Q.$$addBindingClass(e),Q.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){b[0].nodeValue=a})}}})}function qa(b,c){switch(b=Yd(b||"html")){case"svg":case"math":var d=a.document.createElement("div");return d.innerHTML="<"+b+">"+c+"</"+b+">",d.childNodes[0].childNodes;default:return c}}function ra(a,b){if("srcdoc"===b)return r.HTML;var c=N(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return r.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b||"link"===c&&"href"===b)return r.RESOURCE_URL}function sa(a,b,d,e,f){var g=ra(a,e),h=!f,i=w[e]||f,j=c(d,h,g,i);if(j){if("multiple"===e&&"select"===N(a))throw mf("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",aa(a));if(z.test(e))throw mf("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");b.push({priority:100,compile:function(){return{pre:function(a,b,f){var h=f.$$observers||(f.$$observers=ta()),k=f[e];k!==d&&(j=k&&c(k,!0,g,i),d=k),j&&(f[e]=j(a),(h[e]||(h[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(j,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function ua(b,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(b)for(e=0,f=b.length;f>e;e++)if(b[e]===g){b[e++]=d;for(var j=e,k=j+h-1,l=b.length;l>j;j++,k++)l>k?b[j]=b[k]:delete b[j];b.length-=h-1,b.context===g&&(b.context=d);break}i&&i.replaceChild(d,g);var m=a.document.createDocumentFragment();for(e=0;h>e;e++)m.appendChild(c[e]);for(be.hasData(g)&&(be.data(d,be.data(g)),be(g).off("$destroy")),be.cleanData(m.querySelectorAll("*")),e=1;h>e;e++)delete c[e];c[0]=d,c.length=1}function va(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function wa(a,b,c,e,f,g){try{a(b,c,e,f,g)}catch(h){d(h,aa(c))}}function xa(a,b,d,e,g){function i(b,c,e){A(d.$onChanges)&&!R(c,e)&&(ya||(a.$$postDigest(K),ya=[]),k||(k={},ya.push(j)),k[b]&&(e=k[b].previousValue),k[b]=new xb(e,c))}function j(){d.$onChanges(k),k=void 0}var k,l=[],m={};return f(e,function(e,f){var j,k,n,o,q,r=e.attrName,s=e.optional,t=e.mode;switch(t){case"@":s||Wd.call(b,r)||(d[f]=b[r]=void 0),q=b.$observe(r,function(a){if(x(a)||H(a)){var b=d[f];i(f,a,b),d[f]=a}}),b.$$observers[r].$$scope=a,j=b[r],x(j)?d[f]=c(j)(a):H(j)&&(d[f]=j),m[f]=new xb(nf,d[f]),l.push(q);break;case"=":if(!Wd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]),o=k.literal?S:R,n=k.assign||function(){throw j=d[f]=k(a),mf("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",b[r],r,g.name)},j=d[f]=k(a);var u=function(b){return o(b,d[f])||(o(b,j)?n(a,b=d[f]):d[f]=b),j=b};u.$stateful=!0,q=e.collection?a.$watchCollection(b[r],u):a.$watch(h(b[r],u),null,k.literal),l.push(q);break;case"<":if(!Wd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]);var v=k.literal,w=d[f]=k(a);m[f]=new xb(nf,d[f]),q=a.$watch(k,function(a,b){if(b===a){if(b===w||v&&S(b,w))return;b=w}i(f,a,b),d[f]=a},v),l.push(q);break;case"&":if(k=b.hasOwnProperty(r)?h(b[r]):p,k===p&&s)break;d[f]=function(b){return k(a,b)}}}),{initialChanges:m,removeWatches:l.length&&function(){for(var a=0,b=l.length;b>a;++a)l[a]()}}}var ya,za=/^\w/,Aa=a.document.createElement("div"),Ba=G,Ca=I,Da=F;L.prototype={$normalize:yb,$addClass:function(a){a&&a.length>0&&B.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&B.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=zb(a,b);c&&c.length&&B.addClass(this.$$element,c);var d=zb(b,a);d&&d.length&&B.removeClass(this.$$element,d)},$set:function(a,b,c,e){var g,h=this.$$element[0],i=_a(h,a),j=ab(a),k=a;if(i?(this.$$element.prop(a,b),e=i):j&&(this[j]=b,k=j),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a],e||(this.$attr[a]=e=ma(a,"-"))),g=N(this.$$element),"a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=J(b,"src"===a);else if("img"===g&&"srcset"===a&&u(b)){for(var l="",m=pe(b),n=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,o=/\s/.test(m)?n:/(,)/,p=m.split(o),q=Math.floor(p.length/2),r=0;q>r;r++){var s=2*r;l+=J(pe(p[s]),!0),l+=" "+pe(p[s+1])}var v=pe(p[2*r]).split(/\s/);l+=J(pe(v[0]),!0),2===v.length&&(l+=" "+pe(v[1])),this[a]=b=l}c!==!1&&(null===b||t(b)?this.$$element.removeAttr(e):za.test(e)?this.$$element.attr(e,b):M(this.$$element[0],e,b));var w=this.$$observers;w&&f(w[k],function(a){try{a(b)}catch(c){d(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ta()),e=d[a]||(d[a]=[]);return e.push(b),j.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||t(c[a])||b(c[a])}),function(){P(e,b)}}};var Fa=c.startSymbol(),Ga=c.endSymbol(),Ha="{{"===Fa&&"}}"===Ga?q:function(a){return a.replace(/\{\{/g,Fa).replace(/}}/g,Ga)},Ia=/^ngAttr[A-Z]/,Ja=/^(.+)Start$/;return Q.$$addBindingInfo=C?function(a,b){var c=a.data("$binding")||[];ne(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:p,Q.$$addBindingClass=C?function(a){O(a,"ng-binding")}:p,Q.$$addScopeInfo=C?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:p,Q.$$addScopeClass=C?function(a,b){O(a,b?"ng-isolate-scope":"ng-scope")}:p,Q.$$createComment=function(b,c){var d="";return C&&(d=" "+(b||"")+": ",c&&(d+=c+" ")),a.document.createComment(d)},Q}]}function xb(a,b){this.previousValue=a,this.currentValue=b}function yb(a){return a.replace(of,"").replace(pf,Ca)}function zb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g===e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function Ab(a){a=be(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];(c.nodeType===Be||c.nodeType===Ae&&""===c.nodeValue.trim())&&fe.call(a,b,1)}return a}function Bb(a,b){if(b&&x(b))return b;if(x(a)){var c=rf.exec(a);if(c)return c[3]}}function Cb(){var a={},c=!1;this.has=function(b){return a.hasOwnProperty(b)},this.register=function(b,c){qa(b,"controller"),v(b)?l(a,b):a[b]=c},this.allowGlobals=function(){c=!0},this.$get=["$injector","$window",function(d,e){function f(a,c,d,e){if(!a||!v(a.$scope))throw b("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,c);a.$scope[c]=d}return function(b,g,h,i){var j,k,m,n;if(h=h===!0,i&&x(i)&&(n=i),x(b)){if(k=b.match(rf),!k)throw qf("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",b);if(m=k[1],n=n||k[3],b=a.hasOwnProperty(m)?a[m]:ra(g.$scope,m,!0)||(c?ra(e,m,!0):void 0),!b)throw qf("ctrlreg","The controller with the name '{0}' is not registered.",m);pa(b,m,!0)}if(h){var o=(ne(b)?b[b.length-1]:b).prototype;return j=Object.create(o||null),n&&f(g,n,j,m||b.name),l(function(){var a=d.invoke(b,j,g,m);return a!==j&&(v(a)||A(a))&&(j=a,n&&f(g,n,j,m||b.name)),j},{instance:j,identifier:n})}return j=d.instantiate(b,g,m),n&&f(g,n,j,m||b.name),j}}]}function Db(){this.$get=["$window",function(a){return be(a.document)}]}function Eb(){this.$get=["$document","$rootScope",function(a,b){function c(){e=d.hidden}var d=a[0],e=d&&d.hidden;return a.on("visibilitychange",c),b.$on("$destroy",function(){a.off("visibilitychange",c)}),function(){return e}}]}function Fb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function Gb(a){return v(a)?z(a)?a.toISOString():X(a):a}function Hb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return g(a,function(a,c){null===a||t(a)||(ne(a)?f(a,function(a){b.push(fa(c)+"="+fa(Gb(a)))}):b.push(fa(c)+"="+fa(Gb(a))))}),b.join("&")}}}function Ib(){this.$get=function(){return function(a){function b(a,d,e){null===a||t(a)||(ne(a)?f(a,function(a,c){b(a,d+"["+(v(a)?c:"")+"]")}):v(a)&&!z(a)?g(a,function(a,c){b(a,d+(e?"":"[")+c+(e?"":"]"))}):c.push(fa(d)+"="+fa(Gb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function Jb(a,b){if(x(a)){var c=a.replace(xf,"").trim();if(c){var d=b("Content-Type");if(d&&0===d.indexOf(tf)||Kb(c))try{a=Y(c)}catch(e){throw yf("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',a,e)}}}return a}function Kb(a){var b=a.match(vf);return b&&wf[b[0]].test(a)}function Lb(a){function b(a,b){a&&(d[a]=d[a]?d[a]+", "+b:b)}var c,d=ta();return x(a)?f(a.split("\n"),function(a){c=a.indexOf(":"),b(Yd(pe(a.substr(0,c))),pe(a.substr(c+1)))}):v(a)&&f(a,function(a,c){b(Yd(c),pe(a))}),d}function Mb(a){var b;return function(c){if(b||(b=Lb(a)),c){var d=b[Yd(c)];return void 0===d&&(d=null),d}return b}}function Nb(a,b,c,d){return A(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function Ob(a){return a>=200&&300>a}function Pb(){var a=this.defaults={transformResponse:[Jb],transformRequest:[function(a){return!v(a)||E(a)||G(a)||F(a)?a:X(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:wa(uf),put:wa(uf),patch:wa(uf)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},c=!1;this.useApplyAsync=function(a){return u(a)?(c=!!a,this):c};var d=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(e,g,h,i,j,k,m,n){function o(c){function d(a,b){for(var c=0,d=b.length;d>c;){var e=b[c++],f=b[c++];a=a.then(e,f)}return b.length=0,a}function g(){e.$$completeOutstandingRequest(p)}function h(a,b){var c,d={};return f(a,function(a,e){A(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a}),d}function i(b){var c,d,e,f=a.headers,g=l({},b.headers);f=l({},f.common,f[Yd(b.method)]);a:for(c in f){d=Yd(c);for(e in g)if(Yd(e)===d)continue a;g[c]=f[c]}return h(g,wa(b))}function j(b){var c=b.headers,d=Nb(b.data,Mb(c),void 0,b.transformRequest);return t(d)&&f(c,function(a,b){"content-type"===Yd(b)&&delete c[b]}),t(b.withCredentials)&&!t(a.withCredentials)&&(b.withCredentials=a.withCredentials),s(b,d).then(o,o)}function o(a){var b=l({},a);return b.data=Nb(a.data,a.headers,a.status,q.transformResponse),Ob(a.status)?b:k.reject(b)}if(!v(c))throw b("$http")("badreq","Http request configuration must be an object.  Received: {0}",c);if(!x(n.valueOf(c.url)))throw b("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",c.url);var q=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},c);q.headers=i(c),q.method=Zd(q.method),q.paramSerializer=x(q.paramSerializer)?m.get(q.paramSerializer):q.paramSerializer,e.$$incOutstandingRequestCount();var r=[],u=[],w=k.resolve(q);return f(B,function(a){(a.request||a.requestError)&&r.unshift(a.request,a.requestError),(a.response||a.responseError)&&u.push(a.response,a.responseError)}),w=d(w,r),w=w.then(j),w=d(w,u),w=w["finally"](g)}function q(a){f(arguments,function(a){o[a]=function(b,c){return o(l({},c||{},{method:a,url:b}))}})}function r(a){f(arguments,function(a){o[a]=function(b,c,d){return o(l({},d||{},{method:a,url:b,data:c}))}})}function s(b,d){function e(a){if(a){var b={};return f(a,function(a,d){b[d]=function(b){function d(){a(b)}c?j.$applyAsync(d):j.$$phase?d():j.$apply(d)}}),b}}function i(a,b,d,e){function f(){l(b,a,d,e)}q&&(Ob(a)?q.put(D,[a,b,Lb(d),e]):q.remove(D)),c?j.$applyAsync(f):(f(),j.$$phase||j.$apply())}function l(a,c,d,e){c=c>=-1?c:0,(Ob(c)?s.resolve:s.reject)({data:a,status:c,headers:Mb(d),config:b,statusText:e})}function m(a){l(a.data,a.status,wa(a.headers()),a.statusText)}function p(){var a=o.pendingRequests.indexOf(b);-1!==a&&o.pendingRequests.splice(a,1)}var q,r,s=k.defer(),A=s.promise,B=b.headers,C="jsonp"===Yd(b.method),D=b.url;if(C?D=n.getTrustedResourceUrl(D):x(D)||(D=n.valueOf(D)),D=w(D,b.paramSerializer(b.params)),C&&(D=y(D,b.jsonpCallbackParam)),o.pendingRequests.push(b),A.then(p,p),!b.cache&&!a.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(q=v(b.cache)?b.cache:v(a.cache)?a.cache:z),q&&(r=q.get(D),u(r)?I(r)?r.then(m,m):ne(r)?l(r[1],r[0],wa(r[2]),r[3]):l(r,200,{},"OK"):q.put(D,A)),t(r)){var E=Oc(b.url)?h()[b.xsrfCookieName||a.xsrfCookieName]:void 0;E&&(B[b.xsrfHeaderName||a.xsrfHeaderName]=E),g(b.method,D,d,i,B,b.timeout,b.withCredentials,b.responseType,e(b.eventHandlers),e(b.uploadEventHandlers))}return A}function w(a,b){return b.length>0&&(a+=(-1===a.indexOf("?")?"?":"&")+b),a}function y(a,b){if(/[&?][^=]+=JSON_CALLBACK/.test(a))throw yf("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',a);var c=new RegExp("[&?]"+b+"=");if(c.test(a))throw yf("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',b,a);return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var z=i("$http");a.paramSerializer=x(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var B=[];return f(d,function(a){B.unshift(x(a)?m.get(a):m.invoke(a))}),o.pendingRequests=[],q("get","delete","head","jsonp"),r("post","put","patch"),o.defaults=a,o}]}function Qb(){this.$get=function(){return function(){return new a.XMLHttpRequest}}}function Rb(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,c,d){return Sb(a,d,a.defer,b,c[0])}]}function Sb(a,b,c,d,e){function g(a,b,c){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),g=null;return f.type="text/javascript",f.src=a,f.async=!0,g=function(a){f.removeEventListener("load",g),f.removeEventListener("error",g),e.body.removeChild(f),f=null;var h=-1,i="unknown";a&&("load"!==a.type||d.wasCalled(b)||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},f.addEventListener("load",g),f.addEventListener("error",g),e.body.appendChild(f),g}return function(e,h,i,j,k,l,m,n,o,p){function q(){v&&v(),w&&w.abort()}function r(a,b,d,e,f){u(z)&&c.cancel(z),v=w=null,a(b,d,e,f)}if(h=h||a.url(),"jsonp"===Yd(e))var s=d.createCallback(h),v=g(h,s,function(a,b){var c=200===a&&d.getResponse(s);r(j,a,c,"",b),d.removeCallback(s)});else{var w=b(e,h);w.open(e,h,!0),f(k,function(a,b){u(a)&&w.setRequestHeader(b,a)}),w.onload=function(){var a=w.statusText||"",b="response"in w?w.response:w.responseText,c=1223===w.status?204:w.status;0===c&&(c=b?200:"file"===Nc(h).protocol?404:0),r(j,c,b,w.getAllResponseHeaders(),a)};var x=function(){r(j,-1,null,null,"")};if(w.onerror=x,w.onabort=x,w.ontimeout=x,f(o,function(a,b){w.addEventListener(b,a)}),f(p,function(a,b){w.upload.addEventListener(b,a)}),m&&(w.withCredentials=!0),n)try{w.responseType=n}catch(y){if("json"!==n)throw y}w.send(t(i)?null:i)}if(l>0)var z=c(q,l);else I(l)&&l.then(q)}}function Tb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(m,a).replace(n,b)}function h(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function i(f,i,m,n){function o(a){try{return a=F(a),n&&!u(a)?a:ua(a)}catch(b){d(zf.interr(f,b))}}if(!f.length||-1===f.indexOf(a)){var p;if(!i){var q=g(f);p=r(q),p.exp=f,p.expressions=[],p.$$watchDelegate=h}return p}n=!!n;for(var s,v,w,x=0,y=[],z=[],B=f.length,C=[],D=[];B>x;){if(-1===(s=f.indexOf(a,x))||-1===(v=f.indexOf(b,s+j))){x!==B&&C.push(g(f.substring(x)));break}x!==s&&C.push(g(f.substring(x,s))),w=f.substring(s+j,v),y.push(w),z.push(c(w,o)),x=v+k,D.push(C.length),C.push("")}if(m&&C.length>1&&zf.throwNoconcat(f),!i||y.length){var E=function(a){for(var b=0,c=y.length;c>b;b++){if(n&&t(a[b]))return;C[D[b]]=a[b]}return C.join("")},F=function(a){return m?e.getTrusted(m,a):e.valueOf(a)};return l(function(a){var b=0,c=y.length,e=new Array(c);try{for(;c>b;b++)e[b]=z[b](a);return E(e)}catch(g){d(zf.interr(f,g))}},{exp:f,expressions:y,$$watchDelegate:function(a,b){var c;return a.$watchGroup(z,function(d,e){var f=E(d);A(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var j=a.length,k=b.length,m=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");return i.startSymbol=function(){return a},i.endSymbol=function(){return b},i}]}function Ub(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(f,h,i,j){function k(){l?f.apply(null,m):f(p)}var l=arguments.length>4,m=l?U(arguments,4):[],n=b.setInterval,o=b.clearInterval,p=0,q=u(j)&&!j,r=(q?d:c).defer(),s=r.promise;return i=u(i)?i:0,s.$$intervalId=n(function(){q?e.defer(k):a.$evalAsync(k),r.notify(p++),i>0&&p>=i&&(r.resolve(p),o(s.$$intervalId),delete g[s.$$intervalId]),q||a.$apply()},h),g[s.$$intervalId]=r,s}var g={};return f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].promise["catch"](p),g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1},f}]}function Vb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=ea(b[c]);return b.join("/")}function Wb(a,b){var c=Nc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=n(c.port)||Cf[c.protocol]||null}function Xb(a,b){if(Ef.test(a))throw Df("badpath",'Invalid url "{0}".',a);var c="/"!==a.charAt(0);c&&(a="/"+a);var d=Nc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=ca(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Yb(a,b){return a.slice(0,b.length)===b}function Zb(a,b){return Yb(b,a)?b.substr(a.length):void 0}function $b(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function _b(a){return a.replace(/(#.+)|#$/,"$1")}function ac(a){return a.substr(0,$b(a).lastIndexOf("/")+1)}function bc(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function cc(a,b,c){this.$$html5=!0,c=c||"",Wb(a,this),this.$$parse=function(a){var c=Zb(b,a);if(!x(c))throw Df("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);Xb(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=da(this.$$search),c=this.$$hash?"#"+ea(this.$$hash):"";this.$$url=Vb(this.$$path)+(a?"?"+a:"")+c,this.$$absUrl=b+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g,h;return u(f=Zb(a,d))?(g=f,h=c&&u(f=Zb(c,f))?b+(Zb("/",f)||f):a+g):u(f=Zb(b,d))?h=b+f:b===d+"/"&&(h=b),h&&this.$$parse(h),!!h}}function dc(a,b,c){Wb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return Yb(b,c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=Zb(a,d)||Zb(b,d);t(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",t(g)&&(a=d,this.replace())):(f=Zb(c,g),t(f)&&(f=g)),Xb(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var b=da(this.$$search),d=this.$$hash?"#"+ea(this.$$hash):"";this.$$url=Vb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+(this.$$url?c+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(b,c){return $b(a)===$b(b)?(this.$$parse(b),!0):!1}}function ec(a,b,c){this.$$html5=!0,dc.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a===$b(d)?f=d:(g=Zb(b,d))?f=a+c+g:b===d+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$compose=function(){var b=da(this.$$search),d=this.$$hash?"#"+ea(this.$$hash):"";this.$$url=Vb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+c+this.$$url,this.$$urlUpdatedByLocation=!0}}function fc(a){return function(){return this[a]}}function gc(a,b){return function(c){return t(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function hc(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return u(b)?(a=b,this):a},this.html5Mode=function(a){return H(a)?(b.enabled=a,this):v(a)?(H(a.enabled)&&(b.enabled=a.enabled),H(a.requireBase)&&(b.requireBase=a.requireBase),(H(a.rewriteLinks)||x(a.rewriteLinks))&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw Df("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=bc(n)+(m||"/"),k=e.history?cc:ec}else l=$b(n),k=dc;var o=ac(l);j=new k(l,o,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var h=be(a.target);"a"!==N(h[0]);)if(h[0]===f[0]||!(h=h.parent())[0])return;if(!x(e)||!t(h.attr(e))){var i=h.prop("href"),k=h.attr("href")||h.attr("xlink:href");v(i)&&"[object SVGAnimatedString]"===i.toString()&&(i=Nc(i.animVal).href),p.test(i)||!i||h.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(i,k)&&(a.preventDefault(),j.absUrl()!==d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}}),_b(j.absUrl())!==_b(n)&&d.url(j.absUrl(),!0);var q=!0;return d.onUrlChange(function(a,b){return Yb(a,o)?(c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;a=_b(a),j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(q=!1,i(e,f)))}),void(c.$$phase||c.$digest())):void(g.location.href=a)}),c.$watch(function(){if(q||j.$$urlUpdatedByLocation){j.$$urlUpdatedByLocation=!1;var a=_b(d.url()),b=_b(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(q||k)&&(q=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))}))}j.$$replace=!1}),j}]}function ic(){var a=!0,b=this;this.debugEnabled=function(b){return u(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack&&g?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||p,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}var g=ae||/\bEdge\//.test(c.navigator&&c.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function jc(a){return a+""}function kc(a,b){return"undefined"!=typeof a?a:b}function lc(a,b){return"undefined"==typeof a?b:"undefined"==typeof b?a:a+b}function mc(a,b){var c=a(b);return!c.$stateful}function nc(a,b){var c,d,e;switch(a.type){case Lf.Program:c=!0,f(a.body,function(a){nc(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case Lf.Literal:a.constant=!0,a.toWatch=[];break;case Lf.UnaryExpression:nc(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case Lf.BinaryExpression:nc(a.left,b),nc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case Lf.LogicalExpression:nc(a.left,b),nc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case Lf.ConditionalExpression:nc(a.test,b),nc(a.alternate,b),nc(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case Lf.Identifier:a.constant=!1,a.toWatch=[a];break;case Lf.MemberExpression:nc(a.object,b),a.computed&&nc(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case Lf.CallExpression:e=a.filter?mc(b,a.callee.name):!1,c=e,d=[],f(a.arguments,function(a){nc(a,b),c=c&&a.constant,a.constant||d.push.apply(d,a.toWatch)}),a.constant=c,a.toWatch=e?d:[a];break;case Lf.AssignmentExpression:nc(a.left,b),nc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case Lf.ArrayExpression:c=!0,d=[],f(a.elements,function(a){nc(a,b),c=c&&a.constant,a.constant||d.push.apply(d,a.toWatch)}),a.constant=c,a.toWatch=d;break;case Lf.ObjectExpression:c=!0,d=[],f(a.properties,function(a){nc(a.value,b),c=c&&a.value.constant&&!a.computed,a.value.constant||d.push.apply(d,a.value.toWatch),a.computed&&(nc(a.key,b),a.key.constant||d.push.apply(d,a.key.toWatch))}),a.constant=c,a.toWatch=d;break;case Lf.ThisExpression:a.constant=!1,a.toWatch=[];break;case Lf.LocalsExpression:a.constant=!1,a.toWatch=[]}}function oc(a){if(1===a.length){var b=a[0].expression,c=b.toWatch;return 1!==c.length?c:c[0]!==b?c:void 0}}function pc(a){return a.type===Lf.Identifier||a.type===Lf.MemberExpression}function qc(a){return 1===a.body.length&&pc(a.body[0].expression)?{type:Lf.AssignmentExpression,left:a.body[0].expression,right:{type:Lf.NGValueParameter},operator:"="}:void 0}function rc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===Lf.Literal||a.body[0].expression.type===Lf.ArrayExpression||a.body[0].expression.type===Lf.ObjectExpression)}function sc(a){return a.constant}function tc(a){this.$filter=a}function uc(a){this.$filter=a}function vc(a,b,c){this.ast=new Lf(a,c),this.astCompiler=c.csp?new uc(b):new tc(b)}function wc(a){return A(a.valueOf)?a.valueOf():Hf.call(a)}function xc(){var a,b,c=ta(),d={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(a,b){d[a]=b},this.setIdentifierFns=function(c,d){return a=c,b=d,this},this.$get=["$filter",function(e){function g(a,b){var d,f,g;switch(typeof a){case"string":if(a=a.trim(),g=a,d=c[g],!d){":"===a.charAt(0)&&":"===a.charAt(1)&&(f=!0,a=a.substring(2));var h=new Kf(o),k=new vc(h,e,o);d=k.parse(a),d.constant?d.$$watchDelegate=l:f?(d.oneTime=!0,d.$$watchDelegate=j):d.inputs&&(d.$$watchDelegate=i),c[g]=d}return m(d,b);case"function":return m(a,b);default:return m(p,b)}}function h(a,b,c){return null==a||null==b?a===b:"object"!=typeof a||(a=wc(a),"object"!=typeof a||c)?a===b||a!==a&&b!==b:!1}function i(a,b,c,d,e){var f,g=d.inputs;if(1===g.length){var i=h;return g=g[0],a.$watch(function(a){var b=g(a);return h(b,i,d.literal)||(f=d(a,void 0,void 0,[b]),i=b&&wc(b)),f},b,c,e)}for(var j=[],k=[],l=0,m=g.length;m>l;l++)j[l]=h,k[l]=null;return a.$watch(function(a){for(var b=!1,c=0,e=g.length;e>c;c++){var i=g[c](a);(b||(b=!h(i,j[c],d.literal)))&&(k[c]=i,j[c]=i&&wc(i))}return b&&(f=d(a,void 0,void 0,k)),f},b,c,e)}function j(a,b,c,d,e){function f(a){return d(a)}function g(a,c,d){j=a,A(b)&&b(a,c,d),l(a)&&d.$$postDigest(function(){l(j)&&h()})}var h,j,l=d.literal?k:u;return h=d.inputs?i(a,g,c,d,e):a.$watch(f,g,c)}function k(a){var b=!0;return f(a,function(a){u(a)||(b=!1)}),b}function l(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function m(a,b){function c(c,d,e,g){var h=f&&g?g[0]:a(c,d,e,g);return b(h,c,d)}function d(c,d,e,h){var i=f&&h?h[0]:a(c,d,e,h),j=b(i,c,d);return g(i)?j:i}if(!b)return a;var e=a.$$watchDelegate,f=!1,g=a.literal?k:u,h=a.oneTime?d:c;return h.literal=a.literal,h.oneTime=a.oneTime,f=!a.inputs,e&&e!==i?(h.$$watchDelegate=e,h.inputs=a.inputs):b.$stateful||(h.$$watchDelegate=i,h.inputs=a.inputs?a.inputs:[a]),h}var n=re().noUnsafeEval,o={csp:n,literals:Q(d),isIdentifierStart:A(a)&&a,isIdentifierContinue:A(b)&&b};return g}]}function yc(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,c){return Ac(function(a){b.$evalAsync(a)},c,a)}],this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function zc(){var a=!0;this.$get=["$browser","$exceptionHandler",function(b,c){return Ac(function(a){b.defer(a)},c,a)}],this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Ac(a,c,d){function e(){return new g}function g(){var a=this.promise=new h;this.resolve=function(b){m(a,b)},this.reject=function(b){o(a,b)},this.notify=function(b){q(a,b)}}function h(){this.$$state={status:0}}function i(b){var c,e,f;f=b.pending,b.processScheduled=!1,b.pending=void 0;try{for(var g=0,h=f.length;h>g;++g){b.pur=!0,e=f[g][0],c=f[g][b.status];try{A(c)?m(e,c(b.value)):1===b.status?m(e,b.value):o(e,b.value)}catch(i){o(e,i)}}}finally{--B,d&&0===B&&a(j)}}function j(){for(;!B&&C.length;){var a=C.shift();if(!a.pur){a.pur=!0;var b="Possibly unhandled rejection: "+ya(a.value);a.value instanceof Error?c(a.value,b):c(b)}}}function k(b){!d||b.pending||2!==b.status||b.pur||(0===B&&0===C.length&&a(j),C.push(b)),!b.processScheduled&&b.pending&&(b.processScheduled=!0,++B,a(function(){i(b)}))}function m(a,b){a.$$state.status||(b===a?p(a,z("qcycle","Expected promise to be resolved with value other than itself '{0}'",b)):n(a,b))}function n(a,b){function c(b){g||(g=!0,n(a,b))}function d(b){g||(g=!0,p(a,b))}function e(b){q(a,b)}var f,g=!1;try{(v(b)||A(b))&&(f=b.then),A(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,k(a.$$state))}catch(h){d(h)}}function o(a,b){a.$$state.status||p(a,b)}function p(a,b){a.$$state.value=b,a.$$state.status=2,k(a.$$state)}function q(b,d){var e=b.$$state.pending;b.$$state.status<=0&&e&&e.length&&a(function(){for(var a,b,f=0,g=e.length;g>f;f++){b=e[f][0],a=e[f][3];try{q(b,A(a)?a(d):d)}catch(h){c(h)}}})}function r(a){var b=new h;return o(b,a),b}function s(a,b,c){var d=null;try{A(c)&&(d=c())}catch(e){return r(e)}return I(d)?d.then(function(){return b(a)},r):b(a)}function u(a,b,c,d){var e=new h;return m(e,a),e.then(b,c,d)}function w(a){var b=new h,c=0,d=ne(a)?[]:{};return f(a,function(a,e){c++,u(a).then(function(a){d[e]=a,--c||m(b,d)},function(a){o(b,a)})}),0===c&&m(b,d),b}function x(a){var b=e();return f(a,function(a){u(a).then(b.resolve,b.reject)}),b.promise}function y(a){function b(a){m(d,a)}function c(a){o(d,a)}if(!A(a))throw z("norslvr","Expected resolverFn, got '{0}'",a);var d=new h;return a(b,c),d}var z=b("$q",TypeError),B=0,C=[];l(h.prototype,{then:function(a,b,c){if(t(a)&&t(b)&&t(c))return this;var d=new h;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&k(this.$$state),d},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return s(b,D,a)},function(b){return s(b,r,a)},b)}});var D=u;return y.prototype=h.prototype,y.defer=e,y.reject=r,y.when=u,y.resolve=D,y.all=w,
y.race=x,y}function Bc(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Cc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=i(),this.$$ChildScope=null}return b.prototype=a,b}var c=10,d=b("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(c=a),c},this.$get=["$exceptionHandler","$parse","$browser",function(b,j,k){function l(a){a.currentScope.$$destroyed=!0}function m(a){9===ae&&(a.$$childHead&&m(a.$$childHead),a.$$nextSibling&&m(a.$$nextSibling)),a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function n(){this.$id=i(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function o(a){if(y.$$phase)throw d("inprog","{0} already in progress",y.$$phase);y.$$phase=a}function q(){y.$$phase=null}function r(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function u(){}function w(){for(;C.length;)try{C.shift()()}catch(a){b(a)}h=null}function x(){null===h&&(h=k.defer(function(){y.$apply(w)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!==this)&&d.$on("$destroy",l),d},$watch:function(a,b,c,d){var e=j(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,h=f.$$watchers,i={fn:b,last:u,get:e,exp:d||a,eq:!!c};return g=null,A(b)||(i.fn=p),h||(h=f.$$watchers=[],h.$$digestWatchIndex=-1),h.unshift(i),h.$$digestWatchIndex++,r(this,1),function(){var a=P(h,i);a>=0&&(r(f,-1),a<h.$$digestWatchIndex&&h.$$digestWatchIndex--),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!t(f)){if(v(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)Wd.call(f,c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)Wd.call(f,c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,i)):b(f,h,i),k)if(v(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)Wd.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,i=this,k=b.length>1,l=0,m=j(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var a,e,f,i,j,l,m,n,p,r,s,t=c,v=this,x=[];o("$digest"),k.$$checkUrlChange(),this===y&&null!==h&&(k.defer.cancel(h),w()),g=null;do{m=!1,p=v;for(var C=0;C<z.length;C++){try{s=z[C],i=s.fn,i(s.scope,s.locals)}catch(E){b(E)}g=null}z.length=0;a:do{if(l=p.$$watchers)for(l.$$digestWatchIndex=l.length;l.$$digestWatchIndex--;)try{if(a=l[l.$$digestWatchIndex])if(j=a.get,(e=j(p))===(f=a.last)||(a.eq?S(e,f):me(e)&&me(f))){if(a===g){m=!1;break a}}else m=!0,g=a,a.last=a.eq?Q(e,null):e,i=a.fn,i(e,f===u?e:f,p),5>t&&(r=4-t,x[r]||(x[r]=[]),x[r].push({msg:A(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:e,oldVal:f}))}catch(E){b(E)}if(!(n=p.$$watchersCount&&p.$$childHead||p!==v&&p.$$nextSibling))for(;p!==v&&!(n=p.$$nextSibling);)p=p.$parent}while(p=n);if((m||z.length)&&!t--)throw q(),d("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",c,x)}while(m||z.length);for(q();D<B.length;)try{B[D++]()}catch(E){b(E)}B.length=D=0,k.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===y&&k.$$applicationDestroyed(),r(this,-this.$$watchersCount);for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$$nextSibling=null,m(this)}},$eval:function(a,b){return j(a)(this,b)},$evalAsync:function(a,b){y.$$phase||z.length||k.defer(function(){z.length&&y.$digest()}),z.push({scope:this,fn:j(a),locals:b})},$$postDigest:function(a){B.push(a)},$apply:function(a){try{o("$apply");try{return this.$eval(a)}finally{q()}}catch(c){b(c)}finally{try{y.$digest()}catch(c){throw b(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&C.push(b),a=j(a),x()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,s(e,1,a))}},$emit:function(a,c){var d,e,f,g=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=T([j],arguments,1);do{for(d=h.$$listeners[a]||g,j.currentScope=h,e=0,f=d.length;f>e;e++)if(d[e])try{d[e].apply(null,k)}catch(l){b(l)}else d.splice(e,1),e--,f--;if(i)return j.currentScope=null,j;h=h.$parent}while(h);return j.currentScope=null,j},$broadcast:function(a,c){var d=this,e=d,f=d,g={name:a,targetScope:d,preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1};if(!d.$$listenerCount[a])return g;for(var h,i,j,k=T([g],arguments,1);e=f;){for(g.currentScope=e,h=e.$$listeners[a]||[],i=0,j=h.length;j>i;i++)if(h[i])try{h[i].apply(null,k)}catch(l){b(l)}else h.splice(i,1),i--,j--;if(!(f=e.$$listenerCount[a]&&e.$$childHead||e!==d&&e.$$nextSibling))for(;e!==d&&!(f=e.$$nextSibling);)e=e.$parent}return g.currentScope=null,g}};var y=new n,z=y.$$asyncQueue=[],B=y.$$postDigestQueue=[],C=y.$$applyAsyncQueue=[],D=0;return y}]}function Dc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return u(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=Nc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Ec(a){return a.replace(Of,Ca)}function Fc(a){if("self"===a)return a;if(x(a)){if(a.indexOf("***")>-1)throw Mf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=qe(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+a+"$")}if(B(a))return new RegExp("^"+a.source+"$");throw Mf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Gc(a){var b=[];return u(a)&&f(a,function(a){b.push(Fc(a))}),b}function Hc(){this.SCE_CONTEXTS=Nf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Gc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Gc(a)),b},this.$get=["$injector",function(c){function d(a,b){return"self"===a?Oc(b):!!a.exec(b.href)}function e(c){var e,f,g=Nc(c.toString()),h=!1;for(e=0,f=a.length;f>e;e++)if(d(a[e],g)){h=!0;break}if(h)for(e=0,f=b.length;f>e;e++)if(d(b[e],g)){h=!1;break}return h}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function g(a,b){var c=l.hasOwnProperty(a)?l[a]:null;if(!c)throw Mf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||t(b)||""===b)return b;if("string"!=typeof b)throw Mf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)}function h(a){return a instanceof k?a.$$unwrapTrustedValue():a}function i(a,b){if(null===b||t(b)||""===b)return b;var c=l.hasOwnProperty(a)?l[a]:null;if(c&&b instanceof c)return b.$$unwrapTrustedValue();if(a===Nf.RESOURCE_URL){if(e(b))return b;throw Mf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===Nf.HTML)return j(b);throw Mf("unsafe","Attempting to use an unsafe value in a safe context.")}var j=function(a){throw Mf("unsafe","Attempting to use an unsafe value in a safe context.")};c.has("$sanitize")&&(j=c.get("$sanitize"));var k=f(),l={};return l[Nf.HTML]=f(k),l[Nf.CSS]=f(k),l[Nf.URL]=f(k),l[Nf.JS]=f(k),l[Nf.RESOURCE_URL]=f(l[Nf.URL]),{trustAs:g,getTrusted:i,valueOf:h}}]}function Ic(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>ae)throw Mf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=wa(Nf);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=q),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(Nf,function(a,b){var c=Yd(b);d[Ec("parse_as_"+c)]=function(b){return e(a,b)},d[Ec("get_trusted_"+c)]=function(b){return g(a,b)},d[Ec("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function Jc(){this.$get=["$window","$document",function(a,b){var c={},d=a.nw&&a.nw.process,e=!d&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id),f=!e&&a.history&&a.history.pushState,g=n((/android (\d+)/.exec(Yd((a.navigator||{}).userAgent))||[])[1]),h=/Boxee/i.test((a.navigator||{}).userAgent),i=b[0]||{},j=i.body&&i.body.style,k=!1,l=!1;return j&&(k=!!("transition"in j||"webkitTransition"in j),l=!!("animation"in j||"webkitAnimation"in j)),{history:!(!f||4>g||h),hasEvent:function(a){if("input"===a&&ae)return!1;if(t(c[a])){var b=i.createElement("div");c[a]="on"+a in b}return c[a]},csp:re(),transitions:k,animations:l,android:g}}]}function Kc(){var a;this.httpOptions=function(b){return b?(a=b,this):a},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,c,d,e,f){function g(h,i){function j(a){return i||(a=Pf("tpload","Failed to load template: {0} (HTTP status: {1} {2})",h,a.status,a.statusText),b(a)),e.reject(a)}g.totalPendingRequests++,(!x(h)||t(c.get(h)))&&(h=f.getTrustedResourceUrl(h));var k=d.defaults&&d.defaults.transformResponse;return ne(k)?k=k.filter(function(a){return a!==Jb}):k===Jb&&(k=null),d.get(h,l({cache:c,transformResponse:k},a))["finally"](function(){g.totalPendingRequests--}).then(function(a){return c.put(h,a.data),a.data},j)}return g.totalPendingRequests=0,g}]}function Lc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=ke.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+qe(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!==d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function Mc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){A(f)||(i=h,h=f,f=p);var j,k=U(arguments,3),l=u(i)&&!i,m=(l?d:c).defer(),n=m.promise;return j=b.defer(function(){try{m.resolve(f.apply(null,k))}catch(b){m.reject(b),e(b)}finally{delete g[n.$$timeoutId]}l||a.$apply()},h),n.$$timeoutId=j,g[j]=m,n}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].promise["catch"](p),g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function Nc(a){var b=a;return ae&&(Qf.setAttribute("href",b),b=Qf.href),Qf.setAttribute("href",b),{href:Qf.href,protocol:Qf.protocol?Qf.protocol.replace(/:$/,""):"",host:Qf.host,search:Qf.search?Qf.search.replace(/^\?/,""):"",hash:Qf.hash?Qf.hash.replace(/^#/,""):"",hostname:Qf.hostname,port:Qf.port,pathname:"/"===Qf.pathname.charAt(0)?Qf.pathname:"/"+Qf.pathname}}function Oc(a){var b=x(a)?Nc(a):a;return b.protocol===Rf.protocol&&b.host===Rf.host}function Pc(){this.$get=r(a)}function Qc(a){function b(a){try{return a.cookie||""}catch(b){return""}}function c(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},e={},f="";return function(){var a,g,h,i,j,k=b(d);if(k!==f)for(f=k,a=f.split("; "),e={},h=0;h<a.length;h++)g=a[h],i=g.indexOf("="),i>0&&(j=c(g.substring(0,i)),t(e[j])&&(e[j]=c(g.substring(i+1))));return e}}function Rc(){this.$get=Qc}function Sc(a){function b(d,e){if(v(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Xc),b("date",kd),b("filter",Tc),b("json",ld),b("limitTo",md),b("lowercase",Yf),b("number",Yc),b("orderBy",od),b("uppercase",Zf)}function Tc(){return function(a,c,d,f){if(!e(a)){if(null==a)return a;throw b("filter")("notarray","Expected array but received: {0}",a)}f=f||"$";var g,h,i=Wc(c);switch(i){case"function":g=c;break;case"boolean":case"null":case"number":case"string":h=!0;case"object":g=Uc(c,d,f,h);break;default:return a}return Array.prototype.filter.call(a,g)}}function Uc(a,b,c,d){var e,f=v(a)&&c in a;return b===!0?b=S:A(b)||(b=function(a,b){return t(a)?!1:null===a||null===b?a===b:v(b)||v(a)&&!s(a)?!1:(a=Yd(""+a),b=Yd(""+b),-1!==a.indexOf(b))}),e=function(e){return f&&!v(e)?Vc(e,a[c],b,c,!1):Vc(e,a,b,c,d)}}function Vc(a,b,c,d,e,f){var g=Wc(a),h=Wc(b);if("string"===h&&"!"===b.charAt(0))return!Vc(a,b.substring(1),c,d,e);if(ne(a))return a.some(function(a){return Vc(a,b,c,d,e)});switch(g){case"object":var i;if(e){for(i in a)if(i.charAt&&"$"!==i.charAt(0)&&Vc(a[i],b,c,d,!0))return!0;return f?!1:Vc(a,b,c,d,!1)}if("object"===h){for(i in b){var j=b[i];if(!A(j)&&!t(j)){var k=i===d,l=k?a:a[i];if(!Vc(l,j,c,d,k,k))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function Wc(a){return null===a?"null":typeof a}function Xc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return t(c)&&(c=b.CURRENCY_SYM),t(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:_c(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Yc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:_c(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Zc(a){var b,c,d,e,f,g=0;for((c=a.indexOf(Tf))>-1&&(a=a.replace(Tf,"")),(d=a.search(/e/i))>0?(0>c&&(c=d),c+=+a.slice(d+1),a=a.substring(0,d)):0>c&&(c=a.length),d=0;a.charAt(d)===Uf;d++);if(d===(f=a.length))b=[0],c=1;else{for(f--;a.charAt(f)===Uf;)f--;for(c-=d,b=[],e=0;f>=d;d++,e++)b[e]=+a.charAt(d)}return c>Sf&&(b=b.splice(0,Sf-1),g=c-1,c=1),{d:b,e:g,i:c}}function $c(a,b,c,d){var e=a.d,f=e.length-a.i;b=t(b)?Math.min(Math.max(c,f),d):+b;var g=b+a.i,h=e[g];if(g>0){e.splice(Math.max(a.i,g));for(var i=g;i<e.length;i++)e[i]=0}else{f=Math.max(0,f),a.i=1,e.length=Math.max(1,g=b+1),e[0]=0;for(var j=1;g>j;j++)e[j]=0}if(h>=5)if(0>g-1){for(var k=0;k>g;k--)e.unshift(0),a.i++;e.unshift(1),a.i++}else e[g-1]++;for(;f<Math.max(0,b);f++)e.push(0);var l=e.reduceRight(function(a,b,c,d){return b+=a,d[c]=b%10,Math.floor(b/10)},0);l&&(e.unshift(l),a.i++)}function _c(a,b,c,d,e){if(!x(a)&&!y(a)||isNaN(a))return"";var f,g=!isFinite(a),h=!1,i=Math.abs(a)+"",j="";if(g)j="∞";else{f=Zc(i),$c(f,e,b.minFrac,b.maxFrac);var k=f.d,l=f.i,m=f.e,n=[];for(h=k.reduce(function(a,b){return a&&!b},!0);0>l;)k.unshift(0),l++;l>0?n=k.splice(l,k.length):(n=k,k=[0]);var o=[];for(k.length>=b.lgSize&&o.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>b.gSize;)o.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&o.unshift(k.join("")),j=o.join(c),n.length&&(j+=d+n.join("")),m&&(j+="e+"+m)}return 0>a&&!h?b.negPre+j+b.negSuf:b.posPre+j+b.posSuf}function ad(a,b,c,d){var e="";for((0>a||d&&0>=a)&&(d?a=-a+1:(a=-a,e="-")),a=""+a;a.length<b;)a=Uf+a;return c&&(a=a.substr(a.length-b)),e+a}function bd(a,b,c,d,e){return c=c||0,function(f){var g=f["get"+a]();return(c>0||g>-c)&&(g+=c),0===g&&-12===c&&(g=12),ad(g,b,d,e)}}function cd(a,b,c){return function(d,e){var f=d["get"+a](),g=(c?"STANDALONE":"")+(b?"SHORT":""),h=Zd(g+a);return e[h][f]}}function dd(a,b,c){var d=-1*c,e=d>=0?"+":"";return e+=ad(Math[d>0?"floor":"ceil"](d/60),2)+ad(Math.abs(d%60),2)}function ed(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function fd(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function gd(a){return function(b){var c=ed(b.getFullYear()),d=fd(b),e=+d-+c,f=1+Math.round(e/6048e5);return ad(f,a)}}function hd(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function id(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function jd(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function kd(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=n(b[9]+b[10]),f=n(b[9]+b[11])),g.call(d,n(b[1]),n(b[2])-1,n(b[3]));var i=n(b[4]||0)-e,j=n(b[5]||0)-f,k=n(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,x(c)&&(c=Xf.test(c)?n(c):b(c)),y(c)&&(c=new Date(c)),!z(c)||!isFinite(c.getTime()))return c;for(;d;)h=Wf.exec(d),h?(j=T(j,h,1),d=j.pop()):(j.push(d),d=null);var k=c.getTimezoneOffset();return e&&(k=Z(e,k),c=_(c,e,!0)),f(j,function(b){g=Vf[b],i+=g?g(c,a.DATETIME_FORMATS,k):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function ld(){return function(a,b){return t(b)&&(b=2),X(a,b)}}function md(){return function(a,b,c){return b=Math.abs(Number(b))===1/0?Number(b):n(b),me(b)?a:(y(a)&&(a=a.toString()),e(a)?(c=!c||isNaN(c)?0:n(c),c=0>c?Math.max(0,a.length+c):c,b>=0?nd(a,c,c+b):0===c?nd(a,b,a.length):nd(a,Math.max(0,c+b),c)):a)}}function nd(a,b,c){return x(a)?a.slice(b,c):ee.call(a,b,c)}function od(a){function c(b){return b.map(function(b){var c=1,d=q;if(A(b))d=b;else if(x(b)&&(("+"===b.charAt(0)||"-"===b.charAt(0))&&(c="-"===b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(d=a(b),d.constant))){var e=d();d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function f(a){return A(a.valueOf)&&(a=a.valueOf(),d(a))?a:s(a)&&(a=a.toString(),d(a))?a:a}function g(a,b){var c=typeof a;return null===a?(c="string",a="null"):"object"===c&&(a=f(a)),{value:a,type:c,index:b}}function h(a,b){var c=0,d=a.type,e=b.type;if(d===e){var f=a.value,g=b.value;"string"===d?(f=f.toLowerCase(),g=g.toLowerCase()):"object"===d&&(v(f)&&(f=a.index),v(g)&&(g=b.index)),f!==g&&(c=g>f?-1:1)}else c=e>d?-1:1;return c}return function(a,d,f,i){function j(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:l.map(function(c){return g(c.get(a),b)})}}function k(a,b){for(var c=0,d=l.length;d>c;c++){var e=n(a.predicateValues[c],b.predicateValues[c]);if(e)return e*l[c].descending*m}return n(a.tieBreaker,b.tieBreaker)*m}if(null==a)return a;if(!e(a))throw b("orderBy")("notarray","Expected array but received: {0}",a);ne(d)||(d=[d]),0===d.length&&(d=["+"]);var l=c(d),m=f?-1:1,n=A(i)?i:h,o=Array.prototype.map.call(a,j);return o.sort(k),a=o.map(function(a){return a.value})}}function pd(a){return A(a)&&(a={link:a}),a.restrict=a.restrict||"AC",r(a)}function qd(a,b){a.$name=b}function rd(a,b,c,d,e){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=e(b.name||b.ngForm||"")(c),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=ag,this.$$element=a,this.$$animate=d,sd(this)}function sd(a){a.$$classCache={},a.$$classCache[Mg]=!(a.$$classCache[Lg]=a.$$element.hasClass(Lg))}function td(a){function b(a,b,c,d){a[b]||(a[b]={}),g(a[b],c,d)}function c(a,b,c,d){a[b]&&h(a[b],c,d),ud(a[b])&&(a[b]=void 0)}function d(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function e(a,b,c){b=b?"-"+ma(b,"-"):"",d(a,Lg+b,c===!0),d(a,Mg+b,c===!1)}var f=a.clazz,g=a.set,h=a.unset;f.prototype.$setValidity=function(a,f,i){t(f)?b(this,"$pending",a,i):c(this,"$pending",a,i),H(f)?f?(h(this.$error,a,i),g(this.$$success,a,i)):(g(this.$error,a,i),h(this.$$success,a,i)):(h(this.$error,a,i),h(this.$$success,a,i)),this.$pending?(d(this,bg,!0),this.$valid=this.$invalid=void 0,e(this,"",null)):(d(this,bg,!1),this.$valid=ud(this.$error),this.$invalid=!this.$valid,e(this,"",this.$valid));var j;j=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null,e(this,a,j),this.$$parentForm.$setValidity(a,j,this)}}function ud(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function vd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function wd(a,b,c,d,e,f){xd(a,b,c,d,e,f),vd(d)}function xd(a,b,c,d,e,f){var g=Yd(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,j()})}var i,j=function(a){if(i&&(f.defer.cancel(i),i=null),!h){var e=b.val(),j=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=pe(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,j)}};if(e.hasEvent("input"))b.on("input",j);else{var k=function(a,b,c){i||(i=f.defer(function(){i=null,b&&b.value===c||j(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",j),qg[g]&&d.$$hasNativeValidators&&g===c.type&&b.on(pg,function(a){if(!i){var b=this[Vd],c=b.badInput,d=b.typeMismatch;i=f.defer(function(){i=null,(b.badInput!==c||b.typeMismatch!==d)&&j(a)})}}),d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function yd(a,b){if(z(a))return a;if(x(a)){mg.lastIndex=0;var c=mg.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=ed(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function zd(a,b){return function(c,d){var e,g;if(z(c))return c;if(x(c)){if('"'===c.charAt(0)&&'"'===c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),gg.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function Ad(a,b,c,d){return function(e,f,g,h,i,j,k){function l(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function m(a){return u(a)&&!z(a)?c(a)||void 0:a}Bd(e,f,g,h),xd(e,f,g,h,i,j);var n,o=h&&h.$options.getOption("timezone");if(h.$$parserName=a,h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a)){var d=c(a,n);return o&&(d=_(d,o)),d}return void 0}),h.$formatters.push(function(a){if(a&&!z(a))throw Tg("datefmt","Expected `{0}` to be a date",a);return l(a)?(n=a,n&&o&&(n=_(n,o,!0)),k("date")(a,d,o)):(n=null,"")}),u(g.min)||g.ngMin){var p;h.$validators.min=function(a){return!l(a)||t(p)||c(a)>=p},g.$observe("min",function(a){p=m(a),h.$validate()})}if(u(g.max)||g.ngMax){var q;h.$validators.max=function(a){return!l(a)||t(q)||c(a)<=q},g.$observe("max",function(a){q=m(a),h.$validate()})}}}function Bd(a,b,c,d){var e=b[0],f=d.$$hasNativeValidators=v(e.validity);f&&d.$parsers.push(function(a){var c=b.prop(Vd)||{};return c.badInput||c.typeMismatch?void 0:a})}function Cd(a){a.$$parserName="number",a.$parsers.push(function(b){return a.$isEmpty(b)?null:jg.test(b)?parseFloat(b):void 0}),a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!y(b))throw Tg("numfmt","Expected `{0}` to be a number",b);b=b.toString()}return b})}function Dd(a){return u(a)&&!y(a)&&(a=parseFloat(a)),me(a)?void 0:a}function Ed(a){return(0|a)===a}function Fd(a){var b=a.toString(),c=b.indexOf(".");if(-1===c){if(a>-1&&1>a){var d=/e-(\d+)$/.exec(b);if(d)return Number(d[1])}return 0}return b.length-c-1}function Gd(a,b,c){var d=Number(a),e=!Ed(d),f=!Ed(b),g=!Ed(c);if(e||f||g){var h=e?Fd(d):0,i=f?Fd(b):0,j=g?Fd(c):0,k=Math.max(h,i,j),l=Math.pow(10,k);d*=l,b*=l,c*=l,e&&(d=Math.round(d)),f&&(b=Math.round(b)),g&&(c=Math.round(c))}return(d-b)%c===0}function Hd(a,b,c,d,e,f){Bd(a,b,c,d),Cd(d),xd(a,b,c,d,e,f);var g,h;if((u(c.min)||c.ngMin)&&(d.$validators.min=function(a){return d.$isEmpty(a)||t(g)||a>=g},c.$observe("min",function(a){g=Dd(a),d.$validate()})),(u(c.max)||c.ngMax)&&(d.$validators.max=function(a){return d.$isEmpty(a)||t(h)||h>=a},c.$observe("max",function(a){h=Dd(a),d.$validate()})),u(c.step)||c.ngStep){var i;d.$validators.step=function(a,b){return d.$isEmpty(b)||t(i)||Gd(b,g||0,i)},c.$observe("step",function(a){i=Dd(a),d.$validate()})}}function Id(a,b,c,d,e,f){function g(a,d){b.attr(a,c[a]),c.$observe(a,d)}function h(a){if(l=Dd(a),!me(d.$modelValue))if(k){var c=b.val();l>c&&(c=l,b.val(c)),d.$setViewValue(c)}else d.$validate()}function i(a){if(m=Dd(a),!me(d.$modelValue))if(k){var c=b.val();c>m&&(b.val(m),c=l>m?l:m),d.$setViewValue(c)}else d.$validate()}function j(a){n=Dd(a),me(d.$modelValue)||(k&&d.$viewValue!==b.val()?d.$setViewValue(b.val()):d.$validate())}Bd(a,b,c,d),Cd(d),xd(a,b,c,d,e,f);var k=d.$$hasNativeValidators&&"range"===b[0].type,l=k?0:void 0,m=k?100:void 0,n=k?1:void 0,o=b[0].validity,p=u(c.min),q=u(c.max),r=u(c.step),s=d.$render;d.$render=k&&u(o.rangeUnderflow)&&u(o.rangeOverflow)?function(){s(),d.$setViewValue(b.val())}:s,p&&(d.$validators.min=k?function(){return!0}:function(a,b){return d.$isEmpty(b)||t(l)||b>=l},g("min",h)),q&&(d.$validators.max=k?function(){return!0}:function(a,b){return d.$isEmpty(b)||t(m)||m>=b},g("max",i)),r&&(d.$validators.step=k?function(){return!o.stepMismatch}:function(a,b){return d.$isEmpty(b)||t(n)||Gd(b,l||0,n)},g("step",j))}function Jd(a,b,c,d,e,f){xd(a,b,c,d,e,f),vd(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||hg.test(c)}}function Kd(a,b,c,d,e,f){xd(a,b,c,d,e,f),vd(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||ig.test(c)}}function Ld(a,b,c,d){var e=!c.ngTrim||"false"!==pe(c.ngTrim);t(c.name)&&b.attr("name",i());var f=function(a){var f;b[0].checked&&(f=c.value,e&&(f=pe(f)),d.$setViewValue(f,a&&a.type))};b.on("click",f),d.$render=function(){var a=c.value;e&&(a=pe(a)),b[0].checked=a===d.$viewValue},c.$observe("value",d.$render)}function Md(a,b,c,d,e){var f;if(u(d)){if(f=a(d),!f.constant)throw Tg("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return f(b)}return e}function Nd(a,b,c,d,e,f,g,h){var i=Md(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Md(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return S(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Od(a,b){function c(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e===b[f])continue a;c.push(e)}return c}function d(a){return a&&a.split(" ")}function e(a){var b=a;return ne(a)?b=a.map(e).join(" "):v(a)&&(b=Object.keys(a).filter(function(b){return a[b]}).join(" ")),b}a="ngClass"+a;var g;return["$parse",function(h){return{restrict:"AC",link:function(i,j,k){function l(a){a=o(d(a),1),k.$addClass(a)}function m(a){a=o(d(a),-1),k.$removeClass(a)}function n(a,b){var e=d(a),f=d(b),g=c(e,f),h=c(f,e),i=o(g,-1),j=o(h,1);k.$addClass(j),k.$removeClass(i)}function o(a,b){var c=[];return f(a,function(a){(b>0||s[a])&&(s[a]=(s[a]||0)+b,s[a]===+(b>0)&&c.push(a))}),c.join(" ")}function p(a){a===b?l(r):m(r),t=a}function q(a){x(a)||(a=e(a)),t===b&&n(r,a),r=a}var r,s=j.data("$classCounts"),t=!0;s||(s=ta(),j.data("$classCounts",s)),"ngClass"!==a&&(g||(g=h("$index",function(a){return 1&a})),i.$watch(g,p)),i.$watch(h(k[a],e),q)}}}]}function Pd(a,b,c,d,e,f,g,h,i){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(c.name||"",!1)(a),this.$$parentForm=ag,this.$options=Ug,this.$$parsedNgModel=e(c.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:a}),this.$$attr=c,this.$$element=d,this.$$animate=f,this.$$timeout=g,this.$$parse=e,this.$$q=h,this.$$exceptionHandler=b,sd(this),Qd(this)}function Qd(a){a.$$scope.$watch(function(b){var c=a.$$ngModelGet(b);if(c!==a.$modelValue&&(a.$modelValue===a.$modelValue||c===c)){a.$modelValue=a.$$rawModelValue=c,a.$$parserValid=void 0;for(var d=a.$formatters,e=d.length,f=c;e--;)f=d[e](f);a.$viewValue!==f&&(a.$$updateEmptyClasses(f),a.$viewValue=a.$$lastCommittedViewValue=f,a.$render(),a.$$runValidators(a.$modelValue,a.$viewValue,p))}return c})}function Rd(a){this.$$options=a}function Sd(a,b){f(b,function(b,c){u(a[c])||(a[c]=b)})}function Td(a,b){a.prop("selected",b),a.attr("selected",b)}var Ud=/^\/(.+)\/([a-z]*)$/,Vd="validity",Wd=Object.prototype.hasOwnProperty,Xd={objectMaxDepth:5},Yd=function(a){return x(a)?a.toLowerCase():a},Zd=function(a){return x(a)?a.toUpperCase():a},$d=function(a){return x(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},_d=function(a){return x(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Yd=$d,Zd=_d);var ae,be,ce,de,ee=[].slice,fe=[].splice,ge=[].push,he=Object.prototype.toString,ie=Object.getPrototypeOf,je=b("ng"),ke=a.angular||(a.angular={}),le=0;ae=a.document.documentMode;var me=Number.isNaN||function(a){return a!==a};p.$inject=[],q.$inject=[];
var ne=Array.isArray,oe=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,pe=function(a){return x(a)?a.trim():a},qe=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},re=function(){function b(){try{return new Function(""),!1}catch(a){return!0}}if(!u(re.rules)){var c=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(c){var d=c.getAttribute("ng-csp")||c.getAttribute("data-ng-csp");re.rules={noUnsafeEval:!d||-1!==d.indexOf("no-unsafe-eval"),noInlineStyle:!d||-1!==d.indexOf("no-inline-style")}}else re.rules={noUnsafeEval:b(),noInlineStyle:!1}}return re.rules},se=function(){if(u(se.name_))return se.name_;var b,c,d,e,f=ue.length;for(c=0;f>c;++c)if(d=ue[c],b=a.document.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return se.name_=e},te=/:/g,ue=["ng-","data-ng-","ng:","x-ng-"],ve=ha(a.document),we=/[A-Z]/g,xe=!1,ye=1,ze=2,Ae=3,Be=8,Ce=9,De=11,Ee={full:"1.6.4",major:1,minor:6,dot:4,codeName:"phenomenal-footnote"};Ka.expando="ng339";var Fe=Ka.cache={},Ge=1;Ka._data=function(a){return this.cache[a[this.expando]]||{}};var He=/-([a-z])/g,Ie=/^-ms-/,Je={mouseleave:"mouseout",mouseenter:"mouseover"},Ke=b("jqLite"),Le=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Me=/<|&#?\w+;/,Ne=/<([\w:-]+)/,Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Pe={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td;var Qe=a.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))},Re=Ka.prototype={ready:$a,toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return be(a>=0?this[a]:this[this.length+a])},length:0,push:ge,sort:[].sort,splice:[].splice},Se={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Se[Yd(a)]=a});var Te={};f("input,select,option,textarea,button,form,details".split(","),function(a){Te[a]=!0});var Ue={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};f({data:Qa,removeData:Oa,hasData:Ga,cleanData:function(a){for(var b=0,c=a.length;c>b;b++)Oa(a[b])}},function(a,b){Ka[b]=a}),f({data:Qa,inheritedData:Wa,scope:function(a){return be.data(a,"$scope")||Wa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return be.data(a,"$isolateScope")||be.data(a,"$isolateScopeNoTemplate")},controller:Va,injector:function(a){return Wa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ra,css:function(a,b,c){return b=Ba(b),u(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,c){var d,e=a.nodeType;if(e!==Ae&&e!==ze&&e!==Be&&a.getAttribute){var f=Yd(b),g=Se[f];return u(c)?void(null===c||c===!1&&g?a.removeAttribute(b):a.setAttribute(b,g?f:c)):(d=a.getAttribute(b),g&&null!==d&&(d=f),null===d?void 0:d)}},prop:function(a,b,c){return u(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(t(b)){var c=a.nodeType;return c===ye||c===Ae?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(t(b)){if(a.multiple&&"select"===N(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),c}return a.value}a.value=b},html:function(a,b){return t(b)?a.innerHTML:(Ma(a,!0),void(a.innerHTML=b))},empty:Xa},function(a,b){Ka.prototype[b]=function(b,c){var d,e,f=this.length;if(a!==Xa&&t(2===a.length&&a!==Ra&&a!==Va?b:c)){if(v(b)){for(d=0;f>d;d++)if(a===Qa)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}for(var g=a.$dv,h=t(g)?Math.min(f,1):f,i=0;h>i;i++){var j=a(this[i],b,c);g=g?g+j:j}return g}for(d=0;f>d;d++)a(this[d],b,c);return this}}),f({removeData:Oa,on:function(a,b,c,d){if(u(d))throw Ke("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Fa(a)){var e=Pa(a,!0),f=e.events,g=e.handle;g||(g=e.handle=bb(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length,j=function(b,d,e){var h=f[b];h||(h=f[b]=[],h.specialHandlerWrapper=d,"$destroy"===b||e||a.addEventListener(b,g)),h.push(c)};i--;)b=h[i],Je[b]?(j(Je[b],db),j(b,void 0,!0)):j(b)}},off:Na,one:function(a,b,c){a=be(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;Ma(a),f(new Ka(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===ye&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===ye||c===De){b=new Ka(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===ye){var c=a.firstChild;f(new Ka(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){Ja(a,be(b).eq(0).clone()[0])},remove:Ya,detach:function(a){Ya(a,!0)},after:function(a,b){var c=a,d=a.parentNode;if(d){b=new Ka(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}}},addClass:Ta,removeClass:Sa,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;t(d)&&(d=!Ra(a,b)),(d?Ta:Sa)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==De?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:La,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=Pa(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:h,target:a},b.type&&(d=l(d,b)),e=wa(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){Ka.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)t(e)?(e=a(this[f],b,c,d),u(e)&&(e=be(e))):Ua(e,a(this[f],b,c,d));return u(e)?e:this}}),Ka.prototype.bind=Ka.prototype.on,Ka.prototype.unbind=Ka.prototype.off;var Ve=Object.create(null);gb.prototype={_idx:function(a){return a===this._lastKey?this._lastIndex:(this._lastKey=a,this._lastIndex=this._keys.indexOf(a),this._lastIndex)},_transformKey:function(a){return me(a)?Ve:a},get:function(a){a=this._transformKey(a);var b=this._idx(a);return-1!==b?this._values[b]:void 0},set:function(a,b){a=this._transformKey(a);var c=this._idx(a);-1===c&&(c=this._lastIndex=this._keys.length),this._keys[c]=a,this._values[c]=b},"delete":function(a){a=this._transformKey(a);var b=this._idx(a);return-1===b?!1:(this._keys.splice(b,1),this._values.splice(b,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var We=gb,Xe=[function(){this.$get=[function(){return We}]}],Ye=/^([^(]+?)=>/,Ze=/^[^(]*\(\s*([^)]*)\)/m,$e=/,/,_e=/^\s*(_?)(\S+?)\1\s*$/,af=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,bf=b("$injector");lb.$$annotate=kb;var cf=b("$animate"),df=1,ef="ng-animate",ff=function(){this.$get=p},gf=function(){var a=new We,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,d){function e(a,b,c){var d=!1;return b&&(b=x(b)?b.split(" "):ne(b)?b:[],f(b,function(b){b&&(d=!0,a[b]=c)})),d}function g(){f(b,function(b){var c=a.get(b);if(c){var d=pb(b.attr("class")),e="",g="";f(c,function(a,b){var c=!!d[b];a!==c&&(a?e+=(e.length?" ":"")+b:g+=(g.length?" ":"")+b)}),f(b,function(a){e&&Ta(a,e),g&&Sa(a,g)}),a["delete"](b)}}),b.length=0}function h(c,f,h){var i=a.get(c)||{},j=e(i,f,!0),k=e(i,h,!1);(j||k)&&(a.set(c,i),b.push(c),1===b.length&&d.$$postDigest(g))}return{enabled:p,on:p,off:p,pin:p,push:function(a,b,d,e){e&&e(),d=d||{},d.from&&a.css(d.from),d.to&&a.css(d.to),(d.addClass||d.removeClass)&&h(a,d.addClass,d.removeClass);var f=new c;return f.complete(),f}}}]},hf=["$provide",function(a){var b=this,c=null;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw cf("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(c=a instanceof RegExp?a:null)){var b=new RegExp("[(\\s|\\/)]"+ef+"[(\\s|\\/)]");if(b.test(c.toString()))throw c=null,cf("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ef)}return c},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d=ob(c);!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&be(d),e=e&&be(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",qb(f))},move:function(c,d,e,f){return d=d&&be(d),e=e&&be(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",qb(f))},leave:function(b,c){return a.push(b,"leave",qb(c),function(){b.remove()})},addClass:function(b,c,d){return d=qb(d),d.addClass=nb(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=qb(d),d.removeClass=nb(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=qb(e),e.addClass=nb(e.addClass,c),e.removeClass=nb(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=qb(f),f.from=f.from?l(f.from,c):c,f.to=f.to?l(f.to,d):d,e=e||"ng-inline-animate",f.tempClasses=nb(f.tempClasses,e),a.push(b,"animate",f)}}}]}],jf=function(){this.$get=["$$rAF",function(a){function b(b){c.push(b),c.length>1||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;return b(function(){a=!0}),function(c){a?c():b(c)}}}]},kf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,c,d,e){function g(a){this.setHost(a);var b=c(),f=function(a){e(a,0,!1)};this._doneCallbacks=[],this._tick=function(a){d()?f(a):b(a)},this._state=0}var h=0,i=1,j=2;return g.chain=function(a,b){function c(){return d===a.length?void b(!0):void a[d](function(a){return a===!1?void b(!1):(d++,void c())})}var d=0;c()},g.all=function(a,b){function c(c){e=e&&c,++d===a.length&&b(e)}var d=0,e=!0;f(a,function(a){a.done(c)})},g.prototype={setHost:function(a){this.host=a||{}},done:function(a){this._state===j?a():this._doneCallbacks.push(a)},progress:p,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){b===!1?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;b._state===h&&(b._state=i,b._tick(function(){b._resolve(a)}))},_resolve:function(a){this._state!==j&&(f(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=j)}},g}]},lf=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,d){function e(){return a(function(){f(),h||i.complete(),h=!0}),i}function f(){g.addClass&&(b.addClass(g.addClass),g.addClass=null),g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null),g.to&&(b.css(g.to),g.to=null)}var g=d||{};g.$$prepared||(g=Q(g)),g.cleanupStyles&&(g.from=g.to=null),g.from&&(b.css(g.from),g.from=null);var h,i=new c;return{start:e,end:e}}}]},mf=b("$compile"),nf=new vb;wb.$inject=["$provide","$$sanitizeUriProvider"],xb.prototype.isFirstChange=function(){return this.previousValue===nf};var of=/^((?:x|data)[:\-_])/i,pf=/[:\-_]+(.)/g,qf=b("$controller"),rf=/^(\S+)(\s+as\s+([\w$]+))?$/,sf=function(){this.$get=["$document",function(a){return function(b){return b?!b.nodeType&&b instanceof be&&(b=b[0]):b=a[0].body,b.offsetWidth+1}}]},tf="application/json",uf={"Content-Type":tf+";charset=utf-8"},vf=/^\[|^\{(?!\{)/,wf={"[":/]$/,"{":/}$/},xf=/^\)]\}',?\n/,yf=b("$http"),zf=ke.$interpolateMinErr=b("$interpolate");zf.throwNoconcat=function(a){throw zf("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a)},zf.interr=function(a,b){return zf("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var Af=function(){this.$get=function(){function a(a){var b=function(a){b.data=a,b.called=!0};return b.id=a,b}var b=ke.callbacks,c={};return{createCallback:function(d){var e="_"+(b.$$counter++).toString(36),f="angular.callbacks."+e,g=a(e);return c[f]=b[e]=g,f},wasCalled:function(a){return c[a].called},getResponse:function(a){return c[a].data},removeCallback:function(a){var d=c[a];delete b[d.id],delete c[a]}}}},Bf=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Cf={http:80,https:443,ftp:21},Df=b("$location"),Ef=/^\s*[\\/]{2,}/,Ff={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:fc("$$absUrl"),url:function(a){if(t(a))return this.$$url;var b=Bf.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:fc("$$protocol"),host:fc("$$host"),port:fc("$$port"),path:gc("$$path",function(a){return a=null!==a?a.toString():"","/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(x(a)||y(a))a=a.toString(),this.$$search=ca(a);else{if(!v(a))throw Df("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=Q(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:t(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:gc("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([ec,dc,cc],function(a){a.prototype=Object.create(Ff),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==cc||!this.$$html5)throw Df("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=t(b)?null:b,this.$$urlUpdatedByLocation=!0,this}});var Gf=b("$parse"),Hf={}.constructor.prototype.valueOf,If=ta();f("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){If[a]=!0});var Jf={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Kf=function(a){this.options=a};Kf.prototype={constructor:Kf,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=If[b],f=If[c],g=If[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return c>=55296&&56319>=c&&d>=56320&&57343>=d?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=u(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Gf("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Yd(this.text.charAt(this.index));if("."===c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"===c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"===a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!==a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=Jf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var Lf=function(a,b){this.lexer=a,this.options=b};Lf.Program="Program",Lf.ExpressionStatement="ExpressionStatement",Lf.AssignmentExpression="AssignmentExpression",Lf.ConditionalExpression="ConditionalExpression",Lf.LogicalExpression="LogicalExpression",Lf.BinaryExpression="BinaryExpression",Lf.UnaryExpression="UnaryExpression",Lf.CallExpression="CallExpression",Lf.MemberExpression="MemberExpression",Lf.Identifier="Identifier",Lf.Literal="Literal",Lf.ArrayExpression="ArrayExpression",Lf.Property="Property",Lf.ObjectExpression="ObjectExpression",Lf.ThisExpression="ThisExpression",Lf.LocalsExpression="LocalsExpression",Lf.NGValueParameter="NGValueParameter",Lf.prototype={ast:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b},program:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:Lf.Program,body:a}},expressionStatement:function(){return{type:Lf.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!pc(a))throw Gf("lval","Trying to assign a value to a non l-value");a={type:Lf.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:Lf.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:Lf.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:Lf.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:Lf.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:Lf.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:Lf.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:Lf.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:Lf.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=Q(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:Lf.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:Lf.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:Lf.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:Lf.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){for(var b=[a],c={type:Lf.CallExpression,callee:this.identifier(),arguments:b,filter:!0};this.expect(":");)b.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.filterChain());while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:Lf.Identifier,name:a.text}},constant:function(){return{type:Lf.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Lf.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:Lf.Property,kind:"init"},this.peek().constant?(a.key=this.constant(),a.computed=!1,this.consume(":"),a.value=this.expression()):this.peek().identifier?(a.key=this.identifier(),a.computed=!1,this.peek(":")?(this.consume(":"),a.value=this.expression()):a.value=a.key):this.peek("[")?(this.consume("["),a.key=this.expression(),this.consume("]"),a.computed=!0,this.consume(":"),a.value=this.expression()):this.throwError("invalid key",this.peek()),b.push(a)}while(this.expect(","));return this.consume("}"),{type:Lf.ObjectExpression,properties:b}},throwError:function(a,b){throw Gf("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw Gf("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw Gf("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},selfReferential:{"this":{type:Lf.ThisExpression},$locals:{type:Lf.LocalsExpression}}},tc.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},nc(a,b.$filter);var c,d="";if(this.stage="assign",c=qc(a)){this.state.computing="assign";var e=this.nextId();this.recurse(c,e),this.return_(e),d="fn.assign="+this.generateFunction("assign","s,v,l")}var g=oc(a.body);b.stage="inputs",f(g,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}},b.state.computing=d;var e=b.nextId();b.recurse(a,e),b.return_(e),b.state.inputs.push(d),a.watchId=c}),this.state.computing="fn",this.stage="main",this.recurse(a);var h='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+d+this.watchFns()+"return fn;",i=new Function("$filter","getStringValue","ifDefined","plus",h)(this.$filter,jc,kc,lc);return this.state=this.stage=void 0,i},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return f(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return f(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,c,d,e,g){var h,i,j,k,l,m=this;if(d=d||p,!g&&u(a.watchId))return b=b||this.nextId(),void this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,c,d,e,!0));switch(a.type){case Lf.Program:f(a.body,function(b,c){m.recurse(b.expression,void 0,void 0,function(a){i=a}),c!==a.body.length-1?m.current().body.push(i,";"):m.return_(i)});break;case Lf.Literal:k=this.escape(a.value),this.assign(b,k),d(b||k);break;case Lf.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){i=a}),k=a.operator+"("+this.ifDefined(i,0)+")",this.assign(b,k),d(k);break;case Lf.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a}),this.recurse(a.right,void 0,void 0,function(a){i=a}),k="+"===a.operator?this.plus(h,i):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(i,0):"("+h+")"+a.operator+"("+i+")",this.assign(b,k),d(k);break;case Lf.LogicalExpression:b=b||this.nextId(),m.recurse(a.left,b),m.if_("&&"===a.operator?b:m.not(b),m.lazyRecurse(a.right,b)),d(b);break;case Lf.ConditionalExpression:b=b||this.nextId(),m.recurse(a.test,b),m.if_(b,m.lazyRecurse(a.alternate,b),m.lazyRecurse(a.consequent,b)),d(b);break;case Lf.Identifier:b=b||this.nextId(),c&&(c.context="inputs"===m.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),c.computed=!1,c.name=a.name),m.if_("inputs"===m.stage||m.not(m.getHasOwnProperty("l",a.name)),function(){m.if_("inputs"===m.stage||"s",function(){e&&1!==e&&m.if_(m.isNull(m.nonComputedMember("s",a.name)),m.lazyAssign(m.nonComputedMember("s",a.name),"{}")),m.assign(b,m.nonComputedMember("s",a.name))})},b&&m.lazyAssign(b,m.nonComputedMember("l",a.name))),d(b);break;case Lf.MemberExpression:h=c&&(c.context=this.nextId())||this.nextId(),b=b||this.nextId(),m.recurse(a.object,h,void 0,function(){m.if_(m.notNull(h),function(){a.computed?(i=m.nextId(),m.recurse(a.property,i),m.getStringValue(i),e&&1!==e&&m.if_(m.not(m.computedMember(h,i)),m.lazyAssign(m.computedMember(h,i),"{}")),k=m.computedMember(h,i),m.assign(b,k),c&&(c.computed=!0,c.name=i)):(e&&1!==e&&m.if_(m.isNull(m.nonComputedMember(h,a.property.name)),m.lazyAssign(m.nonComputedMember(h,a.property.name),"{}")),k=m.nonComputedMember(h,a.property.name),m.assign(b,k),c&&(c.computed=!1,c.name=a.property.name))},function(){m.assign(b,"undefined")}),d(b)},!!e);break;case Lf.CallExpression:b=b||this.nextId(),a.filter?(i=m.filter(a.callee.name),j=[],f(a.arguments,function(a){var b=m.nextId();m.recurse(a,b),j.push(b)}),k=i+"("+j.join(",")+")",m.assign(b,k),d(b)):(i=m.nextId(),h={},j=[],m.recurse(a.callee,i,h,function(){m.if_(m.notNull(i),function(){f(a.arguments,function(b){m.recurse(b,a.constant?void 0:m.nextId(),void 0,function(a){j.push(a)})}),k=h.name?m.member(h.context,h.name,h.computed)+"("+j.join(",")+")":i+"("+j.join(",")+")",m.assign(b,k)},function(){m.assign(b,"undefined")}),d(b)}));break;case Lf.AssignmentExpression:i=this.nextId(),h={},this.recurse(a.left,void 0,h,function(){m.if_(m.notNull(h.context),function(){m.recurse(a.right,i),k=m.member(h.context,h.name,h.computed)+a.operator+i,m.assign(b,k),d(b||k)})},1);break;case Lf.ArrayExpression:j=[],f(a.elements,function(b){m.recurse(b,a.constant?void 0:m.nextId(),void 0,function(a){j.push(a)})}),k="["+j.join(",")+"]",this.assign(b,k),d(b||k);break;case Lf.ObjectExpression:j=[],l=!1,f(a.properties,function(a){a.computed&&(l=!0)}),l?(b=b||this.nextId(),this.assign(b,"{}"),f(a.properties,function(a){a.computed?(h=m.nextId(),m.recurse(a.key,h)):h=a.key.type===Lf.Identifier?a.key.name:""+a.key.value,i=m.nextId(),m.recurse(a.value,i),m.assign(m.member(b,h,a.computed),i)})):(f(a.properties,function(b){m.recurse(b.value,a.constant?void 0:m.nextId(),void 0,function(a){j.push(m.escape(b.key.type===Lf.Identifier?b.key.name:""+b.key.value)+":"+a)})}),k="{"+j.join(",")+"}",this.assign(b,k)),d(b||k);break;case Lf.ThisExpression:this.assign(b,"s"),d(b||"s");break;case Lf.LocalsExpression:this.assign(b,"l"),d(b||"l");break;case Lf.NGValueParameter:this.assign(b,"v"),d(b||"v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){return a?(this.current().body.push(a,"=",b,";"),a):void 0},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(a===!0)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,d=/[^$_a-zA-Z0-9]/g;return c.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(x(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(y(a))return a.toString();if(a===!0)return"true";if(a===!1)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw Gf("esc","IMPOSSIBLE")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},uc.prototype={compile:function(a){var b=this;nc(a,b.$filter);var c,d;(c=qc(a))&&(d=this.recurse(c));var e,g=oc(a.body);g&&(e=[],f(g,function(a,c){var d=b.recurse(a);a.input=d,e.push(d),a.watchId=c}));var h=[];f(a.body,function(a){h.push(b.recurse(a.expression))});var i=0===a.body.length?p:1===a.body.length?h[0]:function(a,b){var c;return f(h,function(d){c=d(a,b)}),c};return d&&(i.assign=function(a,b,c){return d(a,c,b)}),e&&(i.inputs=e),
i},recurse:function(a,b,c){var d,e,g,h=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case Lf.Literal:return this.value(a.value,b);case Lf.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case Lf.BinaryExpression:return d=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](d,e,b);case Lf.LogicalExpression:return d=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](d,e,b);case Lf.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case Lf.Identifier:return h.identifier(a.name,b,c);case Lf.MemberExpression:return d=this.recurse(a.object,!1,!!c),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(d,e,b,c):this.nonComputedMember(d,e,b,c);case Lf.CallExpression:return g=[],f(a.arguments,function(a){g.push(h.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var h=[],i=0;i<g.length;++i)h.push(g[i](a,c,d,f));var j=e.apply(void 0,h,f);return b?{context:void 0,name:void 0,value:j}:j}:function(a,c,d,f){var h,i=e(a,c,d,f);if(null!=i.value){for(var j=[],k=0;k<g.length;++k)j.push(g[k](a,c,d,f));h=i.value.apply(i.context,j)}return b?{value:h}:h};case Lf.AssignmentExpression:return d=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,c,f,g){var h=d(a,c,f,g),i=e(a,c,f,g);return h.context[h.name]=i,b?{value:i}:i};case Lf.ArrayExpression:return g=[],f(a.elements,function(a){g.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],h=0;h<g.length;++h)f.push(g[h](a,c,d,e));return b?{value:f}:f};case Lf.ObjectExpression:return g=[],f(a.properties,function(a){a.computed?g.push({key:h.recurse(a.key),computed:!0,value:h.recurse(a.value)}):g.push({key:a.key.type===Lf.Identifier?a.key.name:""+a.key.value,computed:!1,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},h=0;h<g.length;++h)g[h].computed?f[g[h].key(a,c,d,e)]=g[h].value(a,c,d,e):f[g[h].key]=g[h].value(a,c,d,e);return b?{value:f}:f};case Lf.ThisExpression:return function(a){return b?{value:a}:a};case Lf.LocalsExpression:return function(a,c){return b?{value:c}:c};case Lf.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=u(g)?+g:0,b?{value:g}:g}},"unary-":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=u(g)?-g:-0,b?{value:g}:g}},"unary!":function(a,b){return function(c,d,e,f){var g=!a(c,d,e,f);return b?{value:g}:g}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=lc(h,i);return c?{value:j}:j}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=(u(h)?h:0)-(u(i)?i:0);return c?{value:j}:j}},"binary*":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)*b(d,e,f,g);return c?{value:h}:h}},"binary/":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)/b(d,e,f,g);return c?{value:h}:h}},"binary%":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)%b(d,e,f,g);return c?{value:h}:h}},"binary===":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)===b(d,e,f,g);return c?{value:h}:h}},"binary!==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!==b(d,e,f,g);return c?{value:h}:h}},"binary==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)==b(d,e,f,g);return c?{value:h}:h}},"binary!=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!=b(d,e,f,g);return c?{value:h}:h}},"binary<":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<b(d,e,f,g);return c?{value:h}:h}},"binary>":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>b(d,e,f,g);return c?{value:h}:h}},"binary<=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<=b(d,e,f,g);return c?{value:h}:h}},"binary>=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>=b(d,e,f,g);return c?{value:h}:h}},"binary&&":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)&&b(d,e,f,g);return c?{value:h}:h}},"binary||":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)||b(d,e,f,g);return c?{value:h}:h}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:i}:i}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c){return function(d,e,f,g){var h=e&&a in e?e:d;c&&1!==c&&h&&null==h[a]&&(h[a]={});var i=h?h[a]:void 0;return b?{context:h,name:a,value:i}:i}},computedMember:function(a,b,c,d){return function(e,f,g,h){var i,j,k=a(e,f,g,h);return null!=k&&(i=b(e,f,g,h),i=jc(i),d&&1!==d&&k&&!k[i]&&(k[i]={}),j=k[i]),c?{context:k,name:i,value:j}:j}},nonComputedMember:function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h);d&&1!==d&&i&&null==i[b]&&(i[b]={});var j=null!=i?i[b]:void 0;return c?{context:i,name:b,value:j}:j}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}},vc.prototype={constructor:vc,parse:function(a){var b=this.ast.ast(a),c=this.astCompiler.compile(b);return c.literal=rc(b),c.constant=sc(b),c}};var Mf=b("$sce"),Nf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Of=/_([a-z])/g,Pf=b("$compile"),Qf=a.document.createElement("a"),Rf=Nc(a.location.href);Qc.$inject=["$document"],Sc.$inject=["$provide"];var Sf=22,Tf=".",Uf="0";Xc.$inject=["$locale"],Yc.$inject=["$locale"];var Vf={yyyy:bd("FullYear",4,0,!1,!0),yy:bd("FullYear",2,0,!0,!0),y:bd("FullYear",1,0,!1,!0),MMMM:cd("Month"),MMM:cd("Month",!0),MM:bd("Month",2,1),M:bd("Month",1,1),LLLL:cd("Month",!1,!0),dd:bd("Date",2),d:bd("Date",1),HH:bd("Hours",2),H:bd("Hours",1),hh:bd("Hours",2,-12),h:bd("Hours",1,-12),mm:bd("Minutes",2),m:bd("Minutes",1),ss:bd("Seconds",2),s:bd("Seconds",1),sss:bd("Milliseconds",3),EEEE:cd("Day"),EEE:cd("Day",!0),a:hd,Z:dd,ww:gd(2),w:gd(1),G:id,GG:id,GGG:id,GGGG:jd},Wf=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Xf=/^-?\d+$/;kd.$inject=["$locale"];var Yf=r(Yd),Zf=r(Zd);od.$inject=["$parse"];var $f=r({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===he.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),_f={};f(Se,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!==a){var d=yb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)}),_f[d]=function(){return{restrict:"A",priority:100,link:e}}}}),f(Ue,function(a,b){_f[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"===d.ngPattern.charAt(0)){var e=d.ngPattern.match(Ud);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=yb("ng-"+a);_f[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===he.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(ae&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var ag={$addControl:p,$$renameControl:qd,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},bg="ng-pending",cg="ng-submitted";rd.$inject=["$element","$attrs","$scope","$animate","$interpolate"],rd.prototype={$rollbackViewValue:function(){f(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){f(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){qa(a.$name,"input"),this.$$controls.push(a),a.$name&&(this[a.$name]=a),a.$$parentForm=this},$$renameControl:function(a,b){var c=a.$name;this[c]===a&&delete this[c],this[b]=a,a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name],f(this.$pending,function(b,c){this.$setValidity(c,null,a)},this),f(this.$error,function(b,c){this.$setValidity(c,null,a)},this),f(this.$$success,function(b,c){this.$setValidity(c,null,a)},this),P(this.$$controls,a),a.$$parentForm=ag},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ng),this.$$animate.addClass(this.$$element,Og),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ng,Og+" "+cg),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,f(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){f(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,cg),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},td({clazz:rd,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(P(d,c),0===d.length&&delete a[b])}});var dg=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:c(a).assign||p}var e={name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:rd,compile:function(c,e){c.addClass(Ng).addClass(Lg);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,c,e,g){var h=g[0];if(!("action"in e)){var i=function(b){a.$apply(function(){h.$commitViewValue(),h.$setSubmitted()}),b.preventDefault()};c[0].addEventListener("submit",i),c.on("$destroy",function(){b(function(){c[0].removeEventListener("submit",i)},0,!1)})}var j=g[1]||h.$$parentForm;j.$addControl(h);var k=f?d(h.$name):p;f&&(k(a,h),e.$observe(f,function(b){h.$name!==b&&(k(a,void 0),h.$$parentForm.$$renameControl(h,b),(k=d(h.$name))(a,h))})),c.on("$destroy",function(){h.$$parentForm.$removeControl(h),k(a,void 0),l(h,ag)})}}}};return e}]},eg=dg(),fg=dg(!0),gg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,hg=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,ig=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,jg=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,kg=/^(\d{4,})-(\d{2})-(\d{2})$/,lg=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,mg=/^(\d{4,})-W(\d\d)$/,ng=/^(\d{4,})-(\d\d)$/,og=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,pg="keydown wheel mousedown",qg=ta();f("date,datetime-local,month,time,week".split(","),function(a){qg[a]=!0});var rg={text:wd,date:Ad("date",kg,zd(kg,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Ad("datetimelocal",lg,zd(lg,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Ad("time",og,zd(og,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Ad("week",mg,yd,"yyyy-Www"),month:Ad("month",ng,zd(ng,["yyyy","MM"]),"yyyy-MM"),number:Hd,url:Jd,email:Kd,radio:Ld,range:Id,checkbox:Nd,hidden:p,button:p,submit:p,reset:p,file:p},sg=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(rg[Yd(g.type)]||rg.text)(e,f,g,h[0],b,a,c,d)}}}}],tg=/^(true|false|\d+)$/,ug=function(){function a(a,b,c){var d=u(c)?c:9===ae?"":null;a.prop("value",d),b.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,c){return tg.test(c.ngValue)?function(b,c,d){var e=b.$eval(d.ngValue);a(c,d,e)}:function(b,c,d){b.$watch(d.ngValue,function(b){a(c,d,b)})}}}},vg=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,c,d){a.$$addBindingInfo(c,d.ngBind),c=c[0],b.$watch(d.ngBind,function(a){c.textContent=ua(a)})}}}}],wg=["$interpolate","$compile",function(a,b){return{compile:function(c){return b.$$addBindingClass(c),function(c,d,e){var f=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,f.expressions),d=d[0],e.$observe("ngBindTemplate",function(a){d.textContent=t(a)?"":a})}}}}],xg=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){var c=f(b);d.html(a.getTrustedHtml(c)||"")})}}}}],yg=r({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),zg=Od("",!0),Ag=Od("Odd",0),Bg=Od("Even",1),Cg=pd({compile:function(a,b){b.$set("ngCloak",void 0),a.removeClass("ng-cloak")}}),Dg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Eg={},Fg={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=yb("ng-"+a);Eg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b]);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};Fg[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Gg=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.$$createComment("end ngIf",e.ngIf),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=sa(h.clone),a.leave(j).done(function(a){a!==!1&&(j=null)}),h=null))})}}}],Hg=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ke.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).done(function(a){a!==!1&&(m=null)}),m=n,n=null)};d.$watch(f,function(f){var i=function(a){a===!1||!u(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).done(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){d.$$destroyed||m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],Ig=["$compile",function(b){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return he.call(d[0]).match(/SVG/)?(d.empty(),void b(Ha(f.template,a.document).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void b(d.contents())(c))}}}],Jg=pd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),Kg=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,c,d){var e=c.ngList||", ",g="false"!==c.ngTrim,h=g?pe(e):e,i=function(a){if(!t(a)){var b=[];return a&&f(a.split(h),function(a){a&&b.push(g?pe(a):a)}),b}};d.$parsers.push(i),d.$formatters.push(function(a){return ne(a)?a.join(e):void 0}),d.$isEmpty=function(a){return!a||!a.length}}}},Lg="ng-valid",Mg="ng-invalid",Ng="ng-pristine",Og="ng-dirty",Pg="ng-untouched",Qg="ng-touched",Rg="ng-empty",Sg="ng-not-empty",Tg=b("ngModel");Pd.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Pd.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);return A(c)&&(c=a(b)),c},this.$$ngModelSet=function(a,c){A(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw Tg("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,aa(this.$$element))},$render:p,$isEmpty:function(a){return t(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,Sg),this.$$animate.addClass(this.$$element,Rg)):(this.$$animate.removeClass(this.$$element,Rg),this.$$animate.addClass(this.$$element,Sg))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Og),this.$$animate.addClass(this.$$element,Ng)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ng),this.$$animate.addClass(this.$$element,Og),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Pg,Qg)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Qg,Pg)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!me(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,c=this.$valid,d=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||c===a||(f.$modelValue=a?b:void 0,f.$modelValue!==d&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,c){function d(){var a=k.$$parserName||"parse";return t(k.$$parserValid)?(h(a,null),!0):(k.$$parserValid||(f(k.$validators,function(a,b){h(b,null)}),f(k.$asyncValidators,function(a,b){h(b,null)})),h(a,k.$$parserValid),k.$$parserValid)}function e(){var c=!0;return f(k.$validators,function(d,e){var f=Boolean(d(a,b));c=c&&f,h(e,f)}),c?!0:(f(k.$asyncValidators,function(a,b){h(b,null)}),!1)}function g(){var c=[],d=!0;f(k.$asyncValidators,function(e,f){var g=e(a,b);if(!I(g))throw Tg("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",g);h(f,void 0),c.push(g.then(function(){h(f,!0)},function(){d=!1,h(f,!1)}))}),c.length?k.$$q.all(c).then(function(){i(d)},p):i(!0)}function h(a,b){j===k.$$currentValidationRunId&&k.$setValidity(a,b)}function i(a){j===k.$$currentValidationRunId&&c(a)}this.$$currentValidationRunId++;var j=this.$$currentValidationRunId,k=this;return d()&&e()?void g():void i(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function a(){d.$modelValue!==f&&d.$$writeModelToScope()}var b=this.$$lastCommittedViewValue,c=b,d=this;if(this.$$parserValid=t(c)?void 0:!0,this.$$parserValid)for(var e=0;e<this.$parsers.length;e++)if(c=this.$parsers[e](c),t(c)){this.$$parserValid=!1;break}me(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var f=this.$modelValue,g=this.$options.getOption("allowInvalid");this.$$rawModelValue=c,g&&(this.$modelValue=c,a()),this.$$runValidators(c,this.$$lastCommittedViewValue,function(b){g||(d.$modelValue=b?c:void 0,a())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),f(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=a,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");y(b[a])?b=b[a]:y(b["default"])&&(b=b["default"]),this.$$timeout.cancel(this.$$pendingDebounce);var c=this;b>0?this.$$pendingDebounce=this.$$timeout(function(){c.$commitViewValue()},b):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){c.$commitViewValue()})},$overrideModelOptions:function(a){this.$options=this.$options.createChild(a)}},td({clazz:Pd,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var Ug,Vg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Pd,priority:1,compile:function(b){return b.addClass(Ng).addClass(Pg).addClass(Lg),{pre:function(a,b,c,d){var e=d[0],f=d[1]||e.$$parentForm,g=d[2];g&&(e.$options=g.$options),e.$$initGetterSetters(),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,a)}),a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){function f(){g.$setTouched()}var g=e[0];g.$options.getOption("updateOn")&&c.on(g.$options.getOption("updateOn"),function(a){g.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){g.$touched||(a.$$phase?b.$evalAsync(f):b.$apply(f))})}}}}}],Wg=/(\s+|^)default(\s+|$)/;Rd.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;return a=l({},a),f(a,function(c,d){"$inherit"===c?"*"===d?b=!0:(a[d]=this.$$options[d],"updateOn"===d&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===d&&(a.updateOnDefault=!1,a[d]=pe(c.replace(Wg,function(){return a.updateOnDefault=!0," "})))},this),b&&(delete a["*"],Sd(a,this.$$options)),Sd(a,Ug.$$options),new Rd(a)}},Ug=new Rd({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Xg=function(){function a(a,b){this.$$attrs=a,this.$$scope=b}return a.$inject=["$attrs","$scope"],a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Ug,b=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(b)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},Yg=pd({terminal:!0,priority:1e3}),Zg=b("ngOptions"),$g=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,_g=["$compile","$document","$parse",function(b,c,d){function g(a,b,c){function f(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}function g(a){var b;if(!j&&e(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var h=a.match($g);if(!h)throw Zg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,aa(b));var i=h[5]||h[7],j=h[6],k=/ as /.test(h[0])&&h[1],l=h[9],m=d(h[2]?h[1]:i),n=k&&d(k),o=n||m,p=l&&d(l),q=l?function(a,b){return p(c,b)}:function(a){return fb(a)},r=function(a,b){return q(a,x(a,b))},s=d(h[2]||h[1]),t=d(h[3]||""),u=d(h[4]||""),v=d(h[8]),w={},x=j?function(a,b){return w[j]=b,w[i]=a,w}:function(a){return w[i]=a,w};return{trackBy:l,getTrackByValue:r,getWatchables:d(v,function(a){var b=[];a=a||[];for(var d=g(a),e=d.length,f=0;e>f;f++){var i=a===d?f:d[f],j=a[i],k=x(j,i),l=q(j,k);if(b.push(l),h[2]||h[1]){var m=s(c,k);b.push(m)}if(h[4]){var n=u(c,k);b.push(n)}}return b}),getOptions:function(){for(var a=[],b={},d=v(c)||[],e=g(d),h=e.length,i=0;h>i;i++){var j=d===e?i:e[i],k=d[j],m=x(k,j),n=o(c,m),p=q(n,m),w=s(c,m),y=t(c,m),z=u(c,m),A=new f(p,n,w,y,z);a.push(A),b[p]=A}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[r(a)]},getViewValueFromOption:function(a){return l?Q(a.viewValue):a.viewValue}}}}}function h(a,d,e,h){function k(a,b){var c=i.cloneNode(!1);b.appendChild(c),m(a,c)}function l(a){var b=x.getOptionFromViewValue(a),c=b&&b.element;return c&&!c.selected&&(c.selected=!0),b}function m(a,b){a.element=b,b.disabled=a.disabled,a.label!==b.label&&(b.label=a.label,b.textContent=a.label),b.value=a.selectValue}function n(){var a=x&&o.readValue();if(x)for(var b=x.items.length-1;b>=0;b--){var c=x.items[b];Ya(u(c.group)?c.element.parentNode:c.element)}x=y.getOptions();var e={};if(v&&d.prepend(o.emptyOption),x.items.forEach(function(a){var b;u(a.group)?(b=e[a.group],b||(b=j.cloneNode(!1),z.appendChild(b),b.label=null===a.group?"null":a.group,e[a.group]=b),k(a,b)):k(a,z)}),d[0].appendChild(z),p.$render(),!p.$isEmpty(a)){var f=o.readValue(),g=y.trackBy||q;(g?S(a,f):a===f)||(p.$setViewValue(f),p.$render())}}for(var o=h[0],p=h[1],q=e.multiple,r=0,s=d.children(),t=s.length;t>r;r++)if(""===s[r].value){o.hasEmptyOption=!0,o.emptyOption=s.eq(r);break}var v=!!o.emptyOption,w=be(i.cloneNode(!1));w.val("?");var x,y=g(e.ngOptions,d,a),z=c[0].createDocumentFragment();o.generateUnknownOptionValue=function(a){return"?"},q?(o.writeValue=function(a){var b=a&&a.map(l)||[];x.items.forEach(function(a){a.element.selected&&!O(b,a)&&(a.element.selected=!1)})},o.readValue=function(){var a=d.val()||[],b=[];return f(a,function(a){var c=x.selectValueMap[a];c&&!c.disabled&&b.push(x.getViewValueFromOption(c))}),b},y.trackBy&&a.$watchCollection(function(){return ne(p.$viewValue)?p.$viewValue.map(function(a){return y.getTrackByValue(a)}):void 0},function(){p.$render()})):(o.writeValue=function(a){var b=x.selectValueMap[d.val()],c=x.getOptionFromViewValue(a);b&&b.element.removeAttribute("selected"),c?(d[0].value!==c.selectValue&&(o.removeUnknownOption(),o.unselectEmptyOption(),d[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):v?o.selectEmptyOption():o.unknownOption.parent().length?o.updateUnknownOption(a):o.renderUnknownOption(a)},o.readValue=function(){var a=x.selectValueMap[d.val()];return a&&!a.disabled?(o.unselectEmptyOption(),o.removeUnknownOption(),x.getViewValueFromOption(a)):null},y.trackBy&&a.$watch(function(){return y.getTrackByValue(p.$viewValue)},function(){p.$render()})),v&&(o.emptyOption.remove(),b(o.emptyOption)(a),o.emptyOption[0].nodeType===Be?(o.hasEmptyOption=!1,o.registerOption=function(a,b){""===b.val()&&(o.hasEmptyOption=!0,o.emptyOption=b,o.emptyOption.removeClass("ng-scope"),p.$render(),b.on("$destroy",function(){o.hasEmptyOption=!1,o.emptyOption=void 0}))}):o.emptyOption.removeClass("ng-scope")),d.empty(),n(),a.$watchCollection(y.getWatchables,n)}var i=a.document.createElement("option"),j=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=p},post:h}}}],ah=["$locale","$interpolate","$log",function(a,b,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,m=i.$attr.when&&h.attr(i.$attr.when),n=i.offset||0,o=g.$eval(m)||{},q={},r=b.startSymbol(),s=b.endSymbol(),u=r+l+"-"+n+s,v=ke.noop;f(i,function(a,b){var c=e.exec(b);if(c){var d=(c[1]?"-":"")+Yd(c[2]);o[d]=h.attr(i.$attr[b])}}),f(o,function(a,c){q[c]=b(a.replace(d,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=me(d);if(e||d in o||(d=a.pluralCat(d-n)),!(d===k||e&&me(k))){v();var f=q[d];t(f)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+m),v=p,j()):v=g.$watch(f,j),k=d}})}}}],bh=["$parse","$animate","$compile",function(a,c,d){var g="$$NG_REMOVED",h=b("ngRepeat"),i=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},j=function(a){return a.clone[0]},k=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(b,l){var m=l.ngRepeat,n=d.$$createComment("end ngRepeat",m),o=m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!o)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",m);var p=o[1],q=o[2],r=o[3],s=o[4];if(o=p.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/),!o)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var t=o[3]||o[1],u=o[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw h("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",r);var v,w,x,y,z={$id:fb};return s?v=a(s):(x=function(a,b){return fb(b)},y=function(a){return a}),function(a,b,d,l,o){v&&(w=function(b,c,d){return u&&(z[u]=b),z[t]=c,z.$index=d,v(a,z)});var p=ta();a.$watchCollection(q,function(d){var l,q,s,v,z,A,B,C,D,E,F,G,H=b[0],I=ta();if(r&&(a[r]=d),e(d))D=d,C=w||x;else{C=w||y,D=[];for(var J in d)Wd.call(d,J)&&"$"!==J.charAt(0)&&D.push(J)}for(v=D.length,F=new Array(v),l=0;v>l;l++)if(z=d===D?l:D[l],A=d[z],B=C(z,A,l),p[B])E=p[B],delete p[B],I[B]=E,F[l]=E;else{if(I[B])throw f(F,function(a){a&&a.scope&&(p[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",m,B,A);F[l]={id:B,scope:void 0,clone:void 0},I[B]=!0}for(var K in p){if(E=p[K],G=sa(E.clone),c.leave(G),G[0].parentNode)for(l=0,q=G.length;q>l;l++)G[l][g]=!0;E.scope.$destroy()}for(l=0;v>l;l++)if(z=d===D?l:D[l],A=d[z],E=F[l],E.scope){s=H;do s=s.nextSibling;while(s&&s[g]);j(E)!==s&&c.move(sa(E.clone),null,H),H=k(E),i(E.scope,l,t,A,u,z,v)}else o(function(a,b){E.scope=b;var d=n.cloneNode(!1);a[a.length++]=d,c.enter(a,null,H),H=d,E.clone=a,I[E.id]=E,i(E.scope,l,t,A,u,z,v)});p=I})}}}}],ch="ng-hide",dh="ng-hide-animate",eh=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,ch,{tempClasses:dh})})}}}],fh=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,ch,{tempClasses:dh})})}}}],gh=pd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),hh=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(c){c!==!1&&a.splice(b,1)}};c.$watch(h,function(c){for(var d,e;k.length;)a.cancel(k.pop());for(d=0,e=l.length;e>d;++d){var h=sa(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.done(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],ih=pd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){var g=c.ngSwitchWhen.split(c.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a});f(g,function(a){d.cases["!"+a]=d.cases["!"+a]||[],d.cases["!"+a].push({transclude:e,element:b})})}}),jh=pd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),kh=b("ngTransclude"),lh=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var c=a(b.contents());return b.empty(),function(a,b,d,e,f){function g(a,c){a.length&&i(a)?b.append(a):(h(),c.$destroy())}function h(){c(a,function(a){b.append(a)})}function i(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d.nodeType!==Ae||d.nodeValue.trim())return!0}}if(!f)throw kh("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",aa(b));d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude="");var j=d.ngTransclude||d.ngTranscludeSlot;f(g,null,j),j&&!f.isSlotFilled(j)&&h()}}}}],mh=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"===c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],nh={$setViewValue:p,$render:p},oh=["$element","$scope",function(b,c){function d(){h||(h=!0,c.$$postDigest(function(){h=!1,f.ngModelCtrl.$render()}))}function e(a){i||(i=!0,c.$$postDigest(function(){c.$$destroyed||(i=!1,f.ngModelCtrl.$setViewValue(f.readValue()),a&&f.ngModelCtrl.$render())}))}var f=this,g=new We;f.selectValueMap={},f.ngModelCtrl=nh,f.multiple=!1,f.unknownOption=be(a.document.createElement("option")),f.hasEmptyOption=!1,f.emptyOption=void 0,f.renderUnknownOption=function(a){var c=f.generateUnknownOptionValue(a);f.unknownOption.val(c),
b.prepend(f.unknownOption),Td(f.unknownOption,!0),b.val(c)},f.updateUnknownOption=function(a){var c=f.generateUnknownOptionValue(a);f.unknownOption.val(c),Td(f.unknownOption,!0),b.val(c)},f.generateUnknownOptionValue=function(a){return"? "+fb(a)+" ?"},f.removeUnknownOption=function(){f.unknownOption.parent()&&f.unknownOption.remove()},f.selectEmptyOption=function(){f.emptyOption&&(b.val(""),Td(f.emptyOption,!0))},f.unselectEmptyOption=function(){f.hasEmptyOption&&f.emptyOption.removeAttr("selected")},c.$on("$destroy",function(){f.renderUnknownOption=p}),f.readValue=function(){var a=b.val(),c=a in f.selectValueMap?f.selectValueMap[a]:a;return f.hasOption(c)?c:null},f.writeValue=function(a){var c=b[0].options[b[0].selectedIndex];if(c&&Td(be(c),!1),f.hasOption(a)){f.removeUnknownOption();var d=fb(a);b.val(d in f.selectValueMap?d:a);var e=b[0].options[b[0].selectedIndex];Td(be(e),!0)}else null==a&&f.emptyOption?(f.removeUnknownOption(),f.selectEmptyOption()):f.unknownOption.parent().length?f.updateUnknownOption(a):f.renderUnknownOption(a)},f.addOption=function(a,b){if(b[0].nodeType!==Be){qa(a,'"option value"'),""===a&&(f.hasEmptyOption=!0,f.emptyOption=b);var c=g.get(a)||0;g.set(a,c+1),d()}},f.removeOption=function(a){var b=g.get(a);b&&(1===b?(g["delete"](a),""===a&&(f.hasEmptyOption=!1,f.emptyOption=void 0)):g.set(a,b-1))},f.hasOption=function(a){return!!g.get(a)};var h=!1,i=!1;f.registerOption=function(a,b,c,g,h){if(c.$attr.ngValue){var i,j=NaN;c.$observe("value",function(a){var c,d=b.prop("selected");u(j)&&(f.removeOption(i),delete f.selectValueMap[j],c=!0),j=fb(a),i=a,f.selectValueMap[j]=a,f.addOption(a,b),b.attr("value",j),c&&d&&e()})}else g?c.$observe("value",function(a){f.readValue();var c,d=b.prop("selected");u(i)&&(f.removeOption(i),c=!0),i=a,f.addOption(a,b),c&&d&&e()}):h?a.$watch(h,function(a,d){c.$set("value",a);var g=b.prop("selected");d!==a&&f.removeOption(d),f.addOption(a,b),d&&g&&e()}):f.addOption(c.value,b);c.$observe("disabled",function(a){("true"===a||a&&b.prop("selected"))&&(f.multiple?e(!0):(f.ngModelCtrl.$setViewValue(null),f.ngModelCtrl.$render()))}),b.on("$destroy",function(){var a=f.readValue(),b=c.value;f.removeOption(b),d(),(f.multiple&&a&&-1!==a.indexOf(b)||a===b)&&e(!0)})}}],ph=function(){function a(a,b,c,d){var e=d[0],g=d[1];if(!g)return void(e.registerOption=p);if(e.ngModelCtrl=g,b.on("change",function(){e.removeUnknownOption(),a.$apply(function(){g.$setViewValue(e.readValue())})}),c.multiple){e.multiple=!0,e.readValue=function(){var a=[];return f(b.find("option"),function(b){if(b.selected&&!b.disabled){var c=b.value;a.push(c in e.selectValueMap?e.selectValueMap[c]:c)}}),a},e.writeValue=function(a){f(b.find("option"),function(b){var c=!!a&&(O(a,b.value)||O(a,e.selectValueMap[b.value])),d=b.selected;c!==d&&Td(be(b),c)})};var h,i=NaN;a.$watch(function(){i!==g.$viewValue||S(h,g.$viewValue)||(h=wa(g.$viewValue),g.$render()),i=g.$viewValue}),g.$isEmpty=function(a){return!a||0===a.length}}}function b(a,b,c,d){var e=d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:oh,priority:1,link:{pre:a,post:b}}},qh=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){var d,e;return u(c.ngValue)||(u(c.value)?d=a(c.value,!0):(e=a(b.text(),!0),e||c.$set("value",b.text()))),function(a,b,c){var f="$selectController",g=b.parent(),h=g.data(f)||g.parent().data(f);h&&h.registerOption(a,b,c,d,e)}}}}],rh=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},sh=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){if(x(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw b("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,a,aa(c));f=a||void 0,e.$validate()}),e.$validators.pattern=function(a,b){return e.$isEmpty(b)||t(f)||f.test(b)}}}}},th=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=n(a);e=me(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},uh=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=n(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void(a.console&&console.log("WARNING: Tried to load angular more than once.")):(na(),za(ke),ke.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}function c(a,c){var d=c;void 0===d&&(d=Math.min(b(a),3));var e=Math.pow(10,d),f=(a*e|0)%e;return{v:d,f:f}}var d={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,b){var e=0|a,f=c(a,b);return 1==e&&0==f.v?d.ONE:d.OTHER}})}]),void be(function(){ia(a.document,ja)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(a,b){"use strict";function c(a,b,c){if(!a)throw pa("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function d(a,b){return a||b?a?b?(X(a)&&(a=a.join(" ")),X(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function e(a){var b={};return a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from),b}function f(a,b,c){var d="";return a=X(a)?a:a&&aa(a)&&a.length?a.split(/\s+/):[],W(a,function(a,e){a&&a.length>0&&(d+=e>0?" ":"",d+=c?b+a:a+b)}),d}function g(a,b){var c=a.indexOf(b);b>=0&&a.splice(c,1)}function h(a){if(a instanceof ca)switch(a.length){case 0:return a;case 1:if(a[0].nodeType===L)return a;break;default:return ca(i(a))}return a.nodeType===L?ca(a):void 0}function i(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===L)return c}}function j(a,b,c){W(b,function(b){a.addClass(b,c)})}function k(a,b,c){W(b,function(b){a.removeClass(b,c)})}function l(a){return function(b,c){c.addClass&&(j(a,b,c.addClass),c.addClass=null),c.removeClass&&(k(a,b,c.removeClass),c.removeClass=null)}}function m(a){if(a=a||{},!a.$$prepared){var b=a.domOperation||da;a.domOperation=function(){a.$$domOperationFired=!0,b(),b=da},a.$$prepared=!0}return a}function n(a,b){o(a,b),p(a,b)}function o(a,b){b.from&&(a.css(b.from),b.from=null)}function p(a,b){b.to&&(a.css(b.to),b.to=null)}function q(a,b,c){var d=b.options||{},e=c.options||{},f=(d.addClass||"")+" "+(e.addClass||""),g=(d.removeClass||"")+" "+(e.removeClass||""),h=r(a.attr("class"),f,g);e.preparationClasses&&(d.preparationClasses=y(e.preparationClasses,d.preparationClasses),delete e.preparationClasses);var i=d.domOperation!==da?d.domOperation:null;return V(d,e),i&&(d.domOperation=i),h.addClass?d.addClass=h.addClass:d.addClass=null,h.removeClass?d.removeClass=h.removeClass:d.removeClass=null,b.addClass=d.addClass,b.removeClass=d.removeClass,d}function r(a,b,c){function d(a){aa(a)&&(a=a.split(" "));var b={};return W(a,function(a){a.length&&(b[a]=!0)}),b}var e=1,f=-1,g={};a=d(a),b=d(b),W(b,function(a,b){g[b]=e}),c=d(c),W(c,function(a,b){g[b]=g[b]===e?null:f});var h={addClass:"",removeClass:""};return W(g,function(b,c){var d,g;b===e?(d="addClass",g=!a[c]||a[c+N]):b===f&&(d="removeClass",g=a[c]||a[c+M]),g&&(h[d].length&&(h[d]+=" "),h[d]+=c)}),h}function s(a){return a instanceof ca?a[0]:a}function t(a,b,c){var d="";b&&(d=f(b,O,!0)),c.addClass&&(d=y(d,f(c.addClass,M))),c.removeClass&&(d=y(d,f(c.removeClass,N))),d.length&&(c.preparationClasses=d,a.addClass(d))}function u(a,b){b.preparationClasses&&(a.removeClass(b.preparationClasses),b.preparationClasses=null),b.activeClasses&&(a.removeClass(b.activeClasses),b.activeClasses=null)}function v(a,b){var c=b?"-"+b+"s":"";return x(a,[na,c]),[na,c]}function w(a,b){var c=b?"paused":"",d=J+ja;return x(a,[d,c]),[d,c]}function x(a,b){var c=b[0],d=b[1];a.style[c]=d}function y(a,b){return a?b?a+" "+b:a:b}function z(a){return[ma,a+"s"]}function A(a,b){var c=b?la:na;return[c,a+"s"]}function B(a,b,c){var d=Object.create(null),e=a.getComputedStyle(b)||{};return W(c,function(a,b){var c=e[a];if(c){var f=c.charAt(0);("-"===f||"+"===f||f>=0)&&(c=C(c)),0===c&&(c=null),d[b]=c}}),d}function C(a){var b=0,c=a.split(/\s*,\s*/);return W(c,function(a){"s"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a=parseFloat(a)||0,b=b?Math.max(a,b):a}),b}function D(a){return 0===a||null!=a}function E(a,b){var c=H,d=a+"s";return b?c+=ea:d+=" linear all",[c,d]}function F(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){var c=a[b];return c?c.total:0},get:function(b){var c=a[b];return c&&c.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function G(a,b,c){W(c,function(c){a[c]=Y(a[c])?a[c]:b.style.getPropertyValue(c)})}var H,I,J,K,L=1,M="-add",N="-remove",O="ng-",P="-active",Q="-prepare",R="ng-animate",S="$$ngAnimateChildren",T="";void 0===a.ontransitionend&&void 0!==a.onwebkittransitionend?(T="-webkit-",H="WebkitTransition",I="webkitTransitionEnd transitionend"):(H="transition",I="transitionend"),void 0===a.onanimationend&&void 0!==a.onwebkitanimationend?(T="-webkit-",J="WebkitAnimation",K="webkitAnimationEnd animationend"):(J="animation",K="animationend");var U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea="Duration",fa="Property",ga="Delay",ha="TimingFunction",ia="IterationCount",ja="PlayState",ka=9999,la=J+ga,ma=J+ea,na=H+ga,oa=H+ea,pa=b.$$minErr("ng"),qa=["$$rAF",function(a){function b(a){d=d.concat(a),c()}function c(){if(d.length){for(var b=d.shift(),f=0;f<b.length;f++)b[f]();e||a(function(){e||c()})}}var d,e;return d=b.queue=[],b.waitUntilQuiet=function(b){e&&e(),e=a(function(){e=null,b(),c()})},b}],ra=["$interpolate",function(a){return{link:function(b,c,d){function e(a){a="on"===a||"true"===a,c.data(S,a)}var f=d.ngAnimateChildren;aa(f)&&0===f.length?c.data(S,!0):(e(a(f)(b)),d.$observe("ngAnimateChildren",e))}}}],sa="$$animateCss",ta=1e3,ua=3,va=1.5,wa={transitionDuration:oa,transitionDelay:na,transitionProperty:H+fa,animationDuration:ma,animationDelay:la,animationIterationCount:J+ia},xa={transitionDuration:oa,transitionDelay:na,animationDuration:ma,animationDelay:la},ya=["$animateProvider",function(a){var b=F(),c=F();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,d,h,i,j,k,q,r){function t(a,b){var c="$$ngAnimateParentKey",d=a.parentNode,e=d[c]||(d[c]=++Q);return e+"-"+a.getAttribute("class")+"-"+b}function u(c,d,e,f){var g=b.get(e);return g||(g=B(a,c,f),"infinite"===g.animationIterationCount&&(g.animationIterationCount=1)),b.put(e,g),g}function y(e,g,h,i){var j;if(b.count(h)>0&&(j=c.get(h),!j)){var k=f(g,"-stagger");d.addClass(e,k),j=B(a,e,i),j.animationDuration=Math.max(j.animationDuration,0),j.transitionDuration=Math.max(j.transitionDuration,0),d.removeClass(e,k),c.put(h,j)}return j||{}}function C(a){R.push(a),q.waitUntilQuiet(function(){b.flush(),c.flush();for(var a=j(),d=0;d<R.length;d++)R[d](a);R.length=0})}function F(a,b,c){var d=u(a,b,c,wa),e=d.animationDelay,f=d.transitionDelay;return d.maxDelay=e&&f?Math.max(e,f):e||f,d.maxDuration=Math.max(d.animationDuration*d.animationIterationCount,d.transitionDuration),d}var L=l(d),Q=0,R=[];return function(a,c){function j(){q()}function l(){q(!0)}function q(b){if(!(Y||$&&Z)){Y=!0,Z=!1,S.$$skipPreparationClasses||d.removeClass(a,wa),d.removeClass(a,za),w(V,!1),v(V,!1),W(ja,function(a){V.style[a[0]]=""}),L(a,S),n(a,S),Object.keys(T).length&&W(T,function(a,b){a?V.style.setProperty(b,a):V.style.removeProperty(b)}),S.onDone&&S.onDone(),na&&na.length&&a.off(na.join(" "),Q);var c=a.data(sa);c&&(i.cancel(c[0].timer),a.removeData(sa)),_&&_.complete(!b)}}function u(a){Na.blockTransition&&v(V,a),Na.blockKeyframeAnimation&&w(V,!!a)}function B(){return _=new h({end:j,cancel:l}),C(da),q(),{$$willAnimate:!1,start:function(){return _},end:j}}function Q(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||Date.now(),d=parseFloat(b.elapsedTime.toFixed(ua));Math.max(c-ia,0)>=ca&&d>=ea&&($=!0,q())}function R(){function b(){if(!Y){if(u(!1),W(ja,function(a){var b=a[0],c=a[1];V.style[b]=c}),L(a,S),d.addClass(a,za),Na.recalculateTimingStyles){if(ya=V.getAttribute("class")+" "+wa,Ca=t(V,ya),La=F(V,ya,Ca),Ma=La.maxDelay,ba=Math.max(Ma,0),ea=La.maxDuration,0===ea)return void q();Na.hasTransitions=La.transitionDuration>0,Na.hasAnimations=La.animationDuration>0}if(Na.applyAnimationDelay&&(Ma="boolean"!=typeof S.delay&&D(S.delay)?parseFloat(S.delay):Ma,ba=Math.max(Ma,0),La.animationDelay=Ma,Oa=A(Ma,!0),ja.push(Oa),V.style[Oa[0]]=Oa[1]),ca=ba*ta,ga=ea*ta,S.easing){var b,e=S.easing;Na.hasTransitions&&(b=H+ha,ja.push([b,e]),V.style[b]=e),Na.hasAnimations&&(b=J+ha,ja.push([b,e]),V.style[b]=e)}La.transitionDuration&&na.push(I),La.animationDuration&&na.push(K),ia=Date.now();var f=ca+va*ga,g=ia+f,h=a.data(sa)||[],j=!0;if(h.length){var k=h[0];j=g>k.expectedEndTime,j?i.cancel(k.timer):h.push(q)}if(j){var l=i(c,f,!1);h[0]={timer:l,expectedEndTime:g},h.push(q),a.data(sa,h)}na.length&&a.on(na.join(" "),Q),S.to&&(S.cleanupStyles&&G(T,V,Object.keys(S.to)),p(a,S))}}function c(){var b=a.data(sa);if(b){for(var c=1;c<b.length;c++)b[c]();a.removeData(sa)}}if(!Y){if(!V.parentNode)return void q();var e=function(a){if($)Z&&a&&(Z=!1,q());else if(Z=!a,La.animationDuration){var b=w(V,Z);Z?ja.push(b):g(ja,b)}},f=Ja>0&&(La.transitionDuration&&0===Da.transitionDuration||La.animationDuration&&0===Da.animationDuration)&&Math.max(Da.animationDelay,Da.transitionDelay);f?i(b,Math.floor(f*Ja*ta),!1):b(),aa.resume=function(){e(!0)},aa.pause=function(){e(!1)}}}var S=c||{};S.$$prepared||(S=m(U(S)));var T={},V=s(a);if(!V||!V.parentNode||!r.enabled())return B();var Y,Z,$,_,aa,ba,ca,ea,ga,ia,ja=[],la=a.attr("class"),ma=e(S),na=[];if(0===S.duration||!k.animations&&!k.transitions)return B();var oa=S.event&&X(S.event)?S.event.join(" "):S.event,pa=oa&&S.structural,qa="",ra="";pa?qa=f(oa,O,!0):oa&&(qa=oa),S.addClass&&(ra+=f(S.addClass,M)),S.removeClass&&(ra.length&&(ra+=" "),ra+=f(S.removeClass,N)),S.applyClassesEarly&&ra.length&&L(a,S);var wa=[qa,ra].join(" ").trim(),ya=la+" "+wa,za=f(wa,P),Aa=ma.to&&Object.keys(ma.to).length>0,Ba=(S.keyframeStyle||"").length>0;if(!Ba&&!Aa&&!wa)return B();var Ca,Da;if(S.stagger>0){var Ea=parseFloat(S.stagger);Da={transitionDelay:Ea,animationDelay:Ea,transitionDuration:0,animationDuration:0}}else Ca=t(V,ya),Da=y(V,wa,Ca,xa);S.$$skipPreparationClasses||d.addClass(a,wa);var Fa;if(S.transitionStyle){var Ga=[H,S.transitionStyle];x(V,Ga),ja.push(Ga)}if(S.duration>=0){Fa=V.style[H].length>0;var Ha=E(S.duration,Fa);x(V,Ha),ja.push(Ha)}if(S.keyframeStyle){var Ia=[J,S.keyframeStyle];x(V,Ia),ja.push(Ia)}var Ja=Da?S.staggerIndex>=0?S.staggerIndex:b.count(Ca):0,Ka=0===Ja;Ka&&!S.skipBlocking&&v(V,ka);var La=F(V,ya,Ca),Ma=La.maxDelay;ba=Math.max(Ma,0),ea=La.maxDuration;var Na={};if(Na.hasTransitions=La.transitionDuration>0,Na.hasAnimations=La.animationDuration>0,Na.hasTransitionAll=Na.hasTransitions&&"all"===La.transitionProperty,Na.applyTransitionDuration=Aa&&(Na.hasTransitions&&!Na.hasTransitionAll||Na.hasAnimations&&!Na.hasTransitions),Na.applyAnimationDuration=S.duration&&Na.hasAnimations,Na.applyTransitionDelay=D(S.delay)&&(Na.applyTransitionDuration||Na.hasTransitions),Na.applyAnimationDelay=D(S.delay)&&Na.hasAnimations,Na.recalculateTimingStyles=ra.length>0,(Na.applyTransitionDuration||Na.applyAnimationDuration)&&(ea=S.duration?parseFloat(S.duration):ea,Na.applyTransitionDuration&&(Na.hasTransitions=!0,La.transitionDuration=ea,Fa=V.style[H+fa].length>0,ja.push(E(ea,Fa))),Na.applyAnimationDuration&&(Na.hasAnimations=!0,La.animationDuration=ea,ja.push(z(ea)))),0===ea&&!Na.recalculateTimingStyles)return B();if(null!=S.delay){var Oa;"boolean"!=typeof S.delay&&(Oa=parseFloat(S.delay),ba=Math.max(Oa,0)),Na.applyTransitionDelay&&ja.push(A(Oa)),Na.applyAnimationDelay&&ja.push(A(Oa,!0))}return null==S.duration&&La.transitionDuration>0&&(Na.recalculateTimingStyles=Na.recalculateTimingStyles||Ka),ca=ba*ta,ga=ea*ta,S.skipBlocking||(Na.blockTransition=La.transitionDuration>0,Na.blockKeyframeAnimation=La.animationDuration>0&&Da.animationDelay>0&&0===Da.animationDuration),S.from&&(S.cleanupStyles&&G(T,V,Object.keys(S.from)),o(a,S)),Na.blockTransition||Na.blockKeyframeAnimation?u(ea):S.skipBlocking||v(V,!1),{$$willAnimate:!0,end:j,start:function(){return Y?void 0:(aa={end:j,cancel:l,resume:null,pause:null},_=new h(aa),C(R),_)}}}}]}],za=["$$animationProvider",function(a){function b(a){return a.parentNode&&11===a.parentNode.nodeType}a.drivers.push("$$animateCssDriver");var c="ng-animate-shim",d="ng-anchor",e="ng-anchor-out",f="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,g,h,i,j,k,l){function m(a){return a.replace(/\bng-\S+\b/g,"")}function n(a,b){return aa(a)&&(a=a.split(" ")),aa(b)&&(b=b.split(" ")),a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function o(b,g,i){function j(a){var b={},c=s(a).getBoundingClientRect();return W(["width","height","top","left"],function(a){var d=c[a];switch(a){case"top":d+=r.scrollTop;break;case"left":d+=r.scrollLeft}b[a]=Math.floor(d)+"px"}),b}function k(){var b=a(q,{addClass:e,delay:!0,from:j(g)});return b.$$willAnimate?b:null}function l(a){return a.attr("class")||""}function o(){var b=m(l(i)),c=n(b,t),d=n(t,b),g=a(q,{to:j(i),addClass:f+" "+c,removeClass:e+" "+d,delay:!0});return g.$$willAnimate?g:null}function p(){q.remove(),g.removeClass(c),i.removeClass(c)}var q=ca(s(g).cloneNode(!0)),t=m(l(q));g.addClass(c),i.addClass(c),q.addClass(d),u.append(q);var v,w=k();if(!w&&(v=o(),!v))return p();var x=w||v;return{start:function(){function a(){c&&c.end()}var b,c=x.start();return c.done(function(){return c=null,!v&&(v=o())?(c=v.start(),c.done(function(){c=null,p(),b.complete()}),c):(p(),void b.complete())}),b=new h({end:a,cancel:a})}}}function p(a,b,c,d){var e=q(a,da),f=q(b,da),g=[];return W(d,function(a){var b=a.out,d=a["in"],e=o(c,b,d);e&&g.push(e)}),e||f||0!==g.length?{start:function(){function a(){W(b,function(a){a.end()})}var b=[];e&&b.push(e.start()),f&&b.push(f.start()),W(g,function(a){b.push(a.start())});var c=new h({end:a,cancel:a});return h.all(b,function(a){c.complete(a)}),c}}:void 0}function q(b){var c=b.element,d=b.options||{};b.structural&&(d.event=b.event,d.structural=!0,d.applyClassesEarly=!0,"leave"===b.event&&(d.onDone=d.domOperation)),d.preparationClasses&&(d.event=y(d.event,d.preparationClasses));var e=a(c,d);return e.$$willAnimate?e:null}if(!j.animations&&!j.transitions)return da;var r=l[0].body,t=s(i),u=ca(b(t)||r.contains(t)?t:r);return function(a){return a.from&&a.to?p(a.from,a.to,a.classes,a.anchors):q(a)}}]}],Aa=["$animateProvider",function(a){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function e(c){c=X(c)?c:c.split(" ");for(var d=[],e={},f=0;f<c.length;f++){var g=c[f],h=a.$$registeredAnimations[g];h&&!e[g]&&(d.push(b.get(h)),e[g]=!0)}return d}var f=l(d);return function(a,b,d,g){function h(){g.domOperation(),f(a,g)}function i(){o=!0,h(),n(a,g)}function j(a,b,d,e,f){var g;switch(d){case"animate":g=[b,e.from,e.to,f];break;case"setClass":g=[b,r,s,f];break;case"addClass":g=[b,r,f];break;case"removeClass":g=[b,s,f];break;default:g=[b,f]}g.push(e);var h=a.apply(a,g);if(h)if($(h.start)&&(h=h.start()),h instanceof c)h.done(f);else if($(h))return h;return da}function k(a,b,d,e,f){var g=[];return W(e,function(e){var h=e[f];h&&g.push(function(){var e,f,g=!1,i=function(a){g||(g=!0,(f||da)(a),e.complete(!a))};return e=new c({end:function(){i()},cancel:function(){i(!0)}}),f=j(h,a,b,d,function(a){var b=a===!1;i(b)}),e})}),g}function l(a,b,d,e,f){var g=k(a,b,d,e,f);if(0===g.length){var h,i;"beforeSetClass"===f?(h=k(a,"removeClass",d,e,"beforeRemoveClass"),i=k(a,"addClass",d,e,"beforeAddClass")):"setClass"===f&&(h=k(a,"removeClass",d,e,"removeClass"),i=k(a,"addClass",d,e,"addClass")),h&&(g=g.concat(h)),i&&(g=g.concat(i))}if(0!==g.length)return function(a){var b=[];return g.length&&W(g,function(a){b.push(a())}),b.length?c.all(b,a):a(),function(a){W(b,function(b){a?b.cancel():b.end()})}}}var o=!1;3===arguments.length&&_(d)&&(g=d,d=null),g=m(g),d||(d=a.attr("class")||"",g.addClass&&(d+=" "+g.addClass),g.removeClass&&(d+=" "+g.removeClass));var p,q,r=g.addClass,s=g.removeClass,t=e(d);if(t.length){var u,v;"leave"===b?(v="leave",u="afterLeave"):(v="before"+b.charAt(0).toUpperCase()+b.substr(1),u=b),"enter"!==b&&"move"!==b&&(p=l(a,b,g,t,v)),q=l(a,b,g,t,u)}if(p||q){var w;return{$$willAnimate:!0,end:function(){return w?w.end():(i(),w=new c,w.complete(!0)),w},start:function(){function a(a){i(a),w.complete(a)}function b(b){o||((d||da)(b),a(b))}if(w)return w;w=new c;var d,e=[];return p&&e.push(function(a){d=p(a)}),e.length?e.push(function(a){h(),a(!0)}):h(),q&&e.push(function(a){d=q(a)}),w.setHost({end:function(){b()},cancel:function(){b(!0)}}),c.chain(e,a),w}}}}}]}],Ba=["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(a,b){function c(b){var c=b.element,d=b.event,e=b.options,f=b.classes;return a(c,d,f,e)}return function(a){if(a.from&&a.to){var d=c(a.from),e=c(a.to);if(!d&&!e)return;return{start:function(){function a(){return function(){W(f,function(a){a.end()})}}function c(a){g.complete(a)}var f=[];d&&f.push(d.start()),e&&f.push(e.start()),b.all(f,c);var g=new b({end:a(),cancel:a()});return g}}}return c(a)}}]}],Ca="data-ng-animate",Da="$ngAnimatePin",Ea=["$animateProvider",function(b){function d(a){if(!a)return null;var b=a.split(o),c=Object.create(null);return W(b,function(a){c[a]=!0}),c}function e(a,b){if(a&&b){var c=d(b);return a.split(o).some(function(a){return c[a]})}}function f(a,b,c){return p[a].some(function(a){return a(b,c)})}function g(a,b){var c=(a.addClass||"").length>0,d=(a.removeClass||"").length>0;return b?c&&d:c||d}var j=1,k=2,o=" ",p=this.rules={skip:[],cancel:[],join:[]};p.join.push(function(a,b){return!a.structural&&g(a)}),p.skip.push(function(a,b){return!a.structural&&!g(a)}),p.skip.push(function(a,b){return"leave"===b.event&&a.structural}),p.skip.push(function(a,b){return b.structural&&b.state===k&&!a.structural}),p.cancel.push(function(a,b){return b.structural&&a.structural}),p.cancel.push(function(a,b){return b.state===k&&a.structural}),p.cancel.push(function(a,b){if(b.structural)return!1;var c=a.addClass,d=a.removeClass,f=b.addClass,g=b.removeClass;return ba(c)&&ba(d)||ba(f)&&ba(g)?!1:e(c,g)||e(d,f)}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(d,e,o,p,r,v,w,x,y,z,A){function B(){var a=!1;return function(b){a?b():e.$$postDigest(function(){a=!0,b()})}}function C(a,b){return q(a,b,{})}function D(a,b,c){var d=[],e=Q[c];return e&&W(e,function(e){da.call(e.node,b)?d.push(e.callback):"leave"===c&&da.call(e.node,a)&&d.push(e.callback)}),d}function E(a,b,c){var d=i(b);return a.filter(function(a){var b=a.node===d&&(!c||a.callback===c);return!b})}function F(a,b){"close"!==a||b.parentNode||ea.off(b)}function G(a,b,c){function i(a,b,c,e){z(function(){var a=D(x,r,b);a.length?d(function(){W(a,function(a){a(p,c,e)}),F(c,r)}):F(c,r)}),a.progress(b,c,e)}function l(a){u(p,o),$(p,o),n(p,o),o.domOperation(),y.complete(!a)}var o=U(c),p=h(a),r=s(p),x=r&&r.parentNode;o=m(o);var y=new w,z=B();if(X(o.addClass)&&(o.addClass=o.addClass.join(" ")),o.addClass&&!aa(o.addClass)&&(o.addClass=null),X(o.removeClass)&&(o.removeClass=o.removeClass.join(" ")),o.removeClass&&!aa(o.removeClass)&&(o.removeClass=null),o.from&&!_(o.from)&&(o.from=null),o.to&&!_(o.to)&&(o.to=null),!r)return l(),y;var E=[r.getAttribute("class"),o.addClass,o.removeClass].join(" ");if(!T(E))return l(),y;var G=["enter","move","leave"].indexOf(b)>=0,L=A(),P=!O||L||N.get(r),Q=!P&&M.get(r)||{},R=!!Q.state;if(P||R&&Q.state===j||(P=!J(r,x,b)),P)return L&&i(y,b,"start"),l(),L&&i(y,b,"close"),y;G&&H(r);var S={structural:G,element:p,event:b,addClass:o.addClass,removeClass:o.removeClass,close:l,options:o,runner:y};if(R){var V=f("skip",S,Q);if(V)return Q.state===k?(l(),y):(q(p,Q,S),Q.runner);var Y=f("cancel",S,Q);if(Y)if(Q.state===k)Q.runner.end();else{if(!Q.structural)return q(p,Q,S),Q.runner;Q.close()}else{var Z=f("join",S,Q);if(Z){if(Q.state!==k)return t(p,G?b:null,o),b=S.event=Q.event,o=q(p,Q,S),Q.runner;C(p,S)}}}else C(p,S);var ba=S.structural;if(ba||(ba="animate"===S.event&&Object.keys(S.options.to||{}).length>0||g(S)),!ba)return l(),I(r),y;var ca=(Q.counter||0)+1;return S.counter=ca,K(r,j,S),e.$$postDigest(function(){p=h(a);var c=M.get(r),d=!c;c=c||{};var e=p.parent()||[],f=e.length>0&&("animate"===c.event||c.structural||g(c));if(d||c.counter!==ca||!f)return d&&($(p,o),n(p,o)),(d||G&&c.event!==b)&&(o.domOperation(),y.end()),void(f||I(r));b=!c.structural&&g(c,!0)?"setClass":c.event,K(r,k);var j=v(p,b,c.options);y.setHost(j),i(y,b,"start",{}),j.done(function(a){l(!a);var c=M.get(r);c&&c.counter===ca&&I(r),i(y,b,"close",{})})}),y}function H(a){var b=a.querySelectorAll("["+Ca+"]");W(b,function(a){var b=parseInt(a.getAttribute(Ca),10),c=M.get(a);if(c)switch(b){case k:c.runner.end();case j:M["delete"](a)}})}function I(a){a.removeAttribute(Ca),M["delete"](a)}function J(a,b,c){var d,e=p[0].body,f=s(o),g=a===e||"HTML"===a.nodeName,h=a===f,i=!1,j=N.get(a),k=ca.data(a,Da);for(k&&(b=s(k));b&&(h||(h=b===f),b.nodeType===L);){var l=M.get(b)||{};if(!i){var m=N.get(b);if(m===!0&&j!==!1){j=!0;break}m===!1&&(j=!1),i=l.structural}if(ba(d)||d===!0){var n=ca.data(b,S);Y(n)&&(d=n)}if(i&&d===!1)break;if(g||(g=b===e),g&&h)break;b=h||!(k=ca.data(b,Da))?b.parentNode:s(k)}var q=(!i||d)&&j!==!0;return q&&h&&g}function K(a,b,c){c=c||{},c.state=b,a.setAttribute(Ca,b);var d=M.get(a),e=d?V(d,c):c;M.set(a,e)}var M=new r,N=new r,O=null,P=e.$watch(function(){return 0===x.totalPendingRequests},function(a){a&&(P(),e.$$postDigest(function(){e.$$postDigest(function(){null===O&&(O=!0)})}))}),Q=Object.create(null),R=b.classNameFilter(),T=R?function(a){return R.test(a)}:function(){return!0},$=l(y),da=a.Node.prototype.contains||function(a){return this===a||!!(16&this.compareDocumentPosition(a))},ea={on:function(a,b,c){var d=i(b);Q[a]=Q[a]||[],Q[a].push({node:d,callback:c}),ca(b).on("$destroy",function(){var e=M.get(d);e||ea.off(a,b,c)})},off:function(a,b,c){if(1!==arguments.length||aa(arguments[0])){var d=Q[a];d&&(Q[a]=1===arguments.length?null:E(d,b,c))}else{b=arguments[0];for(var e in Q)Q[e]=E(Q[e],b)}},pin:function(a,b){c(Z(a),"element","not an element"),c(Z(b),"parentElement","not an element"),a.data(Da,b)},push:function(a,b,c,d){return c=c||{},c.domOperation=d,G(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!O;else{var d=Z(a);if(d){var e=s(a);1===c?b=!N.get(e):N.set(e,!b)}else b=O=!!a}return b}};return ea}]}],Fa=["$animateProvider",function(a){function b(a,b){a.data(h,b)}function c(a){a.removeData(h)}function e(a){return a.data(h)}var f="ng-animate-ref",g=this.drivers=[],h="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(a,h,i,j,k,o){function p(a){function b(a){if(a.processed)return a;a.processed=!0;var c=a.domNode,d=c.parentNode;f.set(c,a);for(var g;d;){if(g=f.get(d)){g.processed||(g=b(g));break}d=d.parentNode}return(g||e).children.push(a),a}function c(a){var b,c=[],d=[];for(b=0;b<a.children.length;b++)d.push(a.children[b]);var e=d.length,f=0,g=[];for(b=0;b<d.length;b++){var h=d[b];0>=e&&(e=f,f=0,c.push(g),g=[]),g.push(h.fn),h.children.forEach(function(a){f++,d.push(a)}),e--}return g.length&&c.push(g),c}var d,e={children:[]},f=new k;for(d=0;d<a.length;d++){var g=a[d];f.set(g.domNode,a[d]={domNode:g.domNode,fn:g.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return c(e)}var q=[],r=l(a);return function(k,l,t){function u(a){var b="["+f+"]",c=a.hasAttribute(f)?[a]:a.querySelectorAll(b),d=[];return W(c,function(a){var b=a.getAttribute(f);b&&b.length&&d.push(a)}),d}function v(a){var b=[],c={};W(a,function(a,d){var e=a.element,g=s(e),h=a.event,i=["enter","move"].indexOf(h)>=0,j=a.structural?u(g):[];if(j.length){var k=i?"to":"from";W(j,function(a){var b=a.getAttribute(f);c[b]=c[b]||{},c[b][k]={animationID:d,element:ca(a)}})}else b.push(a)});var d={},e={};return W(c,function(c,f){var g=c.from,h=c.to;if(!g||!h){var i=g?g.animationID:h.animationID,j=i.toString();return void(d[j]||(d[j]=!0,b.push(a[i])))}var k=a[g.animationID],l=a[h.animationID],m=g.animationID.toString();if(!e[m]){var n=e[m]={structural:!0,beforeStart:function(){k.beforeStart(),l.beforeStart()},close:function(){k.close(),l.close()},classes:w(k.classes,l.classes),from:k,to:l,anchors:[]};n.classes.length?b.push(n):(b.push(k),b.push(l))}e[m].anchors.push({out:g.element,"in":h.element})}),b}function w(a,b){a=a.split(" "),b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var e=a[d];if("ng-"!==e.substring(0,3))for(var f=0;f<b.length;f++)if(e===b[f]){c.push(e);break}}return c.join(" ")}function x(a){for(var b=g.length-1;b>=0;b--){var c=g[b],d=i.get(c),e=d(a);if(e)return e}}function y(){k.addClass(R),F&&a.addClass(k,F),G&&(a.removeClass(k,G),G=null)}function z(a,b){function c(a){var c=e(a);c&&c.setHost(b)}a.from&&a.to?(c(a.from.element),c(a.to.element)):c(a.element)}function A(){var a=e(k);!a||"leave"===l&&t.$$domOperationFired||a.end()}function B(b){k.off("$destroy",A),c(k),r(k,t),n(k,t),t.domOperation(),F&&a.removeClass(k,F),k.removeClass(R),D.complete(!b)}t=m(t);var C=["enter","move","leave"].indexOf(l)>=0,D=new j({end:function(){B()},cancel:function(){B(!0)}});if(!g.length)return B(),D;b(k,D);var E=d(k.attr("class"),d(t.addClass,t.removeClass)),F=t.tempClasses;F&&(E+=" "+F,t.tempClasses=null);var G;return C&&(G="ng-"+l+Q,a.addClass(k,G)),q.push({element:k,classes:E,event:l,structural:C,options:t,beforeStart:y,close:B}),k.on("$destroy",A),q.length>1?D:(h.$$postDigest(function(){var a=[];W(q,function(b){e(b.element)?a.push(b):b.close()}),q.length=0;var b=v(a),c=[];W(b,function(a){c.push({domNode:s(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var b,c=a.close,d=a.anchors?a.from.element||a.to.element:a.element;if(e(d)){var f=x(a);f&&(b=f.start)}if(b){var g=b();g.done(function(a){c(!a)}),z(a,g)}else c()}})}),o(p(c))}),D)}}]}],Ga=["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,c,d,e,f){var g,h;b.$watchCollection(d.ngAnimateSwap||d["for"],function(d){g&&a.leave(g),h&&(h.$destroy(),h=null),(d||0===d)&&(h=b.$new(),f(h,function(b){g=b,a.enter(b,null,c)}))})}}}];b.module("ngAnimate",[],function(){
da=b.noop,U=b.copy,V=b.extend,ca=b.element,W=b.forEach,X=b.isArray,aa=b.isString,_=b.isObject,ba=b.isUndefined,Y=b.isDefined,$=b.isFunction,Z=b.isElement}).info({angularVersion:"1.6.3"}).directive("ngAnimateSwap",Ga).directive("ngAnimateChildren",ra).factory("$$rAFScheduler",qa).provider("$$animateQueue",Ea).provider("$$animation",Fa).provider("$animateCss",ya).provider("$$animateCssDriver",za).provider("$$animateJs",Aa).provider("$$animateJsDriver",Ba)}(window,window.angular),function(a,b){"use strict";function c(){function a(a,b,d,e){return function(g,h,i){var j=i.$normalize(b);!c[j]||f(h,d)||i[j]||g.$watch(i[a],function(a){a=e?!a:!!a,h.attr(b,a)})}}var c={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeydown:!0,bindRoleForClick:!0};this.config=function(a){c=b.extend(c,a)},this.$get=function(){return{config:function(a){return c[a]},$$watchExpr:a}}}var d=b.module("ngAria",["ng"]).info({angularVersion:"1.6.3"}).provider("$aria",c),e=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],f=function(a,b){return-1!==b.indexOf(a[0].nodeName)?!0:void 0};d.directive("ngShow",["$aria",function(a){return a.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(a){return a.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(a){return a.$$watchExpr("ngValue","aria-checked",e,!1)}]).directive("ngChecked",["$aria",function(a){return a.$$watchExpr("ngChecked","aria-checked",e,!1)}]).directive("ngReadonly",["$aria",function(a){return a.$$watchExpr("ngReadonly","aria-readonly",e,!1)}]).directive("ngRequired",["$aria",function(a){return a.$$watchExpr("ngRequired","aria-required",e,!1)}]).directive("ngModel",["$aria",function(a){function b(b,c,d,g){return a.config(c)&&!d.attr(b)&&(g||!f(d,e))}function c(a,b){return!b.attr("role")&&b.attr("type")===a&&!f(b,e)}function d(a,b){var c=a.type,d=a.role;return"checkbox"===(c||d)||"menuitemcheckbox"===d?"checkbox":"radio"===(c||d)||"menuitemradio"===d?"radio":"range"===c||"progressbar"===d||"slider"===d?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(e,f){var g=d(f,e);return{post:function(d,e,f,h){function i(){return h.$modelValue}function j(a){var b=f.value==h.$viewValue;e.attr("aria-checked",b)}function k(){e.attr("aria-checked",!h.$isEmpty(h.$viewValue))}var l=b("tabindex","tabindex",e,!1);switch(g){case"radio":case"checkbox":c(g,e)&&e.attr("role",g),b("aria-checked","ariaChecked",e,!1)&&d.$watch(i,"radio"===g?j:k),l&&e.attr("tabindex",0);break;case"range":if(c(g,e)&&e.attr("role","slider"),a.config("ariaValue")){var m=!e.attr("aria-valuemin")&&(f.hasOwnProperty("min")||f.hasOwnProperty("ngMin")),n=!e.attr("aria-valuemax")&&(f.hasOwnProperty("max")||f.hasOwnProperty("ngMax")),o=!e.attr("aria-valuenow");m&&f.$observe("min",function(a){e.attr("aria-valuemin",a)}),n&&f.$observe("max",function(a){e.attr("aria-valuemax",a)}),o&&d.$watch(i,function(a){e.attr("aria-valuenow",a)})}l&&e.attr("tabindex",0)}!f.hasOwnProperty("ngRequired")&&h.$validators.required&&b("aria-required","ariaRequired",e,!1)&&f.$observe("required",function(){e.attr("aria-required",!!f.required)}),b("aria-invalid","ariaInvalid",e,!0)&&d.$watch(function(){return h.$invalid},function(a){e.attr("aria-invalid",!!a)})}}}}}]).directive("ngDisabled",["$aria",function(a){return a.$$watchExpr("ngDisabled","aria-disabled",e,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(a,b,c,d){b.attr("aria-live")||b.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(a,b){return{restrict:"A",compile:function(c,d){var g=b(d.ngClick);return function(b,c,d){f(c,e)||(a.config("bindRoleForClick")&&!c.attr("role")&&c.attr("role","button"),a.config("tabindex")&&!c.attr("tabindex")&&c.attr("tabindex",0),!a.config("bindKeydown")||d.ngKeydown||d.ngKeypress||d.ngKeyup||c.on("keydown",function(a){function c(){g(b,{$event:a})}var d=a.which||a.keyCode;(32===d||13===d)&&b.$apply(c)}))}}}}]).directive("ngDblclick",["$aria",function(a){return function(b,c,d){!a.config("tabindex")||c.attr("tabindex")||f(c,e)||c.attr("tabindex",0)}}])}(window,window.angular),function(a,b){"use strict";function c(a,c,d){function e(a,d,e){var g,h;e=e||{},h=e.expires,g=b.isDefined(e.path)?e.path:f,b.isUndefined(d)&&(h="Thu, 01 Jan 1970 00:00:00 GMT",d=""),b.isString(h)&&(h=new Date(h));var i=encodeURIComponent(a)+"="+encodeURIComponent(d);i+=g?";path="+g:"",i+=e.domain?";domain="+e.domain:"",i+=h?";expires="+h.toUTCString():"",i+=e.secure?";secure":"";var j=i.length+1;return j>4096&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+j+" > 4096 bytes)!"),i}var f=d.baseHref(),g=a[0];return function(a,b,c){g.cookie=e(a,b,c)}}b.module("ngCookies",["ng"]).info({angularVersion:"1.6.3"}).provider("$cookies",[function(){function a(a){return a?b.extend({},c,a):c}var c=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(c,d){return{get:function(a){return c()[a]},getObject:function(a){var c=this.get(a);return c?b.fromJson(c):c},getAll:function(){return c()},put:function(b,c,e){d(b,c,a(e))},putObject:function(a,c,d){this.put(a,b.toJson(c),d)},remove:function(b,c){d(b,void 0,a(c))}}}]}]),b.module("ngCookies").factory("$cookieStore",["$cookies",function(a){return{get:function(b){return a.getObject(b)},put:function(b,c){a.putObject(b,c)},remove:function(b){a.remove(b)}}}]),c.$inject=["$document","$log","$browser"],b.module("ngCookies").provider("$$cookieWriter",function(){this.$get=c})}(window,window.angular),function(a,b){"use strict";function c(){function a(a,b){return a?e(a)?a.indexOf(b)>=0:a.hasOwnProperty(b):void 0}return["$animate",function(b){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(c,d,f,g,h){var i,j=d[0],k=f.ngMessage||f.when,l=f.ngMessageExp||f.whenExp,m=function(a){i=a?e(a)?a:a.split(/[\s,]+/):null,g.reRender()};l?(m(c.$eval(l)),c.$watchCollection(l,m)):m(k);var n,o;g.register(j,o={test:function(b){return a(i,b)},attach:function(){n||h(function(a,c){b.enter(a,null,d),n=a;var e=n.$$attachId=g.getAttachId();n.on("$destroy",function(){n&&n.$$attachId===e&&(g.deregister(j),o.detach()),c.$destroy()})})},detach:function(){if(n){var a=n;n=null,b.leave(a)}}})}}}]}var d,e,f,g;b.module("ngMessages",[],function(){d=b.forEach,e=b.isArray,f=b.isString,g=b.element}).info({angularVersion:"1.6.3"}).directive("ngMessages",["$animate",function(a){function b(a,b){return f(b)&&0===b.length||c(a.$eval(b))}function c(a){return f(a)?a.length:!!a}var e="ng-active",g="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(f,h,i){function j(a,b){for(var c=b,d=[];c&&c!==a;){var e=c.$$ngMessageNode;if(e&&e.length)return r[e];c.childNodes.length&&-1===d.indexOf(c)?(d.push(c),c=c.childNodes[c.childNodes.length-1]):c.previousSibling?c=c.previousSibling:(c=c.parentNode,d.push(c))}}function k(a,b,c){var d=r[c];if(m.head){var e=j(a,b);e?(d.next=e.next,e.next=d):(d.next=m.head,m.head=d)}else m.head=d}function l(a,b,c){var d=r[c],e=j(a,b);e?e.next=d.next:m.head=d.next}var m=this,n=0,o=0;this.getAttachId=function(){return o++};var p,q,r=this.messages={};this.render=function(j){j=j||{},p=!1,q=j;for(var k=b(h,i.ngMessagesMultiple)||b(h,i.multiple),l=[],n={},o=m.head,r=!1,s=0;null!=o;){s++;var t=o.message,u=!1;r||d(j,function(a,b){if(!u&&c(a)&&t.test(b)){if(n[b])return;n[b]=!0,u=!0,t.attach()}}),u?r=!k:l.push(t),o=o.next}d(l,function(a){a.detach()}),l.length!==s?a.setClass(f,e,g):a.setClass(f,g,e)},h.$watchCollection(i.ngMessages||i["for"],m.render),f.on("$destroy",function(){d(r,function(a){a.message.detach()})}),this.reRender=function(){p||(p=!0,h.$evalAsync(function(){p&&q&&m.render(q)}))},this.register=function(a,b){var c=n.toString();r[c]={message:b},k(f[0],a,c),a.$$ngMessageNode=c,n++,m.reRender()},this.deregister=function(a){var b=a.$$ngMessageNode;delete a.$$ngMessageNode,l(f[0],a,b),delete r[b],m.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(a,b,c){function d(a,d){var e=c.$$createComment?c.$$createComment("ngMessagesInclude",d):b[0].createComment(" ngMessagesInclude: "+d+" "),f=g(e);a.after(f),a.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(b,e,g){var h=g.ngMessagesInclude||g.src;a(h).then(function(a){b.$$destroyed||(f(a)&&!a.trim()?d(e,h):c(a)(b,function(a){e.after(a),d(e,h)}))})}}}]).directive("ngMessage",c()).directive("ngMessageExp",c())}(window,window.angular),function(a,b){"use strict";function c(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&g.test("."+a)}function d(a,d){if(!c(d))throw f("badmember",'Dotted member path "@{0}" is invalid.',d);for(var e=d.split("."),g=0,h=e.length;h>g&&b.isDefined(a);g++){var i=e[g];a=null!==a?a[i]:void 0}return a}function e(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var f=b.$$minErr("$resource"),g=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ngResource",["ng"]).info({angularVersion:"1.6.3"}).provider("$resource",function(){var a=/^https?:\/\/\[[^\]]*][^\/]*/,c=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(g,h,i,j){function k(a,b){this.template=a,this.defaults=o({},c.defaults,b),this.urlParams={}}function l(a,b,u,v){function w(a,c){var e={};return c=o({},b,c),n(c,function(b,c){s(b)&&(b=b(a)),e[c]=b&&b.charAt&&"@"===b.charAt(0)?d(a,b.substr(1)):b}),e}function x(a){return a.resource}function y(a){e(a||{},this)}var z=new k(a,v);return u=o({},c.defaults.actions,u),y.prototype.toJSON=function(){var a=o({},this);return delete a.$promise,delete a.$resolved,delete a.$cancelRequest,a},n(u,function(a,b){var c=/^(POST|PUT|PATCH)$/i.test(a.method),d=a.timeout,k=r(a.cancellable)?a.cancellable:z.defaults.cancellable;d&&!t(d)&&(h.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete a.timeout,d=null),y[b]=function(h,l,r,t){function u(a){M["catch"](m),D.resolve(a)}var v,A,B,C={};switch(arguments.length){case 4:B=t,A=r;case 3:case 2:if(!s(l)){C=h,v=l,A=r;break}if(s(h)){A=h,B=l;break}A=l,B=r;case 1:s(h)?A=h:c?v=h:C=h;break;case 0:break;default:throw f("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var D,E,F=this instanceof y,G=F?v:a.isArray?[]:new y(v),H={},I=a.interceptor&&a.interceptor.response||x,J=a.interceptor&&a.interceptor.responseError||void 0,K=!!B,L=!!J;n(a,function(a,b){switch(b){default:H[b]=p(a);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!F&&k&&(D=i.defer(),H.timeout=D.promise,d&&(E=j(D.resolve,d))),c&&(H.data=v),z.setUrlParams(H,o({},w(v,a.params||{}),C),a.url);var M=g(H).then(function(c){var d=c.data;if(d){if(q(d)!==!!a.isArray)throw f("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",b,a.isArray?"array":"object",q(d)?"array":"object",H.method,H.url);if(a.isArray)G.length=0,n(d,function(a){"object"==typeof a?G.push(new y(a)):G.push(a)});else{var g=G.$promise;e(d,G),G.$promise=g}}return c.resource=G,c});return M=M["finally"](function(){G.$resolved=!0,!F&&k&&(G.$cancelRequest=m,j.cancel(E),D=E=H.timeout=null)}),M=M.then(function(a){var b=I(a);return(A||m)(b,a.headers,a.status,a.statusText),b},K||L?function(a){return K&&!L&&M["catch"](m),K&&B(a),L?J(a):i.reject(a)}:void 0),F?M:(G.$promise=M,G.$resolved=!1,k&&(G.$cancelRequest=u),G)},y.prototype["$"+b]=function(a,c,d){s(a)&&(d=c,c=a,a={});var e=y[b].call(this,a,this,c,d);return e.$promise||e}}),y.bind=function(c){var d=o({},b,c);return l(a,d,u,v)},y}var m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isArray,r=b.isDefined,s=b.isFunction,t=b.isNumber,u=b.$$encodeUriQuery,v=b.$$encodeUriSegment;return k.prototype={setUrlParams:function(b,c,d){var e,g,h=this,i=d||h.template,j="",k=h.urlParams=Object.create(null);n(i.split(/\W/),function(a){if("hasOwnProperty"===a)throw f("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(i)&&(k[a]={isQueryParamValue:new RegExp("\\?.*=:"+a+"(?:\\W|$)").test(i)})}),i=i.replace(/\\:/g,":"),i=i.replace(a,function(a){return j=a,""}),c=c||{},n(h.urlParams,function(a,b){e=c.hasOwnProperty(b)?c[b]:h.defaults[b],r(e)&&null!==e?(g=a.isQueryParamValue?u(e,!0):v(e),i=i.replace(new RegExp(":"+b+"(\\W|$)","g"),function(a,b){return g+b})):i=i.replace(new RegExp("(/?):"+b+"(\\W|$)","g"),function(a,b,c){return"/"===c.charAt(0)?c:b+c})}),h.defaults.stripTrailingSlashes&&(i=i.replace(/\/+$/,"")||"/"),i=i.replace(/\/\.(?=\w+($|\?))/,"."),b.url=j+i.replace(/\/(\\|%5C)\./,"/."),n(c,function(a,c){h.urlParams[c]||(b.params=b.params||{},b.params[c]=a)})}},l}]})}(window,window.angular),function(a,b){"use strict";function c(a,b){if(i(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(j(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function d(){function a(a,c){return b.extend(Object.create(a),c)}function d(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(a,b,c,d){var f="?"===d||"*?"===d?"?":null,g="*"===d||"*?"===d?"*":null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}i=b.isArray,j=b.isObject,k=b.isDefined,l=b.noop;var e={};this.when=function(a,f){var g=c(f);if(b.isUndefined(g.reloadOnSearch)&&(g.reloadOnSearch=!0),b.isUndefined(g.caseInsensitiveMatch)&&(g.caseInsensitiveMatch=this.caseInsensitiveMatch),e[a]=b.extend(g,a&&d(a,g)),a){var h="/"===a[a.length-1]?a.substr(0,a.length-1):a+"/";e[h]=b.extend({redirectTo:a},d(h,g))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},m=!0,this.eagerInstantiationEnabled=function(a){return k(a)?(m=a,this):m},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(c,d,f,g,h,i,j,k){function m(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function n(a){var d=z.current;w=u(),x=w&&d&&w.$$route===d.$$route&&b.equals(w.pathParams,d.pathParams)&&!w.reloadOnSearch&&!y,x||!d&&!w||c.$broadcast("$routeChangeStart",w,d).defaultPrevented&&a&&a.preventDefault()}function p(){var a=z.current,d=w;if(x)a.params=d.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a);else if(d||a){y=!1,z.current=d;var e=g.resolve(d);k.$$incOutstandingRequestCount(),e.then(q).then(r).then(function(g){return g&&e.then(s).then(function(e){d===z.current&&(d&&(d.locals=e,b.copy(d.params,f)),c.$broadcast("$routeChangeSuccess",d,a))})})["catch"](function(b){d===z.current&&c.$broadcast("$routeChangeError",d,a,b)})["finally"](function(){k.$$completeOutstandingRequest(l)})}}function q(a){var c={route:a,hasRedirection:!1};if(a)if(a.redirectTo)if(b.isString(a.redirectTo))c.path=v(a.redirectTo,a.params),c.search=a.params,c.hasRedirection=!0;else{var e=d.path(),f=d.search(),i=a.redirectTo(a.pathParams,e,f);b.isDefined(i)&&(c.url=i,c.hasRedirection=!0)}else if(a.resolveRedirectTo)return g.resolve(h.invoke(a.resolveRedirectTo)).then(function(a){return b.isDefined(a)&&(c.url=a,c.hasRedirection=!0),c});return c}function r(a){var b=!0;if(a.route!==z.current)b=!1;else if(a.hasRedirection){var c=d.url(),e=a.url;e?d.url(e).replace():e=d.path(a.path).search(a.search).replace().url(),e!==c&&(b=!1)}return b}function s(a){if(a){var c=b.extend({},a.resolve);b.forEach(c,function(a,d){c[d]=b.isString(a)?h.get(a):h.invoke(a,null,null,d)});var d=t(a);return b.isDefined(d)&&(c.$template=d),g.all(c)}}function t(a){var c,d;return b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),b.isDefined(d)&&(a.loadedTemplateUrl=j.valueOf(d),c=i(d))),c}function u(){var c,f;return b.forEach(e,function(e,g){!f&&(c=m(d.path(),e))&&(f=a(e,{params:b.extend({},d.search(),c),pathParams:c}),f.$$route=e)}),f||e[null]&&a(e[null],{params:{},pathParams:{}})}function v(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var w,x,y=!1,z={routes:e,reload:function(){y=!0;var a={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,y=!1}};c.$evalAsync(function(){n(a),a.defaultPrevented||p()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw o("norout","Tried updating route when with no current route");a=b.extend({},this.current.params,a),d.path(v(this.current.$$route.originalPath,a)),d.search(a)}};return c.$on("$locationChangeStart",n),c.$on("$locationChangeSuccess",p),z}]}function e(a){m&&a.get("$route")}function f(){this.$get=function(){return{}}}function g(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.done(function(a){a!==!1&&(n=null)}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).done(function(a){a===!1||!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function h(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}d[f.resolveAs||"$resolve"]=g,h(d)}}}var i,j,k,l,m,n=b.module("ngRoute",[]).info({angularVersion:"1.6.3"}).provider("$route",d).run(e),o=b.$$minErr("ngRoute");e.$inject=["$injector"],n.provider("$routeParams",f),n.directive("ngView",g),n.directive("ngView",h),g.$inject=["$route","$anchorScroll","$animate"],h.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b){"use strict";function c(){function c(a,b){var c,d={},e=a.split(",");for(c=0;c<e.length;c++)d[b?i(e[c]):e[c]]=!0;return d}function d(b,c){null===b||void 0===b?b="":"string"!=typeof b&&(b=""+b),u.innerHTML=b;var d=5;do{if(0===d)throw n("uinput","Failed to sanitize html because the input is unstable");d--,a.document.documentMode&&r(u),b=u.innerHTML,u.innerHTML=b}while(b!==u.innerHTML);for(var e=u.firstChild;e;){switch(e.nodeType){case 1:c.start(e.nodeName.toLowerCase(),o(e.attributes));break;case 3:c.chars(e.textContent)}var f;if(!(f=e.firstChild)&&(1===e.nodeType&&c.end(e.nodeName.toLowerCase()),f=s("nextSibling",e),!f))for(;null==f&&(e=s("parentNode",e),e!==u);)f=s("nextSibling",e),1===e.nodeType&&c.end(e.nodeName.toLowerCase());e=f}for(;e=u.firstChild;)u.removeChild(e)}function o(a){for(var b={},c=0,d=a.length;d>c;c++){var e=a[c];b[e.name]=e.value}return b}function p(a){return a.replace(/&/g,"&amp;").replace(v,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(w,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function q(a,b){var c=!1,d=e(a,a.push);return{start:function(a,e){a=i(a),!c&&E[a]&&(c=a),c||F[a]!==!0||(d("<"),d(a),g(e,function(c,e){var f=i(e),g="img"===a&&"src"===f||"background"===f;J[f]!==!0||G[f]===!0&&!b(c,g)||(d(" "),d(e),d('="'),d(p(c)),d('"'))}),d(">"))},end:function(a){a=i(a),c||F[a]!==!0||x[a]===!0||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(p(a))}}}function r(b){for(;b;){if(b.nodeType===a.Node.ELEMENT_NODE)for(var c=b.attributes,d=0,e=c.length;e>d;d++){var f=c[d],g=f.name.toLowerCase();("xmlns:ns1"===g||0===g.lastIndexOf("ns1:",0))&&(b.removeAttributeNode(f),d--,e--)}var h=b.firstChild;h&&r(h),b=s("nextSibling",b)}}function s(a,b){var c=b[a];if(c&&k.call(b,c))throw n("elclob","Failed to sanitize html because the element is clobbered: {0}",b.outerHTML||b.outerText);return c}var t=!1;this.$get=["$$sanitizeUri",function(a){return t&&f(F,D),function(b){var c=[];return l(b,m(c,function(b,c){return!/^unsafe:/.test(a(b,c))})),c.join("")}}],this.enableSvg=function(a){return h(a)?(t=a,this):t},e=b.bind,f=b.extend,g=b.forEach,h=b.isDefined,i=b.lowercase,j=b.noop,l=d,m=q,k=a.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))};var u,v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^#-~ |!])/g,x=c("area,br,col,hr,img,wbr"),y=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),z=c("rp,rt"),A=f({},z,y),B=f({},y,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),C=f({},z,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),D=c("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),E=c("script,style"),F=f({},x,B,C,A),G=c("background,cite,href,longdesc,src,xlink:href"),H=c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),I=c("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),J=f({},G,I,H);!function(a){var b;if(!a.document||!a.document.implementation)throw n("noinert","Can't create an inert html document");b=a.document.implementation.createHTMLDocument("inert");var c=b.documentElement||b.getDocumentElement(),d=c.getElementsByTagName("body");if(1===d.length)u=d[0];else{var e=b.createElement("html");u=b.createElement("body"),e.appendChild(u),b.appendChild(e)}}(a)}function d(a){var b=[],c=m(b,j);return c.chars(a),b.join("")}var e,f,g,h,i,j,k,l,m,n=b.$$minErr("$sanitize");b.module("ngSanitize",[]).provider("$sanitize",c).info({angularVersion:"1.6.3"}),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i,f=b.$$minErr("linky"),g=b.isDefined,h=b.isFunction,i=b.isObject,j=b.isString;return function(b,k,l){function m(a){a&&t.push(d(a))}function n(a,b){var c,d=r(a);t.push("<a ");for(c in d)t.push(c+'="'+d[c]+'" ');!g(k)||"target"in d||t.push('target="',k,'" '),t.push('href="',a.replace(/"/g,"&quot;"),'">'),m(b),t.push("</a>")}if(null==b||""===b)return b;if(!j(b))throw f("notstring","Expected string but received: {0}",b);for(var o,p,q,r=h(l)?l:i(l)?function(){return l}:function(){return{}},s=b,t=[];o=s.match(c);)p=o[0],o[2]||o[4]||(p=(o[3]?"http://":"mailto:")+p),q=o.index,m(s.substr(0,q)),n(p,o[0].replace(e,"")),s=s.substring(q+o[0].length);return m(s),a(t.join(""))}}])}(window,window.angular),function(a,b){"use strict";function c(a){return b.lowercase(a.nodeName||a[0]&&a[0].nodeName)}function d(a,c){var d=!1,e=!1;this.ngClickOverrideEnabled=function(f){return b.isDefined(f)?(f&&!e&&(e=!0,g.$$moduleName="ngTouch",c.directive("ngClick",g),a.decorator("ngClickDirective",["$delegate",function(a){if(d)a.shift();else for(var b=a.length-1;b>=0;){if("ngTouch"===a[b].$$moduleName){a.splice(b,1);break}b--}return a}])),d=f,this):d},this.$get=function(){return{ngClickOverrideEnabled:function(){return d}}}}function e(a,c,d){f.directive(a,["$parse","$swipe",function(e,f){var g=75,h=.3,i=30;return function(j,k,l){function m(a){if(!n)return!1;var b=Math.abs(a.y-n.y),d=(a.x-n.x)*c;return o&&g>b&&d>0&&d>i&&h>b/d}var n,o,p=e(l[a]),q=["touch"];b.isDefined(l.ngSwipeDisableMouse)||q.push("mouse"),f.bind(k,{start:function(a,b){n=a,o=!0},cancel:function(a){o=!1},end:function(a,b){m(a)&&j.$apply(function(){k.triggerHandler(d),p(j,{$event:b})})}},q)}}])}var f=b.module("ngTouch",[]);f.info({angularVersion:"1.6.3"}),f.provider("$touch",d),d.$inject=["$provide","$compileProvider"],f.factory("$swipe",[function(){function a(a){var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],d=b.changedTouches&&b.changedTouches[0]||c[0];return{x:d.clientX,y:d.clientY}}function c(a,c){var d=[];return b.forEach(a,function(a){var b=e[a][c];b&&d.push(b)}),d.join(" ")}var d=10,e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(b,e,f){var g,h,i,j,k=!1;f=f||["mouse","touch","pointer"],b.on(c(f,"start"),function(b){i=a(b),k=!0,g=0,h=0,j=i,e.start&&e.start(i,b)});var l=c(f,"cancel");l&&b.on(l,function(a){k=!1,e.cancel&&e.cancel(a)}),b.on(c(f,"move"),function(b){if(k&&i){var c=a(b);if(g+=Math.abs(c.x-j.x),h+=Math.abs(c.y-j.y),j=c,!(d>g&&d>h))return h>g?(k=!1,void(e.cancel&&e.cancel(b))):(b.preventDefault(),void(e.move&&e.move(c,b)))}}),b.on(c(f,"end"),function(b){k&&(k=!1,e.end&&e.end(a(b),b))})}}}]);var g=["$parse","$timeout","$rootElement",function(a,d,e){function f(a,b,c,d){return Math.abs(a-c)<q&&Math.abs(b-d)<q}function g(a,b,c){for(var d=0;d<a.length;d+=2)if(f(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function h(a){if(!(Date.now()-k>p)){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;1>d&&1>e||m&&m[0]===d&&m[1]===e||(m&&(m=null),"label"===c(a.target)&&(m=[d,e]),g(l,d,e)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur&&a.target.blur()))}}function i(a){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,e=b[0].clientY;l.push(c,e),d(function(){for(var a=0;a<l.length;a+=2)if(l[a]===c&&l[a+1]===e)return void l.splice(a,a+2)},p,!1)}function j(a,b){l||(e[0].addEventListener("click",h,!0),e[0].addEventListener("touchstart",i,!0),l=[]),k=Date.now(),g(l,a,b)}var k,l,m,n=750,o=12,p=2500,q=25,r="ng-click-active";return function(c,d,e){function f(){m=!1,d.removeClass(r)}var g,h,i,k,l=a(e.ngClick),m=!1;d.on("touchstart",function(a){m=!0,g=a.target?a.target:a.srcElement,3===g.nodeType&&(g=g.parentNode),d.addClass(r),h=Date.now();var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],e=c[0];i=e.clientX,k=e.clientY}),d.on("touchcancel",function(a){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.originalEvent||a,p=l.changedTouches&&l.changedTouches.length?l.changedTouches:l.touches&&l.touches.length?l.touches:[l],q=p[0],r=q.clientX,s=q.clientY,t=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-k,2));m&&n>c&&o>t&&(j(r,s),g&&g.blur(),b.isDefined(e.disabled)&&e.disabled!==!1||d.triggerHandler("click",[a])),f()}),d.onclick=function(a){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(a){d.addClass(r)}),d.on("mousemove mouseup",function(a){d.removeClass(r)})}}];e("ngSwipeLeft",-1,"swipeleft"),e("ngSwipeRight",1,"swiperight")}(window,window.angular),"undefined"==typeof jQuery){var jQuery;jQuery="function"==typeof require?$=require("jquery"):$}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c;
},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:d/4*((b-=2)*b*b+2)+c}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(!function(a){function b(a){var b=a.length,d=c.type(a);return"function"!==d&&!c.isWindow(a)&&(!(1!==a.nodeType||!b)||"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a)}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):!(!p.isArray(a)||4!==a.length)&&i.apply(null,a),c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>l&&Math.abs(h.v)>l;);return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(a){function l(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function r(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(u){setTimeout(function(){throw u},1)}if("scroll"===C){var w,z,A,D=/^x$/i.test(h.axis)?"Left":"Top",E=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,w=h.container["scroll"+D],A=w+m(f).position()[D.toLowerCase()]+E):h.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+D]],z=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===D?"Top":"Left")]],A=m(f).offset()[D.toLowerCase()]+E),i={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:A,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:D,alternateValue:z}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var F=m.extend(!0,{},g(f).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(s)||(F[G].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),f)}i=F}else if("start"===C){var F;g(f).tweensContainer&&g(f).isAnimating===!0&&(F=g(f).tweensContainer),m.each(q,function(a,b){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(a)){var c=l(b,!0),e=c[0],f=c[1],g=c[2];if(v.RegEx.isHex.test(e)){for(var h=["Red","Green","Blue"],i=v.Values.hexToRgb(e),j=g?v.Values.hexToRgb(g):d,k=0;k<h.length;k++){var m=[i[k]];f&&m.push(f),j!==d&&m.push(j[k]),q[a+h[k]]=m}delete q[a]}}});for(var K in q){var L=l(q[K]),M=L[0],N=L[1],O=L[2];K=v.Names.camelCase(K);var P=v.Hooks.getRoot(K),Q=!1;if(g(f).isSVG||"tween"===P||v.Names.prefixCheck(P)[1]!==!1||v.Normalizations.registered[P]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(K)&&!O&&0!==M&&(O=0),h._cacheValues&&F&&F[K]?(O===d&&(O=F[K].endValue+F[K].unitType),Q=g(f).rootPropertyValueCache[P]):v.Hooks.registered[K]?O===d?(Q=v.getPropertyValue(f,P),O=v.getPropertyValue(f,K,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(f,K));var R,S,T,U=!1;if(R=n(K,O),O=R[0],T=R[1],R=n(K,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(K)?(M/=100,S="em"):/^scale/.test(K)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(K)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{e=e||r();var V=/margin|padding|left|right|width|text|word|letter/i.test(K)||/X$/.test(K)||"x"===K?"x":"y";switch(T){case"%":O*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:O*=e[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:O*=1/e[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M=O*M;break;case"/":M=O/M}i[K]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+K+"): "+JSON.stringify(i[K]),f)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){
B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f!==!0&&b[2].queue!==f&&(s!==d||b[2].queue!==!1)||void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):"finish"===q&&(b[2].duration=1))})})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)})),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return!!Array.isArray(a)&&(g(a,c[b],c),!0)}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return oa++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:ra?N:sa?Q:qa?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&ya&&0===d-e,g=b&(Aa|Ba)&&0===d-e;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===ya||f.eventType===Aa)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ba&&(i>xa||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ca:ma(a)>=ma(b)?a>0?Da:Ea:b>0?Fa:Ga}function I(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],La)-J(a[1],a[0],La)}function L(a,b){return I(b[0],b[1],La)/I(a[0],a[1],La)}function M(){this.evEl=Na,this.evWin=Oa,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Ra,this.evWin=Sa,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ua,this.evWin=Va,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Aa|Ba)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xa,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(ya|za)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===ya)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Aa|Ba)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bb))return bb;var b=q(a,cb),c=q(a,db);return b&&c?cb+" "+db:b||c?b?cb:db:q(a,ab)?ab:_a}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=eb,this.simultaneous={},this.requireFail=[]}function W(a){return a&jb?"cancel":a&hb?"end":a&gb?"move":a&fb?"start":""}function X(a){return a==Ga?"down":a==Fa?"up":a==Da?"left":a==Ea?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function aa(){V.apply(this,arguments),this._timer=null,this._input=null}function ba(){Z.apply(this,arguments)}function ca(){Z.apply(this,arguments)}function da(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ea(a,b){return b=b||{},b.recognizers=m(b.recognizers,ea.defaults.preset),new fa(a,b)}function fa(a,b){b=b||{},this.options=i(b,ea.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),ga(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ga(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ha(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ia=["","webkit","moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now,oa=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,qa="ontouchstart"in a,ra=v(a,"PointerEvent")!==d,sa=qa&&pa.test(navigator.userAgent),ta="touch",ua="pen",va="mouse",wa="kinect",xa=25,ya=1,za=2,Aa=4,Ba=8,Ca=1,Da=2,Ea=4,Fa=8,Ga=16,Ha=Da|Ea,Ia=Fa|Ga,Ja=Ha|Ia,Ka=["x","y"],La=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ma={mousedown:ya,mousemove:za,mouseup:Aa},Na="mousedown",Oa="mousemove mouseup";j(M,y,{handler:function(a){var b=Ma[a.type];b&ya&&0===a.button&&(this.pressed=!0),b&za&&1!==a.which&&(b=Aa),this.pressed&&this.allow&&(b&Aa&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:va,srcEvent:a}))}});var Pa={pointerdown:ya,pointermove:za,pointerup:Aa,pointercancel:Ba,pointerout:Ba},Qa={2:ta,3:ua,4:va,5:wa},Ra="pointerdown",Sa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Ra="MSPointerDown",Sa="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pa[d],f=Qa[a.pointerType]||a.pointerType,g=f==ta,h=s(b,a.pointerId,"pointerId");e&ya&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Aa|Ba)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ta={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Ua="touchstart",Va="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Ta[a.type];if(b===ya&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Aa|Ba)&&0===c[0].length-c[1].length&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}});var Wa={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Xa="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wa[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==ta,e=c.pointerType==va;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Aa|Ba)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ya=v(ja.style,"touchAction"),Za=Ya!==d,$a="compute",_a="auto",ab="manipulation",bb="none",cb="pan-x",db="pan-y";T.prototype={set:function(a){a==$a&&(a=this.compute()),Za&&(this.manager.element.style[Ya]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Za){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bb),f=q(d,db),g=q(d,cb);return e||f&&c&Ha||g&&c&Ia?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var eb=1,fb=2,gb=4,hb=8,ib=hb,jb=16,kb=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hb>d&&b(!0),b(),d>=hb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kb|eb)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ib|jb|kb)&&(this.state=eb),this.state=this.process(b),void(this.state&(fb|gb|hb|jb)&&this.tryEmit(b))):(this.reset(),void(this.state=kb))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fb|gb),e=this.attrTest(a);return d&&(c&Ba||!e)?b|jb:d||e?c&Aa?b|hb:b&fb?b|gb:fb:kb}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ja},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ha&&b.push(db),a&Ia&&b.push(cb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ha?(e=0===f?Ca:0>f?Da:Ea,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ca:0>g?Fa:Ga,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fb||!(this.state&fb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(aa,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_a]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Aa|Ba)&&!f)this.reset();else if(a.eventType&ya)this.reset(),this._timer=e(function(){this.state=ib,this.tryEmit()},b.time,this);else if(a.eventType&Aa)return ib;return kb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ib&&(a&&a.eventType&Aa?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),j(ba,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fb)}}),j(ca,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ha|Ia,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ha|Ia)?b=a.velocity:c&Ha?b=a.velocityX:c&Ia&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&ma(b)>this.options.velocity&&a.eventType&Aa},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(da,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ab]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&ya&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Aa)return this.failTimeout();var g=!this.pTime||a.timeStamp-this.pTime<b.interval,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ib,this.tryEmit()},b.interval,this),fb):ib}return kb},failTimeout:function(){return this._timer=e(function(){this.state=kb},this.options.interval,this),kb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ib&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ea.VERSION="2.0.4",ea.defaults={domEvents:!1,touchAction:$a,enable:!0,inputTarget:null,inputClass:null,preset:[[ba,{enable:!1}],[_,{enable:!1},["rotate"]],[ca,{direction:Ha}],[$,{direction:Ha},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[aa]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lb=1,mb=2;fa.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mb:lb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ib)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fb|gb|hb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ha(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ga(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ea,{INPUT_START:ya,INPUT_MOVE:za,INPUT_END:Aa,INPUT_CANCEL:Ba,STATE_POSSIBLE:eb,STATE_BEGAN:fb,STATE_CHANGED:gb,STATE_ENDED:hb,STATE_RECOGNIZED:ib,STATE_CANCELLED:jb,STATE_FAILED:kb,DIRECTION_NONE:Ca,DIRECTION_LEFT:Da,DIRECTION_RIGHT:Ea,DIRECTION_UP:Fa,DIRECTION_DOWN:Ga,DIRECTION_HORIZONTAL:Ha,DIRECTION_VERTICAL:Ia,DIRECTION_ALL:Ja,Manager:fa,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:da,Pan:$,Swipe:ca,Pinch:_,Rotate:ba,Press:aa,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ka&&define.amd?define(function(){return ea}):"undefined"!=typeof module&&module.exports?module.exports=ea:a[c]=ea}(window,document,"Hammer"),function(a){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],a):"object"==typeof exports?a(require("jquery"),require("hammerjs")):a(jQuery,Hammer)}(function(a,b){function c(c,d){var e=a(c);e.data("hammer")||e.data("hammer",new b(e[0],d))}a.fn.hammer=function(a){return this.each(function(){c(this,a)})},b.Manager.prototype.emit=function(b){return function(c,d){b.call(this,c,d),a(this.element).trigger({type:c,gesture:d})}}(b.Manager.prototype.emit)}),function(a){a.Package?Materialize={}:a.Materialize={}}(window),function(a){for(var b=0,c=["webkit","moz"],d=a.requestAnimationFrame,e=a.cancelAnimationFrame,f=c.length;--f>=0&&!d;)d=a[c[f]+"RequestAnimationFrame"],e=a[c[f]+"CancelRequestAnimationFrame"];d&&e||(d=function(a){var c=+Date.now(),d=Math.max(b+16,c);return setTimeout(function(){a(b=d)},d-c)},e=clearTimeout),a.requestAnimationFrame=d,a.cancelAnimationFrame=e}(window),Materialize.objectSelectorString=function(a){var b=a.prop("tagName")||"",c=a.attr("id")||"",d=a.attr("class")||"";return(b+c+d).replace(/\s/g,"")},Materialize.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),Materialize.escapeHash=function(a){return a.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(a){var b=$(a),c=b.add(b.parents()),d=!1;return c.each(function(){return"fixed"===$(this).css("position")?(d=!0,!1):void 0}),d};var getTime=Date.now||function(){return(new Date).getTime()};Materialize.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:getTime(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=getTime();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}};var Vel;Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,function(a){a.fn.collapsible=function(b,c){var d={accordion:void 0,onOpen:void 0,onClose:void 0},e=b;return b=a.extend(d,b),this.each(function(){function d(b){l=k.find("> li > .collapsible-header"),b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}),l.not(b).removeClass("active").parent().removeClass("active"),l.not(b).parent().children(".collapsible-body").stop(!0,!1).each(function(){a(this).is(":visible")&&a(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height",""),h(a(this).siblings(".collapsible-header"))}})})}function f(b){b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}})}function g(a){a.toggleClass("active"),b.accordion||"accordion"===m||void 0===m?d(a):f(a),h(a)}function h(a){a.hasClass("active")?"function"==typeof b.onOpen&&b.onOpen.call(this,a.parent()):"function"==typeof b.onClose&&b.onClose.call(this,a.parent())}function i(a){var b=j(a);return b.length>0}function j(a){return a.closest("li > .collapsible-header")}var k=a(this),l=a(this).find("> li > .collapsible-header"),m=k.data("collapsible");if(c>=0&&c<l.length){var n=l.eq(c);return void(n.length&&("open"===e||"close"===e&&n.hasClass("active"))&&g(n))}k.off("click.collapse","> li > .collapsible-header"),l.off("click.collapse"),k.on("click.collapse","> li > .collapsible-header",function(b){var c=a(b.target);i(c)&&(c=j(c)),g(c)}),b.accordion||"accordion"===m||void 0===m?g(l.filter(".active").first()):l.filter(".active").each(function(){g(a(this))})})},a(document).ready(function(){a(".collapsible").collapsible()})}(jQuery),function(a){a.fn.scrollTo=function(b){return a(this).scrollTop(a(this).scrollTop()-a(this).offset().top+a(b).offset().top),this},a.fn.dropdown=function(b){var c={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===b?(this.each(function(){a(this).trigger("open")}),!1):"close"===b?(this.each(function(){a(this).trigger("close")}),!1):void this.each(function(){function d(){void 0!==g.data("induration")&&(h.inDuration=g.data("induration")),void 0!==g.data("outduration")&&(h.outDuration=g.data("outduration")),void 0!==g.data("constrainwidth")&&(h.constrainWidth=g.data("constrainwidth")),void 0!==g.data("hover")&&(h.hover=g.data("hover")),void 0!==g.data("gutter")&&(h.gutter=g.data("gutter")),void 0!==g.data("beloworigin")&&(h.belowOrigin=g.data("beloworigin")),void 0!==g.data("alignment")&&(h.alignment=g.data("alignment")),void 0!==g.data("stoppropagation")&&(h.stopPropagation=g.data("stoppropagation"))}function e(b){"focus"===b&&(i=!0),d(),j.addClass("active"),g.addClass("active"),h.constrainWidth===!0?j.css("width",g.outerWidth()):j.css("white-space","nowrap");var c=window.innerHeight,e=g.innerHeight(),k=g.offset().left,l=g.offset().top-a(window).scrollTop(),m=h.alignment,n=0,o=0,p=0;h.belowOrigin===!0&&(p=e);var q=0,r=0,s=g.parent();if(s.is("body")||(s[0].scrollHeight>s[0].clientHeight&&(q=s[0].scrollTop),s[0].scrollWidth>s[0].clientWidth&&(r=s[0].scrollLeft)),k+j.innerWidth()>a(window).width()?m="right":k-j.innerWidth()+g.innerWidth()<0&&(m="left"),l+j.innerHeight()>c)if(l+e-j.innerHeight()<0){var t=c-l-p;j.css("max-height",t)}else p||(p+=e),p-=j.innerHeight();if("left"===m)n=h.gutter,o=g.position().left+n;else if("right"===m){var u=g.position().left+g.outerWidth()-j.outerWidth();n=-h.gutter,o=u+n}j.css({position:"absolute",top:g.position().top+p+q,left:o+r}),j.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:h.inDuration,easing:"easeOutCubic",complete:function(){a(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:h.inDuration,easing:"easeOutSine"}),a(document).bind("click."+j.attr("id")+" touchstart."+j.attr("id"),function(b){j.is(b.target)||g.is(b.target)||j.find(b.target).length||(f(),a(document).unbind("click."+j.attr("id")+" touchstart."+j.attr("id")))})}function f(){i=!1,j.fadeOut(h.outDuration),j.removeClass("active"),g.removeClass("active"),a(document).unbind("click."+j.attr("id")+" touchstart."+j.attr("id")),setTimeout(function(){j.css("max-height","")},h.outDuration)}var g=a(this),h=a.extend({},c,b),i=!1,j=a("#"+g.attr("data-activates"));if(d(),g.after(j),h.hover){var k=!1;g.unbind("click."+g.attr("id")),g.on("mouseenter",function(a){k===!1&&(e(),k=!0)}),g.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-content").is(j)||(j.stop(!0,!0),f(),k=!1)}),j.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-button").is(g)||(j.stop(!0,!0),f(),k=!1)})}else g.unbind("click."+g.attr("id")),g.bind("click."+g.attr("id"),function(b){i||(g[0]!=b.currentTarget||g.hasClass("active")||0!==a(b.target).closest(".dropdown-content").length?g.hasClass("active")&&(f(),a(document).unbind("click."+j.attr("id")+" touchstart."+j.attr("id"))):(b.preventDefault(),h.stopPropagation&&b.stopPropagation(),e("click")))});g.on("open",function(a,b){e(b)}),g.on("close",f)})},a(document).ready(function(){a(".dropdown-button").dropdown()})}(jQuery),function(a){var b=0,c=0,d=function(){return c++,"materialize-modal-overlay-"+c},e={init:function(c){var e={opacity:.5,inDuration:350,outDuration:250,ready:void 0,complete:void 0,dismissible:!0,startingTop:"4%",endingTop:"10%"};return c=a.extend(e,c),this.each(function(){var e=a(this),f=a(this).attr("id")||"#"+a(this).data("target"),g=function(){var d=e.data("overlay-id"),f=a("#"+d);e.removeClass("open"),a("body").css({overflow:"",width:""}),e.find(".modal-close").off("click.close"),a(document).off("keyup.modal"+d),f.velocity({opacity:0},{duration:c.outDuration,queue:!1,ease:"easeOutQuart"});var g={duration:c.outDuration,queue:!1,ease:"easeOutCubic",complete:function(){a(this).css({display:"none"}),"function"==typeof c.complete&&c.complete.call(this,e),f.remove(),b--}};e.hasClass("bottom-sheet")?e.velocity({bottom:"-100%",opacity:0},g):e.velocity({top:c.startingTop,opacity:0,scaleX:.7},g)},h=function(f){var h=a("body"),i=h.innerWidth();if(h.css("overflow","hidden"),h.width(i),!e.hasClass("open")){var j=d(),k=a('<div class="modal-overlay"></div>');lStack=++b,k.attr("id",j).css("z-index",1e3+2*lStack),e.data("overlay-id",j).css("z-index",1e3+2*lStack+1),e.addClass("open"),a("body").append(k),c.dismissible&&(k.click(function(){g()}),a(document).on("keyup.modal"+j,function(a){27===a.keyCode&&g()})),e.find(".modal-close").on("click.close",function(a){g()}),k.css({display:"block",opacity:0}),e.css({display:"block",opacity:0}),k.velocity({opacity:c.opacity},{duration:c.inDuration,queue:!1,ease:"easeOutCubic"}),e.data("associated-overlay",k[0]);var l={duration:c.inDuration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof c.ready&&c.ready.call(this,e,f)}};e.hasClass("bottom-sheet")?e.velocity({bottom:"0",opacity:1},l):(a.Velocity.hook(e,"scaleX",.7),e.css({top:c.startingTop}),e.velocity({top:c.endingTop,opacity:1,scaleX:"1"},l))}};a(document).off("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]'),a(this).off("openModal"),a(this).off("closeModal"),a(document).on("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]',function(b){c.startingTop=(a(this).offset().top-a(window).scrollTop())/1.15,h(a(this)),b.preventDefault()}),a(this).on("openModal",function(){a(this).attr("href")||"#"+a(this).data("target"),h()}),a(this).on("closeModal",function(){g()})})},open:function(){a(this).trigger("openModal")},close:function(){a(this).trigger("closeModal")}};a.fn.modal=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.modal"):e.init.apply(this,arguments)}}(jQuery),function(a){a.fn.materialbox=function(){return this.each(function(){function b(){f=!1;var b=i.parent(".material-placeholder"),d=(window.innerWidth,window.innerHeight,i.data("width")),g=i.data("height");i.velocity("stop",!0),
a("#materialbox-overlay").velocity("stop",!0),a(".materialbox-caption").velocity("stop",!0),a("#materialbox-overlay").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){e=!1,a(this).remove()}}),i.velocity({width:d,height:g,left:0,top:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){b.css({height:"",width:"",position:"",top:"",left:""}),i.removeAttr("style"),i.attr("style",k),i.removeClass("active"),f=!0,c&&c.css("overflow","")}}),a(".materialbox-caption").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}})}if(!a(this).hasClass("initialized")){a(this).addClass("initialized");var c,d,e=!1,f=!0,g=275,h=200,i=a(this),j=a("<div></div>").addClass("material-placeholder"),k=i.attr("style");i.wrap(j),i.on("click",function(){var h=i.parent(".material-placeholder"),j=window.innerWidth,k=window.innerHeight,l=i.width(),m=i.height();if(f===!1)return b(),!1;if(e&&f===!0)return b(),!1;for(f=!1,i.addClass("active"),e=!0,h.css({width:h[0].getBoundingClientRect().width,height:h[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),c=void 0,d=h[0].parentNode;null!==d&&!a(d).is(document);){var n=a(d);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),c=void 0===c?n:c.add(n)),d=d.parentNode}i.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",l).data("height",m);var o=a('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){f===!0&&b()});i.before(o);var p=o[0].getBoundingClientRect();if(o.css({width:j,height:k,left:-1*p.left,top:-1*p.top}),o.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"}),""!==i.data("caption")){var q=a('<div class="materialbox-caption"></div>');q.text(i.data("caption")),a("body").append(q),q.css({display:"inline"}),q.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"})}var r=0,s=l/j,t=m/k,u=0,v=0;s>t?(r=m/l,u=.9*j,v=.9*j*r):(r=l/m,u=.9*k*r,v=.9*k),i.hasClass("responsive-img")?i.velocity({"max-width":u,width:l},{duration:0,queue:!1,complete:function(){i.css({left:0,top:0}).velocity({height:v,width:u,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-u/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-v/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}}):i.css("left",0).css("top",0).velocity({height:v,width:u,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-u/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-v/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}),a(window).scroll(function(){e&&b()}),a(document).keyup(function(a){27===a.keyCode&&f===!0&&e&&b()})}})},a(document).ready(function(){a(".materialboxed").materialbox()})}(jQuery),function(a){a.fn.parallax=function(){var b=a(window).width();return this.each(function(c){function d(c){var d;d=601>b?e.height()>0?e.height():e.children("img").height():e.height()>0?e.height():500;var f=e.children("img").first(),g=f.height(),h=g-d,i=e.offset().top+d,j=e.offset().top,k=a(window).scrollTop(),l=window.innerHeight,m=k+l,n=(m-j)/(d+l),o=Math.round(h*n);c&&f.css("display","block"),i>k&&k+l>j&&f.css("transform","translate3D(-50%,"+o+"px, 0)")}var e=a(this);e.addClass("parallax"),e.children("img").one("load",function(){d(!0)}).each(function(){this.complete&&a(this).trigger("load")}),a(window).scroll(function(){b=a(window).width(),d(!1)}),a(window).resize(function(){b=a(window).width(),d(!1)})})}}(jQuery),function(a){var b={init:function(b){var c={onShow:null,swipeable:!1,responsiveThreshold:1/0};return b=a.extend(c,b),this.each(function(){var c,d,e,f,g,h=a(this),i=a(window).width(),j=h.find("li.tab a"),k=h.width(),l=a(),m=Math.max(k,h[0].scrollWidth)/j.length,n=prev_index=0,o=!1,p=300,q=function(a){return k-a.position().left-a.outerWidth()-h.scrollLeft()},r=function(a){return a.position().left+h.scrollLeft()},s=function(a){n-a>=0?(f.velocity({right:q(c)},{duration:p,queue:!1,easing:"easeOutQuad"}),f.velocity({left:r(c)},{duration:p,queue:!1,easing:"easeOutQuad",delay:90})):(f.velocity({left:r(c)},{duration:p,queue:!1,easing:"easeOutQuad"}),f.velocity({right:q(c)},{duration:p,queue:!1,easing:"easeOutQuad",delay:90}))};b.swipeable&&i>b.responsiveThreshold&&(b.swipeable=!1),c=a(j.filter('[href="'+location.hash+'"]')),0===c.length&&(c=a(this).find("li.tab a.active").first()),0===c.length&&(c=a(this).find("li.tab a").first()),c.addClass("active"),n=j.index(c),0>n&&(n=0),void 0!==c[0]&&(d=a(c[0].hash),d.addClass("active")),h.find(".indicator").length||h.append('<div class="indicator"></div>'),f=h.find(".indicator"),h.append(f),h.is(":visible")&&setTimeout(function(){f.css({right:q(c)}),f.css({left:r(c)})},0),a(window).off("resize.tabs").on("resize.tabs",function(){k=h.width(),m=Math.max(k,h[0].scrollWidth)/j.length,0>n&&(n=0),0!==m&&0!==k&&(f.css({right:q(c)}),f.css({left:r(c)}))}),b.swipeable?(j.each(function(){var b=a(Materialize.escapeHash(this.hash));b.addClass("carousel-item"),l=l.add(b)}),e=l.wrapAll('<div class="tabs-content carousel"></div>'),l.css("display",""),a(".tabs-content.carousel").carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(a){if(!o){var b=n;n=e.index(a),c=j.eq(n),s(b)}}})):j.not(c).each(function(){a(Materialize.escapeHash(this.hash)).hide()}),h.off("click.tabs").on("click.tabs","a",function(e){if(a(this).parent().hasClass("disabled"))return void e.preventDefault();if(!a(this).attr("target")){o=!0,k=h.width(),m=Math.max(k,h[0].scrollWidth)/j.length,c.removeClass("active");var f=d;c=a(this),d=a(Materialize.escapeHash(this.hash)),j=h.find("li.tab a"),c.position(),c.addClass("active"),prev_index=n,n=j.index(a(this)),0>n&&(n=0),b.swipeable?l.length&&l.carousel("set",n):(void 0!==d&&(d.show(),d.addClass("active"),"function"==typeof b.onShow&&b.onShow.call(this,d)),void 0===f||f.is(d)||(f.hide(),f.removeClass("active"))),g=setTimeout(function(){o=!1},p),s(prev_index),e.preventDefault()}})})},select_tab:function(a){this.find('a[href="#'+a+'"]').trigger("click")}};a.fn.tabs=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tabs"):b.init.apply(this,arguments)},a(document).ready(function(){a("ul.tabs").tabs()})}(jQuery),function(a){a.fn.tooltip=function(c){var d=5,e={delay:350,tooltip:"",position:"bottom",html:!1};return"remove"===c?(this.each(function(){a("#"+a(this).attr("data-tooltip-id")).remove(),a(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(c=a.extend(e,c),this.each(function(){var e=Materialize.guid(),f=a(this);f.attr("data-tooltip-id")&&a("#"+f.attr("data-tooltip-id")).remove(),f.attr("data-tooltip-id",e);var g,h,i,j,k,l,m=function(){g=f.attr("data-html")?"true"===f.attr("data-html"):c.html,h=f.attr("data-delay"),h=void 0===h||""===h?c.delay:h,i=f.attr("data-position"),i=void 0===i||""===i?c.position:i,j=f.attr("data-tooltip"),j=void 0===j||""===j?c.tooltip:j};m();var n=function(){var b=a('<div class="material-tooltip"></div>');return j=g?a("<span></span>").html(j):a("<span></span>").text(j),b.append(j).appendTo(a("body")).attr("id",e),l=a('<div class="backdrop"></div>'),l.appendTo(b),b};k=n(),f.off("mouseenter.tooltip mouseleave.tooltip");var o,p=!1;f.on({"mouseenter.tooltip":function(a){var c=function(){m(),p=!0,k.velocity("stop"),l.velocity("stop"),k.css({visibility:"visible",left:"0px",top:"0px"});var a,c,e,g=f.outerWidth(),h=f.outerHeight(),j=k.outerHeight(),n=k.outerWidth(),o="0px",q="0px",r=l[0].offsetWidth,s=l[0].offsetHeight,t=8,u=8,v=0;"top"===i?(a=f.offset().top-j-d,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="-10px",l.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:j,marginLeft:n/2-r/2})):"left"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left-n-d,e=b(c,a,n,j),q="-10px",l.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:j/2,marginLeft:n})):"right"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left+g+d,e=b(c,a,n,j),q="+10px",l.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:j/2,marginLeft:"0px"})):(a=f.offset().top+f.outerHeight()+d,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="+10px",l.css({top:0,left:0,marginLeft:n/2-r/2})),k.css({top:e.y,left:e.x}),t=Math.SQRT2*n/parseInt(r),u=Math.SQRT2*j/parseInt(s),v=Math.max(t,u),k.velocity({translateY:o,translateX:q},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),l.css({visibility:"visible"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:v,scaleY:v},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})};o=setTimeout(c,h)},"mouseleave.tooltip":function(){p=!1,clearTimeout(o),setTimeout(function(){p!==!0&&(k.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),l.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){l.css({visibility:"hidden"}),k.css({visibility:"hidden"}),p=!1}}))},225)}})}))};var b=function(b,c,d,e){var f=b,g=c;return 0>f?f=4:f+d>window.innerWidth&&(f-=f+d-window.innerWidth),0>g?g=4:g+e>window.innerHeight+a(window).scrollTop&&(g-=g+e-window.innerHeight),{x:f,y:g}};a(document).ready(function(){a(".tooltipped").tooltip()})}(jQuery),function(a){"use strict";function b(a){return null!==a&&a===a.window}function c(a){return b(a)?a:9===a.nodeType&&a.defaultView}function d(a){var b,d,e={top:0,left:0},f=a&&a.ownerDocument;return b=f.documentElement,"undefined"!=typeof a.getBoundingClientRect&&(e=a.getBoundingClientRect()),d=c(f),{top:e.top+d.pageYOffset-b.clientTop,left:e.left+d.pageXOffset-b.clientLeft}}function e(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}function f(a){if(k.allowEvent(a)===!1)return null;for(var b=null,c=a.target||a.srcElement;null!==c.parentElement;){if(!(c instanceof SVGElement||-1===c.className.indexOf("waves-effect"))){b=c;break}if(c.classList.contains("waves-effect")){b=c;break}c=c.parentElement}return b}function g(b){var c=f(b);null!==c&&(j.show(b,c),"ontouchstart"in a&&(c.addEventListener("touchend",j.hide,!1),c.addEventListener("touchcancel",j.hide,!1)),c.addEventListener("mouseup",j.hide,!1),c.addEventListener("mouseleave",j.hide,!1))}var h=h||{},i=document.querySelectorAll.bind(document),j={duration:750,show:function(a,b){if(2===a.button)return!1;var c=b||this,f=document.createElement("div");f.className="waves-ripple",c.appendChild(f);var g=d(c),h=a.pageY-g.top,i=a.pageX-g.left,k="scale("+c.clientWidth/100*10+")";"touches"in a&&(h=a.touches[0].pageY-g.top,i=a.touches[0].pageX-g.left),f.setAttribute("data-hold",Date.now()),f.setAttribute("data-scale",k),f.setAttribute("data-x",i),f.setAttribute("data-y",h);var l={top:h+"px",left:i+"px"};f.className=f.className+" waves-notransition",f.setAttribute("style",e(l)),f.className=f.className.replace("waves-notransition",""),l["-webkit-transform"]=k,l["-moz-transform"]=k,l["-ms-transform"]=k,l["-o-transform"]=k,l.transform=k,l.opacity="1",l["-webkit-transition-duration"]=j.duration+"ms",l["-moz-transition-duration"]=j.duration+"ms",l["-o-transition-duration"]=j.duration+"ms",l["transition-duration"]=j.duration+"ms",l["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",f.setAttribute("style",e(l))},hide:function(a){k.touchup(a);var b=this,c=(1.4*b.clientWidth,null),d=b.getElementsByClassName("waves-ripple");if(!(d.length>0))return!1;c=d[d.length-1];var f=c.getAttribute("data-x"),g=c.getAttribute("data-y"),h=c.getAttribute("data-scale"),i=Date.now()-Number(c.getAttribute("data-hold")),l=350-i;0>l&&(l=0),setTimeout(function(){var a={top:g+"px",left:f+"px",opacity:"0","-webkit-transition-duration":j.duration+"ms","-moz-transition-duration":j.duration+"ms","-o-transition-duration":j.duration+"ms","transition-duration":j.duration+"ms","-webkit-transform":h,"-moz-transform":h,"-ms-transform":h,"-o-transform":h,transform:h};c.setAttribute("style",e(a)),setTimeout(function(){try{b.removeChild(c)}catch(a){return!1}},j.duration)},l)},wrapInput:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("input"===c.tagName.toLowerCase()){var d=c.parentNode;if("i"===d.tagName.toLowerCase()&&-1!==d.className.indexOf("waves-effect"))continue;var e=document.createElement("i");e.className=c.className+" waves-input-wrapper";var f=c.getAttribute("style");f||(f=""),e.setAttribute("style",f),c.className="waves-button-input",c.removeAttribute("style"),d.replaceChild(e,c),e.appendChild(c)}}}},k={touches:0,allowEvent:function(a){var b=!0;return"touchstart"===a.type?k.touches+=1:"touchend"===a.type||"touchcancel"===a.type?setTimeout(function(){k.touches>0&&(k.touches-=1)},500):"mousedown"===a.type&&k.touches>0&&(b=!1),b},touchup:function(a){k.allowEvent(a)}};h.displayEffect=function(b){b=b||{},"duration"in b&&(j.duration=b.duration),j.wrapInput(i(".waves-effect")),"ontouchstart"in a&&document.body.addEventListener("touchstart",g,!1),document.body.addEventListener("mousedown",g,!1)},h.attach=function(b){"input"===b.tagName.toLowerCase()&&(j.wrapInput([b]),b=b.parentElement),"ontouchstart"in a&&b.addEventListener("touchstart",g,!1),b.addEventListener("mousedown",g,!1)},a.Waves=h,document.addEventListener("DOMContentLoaded",function(){h.displayEffect()},!1)}(window),Materialize.toast=function(a,b,c,d){function e(a){var b=document.createElement("div");if(b.classList.add("toast"),c)for(var e=c.split(" "),f=0,g=e.length;g>f;f++)b.classList.add(e[f]);("object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName)?b.appendChild(a):a instanceof jQuery?b.appendChild(a[0]):b.innerHTML=a;var h=new Hammer(b,{prevent_default:!1});return h.on("pan",function(a){var c=a.deltaX,d=80;b.classList.contains("panning")||b.classList.add("panning");var e=1-Math.abs(c/d);0>e&&(e=0),Vel(b,{left:c,opacity:e},{duration:50,queue:!1,easing:"easeOutQuad"})}),h.on("panend",function(a){var c=a.deltaX,e=80;Math.abs(c)>e?Vel(b,{marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),b.parentNode.removeChild(b)}}):(b.classList.remove("panning"),Vel(b,{left:0,opacity:1},{duration:300,easing:"easeOutExpo",queue:!1}))}),b}c=c||"";var f=document.getElementById("toast-container");null===f&&(f=document.createElement("div"),f.id="toast-container",document.body.appendChild(f));var g=e(a);a&&f.appendChild(g),g.style.opacity=0,Vel(g,{translateY:"-35px",opacity:1},{duration:300,easing:"easeOutCubic",queue:!1});var h,i=b;null!=i&&(h=setInterval(function(){null===g.parentNode&&window.clearInterval(h),g.classList.contains("panning")||(i-=20),0>=i&&(Vel(g,{opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),this[0].parentNode.removeChild(this[0])}}),window.clearInterval(h))},20))},function(a){var b={init:function(b){var c={menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0};b=a.extend(c,b),a(this).each(function(){var c=a(this),d=c.attr("data-activates"),e=a("#"+d);300!=b.menuWidth&&e.css("width",b.menuWidth);var f=a('.drag-target[data-sidenav="'+d+'"]');b.draggable?(f.length&&f.remove(),f=a('<div class="drag-target"></div>').attr("data-sidenav",d),a("body").append(f)):f=a(),"left"==b.edge?(e.css("transform","translateX(-100%)"),f.css({left:0})):(e.addClass("right-aligned").css("transform","translateX(100%)"),f.css({right:0})),e.hasClass("fixed")&&window.innerWidth>992&&e.css("transform","translateX(0)"),e.hasClass("fixed")&&a(window).resize(function(){window.innerWidth>992?0!==a("#sidenav-overlay").length&&i?g(!0):e.css("transform","translateX(0%)"):i===!1&&("left"===b.edge?e.css("transform","translateX(-100%)"):e.css("transform","translateX(100%)"))}),b.closeOnClick===!0&&e.on("click.itemclick","a:not(.collapsible-header)",function(){g()});var g=function(c){h=!1,i=!1,a("body").css({overflow:"",width:""}),a("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),"left"===b.edge?(f.css({width:"",right:"",left:"0"}),e.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){c===!0&&(e.removeAttr("style"),e.css("width",b.menuWidth))}})):(f.css({width:"",right:"0",left:""}),e.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){c===!0&&(e.removeAttr("style"),e.css("width",b.menuWidth))}}))},h=!1,i=!1;b.draggable&&(f.on("click",function(){i&&g()}),f.hammer({prevent_default:!1}).bind("pan",function(c){if("touch"==c.gesture.pointerType){var d=(c.gesture.direction,c.gesture.center.x),f=(c.gesture.center.y,c.gesture.velocityX,a("body")),h=a("#sidenav-overlay"),j=f.innerWidth();if(f.css("overflow","hidden"),f.width(j),0===h.length&&(h=a('<div id="sidenav-overlay"></div>'),h.css("opacity",0).click(function(){g()}),a("body").append(h)),"left"===b.edge&&(d>b.menuWidth?d=b.menuWidth:0>d&&(d=0)),"left"===b.edge)d<b.menuWidth/2?i=!1:d>=b.menuWidth/2&&(i=!0),e.css("transform","translateX("+(d-b.menuWidth)+"px)");else{d<window.innerWidth-b.menuWidth/2?i=!0:d>=window.innerWidth-b.menuWidth/2&&(i=!1);var k=d-b.menuWidth/2;0>k&&(k=0),e.css("transform","translateX("+k+"px)")}var l;"left"===b.edge?(l=d/b.menuWidth,h.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"})):(l=Math.abs((d-window.innerWidth)/b.menuWidth),h.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(c){if("touch"==c.gesture.pointerType){var d=a("#sidenav-overlay"),g=c.gesture.velocityX,j=c.gesture.center.x,k=j-b.menuWidth,l=j-b.menuWidth/2;k>0&&(k=0),0>l&&(l=0),h=!1,"left"===b.edge?i&&.3>=g||-.5>g?(0!==k&&e.velocity({translateX:[0,k]},{duration:300,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),f.css({width:"50%",right:0,left:""}),i=!0):(!i||g>.3)&&(a("body").css({overflow:"",width:""}),e.velocity({translateX:[-1*b.menuWidth-10,k]},{duration:200,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),f.css({width:"10px",right:"",left:0})):i&&g>=-.3||g>.5?(0!==l&&e.velocity({translateX:[0,l]},{duration:300,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),f.css({width:"50%",right:"",left:0}),i=!0):(!i||-.3>g)&&(a("body").css({overflow:"",width:""}),e.velocity({translateX:[b.menuWidth+10,l]},{duration:200,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),f.css({width:"10px",right:0,left:""}))}})),c.off("click.sidenav").on("click.sidenav",function(){if(i===!0)i=!1,h=!1,g();else{var c=a("body"),d=a('<div id="sidenav-overlay"></div>'),j=c.innerWidth();c.css("overflow","hidden"),c.width(j),a("body").append(f),"left"===b.edge?(f.css({width:"50%",right:0,left:""}),e.velocity({translateX:[0,-1*b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(f.css({width:"50%",right:"",left:0}),e.velocity({translateX:[0,b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),d.css("opacity",0).click(function(){i=!1,h=!1,g(),d.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}})}),a("body").append(d),d.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){i=!0,h=!1}})}return!1})})},destroy:function(){var b=a("#sidenav-overlay"),c=a('.drag-target[data-sidenav="'+a(this).attr("data-activates")+'"]');b.trigger("click"),c.remove(),a(this).off("click"),b.remove()},show:function(){this.trigger("click")},hide:function(){a("#sidenav-overlay").trigger("click")}};a.fn.sideNav=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.sideNav"):b.init.apply(this,arguments)}}(jQuery),function(a){function b(b,c,d,e){var g=a();return a.each(f,function(a,f){if(f.height()>0){var h=f.offset().top,i=f.offset().left,j=i+f.width(),k=h+f.height(),l=!(i>c||e>j||h>d||b>k);l&&g.push(f)}}),g}function c(c){++i;var d=e.scrollTop(),f=e.scrollLeft(),h=f+e.width(),k=d+e.height(),l=b(d+j.top+c||200,h+j.right,k+j.bottom,f+j.left);a.each(l,function(a,b){var c=b.data("scrollSpy:ticks");"number"!=typeof c&&b.triggerHandler("scrollSpy:enter"),b.data("scrollSpy:ticks",i)}),a.each(g,function(a,b){var c=b.data("scrollSpy:ticks");"number"==typeof c&&c!==i&&(b.triggerHandler("scrollSpy:exit"),b.data("scrollSpy:ticks",null))}),g=l}function d(){e.trigger("scrollSpy:winSize")}var e=a(window),f=[],g=[],h=!1,i=0,j={top:0,right:0,bottom:0,left:0};a.scrollSpy=function(b,d){var g={throttle:100,scrollOffset:200};d=a.extend(g,d);var i=[];b=a(b),b.each(function(b,c){f.push(a(c)),a(c).data("scrollSpy:id",b),a('a[href="#'+a(c).attr("id")+'"]').click(function(b){b.preventDefault();var c=a(Materialize.escapeHash(this.hash)).offset().top+1;a("html, body").animate({scrollTop:c-d.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),j.top=d.offsetTop||0,j.right=d.offsetRight||0,j.bottom=d.offsetBottom||0,j.left=d.offsetLeft||0;var k=Materialize.throttle(function(){c(d.scrollOffset)},d.throttle||100),l=function(){a(document).ready(k)};return h||(e.on("scroll",l),e.on("resize",l),h=!0),setTimeout(l,0),b.on("scrollSpy:enter",function(){i=a.grep(i,function(a){return 0!=a.height()});var b=a(this);i[0]?(a('a[href="#'+i[0].attr("id")+'"]').removeClass("active"),b.data("scrollSpy:id")<i[0].data("scrollSpy:id")?i.unshift(a(this)):i.push(a(this))):i.push(a(this)),a('a[href="#'+i[0].attr("id")+'"]').addClass("active")}),b.on("scrollSpy:exit",function(){if(i=a.grep(i,function(a){return 0!=a.height()}),i[0]){a('a[href="#'+i[0].attr("id")+'"]').removeClass("active");var b=a(this);i=a.grep(i,function(a){return a.attr("id")!=b.attr("id")}),i[0]&&a('a[href="#'+i[0].attr("id")+'"]').addClass("active")}}),b},a.winSizeSpy=function(b){return a.winSizeSpy=function(){return e},b=b||{throttle:100},e.on("resize",Materialize.throttle(d,b.throttle||100))},a.fn.scrollSpy=function(b){return a.scrollSpy(a(this),b)}}(jQuery),function(a){a(document).ready(function(){function b(b){var c=b.css("font-family"),d=b.css("font-size"),f=b.css("line-height");d&&e.css("font-size",d),c&&e.css("font-family",c),f&&e.css("line-height",f),"off"===b.attr("wrap")&&e.css("overflow-wrap","normal").css("white-space","pre"),e.text(b.val()+"\n");var g=e.html().replace(/\n/g,"<br>");e.html(g),b.is(":visible")?e.css("width",b.width()):e.css("width",a(window).width()/2),b.css("height",e.height())}Materialize.updateTextFields=function(){var b="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";a(b).each(function(b,c){var d=a(this);a(c).val().length>0||c.autofocus||void 0!==d.attr("placeholder")?d.siblings("label").addClass("active"):a(c)[0].validity?d.siblings("label").toggleClass("active",a(c)[0].validity.badInput===!0):d.siblings("label").removeClass("active")})};var c="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";a(document).on("change",c,function(){0===a(this).val().length&&void 0===a(this).attr("placeholder")||a(this).siblings("label").addClass("active"),validate_field(a(this))}),a(document).ready(function(){Materialize.updateTextFields()}),a(document).on("reset",function(b){var d=a(b.target);d.is("form")&&(d.find(c).removeClass("valid").removeClass("invalid"),d.find(c).each(function(){""===a(this).attr("value")&&a(this).siblings("label").removeClass("active")}),d.find("select.initialized").each(function(){var a=d.find("option[selected]").text();d.siblings("input.select-dropdown").val(a)}))}),a(document).on("focus",c,function(){a(this).siblings("label, .prefix").addClass("active")}),a(document).on("blur",c,function(){var b=a(this),c=".prefix";0===b.val().length&&b[0].validity.badInput!==!0&&void 0===b.attr("placeholder")&&(c+=", label"),b.siblings(c).removeClass("active"),validate_field(b)}),window.validate_field=function(a){var b=void 0!==a.attr("data-length"),c=parseInt(a.attr("data-length")),d=a.val().length;0===a.val().length&&a[0].validity.badInput===!1?a.hasClass("validate")&&(a.removeClass("valid"),a.removeClass("invalid")):a.hasClass("validate")&&(a.is(":valid")&&b&&c>=d||a.is(":valid")&&!b?(a.removeClass("invalid"),a.addClass("valid")):(a.removeClass("valid"),a.addClass("invalid")))};var d="input[type=radio], input[type=checkbox]";a(document).on("keyup.radio",d,function(b){if(9===b.which){a(this).addClass("tabbed");var c=a(this);return void c.one("blur",function(b){a(this).removeClass("tabbed")})}});var e=a(".hiddendiv").first();e.length||(e=a('<div class="hiddendiv common"></div>'),a("body").append(e));var f=".materialize-textarea";a(f).each(function(){var c=a(this);c.val().length&&b(c)}),a("body").on("keyup keydown autoresize",f,function(){b(a(this))}),a(document).on("change",'.file-field input[type="file"]',function(){for(var b=a(this).closest(".file-field"),c=b.find("input.file-path"),d=a(this)[0].files,e=[],f=0;f<d.length;f++)e.push(d[f].name);c.val(e.join(", ")),c.trigger("change")});var g="input[type=range]",h=!1;a(g).each(function(){var b=a('<span class="thumb"><span class="value"></span></span>');a(this).after(b)});var i=".range-field";a(document).on("change",g,function(b){var c=a(this).siblings(".thumb");c.find(".value").html(a(this).val());var d=a(this).attr("max"),e=a(this).width()-15,f=(a(this).parent(".range-field").outerWidth()-e||0,a(this).val()*(e/d));c.hasClass("active")||c.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:"5px"},{duration:300,easing:"easeOutExpo"}),c.addClass("active").css("left",f)}),a(document).on("mousedown touchstart",g,function(b){var c=a(this).siblings(".thumb"),d=a(this).attr("max"),e=a(this).width()-15,f=(a(this).parent(".range-field").outerWidth()-e||0,a(this).val()*(e/d));c.length<=0&&(c=a('<span class="thumb"><span class="value"></span></span>'),a(this).after(c)),c.find(".value").html(a(this).val()),h=!0,a(this).addClass("active"),c.hasClass("active")||c.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:"5px"},{duration:300,easing:"easeOutExpo"}),"input"!==b.type&&c.addClass("active").css("left",f)}),a(document).on("mouseup touchend",i,function(){h=!1,a(this).removeClass("active")}),a(document).on("input mousemove touchmove",i,function(b){var c=a(this).children(".thumb"),d=a(this).find(g),e=d.attr("max"),f=d.width()-15,i=(a(this).outerWidth()-f||0,d.val()*(f/e));h&&(c.hasClass("active")||c.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:"5px"},{duration:300,easing:"easeOutExpo"}),c.addClass("active").css("left",i),c.find(".value").html(c.siblings(g).val()))}),a(document).on("mouseout touchleave",i,function(){if(!h){var b=a(this).children(".thumb");b.hasClass("active")&&b.velocity({height:"0",width:"0",top:"10px",marginLeft:"15px"},{duration:100}),b.removeClass("active")}}),a.fn.autocomplete=function(b){var c={data:{},limit:1/0,onAutocomplete:null,minLength:1};return b=a.extend(c,b),this.each(function(){var c,d=a(this),e=b.data,f=0,g=-1,h=d.closest(".input-field");if(!a.isEmptyObject(e)){var i,j=a('<ul class="autocomplete-content dropdown-content"></ul>');h.length?(i=h.children(".autocomplete-content.dropdown-content").first(),i.length||h.append(j)):(i=d.next(".autocomplete-content.dropdown-content"),i.length||d.after(j)),i.length&&(j=i);var k=function(a,b){var c=b.find("img"),d=b.text().toLowerCase().indexOf(""+a.toLowerCase()),e=d+a.length-1,f=b.text().slice(0,d),g=b.text().slice(d,e+1),h=b.text().slice(e+1);b.html("<span>"+f+"<span class='highlight'>"+g+"</span>"+h+"</span>"),c.length&&b.prepend(c)},l=function(){g=-1,j.find(".active").removeClass("active")},m=function(){j.empty(),l(),c=void 0};d.off("blur.autocomplete").on("blur.autocomplete",function(){m()}),d.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(g){f=0;var h=d.val().toLowerCase();if(13!==g.which&&38!==g.which&&40!==g.which){if(c!==h&&(m(),h.length>=b.minLength))for(var i in e)if(e.hasOwnProperty(i)&&-1!==i.toLowerCase().indexOf(h)&&i.toLowerCase()!==h){if(f>=b.limit)break;var l=a("<li></li>");e[i]?l.append('<img src="'+e[i]+'" class="right circle"><span>'+i+"</span>"):l.append("<span>"+i+"</span>"),j.append(l),k(h,l),f++}c=h}}),d.off("keydown.autocomplete").on("keydown.autocomplete",function(a){var b,c=a.which,d=j.children("li").length,e=j.children(".active").first();return 13===c&&g>=0?(b=j.children("li").eq(g),void(b.length&&(b.trigger("mousedown.autocomplete"),a.preventDefault()))):void(38!==c&&40!==c||(a.preventDefault(),38===c&&g>0&&g--,40===c&&d-1>g&&g++,e.removeClass("active"),g>=0&&j.children("li").eq(g).addClass("active")))}),j.on("mousedown.autocomplete touchstart.autocomplete","li",function(){var c=a(this).text().trim();d.val(c),d.trigger("change"),m(),"function"==typeof b.onAutocomplete&&b.onAutocomplete.call(this,c)})}})}}),a.fn.material_select=function(b){function c(a,b,c){var e=a.indexOf(b),f=-1===e;return f?a.push(b):a.splice(e,1),c.siblings("ul.dropdown-content").find("li:not(.optgroup)").eq(b).toggleClass("active"),c.find("option").eq(b).prop("selected",f),d(a,c),f}function d(a,b){for(var c="",d=0,e=a.length;e>d;d++){var f=b.find("option").eq(a[d]).text();c+=0===d?f:", "+f}""===c&&(c=b.find("option:disabled").eq(0).text()),b.siblings("input.select-dropdown").val(c)}a(this).each(function(){var d=a(this);if(!d.hasClass("browser-default")){var e=!!d.attr("multiple"),f=d.data("select-id");if(f&&(d.parent().find("span.caret").remove(),d.parent().find("input").remove(),d.unwrap(),a("ul#select-options-"+f).remove()),"destroy"===b)return void d.data("select-id",null).removeClass("initialized");var g=Materialize.guid();d.data("select-id",g);var h=a('<div class="select-wrapper"></div>');h.addClass(d.attr("class"));var i=a('<ul id="select-options-'+g+'" class="dropdown-content select-dropdown '+(e?"multiple-select-dropdown":"")+'"></ul>'),j=d.children("option, optgroup"),k=[],l=!1,m=d.find("option:selected").html()||d.find("option:first").html()||"",n=function(b,c,d){var f=c.is(":disabled")?"disabled ":"",g="optgroup-option"===d?"optgroup-option ":"",h=e?'<input type="checkbox"'+f+"/><label></label>":"",j=c.data("icon"),k=c.attr("class");if(j){var l="";return k&&(l=' class="'+k+'"'),i.append(a('<li class="'+f+g+'"><img alt="" src="'+j+'"'+l+"><span>"+h+c.html()+"</span></li>")),!0}i.append(a('<li class="'+f+g+'"><span>'+h+c.html()+"</span></li>"))};j.length&&j.each(function(){if(a(this).is("option"))e?n(d,a(this),"multiple"):n(d,a(this));else if(a(this).is("optgroup")){var b=a(this).children("option");i.append(a('<li class="optgroup"><span>'+a(this).attr("label")+"</span></li>")),b.each(function(){n(d,a(this),"optgroup-option")})}}),i.find("li:not(.optgroup)").each(function(f){a(this).click(function(g){if(!a(this).hasClass("disabled")&&!a(this).hasClass("optgroup")){var h=!0;e?(a('input[type="checkbox"]',this).prop("checked",function(a,b){return!b}),h=c(k,f,d),q.trigger("focus")):(i.find("li").removeClass("active"),a(this).toggleClass("active"),q.val(a(this).text())),r(i,a(this)),d.find("option").eq(f).prop("selected",h),d.trigger("change"),"undefined"!=typeof b&&b()}g.stopPropagation()})}),d.wrap(h);var o=a('<span class="caret">&#9660;</span>');d.is(":disabled")&&o.addClass("disabled");var p=m.replace(/"/g,"&quot;"),q=a('<input type="text" class="select-dropdown" readonly="true" '+(d.is(":disabled")?"disabled":"")+' data-activates="select-options-'+g+'" value="'+p+'"/>');
d.before(q),q.before(o),q.after(i),d.is(":disabled")||q.dropdown({hover:!1,closeOnClick:!1}),d.attr("tabindex")&&a(q[0]).attr("tabindex",d.attr("tabindex")),d.addClass("initialized"),q.on({focus:function(){if(a("ul.select-dropdown").not(i[0]).is(":visible")&&a("input.select-dropdown").trigger("close"),!i.is(":visible")){a(this).trigger("open",["focus"]);var b=a(this).val();e&&b.indexOf(",")>=0&&(b=b.split(",")[0]);var c=i.find("li").filter(function(){return a(this).text().toLowerCase()===b.toLowerCase()})[0];r(i,c,!0)}},click:function(a){a.stopPropagation()}}),q.on("blur",function(){e||a(this).trigger("close"),i.find("li.selected").removeClass("selected")}),i.hover(function(){l=!0},function(){l=!1}),a(window).on({click:function(){e&&(l||q.trigger("close"))}}),e&&d.find("option:selected:not(:disabled)").each(function(){var b=a(this).index();c(k,b,d),i.find("li").eq(b).find(":checkbox").prop("checked",!0)});var r=function(b,c,d){if(c){b.find("li.selected").removeClass("selected");var f=a(c);f.addClass("selected"),e&&!d||i.scrollTo(f)}},s=[],t=function(b){if(9==b.which)return void q.trigger("close");if(40==b.which&&!i.is(":visible"))return void q.trigger("open");if(13!=b.which||i.is(":visible")){b.preventDefault();var c=String.fromCharCode(b.which).toLowerCase(),d=[9,13,27,38,40];if(c&&-1===d.indexOf(b.which)){s.push(c);var f=s.join(""),g=i.find("li").filter(function(){return 0===a(this).text().toLowerCase().indexOf(f)})[0];g&&r(i,g)}if(13==b.which){var h=i.find("li.selected:not(.disabled)")[0];h&&(a(h).trigger("click"),e||q.trigger("close"))}40==b.which&&(g=i.find("li.selected").length?i.find("li.selected").next("li:not(.disabled)")[0]:i.find("li:not(.disabled)")[0],r(i,g)),27==b.which&&q.trigger("close"),38==b.which&&(g=i.find("li.selected").prev("li:not(.disabled)")[0],g&&r(i,g)),setTimeout(function(){s=[]},1e3)}};q.on("keydown",t)}})}}(jQuery),function(a){var b={init:function(b){var c={indicators:!0,height:400,transition:500,interval:6e3};return b=a.extend(c,b),this.each(function(){function c(a,b){a.hasClass("center-align")?a.velocity({opacity:0,translateY:-100},{duration:b,queue:!1}):a.hasClass("right-align")?a.velocity({opacity:0,translateX:100},{duration:b,queue:!1}):a.hasClass("left-align")&&a.velocity({opacity:0,translateX:-100},{duration:b,queue:!1})}function d(a){a>=j.length?a=0:0>a&&(a=j.length-1),k=i.find(".active").index(),k!=a&&(e=j.eq(k),$caption=e.find(".caption"),e.removeClass("active"),e.velocity({opacity:0},{duration:b.transition,queue:!1,easing:"easeOutQuad",complete:function(){j.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),c($caption,b.transition),b.indicators&&f.eq(k).removeClass("active"),j.eq(a).velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,delay:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).addClass("active"),b.indicators&&f.eq(a).addClass("active"))}var e,f,g,h=a(this),i=h.find("ul.slides").first(),j=i.find("> li"),k=i.find(".active").index();-1!=k&&(e=j.eq(k)),h.hasClass("fullscreen")||(b.indicators?h.height(b.height+40):h.height(b.height),i.height(b.height)),j.find(".caption").each(function(){c(a(this),0)}),j.find("img").each(function(){var b="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";a(this).attr("src")!==b&&(a(this).css("background-image","url("+a(this).attr("src")+")"),a(this).attr("src",b))}),b.indicators&&(f=a('<ul class="indicators"></ul>'),j.each(function(c){var e=a('<li class="indicator-item"></li>');e.click(function(){var c=i.parent(),e=c.find(a(this)).index();d(e),clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),f.append(e)}),h.append(f),f=h.find("ul.indicators").find("li.indicator-item")),e?e.show():(j.first().addClass("active").velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),k=0,e=j.eq(k),b.indicators&&f.eq(k).addClass("active")),e.find("img").each(function(){e.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,queue:!1,easing:"easeOutQuad"})}),g=setInterval(function(){k=i.find(".active").index(),d(k+1)},b.transition+b.interval);var l=!1,m=!1,n=!1;h.hammer({prevent_default:!1}).bind("pan",function(a){if("touch"===a.gesture.pointerType){clearInterval(g);var b=a.gesture.direction,c=a.gesture.deltaX,d=a.gesture.velocityX,e=a.gesture.velocityY;$curr_slide=i.find(".active"),Math.abs(d)>Math.abs(e)&&$curr_slide.velocity({translateX:c},{duration:50,queue:!1,easing:"easeOutQuad"}),4===b&&(c>h.innerWidth()/2||-.65>d)?n=!0:2===b&&(c<-1*h.innerWidth()/2||d>.65)&&(m=!0);var f;m&&(f=$curr_slide.next(),0===f.length&&(f=j.first()),f.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),n&&(f=$curr_slide.prev(),0===f.length&&(f=j.last()),f.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(a){"touch"===a.gesture.pointerType&&($curr_slide=i.find(".active"),l=!1,curr_index=i.find(".active").index(),!n&&!m||j.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):m?(d(curr_index+1),$curr_slide.velocity({translateX:-1*h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):n&&(d(curr_index-1),$curr_slide.velocity({translateX:h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),m=!1,n=!1,clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval))}),h.on("sliderPause",function(){clearInterval(g)}),h.on("sliderStart",function(){clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),h.on("sliderNext",function(){k=i.find(".active").index(),d(k+1)}),h.on("sliderPrev",function(){k=i.find(".active").index(),d(k-1)})})},pause:function(){a(this).trigger("sliderPause")},start:function(){a(this).trigger("sliderStart")},next:function(){a(this).trigger("sliderNext")},prev:function(){a(this).trigger("sliderPrev")}};a.fn.slider=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tooltip"):b.init.apply(this,arguments)}}(jQuery),function(a){a(document).ready(function(){a(document).on("click.card",".card",function(b){a(this).find("> .card-reveal").length&&(a(b.target).is(a(".card-reveal .card-title"))||a(b.target).is(a(".card-reveal .card-title i"))?a(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){a(this).css({display:"none"})}}):(a(b.target).is(a(".card .activator"))||a(b.target).is(a(".card .activator i")))&&(a(b.target).closest(".card").css("overflow","hidden"),a(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"})))})})}(jQuery),function(a){var b={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{}};a(document).ready(function(){a(document).on("click",".chip .close",function(b){var c=a(this).closest(".chips");c.attr("data-initialized")||a(this).closest(".chip").remove()})}),a.fn.material_chip=function(c){var d=this;if(this.$el=a(this),this.$document=a(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===c)return this.$el.data("chips");var e=a.extend({},b,c);d.hasAutocomplete=!a.isEmptyObject(e.autocompleteOptions.data),this.init=function(){var b=0;d.$el.each(function(){var c=a(this),f=Materialize.guid();d.chipId=f,e.data&&e.data instanceof Array||(e.data=[]),c.data("chips",e.data),c.attr("data-index",b),c.attr("data-initialized",!0),c.hasClass(d.SELS.CHIPS)||c.addClass("chips"),d.chips(c,f),b++})},this.handleEvents=function(){var b=d.SELS;d.$document.off("click.chips-focus",b.CHIPS).on("click.chips-focus",b.CHIPS,function(c){a(c.target).find(b.INPUT).focus()}),d.$document.off("click.chips-select",b.CHIP).on("click.chips-select",b.CHIP,function(c){var e=a(c.target);if(e.length){var f=e.hasClass("selected"),g=e.closest(b.CHIPS);a(b.CHIP).removeClass("selected"),f||d.selectChip(e.index(),g)}}),d.$document.off("keydown.chips").on("keydown.chips",function(c){if(!a(c.target).is("input, textarea")){var e,f=d.$document.find(b.CHIP+b.SELECTED_CHIP),g=f.closest(b.CHIPS),h=f.siblings(b.CHIP).length;if(f.length)if(8===c.which||46===c.which){c.preventDefault(),e=f.index(),d.deleteChip(e,g);var i=null;h>e+1?i=e:e!==h&&e+1!==h||(i=h-1),0>i&&(i=null),null!==i&&d.selectChip(i,g),h||g.find("input").focus()}else if(37===c.which){if(e=f.index()-1,0>e)return;a(b.CHIP).removeClass("selected"),d.selectChip(e,g)}else if(39===c.which){if(e=f.index()+1,a(b.CHIP).removeClass("selected"),e>h)return void g.find("input").focus();d.selectChip(e,g)}}}),d.$document.off("focusin.chips",b.CHIPS+" "+b.INPUT).on("focusin.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS);d.addClass("focus"),d.siblings("label, .prefix").addClass("active"),a(b.CHIP).removeClass("selected")}),d.$document.off("focusout.chips",b.CHIPS+" "+b.INPUT).on("focusout.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS);d.removeClass("focus"),d.data("chips").length||d.siblings("label").removeClass("active"),d.siblings(".prefix").removeClass("active")}),d.$document.off("keydown.chips-add",b.CHIPS+" "+b.INPUT).on("keydown.chips-add",b.CHIPS+" "+b.INPUT,function(c){var e=a(c.target),f=e.closest(b.CHIPS),g=f.children(b.CHIP).length;if(13===c.which){if(d.hasAutocomplete&&f.find(".autocomplete-content.dropdown-content").length&&f.find(".autocomplete-content.dropdown-content").children().length)return;return c.preventDefault(),d.addChip({tag:e.val()},f),void e.val("")}return 8!==c.keyCode&&37!==c.keyCode||""!==e.val()||!g?void 0:(c.preventDefault(),d.selectChip(g-1,f),void e.blur())}),d.$document.off("click.chips-delete",b.CHIPS+" "+b.DELETE).on("click.chips-delete",b.CHIPS+" "+b.DELETE,function(c){var e=a(c.target),f=e.closest(b.CHIPS),g=e.closest(b.CHIP);c.stopPropagation(),d.deleteChip(g.index(),f),f.find("input").focus()})},this.chips=function(b,c){b.empty(),b.data("chips").forEach(function(a){b.append(d.renderChip(a))}),b.append(a('<input id="'+c+'" class="input" placeholder="">')),d.setPlaceholder(b);var f=b.next("label");f.length&&(f.attr("for",c),b.data("chips").length&&f.addClass("active"));var g=a("#"+c);d.hasAutocomplete&&(e.autocompleteOptions.onAutocomplete=function(a){d.addChip({tag:a},b),g.val(""),g.focus()},g.autocomplete(e.autocompleteOptions))},this.renderChip=function(b){if(b.tag){var c=a('<div class="chip"></div>');return c.text(b.tag),c.append(a('<i class="material-icons close">close</i>')),c}},this.setPlaceholder=function(a){a.data("chips").length&&e.placeholder?a.find("input").prop("placeholder",e.placeholder):!a.data("chips").length&&e.secondaryPlaceholder&&a.find("input").prop("placeholder",e.secondaryPlaceholder)},this.isValid=function(a,b){for(var c=a.data("chips"),d=!1,e=0;e<c.length;e++)if(c[e].tag===b.tag)return void(d=!0);return""!==b.tag&&!d},this.addChip=function(a,b){if(d.isValid(b,a)){for(var c=d.renderChip(a),e=[],f=b.data("chips"),g=0;g<f.length;g++)e.push(f[g]);e.push(a),b.data("chips",e),c.insertBefore(b.find("input")),b.trigger("chip.add",a),d.setPlaceholder(b)}},this.deleteChip=function(a,b){var c=b.data("chips")[a];b.find(".chip").eq(a).remove();for(var e=[],f=b.data("chips"),g=0;g<f.length;g++)g!==a&&e.push(f[g]);b.data("chips",e),b.trigger("chip.delete",c),d.setPlaceholder(b)},this.selectChip=function(a,b){var c=b.find(".chip").eq(a);c&&!1===c.hasClass("selected")&&(c.addClass("selected"),b.trigger("chip.select",b.data("chips")[a]))},this.getChipsElement=function(a,b){return b.eq(a)},this.init(),this.handleEvents()}}(jQuery),function(a){a.fn.pushpin=function(b){var c={top:0,bottom:1/0,offset:0};return"remove"===b?(this.each(function(){(id=a(this).data("pushpin-id"))&&(a(window).off("scroll."+id),a(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(b=a.extend(c,b),$index=0,this.each(function(){function c(a){a.removeClass("pin-top"),a.removeClass("pinned"),a.removeClass("pin-bottom")}function d(d,e){d.each(function(){b.top<=e&&b.bottom>=e&&!a(this).hasClass("pinned")&&(c(a(this)),a(this).css("top",b.offset),a(this).addClass("pinned")),e<b.top&&!a(this).hasClass("pin-top")&&(c(a(this)),a(this).css("top",0),a(this).addClass("pin-top")),e>b.bottom&&!a(this).hasClass("pin-bottom")&&(c(a(this)),a(this).addClass("pin-bottom"),a(this).css("top",b.bottom-g))})}var e=Materialize.guid(),f=a(this),g=a(this).offset().top;a(this).data("pushpin-id",e),d(f,a(window).scrollTop()),a(window).on("scroll."+e,function(){var c=a(window).scrollTop()+b.offset;d(f,c)})}))}}(jQuery),function(a){a(document).ready(function(){a.fn.reverse=[].reverse,a(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(c){var d=a(this);b(d)}),a(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(b){var d=a(this);c(d)}),a(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(d){var e=a(this),f=e.parent();f.hasClass("active")?c(f):b(f)}),a(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(b){var c=a(this),e=c.parent();d(e)})}),a.fn.extend({openFAB:function(){b(a(this))},closeFAB:function(){c(a(this))},openToolbar:function(){d(a(this))},closeToolbar:function(){e(a(this))}});var b=function(b){var c=b;if(c.hasClass("active")===!1){var d,e,f=c.hasClass("horizontal");f===!0?e=40:d=40,c.addClass("active"),c.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:d+"px",translateX:e+"px"},{duration:0});var g=0;c.find("ul .btn-floating").reverse().each(function(){a(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:g}),g+=40})}},c=function(a){var b,c,d=a,e=d.hasClass("horizontal");e===!0?c=40:b=40,d.removeClass("active"),d.find("ul .btn-floating").velocity("stop",!0),d.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:b+"px",translateX:c+"px"},{duration:80})},d=function(b){if("true"!==b.attr("data-open")){var c,d,f,g=window.innerWidth,h=window.innerHeight,i=b[0].getBoundingClientRect(),j=b.find("> a").first(),k=b.find("> ul").first(),l=a('<div class="fab-backdrop"></div>'),m=j.css("background-color");j.append(l),c=i.left-g/2+i.width/2,d=h-i.bottom,f=g/l.width(),b.attr("data-origin-bottom",i.bottom),b.attr("data-origin-left",i.left),b.attr("data-origin-width",i.width),b.addClass("active"),b.attr("data-open",!0),b.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+c+"px)",transition:"none"}),j.css({transform:"translateY("+-d+"px)",transition:"none"}),l.css({"background-color":m}),setTimeout(function(){b.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),j.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){b.css({overflow:"hidden","background-color":m}),l.css({transform:"scale("+f+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),k.find("> li > a").css({opacity:1}),a(window).on("scroll.fabToolbarClose",function(){e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose")}),a(document).on("click.fabToolbarClose",function(c){a(c.target).closest(k).length||(e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose"))})},100)},0)}},e=function(a){if("true"===a.attr("data-open")){var b,c,d,e=window.innerWidth,f=window.innerHeight,g=a.attr("data-origin-width"),h=a.attr("data-origin-bottom"),i=a.attr("data-origin-left"),j=a.find("> .btn-floating").first(),k=a.find("> ul").first(),l=a.find(".fab-backdrop"),m=j.css("background-color");b=i-e/2+g/2,c=f-h,d=e/l.width(),a.removeClass("active"),a.attr("data-open",!1),a.css({"background-color":"transparent",transition:"none"}),j.css({transition:"none"}),l.css({transform:"scale(0)","background-color":m}),k.find("> li > a").css({opacity:""}),setTimeout(function(){l.remove(),a.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-b+"px,0,0)"}),j.css({overflow:"",transform:"translate3d(0,"+c+"px,0)"}),setTimeout(function(){a.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),j.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(a){Materialize.fadeInImage=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}c.css({opacity:0}),a(c).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),a(c).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(b,c){c.start=100;var d=b/100,e=150-(100-b)/1.75;100>e&&(e=100),b>=0&&a(this).css({"-webkit-filter":"grayscale("+d+")brightness("+e+"%)",filter:"grayscale("+d+")brightness("+e+"%)"})}})},Materialize.showStaggeredList=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}var d=0;c.find("li").velocity({translateX:"-100px"},{duration:0}),c.find("li").each(function(){a(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:d,easing:[60,10]}),d+=120})},a(document).ready(function(){var b=!1,c=!1;a(".dismissable").each(function(){a(this).hammer({prevent_default:!1}).bind("pan",function(d){if("touch"===d.gesture.pointerType){var e=a(this),f=d.gesture.direction,g=d.gesture.deltaX,h=d.gesture.velocityX;e.velocity({translateX:g},{duration:50,queue:!1,easing:"easeOutQuad"}),4===f&&(g>e.innerWidth()/2||-.75>h)&&(b=!0),2===f&&(g<-1*e.innerWidth()/2||h>.75)&&(c=!0)}}).bind("panend",function(d){if(Math.abs(d.gesture.deltaX)<a(this).innerWidth()/2&&(c=!1,b=!1),"touch"===d.gesture.pointerType){var e=a(this);if(b||c){var f;f=b?e.innerWidth():-1*e.innerWidth(),e.velocity({translateX:f},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){e.css("border","none"),e.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e.remove()}})}})}else e.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"});b=!1,c=!1}})})})}(jQuery),function(a){var b=!1;Materialize.scrollFire=function(a){var c=function(){for(var b=window.pageYOffset+window.innerHeight,c=0;c<a.length;c++){var d=a[c],e=d.selector,f=d.offset,g=d.callback,h=document.querySelector(e);if(null!==h){var i=h.getBoundingClientRect().top+window.pageYOffset;if(b>i+f&&d.done!==!0){if("function"==typeof g)g.call(this,h);else if("string"==typeof g){var j=new Function(g);j(h)}d.done=!0}}}},d=Materialize.throttle(function(){c()},a.throttle||100);b||(window.addEventListener("scroll",d),window.addEventListener("resize",d),b=!0),setTimeout(d,0)}}(jQuery),function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):this.Picker=a(jQuery)}(function(a){function b(f,g,i,l){function m(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",y.component.nodes(t.open),v.box),v.wrap),v.frame),v.holder)}function n(){w.data(g,y).addClass(v.input).attr("tabindex",-1).val(w.data("value")?y.get("select",u.format):f.value),u.editable||w.on("focus."+t.id+" click."+t.id,function(a){a.preventDefault(),y.$root.eq(0).focus()}).on("keydown."+t.id,q),e(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"})}function o(){y.$root.on({keydown:q,focusin:function(a){y.$root.removeClass(v.focused),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=y.$root.children()[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is("input, select, textarea, button, option")||(b.preventDefault(),y.$root.eq(0).focus()))}}).on({focus:function(){w.addClass(v.target)},blur:function(){w.removeClass(v.target)}}).on("focus.toOpen",r).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var b=a(this),c=b.data(),d=b.hasClass(v.navDisabled)||b.hasClass(v.disabled),e=h();e=e&&(e.type||e.href),(d||e&&!a.contains(y.$root[0],e))&&y.$root.eq(0).focus(),!d&&c.nav?y.set("highlight",y.component.item.highlight,{nav:c.nav}):!d&&"pick"in c?y.set("select",c.pick):c.clear?y.clear().close(!0):c.close&&y.close(!0)}),e(y.$root[0],"hidden",!0)}function p(){var b;u.hiddenName===!0?(b=f.name,f.name=""):(b=["string"==typeof u.hiddenPrefix?u.hiddenPrefix:"","string"==typeof u.hiddenSuffix?u.hiddenSuffix:"_submit"],b=b[0]+f.name+b[1]),y._hidden=a('<input type=hidden name="'+b+'"'+(w.data("value")||f.value?' value="'+y.get("select",u.formatSubmit)+'"':"")+">")[0],w.on("change."+t.id,function(){y._hidden.value=f.value?y.get("select",u.formatSubmit):""}),u.container?a(u.container).append(y._hidden):w.after(y._hidden)}function q(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(y.close(),!1):void((32==b||c||!t.open&&y.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?y.clear().close():y.open()))}function r(a){a.stopPropagation(),"focus"==a.type&&y.$root.addClass(v.focused),y.open()}if(!f)return b;var s=!1,t={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},u=i?a.extend(!0,{},i.defaults,l):l||{},v=a.extend({},b.klasses(),u.klass),w=a(f),x=function(){return this.start()},y=x.prototype={constructor:x,$node:w,start:function(){return t&&t.start?y:(t.methods={},t.start=!0,t.open=!1,t.type=f.type,f.autofocus=f==h(),f.readOnly=!u.editable,f.id=f.id||t.id,"text"!=f.type&&(f.type="text"),y.component=new i(y,u),y.$root=a(b._.node("div",m(),v.picker,'id="'+f.id+'_root" tabindex="0"')),o(),u.formatSubmit&&p(),n(),u.container?a(u.container).append(y.$root):w.after(y.$root),y.on({start:y.component.onStart,render:y.component.onRender,stop:y.component.onStop,open:y.component.onOpen,close:y.component.onClose,set:y.component.onSet}).on({start:u.onStart,render:u.onRender,stop:u.onStop,open:u.onOpen,close:u.onClose,set:u.onSet}),s=c(y.$root.children()[0]),f.autofocus&&y.open(),y.trigger("start").trigger("render"))},render:function(a){return a?y.$root.html(m()):y.$root.find("."+v.box).html(y.component.nodes(t.open)),y.trigger("render")},stop:function(){return t.start?(y.close(),y._hidden&&y._hidden.parentNode.removeChild(y._hidden),y.$root.remove(),w.removeClass(v.input).removeData(g),setTimeout(function(){w.off("."+t.id)},0),f.type=t.type,f.readOnly=!1,y.trigger("stop"),t.methods={},t.start=!1,y):y},open:function(c){return t.open?y:(w.addClass(v.active),e(f,"expanded",!0),setTimeout(function(){y.$root.addClass(v.opened),e(y.$root[0],"hidden",!1)},0),c!==!1&&(t.open=!0,s&&k.css("overflow","hidden").css("padding-right","+="+d()),y.$root.eq(0).focus(),j.on("click."+t.id+" focusin."+t.id,function(a){var b=a.target;b!=f&&b!=document&&3!=a.which&&y.close(b===y.$root.children()[0])}).on("keydown."+t.id,function(c){var d=c.keyCode,e=y.component.key[d],f=c.target;27==d?y.close(!0):f!=y.$root[0]||!e&&13!=d?a.contains(y.$root[0],f)&&13==d&&(c.preventDefault(),f.click()):(c.preventDefault(),e?b._.trigger(y.component.key.go,y,[b._.trigger(e)]):y.$root.find("."+v.highlighted).hasClass(v.disabled)||y.set("select",y.component.item.highlight).close())})),y.trigger("open"))},close:function(a){return a&&(y.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){y.$root.on("focus.toOpen",r)},0)),w.removeClass(v.active),e(f,"expanded",!1),setTimeout(function(){y.$root.removeClass(v.opened+" "+v.focused),e(y.$root[0],"hidden",!0)},0),t.open?(t.open=!1,s&&k.css("overflow","").css("padding-right","-="+d()),j.off("."+t.id),y.trigger("close")):y},clear:function(a){return y.set("clear",null,a)},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in y.component.item&&(void 0===f&&(f=null),y.component.set(e,f,d)),"select"!=e&&"clear"!=e||w.val("clear"==e?"":y.get(e,u.format)).trigger("change");y.render()}return d.muted?y:y.trigger("set",h)},get:function(a,c){if(a=a||"value",null!=t[a])return t[a];if("valueSubmit"==a){if(y._hidden)return y._hidden.value;a="value"}if("value"==a)return f.value;if(a in y.component.item){if("string"==typeof c){var d=y.component.get(a);return d?b._.trigger(y.component.formats.toString,y.component,[c,d]):""}return y.component.get(a)}},on:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(b){g||(h[b]=c);for(e in h)f=h[e],d&&(e="_"+e),t.methods[e]=t.methods[e]||[],t.methods[e].push(f)}return y},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)b=c[a],b in t.methods&&delete t.methods[b];return y},trigger:function(a,c){var d=function(a){var d=t.methods[a];d&&d.map(function(a){b._.trigger(a,y,[c])})};return d("_"+a),d(a),y}};return new x}function c(a){var b,c="position";return a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=getComputedStyle(a)[c]),"fixed"==b}function d(){if(k.height()<=i.height())return 0;var b=a('<div style="visibility:hidden;width:100px" />').appendTo("body"),c=b[0].offsetWidth;b.css("overflow","scroll");var d=a('<div style="width:100%" />').appendTo(b),e=d[0].offsetWidth;return b.remove(),c-e}function e(b,c,d){if(a.isPlainObject(c))for(var e in c)f(b,e,c[e]);else f(b,c,d)}function f(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function g(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d,f=b[d];c+=null==f?"":e+'="'+b[d]+'"'}return c}function h(){try{return document.activeElement}catch(a){}}var i=a(window),j=a(document),k=a(document.documentElement);return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",target:a+"__input--target",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(10>a?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1===0},ariaAttr:g},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?b._.trigger(g[e],g,[f]):this.each(function(){var f=a(this);f.data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0],e=d.value,f=a.$node.data("value"),g=f||e,h=f?b.formatSubmit:b.format,i=function(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),g?c.set("select",g,{format:h}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return i()?-1:1},37:function(){return i()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",d,{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}var d=7,e=6,f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-(1/0)||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?"string"==typeof b?b=c.parse(a,b):f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-(1/0):1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=-1===j.item.enable,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&0>l)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date+(c.pick===n.pick?0:-1)])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+(c.pick===o.pick?0:1)])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0;
});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],g=c?f.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,g)),b=b.substr(g)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to)},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?(a=a%7+e,a===d.create(c).day+1):f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?(c=c%7+e,c===d.create(a).day+1):!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.overlapRanges(a,c)},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;g>i;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;g>i;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;g>i;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),f.node("thead",f.node("tr",f.group({min:0,max:d-1,i:1,node:"th",item:function(d){return[a[d],c.klass.weekdays,'scope=col title="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysLetter).slice(0),c.weekdaysFull.slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1)+" "+f.ariaAttr({role:"button",controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"')},q=function(d){var e=c.showMonthsShort?c.monthsShort:c.monthsFull;return"short_months"==d&&(e=c.monthsShort),c.selectMonths&&void 0==d?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[e[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):"short_months"==d?null!=i?f.node("div",e[i.month]):f.node("div",e[k.month]):f.node("div",e[k.month],c.klass.month)},r=function(d){var e=k.year,g=c.selectYears===!0?5:~~(c.selectYears/2);if(g){var h=m.year,i=n.year,j=e-g,l=e+g;if(h>j&&(l+=h-j,j=h),l>i){var o=j-h,p=l-i;j-=o>p?p:o,l=i}if(c.selectYears&&void 0==d)return f.node("select",f.group({min:j,max:l,i:1,node:"option",item:function(a){return[a,0,"value="+a+(e==a?" selected":"")]}}),c.klass.selectYear+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return"raw"==d?f.node("div",e):f.node("div",e,c.klass.year)};return createDayLabel=function(){return null!=i?f.node("div",i.date):f.node("div",h.date)},createWeekdayLabel=function(){var a;a=null!=i?i.day:h.day;var b=c.weekdaysFull[a];return b},f.node("div",f.node("div",createWeekdayLabel(),"picker__weekday-display")+f.node("div",q("short_months"),c.klass.month_display)+f.node("div",createDayLabel(),c.klass.day_display)+f.node("div",r("raw"),c.klass.year_display),c.klass.date_display)+f.node("div",f.node("div",(c.selectYears?q()+r():q()+r())+p()+p(1),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:e-1,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:d*a-k.day+e+1,max:function(){return this.min+d-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick,o=f.trigger(b.formats.toString,b,[c.format,a]);return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"gridcell",label:o,selected:!(!d||b.$node.val()!==o)||null,activedescendant:!!e||null,disabled:!!g||null})),"",f.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+f.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0})),c.klass.calendar_container)+f.node("div",f.node("button",c.today,"btn-flat picker__today","type=button data-pick="+h.pick+(a&&!b.disabled(h)?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.clear,"btn-flat picker__clear","type=button data-clear=1"+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.close,"btn-flat picker__close","type=button data-close=true "+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id})),c.klass.footer)},c.defaults=function(a){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",date_display:a+"date-display",day_display:a+"day-display",month_display:a+"month-display",year_display:a+"year-display",calendar_container:a+"calendar-container",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)}),function(a){function b(){var b=+a(this).attr("data-length"),c=+a(this).val().length,d=b>=c;a(this).parent().find('span[class="character-counter"]').html(c+"/"+b),e(d,a(this))}function c(b){var c=b.parent().find('span[class="character-counter"]');c.length||(c=a("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),b.parent().append(c))}function d(){a(this).parent().find('span[class="character-counter"]').html("")}function e(a,b){var c=b.hasClass("invalid");a&&c?b.removeClass("invalid"):a||c||(b.removeClass("valid"),b.addClass("invalid"))}a.fn.characterCounter=function(){return this.each(function(){var e=a(this),f=e.parent().find('span[class="character-counter"]');if(!f.length){var g=void 0!==e.attr("data-length");g&&(e.on("input",b),e.on("focus",b),e.on("blur",d),c(e))}})},a(document).ready(function(){a("input, textarea").characterCounter()})}(jQuery),function(a){var b={init:function(b){var c={duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null};b=a.extend(c,b);var d=Materialize.objectSelectorString(a(this));return this.each(function(c){function e(){"undefined"!=typeof window.ontouchstart&&(M[0].addEventListener("touchstart",n),M[0].addEventListener("touchmove",o),M[0].addEventListener("touchend",p)),M[0].addEventListener("mousedown",n),M[0].addEventListener("mousemove",o),M[0].addEventListener("mouseup",p),M[0].addEventListener("mouseleave",p),M[0].addEventListener("click",l)}function f(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientX:a.clientX}function g(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientY:a.clientY}function h(a){return a>=x?a%x:0>a?h(x+a%x):a}function i(c){var d,e,f,g,i,j,k,l=u;if(t="number"==typeof c?c:t,u=Math.floor((t+w/2)/w),f=t-u*w,g=0>f?1:-1,i=-g*f*2/w,e=x>>1,b.fullWidth?k="translateX(0)":(k="translateX("+(M[0].clientWidth-r)/2+"px) ",k+="translateY("+(M[0].clientHeight-s)/2+"px)"),N){var m=u%x,n=L.find(".indicator-item.active");n.index()!==m&&(n.removeClass("active"),L.find(".indicator-item").eq(m).addClass("active"))}for((!b.noWrap||u>=0&&x>u)&&(j=q[h(u)],a(j).hasClass("active")||(M.find(".carousel-item").removeClass("active"),a(j).addClass("active")),j.style[E]=k+" translateX("+-f/2+"px) translateX("+g*b.shift*i*d+"px) translateZ("+b.dist*i+"px)",j.style.zIndex=0,b.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*i,j.style.opacity=tweenedOpacity,j.style.display="block"),d=1;e>=d;++d)b.fullWidth?(zTranslation=b.dist,tweenedOpacity=d===e&&0>f?1-i:1):(zTranslation=b.dist*(2*d+i*g),tweenedOpacity=1-.2*(2*d+i*g)),(!b.noWrap||x>u+d)&&(j=q[h(u+d)],j.style[E]=k+" translateX("+(b.shift+(w*d-f)/2)+"px) translateZ("+zTranslation+"px)",j.style.zIndex=-d,j.style.opacity=tweenedOpacity,j.style.display="block"),b.fullWidth?(zTranslation=b.dist,tweenedOpacity=d===e&&f>0?1-i:1):(zTranslation=b.dist*(2*d-i*g),tweenedOpacity=1-.2*(2*d-i*g)),(!b.noWrap||u-d>=0)&&(j=q[h(u-d)],j.style[E]=k+" translateX("+(-b.shift+(-w*d-f)/2)+"px) translateZ("+zTranslation+"px)",j.style.zIndex=-d,j.style.opacity=tweenedOpacity,j.style.display="block");if((!b.noWrap||u>=0&&x>u)&&(j=q[h(u)],j.style[E]=k+" translateX("+-f/2+"px) translateX("+g*b.shift*i+"px) translateZ("+b.dist*i+"px)",j.style.zIndex=0,b.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*i,j.style.opacity=tweenedOpacity,j.style.display="block"),l!==u&&"function"==typeof b.onCycleTo){var o=M.find(".carousel-item").eq(h(u));b.onCycleTo.call(this,o,I)}}function j(){var a,b,c,d;a=Date.now(),b=a-G,G=a,c=t-F,F=t,d=1e3*c/(1+b),D=.8*d+.2*D}function k(){var a,c;B&&(a=Date.now()-G,c=B*Math.exp(-a/b.duration),c>2||-2>c?(i(C-c),requestAnimationFrame(k)):i(C))}function l(c){if(I)return c.preventDefault(),c.stopPropagation(),!1;if(!b.fullWidth){var d=a(c.target).closest(".carousel-item").index(),e=u%x-d;0!==e&&(c.preventDefault(),c.stopPropagation()),m(d)}}function m(a){var c=u%x-a;b.noWrap||(0>c?Math.abs(c+x)<Math.abs(c)&&(c+=x):c>0&&Math.abs(c-x)<c&&(c-=x)),0>c?M.trigger("carouselNext",[Math.abs(c)]):c>0&&M.trigger("carouselPrev",[c])}function n(a){a.preventDefault(),v=!0,I=!1,J=!1,z=f(a),A=g(a),D=B=0,F=t,G=Date.now(),clearInterval(H),H=setInterval(j,100)}function o(a){var b,c,d;if(v)if(b=f(a),y=g(a),c=z-b,d=Math.abs(A-y),30>d&&!J)(c>2||-2>c)&&(I=!0,z=b,i(t+c));else{if(I)return a.preventDefault(),a.stopPropagation(),!1;J=!0}return I?(a.preventDefault(),a.stopPropagation(),!1):void 0}function p(a){return v?(v=!1,clearInterval(H),C=t,(D>10||-10>D)&&(B=.9*D,C=t+B),C=Math.round(C/w)*w,b.noWrap&&(C>=w*(x-1)?C=w*(x-1):0>C&&(C=0)),B=C-t,G=Date.now(),requestAnimationFrame(k),I&&(a.preventDefault(),a.stopPropagation()),!1):void 0}var q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K=d+c,L=a('<ul class="indicators"></ul>'),M=a(this),N=M.attr("data-indicators")||b.indicators;if(M.hasClass("initialized"))return a(this).trigger("carouselNext",[1e-6]),!0;if(b.fullWidth){b.dist=0;var O=M.find(".carousel-item img").first();O.length?imageHeight=O.on("load",function(){M.css("height",a(this).height())}):(imageHeight=M.find(".carousel-item").first().height(),M.css("height",imageHeight)),N&&M.find(".carousel-fixed-item").addClass("with-indicators")}M.addClass("initialized"),v=!1,t=C=0,q=[],r=M.find(".carousel-item").first().innerWidth(),s=M.find(".carousel-item").first().innerHeight(),w=2*r+b.padding,M.find(".carousel-item").each(function(b){if(q.push(a(this)[0]),N){var c=a('<li class="indicator-item"></li>');0===b&&c.addClass("active"),c.click(function(b){b.stopPropagation();var c=a(this).index();m(c)}),L.append(c)}}),N&&M.append(L),x=q.length,E="transform",["webkit","Moz","O","ms"].every(function(a){var b=a+"Transform";return"undefined"==typeof document.body.style[b]||(E=b,!1)}),a(window).off("resize."+K).on("resize."+K,function(){b.fullWidth?(r=M.find(".carousel-item").first().innerWidth(),s=M.find(".carousel-item").first().innerHeight(),w=2*r+b.padding,t=2*u*r,C=t):i()}),e(),i(t),a(this).on("carouselNext",function(a,b){void 0===b&&(b=1),C=w*Math.round(t/w)+w*b,t!==C&&(B=C-t,G=Date.now(),requestAnimationFrame(k))}),a(this).on("carouselPrev",function(a,b){void 0===b&&(b=1),C=w*Math.round(t/w)-w*b,t!==C&&(B=C-t,G=Date.now(),requestAnimationFrame(k))}),a(this).on("carouselSet",function(a,b){void 0===b&&(b=0),m(b)})})},next:function(b){a(this).trigger("carouselNext",[b])},prev:function(b){a(this).trigger("carouselPrev",[b])},set:function(b){a(this).trigger("carouselSet",[b])}};a.fn.carousel=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.carousel"):b.init.apply(this,arguments)}}(jQuery),function(a){var b={init:function(b){return this.each(function(){var c=a("#"+a(this).attr("data-activates")),d=(a("body"),a(this)),e=d.parent(".tap-target-wrapper"),f=e.find(".tap-target-wave"),g=e.find(".tap-target-origin"),h=d.find(".tap-target-content");e.length||(e=d.wrap(a('<div class="tap-target-wrapper"></div>')).parent()),h.length||(h=a('<div class="tap-target-content"></div>'),d.append(h)),f.length||(f=a('<div class="tap-target-wave"></div>'),g.length||(g=c.clone(!0,!0),g.addClass("tap-target-origin"),g.removeAttr("id"),g.removeAttr("style"),f.append(g)),e.append(f));var i=function(){e.is(".open")||(e.addClass("open"),setTimeout(function(){g.off("click.tapTarget").on("click.tapTarget",function(a){j(),g.off("click.tapTarget")}),a(document).off("click.tapTarget").on("click.tapTarget",function(b){j(),a(document).off("click.tapTarget")})},0))},j=function(){e.is(".open")&&(e.removeClass("open"),g.off("click.tapTarget"),a(document).off("click.tapTarget"))},k=function(){var b="fixed"===c.css("position");if(!b)for(var g=c.parents(),i=0;i<g.length&&!(b="fixed"==a(g[i]).css("position"));i++);var j=c.outerWidth(),k=c.outerHeight(),l=b?c.offset().top-a(document).scrollTop():c.offset().top,m=b?c.offset().left-a(document).scrollLeft():c.offset().left,n=a(window).width(),o=a(window).height(),p=n/2,q=o/2,r=p>=m,s=m>p,t=q>=l,u=l>q,v=m>=.25*n&&.75*n>=m,w=d.outerWidth(),x=d.outerHeight(),y=l+k/2-x/2,z=m+j/2-w/2,A=b?"fixed":"absolute",B=v?w:w/2+j,C=x/2,D=t?x/2:0,E=0,F=r&&!v?w/2-j:0,G=0,H=j,I=u?"bottom":"top",J=j>k?2*j:2*j,K=J,L=x/2-K/2,M=w/2-J/2,N={};N.top=t?y:"",N.right=s?n-z-w:"",N.bottom=u?o-y-x:"",N.left=r?z:"",N.position=A,e.css(N),h.css({width:B,height:C,top:D,right:G,bottom:E,left:F,padding:H,verticalAlign:I}),f.css({top:L,left:M,width:J,height:K})};"open"==b&&(k(),i()),"close"==b&&j()})},open:function(){},close:function(){}};a.fn.tapTarget=function(c){return b[c]||"object"==typeof c?b.init.apply(this,arguments):void a.error("Method "+c+" does not exist on jQuery.tap-target")}}(jQuery),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.satellizer=b()}(this,function(){"use strict";function a(a,b){if(/^(?:[a-z]+:)?\/\//i.test(b))return b;var c=[a,b].join("/"),d=function(a){return a.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")};return d(c)}function b(a){var b="https:"===a.protocol;return a.protocol+"//"+a.hostname+":"+(a.port||(b?"443":"80"))+(/^\//.test(a.pathname)?a.pathname:"/"+a.pathname)}function c(a){var b,c,d={};return angular.forEach((a||"").split("&"),function(a){a&&(c=a.split("="),b=decodeURIComponent(c[0]),d[b]=angular.isDefined(c[1])?decodeURIComponent(c[1]):!0)}),d}function d(a){var b;if("undefined"!=typeof module&&module.exports)try{b=require("buffer").Buffer}catch(c){}var d=String.fromCharCode,e=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),f=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return d((c>>>10)+55296)+d((1023&c)+56320);case 3:return d((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return d((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},g=function(a){return a.replace(e,f)},h=b?function(a){return(a.constructor===b.constructor?a:new b(a,"base64")).toString()}:function(a){return g(atob(a))};return h(String(a).replace(/[-_]/g,function(a){return"-"===a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))}var e=function(){function a(){this.baseUrl="/",this.loginUrl="/auth/login",this.signupUrl="/auth/signup",this.unlinkUrl="/auth/unlink/",this.tokenName="token",this.tokenPrefix="satellizer",this.tokenHeader="Authorization",this.tokenType="Bearer",this.storageType="localStorage",this.tokenRoot=null,this.withCredentials=!1,this.providers={facebook:{name:"facebook",url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:window.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",oauthType:"2.0",popupOptions:{width:580,height:400}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:window.location.origin,requiredUrlParams:["scope"],optionalUrlParams:["display","state"],scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:452,height:633},state:function(){return encodeURIComponent(Math.random().toString(36).substr(2))}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:window.location.origin,optionalUrlParams:["scope"],scope:["user:email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1020,height:618}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",redirectUri:window.location.origin,requiredUrlParams:["scope"],scope:["basic"],scopeDelimiter:"+",oauthType:"2.0"},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:window.location.origin,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",state:"STATE",oauthType:"2.0",popupOptions:{width:527,height:582}},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",redirectUri:window.location.origin,oauthType:"1.0",popupOptions:{width:495,height:645}},twitch:{name:"twitch",url:"/auth/twitch",authorizationEndpoint:"https://api.twitch.tv/kraken/oauth2/authorize",redirectUri:window.location.origin,requiredUrlParams:["scope"],scope:["user_read"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",redirectUri:window.location.origin,requiredUrlParams:["display","scope"],scope:["wl.emails"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",redirectUri:window.location.origin,scope:[],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:559,height:519}},bitbucket:{name:"bitbucket",url:"/auth/bitbucket",authorizationEndpoint:"https://bitbucket.org/site/oauth2/authorize",redirectUri:window.location.origin+"/",requiredUrlParams:["scope"],scope:["email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1028,height:529}},spotify:{name:"spotify",url:"/auth/spotify",authorizationEndpoint:"https://accounts.spotify.com/authorize",redirectUri:window.location.origin,optionalUrlParams:["state"],requiredUrlParams:["scope"],scope:["user-read-email"],scopePrefix:"",scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:500,height:530},state:function(){return encodeURIComponent(Math.random().toString(36).substr(2))}}},this.httpInterceptor=function(){return!0}}return Object.defineProperty(a,"getConstant",{get:function(){return new a},enumerable:!0,configurable:!0}),a}(),f=function(){function a(a){this.SatellizerConfig=a}return Object.defineProperty(a.prototype,"baseUrl",{get:function(){return this.SatellizerConfig.baseUrl},set:function(a){this.SatellizerConfig.baseUrl=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loginUrl",{get:function(){return this.SatellizerConfig.loginUrl},set:function(a){this.SatellizerConfig.loginUrl=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"signupUrl",{get:function(){return this.SatellizerConfig.signupUrl},set:function(a){this.SatellizerConfig.signupUrl=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"unlinkUrl",{get:function(){return this.SatellizerConfig.unlinkUrl},set:function(a){this.SatellizerConfig.unlinkUrl=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tokenRoot",{get:function(){return this.SatellizerConfig.tokenRoot},set:function(a){this.SatellizerConfig.tokenRoot=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tokenName",{get:function(){return this.SatellizerConfig.tokenName},set:function(a){this.SatellizerConfig.tokenName=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tokenPrefix",{get:function(){return this.SatellizerConfig.tokenPrefix},set:function(a){this.SatellizerConfig.tokenPrefix=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tokenHeader",{get:function(){return this.SatellizerConfig.tokenHeader},set:function(a){this.SatellizerConfig.tokenHeader=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tokenType",{get:function(){return this.SatellizerConfig.tokenType},set:function(a){this.SatellizerConfig.tokenType=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"withCredentials",{get:function(){return this.SatellizerConfig.withCredentials},set:function(a){this.SatellizerConfig.withCredentials=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"storageType",{get:function(){return this.SatellizerConfig.storageType},set:function(a){this.SatellizerConfig.storageType=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"httpInterceptor",{get:function(){return this.SatellizerConfig.httpInterceptor},set:function(a){"function"==typeof a?this.SatellizerConfig.httpInterceptor=a:this.SatellizerConfig.httpInterceptor=function(){return a}},enumerable:!0,configurable:!0}),a.prototype.facebook=function(a){angular.extend(this.SatellizerConfig.providers.facebook,a)},a.prototype.google=function(a){angular.extend(this.SatellizerConfig.providers.google,a)},a.prototype.github=function(a){angular.extend(this.SatellizerConfig.providers.github,a)},a.prototype.instagram=function(a){angular.extend(this.SatellizerConfig.providers.instagram,a)},a.prototype.linkedin=function(a){angular.extend(this.SatellizerConfig.providers.linkedin,a)},a.prototype.twitter=function(a){angular.extend(this.SatellizerConfig.providers.twitter,a)},a.prototype.twitch=function(a){angular.extend(this.SatellizerConfig.providers.twitch,a)},a.prototype.live=function(a){angular.extend(this.SatellizerConfig.providers.live,a)},a.prototype.yahoo=function(a){angular.extend(this.SatellizerConfig.providers.yahoo,a)},a.prototype.bitbucket=function(a){angular.extend(this.SatellizerConfig.providers.bitbucket,a)},a.prototype.spotify=function(a){angular.extend(this.SatellizerConfig.providers.spotify,a)},a.prototype.oauth1=function(a){this.SatellizerConfig.providers[a.name]=angular.extend(a,{oauthType:"1.0"})},a.prototype.oauth2=function(a){this.SatellizerConfig.providers[a.name]=angular.extend(a,{oauthType:"2.0"})},a.prototype.$get=function(a,b,c){return{login:function(a,c){return b.login(a,c)},signup:function(a,c){return b.signup(a,c)},logout:function(){return a.logout()},authenticate:function(a,b){return c.authenticate(a,b)},link:function(a,b){return c.authenticate(a,b)},unlink:function(a,b){return c.unlink(a,b)},isAuthenticated:function(){return a.isAuthenticated()},getPayload:function(){return a.getPayload()},getToken:function(){return a.getToken()},setToken:function(b){return a.setToken({access_token:b})},removeToken:function(){return a.removeToken()},setStorageType:function(b){return a.setStorageType(b)}}},a.$inject=["SatellizerConfig"],a}();f.prototype.$get.$inject=["SatellizerShared","SatellizerLocal","SatellizerOAuth"];var g=function(){function a(a,b,c,d){this.$q=a,this.$window=b,this.SatellizerConfig=c,this.SatellizerStorage=d;var e=this.SatellizerConfig,f=e.tokenName,g=e.tokenPrefix;this.prefixedTokenName=g?[g,f].join("_"):f}return a.prototype.getToken=function(){return this.SatellizerStorage.get(this.prefixedTokenName)},a.prototype.getPayload=function(){var a=this.SatellizerStorage.get(this.prefixedTokenName);if(a&&3===a.split(".").length)try{var b=a.split(".")[1],c=b.replace("-","+").replace("_","/");return JSON.parse(d(c))}catch(e){}},a.prototype.setToken=function(a){var b,c=this.SatellizerConfig.tokenRoot,d=this.SatellizerConfig.tokenName,e=a&&a.access_token;if(e&&(angular.isObject(e)&&angular.isObject(e.data)?a=e:angular.isString(e)&&(b=e)),!b&&a){var f=c&&c.split(".").reduce(function(a,b){return a[b]},a.data);b=f?f[d]:a.data&&a.data[d]}b&&this.SatellizerStorage.set(this.prefixedTokenName,b)},a.prototype.removeToken=function(){this.SatellizerStorage.remove(this.prefixedTokenName)},a.prototype.isAuthenticated=function(){var a=this.SatellizerStorage.get(this.prefixedTokenName);if(a){if(3===a.split(".").length)try{var b=a.split(".")[1],c=b.replace("-","+").replace("_","/"),d=JSON.parse(this.$window.atob(c)).exp;if("number"==typeof d)return Math.round((new Date).getTime()/1e3)<d}catch(e){return!0}return!0}return!1},a.prototype.logout=function(){return this.SatellizerStorage.remove(this.prefixedTokenName),this.$q.when()},a.prototype.setStorageType=function(a){this.SatellizerConfig.storageType=a},a.$inject=["$q","$window","SatellizerConfig","SatellizerStorage"],a}(),h=function(){function b(a,b,c){this.$http=a,this.SatellizerConfig=b,this.SatellizerShared=c}return b.prototype.login=function(b,c){var d=this;return void 0===c&&(c={}),c.url=c.url?c.url:a(this.SatellizerConfig.baseUrl,this.SatellizerConfig.loginUrl),c.data=b||c.data,c.method=c.method||"POST",c.withCredentials=c.withCredentials||this.SatellizerConfig.withCredentials,this.$http(c).then(function(a){return d.SatellizerShared.setToken(a),a})},b.prototype.signup=function(b,c){return void 0===c&&(c={}),c.url=c.url?c.url:a(this.SatellizerConfig.baseUrl,this.SatellizerConfig.signupUrl),c.data=b||c.data,c.method=c.method||"POST",c.withCredentials=c.withCredentials||this.SatellizerConfig.withCredentials,this.$http(c)},b.$inject=["$http","SatellizerConfig","SatellizerShared"],b}(),i=function(){function a(a,b,c){this.$interval=a,this.$window=b,this.$q=c,this.popup=null,this.defaults={redirectUri:null}}return a.prototype.stringifyOptions=function(a){var b=[];return angular.forEach(a,function(a,c){b.push(c+"="+a)}),b.join(",")},a.prototype.open=function(a,b,c,d,e){var f=c.width||500,g=c.height||500,h=this.stringifyOptions({width:f,height:g,top:this.$window.screenY+(this.$window.outerHeight-g)/2.5,left:this.$window.screenX+(this.$window.outerWidth-f)/2}),i=this.$window.cordova||this.$window.navigator.userAgent.indexOf("CriOS")>-1?"_blank":b;return this.popup=this.$window.open(a,i,h),this.popup&&this.popup.focus&&this.popup.focus(),e?void 0:this.$window.cordova?this.eventListener(d):("about:blank"===a&&(this.popup.location=a),this.polling(d))},a.prototype.polling=function(a){var d=this;return this.$q(function(e,f){var g=document.createElement("a");g.href=a;var h=b(g),i=d.$interval(function(){(!d.popup||d.popup.closed||void 0===d.popup.closed)&&(d.$interval.cancel(i),f(new Error("The popup window was closed")));try{var a=b(d.popup.location);if(a===h){if(d.popup.location.search||d.popup.location.hash){var g=c(d.popup.location.search.substring(1).replace(/\/$/,"")),j=c(d.popup.location.hash.substring(1).replace(/[\/$]/,"")),k=angular.extend({},g,j);k.error?f(new Error(k.error)):e(k)}else f(new Error("OAuth redirect has occurred but no query or hash parameters were found. They were either not set during the redirect, or were removed—typically by a routing library—before Satellizer could read it."));d.$interval.cancel(i),d.popup.close()}}catch(l){}},500)})},a.prototype.eventListener=function(a){var b=this;return this.$q(function(d,e){b.popup.addEventListener("loadstart",function(f){if(0===f.url.indexOf(a)){var g=document.createElement("a");if(g.href=f.url,g.search||g.hash){var h=c(g.search.substring(1).replace(/\/$/,"")),i=c(g.hash.substring(1).replace(/[\/$]/,"")),j=angular.extend({},h,i);j.error?e(new Error(j.error)):d(j),b.popup.close()}}}),b.popup.addEventListener("loaderror",function(){e(new Error("Authorization failed"))}),b.popup.addEventListener("exit",function(){e(new Error("The popup window was closed"))})})},a.$inject=["$interval","$window","$q"],a}(),j=function(){function b(a,b,c,d){this.$http=a,this.$window=b,this.SatellizerConfig=c,this.SatellizerPopup=d,this.defaults={name:null,url:null,authorizationEndpoint:null,scope:null,scopePrefix:null,scopeDelimiter:null,redirectUri:null,requiredUrlParams:null,defaultUrlParams:null,oauthType:"1.0",popupOptions:{width:null,height:null}}}return b.prototype.init=function(a,b){var c=this;angular.extend(this.defaults,a);var d=a.name,e=a.popupOptions,f=this.defaults.redirectUri;return this.$window.cordova||this.SatellizerPopup.open("about:blank",d,e,f,!0),this.getRequestToken().then(function(d){return c.openPopup(a,d).then(function(a){return c.exchangeForToken(a,b)})})},b.prototype.openPopup=function(a,b){var c=[a.authorizationEndpoint,this.buildQueryString(b.data)].join("?"),d=this.defaults.redirectUri;return this.$window.cordova?this.SatellizerPopup.open(c,a.name,a.popupOptions,d):(this.SatellizerPopup.popup.location=c,
this.SatellizerPopup.polling(d))},b.prototype.getRequestToken=function(){var b=this.SatellizerConfig.baseUrl?a(this.SatellizerConfig.baseUrl,this.defaults.url):this.defaults.url;return this.$http.post(b,this.defaults)},b.prototype.exchangeForToken=function(b,c){var d=angular.extend({},c,b),e=this.SatellizerConfig.baseUrl?a(this.SatellizerConfig.baseUrl,this.defaults.url):this.defaults.url;return this.$http.post(e,d,{withCredentials:this.SatellizerConfig.withCredentials})},b.prototype.buildQueryString=function(a){var b=[];return angular.forEach(a,function(a,c){b.push(encodeURIComponent(c)+"="+encodeURIComponent(a))}),b.join("&")},b.$inject=["$http","$window","SatellizerConfig","SatellizerPopup"],b}(),k=function(){function b(a,b,c,d,e,f,g){this.$http=a,this.$window=b,this.$timeout=c,this.$q=d,this.SatellizerConfig=e,this.SatellizerPopup=f,this.SatellizerStorage=g,this.defaults={name:null,url:null,clientId:null,authorizationEndpoint:null,redirectUri:null,scope:null,scopePrefix:null,scopeDelimiter:null,state:null,requiredUrlParams:null,defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code",responseParams:{code:"code",clientId:"clientId",redirectUri:"redirectUri"},oauthType:"2.0",popupOptions:{width:null,height:null}}}return b.camelCase=function(a){return a.replace(/([\:\-\_]+(.))/g,function(a,b,c,d){return d?c.toUpperCase():c})},b.prototype.init=function(a,b){var c=this;return this.$q(function(d,e){angular.extend(c.defaults,a);var f=c.defaults.name+"_state",g=c.defaults,h=g.name,i=g.state,j=g.popupOptions,k=g.redirectUri,l=g.responseType;"function"==typeof i?c.SatellizerStorage.set(f,i()):"string"==typeof i&&c.SatellizerStorage.set(f,i);var m=[c.defaults.authorizationEndpoint,c.buildQueryString()].join("?");c.SatellizerPopup.open(m,h,j,k).then(function(a){return"token"!==l&&m?a.state&&a.state!==c.SatellizerStorage.get(f)?e(new Error("The value returned in the state parameter does not match the state value from your original authorization code request.")):void d(c.exchangeForToken(a,b)):d(a)})["catch"](function(a){return e(a)})})},b.prototype.exchangeForToken=function(b,c){var d=this,e=angular.extend({},c);angular.forEach(this.defaults.responseParams,function(a,c){switch(c){case"code":e[a]=b.code;break;case"clientId":e[a]=d.defaults.clientId;break;case"redirectUri":e[a]=d.defaults.redirectUri;break;default:e[a]=b[c]}}),b.state&&(e.state=b.state);var f=this.SatellizerConfig.baseUrl?a(this.SatellizerConfig.baseUrl,this.defaults.url):this.defaults.url;return this.$http.post(f,e,{withCredentials:this.SatellizerConfig.withCredentials})},b.prototype.buildQueryString=function(){var a=this,c=[],d=["defaultUrlParams","requiredUrlParams","optionalUrlParams"];return angular.forEach(d,function(d){angular.forEach(a.defaults[d],function(d){var e=b.camelCase(d),f=angular.isFunction(a.defaults[d])?a.defaults[d]():a.defaults[e];if("redirect_uri"!==d||f){if("state"===d){var g=a.defaults.name+"_state";f=encodeURIComponent(a.SatellizerStorage.get(g))}"scope"===d&&Array.isArray(f)&&(f=f.join(a.defaults.scopeDelimiter),a.defaults.scopePrefix&&(f=[a.defaults.scopePrefix,f].join(a.defaults.scopeDelimiter))),c.push([d,f])}})}),c.map(function(a){return a.join("=")}).join("&")},b.$inject=["$http","$window","$timeout","$q","SatellizerConfig","SatellizerPopup","SatellizerStorage"],b}(),l=function(){function b(a,b,c,d,e,f,g,h,i,j){this.$http=a,this.$window=b,this.$timeout=c,this.$q=d,this.SatellizerConfig=e,this.SatellizerPopup=f,this.SatellizerStorage=g,this.SatellizerShared=h,this.SatellizerOAuth1=i,this.SatellizerOAuth2=j}return b.prototype.authenticate=function(a,b){var c=this;return this.$q(function(d,e){var f=c.SatellizerConfig.providers[a],g=null;switch(f.oauthType){case"1.0":g=new j(c.$http,c.$window,c.SatellizerConfig,c.SatellizerPopup);break;case"2.0":g=new k(c.$http,c.$window,c.$timeout,c.$q,c.SatellizerConfig,c.SatellizerPopup,c.SatellizerStorage);break;default:return e(new Error("Invalid OAuth Type"))}return g.init(f,b).then(function(a){f.url&&c.SatellizerShared.setToken(a),d(a)})["catch"](function(a){e(a)})})},b.prototype.unlink=function(b,c){return void 0===c&&(c={}),c.url=c.url?c.url:a(this.SatellizerConfig.baseUrl,this.SatellizerConfig.unlinkUrl),c.data={provider:b}||c.data,c.method=c.method||"POST",c.withCredentials=c.withCredentials||this.SatellizerConfig.withCredentials,this.$http(c)},b.$inject=["$http","$window","$timeout","$q","SatellizerConfig","SatellizerPopup","SatellizerStorage","SatellizerShared","SatellizerOAuth1","SatellizerOAuth2"],b}(),m=function(){function a(a,b){this.$window=a,this.SatellizerConfig=b,this.memoryStore={}}return a.prototype.get=function(a){try{return this.$window[this.SatellizerConfig.storageType].getItem(a)}catch(b){return this.memoryStore[a]}},a.prototype.set=function(a,b){try{this.$window[this.SatellizerConfig.storageType].setItem(a,b)}catch(c){this.memoryStore[a]=b}},a.prototype.remove=function(a){try{this.$window[this.SatellizerConfig.storageType].removeItem(a)}catch(b){delete this.memoryStore[a]}},a.$inject=["$window","SatellizerConfig"],a}(),n=function(){function a(a,b,c){var d=this;this.SatellizerConfig=a,this.SatellizerShared=b,this.SatellizerStorage=c,this.request=function(a){if(a.skipAuthorization)return a;if(d.SatellizerShared.isAuthenticated()&&d.SatellizerConfig.httpInterceptor()){var b=d.SatellizerConfig.tokenPrefix?[d.SatellizerConfig.tokenPrefix,d.SatellizerConfig.tokenName].join("_"):d.SatellizerConfig.tokenName,c=d.SatellizerStorage.get(b);d.SatellizerConfig.tokenHeader&&d.SatellizerConfig.tokenType&&(c=d.SatellizerConfig.tokenType+" "+c),a.headers[d.SatellizerConfig.tokenHeader]=c}return a}}return a.Factory=function(b,c,d){return new a(b,c,d)},a.$inject=["SatellizerConfig","SatellizerShared","SatellizerStorage"],a}();n.Factory.$inject=["SatellizerConfig","SatellizerShared","SatellizerStorage"];var o=function(){function a(a){this.$httpProvider=a,a.interceptors.push(n.Factory)}return a.$inject=["$httpProvider"],a}();angular.module("satellizer",[]).provider("$auth",["SatellizerConfig",function(a){return new f(a)}]).constant("SatellizerConfig",e.getConstant).service("SatellizerShared",g).service("SatellizerLocal",h).service("SatellizerPopup",i).service("SatellizerOAuth",l).service("SatellizerOAuth2",k).service("SatellizerOAuth1",j).service("SatellizerStorage",m).service("SatellizerInterceptor",n).config(["$httpProvider",function(a){return new o(a)}]);var p="satellizer";return p}),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){return v.length}function i(a){if(1!==arguments.length||a)if(a)o(a.toastId);else for(var b=0;b<v.length;b++)o(v[b].toastId)}function j(a,b,c){var d=q().iconClasses.error;return p(d,a,b,c)}function k(a,b,c){var d=q().iconClasses.info;return p(d,a,b,c)}function l(a,b,c){var d=q().iconClasses.success;return p(d,a,b,c)}function m(a,b,c){var d=q().iconClasses.warning;return p(d,a,b,c)}function n(a,b){a&&a.isOpened&&v.indexOf(a)>=0&&a.scope.refreshTimer(b)}function o(b,c){function d(a){for(var b=0;b<v.length;b++)if(v[b].toastId===a)return v[b]}function e(){return!v.length}var h=d(b);h&&!h.deleting&&(h.deleting=!0,h.isOpened=!1,a.leave(h.el).then(function(){h.scope.options.onHidden&&h.scope.options.onHidden(!!c,h),h.scope.$destroy();var a=v.indexOf(h);delete x[h.scope.message],v.splice(a,1);var b=f.maxOpened;b&&v.length>=b&&v[b-1].open.resolve(),e()&&(t.remove(),t=null,y=g.defer())}))}function p(a,b,c,d){return angular.isObject(c)&&(d=c,c=null),s({iconClass:a,message:b,optionsOverride:d,title:c})}function q(){return angular.extend({},f)}function r(b){if(t)return y.promise;t=angular.element("<div></div>"),t.attr("id",b.containerId),t.addClass(b.positionClass),t.css({"pointer-events":"auto"});var c=angular.element(document.querySelector(b.target));if(!c||!c.length)throw"Target for toasts doesn't exist";return a.enter(t,c).then(function(){y.resolve()}),y.promise}function s(c){function f(){return m.autoDismiss&&m.maxOpened&&v.length>m.maxOpened}function h(a,b,c){function d(b){return c[b]?function(){c[b](a)}:void 0}c.allowHtml?(a.scope.allowHtml=!0,a.scope.title=e.trustAsHtml(b.title),a.scope.message=e.trustAsHtml(b.message)):(a.scope.title=b.title,a.scope.message=b.message),a.scope.toastType=a.iconClass,a.scope.toastId=a.toastId,a.scope.extraData=c.extraData,a.scope.options={extendedTimeOut:c.extendedTimeOut,messageClass:c.messageClass,onHidden:c.onHidden,onShown:d("onShown"),onTap:d("onTap"),progressBar:c.progressBar,tapToDismiss:c.tapToDismiss,timeOut:c.timeOut,titleClass:c.titleClass,toastClass:c.toastClass},c.closeButton&&(a.scope.options.closeHtml=c.closeHtml)}function i(){function a(a){for(var b=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],c=0,d=b.length;d>c;c++)delete a[b[c]];return a}var b={toastId:u++,isOpened:!1,scope:d.$new(),open:g.defer()};return b.iconClass=c.iconClass,c.optionsOverride&&(angular.extend(m,a(c.optionsOverride)),b.iconClass=c.optionsOverride.iconClass||b.iconClass),h(b,c,m),b.el=j(b.scope),b}function j(a){var c=angular.element("<div toast></div>"),d=b.get("$compile");return d(c)(a)}function k(){return m.maxOpened&&v.length<=m.maxOpened||!m.maxOpened}function l(){var a=m.preventDuplicates&&c.message===w,b=m.preventOpenDuplicates&&x[c.message];return a||b?!0:(w=c.message,x[c.message]=!0,!1)}var m=q();if(!l()){var n=i();if(v.push(n),f())for(var p=v.slice(0,v.length-m.maxOpened),s=0,y=p.length;y>s;s++)o(p[s].toastId);return k()&&n.open.resolve(),n.open.promise.then(function(){r(m).then(function(){if(n.isOpened=!0,m.newestOnTop)a.enter(n.el,t).then(function(){n.scope.init()});else{var b=t[0].lastChild?angular.element(t[0].lastChild):null;a.enter(n.el,t,b).then(function(){n.scope.init()})}})}),n}}var t,u=0,v=[],w="",x={},y=g.defer(),z={active:h,clear:i,error:j,info:k,remove:o,success:l,warning:m,refreshTimer:n};return z}angular.module("toastr",[]).factory("toastr",a),a.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){"use strict";angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){"use strict";function a(a){function b(a,b,c,d){function e(){var a=(h-(new Date).getTime())/g*100;b.css("width",a+"%")}var f,g,h;d.progressBar=a,a.start=function(a){f&&clearInterval(f),g=parseFloat(a),h=(new Date).getTime()+g,f=setInterval(e,10)},a.stop=function(){f&&clearInterval(f)},a.$on("$destroy",function(){clearInterval(f)})}return{require:"^toast",templateUrl:function(){return a.templates.progressbar},link:b}}angular.module("toastr").directive("progressBar",a),a.$inject=["toastrConfig"]}(),function(){"use strict";function a(){this.progressBar=null,this.startProgressBar=function(a){this.progressBar&&this.progressBar.start(a)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("toastr").controller("ToastController",a)}(),function(){"use strict";function a(a,b,c,d){function e(c,e,f,g){function h(a){return g.startProgressBar(a),b(function(){g.stopProgressBar(),d.remove(c.toastId)},a,1)}function i(){c.progressBar=!1,g.stopProgressBar()}function j(){return c.options.closeHtml}var k;if(c.toastClass=c.options.toastClass,c.titleClass=c.options.titleClass,c.messageClass=c.options.messageClass,c.progressBar=c.options.progressBar,j()){var l=angular.element(c.options.closeHtml),m=a.get("$compile");l.addClass("toast-close-button"),l.attr("ng-click","close(true, $event)"),m(l)(c),e.children().prepend(l)}c.init=function(){c.options.timeOut&&(k=h(c.options.timeOut)),c.options.onShown&&c.options.onShown()},e.on("mouseenter",function(){i(),k&&b.cancel(k)}),c.tapToast=function(){angular.isFunction(c.options.onTap)&&c.options.onTap(),c.options.tapToDismiss&&c.close(!0)},c.close=function(a,b){b&&angular.isFunction(b.stopPropagation)&&b.stopPropagation(),d.remove(c.toastId,a)},c.refreshTimer=function(a){k&&(b.cancel(k),k=h(a||c.options.timeOut))},e.on("mouseleave",function(){(0!==c.options.timeOut||0!==c.options.extendedTimeOut)&&(c.$apply(function(){c.progressBar=c.options.progressBar}),k=h(c.options.extendedTimeOut))})}return{templateUrl:function(){return c.templates.toast},controller:"ToastController",link:e}}angular.module("toastr").directive("toast",a),a.$inject=["$injector","$interval","toastrConfig","toastr"]}(),angular.module("toastr").run(["$templateCache",function(a){a.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n'),a.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}]),function(){function a(a,b){angular.element(b).bind("resize",function(){a.$emit("resizeMsg")})}angular.module("googlechart",[]).run(a),a.$inject=["$rootScope","$window"]}(),function(){function a(){function a(a){function b(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d))for(c=0;c<g.iFormats[d].length;c++)a[d][c].columnNum<b.getNumberOfColumns()&&g.iFormats[d][c].format(b,a[d][c].columnNum)}function c(a,b,c){var d;if(angular.isArray(c[a])&&!angular.equals(c[a],h[a]))if(h[a]=c[a],g.iFormats[a]=[],"color"===a)e(c);else for(d=0;d<c[a].length;d++)g.iFormats[a].push(new b(c[a][d]))}function d(a,d,e){var g,h,i=!1;if(!angular.isDefined(d)||!angular.isDefined(a))return{requiresHtml:!1};for(g in d)if(d.hasOwnProperty(g)){if(h=f(g,e),!angular.isFunction(h))continue;c(g,h,d),("arrow"===g||"bar"===g||"color"===g)&&(i=!0)}return b(d,a),{requiresHtml:i}}function e(b){var c,d,e,f,h="color";for(c=0;c<b[h].length;c++){for(d=new a.visualization.ColorFormat,e=0;e<b[h][c].formats.length;e++)f=b[h][c].formats[e],"undefined"!=typeof f.fromBgColor&&"undefined"!=typeof f.toBgColor?d.addGradientRange(f.from,f.to,f.color,f.fromBgColor,f.toBgColor):d.addRange(f.from,f.to,f.color,f.bgcolor);g.iFormats[h].push(d)}}function f(b,c){var d=b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()+"Format";return a.visualization.hasOwnProperty(d)?google.visualization[d]:angular.isDefined(c)&&c.hasOwnProperty(b)?c[b]:void 0}var g=this,h={};g.iFormats={},g.applyFormats=d}return a}angular.module("googlechart").factory("FormatManager",a)}(),function(){function a(a,b,c,d,e,f,g,h){function i(){q()}function j(){j.triggered||void 0===s.chart?void 0!==s.chart&&(e.cancel(j.recallTimeout),j.recallTimeout=e(j,10)):(j.triggered=!0,e(n,0,!0))}function k(){r.getReadyPromise().then(j)}function l(){r.draw(),j.triggered=!1}function m(){r=new h,s.registerChartListener=r.registerChartListener,s.registerWrapperListener=r.registerWrapperListener,s.registerServiceListener=r.registerServiceListener,a.$watch(p,o,!0),q=g.$on("resizeMsg",k),a.$on("$destroy",i)}function n(){r.setup(b,s.chart.type,s.chart.data,s.chart.view,s.chart.options,s.chart.formatters,s.chart.customFormatters),e(l)}function o(){s.chart=a.$eval(c.chart),k()}function p(){var b=a.$eval(c.chart);return angular.isDefined(b)&&angular.isObject(b)?{customFormatters:b.customFormatters,data:b.data,formatters:b.formatters,options:b.options,type:b.type,view:b.view}:void 0}var q,r,s=this;m()}angular.module("googlechart").controller("GoogleChartController",a),a.$inject=["$scope","$element","$attrs","$injector","$timeout","$window","$rootScope","GoogleChartService"]}(),function(){function a(){return{restrict:"A",scope:!1,require:"googleChart",link:function(a,b,c,d){function e(b){a.$apply(function(){a.$eval(c.agcBeforeDraw,{chartWrapper:b})})}e.$inject=["chartWrapper"],d.registerServiceListener("beforeDraw",e,this)}}}angular.module("googlechart").directive("agcBeforeDraw",a)}(),function(){function a(){return{restrict:"A",scope:!1,require:"googleChart",link:function(a,b,c,d){function e(b,d,e){a.$apply(function(){a.$eval(c.agcOnClick,{args:b,chart:d,chartWrapper:e})})}e.$inject=["args","chart","chartWrapper"],d.registerChartListener("click",e,this)}}}angular.module("googlechart").directive("agcOnClick",a)}(),function(){function a(){return{restrict:"A",scope:!1,require:"googleChart",link:function(a,b,c,d){function e(b,d,e){var f={chartWrapper:b,chart:d,args:e,error:e[0],err:e[0],id:e[0].id,message:e[0].message};a.$apply(function(){a.$eval(c.agcOnError,f)})}e.$inject=["chartWrapper","chart","args"],d.registerWrapperListener("error",e,this)}}}angular.module("googlechart").directive("agcOnError",a)}(),function(){function a(){return{restrict:"A",scope:!1,require:"googleChart",link:function(a,b,c,d){function e(b,d,e){var f={chartWrapper:e,chart:d,args:b,column:b[0].column,row:b[0].row};a.$apply(function(){a.$eval(c.agcOnMouseout,f)})}e.$inject=["args","chart","chartWrapper"],d.registerChartListener("onmouseout",e,this)}}}angular.module("googlechart").directive("agcOnMouseout",a)}(),function(){function a(){return{restrict:"A",scope:!1,require:"googleChart",link:function(a,b,c,d){function e(b,d,e){var f={chartWrapper:e,chart:d,args:b,column:b[0].column,row:b[0].row};a.$apply(function(){a.$eval(c.agcOnMouseover,f)})}e.$inject=["args","chart","chartWrapper"],d.registerChartListener("onmouseover",e,this)}}}angular.module("googlechart").directive("agcOnMouseover",a)}(),function(){function a(){return{restrict:"A",scope:!1,require:"googleChart",link:function(a,b,c,d){function e(b){a.$apply(function(){a.$eval(c.agcOnReady,{chartWrapper:b})})}e.$inject=["chartWrapper"],d.registerWrapperListener("ready",e,this)}}}angular.module("googlechart").directive("agcOnReady",a)}(),function(){function a(){return{restrict:"A",scope:!1,require:"googleChart",link:function(a,b,c,d){function e(b,d){var e={selectedItems:d.getSelection()};e.selectedItem=e.selectedItems[0],e.chartWrapper=b,e.chart=d,a.$apply(function(){a.$eval(c.agcOnSelect,e)})}e.$inject=["chartWrapper","chart"],d.registerWrapperListener("select",e,this)}}}angular.module("googlechart").directive("agcOnSelect",a)}(),function(){function a(){return{restrict:"A",scope:!1,controller:"GoogleChartController"}}angular.module("googlechart").directive("googleChart",a),a.$inject=[]}(),function(){angular.module("googlechart").value("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}})}(),function(){function a(a,b,c,d){c.optionalSettings=c.optionalSettings||{};var e=b.defer(),f=function(){var b={callback:function(){var b=c.optionalSettings.callback;a.$apply(function(){e.resolve(google)}),angular.isFunction(b)&&b.call(this)}};b=angular.extend({},c.optionalSettings,b),window.google.load("visualization",c.version,b)},g=document.getElementsByTagName("head")[0],h=document.createElement("script");return h.setAttribute("type","text/javascript"),h.src=d,h.addEventListener?h.addEventListener("load",f,!1):h.onreadystatechange=function(){("loaded"===h.readyState||"complete"===h.readyState)&&(h.onreadystatechange=null,f())},g.appendChild(h),e.promise}angular.module("googlechart").factory("googleChartApiPromise",a),a.$inject=["$rootScope","$q","googleChartApiConfig","googleJsapiUrl"]}(),function(){function a(a,b,c,d){function e(){function e(a){var b;if(angular.isArray(W[a]))for(b=0;b<W[a].length;b++)W[a][b]()}function f(a){return a}function g(a){return H=a,J=!0,U.resolve(),a}function h(){angular.isDefined(K)?(K.setChartType(M),K.setDataTable(N),K.setView(O),K.setOptions(P)):(K=new H.visualization.ChartWrapper({chartType:M,dataTable:N,view:O,options:P,containerId:L[0]}),m(K,X)),S||(S=new d(H)),S.applyFormats(K.getDataTable(),Q,T).requiresHtml&&K.setOption("allowHtml",!0),V=!1}function i(a,b,c){for(var d=b?b.split("."):[];d.length&&a;){var e=d.shift();new RegExp("(.+)\\[([0-9]*)\\]").exec(e);c&&(void 0===a[e]&&(a[e]={}),0===d.length&&(a[e]=c)),a=a[e]}return a}function j(){R!==K.getChart()&&(R=K.getChart(),m(R,Y))}function k(){J=!1,U=c.defer(),I=a.then(g)["catch"](f),z("ready",j,G)}function l(a,c,d,e){var f=function(){var a={chartWrapper:K,chart:K.getChart(),args:arguments};b.invoke(d,e||this,a)};return angular.isDefined(a)&&angular.isObject(a)?(angular.isArray(a[c])||(a[c]=[]),a[c].push(f),function(){angular.isDefined(f.googleListenerHandle)&&H.visualization.events.removeListener(f.googleListenerHandle);var b=a[c].indexOf(f);a[c].splice(b,1),0===a[c].length&&(a[c]=void 0)}):void 0}function m(a,b){for(var c in b)if(b.hasOwnProperty(c)&&angular.isArray(b[c]))for(var d=0;d<b[c].length;d++)angular.isFunction(b[c][d])&&(b[c][d].googleListenerHandle=H.visualization.events.addListener(a,c,b[c][d]))}function n(){e("beforeDraw"),K.draw()}function o(){V&&(I=I.then(h)),I=I.then(n())}function p(){return K}function q(){var a=N||{};return angular.copy(a)}function r(){return L}function s(a){var b=P||{};return i(b,a)}function t(){var a=P||{};return angular.copy(a)}function u(){return U.promise}function v(){var a=O||{};return angular.copy(a)}function w(){return J}function x(a,b,c){return l(Y,a,b,c)}function y(a,b,c){return l(W,a,b,c)}function z(a,b,c){return l(X,a,b,c)}function A(a){angular.isDefined(a)&&(N=angular.copy(a),V=!0)}function B(a){angular.isElement(a)&&L!==a&&(L=a,K=null,V=!0)}function C(a,b){P=P||{},i(P,a,angular.copy(b)),V=!0}function D(a){angular.isDefined(a)&&(P=angular.copy(a),V=!0)}function E(a,b,c,d,e,f,g){L=a||L,M=b||M,N=c||N,O=d||O,P=e||P,Q=f||Q,T=g||T,I=I.then(h)}function F(a){O=angular.copy(a)}var G=this;G.draw=o,G.getChartWrapper=p,G.getData=q,G.getElement=r,G.getOption=s,G.getOptions=t,G.getView=v,G.getReadyPromise=u,G.isApiReady=w,G.registerChartListener=x,G.registerServiceListener=y,G.registerWrapperListener=z,G.setData=A,G.setElement=B,G.setOption=C,G.setOptions=D,G.setup=E,G.setView=F;var H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=!0,W={},X={},Y={};k()}return e}angular.module("googlechart").factory("GoogleChartService",a),a.$inject=["googleChartApiPromise","$injector","$q","FormatManager"]}(),function(){function a(){var a="https:",b="//www.google.com/jsapi";this.setProtocol=function(b){a=b},this.setUrl=function(a){b=a},this.$get=function(){return(a?a:"")+b}}angular.module("googlechart").provider("googleJsapiUrl",a)}(),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Plotly=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("../src/lib"),e={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var f in e){var g=f.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.addStyleRule(g,e[f])}},{"../src/lib":738}],2:[function(a,b,c){"use strict";b.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}}},{}],3:[function(a,b,c){"use strict";b.exports=a("../src/transforms/aggregate")},{"../src/transforms/aggregate":1150}],4:[function(a,b,c){"use strict";b.exports=a("../src/traces/bar")},{"../src/traces/bar":875}],5:[function(a,b,c){"use strict";b.exports=a("../src/traces/box")},{"../src/traces/box":888}],6:[function(a,b,c){"use strict";b.exports=a("../src/components/calendars")},{"../src/components/calendars":611}],7:[function(a,b,c){"use strict";b.exports=a("../src/traces/candlestick")},{"../src/traces/candlestick":897}],8:[function(a,b,c){"use strict";b.exports=a("../src/traces/carpet")},{"../src/traces/carpet":918}],9:[function(a,b,c){"use strict";b.exports=a("../src/traces/choropleth")},{"../src/traces/choropleth":933}],10:[function(a,b,c){"use strict";b.exports=a("../src/traces/contour")},{"../src/traces/contour":946}],11:[function(a,b,c){"use strict";b.exports=a("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":961}],12:[function(a,b,c){"use strict";b.exports=a("../src/core")},{"../src/core":720}],13:[function(a,b,c){"use strict";b.exports=a("../src/transforms/filter")},{"../src/transforms/filter":1151}],14:[function(a,b,c){"use strict";b.exports=a("../src/transforms/groupby")},{"../src/transforms/groupby":1152}],15:[function(a,b,c){"use strict";b.exports=a("../src/traces/heatmap")},{"../src/traces/heatmap":974}],16:[function(a,b,c){"use strict";b.exports=a("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":984}],17:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram")},{"../src/traces/histogram":995}],18:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram2d")},{"../src/traces/histogram2d":1001}],19:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1005}],20:[function(a,b,c){"use strict";var d=a("./core");d.register([a("./bar"),a("./box"),a("./heatmap"),a("./histogram"),a("./histogram2d"),a("./histogram2dcontour"),a("./pie"),a("./contour"),a("./scatterternary"),a("./violin"),a("./scatter3d"),a("./surface"),a("./mesh3d"),a("./scattergeo"),a("./choropleth"),a("./scattergl"),a("./pointcloud"),a("./heatmapgl"),a("./parcoords"),a("./scattermapbox"),a("./sankey"),a("./table"),a("./carpet"),a("./scattercarpet"),a("./contourcarpet"),a("./ohlc"),a("./candlestick")]),d.register([a("./aggregate"),a("./filter"),a("./groupby"),a("./sort")]),d.register([a("./calendars")]),b.exports=d},{"./aggregate":3,"./bar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./contour":10,"./contourcarpet":11,"./core":12,"./filter":13,"./groupby":14,"./heatmap":15,"./heatmapgl":16,"./histogram":17,"./histogram2d":18,"./histogram2dcontour":19,"./mesh3d":21,"./ohlc":22,"./parcoords":23,"./pie":24,"./pointcloud":25,"./sankey":26,"./scatter3d":27,"./scattercarpet":28,"./scattergeo":29,"./scattergl":30,"./scattermapbox":31,"./scatterternary":32,"./sort":33,"./surface":34,"./table":35,"./violin":36}],21:[function(a,b,c){"use strict";b.exports=a("../src/traces/mesh3d")},{"../src/traces/mesh3d":1011}],22:[function(a,b,c){"use strict";b.exports=a("../src/traces/ohlc")},{"../src/traces/ohlc":1016}],23:[function(a,b,c){"use strict";b.exports=a("../src/traces/parcoords")},{"../src/traces/parcoords":1025}],24:[function(a,b,c){"use strict";b.exports=a("../src/traces/pie")},{"../src/traces/pie":1035}],25:[function(a,b,c){"use strict";b.exports=a("../src/traces/pointcloud")},{"../src/traces/pointcloud":1044}],26:[function(a,b,c){"use strict";b.exports=a("../src/traces/sankey")},{"../src/traces/sankey":1050}],27:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatter3d")},{"../src/traces/scatter3d":1084}],28:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1090}],29:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattergeo")},{"../src/traces/scattergeo":1098}],30:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattergl")},{"../src/traces/scattergl":1106}],31:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1113}],32:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatterternary")},{"../src/traces/scatterternary":1121}],33:[function(a,b,c){"use strict";b.exports=a("../src/transforms/sort")},{"../src/transforms/sort":1154}],34:[function(a,b,c){"use strict";b.exports=a("../src/traces/surface")},{"../src/traces/surface":1129}],35:[function(a,b,c){"use strict";b.exports=a("../src/traces/table")},{"../src/traces/table":1137}],36:[function(a,b,c){"use strict";b.exports=a("../src/traces/violin")},{"../src/traces/violin":1144}],37:[function(a,b,c){"use strict";function d(a,b){function c(b,c,d,f){var g=1/a.clientHeight,h=g*(c-p),i=g*(d-q),k=o.flipX?1:-1,m=o.flipY?1:-1,n=Math.PI*o.rotateSpeed,s=e();if(1&b)f.shift?j.rotate(s,0,0,-h*n):j.rotate(s,k*n*h,-m*n*i,0);else if(2&b)j.pan(s,-o.translateSpeed*h*l,o.translateSpeed*i*l,0);else if(4&b){var t=o.zoomSpeed*i/window.innerHeight*(s-j.lastT())*50;j.pan(s,0,0,l*(Math.exp(t)-1))}p=c,q=d,r=f}a=a||document.body,b=b||{};var d=[.01,1/0];"distanceLimits"in b&&(d[0]=b.distanceLimits[0],d[1]=b.distanceLimits[1]),"zoomMin"in b&&(d[0]=b.zoomMin),"zoomMax"in b&&(d[1]=b.zoomMax);var j=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:d}),k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,m=a.clientWidth,n=a.clientHeight,o={view:j,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:j.modes,tick:function(){var b=e(),c=this.delay;j.idle(b-c),j.flush(b-(100+2*c));var d=b-2*c;j.recalcMatrix(d);for(var f=!0,g=j.computedMatrix,h=0;16>h;++h)f=f&&k[h]===g[h],k[h]=g[h];var i=a.clientWidth===m&&a.clientHeight===n;return m=a.clientWidth,n=a.clientHeight,f?!i:(l=Math.exp(j.computedRadius[0]),!0)},lookAt:function(a,b,c){j.lookAt(j.lastT(),a,b,c)},rotate:function(a,b,c){j.rotate(j.lastT(),a,b,c)},pan:function(a,b,c){j.pan(j.lastT(),a,b,c)},translate:function(a,b,c){j.translate(j.lastT(),a,b,c)}};Object.defineProperties(o,{matrix:{get:function(){return j.computedMatrix},set:function(a){return j.setMatrix(j.lastT(),a),j.computedMatrix},enumerable:!0},mode:{get:function(){return j.getMode()},set:function(a){return j.setMode(a),j.getMode()},enumerable:!0},center:{get:function(){return j.computedCenter},set:function(a){return j.lookAt(j.lastT(),a),j.computedCenter},enumerable:!0},eye:{get:function(){return j.computedEye},set:function(a){return j.lookAt(j.lastT(),null,a),j.computedEye},enumerable:!0},up:{get:function(){return j.computedUp},set:function(a){return j.lookAt(j.lastT(),null,null,a),j.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(a){return j.setDistance(j.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return j.getDistanceLimits(d)},set:function(a){return j.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var p=0,q=0,r={shift:!1,control:!1,alt:!1,meta:!1};return g(a,c),a.addEventListener("touchstart",function(b){var d=i(b.changedTouches[0],a);c(0,d[0],d[1],r),c(1,d[0],d[1],r)}),a.addEventListener("touchmove",function(b){var d=i(b.changedTouches[0],a);c(1,d[0],d[1],r)}),a.addEventListener("touchend",function(b){i(b.changedTouches[0],a);c(0,p,q,r)}),h(a,function(a,b,c){var d=o.flipX?1:-1,f=o.flipY?1:-1,g=e();if(Math.abs(a)>Math.abs(b))j.rotate(g,0,0,-a*d*Math.PI*o.rotateSpeed/window.innerWidth);else{var h=o.zoomSpeed*f*b/window.innerHeight*(g-j.lastT())/100;j.pan(g,0,0,l*(Math.exp(h)-1))}},!0),o}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel"),i=a("mouse-event-offset")},{"3d-view":38,"mouse-change":453,"mouse-event-offset":454,"mouse-wheel":456,"right-now":511}],38:[function(a,b,c){"use strict";function d(a,b){this._controllerNames=Object.keys(a),this._controllerList=this._controllerNames.map(function(b){return a[b]}),this._mode=b,this._active=a[b],this._active||(this._mode="turntable",this._active=a.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function e(a){a=a||{};var b=a.eye||[0,0,1],c=a.center||[0,0,0],e=a.up||[0,1,0],i=a.distanceLimits||[0,1/0],j=a.mode||"turntable",k=f(),l=g(),m=h();return k.setDistanceLimits(i[0],i[1]),k.lookAt(0,b,c,e),l.setDistanceLimits(i[0],i[1]),l.lookAt(0,b,c,e),m.setDistanceLimits(i[0],i[1]),m.lookAt(0,b,c,e),new d({turntable:k,orbit:l,matrix:m},j)}b.exports=e;var f=a("turntable-camera-controller"),g=a("orbit-camera-controller"),h=a("matrix-camera-controller"),i=d.prototype,j=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];j.forEach(function(a){for(var b=a[0],c=[],d=0;d<a[1];++d)c.push("a"+d);var e="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+a[0]+"("+c.join()+")}";i[b]=Function.apply(null,c.concat(e))}),i.recalcMatrix=function(a){this._active.recalcMatrix(a)},i.getDistance=function(a){return this._active.getDistance(a)},i.getDistanceLimits=function(a){return this._active.getDistanceLimits(a)},i.lastT=function(){return this._active.lastT()},i.setMode=function(a){if(a!==this._mode){var b=this._controllerNames.indexOf(a);if(!(0>b)){var c=this._active,d=this._controllerList[b],e=Math.max(c.lastT(),d.lastT());c.recalcMatrix(e),d.setMatrix(e,c.computedMatrix),this._active=d,this._mode=a,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},{"matrix-camera-controller":451,"orbit-camera-controller":474,"turntable-camera-controller":547}],39:[function(b,c,d){!function(e,f){"object"==typeof d&&"undefined"!=typeof c?f(d,b("d3-array"),b("d3-collection"),b("d3-interpolate")):"function"==typeof a&&a.amd?a(["exports","d3-array","d3-collection","d3-interpolate"],f):f(e.d3=e.d3||{},e.d3,e.d3,e.d3)}(this,function(a,b,c,d){"use strict";var e=function(){function a(){q.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),r.forEach(function(a,b){var c=a.source,d=a.target;"number"==typeof c&&(c=a.source=q[a.source]),"number"==typeof d&&(d=a.target=q[a.target]),a.originalIndex=b,c.sourceLinks.push(a),d.targetLinks.push(a)})}function e(){q.forEach(function(a){a.value=Math.max(b.sum(a.sourceLinks,l),b.sum(a.targetLinks,l))})}function f(){for(var a,b=q,c=0;b.length;)a=[],b.forEach(function(b){b.x=c,b.dx=n,b.sourceLinks.forEach(function(b){a.indexOf(b.target)<0&&a.push(b.target)})}),b=a,++c;g(c),h((p[0]-n)/(c-1))}function g(a){q.forEach(function(b){b.sourceLinks.length||(b.x=a-1)})}function h(a){q.forEach(function(b){b.x*=a})}function i(a){function d(){var a=b.min(i,function(a){return(p[1]-(a.length-1)*o)/b.sum(a,l)});i.forEach(function(b){b.forEach(function(b,c){b.y=c,b.dy=b.value*a})}),r.forEach(function(b){b.dy=b.value*a})}function e(a){function c(a){return k(a.source)*a.value}i.forEach(function(d){d.forEach(function(d){if(d.targetLinks.length){var e=b.sum(d.targetLinks,c)/b.sum(d.targetLinks,l);d.y+=(e-k(d))*a}})})}function f(a){function c(a){return k(a.target)*a.value}i.slice().reverse().forEach(function(d){d.forEach(function(d){if(d.sourceLinks.length){var e=b.sum(d.sourceLinks,c)/b.sum(d.sourceLinks,l);d.y+=(e-k(d))*a}})})}function g(){i.forEach(function(a){var b,c,d,e=0,f=a.length;for(a.sort(h),d=0;f>d;++d)b=a[d],c=e-b.y,c>0&&(b.y+=c),e=b.y+b.dy+o;if(c=e-o-p[1],c>0)for(e=b.y-=c,d=f-2;d>=0;--d)b=a[d],c=b.y+b.dy+o-e,c>0&&(b.y-=c),e=b.y})}function h(a,b){return a.y-b.y}var i=c.nest().key(function(a){return a.x}).sortKeys(b.ascending).entries(q).map(function(a){return a.values});d(),g();for(var j=1;a>0;--a)f(j*=.99),g(),e(j),g()}function j(){function a(a,b){return a.source.y-b.source.y||a.originalIndex-b.originalIndex}function b(a,b){return a.target.y-b.target.y||a.originalIndex-b.originalIndex}q.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),q.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function k(a){return a.y+a.dy/2}function l(a){return a.value}var m={},n=24,o=8,p=[1,1],q=[],r=[];return m.nodeWidth=function(a){return arguments.length?(n=+a,m):n},m.nodePadding=function(a){return arguments.length?(o=+a,m):o},m.nodes=function(a){return arguments.length?(q=a,m):q},m.links=function(a){return arguments.length?(r=a,m):r},m.size=function(a){return arguments.length?(p=a,m):p},m.layout=function(b){return a(),e(),f(),i(b),j(),m},m.relayout=function(){return j(),m},m.link=function(){function a(a){var c=a.source.x+a.source.dx,e=a.target.x,f=d.interpolateNumber(c,e),g=f(b),h=f(1-b),i=a.source.y+a.sy,j=i+a.dy,k=a.target.y+a.ty,l=k+a.dy;return"M"+c+","+i+"C"+g+","+i+" "+h+","+k+" "+e+","+k+"L"+e+","+l+"C"+h+","+l+" "+g+","+j+" "+c+","+j+"Z"}var b=.5;return a.curvature=function(c){return arguments.length?(b=+c,a):b},a},m};a.sankey=e,Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":115,"d3-collection":116,"d3-interpolate":120}],40:[function(a,b,c){"use strict";function d(a){var b=h.get(a),c=b&&(b._triangleBuffer.handle||b._triangleBuffer.buffer);if(!c||!a.isBuffer(c)){var d=f(a,new Float32Array([-1,-1,-1,4,4,-1]));b=g(a,[{buffer:d,type:a.FLOAT,size:2}]),b._triangleBuffer=d,h.set(a,b)}b.bind(),a.drawArrays(a.TRIANGLES,0,3),b.unbind()}var e="undefined"==typeof WeakMap?a("weak-map"):WeakMap,f=a("gl-buffer"),g=a("gl-vao"),h=new e;b.exports=d},{"gl-buffer":157,"gl-vao":272,"weak-map":568}],41:[function(a,b,c){function d(a,b,c){b="number"==typeof b?b:1,c=c||": ";var d=a.split(/\r?\n/),f=String(d.length+b-1).length;return d.map(function(a,d){var g=d+b,h=String(g).length,i=e(g,f-h);return i+c+a}).join("\n")}var e=a("pad-left");b.exports=d},{"pad-left":475}],42:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(b+1),d=0;d<a.length;++d)c[d]=a[d];for(var d=0;d<=a.length;++d){for(var e=a.length;b>=e;++e){for(var g=new Array(b),h=0;b>h;++h)g[h]=Math.pow(e+1-d,h);c[e]=g}var i=f.apply(void 0,c);if(i)return!0}return!1}function e(a){var b=a.length;if(0===b)return[];if(1===b)return[0];for(var c=a[0].length,e=[a[0]],f=[0],g=1;b>g;++g)if(e.push(a[g]),d(e,c)){if(f.push(g),f.length===c+1)return f}else e.pop();return f}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":517}],43:[function(a,b,c){"use strict";function d(a,b){return e(b).filter(function(c){for(var d=new Array(c.length),e=0;e<c.length;++e)d[e]=b[c[e]];return f(d)*a<1})}b.exports=d;var e=a("delaunay-triangulate"),f=a("circumradius")},{circumradius:88,"delaunay-triangulate":124}],44:[function(a,b,c){function d(a,b){return f(e(a,b))}b.exports=d;var e=a("alpha-complex"),f=a("simplicial-complex-boundary")},{"alpha-complex":43,"simplicial-complex-boundary":525}],45:[function(a,b,c){"use strict";function d(a,b){if(!a||null==a.length)throw Error("Argument should be an array");b=null==b?1:Math.floor(b);for(var c=Array(2*b),d=0;b>d;d++){for(var e=-(1/0),f=1/0,g=d,h=a.length;h>g;g+=b)a[g]>e&&(e=a[g]),a[g]<f&&(f=a[g]);c[d]=f,c[b+d]=e}return c}b.exports=d},{}],46:[function(a,b,c){"use strict";function d(a,b,c){if(!a||null==a.length)throw Error("Argument should be an array");null==b&&(b=1),null==c&&(c=e(a,b));for(var d=0;b>d;d++){var f=c[b+d],g=c[d],h=d,i=a.length;if(f===1/0&&g===-(1/0))for(h=d;i>h;h+=b)a[h]=a[h]===f?1:a[h]===g?0:.5;else if(f===1/0)for(h=d;i>h;h+=b)a[h]=a[h]===f?1:0;else if(g===-(1/0))for(h=d;i>h;h+=b)a[h]=a[h]===g?0:1;else{var j=f-g;for(h=d;i>h;h+=b)a[h]=(a[h]-g)/j}}return a}var e=a("array-bounds");b.exports=d},{"array-bounds":45}],47:[function(a,b,c){"use strict";var d=function(){function a(a){return!Array.isArray(a)&&null!==a&&"object"==typeof a}function b(a,b,c){for(var d=(b-a)/Math.max(c-1,1),e=[],f=0;c>f;f++)e.push(a+f*d);return e}function c(){for(var a=[].slice.call(arguments),b=a.map(function(a){return a.length}),c=Math.min.apply(null,b),d=[],e=0;c>e;e++){d[e]=[];for(var f=0;f<a.length;++f)d[e][f]=a[f][e]}return d}function d(a,b,c){for(var d=Math.min.apply(null,[a.length,b.length,c.length]),e=[],f=0;d>f;f++)e.push([a[f],b[f],c[f]]);return e}function e(a){function b(a){for(var d=0;d<a.length;d++)Array.isArray(a[d])?b(a[d],c):c+=a[d]}var c=0;return b(a,c),c}function f(a){for(var b=[],c=0;c<a.length;++c){b[c]=[];for(var d=0;d<a[c].length;++d)b[c][d]=a[c][d]}return b}function g(a){for(var b=[],c=0;c<a.length;++c)b[c]=a[c];return b}function h(a,b){if(a.length!==b.length)return!1;for(var c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function i(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3])),!b)for(var e=0;3>e;++e)c[e]=c[e]/255;return c}function j(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3]),d[4]?c[3]=parseFloat(d[4]):c[3]=1),!b)for(var e=0;3>e;++e)c[e]=c[e]/255;return c}var k={},l=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,m=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return k.isPlainObject=a,k.linspace=b,k.zip3=d,k.sum=e,k.zip=c,k.isEqual=h,k.copy2D=f,k.copy1D=g,k.str2RgbArray=i,k.str2RgbaArray=j,k};b.exports=d()},{}],48:[function(a,b,c){(function(c){"use strict";function d(a,b){if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);f>e;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return d>c?-1:c>d?1:0}function e(a){return c.Buffer&&"function"==typeof c.Buffer.isBuffer?c.Buffer.isBuffer(a):!(null==a||!a._isBuffer)}function f(a){return Object.prototype.toString.call(a)}function g(a){return e(a)?!1:"function"!=typeof c.ArrayBuffer?!1:"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a?a instanceof DataView?!0:a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1:!1}function h(a){if(u.isFunction(a)){if(x)return a.name;var b=a.toString(),c=b.match(z);return c&&c[1]}}function i(a,b){return"string"==typeof a?a.length<b?a:a.slice(0,b):a}function j(a){if(x||!u.isFunction(a))return u.inspect(a);var b=h(a),c=b?": "+b:"";return"[Function"+c+"]"}function k(a){return i(j(a.actual),128)+" "+a.operator+" "+i(j(a.expected),128)}function l(a,b,c,d,e){throw new y.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function m(a,b){a||l(a,!0,b,"==",y.ok)}function n(a,b,c,h){if(a===b)return!0;if(e(a)&&e(b))return 0===d(a,b);if(u.isDate(a)&&u.isDate(b))return a.getTime()===b.getTime();if(u.isRegExp(a)&&u.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase;if(null!==a&&"object"==typeof a||null!==b&&"object"==typeof b){if(g(a)&&g(b)&&f(a)===f(b)&&!(a instanceof Float32Array||a instanceof Float64Array))return 0===d(new Uint8Array(a.buffer),new Uint8Array(b.buffer));if(e(a)!==e(b))return!1;h=h||{actual:[],expected:[]};var i=h.actual.indexOf(a);return-1!==i&&i===h.expected.indexOf(b)?!0:(h.actual.push(a),h.expected.push(b),p(a,b,c,h))}return c?a===b:a==b}function o(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function p(a,b,c,d){if(null===a||void 0===a||null===b||void 0===b)return!1;if(u.isPrimitive(a)||u.isPrimitive(b))return a===b;if(c&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;var e=o(a),f=o(b);if(e&&!f||!e&&f)return!1;if(e)return a=w.call(a),b=w.call(b),n(a,b,c);var g,h,i=A(a),j=A(b);if(i.length!==j.length)return!1;for(i.sort(),j.sort(),h=i.length-1;h>=0;h--)if(i[h]!==j[h])return!1;for(h=i.length-1;h>=0;h--)if(g=i[h],!n(a[g],b[g],c,d))return!1;return!0}function q(a,b,c){n(a,b,!0)&&l(a,b,c,"notDeepStrictEqual",q)}function r(a,b){if(!a||!b)return!1;if("[object RegExp]"==Object.prototype.toString.call(b))return b.test(a);try{if(a instanceof b)return!0}catch(c){}return Error.isPrototypeOf(b)?!1:b.call({},a)===!0}function s(a){var b;try{a()}catch(c){b=c}return b}function t(a,b,c,d){var e;if("function"!=typeof b)throw new TypeError('"block" argument must be a function');"string"==typeof c&&(d=c,c=null),e=s(b),d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&l(e,c,"Missing expected exception"+d);var f="string"==typeof d,g=!a&&u.isError(e),h=!a&&e&&!c;if((g&&f&&r(e,c)||h)&&l(e,c,"Got unwanted exception"+d),a&&e&&c&&!r(e,c)||!a&&e)throw e}var u=a("util/"),v=Object.prototype.hasOwnProperty,w=Array.prototype.slice,x=function(){return"foo"===function(){}.name}(),y=b.exports=m,z=/\s*function\s+([^\(\s]*)\s*/;y.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=k(this),this.generatedMessage=!0);var b=a.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=h(b),f=d.indexOf("\n"+e);if(f>=0){var g=d.indexOf("\n",f+1);d=d.substring(g+1)}this.stack=d}}},u.inherits(y.AssertionError,Error),y.fail=l,y.ok=m,y.equal=function(a,b,c){a!=b&&l(a,b,c,"==",y.equal)},y.notEqual=function(a,b,c){a==b&&l(a,b,c,"!=",y.notEqual)},y.deepEqual=function(a,b,c){n(a,b,!1)||l(a,b,c,"deepEqual",y.deepEqual)},y.deepStrictEqual=function(a,b,c){n(a,b,!0)||l(a,b,c,"deepStrictEqual",y.deepStrictEqual)},y.notDeepEqual=function(a,b,c){n(a,b,!1)&&l(a,b,c,"notDeepEqual",y.notDeepEqual)},y.notDeepStrictEqual=q,y.strictEqual=function(a,b,c){a!==b&&l(a,b,c,"===",y.strictEqual)},y.notStrictEqual=function(a,b,c){a===b&&l(a,b,c,"!==",y.notStrictEqual)},y["throws"]=function(a,b,c){t(!0,a,b,c)},y.doesNotThrow=function(a,b,c){t(!1,a,b,c)},y.ifError=function(a){if(a)throw a};var A=Object.keys||function(a){var b=[];for(var c in a)v.call(a,c)&&b.push(c);return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":558}],49:[function(a,b,c){b.exports=function(a){return atob(a)}},{}],50:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0;c<a.length;++c)b+=a[c];return b}function e(a,b){for(var c=b.length,e=new Array(c+1),g=0;c>g;++g){for(var h=new Array(c+1),i=0;c>=i;++i)h[i]=a[i][g];e[g]=h}e[c]=new Array(c+1);for(var g=0;c>=g;++g)e[c][g]=1;for(var j=new Array(c+1),g=0;c>g;++g)j[g]=b[g];j[c]=1;var k=f(e,j),l=d(k[c+1]);0===l&&(l=1);for(var m=new Array(c+1),g=0;c>=g;++g)m[g]=d(k[g])/l;return m}b.exports=e;var f=a("robust-linear-solve")},{"robust-linear-solve":516}],51:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":61}],52:[function(a,b,c){"use strict";function d(a,b){return a[0].mul(b[1]).cmp(b[0].mul(a[1]))}b.exports=d},{}],53:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]),a[1].mul(b[0]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":61}],54:[function(a,b,c){"use strict";function d(a,b){if(e(a))return b?j(a,d(b)):[a[0].clone(),a[1].clone()];var c,k,l=0;if(f(a))c=a.clone();else if("string"==typeof a)c=h(a);else{if(0===a)return[g(0),g(1)];if(a===Math.floor(a))c=g(a);else{for(;a!==Math.floor(a);)a*=Math.pow(2,256),l-=256;c=g(a)}}if(e(b))c.mul(b[1]),k=b[0].clone();else if(f(b))k=b.clone();else if("string"==typeof b)k=h(b);else if(b)if(b===Math.floor(b))k=g(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),l+=256;k=g(b)}else k=g(1);return l>0?c=c.ushln(l):0>l&&(k=k.ushln(-l)),i(c,k)}var e=a("./is-rat"),f=a("./lib/is-bn"),g=a("./lib/num-to-bn"),h=a("./lib/str-to-bn"),i=a("./lib/rationalize"),j=a("./div");b.exports=d},{"./div":53,"./is-rat":55,"./lib/is-bn":59,"./lib/num-to-bn":60,"./lib/rationalize":61,"./lib/str-to-bn":62}],55:[function(a,b,c){"use strict";function d(a){return Array.isArray(a)&&2===a.length&&e(a[0])&&e(a[1])}var e=a("./lib/is-bn");b.exports=d},{"./lib/is-bn":59}],56:[function(a,b,c){"use strict";function d(a){return a.cmp(new e(0))}var e=a("bn.js");b.exports=d},{"bn.js":69}],57:[function(a,b,c){"use strict";function d(a){var b=a.length,c=a.words,d=0;if(1===b)d=c[0];else if(2===b)d=c[0]+67108864*c[1];else for(var f=0;b>f;f++){var g=c[f];d+=g*Math.pow(67108864,f)}return e(a)*d}var e=a("./bn-sign");b.exports=d},{"./bn-sign":56}],58:[function(a,b,c){"use strict";function d(a){var b=f(e.lo(a));if(32>b)return b;var c=f(e.hi(a));return c>20?52:c+32}var e=a("double-bits"),f=a("bit-twiddle").countTrailingZeros;b.exports=d},{"bit-twiddle":68,"double-bits":125}],59:[function(a,b,c){"use strict";function d(a){return a&&"object"==typeof a&&Boolean(a.words)}a("bn.js");b.exports=d},{"bn.js":69}],60:[function(a,b,c){"use strict";function d(a){var b=f.exponent(a);return 52>b?new e(a):new e(a*Math.pow(2,52-b)).ushln(b-52)}var e=a("bn.js"),f=a("double-bits");b.exports=d},{"bn.js":69,"double-bits":125}],61:[function(a,b,c){"use strict";function d(a,b){var c=f(a),d=f(b);if(0===c)return[e(0),e(1)];if(0===d)return[e(0),e(0)];0>d&&(a=a.neg(),b=b.neg());var g=a.gcd(b);return g.cmpn(1)?[a.div(g),b.div(g)]:[a,b]}var e=a("./num-to-bn"),f=a("./bn-sign");b.exports=d},{"./bn-sign":56,"./num-to-bn":60}],62:[function(a,b,c){"use strict";function d(a){return new e(a)}var e=a("bn.js");b.exports=d},{"bn.js":69}],63:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[0]),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":61}],64:[function(a,b,c){"use strict";function d(a){return e(a[0])*e(a[1])}var e=a("./lib/bn-sign");b.exports=d},{"./lib/bn-sign":56}],65:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":61}],66:[function(a,b,c){"use strict";function d(a){var b=a[0],c=a[1];if(0===b.cmpn(0))return 0;var d=b.abs().divmod(c.abs()),g=d.div,h=e(g),i=d.mod,j=b.negative!==c.negative?-1:1;if(0===i.cmpn(0))return j*h;if(h){var k=f(h)+4,l=e(i.ushln(k).divRound(c));return j*(h+l*Math.pow(2,-k))}var m=c.bitLength()-i.bitLength()+53,l=e(i.ushln(m).divRound(c));return 1023>m?j*l*Math.pow(2,-m):(l*=Math.pow(2,-1023),j*l*Math.pow(2,1023-m))}var e=a("./lib/bn-to-num"),f=a("./lib/ctz");b.exports=d},{"./lib/bn-to-num":57,"./lib/ctz":58}],67:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=["function ",a,"(a,l,h,",d.join(","),"){",f?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",e?".get(m)":"[m]"];return f?b.indexOf("c")<0?g.push(";if(x===y){return m}else if(x<=y){"):g.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):g.push(";if(",b,"){i=m;"),c?g.push("l=m+1}else{h=m-1}"):g.push("h=m-1}else{l=m+1}"),g.push("}"),f?g.push("return -1};"):g.push("return i};"),g.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],!1,e),d("B","x"+a+"y",b,["y"],!0,e),d("P","c(x,y)"+a+"0",b,["y","c"],!1,e),d("Q","c(x,y)"+a+"0",b,["y","c"],!0,e),"function dispatchBsearch",c,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",c].join(""));return f()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],68:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(0>a)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(b>a)},c.max=function(a,b){return a^(a^b)&-(b>a)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;256>b;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),
a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],69:[function(a,b,c){!function(b,c){"use strict";function d(a,b){if(!a)throw new Error(b||"Assertion failed")}function e(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function f(a,b,c){return f.isBN(a)?a:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==a&&(("le"===b||"be"===b)&&(c=b,b=10),this._init(a||0,b||10,c||"be"))))}function g(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;e>f;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&54>=g?g-49+10:g>=17&&22>=g?g-17+10:15&g}return d}function h(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;f>g;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function i(a){for(var b=new Array(a.bitLength()),c=0;c<b.length;c++){var d=c/26|0,e=c%26;b[c]=(a.words[d]&1<<e)>>>e}return b}function j(a,b,c){c.negative=b.negative^a.negative;var d=a.length+b.length|0;c.length=d,d=d-1|0;var e=0|a.words[0],f=0|b.words[0],g=e*f,h=67108863&g,i=g/67108864|0;c.words[0]=h;for(var j=1;d>j;j++){for(var k=i>>>26,l=67108863&i,m=Math.min(j,b.length-1),n=Math.max(0,j-a.length+1);m>=n;n++){var o=j-n|0;e=0|a.words[o],f=0|b.words[n],g=e*f+l,k+=g/67108864|0,l=67108863&g}c.words[j]=0|l,i=0|k}return 0!==i?c.words[j]=0|i:c.length--,c.strip()}function k(a,b,c){c.negative=b.negative^a.negative,c.length=a.length+b.length;for(var d=0,e=0,f=0;f<c.length-1;f++){var g=e;e=0;for(var h=67108863&d,i=Math.min(f,b.length-1),j=Math.max(0,f-a.length+1);i>=j;j++){var k=f-j,l=0|a.words[k],m=0|b.words[j],n=l*m,o=67108863&n;g=g+(n/67108864|0)|0,o=o+h|0,h=67108863&o,g=g+(o>>>26)|0,e+=g>>>26,g&=67108863}c.words[f]=h,d=g,g=e}return 0!==d?c.words[f]=d:c.length--,c.strip()}function l(a,b,c){var d=new m;return d.mulp(a,b,c)}function m(a,b){this.x=a,this.y=b}function n(a,b){this.name=a,this.p=new f(b,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function o(){n.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){n.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){n.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){n.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function s(a){if("string"==typeof a){var b=f._prime(a);this.m=b.p,this.prime=b}else d(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}function t(a){s.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof b?b.exports=f:c.BN=f,f.BN=f,f.wordSize=26;var u;try{u=a("buffer").Buffer}catch(v){}f.isBN=function(a){return a instanceof f?!0:null!==a&&"object"==typeof a&&a.constructor.wordSize===f.wordSize&&Array.isArray(a.words)},f.max=function(a,b){return a.cmp(b)>0?a:b},f.min=function(a,b){return a.cmp(b)<0?a:b},f.prototype._init=function(a,b,c){if("number"==typeof a)return this._initNumber(a,b,c);if("object"==typeof a)return this._initArray(a,b,c);"hex"===b&&(b=16),d(b===(0|b)&&b>=2&&36>=b),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.negative=1),this.strip(),"le"===c&&this._initArray(this.toArray(),b,c)},f.prototype._initNumber=function(a,b,c){0>a&&(this.negative=1,a=-a),67108864>a?(this.words=[67108863&a],this.length=1):4503599627370496>a?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(d(9007199254740992>a),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===c&&this._initArray(this.toArray(),b,c)},f.prototype._initArray=function(a,b,c){if(d("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f,g,h=0;if("be"===c)for(e=a.length-1,f=0;e>=0;e-=3)g=a[e]|a[e-1]<<8|a[e-2]<<16,this.words[f]|=g<<h&67108863,this.words[f+1]=g>>>26-h&67108863,h+=24,h>=26&&(h-=26,f++);else if("le"===c)for(e=0,f=0;e<a.length;e+=3)g=a[e]|a[e+1]<<8|a[e+2]<<16,this.words[f]|=g<<h&67108863,this.words[f+1]=g>>>26-h&67108863,h+=24,h>=26&&(h-=26,f++);return this.strip()},f.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var d,e,f=0;for(c=a.length-6,d=0;c>=b;c-=6)e=g(a,c,c+6),this.words[d]|=e<<f&67108863,this.words[d+1]|=e>>>26-f&4194303,f+=24,f>=26&&(f-=26,d++);c+6!==b&&(e=g(a,b,c+6),this.words[d]|=e<<f&67108863,this.words[d+1]|=e>>>26-f&4194303),this.strip()},f.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;67108863>=e;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,g=f%d,i=Math.min(f,f-g)+c,j=0,k=c;i>k;k+=d)j=h(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==g){var l=1;for(j=h(a,k,a.length,b),k=0;g>k;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},f.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.negative=this.negative,a.red=this.red},f.prototype.clone=function(){var a=new f(null);return this.copy(a),a},f.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},f.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(a,b){a=a||10,b=0|b||1;var c;if(16===a||"hex"===a){c="";for(var e=0,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,c=0!==f||g!==this.length-1?w[6-i.length]+i+c:i+c,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(c=f.toString(16)+c);c.length%b!==0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}if(a===(0|a)&&a>=2&&36>=a){var j=x[a],k=y[a];c="";var l=this.clone();for(l.negative=0;!l.isZero();){var m=l.modn(k).toString(a);l=l.idivn(k),c=l.isZero()?m+c:w[j-m.length]+m+c}for(this.isZero()&&(c="0"+c);c.length%b!==0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}d(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(a,b){return d("undefined"!=typeof u),this.toArrayLike(u,a,b)},f.prototype.toArray=function(a,b){return this.toArrayLike(Array,a,b)},f.prototype.toArrayLike=function(a,b,c){var e=this.byteLength(),f=c||Math.max(1,e);d(f>=e,"byte array longer than desired length"),d(f>0,"Requested array length <= 0"),this.strip();var g,h,i="le"===b,j=new a(f),k=this.clone();if(i){for(h=0;!k.isZero();h++)g=k.andln(255),k.iushrn(8),j[h]=g;for(;f>h;h++)j[h]=0}else{for(h=0;f-e>h;h++)j[h]=0;for(h=0;!k.isZero();h++)g=k.andln(255),k.iushrn(8),j[f-h-1]=g}return j},Math.clz32?f.prototype._countBits=function(a){return 32-Math.clz32(a)}:f.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},f.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return 0===(8191&b)&&(c+=13,b>>>=13),0===(127&b)&&(c+=7,b>>>=7),0===(15&b)&&(c+=4,b>>>=4),0===(3&b)&&(c+=2,b>>>=2),0===(1&b)&&c++,c},f.prototype.bitLength=function(){var a=this.words[this.length-1],b=this._countBits(a);return 26*(this.length-1)+b},f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},f.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return 0!==this.negative},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},f.prototype.ior=function(a){return d(0===(this.negative|a.negative)),this.iuor(a)},f.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},f.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},f.prototype.iuand=function(a){var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this.strip()},f.prototype.iand=function(a){return d(0===(this.negative|a.negative)),this.iuand(a)},f.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},f.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},f.prototype.iuxor=function(a){var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},f.prototype.ixor=function(a){return d(0===(this.negative|a.negative)),this.iuxor(a)},f.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},f.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},f.prototype.inotn=function(a){d("number"==typeof a&&a>=0);var b=0|Math.ceil(a/26),c=a%26;this._expand(b),c>0&&b--;for(var e=0;b>e;e++)this.words[e]=67108863&~this.words[e];return c>0&&(this.words[e]=~this.words[e]&67108863>>26-c),this.strip()},f.prototype.notn=function(a){return this.clone().inotn(a)},f.prototype.setn=function(a,b){d("number"==typeof a&&a>=0);var c=a/26|0,e=a%26;return this._expand(c+1),b?this.words[c]=this.words[c]|1<<e:this.words[c]=this.words[c]&~(1<<e),this.strip()},f.prototype.iadd=function(a){var b;if(0!==this.negative&&0===a.negative)return this.negative=0,b=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,b=this.isub(a),a.negative=1,b._normSign();var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++)b=(0|c.words[f])+(0|d.words[f])+e,this.words[f]=67108863&b,e=b>>>26;for(;0!==e&&f<c.length;f++)b=(0|c.words[f])+e,this.words[f]=67108863&b,e=b>>>26;if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},f.prototype.add=function(a){var b;return 0!==a.negative&&0===this.negative?(a.negative=0,b=this.sub(a),a.negative^=1,b):0===a.negative&&0!==this.negative?(this.negative=0,b=a.sub(this),this.negative=1,b):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},f.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var b=this.iadd(a);return a.negative=1,b._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var c=this.cmp(a);if(0===c)return this.negative=0,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++)b=(0|d.words[g])-(0|e.words[g])+f,f=b>>26,this.words[g]=67108863&b;for(;0!==f&&g<d.length;g++)b=(0|d.words[g])+f,f=b>>26,this.words[g]=67108863&b;if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(a){return this.clone().isub(a)};var z=function(a,b,c){var d,e,f,g=a.words,h=b.words,i=c.words,j=0,k=0|g[0],l=8191&k,m=k>>>13,n=0|g[1],o=8191&n,p=n>>>13,q=0|g[2],r=8191&q,s=q>>>13,t=0|g[3],u=8191&t,v=t>>>13,w=0|g[4],x=8191&w,y=w>>>13,z=0|g[5],A=8191&z,B=z>>>13,C=0|g[6],D=8191&C,E=C>>>13,F=0|g[7],G=8191&F,H=F>>>13,I=0|g[8],J=8191&I,K=I>>>13,L=0|g[9],M=8191&L,N=L>>>13,O=0|h[0],P=8191&O,Q=O>>>13,R=0|h[1],S=8191&R,T=R>>>13,U=0|h[2],V=8191&U,W=U>>>13,X=0|h[3],Y=8191&X,Z=X>>>13,$=0|h[4],_=8191&$,aa=$>>>13,ba=0|h[5],ca=8191&ba,da=ba>>>13,ea=0|h[6],fa=8191&ea,ga=ea>>>13,ha=0|h[7],ia=8191&ha,ja=ha>>>13,ka=0|h[8],la=8191&ka,ma=ka>>>13,na=0|h[9],oa=8191&na,pa=na>>>13;c.negative=a.negative^b.negative,c.length=19,d=Math.imul(l,P),e=Math.imul(l,Q),e=e+Math.imul(m,P)|0,f=Math.imul(m,Q);var qa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(qa>>>26)|0,qa&=67108863,d=Math.imul(o,P),e=Math.imul(o,Q),e=e+Math.imul(p,P)|0,f=Math.imul(p,Q),d=d+Math.imul(l,S)|0,e=e+Math.imul(l,T)|0,e=e+Math.imul(m,S)|0,f=f+Math.imul(m,T)|0;var ra=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ra>>>26)|0,ra&=67108863,d=Math.imul(r,P),e=Math.imul(r,Q),e=e+Math.imul(s,P)|0,f=Math.imul(s,Q),d=d+Math.imul(o,S)|0,e=e+Math.imul(o,T)|0,e=e+Math.imul(p,S)|0,f=f+Math.imul(p,T)|0,d=d+Math.imul(l,V)|0,e=e+Math.imul(l,W)|0,e=e+Math.imul(m,V)|0,f=f+Math.imul(m,W)|0;var sa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(sa>>>26)|0,sa&=67108863,d=Math.imul(u,P),e=Math.imul(u,Q),e=e+Math.imul(v,P)|0,f=Math.imul(v,Q),d=d+Math.imul(r,S)|0,e=e+Math.imul(r,T)|0,e=e+Math.imul(s,S)|0,f=f+Math.imul(s,T)|0,d=d+Math.imul(o,V)|0,e=e+Math.imul(o,W)|0,e=e+Math.imul(p,V)|0,f=f+Math.imul(p,W)|0,d=d+Math.imul(l,Y)|0,e=e+Math.imul(l,Z)|0,e=e+Math.imul(m,Y)|0,f=f+Math.imul(m,Z)|0;var ta=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ta>>>26)|0,ta&=67108863,d=Math.imul(x,P),e=Math.imul(x,Q),e=e+Math.imul(y,P)|0,f=Math.imul(y,Q),d=d+Math.imul(u,S)|0,e=e+Math.imul(u,T)|0,e=e+Math.imul(v,S)|0,f=f+Math.imul(v,T)|0,d=d+Math.imul(r,V)|0,e=e+Math.imul(r,W)|0,e=e+Math.imul(s,V)|0,f=f+Math.imul(s,W)|0,d=d+Math.imul(o,Y)|0,e=e+Math.imul(o,Z)|0,e=e+Math.imul(p,Y)|0,f=f+Math.imul(p,Z)|0,d=d+Math.imul(l,_)|0,e=e+Math.imul(l,aa)|0,e=e+Math.imul(m,_)|0,f=f+Math.imul(m,aa)|0;var ua=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ua>>>26)|0,ua&=67108863,d=Math.imul(A,P),e=Math.imul(A,Q),e=e+Math.imul(B,P)|0,f=Math.imul(B,Q),d=d+Math.imul(x,S)|0,e=e+Math.imul(x,T)|0,e=e+Math.imul(y,S)|0,f=f+Math.imul(y,T)|0,d=d+Math.imul(u,V)|0,e=e+Math.imul(u,W)|0,e=e+Math.imul(v,V)|0,f=f+Math.imul(v,W)|0,d=d+Math.imul(r,Y)|0,e=e+Math.imul(r,Z)|0,e=e+Math.imul(s,Y)|0,f=f+Math.imul(s,Z)|0,d=d+Math.imul(o,_)|0,e=e+Math.imul(o,aa)|0,e=e+Math.imul(p,_)|0,f=f+Math.imul(p,aa)|0,d=d+Math.imul(l,ca)|0,e=e+Math.imul(l,da)|0,e=e+Math.imul(m,ca)|0,f=f+Math.imul(m,da)|0;var va=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(va>>>26)|0,va&=67108863,d=Math.imul(D,P),e=Math.imul(D,Q),e=e+Math.imul(E,P)|0,f=Math.imul(E,Q),d=d+Math.imul(A,S)|0,e=e+Math.imul(A,T)|0,e=e+Math.imul(B,S)|0,f=f+Math.imul(B,T)|0,d=d+Math.imul(x,V)|0,e=e+Math.imul(x,W)|0,e=e+Math.imul(y,V)|0,f=f+Math.imul(y,W)|0,d=d+Math.imul(u,Y)|0,e=e+Math.imul(u,Z)|0,e=e+Math.imul(v,Y)|0,f=f+Math.imul(v,Z)|0,d=d+Math.imul(r,_)|0,e=e+Math.imul(r,aa)|0,e=e+Math.imul(s,_)|0,f=f+Math.imul(s,aa)|0,d=d+Math.imul(o,ca)|0,e=e+Math.imul(o,da)|0,e=e+Math.imul(p,ca)|0,f=f+Math.imul(p,da)|0,d=d+Math.imul(l,fa)|0,e=e+Math.imul(l,ga)|0,e=e+Math.imul(m,fa)|0,f=f+Math.imul(m,ga)|0;var wa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(wa>>>26)|0,wa&=67108863,d=Math.imul(G,P),e=Math.imul(G,Q),e=e+Math.imul(H,P)|0,f=Math.imul(H,Q),d=d+Math.imul(D,S)|0,e=e+Math.imul(D,T)|0,e=e+Math.imul(E,S)|0,f=f+Math.imul(E,T)|0,d=d+Math.imul(A,V)|0,e=e+Math.imul(A,W)|0,e=e+Math.imul(B,V)|0,f=f+Math.imul(B,W)|0,d=d+Math.imul(x,Y)|0,e=e+Math.imul(x,Z)|0,e=e+Math.imul(y,Y)|0,f=f+Math.imul(y,Z)|0,d=d+Math.imul(u,_)|0,e=e+Math.imul(u,aa)|0,e=e+Math.imul(v,_)|0,f=f+Math.imul(v,aa)|0,d=d+Math.imul(r,ca)|0,e=e+Math.imul(r,da)|0,e=e+Math.imul(s,ca)|0,f=f+Math.imul(s,da)|0,d=d+Math.imul(o,fa)|0,e=e+Math.imul(o,ga)|0,e=e+Math.imul(p,fa)|0,f=f+Math.imul(p,ga)|0,d=d+Math.imul(l,ia)|0,e=e+Math.imul(l,ja)|0,e=e+Math.imul(m,ia)|0,f=f+Math.imul(m,ja)|0;var xa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(xa>>>26)|0,xa&=67108863,d=Math.imul(J,P),e=Math.imul(J,Q),e=e+Math.imul(K,P)|0,f=Math.imul(K,Q),d=d+Math.imul(G,S)|0,e=e+Math.imul(G,T)|0,e=e+Math.imul(H,S)|0,f=f+Math.imul(H,T)|0,d=d+Math.imul(D,V)|0,e=e+Math.imul(D,W)|0,e=e+Math.imul(E,V)|0,f=f+Math.imul(E,W)|0,d=d+Math.imul(A,Y)|0,e=e+Math.imul(A,Z)|0,e=e+Math.imul(B,Y)|0,f=f+Math.imul(B,Z)|0,d=d+Math.imul(x,_)|0,e=e+Math.imul(x,aa)|0,e=e+Math.imul(y,_)|0,f=f+Math.imul(y,aa)|0,d=d+Math.imul(u,ca)|0,e=e+Math.imul(u,da)|0,e=e+Math.imul(v,ca)|0,f=f+Math.imul(v,da)|0,d=d+Math.imul(r,fa)|0,e=e+Math.imul(r,ga)|0,e=e+Math.imul(s,fa)|0,f=f+Math.imul(s,ga)|0,d=d+Math.imul(o,ia)|0,e=e+Math.imul(o,ja)|0,e=e+Math.imul(p,ia)|0,f=f+Math.imul(p,ja)|0,d=d+Math.imul(l,la)|0,e=e+Math.imul(l,ma)|0,e=e+Math.imul(m,la)|0,f=f+Math.imul(m,ma)|0;var ya=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ya>>>26)|0,ya&=67108863,d=Math.imul(M,P),e=Math.imul(M,Q),e=e+Math.imul(N,P)|0,f=Math.imul(N,Q),d=d+Math.imul(J,S)|0,e=e+Math.imul(J,T)|0,e=e+Math.imul(K,S)|0,f=f+Math.imul(K,T)|0,d=d+Math.imul(G,V)|0,e=e+Math.imul(G,W)|0,e=e+Math.imul(H,V)|0,f=f+Math.imul(H,W)|0,d=d+Math.imul(D,Y)|0,e=e+Math.imul(D,Z)|0,e=e+Math.imul(E,Y)|0,f=f+Math.imul(E,Z)|0,d=d+Math.imul(A,_)|0,e=e+Math.imul(A,aa)|0,e=e+Math.imul(B,_)|0,f=f+Math.imul(B,aa)|0,d=d+Math.imul(x,ca)|0,e=e+Math.imul(x,da)|0,e=e+Math.imul(y,ca)|0,f=f+Math.imul(y,da)|0,d=d+Math.imul(u,fa)|0,e=e+Math.imul(u,ga)|0,e=e+Math.imul(v,fa)|0,f=f+Math.imul(v,ga)|0,d=d+Math.imul(r,ia)|0,e=e+Math.imul(r,ja)|0,e=e+Math.imul(s,ia)|0,f=f+Math.imul(s,ja)|0,d=d+Math.imul(o,la)|0,e=e+Math.imul(o,ma)|0,e=e+Math.imul(p,la)|0,f=f+Math.imul(p,ma)|0,d=d+Math.imul(l,oa)|0,e=e+Math.imul(l,pa)|0,e=e+Math.imul(m,oa)|0,f=f+Math.imul(m,pa)|0;var za=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(za>>>26)|0,za&=67108863,d=Math.imul(M,S),e=Math.imul(M,T),e=e+Math.imul(N,S)|0,f=Math.imul(N,T),d=d+Math.imul(J,V)|0,e=e+Math.imul(J,W)|0,e=e+Math.imul(K,V)|0,f=f+Math.imul(K,W)|0,d=d+Math.imul(G,Y)|0,e=e+Math.imul(G,Z)|0,e=e+Math.imul(H,Y)|0,f=f+Math.imul(H,Z)|0,d=d+Math.imul(D,_)|0,e=e+Math.imul(D,aa)|0,e=e+Math.imul(E,_)|0,f=f+Math.imul(E,aa)|0,d=d+Math.imul(A,ca)|0,e=e+Math.imul(A,da)|0,e=e+Math.imul(B,ca)|0,f=f+Math.imul(B,da)|0,d=d+Math.imul(x,fa)|0,e=e+Math.imul(x,ga)|0,e=e+Math.imul(y,fa)|0,f=f+Math.imul(y,ga)|0,d=d+Math.imul(u,ia)|0,e=e+Math.imul(u,ja)|0,e=e+Math.imul(v,ia)|0,f=f+Math.imul(v,ja)|0,d=d+Math.imul(r,la)|0,e=e+Math.imul(r,ma)|0,e=e+Math.imul(s,la)|0,f=f+Math.imul(s,ma)|0,d=d+Math.imul(o,oa)|0,e=e+Math.imul(o,pa)|0,e=e+Math.imul(p,oa)|0,f=f+Math.imul(p,pa)|0;var Aa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,d=Math.imul(M,V),e=Math.imul(M,W),e=e+Math.imul(N,V)|0,f=Math.imul(N,W),d=d+Math.imul(J,Y)|0,e=e+Math.imul(J,Z)|0,e=e+Math.imul(K,Y)|0,f=f+Math.imul(K,Z)|0,d=d+Math.imul(G,_)|0,e=e+Math.imul(G,aa)|0,e=e+Math.imul(H,_)|0,f=f+Math.imul(H,aa)|0,d=d+Math.imul(D,ca)|0,e=e+Math.imul(D,da)|0,e=e+Math.imul(E,ca)|0,f=f+Math.imul(E,da)|0,d=d+Math.imul(A,fa)|0,e=e+Math.imul(A,ga)|0,e=e+Math.imul(B,fa)|0,f=f+Math.imul(B,ga)|0,d=d+Math.imul(x,ia)|0,e=e+Math.imul(x,ja)|0,e=e+Math.imul(y,ia)|0,f=f+Math.imul(y,ja)|0,d=d+Math.imul(u,la)|0,e=e+Math.imul(u,ma)|0,e=e+Math.imul(v,la)|0,f=f+Math.imul(v,ma)|0,d=d+Math.imul(r,oa)|0,e=e+Math.imul(r,pa)|0,e=e+Math.imul(s,oa)|0,f=f+Math.imul(s,pa)|0;var Ba=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ba>>>26)|0,Ba&=67108863,d=Math.imul(M,Y),e=Math.imul(M,Z),e=e+Math.imul(N,Y)|0,f=Math.imul(N,Z),d=d+Math.imul(J,_)|0,e=e+Math.imul(J,aa)|0,e=e+Math.imul(K,_)|0,f=f+Math.imul(K,aa)|0,d=d+Math.imul(G,ca)|0,e=e+Math.imul(G,da)|0,e=e+Math.imul(H,ca)|0,f=f+Math.imul(H,da)|0,d=d+Math.imul(D,fa)|0,e=e+Math.imul(D,ga)|0,e=e+Math.imul(E,fa)|0,f=f+Math.imul(E,ga)|0,d=d+Math.imul(A,ia)|0,e=e+Math.imul(A,ja)|0,e=e+Math.imul(B,ia)|0,f=f+Math.imul(B,ja)|0,d=d+Math.imul(x,la)|0,e=e+Math.imul(x,ma)|0,e=e+Math.imul(y,la)|0,f=f+Math.imul(y,ma)|0,d=d+Math.imul(u,oa)|0,e=e+Math.imul(u,pa)|0,e=e+Math.imul(v,oa)|0,f=f+Math.imul(v,pa)|0;var Ca=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ca>>>26)|0,Ca&=67108863,d=Math.imul(M,_),e=Math.imul(M,aa),e=e+Math.imul(N,_)|0,f=Math.imul(N,aa),d=d+Math.imul(J,ca)|0,e=e+Math.imul(J,da)|0,e=e+Math.imul(K,ca)|0,f=f+Math.imul(K,da)|0,d=d+Math.imul(G,fa)|0,e=e+Math.imul(G,ga)|0,e=e+Math.imul(H,fa)|0,f=f+Math.imul(H,ga)|0,d=d+Math.imul(D,ia)|0,e=e+Math.imul(D,ja)|0,e=e+Math.imul(E,ia)|0,f=f+Math.imul(E,ja)|0,d=d+Math.imul(A,la)|0,e=e+Math.imul(A,ma)|0,e=e+Math.imul(B,la)|0,f=f+Math.imul(B,ma)|0,d=d+Math.imul(x,oa)|0,e=e+Math.imul(x,pa)|0,e=e+Math.imul(y,oa)|0,f=f+Math.imul(y,pa)|0;var Da=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Da>>>26)|0,Da&=67108863,d=Math.imul(M,ca),e=Math.imul(M,da),e=e+Math.imul(N,ca)|0,f=Math.imul(N,da),d=d+Math.imul(J,fa)|0,e=e+Math.imul(J,ga)|0,e=e+Math.imul(K,fa)|0,f=f+Math.imul(K,ga)|0,d=d+Math.imul(G,ia)|0,e=e+Math.imul(G,ja)|0,e=e+Math.imul(H,ia)|0,f=f+Math.imul(H,ja)|0,d=d+Math.imul(D,la)|0,e=e+Math.imul(D,ma)|0,e=e+Math.imul(E,la)|0,f=f+Math.imul(E,ma)|0,d=d+Math.imul(A,oa)|0,e=e+Math.imul(A,pa)|0,e=e+Math.imul(B,oa)|0,f=f+Math.imul(B,pa)|0;var Ea=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ea>>>26)|0,Ea&=67108863,d=Math.imul(M,fa),e=Math.imul(M,ga),e=e+Math.imul(N,fa)|0,f=Math.imul(N,ga),d=d+Math.imul(J,ia)|0,e=e+Math.imul(J,ja)|0,e=e+Math.imul(K,ia)|0,f=f+Math.imul(K,ja)|0,d=d+Math.imul(G,la)|0,e=e+Math.imul(G,ma)|0,e=e+Math.imul(H,la)|0,f=f+Math.imul(H,ma)|0,d=d+Math.imul(D,oa)|0,e=e+Math.imul(D,pa)|0,e=e+Math.imul(E,oa)|0,f=f+Math.imul(E,pa)|0;var Fa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,d=Math.imul(M,ia),e=Math.imul(M,ja),e=e+Math.imul(N,ia)|0,f=Math.imul(N,ja),d=d+Math.imul(J,la)|0,e=e+Math.imul(J,ma)|0,e=e+Math.imul(K,la)|0,f=f+Math.imul(K,ma)|0,d=d+Math.imul(G,oa)|0,e=e+Math.imul(G,pa)|0,e=e+Math.imul(H,oa)|0,f=f+Math.imul(H,pa)|0;var Ga=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ga>>>26)|0,Ga&=67108863,d=Math.imul(M,la),e=Math.imul(M,ma),e=e+Math.imul(N,la)|0,f=Math.imul(N,ma),d=d+Math.imul(J,oa)|0,e=e+Math.imul(J,pa)|0,e=e+Math.imul(K,oa)|0,f=f+Math.imul(K,pa)|0;var Ha=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ha>>>26)|0,Ha&=67108863,d=Math.imul(M,oa),e=Math.imul(M,pa),e=e+Math.imul(N,oa)|0,f=Math.imul(N,pa);var Ia=(j+d|0)+((8191&e)<<13)|0;return j=(f+(e>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,i[0]=qa,i[1]=ra,i[2]=sa,i[3]=ta,i[4]=ua,i[5]=va,i[6]=wa,i[7]=xa,i[8]=ya,i[9]=za,i[10]=Aa,i[11]=Ba,i[12]=Ca,i[13]=Da,i[14]=Ea,i[15]=Fa,i[16]=Ga,i[17]=Ha,i[18]=Ia,0!==j&&(i[19]=j,c.length++),c};Math.imul||(z=j),f.prototype.mulTo=function(a,b){var c,d=this.length+a.length;return c=10===this.length&&10===a.length?z(this,a,b):63>d?j(this,a,b):1024>d?k(this,a,b):l(this,a,b)},m.prototype.makeRBT=function(a){for(var b=new Array(a),c=f.prototype._countBits(a)-1,d=0;a>d;d++)b[d]=this.revBin(d,c,a);return b},m.prototype.revBin=function(a,b,c){if(0===a||a===c-1)return a;for(var d=0,e=0;b>e;e++)d|=(1&a)<<b-e-1,a>>=1;return d},m.prototype.permute=function(a,b,c,d,e,f){for(var g=0;f>g;g++)d[g]=b[a[g]],e[g]=c[a[g]]},m.prototype.transform=function(a,b,c,d,e,f){this.permute(f,a,b,c,d,e);for(var g=1;e>g;g<<=1)for(var h=g<<1,i=Math.cos(2*Math.PI/h),j=Math.sin(2*Math.PI/h),k=0;e>k;k+=h)for(var l=i,m=j,n=0;g>n;n++){var o=c[k+n],p=d[k+n],q=c[k+n+g],r=d[k+n+g],s=l*q-m*r;r=l*r+m*q,q=s,c[k+n]=o+q,d[k+n]=p+r,c[k+n+g]=o-q,d[k+n+g]=p-r,n!==h&&(s=i*l-j*m,m=i*m+j*l,l=s)}},m.prototype.guessLen13b=function(a,b){var c=1|Math.max(b,a),d=1&c,e=0;for(c=c/2|0;c;c>>>=1)e++;return 1<<e+1+d},m.prototype.conjugate=function(a,b,c){if(!(1>=c))for(var d=0;c/2>d;d++){var e=a[d];a[d]=a[c-d-1],a[c-d-1]=e,e=b[d],b[d]=-b[c-d-1],b[c-d-1]=-e}},m.prototype.normalize13b=function(a,b){for(var c=0,d=0;b/2>d;d++){var e=8192*Math.round(a[2*d+1]/b)+Math.round(a[2*d]/b)+c;a[d]=67108863&e,c=67108864>e?0:e/67108864|0}return a},m.prototype.convert13b=function(a,b,c,e){for(var f=0,g=0;b>g;g++)f+=0|a[g],c[2*g]=8191&f,f>>>=13,c[2*g+1]=8191&f,f>>>=13;for(g=2*b;e>g;++g)c[g]=0;d(0===f),d(0===(-8192&f))},m.prototype.stub=function(a){for(var b=new Array(a),c=0;a>c;c++)b[c]=0;return b},m.prototype.mulp=function(a,b,c){var d=2*this.guessLen13b(a.length,b.length),e=this.makeRBT(d),f=this.stub(d),g=new Array(d),h=new Array(d),i=new Array(d),j=new Array(d),k=new Array(d),l=new Array(d),m=c.words;m.length=d,this.convert13b(a.words,a.length,g,d),this.convert13b(b.words,b.length,j,d),this.transform(g,f,h,i,d,e),this.transform(j,f,k,l,d,e);for(var n=0;d>n;n++){var o=h[n]*k[n]-i[n]*l[n];i[n]=h[n]*l[n]+i[n]*k[n],h[n]=o}return this.conjugate(h,i,d),this.transform(h,i,m,f,d,e),this.conjugate(m,f,d),this.normalize13b(m,d),c.negative=a.negative^b.negative,c.length=a.length+b.length,c.strip()},f.prototype.mul=function(a){var b=new f(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},f.prototype.mulf=function(a){var b=new f(null);return b.words=new Array(this.length+a.length),l(this,a,b)},f.prototype.imul=function(a){return this.clone().mulTo(a,this)},f.prototype.imuln=function(a){d("number"==typeof a),d(67108864>a);for(var b=0,c=0;c<this.length;c++){var e=(0|this.words[c])*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[c]=67108863&f}return 0!==b&&(this.words[c]=b,this.length++),this},f.prototype.muln=function(a){return this.clone().imuln(a)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(a){var b=i(a);if(0===b.length)return new f(1);for(var c=this,d=0;d<b.length&&0===b[d];d++,c=c.sqr());if(++d<b.length)for(var e=c.sqr();d<b.length;d++,e=e.sqr())0!==b[d]&&(c=c.mul(e));return c},f.prototype.iushln=function(a){d("number"==typeof a&&a>=0);var b,c=a%26,e=(a-c)/26,f=67108863>>>26-c<<26-c;if(0!==c){var g=0;for(b=0;b<this.length;b++){var h=this.words[b]&f,i=(0|this.words[b])-h<<c;this.words[b]=i|g,g=h>>>26-c}g&&(this.words[b]=g,this.length++)}if(0!==e){for(b=this.length-1;b>=0;b--)this.words[b+e]=this.words[b];for(b=0;e>b;b++)this.words[b]=0;this.length+=e}return this.strip()},f.prototype.ishln=function(a){return d(0===this.negative),this.iushln(a)},f.prototype.iushrn=function(a,b,c){d("number"==typeof a&&a>=0);var e;e=b?(b-b%26)/26:0;var f=a%26,g=Math.min((a-f)/26,this.length),h=67108863^67108863>>>f<<f,i=c;if(e-=g,e=Math.max(0,e),i){for(var j=0;g>j;j++)i.words[j]=this.words[j];i.length=g}if(0===g);else if(this.length>g)for(this.length-=g,j=0;j<this.length;j++)this.words[j]=this.words[j+g];else this.words[0]=0,this.length=1;var k=0;for(j=this.length-1;j>=0&&(0!==k||j>=e);j--){var l=0|this.words[j];this.words[j]=k<<26-f|l>>>f,k=l&h}return i&&0!==k&&(i.words[i.length++]=k),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(a,b,c){return d(0===this.negative),this.iushrn(a,b,c)},f.prototype.shln=function(a){return this.clone().ishln(a)},f.prototype.ushln=function(a){return this.clone().iushln(a)},f.prototype.shrn=function(a){return this.clone().ishrn(a)},f.prototype.ushrn=function(a){return this.clone().iushrn(a)},f.prototype.testn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26,e=1<<b;if(this.length<=c)return!1;var f=this.words[c];return!!(f&e)},f.prototype.imaskn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26;if(d(0===this.negative,"imaskn works only with positive numbers"),this.length<=c)return this;if(0!==b&&c++,this.length=Math.min(c,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},f.prototype.maskn=function(a){return this.clone().imaskn(a)},f.prototype.iaddn=function(a){return d("number"==typeof a),d(67108864>a),0>a?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},f.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},f.prototype.isubn=function(a){if(d("number"==typeof a),d(67108864>a),0>a)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},f.prototype.addn=function(a){return this.clone().iaddn(a)},f.prototype.subn=function(a){return this.clone().isubn(a)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(a,b,c){var e,f=a.length+c;this._expand(f);var g,h=0;for(e=0;e<a.length;e++){g=(0|this.words[e+c])+h;var i=(0|a.words[e])*b;g-=67108863&i,h=(g>>26)-(i/67108864|0),this.words[e+c]=67108863&g}for(;e<this.length-c;e++)g=(0|this.words[e+c])+h,h=g>>26,this.words[e+c]=67108863&g;if(0===h)return this.strip();for(d(-1===h),h=0,e=0;e<this.length;e++)g=-(0|this.words[e])+h,h=g>>26,this.words[e]=67108863&g;return this.negative=1,this.strip()},f.prototype._wordDiv=function(a,b){var c=this.length-a.length,d=this.clone(),e=a,g=0|e.words[e.length-1],h=this._countBits(g);c=26-h,0!==c&&(e=e.ushln(c),d.iushln(c),g=0|e.words[e.length-1]);var i,j=d.length-e.length;if("mod"!==b){i=new f(null),i.length=j+1,i.words=new Array(i.length);for(var k=0;k<i.length;k++)i.words[k]=0}var l=d.clone()._ishlnsubmul(e,1,j);0===l.negative&&(d=l,i&&(i.words[j]=1));for(var m=j-1;m>=0;m--){var n=67108864*(0|d.words[e.length+m])+(0|d.words[e.length+m-1]);for(n=Math.min(n/g|0,67108863),d._ishlnsubmul(e,n,m);0!==d.negative;)n--,d.negative=0,d._ishlnsubmul(e,1,m),d.isZero()||(d.negative^=1);i&&(i.words[m]=n)}return i&&i.strip(),d.strip(),"div"!==b&&0!==c&&d.iushrn(c),{div:i||null,mod:d}},f.prototype.divmod=function(a,b,c){if(d(!a.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var e,g,h;return 0!==this.negative&&0===a.negative?(h=this.neg().divmod(a,b),"mod"!==b&&(e=h.div.neg()),"div"!==b&&(g=h.mod.neg(),
c&&0!==g.negative&&g.iadd(a)),{div:e,mod:g}):0===this.negative&&0!==a.negative?(h=this.divmod(a.neg(),b),"mod"!==b&&(e=h.div.neg()),{div:e,mod:h.mod}):0!==(this.negative&a.negative)?(h=this.neg().divmod(a.neg(),b),"div"!==b&&(g=h.mod.neg(),c&&0!==g.negative&&g.isub(a)),{div:h.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new f(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new f(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new f(this.modn(a.words[0]))}:this._wordDiv(a,b)},f.prototype.div=function(a){return this.divmod(a,"div",!1).div},f.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},f.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},f.prototype.divRound=function(a){var b=this.divmod(a);if(b.mod.isZero())return b.div;var c=0!==b.div.negative?b.mod.isub(a):b.mod,d=a.ushrn(1),e=a.andln(1),f=c.cmp(d);return 0>f||1===e&&0===f?b.div:0!==b.div.negative?b.div.isubn(1):b.div.iaddn(1)},f.prototype.modn=function(a){d(67108863>=a);for(var b=(1<<26)%a,c=0,e=this.length-1;e>=0;e--)c=(b*c+(0|this.words[e]))%a;return c},f.prototype.idivn=function(a){d(67108863>=a);for(var b=0,c=this.length-1;c>=0;c--){var e=(0|this.words[c])+67108864*b;this.words[c]=e/a|0,b=e%a}return this.strip()},f.prototype.divn=function(a){return this.clone().idivn(a)},f.prototype.egcd=function(a){d(0===a.negative),d(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var e=new f(1),g=new f(0),h=new f(0),i=new f(1),j=0;b.isEven()&&c.isEven();)b.iushrn(1),c.iushrn(1),++j;for(var k=c.clone(),l=b.clone();!b.isZero();){for(var m=0,n=1;0===(b.words[0]&n)&&26>m;++m,n<<=1);if(m>0)for(b.iushrn(m);m-->0;)(e.isOdd()||g.isOdd())&&(e.iadd(k),g.isub(l)),e.iushrn(1),g.iushrn(1);for(var o=0,p=1;0===(c.words[0]&p)&&26>o;++o,p<<=1);if(o>0)for(c.iushrn(o);o-->0;)(h.isOdd()||i.isOdd())&&(h.iadd(k),i.isub(l)),h.iushrn(1),i.iushrn(1);b.cmp(c)>=0?(b.isub(c),e.isub(h),g.isub(i)):(c.isub(b),h.isub(e),i.isub(g))}return{a:h,b:i,gcd:c.iushln(j)}},f.prototype._invmp=function(a){d(0===a.negative),d(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var e=new f(1),g=new f(0),h=c.clone();b.cmpn(1)>0&&c.cmpn(1)>0;){for(var i=0,j=1;0===(b.words[0]&j)&&26>i;++i,j<<=1);if(i>0)for(b.iushrn(i);i-->0;)e.isOdd()&&e.iadd(h),e.iushrn(1);for(var k=0,l=1;0===(c.words[0]&l)&&26>k;++k,l<<=1);if(k>0)for(c.iushrn(k);k-->0;)g.isOdd()&&g.iadd(h),g.iushrn(1);b.cmp(c)>=0?(b.isub(c),e.isub(g)):(c.isub(b),g.isub(e))}var m;return m=0===b.cmpn(1)?e:g,m.cmpn(0)<0&&m.iadd(a),m},f.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var b=this.clone(),c=a.clone();b.negative=0,c.negative=0;for(var d=0;b.isEven()&&c.isEven();d++)b.iushrn(1),c.iushrn(1);for(;;){for(;b.isEven();)b.iushrn(1);for(;c.isEven();)c.iushrn(1);var e=b.cmp(c);if(0>e){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.iushln(d)},f.prototype.invm=function(a){return this.egcd(a).a.umod(a)},f.prototype.isEven=function(){return 0===(1&this.words[0])},f.prototype.isOdd=function(){return 1===(1&this.words[0])},f.prototype.andln=function(a){return this.words[0]&a},f.prototype.bincn=function(a){d("number"==typeof a);var b=a%26,c=(a-b)/26,e=1<<b;if(this.length<=c)return this._expand(c+1),this.words[c]|=e,this;for(var f=e,g=c;0!==f&&g<this.length;g++){var h=0|this.words[g];h+=f,f=h>>>26,h&=67108863,this.words[g]=h}return 0!==f&&(this.words[g]=f,this.length++),this},f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},f.prototype.cmpn=function(a){var b=0>a;if(0!==this.negative&&!b)return-1;if(0===this.negative&&b)return 1;this.strip();var c;if(this.length>1)c=1;else{b&&(a=-a),d(67108863>=a,"Number is too big");var e=0|this.words[0];c=e===a?0:a>e?-1:1}return 0!==this.negative?0|-c:c},f.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var b=this.ucmp(a);return 0!==this.negative?0|-b:b},f.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=0|this.words[c],e=0|a.words[c];if(d!==e){e>d?b=-1:d>e&&(b=1);break}}return b},f.prototype.gtn=function(a){return 1===this.cmpn(a)},f.prototype.gt=function(a){return 1===this.cmp(a)},f.prototype.gten=function(a){return this.cmpn(a)>=0},f.prototype.gte=function(a){return this.cmp(a)>=0},f.prototype.ltn=function(a){return-1===this.cmpn(a)},f.prototype.lt=function(a){return-1===this.cmp(a)},f.prototype.lten=function(a){return this.cmpn(a)<=0},f.prototype.lte=function(a){return this.cmp(a)<=0},f.prototype.eqn=function(a){return 0===this.cmpn(a)},f.prototype.eq=function(a){return 0===this.cmp(a)},f.red=function(a){return new s(a)},f.prototype.toRed=function(a){return d(!this.red,"Already a number in reduction context"),d(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},f.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(a){return this.red=a,this},f.prototype.forceRed=function(a){return d(!this.red,"Already a number in reduction context"),this._forceRed(a)},f.prototype.redAdd=function(a){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},f.prototype.redIAdd=function(a){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},f.prototype.redSub=function(a){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},f.prototype.redISub=function(a){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},f.prototype.redShl=function(a){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},f.prototype.redMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},f.prototype.redIMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},f.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(a){return d(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var A={k256:null,p224:null,p192:null,p25519:null};n.prototype._tmp=function(){var a=new f(null);return a.words=new Array(Math.ceil(this.n/13)),a},n.prototype.ireduce=function(a){var b,c=a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip(),c},n.prototype.split=function(a,b){a.iushrn(this.n,0,b)},n.prototype.imulK=function(a){return a.imul(this.k)},e(o,n),o.prototype.split=function(a,b){for(var c=4194303,d=Math.min(a.length,9),e=0;d>e;e++)b.words[e]=a.words[e];if(b.length=d,a.length<=9)return a.words[0]=0,void(a.length=1);var f=a.words[9];for(b.words[b.length++]=f&c,e=10;e<a.length;e++){var g=0|a.words[e];a.words[e-10]=(g&c)<<4|f>>>22,f=g}f>>>=22,a.words[e-10]=f,0===f&&a.length>10?a.length-=10:a.length-=9},o.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b=0,c=0;c<a.length;c++){var d=0|a.words[c];b+=977*d,a.words[c]=67108863&b,b=64*d+(b/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},e(p,n),e(q,n),e(r,n),r.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*(0|a.words[c])+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},f._prime=function B(a){if(A[a])return A[a];var B;if("k256"===a)B=new o;else if("p224"===a)B=new p;else if("p192"===a)B=new q;else{if("p25519"!==a)throw new Error("Unknown prime "+a);B=new r}return A[a]=B,B},s.prototype._verify1=function(a){d(0===a.negative,"red works only with positives"),d(a.red,"red works only with red numbers")},s.prototype._verify2=function(a,b){d(0===(a.negative|b.negative),"red works only with positives"),d(a.red&&a.red===b.red,"red works only with red numbers")},s.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},s.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},s.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},s.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},s.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},s.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},s.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.ushln(b))},s.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},s.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},s.prototype.isqr=function(a){return this.imul(a,a.clone())},s.prototype.sqr=function(a){return this.mul(a,a)},s.prototype.sqrt=function(a){if(a.isZero())return a.clone();var b=this.m.andln(3);if(d(b%2===1),3===b){var c=this.m.add(new f(1)).iushrn(2);return this.pow(a,c)}for(var e=this.m.subn(1),g=0;!e.isZero()&&0===e.andln(1);)g++,e.iushrn(1);d(!e.isZero());var h=new f(1).toRed(this),i=h.redNeg(),j=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new f(2*k*k).toRed(this);0!==this.pow(k,j).cmp(i);)k.redIAdd(i);for(var l=this.pow(k,e),m=this.pow(a,e.addn(1).iushrn(1)),n=this.pow(a,e),o=g;0!==n.cmp(h);){for(var p=n,q=0;0!==p.cmp(h);q++)p=p.redSqr();d(o>q);var r=this.pow(l,new f(1).iushln(o-q-1));m=m.redMul(r),l=r.redSqr(),n=n.redMul(l),o=q}return m},s.prototype.invm=function(a){var b=a._invmp(this.m);return 0!==b.negative?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},s.prototype.pow=function(a,b){if(b.isZero())return new f(1);if(0===b.cmpn(1))return a.clone();var c=4,d=new Array(1<<c);d[0]=new f(1).toRed(this),d[1]=a;for(var e=2;e<d.length;e++)d[e]=this.mul(d[e-1],a);var g=d[0],h=0,i=0,j=b.bitLength()%26;for(0===j&&(j=26),e=b.length-1;e>=0;e--){for(var k=b.words[e],l=j-1;l>=0;l--){var m=k>>l&1;g!==d[0]&&(g=this.sqr(g)),0!==m||0!==h?(h<<=1,h|=m,i++,(i===c||0===e&&0===l)&&(g=this.mul(g,d[h]),i=0,h=0)):i=0}j=26}return g},s.prototype.convertTo=function(a){var b=a.umod(this.m);return b===a?b.clone():b},s.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},f.mont=function(a){return new t(a)},e(t,s),t.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},t.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},t.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},t.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new f(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),g=e;return e.cmp(this.m)>=0?g=e.isub(this.m):e.cmpn(0)<0&&(g=e.iadd(this.m)),g._forceRed(this)},t.prototype.invm=function(a){var b=this.imod(a._invmp(this.m).mul(this.r2));return b._forceRed(this)}}("undefined"==typeof b||b,this)},{}],70:[function(a,b,c){"use strict";function d(a){var b,c,d,e=a.length,f=0;for(b=0;e>b;++b)f+=a[b].length;var g=new Array(f),h=0;for(b=0;e>b;++b){var i=a[b],j=i.length;for(c=0;j>c;++c){var k=g[h++]=new Array(j-1),l=0;for(d=0;j>d;++d)d!==c&&(k[l++]=i[d]);if(1&c){var m=k[1];k[1]=k[0],k[0]=m}}}return g}b.exports=d},{}],71:[function(a,b,c){"use strict";function d(a,b){for(var c=0;a>c;++c)if(!(b[c]<=b[c+a]))return!0;return!1}function e(a,b,c,e){for(var f=0,g=0,h=0,i=a.length;i>h;++h){var j=a[h];if(!d(b,j)){for(var k=0;2*b>k;++k)c[f++]=j[k];e[g++]=h}}return g}function f(a,b,c,d){var f=a.length,g=b.length;if(!(0>=f||0>=g)){var h=a[0].length>>>1;if(!(0>=h)){var i,j=l.mallocDouble(2*h*f),k=l.mallocInt32(f);if(f=e(a,h,j,k),f>0){if(1===h&&d)m.init(f),i=m.sweepComplete(h,c,0,f,j,k,0,f,j,k);else{var o=l.mallocDouble(2*h*g),p=l.mallocInt32(g);g=e(b,h,o,p),g>0&&(m.init(f+g),i=1===h?m.sweepBipartite(h,c,0,f,j,k,0,g,o,p):n(h,c,d,f,j,k,g,o,p),l.free(o),l.free(p))}l.free(j),l.free(k)}return i}}}function g(a,b){k.push([a,b])}function h(a){return k=[],f(a,a,g,!0),k}function i(a,b){return k=[],f(a,b,g,!1),k}function j(a,b,c){switch(arguments.length){case 1:return h(a);case 2:return"function"==typeof b?f(a,a,b,!0):i(a,b);case 3:return f(a,b,c,!1);default:throw new Error("box-intersect: Invalid arguments")}}b.exports=j;var k,l=a("typedarray-pool"),m=a("./lib/sweep"),n=a("./lib/intersect")},{"./lib/intersect":73,"./lib/sweep":77,"typedarray-pool":550}],72:[function(a,b,c){"use strict";function d(a,b,c){var d="bruteForce"+(a?"Red":"Blue")+(b?"Flip":"")+(c?"Full":""),e=["function ",d,"(",w.join(),"){","var ",j,"=2*",f,";"],i="for(var i="+k+","+o+"="+j+"*"+k+";i<"+l+";++i,"+o+"+="+j+"){var x0="+m+"["+g+"+"+o+"],x1="+m+"["+g+"+"+o+"+"+f+"],xi="+n+"[i];",x="for(var j="+p+","+t+"="+j+"*"+p+";j<"+q+";++j,"+t+"+="+j+"){var y0="+r+"["+g+"+"+t+"],"+(c?"y1="+r+"["+g+"+"+t+"+"+f+"],":"")+"yi="+s+"[j];";return a?e.push(i,v,":",x):e.push(x,v,":",i),c?e.push("if(y1<x0||x1<y0)continue;"):b?e.push("if(y0<=x0||x1<y0)continue;"):e.push("if(y0<x0||x1<y0)continue;"),e.push("for(var k="+g+"+1;k<"+f+";++k){var r0="+m+"[k+"+o+"],r1="+m+"[k+"+f+"+"+o+"],b0="+r+"[k+"+t+"],b1="+r+"[k+"+f+"+"+t+"];if(r1<b0||b1<r0)continue "+v+";}var "+u+"="+h+"("),b?e.push("yi,xi"):e.push("xi,yi"),e.push(");if("+u+"!==void 0)return "+u+";}}}"),{name:d,code:e.join("")}}function e(a){function b(b,c){var f=d(b,c,a);e.push(f.code),g.push("return "+f.name+"("+w.join()+");")}var c="bruteForce"+(a?"Full":"Partial"),e=[],f=w.slice();a||f.splice(3,0,i);var g=["function "+c+"("+f.join()+"){"];g.push("if("+l+"-"+k+">"+q+"-"+p+"){"),a?(b(!0,!1),g.push("}else{"),b(!1,!1)):(g.push("if("+i+"){"),b(!0,!0),g.push("}else{"),b(!0,!1),g.push("}}else{if("+i+"){"),b(!1,!0),g.push("}else{"),b(!1,!1),g.push("}")),g.push("}}return "+c);var h=e.join("")+g.join(""),j=new Function(h);return j()}var f="d",g="ax",h="vv",i="fp",j="es",k="rs",l="re",m="rb",n="ri",o="rp",p="bs",q="be",r="bb",s="bi",t="bp",u="rv",v="Q",w=[f,g,h,k,l,m,n,p,q,r,s];c.partial=e(!1),c.full=e(!0)},{}],73:[function(a,b,c){"use strict";function d(a,b){var c=8*j.log2(b+1)*(a+1)|0,d=j.nextPow2(z*c);C.length<d&&(i.free(C),C=i.mallocInt32(d));var e=j.nextPow2(A*c);e>D&&(i.free(D),D=i.mallocDouble(e))}function e(a,b,c,d,e,f,g,h,i){var j=z*a;C[j]=b,C[j+1]=c,C[j+2]=d,C[j+3]=e,C[j+4]=f,C[j+5]=g;var k=A*a;D[k]=h,D[k+1]=i}function f(a,b,c,d,e,f,g,h,i,j,k){var l=2*a,m=i*l,n=j[m+b];a:for(var o=e,p=e*l;f>o;++o,p+=l){var q=g[p+b],r=g[p+b+a];if(!(q>n||n>r||d&&n===q)){for(var s=h[o],t=b+1;a>t;++t){var q=g[p+t],r=g[p+t+a],u=j[m+t],v=j[m+t+a];if(u>r||q>v)continue a}var w;if(w=d?c(k,s):c(s,k),void 0!==w)return w}}}function g(a,b,c,d,e,f,g,h,i,j){var k=2*a,l=h*k,m=i[l+b];a:for(var n=d,o=d*k;e>n;++n,o+=k){var p=g[n];if(p!==j){var q=f[o+b],r=f[o+b+a];if(!(q>m||m>r)){for(var s=b+1;a>s;++s){var q=f[o+s],r=f[o+s+a],t=i[l+s],u=i[l+s+a];if(t>r||q>u)continue a}var v=c(p,j);if(void 0!==v)return v}}}}function h(a,b,c,h,i,j,k,p,B){d(a,h+k);var E,F=0,G=2*a;for(e(F++,0,0,h,0,k,c?16:0,-(1/0),1/0),c||e(F++,0,0,k,0,h,1,-(1/0),1/0);F>0;){F-=1;var H=F*z,I=C[H],J=C[H+1],K=C[H+2],L=C[H+3],M=C[H+4],N=C[H+5],O=F*A,P=D[O],Q=D[O+1],R=1&N,S=!!(16&N),T=i,U=j,V=p,W=B;if(R&&(T=p,U=B,V=i,W=j),!(2&N&&(K=v(a,I,J,K,T,U,Q),J>=K)||4&N&&(J=w(a,I,J,K,T,U,P),J>=K))){var X=K-J,Y=M-L;if(S){if(s>a*X*(X+Y)){if(E=n.scanComplete(a,I,b,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}}else{if(a*Math.min(X,Y)<q){if(E=l(a,I,b,R,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}if(r>a*X*Y){if(E=n.scanBipartite(a,I,b,R,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}}var Z=t(a,I,J,K,T,U,P,Q);if(Z>J)if(q>a*(Z-J)){if(E=m(a,I+1,b,J,Z,T,U,L,M,V,W),void 0!==E)return E}else if(I===a-2){if(E=R?n.sweepBipartite(a,b,L,M,V,W,J,Z,T,U):n.sweepBipartite(a,b,J,Z,T,U,L,M,V,W),void 0!==E)return E}else e(F++,I+1,J,Z,L,M,R,-(1/0),1/0),e(F++,I+1,L,M,J,Z,1^R,-(1/0),1/0);if(K>Z){var $=o(a,I,L,M,V,W),_=V[G*$+I],aa=u(a,I,$,M,V,W,_);if(M>aa&&e(F++,I,Z,K,aa,M,(4|R)+(S?16:0),_,Q),$>L&&e(F++,I,Z,K,L,$,(2|R)+(S?16:0),P,_),$+1===aa){if(E=S?g(a,I,b,Z,K,T,U,$,V,W[$]):f(a,I,b,R,Z,K,T,U,$,V,W[$]),void 0!==E)return E}else if(aa>$){var ba;if(S){if(ba=x(a,I,Z,K,T,U,_),ba>Z){var ca=u(a,I,Z,ba,T,U,_);if(I===a-2){if(ca>Z&&(E=n.sweepComplete(a,b,Z,ca,T,U,$,aa,V,W),void 0!==E))return E;if(ba>ca&&(E=n.sweepBipartite(a,b,ca,ba,T,U,$,aa,V,W),void 0!==E))return E}else ca>Z&&e(F++,I+1,Z,ca,$,aa,16,-(1/0),1/0),ba>ca&&(e(F++,I+1,ca,ba,$,aa,0,-(1/0),1/0),e(F++,I+1,$,aa,ca,ba,1,-(1/0),1/0))}}else ba=R?y(a,I,Z,K,T,U,_):x(a,I,Z,K,T,U,_),ba>Z&&(I===a-2?E=R?n.sweepBipartite(a,b,$,aa,V,W,Z,ba,T,U):n.sweepBipartite(a,b,Z,ba,T,U,$,aa,V,W):(e(F++,I+1,Z,ba,$,aa,R,-(1/0),1/0),e(F++,I+1,$,aa,Z,ba,1^R,-(1/0),1/0)))}}}}}b.exports=h;var i=a("typedarray-pool"),j=a("bit-twiddle"),k=a("./brute"),l=k.partial,m=k.full,n=a("./sweep"),o=a("./median"),p=a("./partition"),q=128,r=1<<22,s=1<<22,t=p("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),u=p("lo===p0",["p0"]),v=p("lo<p0",["p0"]),w=p("hi<=p0",["p0"]),x=p("lo<=p0&&p0<=hi",["p0"]),y=p("lo<p0&&p0<=hi",["p0"]),z=6,A=2,B=1024,C=i.mallocInt32(B),D=i.mallocDouble(B)},{"./brute":72,"./median":74,"./partition":75,"./sweep":77,"bit-twiddle":68,"typedarray-pool":550}],74:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){for(var g=2*a,h=g*(c+1)+b,i=c+1;d>i;++i,h+=g)for(var j=e[h],k=i,l=g*(i-1);k>c&&e[l+b]>j;--k,l-=g){for(var m=l,n=l+g,o=0;g>o;++o,++m,++n){var p=e[m];e[m]=e[n],e[n]=p}var q=f[k];f[k]=f[k-1],f[k-1]=q}}function e(a,b,c,e,f,i){if(c+1>=e)return c;for(var j=c,k=e,l=e+c>>>1,m=2*a,n=l,o=f[m*l+b];k>j;){if(h>k-j){d(a,b,j,k,f,i),o=f[m*l+b];break}var p=k-j,q=Math.random()*p+j|0,r=f[m*q+b],s=Math.random()*p+j|0,t=f[m*s+b],u=Math.random()*p+j|0,v=f[m*u+b];t>=r?v>=t?(n=s,o=t):r>=v?(n=q,o=r):(n=u,o=v):t>=v?(n=s,o=t):v>=r?(n=q,o=r):(n=u,o=v);for(var w=m*(k-1),x=m*n,y=0;m>y;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];i[k-1]=i[n],i[n]=A,n=g(a,b,j,k-1,f,i,o);for(var w=m*(k-1),x=m*n,y=0;m>y;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];if(i[k-1]=i[n],i[n]=A,n>l){for(k=n-1;k>j&&f[m*(k-1)+b]===o;)k-=1;k+=1}else{if(!(l>n))break;for(j=n+1;k>j&&f[m*j+b]===o;)j+=1}}return g(a,b,c,l,f,i,f[m*l+b])}b.exports=e;var f=a("./partition"),g=f("lo<p0",["p0"]),h=8},{"./partition":75}],75:[function(a,b,c){"use strict";function d(a,b){var c="abcdef".split("").concat(b),d=[];return a.indexOf("lo")>=0&&d.push("lo=e[k+n]"),a.indexOf("hi")>=0&&d.push("hi=e[k+o]"),c.push(e.replace("_",d.join()).replace("$",a)),Function.apply(void 0,c)}b.exports=d;var e="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],76:[function(a,b,c){"use strict";function d(a,b){4*m>=b?e(0,b-1,a):l(0,b-1,a)}function e(a,b,c){for(var d=2*(a+1),e=a+1;b>=e;++e){for(var f=c[d++],g=c[d++],h=e,i=d-2;h-->a;){var j=c[i-2],k=c[i-1];if(f>j)break;if(j===f&&g>k)break;c[i]=j,c[i+1]=k,i-=2}c[i]=f,c[i+1]=g}}function f(a,b,c){a*=2,b*=2;var d=c[a],e=c[a+1];c[a]=c[b],c[a+1]=c[b+1],c[b]=d,c[b+1]=e}function g(a,b,c){a*=2,b*=2,c[a]=c[b],c[a+1]=c[b+1]}function h(a,b,c,d){a*=2,b*=2,c*=2;var e=d[a],f=d[a+1];d[a]=d[b],d[a+1]=d[b+1],d[b]=d[c],d[b+1]=d[c+1],d[c]=e,d[c+1]=f}function i(a,b,c,d,e){a*=2,b*=2,e[a]=e[b],e[b]=c,e[a+1]=e[b+1],e[b+1]=d}function j(a,b,c){a*=2,b*=2;var d=c[a],e=c[b];return e>d?!1:d===e?c[a+1]>c[b+1]:!0}function k(a,b,c,d){a*=2;var e=d[a];return b>e?!0:e===b?d[a+1]<c:!1}function l(a,b,c){var d=(b-a+1)/6|0,n=a+d,o=b-d,p=a+b>>1,q=p-d,r=p+d,s=n,t=q,u=p,v=r,w=o,x=a+1,y=b-1,z=0;j(s,t,c)&&(z=s,s=t,t=z),j(v,w,c)&&(z=v,v=w,w=z),j(s,u,c)&&(z=s,s=u,u=z),j(t,u,c)&&(z=t,t=u,u=z),j(s,v,c)&&(z=s,s=v,v=z),j(u,v,c)&&(z=u,u=v,v=z),j(t,w,c)&&(z=t,t=w,w=z),j(t,u,c)&&(z=t,t=u,u=z),j(v,w,c)&&(z=v,v=w,w=z);for(var A=c[2*t],B=c[2*t+1],C=c[2*v],D=c[2*v+1],E=2*s,F=2*u,G=2*w,H=2*n,I=2*p,J=2*o,K=0;2>K;++K){var L=c[E+K],M=c[F+K],N=c[G+K];c[H+K]=L,c[I+K]=M,c[J+K]=N}g(q,a,c),g(r,b,c);for(var O=x;y>=O;++O)if(k(O,A,B,c))O!==x&&f(O,x,c),++x;else if(!k(O,C,D,c))for(;;){if(k(y,C,D,c)){k(y,A,B,c)?(h(O,x,y,c),++x,--y):(f(O,y,c),--y);break}if(--y<O)break}i(a,x-1,A,B,c),i(b,y+1,C,D,c),m>=x-2-a?e(a,x-2,c):l(a,x-2,c),m>=b-(y+2)?e(y+2,b,c):l(y+2,b,c),m>=y-x?e(x,y,c):l(x,y,c)}b.exports=d;var m=32},{}],77:[function(a,b,c){"use strict";function d(a){var b=l.nextPow2(a);p.length<b&&(k.free(p),p=k.mallocInt32(b)),q.length<b&&(k.free(q),q=k.mallocInt32(b)),r.length<b&&(k.free(r),r=k.mallocInt32(b)),s.length<b&&(k.free(s),s=k.mallocInt32(b)),t.length<b&&(k.free(t),t=k.mallocInt32(b)),u.length<b&&(k.free(u),u=k.mallocInt32(b));var c=8*b;v.length<c&&(k.free(v),v=k.mallocDouble(c))}function e(a,b,c,d){var e=b[d],f=a[c-1];a[e]=f,b[f]=e}function f(a,b,c,d){a[c]=d,b[d]=c}function g(a,b,c,d,g,h,i,j,k,l){for(var o=0,t=2*a,u=a-1,w=t-1,x=c;d>x;++x){var y=h[x],z=t*x;v[o++]=g[z+u],v[o++]=-(y+1),v[o++]=g[z+w],v[o++]=y}for(var x=i;j>x;++x){var y=l[x]+n,A=t*x;v[o++]=k[A+u],v[o++]=-y,v[o++]=k[A+w],v[o++]=y}var B=o>>>1;m(v,B);for(var C=0,D=0,x=0;B>x;++x){var E=0|v[2*x+1];if(E>=n)E=E-n|0,e(r,s,D--,E);else if(E>=0)e(p,q,C--,E);else if(-n>=E){E=-E-n|0;for(var F=0;C>F;++F){var G=b(p[F],E);if(void 0!==G)return G}f(r,s,D++,E)}else{E=-E-1|0;for(var F=0;D>F;++F){var G=b(E,r[F]);if(void 0!==G)return G}f(p,q,C++,E)}}}function h(a,b,c,d,g,h,i,j,k,l){for(var n=0,o=2*a,w=a-1,x=o-1,y=c;d>y;++y){var z=h[y]+1<<1,A=o*y;v[n++]=g[A+w],v[n++]=-z,v[n++]=g[A+x],v[n++]=z}for(var y=i;j>y;++y){var z=l[y]+1<<1,B=o*y;v[n++]=k[B+w],v[n++]=1|-z,v[n++]=k[B+x],v[n++]=1|z}var C=n>>>1;m(v,C);for(var D=0,E=0,F=0,y=0;C>y;++y){var G=0|v[2*y+1],H=1&G;if(C-1>y&&G>>1===v[2*y+3]>>1&&(H=2,y+=1),0>G){for(var I=-(G>>1)-1,J=0;F>J;++J){var K=b(t[J],I);if(void 0!==K)return K}if(0!==H)for(var J=0;D>J;++J){var K=b(p[J],I);if(void 0!==K)return K}if(1!==H)for(var J=0;E>J;++J){var K=b(r[J],I);if(void 0!==K)return K}0===H?f(p,q,D++,I):1===H?f(r,s,E++,I):2===H&&f(t,u,F++,I)}else{var I=(G>>1)-1;0===H?e(p,q,D--,I):1===H?e(r,s,E--,I):2===H&&e(t,u,F--,I)}}}function i(a,b,c,d,g,h,i,j,k,l,o,r){var s=0,t=2*a,u=b,w=b+a,x=1,y=1;d?y=n:x=n;for(var z=g;h>z;++z){var A=z+x,B=t*z;v[s++]=i[B+u],v[s++]=-A,v[s++]=i[B+w],v[s++]=A}for(var z=k;l>z;++z){var A=z+y,C=t*z;v[s++]=o[C+u],v[s++]=-A}var D=s>>>1;m(v,D);for(var E=0,z=0;D>z;++z){var F=0|v[2*z+1];if(0>F){var A=-F,G=!1;if(A>=n?(G=!d,A-=n):(G=!!d,A-=1),G)f(p,q,E++,A);else{var H=r[A],I=t*A,J=o[I+b+1],K=o[I+b+1+a];a:for(var L=0;E>L;++L){var M=p[L],N=t*M;if(!(K<i[N+b+1]||i[N+b+1+a]<J)){for(var O=b+2;a>O;++O)if(o[I+O+a]<i[N+O]||i[N+O+a]<o[I+O])continue a;var P,Q=j[M];if(P=d?c(H,Q):c(Q,H),void 0!==P)return P}}}}else e(p,q,E--,F-x)}}function j(a,b,c,d,e,f,g,h,i,j,k){for(var l=0,o=2*a,q=b,r=b+a,s=d;e>s;++s){var t=s+n,u=o*s;v[l++]=f[u+q],v[l++]=-t,v[l++]=f[u+r],v[l++]=t}for(var s=h;i>s;++s){var t=s+1,w=o*s;v[l++]=j[w+q],v[l++]=-t}var x=l>>>1;m(v,x);for(var y=0,s=0;x>s;++s){var z=0|v[2*s+1];if(0>z){var t=-z;if(t>=n)p[y++]=t-n;else{t-=1;var A=k[t],B=o*t,C=j[B+b+1],D=j[B+b+1+a];a:for(var E=0;y>E;++E){var F=p[E],G=g[F];if(G===A)break;var H=o*F;if(!(D<f[H+b+1]||f[H+b+1+a]<C)){for(var I=b+2;a>I;++I)if(j[B+I+a]<f[H+I]||f[H+I+a]<j[B+I])continue a;var J=c(G,A);if(void 0!==J)return J}}}}else{for(var t=z-n,E=y-1;E>=0;--E)if(p[E]===t){for(var I=E+1;y>I;++I)p[I-1]=p[I];break}--y}}}b.exports={init:d,sweepBipartite:g,sweepComplete:h,scanBipartite:i,scanComplete:j};var k=a("typedarray-pool"),l=a("bit-twiddle"),m=a("./sort"),n=1<<28,o=1024,p=k.mallocInt32(o),q=k.mallocInt32(o),r=k.mallocInt32(o),s=k.mallocInt32(o),t=k.mallocInt32(o),u=k.mallocInt32(o),v=k.mallocDouble(8*o)},{"./sort":76,"bit-twiddle":68,"typedarray-pool":550}],78:[function(a,b,c){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()}catch(b){return!1}}function e(a){if(a>Y)throw new RangeError("Invalid typed array length");var b=new Uint8Array(a);return b.__proto__=f.prototype,b}function f(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return j(a)}return g(a,b,c)}function g(a,b,c){if("number"==typeof a)throw new TypeError('"value" argument must not be a number');return a instanceof ArrayBuffer?m(a,b,c):"string"==typeof a?k(a,b):n(a)}function h(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative')}function i(a,b,c){return h(a),0>=a?e(a):void 0!==b?"string"==typeof c?e(a).fill(b,c):e(a).fill(b):e(a)}function j(a){return h(a),e(0>a?0:0|o(a))}function k(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!f.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');var c=0|q(a,b),d=e(c),g=d.write(a,b);return g!==c&&(d=d.slice(0,g)),d}function l(a){for(var b=a.length<0?0:0|o(a.length),c=e(b),d=0;b>d;d+=1)c[d]=255&a[d];return c}function m(a,b,c){if(0>b||a.byteLength<b)throw new RangeError("'offset' is out of bounds");if(a.byteLength<b+(c||0))throw new RangeError("'length' is out of bounds");var d;return d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),d.__proto__=f.prototype,d}function n(a){if(f.isBuffer(a)){var b=0|o(a.length),c=e(b);return 0===c.length?c:(a.copy(c,0,0,b),c)}if(a){if(U(a)||"length"in a)return"number"!=typeof a.length||V(a.length)?e(0):l(a);if("Buffer"===a.type&&Array.isArray(a.data))return l(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function o(a){if(a>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|a}function p(a){return+a!=a&&(a=0),f.alloc(+a)}function q(a,b){if(f.isBuffer(a))return a.length;if(U(a)||a instanceof ArrayBuffer)return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return P(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return S(a).length;default:if(d)return P(a).length;b=(""+b).toLowerCase(),d=!0}}function r(a,b,c){var d=!1;if((void 0===b||0>b)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),0>=c)return"";if(c>>>=0,b>>>=0,b>=c)return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function s(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function t(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:-2147483648>c&&(c=-2147483648),c=+c,V(c)&&(c=e?0:a.length-1),0>c&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(0>c){if(!e)return-1;c=0}if("string"==typeof b&&(b=f.from(b,d)),f.isBuffer(b))return 0===b.length?-1:u(a,b,c,d,e);if("number"==typeof b)return b=255&b,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):u(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function u(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;h>j;j++)if(f(a,j)===f(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===i)return k*g}else-1!==k&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;i>m;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function v(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;++g){var h=parseInt(b.substr(2*g,2),16);if(V(h))return g;a[c+g]=h}return g}function w(a,b,c,d){return T(P(b,a.length-c),a,c,d)}function x(a,b,c,d){return T(Q(b),a,c,d)}function y(a,b,c,d){return x(a,b,c,d)}function z(a,b,c,d){return T(S(b),a,c,d)}function A(a,b,c,d){return T(R(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?W.fromByteArray(a):W.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;c>e;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(c>=e+h){var i,j,k,l;switch(h){case 1:128>f&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(55296>l||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&1114112>l&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){var b=a.length;if(Z>=b)return String.fromCharCode.apply(String,a);for(var c="",d=0;b>d;)c+=String.fromCharCode.apply(String,a.slice(d,d+=Z));return c}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;++f)e+=O(a[f]);return e}function H(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||g>b)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function K(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range")}function L(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(a,b,c,d,23,4),c+4}function M(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(a,b,c,d,52,8),c+8}function N(a){if(a=a.trim().replace($,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function O(a){return 16>a?"0"+a.toString(16):a.toString(16)}function P(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;++g){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){
if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Q(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function R(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function S(a){return W.toByteArray(N(a))}function T(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function U(a){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(a)}function V(a){return a!==a}var W=a("base64-js"),X=a("ieee754");c.Buffer=f,c.SlowBuffer=p,c.INSPECT_MAX_BYTES=50;var Y=2147483647;c.kMaxLength=Y,f.TYPED_ARRAY_SUPPORT=d(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(a,b,c){return g(a,b,c)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(a,b,c){return i(a,b,c)},f.allocUnsafe=function(a){return j(a)},f.allocUnsafeSlow=function(a){return j(a)},f.isBuffer=function(a){return null!=a&&a._isBuffer===!0},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);g>e;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return d>c?-1:c>d?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return f.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=f.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var g=a[c];if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,e),e+=g.length}return d},f.byteLength=q,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;a>b;b+=2)s(this,b,b+1);return this},f.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;a>b;b+=4)s(this,b,b+3),s(this,b+1,b+2);return this},f.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;a>b;b+=8)s(this,b,b+7),s(this,b+1,b+6),s(this,b+2,b+5),s(this,b+3,b+4);return this},f.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):r.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===f.compare(this,a)},f.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a,b,c,d,e){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var g=e-d,h=c-b,i=Math.min(g,h),j=this.slice(d,e),k=a.slice(b,c),l=0;i>l;++l)if(j[l]!==k[l]){g=j[l],h=k[l];break}return h>g?-1:g>h?1:0},f.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},f.prototype.indexOf=function(a,b,c){return t(this,a,b,c,!0)},f.prototype.lastIndexOf=function(a,b,c){return t(this,a,b,c,!1)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return v(this,a,b,c);case"utf8":case"utf-8":return w(this,a,b,c);case"ascii":return x(this,a,b,c);case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d=this.subarray(a,b);return d.__proto__=f.prototype,d},f.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},f.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),X.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),X.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),X.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return a>>>=0,b||I(a,8,this.length),X.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)0>a&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)0>a&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),0>a&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeFloatLE=function(a,b,c){return L(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return L(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&b>c&&d>b)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(1e3>f)for(e=0;f>e;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},f.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a=255&a);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(b>=c)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var g;if("number"==typeof a)for(g=b;c>g;++g)this[g]=a;else{var h=f.isBuffer(a)?a:new f(a,d),i=h.length;for(g=0;c-b>g;++g)this[g+b]=h[g%i]}return this};var $=/[^+\/0-9A-Za-z-_]/g},{"base64-js":79,ieee754:290}],79:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h,i=a.length;g=d(a),h=new l(3*i/4-g),e=g>0?i-4:i;var j=0;for(b=0,c=0;e>b;b+=4,c+=3)f=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],h[j++]=f>>16&255,h[j++]=f>>8&255,h[j++]=255&f;return 2===g?(f=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,h[j++]=255&f):1===g&&(f=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,h[j++]=f>>8&255,h[j++]=255&f),h}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;c>f;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;k>i;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;o>n;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],80:[function(a,b,c){"use strict";function d(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function e(a,b){return a[0]-b[0]||a[1]-b[1]}function f(a){return a.map(d).sort(e)}function g(a,b,c){return b in a?a[b]:c}function h(a,b,c){Array.isArray(b)?(c=c||{},b=b||[]):(c=b||{},b=[]);var d=!!g(c,"delaunay",!0),e=!!g(c,"interior",!0),h=!!g(c,"exterior",!0),m=!!g(c,"infinity",!1);if(!e&&!h||0===a.length)return[];var n=i(a,b);if(d||e!==h||m){for(var o=j(a.length,f(b)),p=0;p<n.length;++p){var q=n[p];o.addTriangle(q[0],q[1],q[2])}return d&&k(a,o),h?e?m?l(o,0,m):o.cells():l(o,1,m):l(o,-1)}return n}var i=a("./lib/monotone"),j=a("./lib/triangulation"),k=a("./lib/delaunay"),l=a("./lib/filter");b.exports=h},{"./lib/delaunay":81,"./lib/filter":82,"./lib/monotone":83,"./lib/triangulation":84}],81:[function(a,b,c){"use strict";function d(a,b,c,d,e,g){var h=b.opposite(d,e);if(!(0>h)){if(d>e){var i=d;d=e,e=i,i=g,g=h,h=i}b.isConstraint(d,e)||f(a[d],a[e],a[g],a[h])<0&&c.push(d,e)}}function e(a,b){for(var c=[],e=a.length,g=b.stars,h=0;e>h;++h)for(var i=g[h],j=1;j<i.length;j+=2){var k=i[j];if(!(h>k||b.isConstraint(h,k))){for(var l=i[j-1],m=-1,n=1;n<i.length;n+=2)if(i[n-1]===k){m=i[n];break}0>m||f(a[h],a[k],a[l],a[m])<0&&c.push(h,k)}}for(;c.length>0;){for(var k=c.pop(),h=c.pop(),l=-1,m=-1,i=g[h],o=1;o<i.length;o+=2){var p=i[o-1],q=i[o];p===k?m=q:q===k&&(l=p)}0>l||0>m||f(a[h],a[k],a[l],a[m])>=0||(b.flip(h,k),d(a,b,c,l,h,m),d(a,b,c,h,m,l),d(a,b,c,m,k,l),d(a,b,c,k,l,m))}}var f=a("robust-in-sphere")[4];a("binary-search-bounds");b.exports=e},{"binary-search-bounds":85,"robust-in-sphere":515}],82:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.cells=a,this.neighbor=b,this.flags=d,this.constraint=c,this.active=e,this.next=f,this.boundary=g}function e(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}function f(a,b){for(var c=a.cells(),f=c.length,g=0;f>g;++g){var h=c[g],i=h[0],j=h[1],k=h[2];k>j?i>j&&(h[0]=j,h[1]=k,h[2]=i):i>k&&(h[0]=k,h[1]=i,h[2]=j)}c.sort(e);for(var l=new Array(f),g=0;g<l.length;++g)l[g]=0;var m=[],n=[],o=new Array(3*f),p=new Array(3*f),q=null;b&&(q=[]);for(var r=new d(c,o,p,l,m,n,q),g=0;f>g;++g)for(var h=c[g],s=0;3>s;++s){var i=h[s],j=h[(s+1)%3],t=o[3*g+s]=r.locate(j,i,a.opposite(j,i)),u=p[3*g+s]=a.isConstraint(i,j);0>t&&(u?n.push(g):(m.push(g),l[g]=1),b&&q.push([j,i,-1]))}return r}function g(a,b,c){for(var d=0,e=0;e<a.length;++e)b[e]===c&&(a[d++]=a[e]);return a.length=d,a}function h(a,b,c){var d=f(a,c);if(0===b)return c?d.cells.concat(d.boundary):d.cells;for(var e=1,h=d.active,i=d.next,j=d.flags,k=d.cells,l=d.constraint,m=d.neighbor;h.length>0||i.length>0;){for(;h.length>0;){var n=h.pop();if(j[n]!==-e){j[n]=e;for(var o=(k[n],0);3>o;++o){var p=m[3*n+o];p>=0&&0===j[p]&&(l[3*n+o]?i.push(p):(h.push(p),j[p]=e))}}}var q=i;i=h,h=q,i.length=0,e=-e}var r=g(k,j,b);return c?r.concat(d.boundary):r}var i=a("binary-search-bounds");b.exports=h;var j=d.prototype;j.locate=function(){var a=[0,0,0];return function(b,c,d){var f=b,g=c,h=d;return d>c?b>c&&(f=c,g=d,h=b):b>d&&(f=d,g=b,h=c),0>f?-1:(a[0]=f,a[1]=g,a[2]=h,i.eq(this.cells,a,e))}}()},{"binary-search-bounds":85}],83:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.a=a,this.b=b,this.idx=c,this.lowerIds=d,this.upperIds=e}function e(a,b,c,d){this.a=a,this.b=b,this.type=c,this.idx=d}function f(a,b){var c=a.a[0]-b.a[0]||a.a[1]-b.a[1]||a.type-b.type;return c?c:a.type!==o&&(c=n(a.a,a.b,b.b))?c:a.idx-b.idx}function g(a,b){return n(a.a,a.b,b)}function h(a,b,c,d,e){for(var f=m.lt(b,d,g),h=m.gt(b,d,g),i=f;h>i;++i){for(var j=b[i],k=j.lowerIds,l=k.length;l>1&&n(c[k[l-2]],c[k[l-1]],d)>0;)a.push([k[l-1],k[l-2],e]),l-=1;k.length=l,k.push(e);for(var o=j.upperIds,l=o.length;l>1&&n(c[o[l-2]],c[o[l-1]],d)<0;)a.push([o[l-2],o[l-1],e]),l-=1;o.length=l,o.push(e)}}function i(a,b){var c;return(c=a.a[0]<b.a[0]?n(a.a,a.b,b.a):n(b.b,b.a,a.a))?c:(c=b.b[0]<a.b[0]?n(a.a,a.b,b.b):n(b.b,b.a,a.b),c||a.idx-b.idx)}function j(a,b,c){var e=m.le(a,c,i),f=a[e],g=f.upperIds,h=g[g.length-1];f.upperIds=[h],a.splice(e+1,0,new d(c.a,c.b,c.idx,[h],g))}function k(a,b,c){var d=c.a;c.a=c.b,c.b=d;var e=m.eq(a,c,i),f=a[e],g=a[e-1];g.upperIds=f.upperIds,a.splice(e,1)}function l(a,b){for(var c=a.length,g=b.length,i=[],l=0;c>l;++l)i.push(new e(a[l],null,o,l));for(var l=0;g>l;++l){var m=b[l],n=a[m[0]],r=a[m[1]];n[0]<r[0]?i.push(new e(n,r,q,l),new e(r,n,p,l)):n[0]>r[0]&&i.push(new e(r,n,q,l),new e(n,r,p,l))}i.sort(f);for(var s=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),t=[new d([s,1],[s,0],-1,[],[],[],[])],u=[],l=0,v=i.length;v>l;++l){var w=i[l],x=w.type;x===o?h(u,t,a,w.a,w.idx):x===q?j(t,a,w):k(t,a,w)}return u}var m=a("binary-search-bounds"),n=a("robust-orientation")[3],o=0,p=1,q=2;b.exports=l},{"binary-search-bounds":85,"robust-orientation":517}],84:[function(a,b,c){"use strict";function d(a,b){this.stars=a,this.edges=b}function e(a,b,c){for(var d=1,e=a.length;e>d;d+=2)if(a[d-1]===b&&a[d]===c)return a[d-1]=a[e-2],a[d]=a[e-1],void(a.length=e-2)}function f(a,b){for(var c=new Array(a),e=0;a>e;++e)c[e]=[];return new d(c,b)}var g=a("binary-search-bounds");b.exports=f;var h=d.prototype;h.isConstraint=function(){function a(a,b){return a[0]-b[0]||a[1]-b[1]}var b=[0,0];return function(c,d){return b[0]=Math.min(c,d),b[1]=Math.max(c,d),g.eq(this.edges,b,a)>=0}}(),h.removeTriangle=function(a,b,c){var d=this.stars;e(d[a],b,c),e(d[b],c,a),e(d[c],a,b)},h.addTriangle=function(a,b,c){var d=this.stars;d[a].push(b,c),d[b].push(c,a),d[c].push(a,b)},h.opposite=function(a,b){for(var c=this.stars[b],d=1,e=c.length;e>d;d+=2)if(c[d]===a)return c[d-1];return-1},h.flip=function(a,b){var c=this.opposite(a,b),d=this.opposite(b,a);this.removeTriangle(a,b,c),this.removeTriangle(b,a,d),this.addTriangle(a,d,c),this.addTriangle(b,c,d)},h.edges=function(){for(var a=this.stars,b=[],c=0,d=a.length;d>c;++c)for(var e=a[c],f=0,g=e.length;g>f;f+=2)b.push([e[f],e[f+1]]);return b},h.cells=function(){for(var a=this.stars,b=[],c=0,d=a.length;d>c;++c)for(var e=a[c],f=0,g=e.length;g>f;f+=2){var h=e[f],i=e[f+1];c<Math.min(h,i)&&b.push([c,h,i])}return b}},{"binary-search-bounds":85}],85:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=["function ",a,"(a,l,h,",d.join(","),"){",e?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return e?b.indexOf("c")<0?f.push(";if(x===y){return m}else if(x<=y){"):f.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):f.push(";if(",b,"){i=m;"),c?f.push("l=m+1}else{h=m-1}"):f.push("h=m-1}else{l=m+1}"),f.push("}"),e?f.push("return -1};"):f.push("return i};"),f.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],e),d("P","c(x,y)"+a+"0",b,["y","c"],e),"function dispatchBsearch",c,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",c].join(""));return f()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],86:[function(a,b,c){"use strict";function d(a){for(var b=1,c=1;c<a.length;++c)for(var d=0;c>d;++d)if(a[c]<a[d])b=-b;else if(a[d]===a[c])return 0;return b}b.exports=d},{}],87:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=a.length,e=0;d>e;++e)c+=a[e]*b[e];return c}function e(a){var b=a.length;if(0===b)return[];var c=(a[0].length,g([a.length+1,a.length+1],1)),e=g([a.length+1],1);c[b][b]=0;for(var f=0;b>f;++f){for(var i=0;f>=i;++i)c[i][f]=c[f][i]=2*d(a[f],a[i]);e[f]=d(a[f],a[f])}for(var j=h(c,e),k=0,l=j[b+1],f=0;f<l.length;++f)k+=l[f];for(var m=new Array(b),f=0;b>f;++f){for(var l=j[f],n=0,i=0;i<l.length;++i)n+=l[i];m[f]=n/k}return m}function f(a){if(0===a.length)return[];for(var b=a[0].length,c=g([b]),d=e(a),f=0;f<a.length;++f)for(var h=0;b>h;++h)c[h]+=a[f][h]*d[f];return c}var g=a("dup"),h=a("robust-linear-solve");f.barycenetric=e,b.exports=f},{dup:126,"robust-linear-solve":516}],88:[function(a,b,c){function d(a){for(var b=e(a),c=0,d=0;d<a.length;++d)for(var f=a[d],g=0;g<b.length;++g)c+=Math.pow(f[g]-b[g],2);return Math.sqrt(c/a.length)}b.exports=d;var e=a("circumcenter")},{circumcenter:87}],89:[function(a,b,c){function d(a,b,c){return c>b?b>a?b:a>c?c:a:c>a?c:a>b?b:a}b.exports=d},{}],90:[function(a,b,c){"use strict";function d(a){var b=v(a);return[x(b,-(1/0)),x(b,1/0)]}function e(a,b){for(var c=new Array(b.length),d=0;d<b.length;++d){var e=b[d],f=a[e[0]],g=a[e[1]];c[d]=[x(Math.min(f[0],g[0]),-(1/0)),x(Math.min(f[1],g[1]),-(1/0)),x(Math.max(f[0],g[0]),1/0),x(Math.max(f[1],g[1]),1/0)]}return c}function f(a){for(var b=new Array(a.length),c=0;c<a.length;++c){var d=a[c];b[c]=[x(d[0],-(1/0)),x(d[1],-(1/0)),x(d[0],1/0),x(d[1],1/0)]}return b}function g(a,b,c){var d=[];return r(c,function(c,e){var f=b[c],g=b[e];if(f[0]!==g[0]&&f[0]!==g[1]&&f[1]!==g[0]&&f[1]!==g[1]){var h=a[f[0]],i=a[f[1]],j=a[g[0]],k=a[g[1]];s(h,i,j,k)&&d.push([c,e])}}),d}function h(a,b,c,d){var e=[];return r(c,d,function(c,d){var f=b[c];if(f[0]!==d&&f[1]!==d){var g=a[d],h=a[f[0]],i=a[f[1]];s(h,i,g,g)&&e.push([c,d])}}),e}function i(a,b,c,d,e){var f,g,h=a.map(function(a){return[t(a[0]),t(a[1])]});for(f=0;f<c.length;++f){var i=c[f];g=i[0];var j=i[1],k=b[g],l=b[j],m=y(w(a[k[0]]),w(a[k[1]]),w(a[l[0]]),w(a[l[1]]));if(m){var n=a.length;a.push([v(m[0]),v(m[1])]),h.push(m),d.push([g,n],[j,n])}}for(d.sort(function(a,b){if(a[0]!==b[0])return a[0]-b[0];var c=h[a[1]],d=h[b[1]];return u(c[0],d[0])||u(c[1],d[1])}),f=d.length-1;f>=0;--f){var o=d[f];g=o[0];var p=b[g],q=p[0],r=p[1],s=a[q],x=a[r];if((s[0]-x[0]||s[1]-x[1])<0){var z=q;q=r,r=z}p[0]=q;var A,B=p[1]=o[1];for(e&&(A=p[2]);f>0&&d[f-1][0]===g;){var o=d[--f],C=o[1];e?b.push([B,C,A]):b.push([B,C]),B=C}e?b.push([B,r,A]):b.push([B,r])}return h}function j(a,b,c){for(var e=b.length,f=new q(e),g=[],h=0;h<b.length;++h){var i=b[h],j=d(i[0]),k=d(i[1]);g.push([x(j[0],-(1/0)),x(k[0],-(1/0)),x(j[1],1/0),x(k[1],1/0)])}r(g,function(a,b){f.link(a,b)});for(var l=!0,m=new Array(e),h=0;e>h;++h){var n=f.find(h);n!==h&&(l=!1,a[n]=[Math.min(a[h][0],a[n][0]),Math.min(a[h][1],a[n][1])])}if(l)return null;for(var o=0,h=0;e>h;++h){var n=f.find(h);n===h?(m[h]=o,a[o++]=a[h]):m[h]=-1}a.length=o;for(var h=0;e>h;++h)m[h]<0&&(m[h]=m[f.find(h)]);return m}function k(a,b){return a[0]-b[0]||a[1]-b[1]}function l(a,b){var c=a[0]-b[0]||a[1]-b[1];return c?c:a[2]<b[2]?-1:a[2]>b[2]?1:0}function m(a,b,c){if(0!==a.length){if(b)for(var d=0;d<a.length;++d){var e=a[d],f=b[e[0]],g=b[e[1]];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}else for(var d=0;d<a.length;++d){var e=a[d],f=e[0],g=e[1];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}c?a.sort(l):a.sort(k);for(var h=1,d=1;d<a.length;++d){var i=a[d-1],j=a[d];(j[0]!==i[0]||j[1]!==i[1]||c&&j[2]!==i[2])&&(a[h++]=j)}a.length=h}}function n(a,b,c){var d=j(a,[],f(a));return m(b,d,c),!!d}function o(a,b,c){var d=e(a,b),k=g(a,b,d),l=f(a),n=h(a,b,d,l),o=i(a,b,k,n,c),p=j(a,o,l);return m(b,p,c),p?!0:k.length>0||n.length>0}function p(a,b,c){var d;if(c){d=b;for(var e=new Array(b.length),f=0;f<b.length;++f){var g=b[f];e[f]=[g[0],g[1],c[f]]}b=e}for(var h=n(a,b,!!c);o(a,b,!!c);)h=!0;if(c&&h){d.length=0,c.length=0;for(var f=0;f<b.length;++f){var g=b[f];d.push([g[0],g[1]]),c.push(g[2])}}return h}b.exports=p;var q=a("union-find"),r=a("box-intersect"),s=a("robust-segment-intersect"),t=a("big-rat"),u=a("big-rat/cmp"),v=a("big-rat/to-float"),w=a("rat-vec"),x=a("nextafter"),y=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":91,"big-rat":54,"big-rat/cmp":52,"big-rat/to-float":66,"box-intersect":71,nextafter:469,"rat-vec":504,"robust-segment-intersect":520,"union-find":551}],91:[function(a,b,c){"use strict";function d(a,b){return h(f(a[0],b[1]),f(a[1],b[0]))}function e(a,b,c,e){var f=j(b,a),h=j(e,c),m=d(f,h);if(0===i(m))return null;var n=j(a,c),o=d(h,n),p=g(o,m),q=l(f,p),r=k(a,q);return r}b.exports=e;var f=a("big-rat/mul"),g=a("big-rat/div"),h=a("big-rat/sub"),i=a("big-rat/sign"),j=a("rat-vec/sub"),k=a("rat-vec/add"),l=a("rat-vec/muls")},{"big-rat/div":53,"big-rat/mul":63,"big-rat/sign":64,"big-rat/sub":65,"rat-vec/add":503,"rat-vec/muls":505,"rat-vec/sub":506}],92:[function(a,b,c){(function(a){var c=function(){"use strict";function b(c,d,e,f){function h(c,e){if(null===c)return null;if(0==e)return c;var i,m;if("object"!=typeof c)return c;if(b.__isArray(c))i=[];else if(b.__isRegExp(c))i=new RegExp(c.source,g(c)),c.lastIndex&&(i.lastIndex=c.lastIndex);else if(b.__isDate(c))i=new Date(c.getTime());else{if(l&&a.isBuffer(c))return i=new a(c.length),c.copy(i),i;"undefined"==typeof f?(m=Object.getPrototypeOf(c),i=Object.create(m)):(i=Object.create(f),m=f)}if(d){var n=j.indexOf(c);if(-1!=n)return k[n];j.push(c),k.push(i)}for(var o in c){var p;m&&(p=Object.getOwnPropertyDescriptor(m,o)),p&&null==p.set||(i[o]=h(c[o],e-1))}return i}var i;"object"==typeof d&&(e=d.depth,f=d.prototype,i=d.filter,d=d.circular);var j=[],k=[],l="undefined"!=typeof a;return"undefined"==typeof d&&(d=!0),"undefined"==typeof e&&(e=1/0),h(c,e)}function c(a){return Object.prototype.toString.call(a)}function d(a){return"object"==typeof a&&"[object Date]"===c(a)}function e(a){return"object"==typeof a&&"[object Array]"===c(a)}function f(a){return"object"==typeof a&&"[object RegExp]"===c(a)}function g(a){var b="";return a.global&&(b+="g"),a.ignoreCase&&(b+="i"),a.multiline&&(b+="m"),b}return b.clonePrototype=function(a){if(null===a)return null;var b=function(){};return b.prototype=a,new b},b.__objToStr=c,b.__isDate=d,b.__isArray=e,b.__isRegExp=f,b.__getRegExpFlags=g,b}();"object"==typeof b&&b.exports&&(b.exports=c)}).call(this,a("buffer").Buffer)},{buffer:78}],93:[function(a,b,c){"use strict";function d(a,b){null==b&&(b=!0);var c=a[0],d=a[1],e=a[2],g=a[3];null==g&&(g=b?1:255),b&&(c*=255,d*=255,e*=255,g*=255),c=255&f(c,0,255),d=255&f(d,0,255),e=255&f(e,0,255),g=255&f(g,0,255);var h=16777216*c+(d<<16)+(e<<8)+g;return h}function e(a,b){a=+a;var c=a>>>24,d=(16711680&a)>>>16,e=(65280&a)>>>8,f=255&a;return b===!1?[c,d,e,f]:[c/255,d/255,e/255,f/255]}var f=a("clamp");b.exports=d,b.exports.to=d,b.exports.from=e},{clamp:89}],94:[function(a,b,c){"use strict";b.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],95:[function(a,b,c){(function(c){"use strict";function d(a){var b,d,h=[],i=1;if("string"==typeof a)if(e[a])h=e[a].slice(),d="rgb";else if("transparent"===a)i=0,d="rgb",h=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var j=a.slice(1),k=j.length,l=4>=k;i=1,l?(h=[parseInt(j[0]+j[0],16),parseInt(j[1]+j[1],16),parseInt(j[2]+j[2],16)],4===k&&(i=parseInt(j[3]+j[3],16)/255)):(h=[parseInt(j[0]+j[1],16),parseInt(j[2]+j[3],16),parseInt(j[4]+j[5],16)],8===k&&(i=parseInt(j[6]+j[7],16)/255)),h[0]||(h[0]=0),h[1]||(h[1]=0),h[2]||(h[2]=0),d="rgb"}else if(b=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var m=b[1],j=m.replace(/a$/,"");d=j;var k="cmyk"===j?4:"gray"===j?1:3;h=b[2].trim().split(/\s*,\s*/).map(function(a,b){if(/%$/.test(a))return b===k?parseFloat(a)/100:"rgb"===j?255*parseFloat(a)/100:parseFloat(a);if("h"===j[b]){if(/deg$/.test(a))return parseFloat(a);if(void 0!==g[a])return g[a]}return parseFloat(a)}),m===j&&h.push(1),i=void 0===h[k]?1:h[k],h=h.slice(0,k)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(h=a.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),d=a.match(/([a-z])/gi).join("").toLowerCase());else"number"==typeof a?(d="rgb",h=[a>>>16,(65280&a)>>>8,255&a]):f(a)?(null!=a.r?(h=[a.r,a.g,a.b],d="rgb"):null!=a.red?(h=[a.red,a.green,a.blue],d="rgb"):null!=a.h?(h=[a.h,a.s,a.l],d="hsl"):null!=a.hue&&(h=[a.hue,a.saturation,a.lightness],d="hsl"),null!=a.a?i=a.a:null!=a.alpha?i=a.alpha:null!=a.opacity&&(i=a.opacity/100)):(Array.isArray(a)||c.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(h=[a[0],a[1],a[2]],d="rgb",i=4===a.length?a[3]:1);return{space:d,values:h,alpha:i}}b.exports=d;var e=a("color-name"),f=a("is-plain-obj"),g={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"color-name":94,"is-plain-obj":298}],96:[function(a,b,c){"use strict";var d=a("color-parse"),e=a("color-space/hsl"),f=a("clamp");b.exports=function(a,b){if(Array.isArray(a))return a;null==b&&(b=!0);var c=d(a);if(!c.space)return[];var g,h=c.values,i=h.length;for(g=0;i>g;g++)h[g]=f(h[g],0,255);if("h"===c.space[0]&&(h=e.rgb(h)),b)for(g=0;i>g;g++)h[g]/=255;return h.push(f(c.alpha,0,1)),h}},{clamp:89,"color-parse":95,"color-space/hsl":97}],97:[function(a,b,c){"use strict";var d=a("./rgb");b.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(a){var b,c,d,e,f,g=a[0]/360,h=a[1]/100,i=a[2]/100;if(0===h)return f=255*i,[f,f,f];c=.5>i?i*(1+h):i+h-i*h,b=2*i-c,e=[0,0,0];for(var j=0;3>j;j++)d=g+1/3*-(j-1),0>d?d++:d>1&&d--,f=1>6*d?b+6*(c-b)*d:1>2*d?c:2>3*d?b+(c-b)*(2/3-d)*6:b,e[j]=255*f;return e}},d.hsl=function(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255,h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return i===h?b=0:e===i?b=(f-g)/j:f===i?b=2+(g-e)/j:g===i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=(h+i)/2,c=i===h?0:.5>=d?j/(i+h):j/(2-i-h),[b,100*c,100*d]}},{"./rgb":98}],98:[function(a,b,c){"use strict";b.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],99:[function(a,b,c){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],100:[function(a,b,c){"use strict";function d(a){var b,c,d,j,k,l,m,n,o,p,q,r,s,t=[],u=[],v=[],w=[];if(g.isPlainObject(a)||(a={}),o=a.nshades||72,n=a.format||"hex",m=a.colormap,m||(m="jet"),"string"==typeof m){if(m=m.toLowerCase(),!i[m])throw Error(m+" not a supported colorscale");l=h(i[m])}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);l=h(m)}if(l.length>o)throw new Error(m+" map requires nshades to be at least size "+l.length);for(q=Array.isArray(a.alpha)?2!==a.alpha.length?[1,1]:h(a.alpha):"number"==typeof a.alpha?[a.alpha,a.alpha]:[1,1],b=l.map(function(a){return Math.round(a.index*o)}),q[0]<0&&(q[0]=0),q[1]<0&&(q[0]=0),q[0]>1&&(q[0]=1),q[1]>1&&(q[0]=1),s=0;s<b.length;++s)r=l[s].index,c=l[s].rgb,4===c.length&&c[3]>=0&&c[3]<=1||(c[3]=q[0]+(q[1]-q[0])*r);for(s=0;s<b.length-1;++s)k=b[s+1]-b[s],d=l[s].rgb,j=l[s+1].rgb,t=t.concat(g.linspace(d[0],j[0],k)),u=u.concat(g.linspace(d[1],j[1],k)),v=v.concat(g.linspace(d[2],j[2],k)),w=w.concat(g.linspace(d[3],j[3],k));return t=t.map(Math.round),u=u.map(Math.round),v=v.map(Math.round),p=g.zip(t,u,v,w),"hex"===n&&(p=p.map(e)),"rgbaString"===n&&(p=p.map(f)),p}function e(a){for(var b,c="#",d=0;3>d;++d)b=a[d],b=b.toString(16),c+=("00"+b).substr(b.length);return c}function f(a){return"rgba("+a.join(",")+")"}var g=a("arraytools"),h=a("clone"),i=a("./colorScales");b.exports=d},{"./colorScales":99,arraytools:47,clone:92}],101:[function(a,b,c){"use strict";function d(a,b,c){var d=h(a[0],-b[0]),e=h(a[1],-b[1]),f=h(c[0],-b[0]),g=h(c[1],-b[1]),k=j(i(d,f),i(e,g));return k[k.length-1]>=0}function e(a,b,c,e){var h=f(b,c,e);if(0===h){var i=g(f(a,b,c)),j=g(f(a,b,e));if(i===j){if(0===i){var k=d(a,b,c),l=d(a,b,e);return k===l?0:k?1:-1}return 0}return 0===j?i>0?-1:d(a,b,e)?-1:1:0===i?j>0?1:d(a,b,c)?1:-1:g(j-i)}var m=f(a,b,c);if(m>0)return h>0&&f(a,b,e)>0?1:-1;if(0>m)return h>0||f(a,b,e)>0?1:-1;var n=f(a,b,e);return n>0?1:d(a,b,c)?1:-1}b.exports=e;var f=a("robust-orientation"),g=a("signum"),h=a("two-sum"),i=a("robust-product"),j=a("robust-sum")},{"robust-orientation":517,"robust-product":518,"robust-sum":522,signum:524,"two-sum":549}],102:[function(a,b,c){function d(a,b){return a-b}function e(a,b){var c=a.length,e=a.length-b.length;if(e)return e;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||f(a[0],a[1])-f(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(e=g+a[2]-(h+b[2]))return e;var i=f(a[0],a[1]),j=f(b[0],b[1]);return f(i,a[2])-f(j,b[2])||f(i+a[2],g)-f(j+b[2],h);case 4:var k=a[0],l=a[1],m=a[2],n=a[3],o=b[0],p=b[1],q=b[2],r=b[3];return k+l+m+n-(o+p+q+r)||f(k,l,m,n)-f(o,p,q,r,o)||f(k+l,k+m,k+n,l+m,l+n,m+n)-f(o+p,o+q,o+r,p+q,p+r,q+r)||f(k+l+m,k+l+n,k+m+n,l+m+n)-f(o+p+q,o+p+r,o+q+r,p+q+r);default:for(var s=a.slice().sort(d),t=b.slice().sort(d),u=0;c>u;++u)if(e=s[u]-t[u])return e;return 0}}b.exports=e;var f=Math.min},{}],103:[function(a,b,c){"use strict";function d(a,b){return e(a,b)||f(a)-f(b)}var e=a("compare-cell"),f=a("cell-orientation");b.exports=d},{"cell-orientation":86,"compare-cell":102}],104:[function(a,b,c){"use strict";function d(a){var b=a.length;if(0===b)return[];if(1===b)return[[0]];var c=a[0].length;return 0===c?[]:1===c?e(a):2===c?f(a):g(a,c)}var e=a("./lib/ch1d"),f=a("./lib/ch2d"),g=a("./lib/chnd");b.exports=d},{"./lib/ch1d":105,"./lib/ch2d":106,"./lib/chnd":107}],105:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0,d=1;d<a.length;++d)a[d][0]<a[b][0]&&(b=d),a[d][0]>a[c][0]&&(c=d);return c>b?[[b],[c]]:b>c?[[c],[b]]:[[b]]}b.exports=d},{}],106:[function(a,b,c){"use strict";function d(a){var b=e(a),c=b.length;if(2>=c)return[];for(var d=new Array(c),f=b[c-1],g=0;c>g;++g){var h=b[g];d[g]=[f,h],f=h}return d}b.exports=d;var e=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":452}],107:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),e=0;e<b.length;++e)d[e]=a[b[e]];for(var f=b.length,e=0;c>e;++e)b.indexOf(e)<0&&(d[f++]=a[e]);return d}function e(a,b){for(var c=a.length,d=b.length,e=0;c>e;++e)for(var f=a[e],g=0;g<f.length;++g){var h=f[g];if(d>h)f[g]=b[h];else{h-=d;for(var i=0;d>i;++i)h>=b[i]&&(h+=1);f[g]=h}}return a}function f(a,b){try{return g(a,!0)}catch(c){var f=h(a);if(f.length<=b)return[];var i=d(a,f),j=g(i,!0);return e(j,f)}}b.exports=f;var g=a("incremental-convex-hull"),h=a("affine-hull")},{"affine-hull":42,"incremental-convex-hull":291}],108:[function(a,b,c){b.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],109:[function(a,b,c){function d(a){return a=Math.round(a),0>a?0:a>255?255:a}function e(a){return 0>a?0:a>1?1:a}function f(a){return d("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function g(a){return e("%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a))}function h(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function i(a){var b=a.replace(/ /g,"").toLowerCase();if(b in j)return j[b].slice();if("#"===b[0]){if(4===b.length){var c=parseInt(b.substr(1),16);return c>=0&&4095>=c?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null}if(7===b.length){var c=parseInt(b.substr(1),16);return c>=0&&16777215>=c?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null}return null}var e=b.indexOf("("),i=b.indexOf(")");if(-1!==e&&i+1===b.length){var k=b.substr(0,e),l=b.substr(e+1,i-(e+1)).split(","),m=1;switch(k){case"rgba":if(4!==l.length)return null;m=g(l.pop());case"rgb":return 3!==l.length?null:[f(l[0]),f(l[1]),f(l[2]),m];case"hsla":if(4!==l.length)return null;m=g(l.pop());case"hsl":if(3!==l.length)return null;var n=(parseFloat(l[0])%360+360)%360/360,o=g(l[1]),p=g(l[2]),q=.5>=p?p*(o+1):p+o-p*o,r=2*p-q;return[d(255*h(r,q,n+1/3)),d(255*h(r,q,n)),d(255*h(r,q,n-1/3)),m];default:return null}}return null}var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{c.parseCSSColor=i}catch(k){}},{}],110:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=6*e*e-6*e,h=3*e*e-4*e+1,i=-6*e*e+6*e,j=3*e*e-2*e;if(a.length){f||(f=new Array(a.length));for(var k=a.length-1;k>=0;--k)f[k]=g*a[k]+h*b[k]+i*c[k]+j*d[k];return f}return g*a+h*b+i*c[k]+j*d}function e(a,b,c,d,e,f){var g=e-1,h=e*e,i=g*g,j=(1+2*e)*i,k=e*i,l=h*(3-2*e),m=h*g;if(a.length){f||(f=new Array(a.length));for(var n=a.length-1;n>=0;--n)f[n]=j*a[n]+k*b[n]+l*c[n]+m*d[n];return f}return j*a+k*b+l*c+m*d}b.exports=e,b.exports.derivative=d},{}],111:[function(a,b,c){"use strict";function d(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function e(a){var b=new d;b.pre=a.pre,b.body=a.body,b.post=a.post;var c=a.args.slice(0);b.argTypes=c;for(var e=0;e<c.length;++e){var g=c[e];if("array"===g||"object"==typeof g&&g.blockIndices){if(b.argTypes[e]="array",b.arrayArgs.push(e),b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0),b.shimArgs.push("array"+e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array args");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===g)b.scalarArgs.push(e),b.shimArgs.push("scalar"+e);else if("index"===g){if(b.indexArgs.push(e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array index");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array index");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===g){if(b.shapeArgs.push(e),e<b.pre.args.length&&b.pre.args[e].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array shape");if(e<b.post.args.length&&b.post.args[e].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof g||!g.offset)throw new Error("cwise: Unknown argument type "+c[e]);b.argTypes[e]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(e)}}if(b.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(b.pre.args.length>c.length)throw new Error("cwise: Too many arguments in pre() block");if(b.body.args.length>c.length)throw new Error("cwise: Too many arguments in body() block");if(b.post.args.length>c.length)throw new Error("cwise: Too many arguments in post() block");return b.debug=!!a.printCode||!!a.debug,b.funcName=a.funcName||"cwise",b.blockSize=a.blockSize||64,f(b)}var f=a("./lib/thunk.js");b.exports=e},{"./lib/thunk.js":113}],112:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=a.length,g=b.arrayArgs.length,h=b.indexArgs.length>0,i=[],j=[],k=0,l=0;for(d=0;f>d;++d)j.push(["i",d,"=0"].join(""));for(e=0;g>e;++e)for(d=0;f>d;++d)l=k,k=a[d],0===d?j.push(["d",e,"s",d,"=t",e,"p",k].join("")):j.push(["d",e,"s",d,"=(t",e,"p",k,"-s",l,"*t",e,"p",l,")"].join(""));for(j.length>0&&i.push("var "+j.join(",")),d=f-1;d>=0;--d)k=a[d],i.push(["for(i",d,"=0;i",d,"<s",k,";++i",d,"){"].join(""));for(i.push(c),d=0;f>d;++d){for(l=k,k=a[d],e=0;g>e;++e)i.push(["p",e,"+=d",e,"s",d].join(""));h&&(d>0&&i.push(["index[",l,"]-=s",l].join("")),i.push(["++index[",k,"]"].join(""))),i.push("}")}return i.join("\n")}function e(a,b,c,e){for(var f=b.length,g=c.arrayArgs.length,h=c.blockSize,i=c.indexArgs.length>0,j=[],k=0;g>k;++k)j.push(["var offset",k,"=p",k].join(""));for(var k=a;f>k;++k)j.push(["for(var j"+k+"=SS[",b[k],"]|0;j",k,">0;){"].join("")),j.push(["if(j",k,"<",h,"){"].join("")),j.push(["s",b[k],"=j",k].join("")),j.push(["j",k,"=0"].join("")),j.push(["}else{s",b[k],"=",h].join("")),j.push(["j",k,"-=",h,"}"].join("")),i&&j.push(["index[",b[k],"]=j",k].join(""));for(var k=0;g>k;++k){for(var l=["offset"+k],m=a;f>m;++m)l.push(["j",m,"*t",k,"p",b[m]].join(""));j.push(["p",k,"=(",l.join("+"),")"].join(""))}j.push(d(b,c,e));for(var k=a;f>k;++k)j.push("}");return j.join("\n")}function f(a){for(var b=0,c=a[0].length;c>b;){for(var d=1;d<a.length;++d)if(a[d][b]!==a[0][b])return b;++b}return b}function g(a,b,c){for(var d=a.body,e=[],f=[],g=0;g<a.args.length;++g){var h=a.args[g];if(!(h.count<=0)){var i=new RegExp(h.name,"g"),j="",k=b.arrayArgs.indexOf(g);switch(b.argTypes[g]){case"offset":var l=b.offsetArgIndex.indexOf(g),m=b.offsetArgs[l];k=m.array,j="+q"+l;case"array":j="p"+k+j;var n="l"+g,o="a"+k;if(0===b.arrayBlockIndices[k])1===h.count?"generic"===c[k]?h.lvalue?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),f.push([o,".set(",j,",",n,")"].join(""))):d=d.replace(i,[o,".get(",j,")"].join("")):d=d.replace(i,[o,"[",j,"]"].join("")):"generic"===c[k]?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,".set(",j,",",n,")"].join(""))):(e.push(["var ",n,"=",o,"[",j,"]"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,"[",j,"]=",n].join("")));else{for(var p=[h.name],q=[j],r=0;r<Math.abs(b.arrayBlockIndices[k]);r++)p.push("\\s*\\[([^\\]]+)\\]"),q.push("$"+(r+1)+"*t"+k+"b"+r);if(i=new RegExp(p.join(""),"g"),j=q.join("+"),"generic"===c[k])throw new Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(i,[o,"[",j,"]"].join(""))}break;case"scalar":d=d.replace(i,"Y"+b.scalarArgs.indexOf(g));break;case"index":d=d.replace(i,"index");
break;case"shape":d=d.replace(i,"shape")}}}return[e.join("\n"),d,f.join("\n")].join("\n").trim()}function h(a){for(var b=new Array(a.length),c=!0,d=0;d<a.length;++d){var e=a[d],f=e.match(/\d+/);f=f?f[0]:"",0===e.charAt(0)?b[d]="u"+e.charAt(1)+f:b[d]=e.charAt(0)+f,d>0&&(c=c&&b[d]===b[d-1])}return c?b[0]:b.join("")}function i(a,b){for(var c=b[1].length-Math.abs(a.arrayBlockIndices[0])|0,i=new Array(a.arrayArgs.length),k=new Array(a.arrayArgs.length),l=0;l<a.arrayArgs.length;++l)k[l]=b[2*l],i[l]=b[2*l+1];for(var m=[],n=[],o=[],p=[],q=[],l=0;l<a.arrayArgs.length;++l){a.arrayBlockIndices[l]<0?(o.push(0),p.push(c),m.push(c),n.push(c+a.arrayBlockIndices[l])):(o.push(a.arrayBlockIndices[l]),p.push(a.arrayBlockIndices[l]+c),m.push(0),n.push(a.arrayBlockIndices[l]));for(var r=[],s=0;s<i[l].length;s++)o[l]<=i[l][s]&&i[l][s]<p[l]&&r.push(i[l][s]-o[l]);q.push(r)}for(var t=["SS"],u=["'use strict'"],v=[],s=0;c>s;++s)v.push(["s",s,"=SS[",s,"]"].join(""));for(var l=0;l<a.arrayArgs.length;++l){t.push("a"+l),t.push("t"+l),t.push("p"+l);for(var s=0;c>s;++s)v.push(["t",l,"p",s,"=t",l,"[",o[l]+s,"]"].join(""));for(var s=0;s<Math.abs(a.arrayBlockIndices[l]);++s)v.push(["t",l,"b",s,"=t",l,"[",m[l]+s,"]"].join(""))}for(var l=0;l<a.scalarArgs.length;++l)t.push("Y"+l);if(a.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),a.indexArgs.length>0){for(var w=new Array(c),l=0;c>l;++l)w[l]="0";v.push(["index=[",w.join(","),"]"].join(""))}for(var l=0;l<a.offsetArgs.length;++l){for(var x=a.offsetArgs[l],y=[],s=0;s<x.offset.length;++s)0!==x.offset[s]&&(1===x.offset[s]?y.push(["t",x.array,"p",s].join("")):y.push([x.offset[s],"*t",x.array,"p",s].join("")));0===y.length?v.push("q"+l+"=0"):v.push(["q",l,"=",y.join("+")].join(""))}var z=j([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));v=v.concat(z),v.length>0&&u.push("var "+v.join(","));for(var l=0;l<a.arrayArgs.length;++l)u.push("p"+l+"|=0");a.pre.body.length>3&&u.push(g(a.pre,a,k));var A=g(a.body,a,k),B=f(q);c>B?u.push(e(B,q[0],a,A)):u.push(d(q[0],a,A)),a.post.body.length>3&&u.push(g(a.post,a,k)),a.debug&&console.log("-----Generated cwise routine for ",b,":\n"+u.join("\n")+"\n----------");var C=[a.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",B,h(k)].join(""),D=new Function(["function ",C,"(",t.join(","),"){",u.join("\n"),"} return ",C].join(""));return D()}var j=a("uniq");b.exports=i},{uniq:552}],113:[function(a,b,c){"use strict";function d(a){var b=["'use strict'","var CACHED={}"],c=[],d=a.funcName+"_cwise_thunk";b.push(["return function ",d,"(",a.shimArgs.join(","),"){"].join(""));for(var f=[],g=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],i=[],j=[],k=0;k<a.arrayArgs.length;++k){var l=a.arrayArgs[k];c.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),f.push("t"+l),f.push("r"+l),g.push("t"+l),g.push("r"+l+".join()"),h.push("array"+l+".data"),h.push("array"+l+".stride"),h.push("array"+l+".offset|0"),k>0&&(i.push("array"+a.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[k]))),j.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[k])+"]"))}a.arrayArgs.length>1&&(b.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),b.push("if (!("+j.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(var k=0;k<a.scalarArgs.length;++k)h.push("scalar"+a.scalarArgs[k]);c.push(["type=[",g.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),b.push("var "+c.join(",")),b.push(["if(!proc){","CACHED[type]=proc=compile([",f.join(","),"])}","return proc(",h.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");var m=new Function("compile",b.join("\n"));return m(e.bind(void 0,a))}var e=a("./compile.js");b.exports=d},{"./compile.js":112}],114:[function(a,b,c){b.exports=a("cwise-compiler")},{"cwise-compiler":111}],115:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(a){return function(b,c){return g(a(b),c)}}function c(a,b){return[a,b]}function d(a,b,c){var d=(b-a)/Math.max(0,c),e=Math.floor(Math.log(d)/Math.LN10),f=d/Math.pow(10,e);return e>=0?(f>=y?10:f>=z?5:f>=A?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(f>=y?10:f>=z?5:f>=A?2:1)}function e(a,b,c){var d=Math.abs(b-a)/Math.max(0,c),e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),f=d/e;return f>=y?e*=10:f>=z?e*=5:f>=A&&(e*=2),a>b?-e:e}function f(a){return a.length}var g=function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN},h=function(a){return 1===a.length&&(a=b(a)),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}},i=h(g),j=i.right,k=i.left,l=function(a,b){null==b&&(b=c);for(var d=0,e=a.length-1,f=a[0],g=new Array(0>e?0:e);e>d;)g[d]=b(f,f=a[++d]);return g},m=function(a,b,d){var e,f,g,h,i=a.length,j=b.length,k=new Array(i*j);for(null==d&&(d=c),e=g=0;i>e;++e)for(h=a[e],f=0;j>f;++f,++g)k[g]=d(h,b[f]);return k},n=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},o=function(a){return null===a?NaN:+a},p=function(a,b){var c,d,e=a.length,f=0,g=-1,h=0,i=0;if(null==b)for(;++g<e;)isNaN(c=o(a[g]))||(d=c-h,h+=d/++f,i+=d*(c-h));else for(;++g<e;)isNaN(c=o(b(a[g],g,a)))||(d=c-h,h+=d/++f,i+=d*(c-h));return f>1?i/(f-1):void 0},q=function(a,b){var c=p(a,b);return c?Math.sqrt(c):c},r=function(a,b){var c,d,e,f=a.length,g=-1;if(null==b){for(;++g<f;)if(null!=(c=a[g])&&c>=c)for(d=e=c;++g<f;)null!=(c=a[g])&&(d>c&&(d=c),c>e&&(e=c))}else for(;++g<f;)if(null!=(c=b(a[g],g,a))&&c>=c)for(d=e=c;++g<f;)null!=(c=b(a[g],g,a))&&(d>c&&(d=c),c>e&&(e=c));return[d,e]},s=Array.prototype,t=s.slice,u=s.map,v=function(a){return function(){return a}},w=function(a){return a},x=function(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):3>e?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f},y=Math.sqrt(50),z=Math.sqrt(10),A=Math.sqrt(2),B=function(a,b,c){var e,f,g,h=a>b,i=-1;if(h&&(e=a,a=b,b=e),0===(g=d(a,b,c))||!isFinite(g))return[];if(g>0)for(a=Math.ceil(a/g),b=Math.floor(b/g),f=new Array(e=Math.ceil(b-a+1));++i<e;)f[i]=(a+i)*g;else for(a=Math.floor(a*g),b=Math.ceil(b*g),f=new Array(e=Math.ceil(a-b+1));++i<e;)f[i]=(a-i)/g;return h&&f.reverse(),f},C=function(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1},D=function(){function a(a){var f,g,h=a.length,i=new Array(h);for(f=0;h>f;++f)i[f]=b(a[f],f,a);var k=c(i),l=k[0],m=k[1],n=d(i,l,m);Array.isArray(n)||(n=e(l,m,n),n=x(Math.ceil(l/n)*n,Math.floor(m/n)*n,n));for(var o=n.length;n[0]<=l;)n.shift(),--o;for(;n[o-1]>m;)n.pop(),--o;var p,q=new Array(o+1);for(f=0;o>=f;++f)p=q[f]=[],p.x0=f>0?n[f-1]:l,p.x1=o>f?n[f]:m;for(f=0;h>f;++f)g=i[f],g>=l&&m>=g&&q[j(n,g,0,o)].push(a[f]);return q}var b=w,c=r,d=C;return a.value=function(c){return arguments.length?(b="function"==typeof c?c:v(c),a):b},a.domain=function(b){return arguments.length?(c="function"==typeof b?b:v([b[0],b[1]]),a):c},a.thresholds=function(b){return arguments.length?(d="function"==typeof b?b:v(Array.isArray(b)?t.call(b):b),a):d},a},E=function(a,b,c){if(null==c&&(c=o),d=a.length){if((b=+b)<=0||2>d)return+c(a[0],0,a);if(b>=1)return+c(a[d-1],d-1,a);var d,e=(d-1)*b,f=Math.floor(e),g=+c(a[f],f,a),h=+c(a[f+1],f+1,a);return g+(h-g)*(e-f)}},F=function(a,b,c){return a=u.call(a,o).sort(g),Math.ceil((c-b)/(2*(E(a,.75)-E(a,.25))*Math.pow(a.length,-1/3)))},G=function(a,b,c){return Math.ceil((c-b)/(3.5*q(a)*Math.pow(a.length,-1/3)))},H=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&c>d&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&c>d&&(d=c);return d},I=function(a,b){var c,d=a.length,e=d,f=-1,g=0;if(null==b)for(;++f<d;)isNaN(c=o(a[f]))?--e:g+=c;else for(;++f<d;)isNaN(c=o(b(a[f],f,a)))?--e:g+=c;return e?g/e:void 0},J=function(a,b){var c,d=a.length,e=-1,f=[];if(null==b)for(;++e<d;)isNaN(c=o(a[e]))||f.push(c);else for(;++e<d;)isNaN(c=o(b(a[e],e,a)))||f.push(c);return E(f.sort(g),.5)},K=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c},L=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&d>c&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&d>c&&(d=c);return d},M=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},N=function(a,b){if(c=a.length){var c,d,e=0,f=0,h=a[f];for(null==b&&(b=g);++e<c;)(b(d=a[e],h)<0||0!==b(h,h))&&(h=d,f=e);return 0===b(h,h)?f:void 0}},O=function(a,b,c){for(var d,e,f=(null==c?a.length:c)-(b=null==b?0:+b);f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},P=function(a,b){var c,d=a.length,e=-1,f=0;if(null==b)for(;++e<d;)(c=+a[e])&&(f+=c);else for(;++e<d;)(c=+b(a[e],e,a))&&(f+=c);return f},Q=function(a){if(!(e=a.length))return[];for(var b=-1,c=L(a,f),d=new Array(c);++b<c;)for(var e,g=-1,h=d[b]=new Array(e);++g<e;)h[g]=a[g][b];return d},R=function(){return Q(arguments)};a.bisect=j,a.bisectRight=j,a.bisectLeft=k,a.ascending=g,a.bisector=h,a.cross=m,a.descending=n,a.deviation=q,a.extent=r,a.histogram=D,a.thresholdFreedmanDiaconis=F,a.thresholdScott=G,a.thresholdSturges=C,a.max=H,a.mean=I,a.median=J,a.merge=K,a.min=L,a.pairs=l,a.permute=M,a.quantile=E,a.range=x,a.scan=N,a.shuffle=O,a.sum=P,a.ticks=B,a.tickIncrement=d,a.tickStep=e,a.transpose=Q,a.variance=p,a.zip=R,Object.defineProperty(a,"__esModule",{value:!0})})},{}],116:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(){}function c(a,c){var d=new b;if(a instanceof b)a.each(function(a,b){d.set(b,a)});else if(Array.isArray(a)){var e,f=-1,g=a.length;if(null==c)for(;++f<g;)d.set(f,a[f]);else for(;++f<g;)d.set(c(e=a[f],f,a),e)}else if(a)for(var h in a)d.set(h,a[h]);return d}function d(){return{}}function e(a,b,c){a[b]=c}function f(){return c()}function g(a,b,c){a.set(b,c)}function h(){}function i(a,b){var c=new h;if(a instanceof h)a.each(function(a){c.add(a)});else if(a){var d=-1,e=a.length;if(null==b)for(;++d<e;)c.add(a[d]);else for(;++d<e;)c.add(b(a[d],d,a))}return c}var j="$";b.prototype=c.prototype={constructor:b,has:function(a){return j+a in this},get:function(a){return this[j+a]},set:function(a,b){return this[j+a]=b,this},remove:function(a){var b=j+a;return b in this&&delete this[b]},clear:function(){for(var a in this)a[0]===j&&delete this[a]},keys:function(){var a=[];for(var b in this)b[0]===j&&a.push(b.slice(1));return a},values:function(){var a=[];for(var b in this)b[0]===j&&a.push(this[b]);return a},entries:function(){var a=[];for(var b in this)b[0]===j&&a.push({key:b.slice(1),value:this[b]});return a},size:function(){var a=0;for(var b in this)b[0]===j&&++a;return a},empty:function(){for(var a in this)if(a[0]===j)return!1;return!0},each:function(a){for(var b in this)b[0]===j&&a(this[b],b.slice(1),this)}};var k=function(){function a(b,d,e,f){if(d>=k.length)return null!=i?i(b):null!=h?b.sort(h):b;for(var g,j,l,m=-1,n=b.length,o=k[d++],p=c(),q=e();++m<n;)(l=p.get(g=o(j=b[m])+""))?l.push(j):p.set(g,[j]);return p.each(function(b,c){f(q,c,a(b,d,e,f))}),q}function b(a,c){if(++c>k.length)return a;var d,e=l[c-1];return null!=i&&c>=k.length?d=a.entries():(d=[],a.each(function(a,e){d.push({key:e,values:b(a,c)})})),null!=e?d.sort(function(a,b){return e(a.key,b.key)}):d}var h,i,j,k=[],l=[];return j={object:function(b){return a(b,0,d,e)},map:function(b){return a(b,0,f,g)},entries:function(c){return b(a(c,0,f,g),0)},key:function(a){return k.push(a),j},sortKeys:function(a){return l[k.length-1]=a,j},sortValues:function(a){return h=a,j},rollup:function(a){return i=a,j}}},l=c.prototype;h.prototype=i.prototype={constructor:h,has:l.has,add:function(a){return a+="",this[j+a]=a,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};var m=function(a){var b=[];for(var c in a)b.push(c);return b},n=function(a){var b=[];for(var c in a)b.push(a[c]);return b},o=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b};a.nest=k,a.set=i,a.map=c,a.keys=m,a.values=n,a.entries=o,Object.defineProperty(a,"__esModule",{value:!0})})},{}],117:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function c(){}function d(a){var b;return a=(a+"").trim().toLowerCase(),(b=H.exec(a))?(b=parseInt(b[1],16),new i(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1)):(b=I.exec(a))?e(parseInt(b[1],16)):(b=J.exec(a))?new i(b[1],b[2],b[3],1):(b=K.exec(a))?new i(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=L.exec(a))?f(b[1],b[2],b[3],b[4]):(b=M.exec(a))?f(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=N.exec(a))?j(b[1],b[2]/100,b[3]/100,1):(b=O.exec(a))?j(b[1],b[2]/100,b[3]/100,b[4]):P.hasOwnProperty(a)?e(P[a]):"transparent"===a?new i(NaN,NaN,NaN,0):null}function e(a){return new i(a>>16&255,a>>8&255,255&a,1)}function f(a,b,c,d){return 0>=d&&(a=b=c=NaN),new i(a,b,c,d)}function g(a){return a instanceof c||(a=d(a)),a?(a=a.rgb(),new i(a.r,a.g,a.b,a.opacity)):new i}function h(a,b,c,d){return 1===arguments.length?g(a):new i(a,b,c,null==d?1:d)}function i(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function j(a,b,c,d){return 0>=d?a=b=c=NaN:0>=c||c>=1?a=b=NaN:0>=b&&(a=NaN),new m(a,b,c,d)}function k(a){if(a instanceof m)return new m(a.h,a.s,a.l,a.opacity);if(a instanceof c||(a=d(a)),!a)return new m;if(a instanceof m)return a;a=a.rgb();var b=a.r/255,e=a.g/255,f=a.b/255,g=Math.min(b,e,f),h=Math.max(b,e,f),i=NaN,j=h-g,k=(h+g)/2;return j?(i=b===h?(e-f)/j+6*(f>e):e===h?(f-b)/j+2:(b-e)/j+4,j/=.5>k?h+g:2-h-g,i*=60):j=k>0&&1>k?0:i,new m(i,j,k,a.opacity)}function l(a,b,c,d){return 1===arguments.length?k(a):new m(a,b,c,null==d?1:d)}function m(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function n(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function o(a){if(a instanceof q)return new q(a.l,a.a,a.b,a.opacity);if(a instanceof x){var b=a.h*Q;return new q(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof i||(a=g(a));var c=u(a.r),d=u(a.g),e=u(a.b),f=r((.4124564*c+.3575761*d+.1804375*e)/T),h=r((.2126729*c+.7151522*d+.072175*e)/U),j=r((.0193339*c+.119192*d+.9503041*e)/V);return new q(116*h-16,500*(f-h),200*(h-j),a.opacity)}function p(a,b,c,d){return 1===arguments.length?o(a):new q(a,b,c,null==d?1:d)}function q(a,b,c,d){this.l=+a,this.a=+b,this.b=+c,this.opacity=+d}function r(a){return a>Z?Math.pow(a,1/3):a/Y+W}function s(a){return a>X?a*a*a:Y*(a-W)}function t(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function u(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function v(a){if(a instanceof x)return new x(a.h,a.c,a.l,a.opacity);a instanceof q||(a=o(a));var b=Math.atan2(a.b,a.a)*R;return new x(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function w(a,b,c,d){return 1===arguments.length?v(a):new x(a,b,c,null==d?1:d)}function x(a,b,c,d){this.h=+a,this.c=+b,this.l=+c,this.opacity=+d}function y(a){if(a instanceof A)return new A(a.h,a.s,a.l,a.opacity);a instanceof i||(a=g(a));var b=a.r/255,c=a.g/255,d=a.b/255,e=(fa*d+da*b-ea*c)/(fa+da-ea),f=d-e,h=(ca*(c-e)-aa*f)/ba,j=Math.sqrt(h*h+f*f)/(ca*e*(1-e)),k=j?Math.atan2(h,f)*R-120:NaN;return new A(0>k?k+360:k,j,e,a.opacity)}function z(a,b,c,d){return 1===arguments.length?y(a):new A(a,b,c,null==d?1:d)}function A(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}var B=function(a,b,c){a.prototype=b.prototype=c,c.constructor=a},C=.7,D=1/C,E="\\s*([+-]?\\d+)\\s*",F="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",G="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",H=/^#([0-9a-f]{3})$/,I=/^#([0-9a-f]{6})$/,J=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),K=new RegExp("^rgb\\("+[G,G,G]+"\\)$"),L=new RegExp("^rgba\\("+[E,E,E,F]+"\\)$"),M=new RegExp("^rgba\\("+[G,G,G,F]+"\\)$"),N=new RegExp("^hsl\\("+[F,G,G]+"\\)$"),O=new RegExp("^hsla\\("+[F,G,G,F]+"\\)$"),P={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};B(c,d,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),B(i,h,b(c,{brighter:function(a){return a=null==a?D:Math.pow(D,a),new i(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?C:Math.pow(C,a),new i(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),B(m,l,b(c,{brighter:function(a){return a=null==a?D:Math.pow(D,a),new m(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?C:Math.pow(C,a),new m(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(.5>c?c:1-c)*b,e=2*c-d;return new i(n(a>=240?a-240:a+120,e,d),n(a,e,d),n(120>a?a+240:a-120,e,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Q=Math.PI/180,R=180/Math.PI,S=18,T=.95047,U=1,V=1.08883,W=4/29,X=6/29,Y=3*X*X,Z=X*X*X;B(q,p,b(c,{brighter:function(a){return new q(this.l+S*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new q(this.l-S*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;return a=U*s(a),b=T*s(b),c=V*s(c),new i(t(3.2404542*b-1.5371385*a-.4985314*c),t(-.969266*b+1.8760108*a+.041556*c),t(.0556434*b-.2040259*a+1.0572252*c),this.opacity)}})),B(x,w,b(c,{brighter:function(a){return new x(this.h,this.c,this.l+S*(null==a?1:a),this.opacity)},darker:function(a){return new x(this.h,this.c,this.l-S*(null==a?1:a),this.opacity)},rgb:function(){return o(this).rgb()}}));var $=-.14861,_=1.78277,aa=-.29227,ba=-.90649,ca=1.97294,da=ca*ba,ea=ca*_,fa=_*aa-ba*$;B(A,z,b(c,{brighter:function(a){return a=null==a?D:Math.pow(D,a),new A(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?C:Math.pow(C,a),new A(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Q,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a),e=Math.sin(a);return new i(255*(b+c*($*d+_*e)),255*(b+c*(aa*d+ba*e)),255*(b+c*(ca*d)),this.opacity)}})),a.color=d,a.rgb=h,a.hsl=l,a.lab=p,a.hcl=w,a.cubehelix=z,Object.defineProperty(a,"__esModule",{value:!0})})},{}],118:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(){for(var a,b=0,d=arguments.length,e={};d>b;++b){if(!(a=arguments[b]+"")||a in e)throw new Error("illegal type: "+a);e[a]=[]}return new c(e)}function c(a){this._=a}function d(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");if(d>=0&&(c=a.slice(d+1),a=a.slice(0,d)),a&&!b.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}function e(a,b){for(var c,d=0,e=a.length;e>d;++d)if((c=a[d]).name===b)return c.value}function f(a,b,c){for(var d=0,e=a.length;e>d;++d)if(a[d].name===b){a[d]=g,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}var g={value:function(){}};c.prototype=b.prototype={constructor:c,on:function(a,b){var c,g=this._,h=d(a+"",g),i=-1,j=h.length;{if(!(arguments.length<2)){if(null!=b&&"function"!=typeof b)throw new Error("invalid callback: "+b);for(;++i<j;)if(c=(a=h[i]).type)g[c]=f(g[c],a.name,b);else if(null==b)for(c in g)g[c]=f(g[c],a.name,null);return this}for(;++i<j;)if((c=(a=h[i]).type)&&(c=e(g[c],a.name)))return c}},copy:function(){var a={},b=this._;for(var d in b)a[d]=b[d].slice();return new c(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=new Array(c),f=0;c>f;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;c>f;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;f>e;++e)d[e].value.apply(b,c)}},a.dispatch=b,Object.defineProperty(a,"__esModule",{value:!0})})},{}],119:[function(b,c,d){!function(e,f){"object"==typeof d&&"undefined"!=typeof c?f(d,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):"function"==typeof a&&a.amd?a(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],f):f(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3)}(this,function(a,b,c,d,e){"use strict";function f(a){return a.x+a.vx}function g(a){return a.y+a.vy}function h(a){return a.index}function i(a,b){var c=a.get(b);if(!c)throw new Error("missing: "+b);return c}function j(a){return a.x}function k(a){return a.y}var l=function(a,b){function c(){var c,e,f=d.length,g=0,h=0;for(c=0;f>c;++c)e=d[c],g+=e.x,h+=e.y;for(g=g/f-a,h=h/f-b,c=0;f>c;++c)e=d[c],e.x-=g,e.y-=h}var d;return null==a&&(a=0),null==b&&(b=0),c.initialize=function(a){d=a},c.x=function(b){return arguments.length?(a=+b,c):a},c.y=function(a){return arguments.length?(b=+a,c):b},c},m=function(a){return function(){return a}},n=function(){return 1e-6*(Math.random()-.5)},o=function(a){function c(){function a(a,b,c,d,e){var f=a.data,g=a.r,h=p+g;{if(!f)return b>m+h||m-h>d||c>o+h||o-h>e;if(f.index>l.index){var i=m-f.x-f.vx,k=o-f.y-f.vy,r=i*i+k*k;h*h>r&&(0===i&&(i=n(),r+=i*i),0===k&&(k=n(),r+=k*k),r=(h-(r=Math.sqrt(r)))/r*j,l.vx+=(i*=r)*(h=(g*=g)/(q+g)),l.vy+=(k*=r)*h,f.vx-=i*(h=1-h),f.vy-=k*h)}}}for(var c,e,l,m,o,p,q,r=h.length,s=0;k>s;++s)for(e=b.quadtree(h,f,g).visitAfter(d),c=0;r>c;++c)l=h[c],p=i[l.index],q=p*p,m=l.x+l.vx,o=l.y+l.vy,e.visit(a)}function d(a){if(a.data)return a.r=i[a.data.index];for(var b=a.r=0;4>b;++b)a[b]&&a[b].r>a.r&&(a.r=a[b].r)}function e(){if(h){var b,c,d=h.length;for(i=new Array(d),b=0;d>b;++b)c=h[b],i[c.index]=+a(c,b,h)}}var h,i,j=1,k=1;return"function"!=typeof a&&(a=m(null==a?1:+a)),c.initialize=function(a){h=a,e()},c.iterations=function(a){return arguments.length?(k=+a,c):k},c.strength=function(a){return arguments.length?(j=+a,c):j},c.radius=function(b){return arguments.length?(a="function"==typeof b?b:m(+b),e(),c):a},c},p=function(a){function b(a){return 1/Math.min(o[a.source.index],o[a.target.index])}function d(b){for(var c=0,d=a.length;t>c;++c)for(var e,f,g,h,i,l,m,o=0;d>o;++o)e=a[o],f=e.source,g=e.target,h=g.x+g.vx-f.x-f.vx||n(),i=g.y+g.vy-f.y-f.vy||n(),l=Math.sqrt(h*h+i*i),l=(l-k[o])/l*b*j[o],h*=l,i*=l,g.vx-=h*(m=p[o]),g.vy-=i*m,f.vx+=h*(m=1-m),f.vy+=i*m}function e(){if(l){var b,d,e=l.length,h=a.length,m=c.map(l,q);for(b=0,o=new Array(e);h>b;++b)d=a[b],d.index=b,"object"!=typeof d.source&&(d.source=i(m,d.source)),"object"!=typeof d.target&&(d.target=i(m,d.target)),o[d.source.index]=(o[d.source.index]||0)+1,o[d.target.index]=(o[d.target.index]||0)+1;for(b=0,p=new Array(h);h>b;++b)d=a[b],p[b]=o[d.source.index]/(o[d.source.index]+o[d.target.index]);j=new Array(h),f(),k=new Array(h),g()}}function f(){if(l)for(var b=0,c=a.length;c>b;++b)j[b]=+r(a[b],b,a)}function g(){if(l)for(var b=0,c=a.length;c>b;++b)k[b]=+s(a[b],b,a)}var j,k,l,o,p,q=h,r=b,s=m(30),t=1;return null==a&&(a=[]),d.initialize=function(a){l=a,e()},d.links=function(b){return arguments.length?(a=b,e(),d):a},d.id=function(a){return arguments.length?(q=a,d):q},d.iterations=function(a){return arguments.length?(t=+a,d):t},d.strength=function(a){return arguments.length?(r="function"==typeof a?a:m(+a),f(),d):r},d.distance=function(a){return arguments.length?(s="function"==typeof a?a:m(+a),g(),d):s},d},q=10,r=Math.PI*(3-Math.sqrt(5)),s=function(a){function b(){f(),s.call("tick",i),k>j&&(p.stop(),s.call("end",i))}function f(){var b,c,d=a.length;for(j+=(m-j)*l,o.each(function(a){a(j)}),b=0;d>b;++b)c=a[b],null==c.fx?c.x+=c.vx*=n:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=n:(c.y=c.fy,c.vy=0)}function g(){for(var b,c=0,d=a.length;d>c;++c){if(b=a[c],b.index=c,isNaN(b.x)||isNaN(b.y)){var e=q*Math.sqrt(c),f=c*r;b.x=e*Math.cos(f),b.y=e*Math.sin(f)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function h(b){return b.initialize&&b.initialize(a),b}var i,j=1,k=.001,l=1-Math.pow(k,1/300),m=0,n=.6,o=c.map(),p=e.timer(b),s=d.dispatch("tick","end");return null==a&&(a=[]),g(),i={tick:f,restart:function(){return p.restart(b),i},stop:function(){return p.stop(),i},nodes:function(b){return arguments.length?(a=b,g(),o.each(h),i):a},alpha:function(a){return arguments.length?(j=+a,i):j},alphaMin:function(a){return arguments.length?(k=+a,i):k},alphaDecay:function(a){return arguments.length?(l=+a,i):+l},alphaTarget:function(a){return arguments.length?(m=+a,i):m},velocityDecay:function(a){return arguments.length?(n=1-a,i):1-n},force:function(a,b){return arguments.length>1?(null==b?o.remove(a):o.set(a,h(b)),i):o.get(a)},find:function(b,c,d){var e,f,g,h,i,j=0,k=a.length;for(null==d?d=1/0:d*=d,j=0;k>j;++j)h=a[j],e=b-h.x,f=c-h.y,g=e*e+f*f,d>g&&(i=h,d=g);return i},on:function(a,b){return arguments.length>1?(s.on(a,b),i):s.on(a)}}},t=function(){function a(a){var c,i=f.length,l=b.quadtree(f,j,k).visitAfter(d);for(h=a,c=0;i>c;++c)g=f[c],l.visit(e)}function c(){if(f){var a,b,c=f.length;for(i=new Array(c),a=0;c>a;++a)b=f[a],i[b.index]=+l(b,a,f)}}function d(a){var b,c,d,e,f,g=0;if(a.length){for(d=e=f=0;4>f;++f)(b=a[f])&&(c=b.value)&&(g+=c,d+=c*b.x,e+=c*b.y);a.x=d/g,a.y=e/g}else{b=a,b.x=b.data.x,b.y=b.data.y;do g+=i[b.data.index];while(b=b.next)}a.value=g}function e(a,b,c,d){if(!a.value)return!0;var e=a.x-g.x,f=a.y-g.y,j=d-b,k=e*e+f*f;if(k>j*j/q)return p>k&&(0===e&&(e=n(),k+=e*e),0===f&&(f=n(),k+=f*f),o>k&&(k=Math.sqrt(o*k)),g.vx+=e*a.value*h/k,g.vy+=f*a.value*h/k),!0;if(!(a.length||k>=p)){(a.data!==g||a.next)&&(0===e&&(e=n(),k+=e*e),0===f&&(f=n(),k+=f*f),o>k&&(k=Math.sqrt(o*k)));do a.data!==g&&(j=i[a.data.index]*h/k,g.vx+=e*j,g.vy+=f*j);while(a=a.next)}}var f,g,h,i,l=m(-30),o=1,p=1/0,q=.81;return a.initialize=function(a){f=a,c()},a.strength=function(b){return arguments.length?(l="function"==typeof b?b:m(+b),c(),a):l},a.distanceMin=function(b){return arguments.length?(o=b*b,a):Math.sqrt(o)},a.distanceMax=function(b){return arguments.length?(p=b*b,a):Math.sqrt(p)},a.theta=function(b){return arguments.length?(q=b*b,a):Math.sqrt(q)},a},u=function(a){function b(a){for(var b,c=0,g=d.length;g>c;++c)b=d[c],b.vx+=(f[c]-b.x)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;c>b;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=m(.1);return"function"!=typeof a&&(a=m(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:m(+a),c(),b):g},b.x=function(d){return arguments.length?(a="function"==typeof d?d:m(+d),c(),b):a},b},v=function(a){function b(a){for(var b,c=0,g=d.length;g>c;++c)b=d[c],b.vy+=(f[c]-b.y)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;c>b;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=m(.1);return"function"!=typeof a&&(a=m(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:m(+a),c(),b):g},b.y=function(d){return arguments.length?(a="function"==typeof d?d:m(+d),c(),b):a},b};a.forceCenter=l,a.forceCollide=o,a.forceLink=p,a.forceManyBody=t,a.forceSimulation=s,a.forceX=u,a.forceY=v,Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-collection":116,"d3-dispatch":118,"d3-quadtree":121,"d3-timer":122}],120:[function(b,c,d){!function(e,f){"object"==typeof d&&"undefined"!=typeof c?f(d,b("d3-color")):"function"==typeof a&&a.amd?a(["exports","d3-color"],f):f(e.d3=e.d3||{},e.d3)}(this,function(a,b){"use strict";function c(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}function d(a,b){return function(c){return a+c*b}}function e(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function f(a,b){var c=b-a;return c?d(a,c>180||-180>c?c-360*Math.round(c/360):c):B(isNaN(a)?b:a)}function g(a){return 1===(a=+a)?h:function(b,c){return c-b?e(b,c,a):B(isNaN(b)?c:b)}}function h(a,b){var c=b-a;return c?d(a,c):B(isNaN(a)?b:a)}function i(a){return function(c){var d,e,f=c.length,g=new Array(f),h=new Array(f),i=new Array(f);for(d=0;f>d;++d)e=b.rgb(c[d]),g[d]=e.r||0,h[d]=e.g||0,i[d]=e.b||0;return g=a(g),h=a(h),i=a(i),e.opacity=1,function(a){return e.r=g(a),e.g=h(a),e.b=i(a),
e+""}}}function j(a){return function(){return a}}function k(a){return function(b){return a(b)+""}}function l(a){return"none"===a?P:(v||(v=document.createElement("DIV"),w=document.documentElement,x=document.defaultView),v.style.transform=a,a=x.getComputedStyle(w.appendChild(v),null).getPropertyValue("transform"),w.removeChild(v),a=a.slice(7,-1).split(","),Q(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5]))}function m(a){return null==a?P:(y||(y=document.createElementNS("http://www.w3.org/2000/svg","g")),y.setAttribute("transform",a),(a=y.transform.baseVal.consolidate())?(a=a.matrix,Q(a.a,a.b,a.c,a.d,a.e,a.f)):P)}function n(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function f(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:H(a,e)},{i:i-2,x:H(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}function g(a,b,c,f){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:H(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:H(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function i(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:H(a,c)},{i:h-2,x:H(b,d)})}else(1!==c||1!==d)&&f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];return b=a(b),c=a(c),f(b.translateX,b.translateY,c.translateX,c.translateY,d,e),g(b.rotate,c.rotate,d,e),h(b.skewX,c.skewX,d,e),i(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e),b=c=null,function(a){for(var b,c=-1,f=e.length;++c<f;)d[(b=e[c]).i]=b.x(a);return d.join("")}}}function o(a){return((a=Math.exp(a))+1/a)/2}function p(a){return((a=Math.exp(a))-1/a)/2}function q(a){return((a=Math.exp(2*a))-1)/(a+1)}function r(a){return function(c,d){var e=a((c=b.hsl(c)).h,(d=b.hsl(d)).h),f=h(c.s,d.s),g=h(c.l,d.l),i=h(c.opacity,d.opacity);return function(a){return c.h=e(a),c.s=f(a),c.l=g(a),c.opacity=i(a),c+""}}}function s(a,c){var d=h((a=b.lab(a)).l,(c=b.lab(c)).l),e=h(a.a,c.a),f=h(a.b,c.b),g=h(a.opacity,c.opacity);return function(b){return a.l=d(b),a.a=e(b),a.b=f(b),a.opacity=g(b),a+""}}function t(a){return function(c,d){var e=a((c=b.hcl(c)).h,(d=b.hcl(d)).h),f=h(c.c,d.c),g=h(c.l,d.l),i=h(c.opacity,d.opacity);return function(a){return c.h=e(a),c.c=f(a),c.l=g(a),c.opacity=i(a),c+""}}}function u(a){return function c(d){function e(c,e){var f=a((c=b.cubehelix(c)).h,(e=b.cubehelix(e)).h),g=h(c.s,e.s),i=h(c.l,e.l),j=h(c.opacity,e.opacity);return function(a){return c.h=f(a),c.s=g(a),c.l=i(Math.pow(a,d)),c.opacity=j(a),c+""}}return d=+d,e.gamma=c,e}(1)}var v,w,x,y,z=function(a){var b=a.length-1;return function(d){var e=0>=d?d=0:d>=1?(d=1,b-1):Math.floor(d*b),f=a[e],g=a[e+1],h=e>0?a[e-1]:2*f-g,i=b-1>e?a[e+2]:2*g-f;return c((d-e/b)*b,h,f,g,i)}},A=function(a){var b=a.length;return function(d){var e=Math.floor(((d%=1)<0?++d:d)*b),f=a[(e+b-1)%b],g=a[e%b],h=a[(e+1)%b],i=a[(e+2)%b];return c((d-e/b)*b,f,g,h,i)}},B=function(a){return function(){return a}},C=function da(a){function c(a,c){var e=d((a=b.rgb(a)).r,(c=b.rgb(c)).r),f=d(a.g,c.g),g=d(a.b,c.b),i=h(a.opacity,c.opacity);return function(b){return a.r=e(b),a.g=f(b),a.b=g(b),a.opacity=i(b),a+""}}var d=g(a);return c.gamma=da,c}(1),D=i(z),E=i(A),F=function(a,b){var c,d=b?b.length:0,e=a?Math.min(d,a.length):0,f=new Array(d),g=new Array(d);for(c=0;e>c;++c)f[c]=M(a[c],b[c]);for(;d>c;++c)g[c]=b[c];return function(a){for(c=0;e>c;++c)g[c]=f[c](a);return g}},G=function(a,b){var c=new Date;return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}},H=function(a,b){return a=+a,b-=a,function(c){return a+b*c}},I=function(a,b){var c,d={},e={};(null===a||"object"!=typeof a)&&(a={}),(null===b||"object"!=typeof b)&&(b={});for(c in b)c in a?d[c]=M(a[c],b[c]):e[c]=b[c];return function(a){for(c in d)e[c]=d[c](a);return e}},J=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,K=new RegExp(J.source,"g"),L=function(a,b){var c,d,e,f=J.lastIndex=K.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=J.exec(a))&&(d=K.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:H(c,d)})),f=K.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?k(i[0].x):j(b):(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})},M=function(a,c){var d,e=typeof c;return null==c||"boolean"===e?B(c):("number"===e?H:"string"===e?(d=b.color(c))?(c=d,C):L:c instanceof b.color?C:c instanceof Date?G:Array.isArray(c)?F:"function"!=typeof c.valueOf&&"function"!=typeof c.toString||isNaN(c)?I:H)(a,c)},N=function(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}},O=180/Math.PI,P={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Q=function(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),b*c>a*d&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*O,skewX:Math.atan(i)*O,scaleX:g,scaleY:h}},R=n(l,"px, ","px)","deg)"),S=n(m,", ",")",")"),T=Math.SQRT2,U=2,V=4,W=1e-12,X=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(W>m)d=Math.log(j/g)/T,c=function(a){return[e+a*k,f+a*l,g*Math.exp(T*a*d)]};else{var n=Math.sqrt(m),r=(j*j-g*g+V*m)/(2*g*U*n),s=(j*j-g*g-V*m)/(2*j*U*n),t=Math.log(Math.sqrt(r*r+1)-r),u=Math.log(Math.sqrt(s*s+1)-s);d=(u-t)/T,c=function(a){var b=a*d,c=o(t),h=g/(U*n)*(c*q(T*b+t)-p(t));return[e+h*k,f+h*l,g*c/o(T*b+t)]}}return c.duration=1e3*d,c},Y=r(f),Z=r(h),$=t(f),_=t(h),aa=u(f),ba=u(h),ca=function(a,b){for(var c=new Array(b),d=0;b>d;++d)c[d]=a(d/(b-1));return c};a.interpolate=M,a.interpolateArray=F,a.interpolateBasis=z,a.interpolateBasisClosed=A,a.interpolateDate=G,a.interpolateNumber=H,a.interpolateObject=I,a.interpolateRound=N,a.interpolateString=L,a.interpolateTransformCss=R,a.interpolateTransformSvg=S,a.interpolateZoom=X,a.interpolateRgb=C,a.interpolateRgbBasis=D,a.interpolateRgbBasisClosed=E,a.interpolateHsl=Y,a.interpolateHslLong=Z,a.interpolateLab=s,a.interpolateHcl=$,a.interpolateHclLong=_,a.interpolateCubehelix=aa,a.interpolateCubehelixLong=ba,a.quantize=ca,Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-color":117}],121:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(a,b,c,d){if(isNaN(b)||isNaN(c))return a;var e,f,g,h,i,j,k,l,m,n=a._root,o={data:d},p=a._x0,q=a._y0,r=a._x1,s=a._y1;if(!n)return a._root=o,a;for(;n.length;)if((j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g,e=n,!(n=n[l=k<<1|j]))return e[l]=o,a;if(h=+a._x.call(null,n.data),i=+a._y.call(null,n.data),b===h&&c===i)return o.next=n,e?e[l]=o:a._root=o,a;do e=e?e[l]=new Array(4):a._root=new Array(4),(j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g;while((l=k<<1|j)===(m=(i>=g)<<1|h>=f));return e[m]=n,e[l]=o,a}function c(a){var c,d,e,f,g=a.length,h=new Array(g),i=new Array(g),j=1/0,k=1/0,l=-(1/0),m=-(1/0);for(d=0;g>d;++d)isNaN(e=+this._x.call(null,c=a[d]))||isNaN(f=+this._y.call(null,c))||(h[d]=e,i[d]=f,j>e&&(j=e),e>l&&(l=e),k>f&&(k=f),f>m&&(m=f));for(j>l&&(j=this._x0,l=this._x1),k>m&&(k=this._y0,m=this._y1),this.cover(j,k).cover(l,m),d=0;g>d;++d)b(this,h[d],i[d],a[d]);return this}function d(a){for(var b=0,c=a.length;c>b;++b)this.remove(a[b]);return this}function e(a){return a[0]}function f(a){return a[1]}function g(a,b,c){var d=new h(null==b?e:b,null==c?f:c,NaN,NaN,NaN,NaN);return null==a?d:d.addAll(a)}function h(a,b,c,d,e,f){this._x=a,this._y=b,this._x0=c,this._y0=d,this._x1=e,this._y1=f,this._root=void 0}function i(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}var j=function(a){var c=+this._x.call(null,a),d=+this._y.call(null,a);return b(this.cover(c,d),c,d,a)},k=function(a,b){if(isNaN(a=+a)||isNaN(b=+b))return this;var c=this._x0,d=this._y0,e=this._x1,f=this._y1;if(isNaN(c))e=(c=Math.floor(a))+1,f=(d=Math.floor(b))+1;else{if(!(c>a||a>e||d>b||b>f))return this;var g,h,i=e-c,j=this._root;switch(h=((d+f)/2>b)<<1|(c+e)/2>a){case 0:do g=new Array(4),g[h]=j,j=g;while(i*=2,e=c+i,f=d+i,a>e||b>f);break;case 1:do g=new Array(4),g[h]=j,j=g;while(i*=2,c=e-i,f=d+i,c>a||b>f);break;case 2:do g=new Array(4),g[h]=j,j=g;while(i*=2,e=c+i,d=f-i,a>e||d>b);break;case 3:do g=new Array(4),g[h]=j,j=g;while(i*=2,c=e-i,d=f-i,c>a||d>b)}this._root&&this._root.length&&(this._root=j)}return this._x0=c,this._y0=d,this._x1=e,this._y1=f,this},l=function(){var a=[];return this.visit(function(b){if(!b.length)do a.push(b.data);while(b=b.next)}),a},m=function(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n=function(a,b,c,d,e){this.node=a,this.x0=b,this.y0=c,this.x1=d,this.y1=e},o=function(a,b,c){var d,e,f,g,h,i,j,k=this._x0,l=this._y0,m=this._x1,o=this._y1,p=[],q=this._root;for(q&&p.push(new n(q,k,l,m,o)),null==c?c=1/0:(k=a-c,l=b-c,m=a+c,o=b+c,c*=c);i=p.pop();)if(!(!(q=i.node)||(e=i.x0)>m||(f=i.y0)>o||(g=i.x1)<k||(h=i.y1)<l))if(q.length){var r=(e+g)/2,s=(f+h)/2;p.push(new n(q[3],r,s,g,h),new n(q[2],e,s,r,h),new n(q[1],r,f,g,s),new n(q[0],e,f,r,s)),(j=(b>=s)<<1|a>=r)&&(i=p[p.length-1],p[p.length-1]=p[p.length-1-j],p[p.length-1-j]=i)}else{var t=a-+this._x.call(null,q.data),u=b-+this._y.call(null,q.data),v=t*t+u*u;if(c>v){var w=Math.sqrt(c=v);k=a-w,l=b-w,m=a+w,o=b+w,d=q.data}}return d},p=function(a){if(isNaN(f=+this._x.call(null,a))||isNaN(g=+this._y.call(null,a)))return this;var b,c,d,e,f,g,h,i,j,k,l,m,n=this._root,o=this._x0,p=this._y0,q=this._x1,r=this._y1;if(!n)return this;if(n.length)for(;;){if((j=f>=(h=(o+q)/2))?o=h:q=h,(k=g>=(i=(p+r)/2))?p=i:r=i,b=n,!(n=n[l=k<<1|j]))return this;if(!n.length)break;(b[l+1&3]||b[l+2&3]||b[l+3&3])&&(c=b,m=l)}for(;n.data!==a;)if(d=n,!(n=n.next))return this;return(e=n.next)&&delete n.next,d?(e?d.next=e:delete d.next,this):b?(e?b[l]=e:delete b[l],(n=b[0]||b[1]||b[2]||b[3])&&n===(b[3]||b[2]||b[1]||b[0])&&!n.length&&(c?c[m]=n:this._root=n),this):(this._root=e,this)},q=function(){return this._root},r=function(){var a=0;return this.visit(function(b){if(!b.length)do++a;while(b=b.next)}),a},s=function(a){var b,c,d,e,f,g,h=[],i=this._root;for(i&&h.push(new n(i,this._x0,this._y0,this._x1,this._y1));b=h.pop();)if(!a(i=b.node,d=b.x0,e=b.y0,f=b.x1,g=b.y1)&&i.length){var j=(d+f)/2,k=(e+g)/2;(c=i[3])&&h.push(new n(c,j,k,f,g)),(c=i[2])&&h.push(new n(c,d,k,j,g)),(c=i[1])&&h.push(new n(c,j,e,f,k)),(c=i[0])&&h.push(new n(c,d,e,j,k))}return this},t=function(a){var b,c=[],d=[];for(this._root&&c.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));b=c.pop();){var e=b.node;if(e.length){var f,g=b.x0,h=b.y0,i=b.x1,j=b.y1,k=(g+i)/2,l=(h+j)/2;(f=e[0])&&c.push(new n(f,g,h,k,l)),(f=e[1])&&c.push(new n(f,k,h,i,l)),(f=e[2])&&c.push(new n(f,g,l,k,j)),(f=e[3])&&c.push(new n(f,k,l,i,j))}d.push(b)}for(;b=d.pop();)a(b.node,b.x0,b.y0,b.x1,b.y1);return this},u=function(a){return arguments.length?(this._x=a,this):this._x},v=function(a){return arguments.length?(this._y=a,this):this._y},w=g.prototype=h.prototype;w.copy=function(){var a,b,c=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return c;if(!d.length)return c._root=i(d),c;for(a=[{source:d,target:c._root=new Array(4)}];d=a.pop();)for(var e=0;4>e;++e)(b=d.source[e])&&(b.length?a.push({source:b,target:d.target[e]=new Array(4)}):d.target[e]=i(b));return c},w.add=j,w.addAll=c,w.cover=k,w.data=l,w.extent=m,w.find=o,w.remove=p,w.removeAll=d,w.root=q,w.size=r,w.visit=s,w.visitAfter=t,w.x=u,w.y=v,a.quadtree=g,Object.defineProperty(a,"__esModule",{value:!0})})},{}],122:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(){return r||(u(c),r=t.now()+s)}function c(){r=0}function d(){this._call=this._time=this._next=null}function e(a,b,c){var e=new d;return e.restart(a,b,c),e}function f(){b(),++m;for(var a,c=k;c;)(a=r-c._time)>=0&&c._call.call(null,a),c=c._next;--m}function g(){r=(q=t.now())+s,m=n=0;try{f()}finally{m=0,i(),r=0}}function h(){var a=t.now(),b=a-q;b>p&&(s-=b,q=a)}function i(){for(var a,b,c=k,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:k=b);l=a,j(d)}function j(a){if(!m){n&&(n=clearTimeout(n));var b=a-r;b>24?(1/0>a&&(n=setTimeout(g,b)),o&&(o=clearInterval(o))):(o||(q=r,o=setInterval(h,p)),m=1,u(g))}}var k,l,m=0,n=0,o=0,p=1e3,q=0,r=0,s=0,t="object"==typeof performance&&performance.now?performance:Date,u="function"==typeof requestAnimationFrame?requestAnimationFrame:function(a){setTimeout(a,17)};d.prototype=e.prototype={constructor:d,restart:function(a,c,d){if("function"!=typeof a)throw new TypeError("callback is not a function");d=(null==d?b():+d)+(null==c?0:+c),this._next||l===this||(l?l._next=this:k=this,l=this),this._call=a,this._time=d,j()},stop:function(){this._call&&(this._call=null,this._time=1/0,j())}};var v=function(a,b,c){var e=new d;return b=null==b?0:+b,e.restart(function(c){e.stop(),a(c+b)},b,c),e},w=function(a,c,e){var f=new d,g=c;return null==c?(f.restart(a,c,e),f):(c=+c,e=null==e?b():+e,f.restart(function h(b){b+=g,f.restart(h,g+=c,e),a(b)},c,e),f)};a.now=b,a.timer=e,a.timerFlush=f,a.timeout=v,a.interval=w,Object.defineProperty(a,"__esModule",{value:!0})})},{}],123:[function(b,c,d){!function(){function b(a){return a&&(a.ownerDocument||a.document||a).documentElement}function d(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function e(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function f(a){return null===a?NaN:+a}function g(a){return!isNaN(a)}function h(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function i(a){return a.length}function j(a){for(var b=1;a*b%1;)b*=10;return b}function k(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function l(){this._=Object.create(null)}function m(a){return(a+="")===wg||a[0]===xg?xg+a:a}function n(a){return(a+="")[0]===xg?a.slice(1):a}function o(a){return m(a)in this._}function p(a){return(a=m(a))in this._&&delete this._[a]}function q(){var a=[];for(var b in this._)a.push(n(b));return a}function r(){var a=0;for(var b in this._)++a;return a}function s(){for(var a in this._)return!1;return!0}function t(){this._=Object.create(null)}function u(a){return a}function v(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function w(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=yg.length;d>c;++c){var e=yg[c]+b;if(e in a)return e}}function x(){}function y(){}function z(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new l;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function A(){jg.event.preventDefault()}function B(){for(var a,b=jg.event;a=b.sourceEvent;)b=a;return b}function C(a){for(var b=new y,c=0,d=arguments.length;++c<d;)b[arguments[c]]=z(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=jg.event;e.target=a,jg.event=e,b[e.type].apply(c,d)}finally{jg.event=f}}},b}function D(a){return Ag(a,Eg),a}function E(a){return"function"==typeof a?a:function(){return Bg(a,this)}}function F(a){return"function"==typeof a?a:function(){return Cg(a,this)}}function G(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=jg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function H(a){return a.trim().replace(/\s+/g," ")}function I(a){return new RegExp("(?:^|\\s+)"+jg.requote(a)+"(?:\\s+|$)","g")}function J(a){return(a+"").trim().split(/^|\s+/)}function K(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=J(a).map(L);var e=a.length;return"function"==typeof b?d:c}function L(a){var b=I(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",H(e+" "+a))):c.setAttribute("class",H(e.replace(b," ")))}}function M(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function N(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function O(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c===Fg&&b.documentElement.namespaceURI===Fg?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=jg.ns.qualify(a)).local?c:b}function P(){var a=this.parentNode;a&&a.removeChild(this)}function Q(a){return{__data__:a}}function R(a){return function(){return Dg(this,a)}}function S(a){return arguments.length||(a=e),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function T(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function U(a){return Ag(a,Hg),a}function V(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function W(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,lg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+jg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=X;h>0&&(a=a.slice(0,h));var j=Ig.get(a);return j&&(a=j,i=Y),h?b?e:d:b?x:f}function X(a,b){return function(c){var d=jg.event;jg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{jg.event=d}}}function Y(a,b){var c=X(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function Z(a){var c=".dragsuppress-"+ ++Kg,e="click"+c,f=jg.select(d(a)).on("touchmove"+c,A).on("dragstart"+c,A).on("selectstart"+c,A);if(null==Jg&&(Jg="onselectstart"in a?!1:w(a.style,"userSelect")),Jg){var g=b(a).style,h=g[Jg];g[Jg]="none"}return function(a){if(f.on(c,null),Jg&&(g[Jg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){A(),b()},!0),setTimeout(b,0)}}}function $(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var e=c.createSVGPoint();if(0>Lg){var f=d(a);if(f.scrollX||f.scrollY){c=jg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=c[0][0].getScreenCTM();Lg=!(g.f||g.e),c.remove()}}return Lg?(e.x=b.pageX,e.y=b.pageY):(e.x=b.clientX,e.y=b.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[b.clientX-h.left-a.clientLeft,b.clientY-h.top-a.clientTop]}function _(){return jg.event.changedTouches[0].identifier}function aa(a){return a>0?1:0>a?-1:0}function ba(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ca(a){return a>1?0:-1>a?Og:Math.acos(a)}function da(a){return a>1?Rg:-1>a?-Rg:Math.asin(a)}function ea(a){return((a=Math.exp(a))-1/a)/2}function fa(a){return((a=Math.exp(a))+1/a)/2}function ga(a){return((a=Math.exp(2*a))-1)/(a+1)}function ha(a){return(a=Math.sin(a/2))*a}function ia(){}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.s,a.l):xa(""+a,ya,ja):new ja(a,b,c)}function ka(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new ta(e(a+120),e(a),e(a-120))}function la(a,b,c){return this instanceof la?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof la?new la(a.h,a.c,a.l):a instanceof na?pa(a.l,a.a,a.b):pa((a=za((a=jg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new la(a,b,c)}function ma(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new na(c,Math.cos(a*=Sg)*b,Math.sin(a)*b)}function na(a,b,c){return this instanceof na?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof na?new na(a.l,a.a,a.b):a instanceof la?ma(a.h,a.c,a.l):za((a=ta(a)).r,a.g,a.b):new na(a,b,c)}function oa(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=qa(e)*bh,d=qa(d)*ch,f=qa(f)*dh,new ta(sa(3.2404542*e-1.5371385*d-.4985314*f),sa(-.969266*e+1.8760108*d+.041556*f),sa(.0556434*e-.2040259*d+1.0572252*f))}function pa(a,b,c){return a>0?new la(Math.atan2(c,b)*Tg,Math.sqrt(b*b+c*c),a):new la(NaN,NaN,a)}function qa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function ra(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function sa(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ta(a,b,c){return this instanceof ta?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ta?new ta(a.r,a.g,a.b):xa(""+a,ta,ka):new ta(a,b,c)}function ua(a){return new ta(a>>16,a>>8&255,255&a)}function va(a){return ua(a)+""}function wa(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function xa(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Ba(e[0]),Ba(e[1]),Ba(e[2]))}return(f=gh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function ya(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&1>i?0:d),new ja(d,e,i)}function za(a,b,c){a=Aa(a),b=Aa(b),c=Aa(c);var d=ra((.4124564*a+.3575761*b+.1804375*c)/bh),e=ra((.2126729*a+.7151522*b+.072175*c)/ch),f=ra((.0193339*a+.119192*b+.9503041*c)/dh);return na(116*e-16,500*(d-e),200*(e-f))}function Aa(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ba(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ca(a){return"function"==typeof a?a:function(){return a}}function Da(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Ea(b,c,a,d)}}function Ea(a,b,c,d){function e(){var a,b=i.status;if(!b&&Ga(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=jg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=jg.event;jg.event=a;try{g.progress.call(f,i)}finally{jg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(lg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},jg.rebind(f,g,"on"),null==d?f:f.get(Fa(d))}function Fa(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ga(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ha(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return ih?ih.n=f:hh=f,ih=f,jh||(kh=clearTimeout(kh),jh=1,lh(Ia)),f}function Ia(){var a=Ja(),b=Ka()-a;b>24?(isFinite(b)&&(clearTimeout(kh),kh=setTimeout(Ia,b)),jh=0):(jh=1,lh(Ia))}function Ja(){for(var a=Date.now(),b=hh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ka(){for(var a,b=hh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:hh=b.n;return ih=a,c}function La(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ma(a,b){var c=Math.pow(10,3*vg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Na(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:u;return function(a){var c=nh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=oh.get(n)||Oa;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=jg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Oa(a){return a+""}function Pa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Qa(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new qh(c-1)),1),c}function f(a,c){return b(a=new qh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{qh=Pa;var d=new Pa;return d._=a,g(d,b,c)}finally{qh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Ra(a);return i.floor=i,i.round=Ra(d),i.ceil=Ra(e),i.offset=Ra(f),i.range=h,a}function Ra(a){return function(b,c){try{qh=Pa;var d=new Pa;return d._=b,a(d,c)._}finally{qh=Date}}}function Sa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=sh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&qh!==Pa,g=new(f?Pa:qh);return"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in sh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{qh=Pa;var b=new qh;return b._=a,d(b)}finally{qh=Date}}var d=b(a);return c.parse=function(a){try{qh=Pa;var b=d.parse(a);return b&&b._}finally{qh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=kb;var t=jg.map(),u=Ua(p),v=Va(p),w=Ua(q),x=Va(q),y=Ua(r),z=Va(r),A=Ua(s),B=Va(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ta(a.getDate(),b,2)},e:function(a,b){return Ta(a.getDate(),b,2)},H:function(a,b){return Ta(a.getHours(),b,2)},I:function(a,b){return Ta(a.getHours()%12||12,b,2)},j:function(a,b){return Ta(1+ph.dayOfYear(a),b,3)},L:function(a,b){return Ta(a.getMilliseconds(),b,3)},m:function(a,b){return Ta(a.getMonth()+1,b,2)},M:function(a,b){return Ta(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ta(a.getSeconds(),b,2)},U:function(a,b){return Ta(ph.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ta(ph.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ta(a.getFullYear()%100,b,2)},Y:function(a,b){return Ta(a.getFullYear()%1e4,b,4)},Z:ib,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:cb,e:cb,H:eb,I:eb,j:db,L:hb,m:bb,M:fb,p:k,S:gb,U:Xa,w:Wa,W:Ya,x:i,X:j,y:$a,Y:Za,Z:_a,"%":jb};return b}function Ta(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Ua(a){return new RegExp("^(?:"+a.map(jg.requote).join("|")+")","i")}function Va(a){for(var b=new l,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Wa(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Xa(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Ya(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Za(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function $a(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+2));return d?(a.y=ab(+d[0]),c+d[0].length):-1}function _a(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function ab(a){return a+(a>68?1900:2e3)}function bb(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1;
}function cb(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function db(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function eb(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function fb(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function gb(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function hb(a,b,c){th.lastIndex=0;var d=th.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function ib(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=vg(b)/60|0,e=vg(b)%60;return c+Ta(d,"0",2)+Ta(e,"0",2)}function jb(a,b,c){uh.lastIndex=0;var d=uh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function kb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function lb(){}function mb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function nb(a,b){a&&yh.hasOwnProperty(a.type)&&yh[a.type](a,b)}function ob(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function pb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)ob(a[c],b,1);b.polygonEnd()}function qb(){function a(a,b){a*=Sg,b=b*Sg/2+Og/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);Ah.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;Bh.point=function(g,h){Bh.point=a,d=(b=g)*Sg,e=Math.cos(h=(c=h)*Sg/2+Og/4),f=Math.sin(h)},Bh.lineEnd=function(){a(b,c)}}function rb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function sb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function tb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function ub(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function vb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function wb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function xb(a){return[Math.atan2(a[1],a[0]),da(a[2])]}function yb(a,b){return vg(a[0]-b[0])<Mg&&vg(a[1]-b[1])<Mg}function zb(a,b){a*=Sg;var c=Math.cos(b*=Sg);Ab(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function Ab(a,b,c){++Ch,Eh+=(a-Eh)/Ch,Fh+=(b-Fh)/Ch,Gh+=(c-Gh)/Ch}function Bb(){function a(a,e){a*=Sg;var f=Math.cos(e*=Sg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Dh+=j,Hh+=j*(b+(b=g)),Ih+=j*(c+(c=h)),Jh+=j*(d+(d=i)),Ab(b,c,d)}var b,c,d;Nh.point=function(e,f){e*=Sg;var g=Math.cos(f*=Sg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Nh.point=a,Ab(b,c,d)}}function Cb(){Nh.point=zb}function Db(){function a(a,b){a*=Sg;var c=Math.cos(b*=Sg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ca(n)/m,p=Math.atan2(m,n);Kh+=o*j,Lh+=o*k,Mh+=o*l,Dh+=p,Hh+=p*(d+(d=g)),Ih+=p*(e+(e=h)),Jh+=p*(f+(f=i)),Ab(d,e,f)}var b,c,d,e,f;Nh.point=function(g,h){b=g,c=h,Nh.point=a,g*=Sg;var i=Math.cos(h*=Sg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),Ab(d,e,f)},Nh.lineEnd=function(){a(b,c),Nh.lineEnd=Cb,Nh.point=zb}}function Eb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Fb(){return!0}function Gb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(yb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Ib(c,a,null,!0),j=new Ib(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Ib(d,a,null,!1),j=new Ib(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Hb(f),Hb(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Hb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Ib(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Jb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Kb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=jg.merge(n);var a=Qb(r,o);n.length?(v||(f.polygonStart(),v=!0),Gb(n,Mb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Lb(),u=b(t),v=!1;return s}}function Kb(a){return a.length>1}function Lb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:x,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Mb(a,b){return((a=a.x)[0]<0?a[1]-Rg-Mg:Rg-a[1])-((b=b.x)[0]<0?b[1]-Rg-Mg:Rg-b[1])}function Nb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Og:-Og,i=vg(f-c);vg(i-Og)<Mg?(a.point(c,d=(d+g)/2>0?Rg:-Rg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Og&&(vg(c-e)<Mg&&(c-=e*Mg),vg(f-h)<Mg&&(f-=h*Mg),d=Ob(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Ob(a,b,c,d){var e,f,g=Math.sin(a-c);return vg(g)>Mg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Pb(a,b,c,d){var e;if(null==a)e=c*Rg,d.point(-Og,e),d.point(0,e),d.point(Og,e),d.point(Og,0),d.point(Og,-e),d.point(0,-e),d.point(-Og,-e),d.point(-Og,0),d.point(-Og,e);else if(vg(a[0]-b[0])>Mg){var f=a[0]<b[0]?Og:-Og;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Qb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;Ah.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Og/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Og/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Og,z=o*t;if(Ah.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Pg:v,y^m>=c^r>=c){var A=tb(rb(l),rb(a));wb(A);var B=tb(e,A);wb(B);var C=(y^v>=0?-1:1)*da(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Mg>f||Mg>f&&-Mg>Ah)^1&g}function Rb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Og:-Og),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(yb(c,n)||yb(o,n))&&(o[0]+=Mg,o[1]+=Mg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&yb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=rb(a),e=rb(b),g=[1,0,0],h=tb(d,e),i=sb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=tb(g,h),o=vb(g,l),p=vb(h,m);ub(o,p);var q=n,r=sb(o,q),s=sb(q,q),t=r*r-s*(sb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=vb(q,(-r-u)/s);if(ub(v,o),v=xb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=vg(B-Og)<Mg,D=C||Mg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(vg(v[0]-x)<Mg?z:A):z<=v[1]&&v[1]<=A:B>Og^(x<=v[0]&&v[0]<=y)){var E=vb(q,(-r+u)/s);return ub(E,o),[v,xb(E)]}}}function e(b,c){var d=g?a:Og-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=vg(f)>Mg,i=qc(a,6*Sg);return Jb(b,c,i,g?[0,-a]:[-Og,a-Og])}function Sb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Tb(a,b,c,d){function e(d,e){return vg(d[0]-a)<Mg?e>0?0:3:vg(d[0]-c)<Mg?e>0?2:1:vg(d[1]-b)<Mg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&ba(j,f,a)>0&&++b:f[1]<=d&&ba(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Ph,Math.min(Ph,a)),b=Math.max(-Ph,Math.min(Ph,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Lb(),C=Sb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=jg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Gb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Ub(a){var b=0,c=Og/3,d=ic(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Og/180,c=a[1]*Og/180):[b/Og*180,c/Og*180]},e}function Vb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,da((f-(a*a+c*c)*e*e)/(2*e))]},c}function Wb(){function a(a,b){Rh+=e*a-d*b,d=a,e=b}var b,c,d,e;Wh.point=function(f,g){Wh.point=a,b=d=f,c=e=g},Wh.lineEnd=function(){a(b,c)}}function Xb(a,b){Sh>a&&(Sh=a),a>Uh&&(Uh=a),Th>b&&(Th=b),b>Vh&&(Vh=b)}function Yb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Zb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Zb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Zb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function $b(a,b){Eh+=a,Fh+=b,++Gh}function _b(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Hh+=g*(b+a)/2,Ih+=g*(c+d)/2,Jh+=g,$b(b=a,c=d)}var b,c;Yh.point=function(d,e){Yh.point=a,$b(b=d,c=e)}}function ac(){Yh.point=$b}function bc(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Hh+=g*(d+a)/2,Ih+=g*(e+b)/2,Jh+=g,g=e*a-d*b,Kh+=g*(d+a),Lh+=g*(e+b),Mh+=3*g,$b(d=a,e=b)}var b,c,d,e;Yh.point=function(f,g){Yh.point=a,$b(b=d=f,c=e=g)},Yh.lineEnd=function(){a(b,c)}}function cc(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Pg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:x};return h}function dc(a){function b(a){return(h?d:c)(a)}function c(b){return gc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=rb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=vg(vg(x)-1)<Mg||vg(d-m)<Mg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||vg((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Sg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function ec(a){var b=dc(function(b,c){return a([b*Tg,c*Tg])});return function(a){return jc(b(a))}}function fc(a){this.stream=a}function gc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function hc(a){return ic(function(){return a})()}function ic(a){function b(a){return a=h(a[0]*Sg,a[1]*Sg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Tg,a[1]*Tg]}function d(){h=Eb(g=mc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=dc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,v=Oh,w=u,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=jc(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Oh):Rb((x=+a)*Sg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Tb(a[0][0],a[0][1],a[1][0],a[1][1]):u,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Sg,q=a[1]%360*Sg,d()):[p*Tg,q*Tg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Sg,s=a[1]%360*Sg,t=a.length>2?a[2]%360*Sg:0,d()):[r*Tg,s*Tg,t*Tg]},jg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function jc(a){return gc(a,function(b,c){a.point(b*Sg,c*Sg)})}function kc(a,b){return[a,b]}function lc(a,b){return[a>Og?a-Pg:-Og>a?a+Pg:a,b]}function mc(a,b,c){return a?b||c?Eb(oc(a),pc(b,c)):oc(a):b||c?pc(b,c):lc}function nc(a){return function(b,c){return b+=a,[b>Og?b-Pg:-Og>b?b+Pg:b,c]}}function oc(a){var b=nc(a);return b.invert=nc(-a),b}function pc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),da(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),da(k*d-h*e)]},c}function qc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=rc(c,e),f=rc(c,f),(g>0?f>e:e>f)&&(e+=g*Pg)):(e=a+g*Pg,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=xb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function rc(a,b){var c=rb(b);c[0]-=a,wb(c);var d=ca(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Mg)%(2*Math.PI)}function sc(a,b,c){var d=jg.range(a,b-Mg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function tc(a,b,c){var d=jg.range(a,b-Mg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function uc(a){return a.source}function vc(a){return a.target}function wc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ha(d-b)+e*g*ha(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Tg,Math.atan2(g,Math.sqrt(d*d+e*e))*Tg]}:function(){return[a*Tg,b*Tg]};return o.distance=m,o}function xc(){function a(a,e){var f=Math.sin(e*=Sg),g=Math.cos(e),h=vg((a*=Sg)-b),i=Math.cos(h);Zh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;$h.point=function(e,f){b=e*Sg,c=Math.sin(f*=Sg),d=Math.cos(f),$h.point=a},$h.lineEnd=function(){$h.point=$h.lineEnd=x}}function yc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function zc(a,b){function c(a,b){g>0?-Rg+Mg>b&&(b=-Rg+Mg):b>Rg-Mg&&(b=Rg-Mg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Og/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=aa(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Rg]},c):Bc}function Ac(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return vg(e)<Mg?kc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-aa(e)*Math.sqrt(a*a+c*c)]},c)}function Bc(a,b){return[a,Math.log(Math.tan(Og/4+b/2))]}function Cc(a){var b,c=hc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Og*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Dc(a,b){return[Math.log(Math.tan(Og/4+b/2)),-a]}function Ec(a){return a[0]}function Fc(a){return a[1]}function Gc(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&ba(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Hc(a,b){return a[0]-b[0]||a[1]-b[1]}function Ic(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Jc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Kc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Lc(){ed(this),this.edge=this.site=this.circle=null}function Mc(a){var b=ki.pop()||new Lc;return b.site=a,b}function Nc(a){Xc(a),hi.remove(a),ki.push(a),ed(a)}function Oc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Nc(a);for(var i=f;i.circle&&vg(c-i.circle.x)<Mg&&vg(d-i.circle.cy)<Mg;)f=i.P,h.unshift(i),Nc(i),i=f;h.unshift(i),Xc(i);for(var j=g;j.circle&&vg(c-j.circle.x)<Mg&&vg(d-j.circle.cy)<Mg;)g=j.N,h.push(j),Nc(j),j=g;h.push(j),Xc(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],bd(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=_c(i.site,j.site,null,e),Wc(i),Wc(j)}function Pc(a){for(var b,c,d,e,f=a.x,g=a.y,h=hi._;h;)if(d=Qc(h,g)-f,d>Mg)h=h.L;else{if(e=f-Rc(h,g),!(e>Mg)){d>-Mg?(b=h.P,c=h):e>-Mg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Mc(a);if(hi.insert(b,i),b||c){if(b===c)return Xc(b),c=Mc(b.site),hi.insert(i,c),i.edge=c.edge=_c(b.site,i.site),Wc(b),void Wc(c);if(!c)return void(i.edge=_c(b.site,i.site));Xc(b),Xc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};bd(c.edge,j,o,u),i.edge=_c(j,a,null,u),c.edge=_c(a,o,null,u),Wc(b),Wc(c)}}function Qc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Rc(a,b){var c=a.N;if(c)return Qc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Sc(a){this.site=a,this.edges=[]}function Tc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=gi,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(vg(d-b)>Mg||vg(e-c)>Mg)&&(h.splice(g,0,new cd(ad(f.site,k,vg(d-l)<Mg&&o-e>Mg?{x:l,y:vg(b-l)<Mg?c:o}:vg(e-o)<Mg&&m-d>Mg?{x:vg(c-o)<Mg?b:m,y:o}:vg(d-m)<Mg&&e-n>Mg?{x:m,y:vg(b-m)<Mg?c:n}:vg(e-n)<Mg&&d-l>Mg?{x:vg(c-n)<Mg?b:l,y:n}:null),f.site,null)),++i)}function Uc(a,b){return b.angle-a.angle}function Vc(){ed(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Ng)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=li.pop()||new Vc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=ji._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}ji.insert(s,r),s||(ii=r)}}}}function Xc(a){var b=a.circle;b&&(b.P||(ii=b.N),ji.remove(b),li.push(b),ed(b),a.circle=null)}function Yc(a){for(var b,c=fi,d=Sb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Zc(b,a)||!d(b)||vg(b.a.x-b.b.x)<Mg&&vg(b.a.y-b.b.y)<Mg)&&(b.a=b.b=null,c.splice(e,1))}function Zc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function $c(a,b){this.l=a,this.r=b,this.a=this.b=null}function _c(a,b,c,d){var e=new $c(a,b);return fi.push(e),c&&bd(e,a,b,c),d&&bd(e,b,a,d),gi[a.i].edges.push(new cd(e,a,b)),gi[b.i].edges.push(new cd(e,b,a)),e}function ad(a,b,c){var d=new $c(a,null);return d.a=b,d.b=c,fi.push(d),d}function bd(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function cd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function dd(){this._=null}function ed(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function fd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function gd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function hd(a){for(;a.L;)a=a.L;return a}function id(a,b){var c,d,e,f=a.sort(jd).pop();for(fi=[],gi=new Array(a.length),hi=new dd,ji=new dd;;)if(e=ii,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(gi[f.i]=new Sc(f),Pc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Oc(e.arc)}b&&(Yc(b),Tc(b));var g={cells:gi,edges:fi};return hi=ji=fi=gi=null,g}function jd(a,b){return b.y-a.y||b.x-a.x}function kd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function ld(a){return a.x}function md(a){return a.y}function nd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function od(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&od(a,i[0],c,d,g,h),i[1]&&od(a,i[1],g,d,e,h),i[2]&&od(a,i[2],c,h,g,f),i[3]&&od(a,i[3],g,h,e,f)}}function pd(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||d>m||e>n)){if(o=a.point){var o,p=b-a.x,q=c-a.y,r=p*p+q*q;if(i>r){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;z>y;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function qd(a,b){a=jg.rgb(a),b=jg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+wa(Math.round(c+f*a))+wa(Math.round(d+g*a))+wa(Math.round(e+h*a))}}function rd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=ud(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function sd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function td(a,b){var c,d,e,f=ni.lastIndex=oi.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=ni.exec(a))&&(d=oi.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:sd(c,d)})),f=oi.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function ud(a,b){for(var c,d=jg.interpolators.length;--d>=0&&!(c=jg.interpolators[d](a,b)););return c}function vd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(ud(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function wd(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function xd(a){return function(b){return 1-a(1-b)}}function yd(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function zd(a){return a*a}function Ad(a){return a*a*a}function Bd(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Cd(a){return function(b){return Math.pow(b,a)}}function Dd(a){return 1-Math.cos(a*Rg)}function Ed(a){return Math.pow(2,10*(a-1))}function Fd(a){return 1-Math.sqrt(1-a*a)}function Gd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Pg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Pg/b)}}function Hd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Id(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Jd(a,b){a=jg.hcl(a),b=jg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){a=jg.hsl(a),b=jg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Ld(a,b){a=jg.lab(a),b=jg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return oa(c+f*a,d+g*a,e+h*a)+""}}function Md(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Nd(a){var b=[a.a,a.b],c=[a.c,a.d],d=Pd(b),e=Od(b,c),f=Pd(Qd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Tg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Tg:0}function Od(a,b){return a[0]*b[0]+a[1]*b[1]}function Pd(a){var b=Math.sqrt(Od(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Qd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Rd(a){return a.length?a.pop()+",":""}function Sd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:sd(a[0],b[0])},{i:e-2,x:sd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Td(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Rd(c)+"rotate(",null,")")-2,x:sd(a,b)})):b&&c.push(Rd(c)+"rotate("+b+")")}function Ud(a,b,c,d){a!==b?d.push({i:c.push(Rd(c)+"skewX(",null,")")-2,x:sd(a,b)}):b&&c.push(Rd(c)+"skewX("+b+")")}function Vd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Rd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:sd(a[0],b[0])},{i:e-2,x:sd(a[1],b[1])})}else(1!==b[0]||1!==b[1])&&c.push(Rd(c)+"scale("+b+")")}function Wd(a,b){var c=[],d=[];return a=jg.transform(a),b=jg.transform(b),Sd(a.translate,b.translate,c,d),Td(a.rotate,b.rotate,c,d),Ud(a.skew,b.skew,c,d),Vd(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Xd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Yd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Zd(a){for(var b=a.source,c=a.target,d=_d(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function $d(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function _d(a,b){if(a===b)return a;for(var c=$d(a),d=$d(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function ae(a){a.fixed|=2}function be(a){a.fixed&=-7}function ce(a){a.fixed|=4,a.px=a.x,a.py=a.y}function de(a){a.fixed&=-5}function ee(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(ee(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function fe(a,b){return jg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=le,a}function ge(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function he(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function ie(a){return a.children}function je(a){return a.value}function ke(a,b){return b.value-a.value}function le(a){return jg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function me(a){return a.x}function ne(a){return a.y}function oe(a,b,c){a.y0=b,a.y=c}function pe(a){return jg.range(a.length)}function qe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function re(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function se(a){return a.reduce(te,0)}function te(a,b){return a+b[1]}function ue(a,b){return ve(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ve(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function we(a){return[jg.min(a),jg.max(a)]}function xe(a,b){return a.value-b.value}function ye(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function ze(a,b){a._pack_next=b,b._pack_prev=a}function Ae(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Be(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),
n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(Ce),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],Fe(d,e,f),b(f),ye(d,f),d._pack_prev=f,ye(f,e),e=d._pack_next,g=3;j>g;g++){Fe(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(Ae(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!Ae(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?ze(d,e=h):ze(d=i,e),g--):(ye(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(De)}}function Ce(a){a._pack_next=a._pack_prev=a}function De(a){delete a._pack_next,delete a._pack_prev}function Ee(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Ee(e[f],b,c,d)}function Fe(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Ge(a,b){return a.parent==b.parent?1:2}function He(a){var b=a.children;return b.length?b[0]:a.t}function Ie(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Je(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ke(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Le(a,b,c){return a.a.parent===b.parent?a.a:c}function Me(a){return 1+jg.max(a,function(a){return a.y})}function Ne(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Oe(a){var b=a.children;return b&&b.length?Oe(b[0]):a}function Pe(a){var b,c=a.children;return c&&(b=c.length)?Pe(c[b-1]):a}function Qe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Re(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Se(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Te(a){return a.rangeExtent?a.rangeExtent():Se(a.range())}function Ue(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ve(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function We(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:zi}function Xe(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=jg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Ye(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Xe:Ue,i=d?Yd:Xd;return g=e(a,b,i,c),h=e(b,a,i,ud),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Md)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return af(a,b)},f.tickFormat=function(b,c){return bf(a,b,c)},f.nice=function(b){return $e(a,b),e()},f.copy=function(){return Ye(a,b,c,d)},e()}function Ze(a,b){return jg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function $e(a,b){return Ve(a,We(_e(a,b)[2])),Ve(a,We(_e(a,b)[2])),a}function _e(a,b){null==b&&(b=10);var c=Se(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function af(a,b){return jg.range.apply(jg,_e(a,b))}function bf(a,b,c){var d=_e(a,b);if(c){var e=nh.exec(c);if(e.shift(),"s"===e[8]){var f=jg.formatPrefix(Math.max(vg(d[0]),vg(d[1])));return e[7]||(e[7]="."+cf(f.scale(d[2]))),e[8]="f",c=jg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+df(e[8],d)),c=e.join("")}else c=",."+cf(d[2])+"f";return jg.format(c)}function cf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function df(a,b){var c=cf(b[2]);return a in Ai?Math.abs(c-cf(Math.max(vg(b[0]),vg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function ef(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ve(d.map(e),c?Math:Ci);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Se(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return Bi;arguments.length<2?c=Bi:"function"!=typeof c&&(c=jg.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return b-.5>g*b&&(g*=b),d>=g?c(a):""}},g.copy=function(){return ef(a.copy(),b,c,d)},Ze(g,a)}function ff(a,b,c){function d(b){return a(e(b))}var e=gf(b),f=gf(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return af(c,a)},d.tickFormat=function(a,b){return bf(c,a,b)},d.nice=function(a){return d.domain($e(c,a))},d.exponent=function(g){return arguments.length?(e=gf(b=g),f=gf(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return ff(a.copy(),b,c)},Ze(d,a)}function gf(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function hf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return jg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new l;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Se(b.a[0])},c.copy=function(){return hf(a,b)},c.domain(a)}function jf(a,b){function c(){var c=0,e=b.length;for(h=[];++c<e;)h[c-1]=jg.quantile(a,c/e);return d}function d(a){return isNaN(a=+a)?void 0:b[jg.bisect(h,a)]}var h;return d.domain=function(b){return arguments.length?(a=b.map(f).filter(g).sort(e),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return h},d.invertExtent=function(c){return c=b.indexOf(c),0>c?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},d.copy=function(){return jf(a,b)},c()}function kf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return kf(a,b,c)},e()}function lf(a,b){function c(c){return c>=c?b[jg.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return lf(a,b)},c}function mf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return af(a,b)},b.tickFormat=function(b,c){return bf(a,b,c)},b.copy=function(){return mf(a)},b}function nf(){return 0}function of(a){return a.innerRadius}function pf(a){return a.outerRadius}function qf(a){return a.startAngle}function rf(a){return a.endAngle}function sf(a){return a&&a.padAngle}function tf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function uf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(0>r?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function vf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ca(c),o=Ca(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Ec,d=Fc,e=Fb,f=wf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Ii.get(a)||wf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function wf(a){return a.length>1?a.join("L"):a+"Z"}function xf(a){return a.join("L")+"Z"}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function zf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Af(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Bf(a,b){return a.length<4?wf(a):a[1]+Ef(a.slice(1,-1),Ff(a,b))}function Cf(a,b){return a.length<3?xf(a):a[0]+Ef((a.push(a[0]),a),Ff([a[a.length-2]].concat(a,[a[1]]),b))}function Df(a,b){return a.length<3?wf(a):a[0]+Ef(a,Ff(a,b))}function Ef(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return wf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Ff(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Gf(a){if(a.length<3)return wf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Kf(Li,g),",",Kf(Li,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Lf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Hf(a){if(a.length<4)return wf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Kf(Li,f)+","+Kf(Li,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Lf(c,f,g);return c.join("")}function If(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Kf(Li,g),",",Kf(Li,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Lf(b,g,h);return b.join("")}function Jf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Gf(a)}function Kf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Lf(a,b,c){a.push("C",Kf(Ji,b),",",Kf(Ji,c),",",Kf(Ki,b),",",Kf(Ki,c),",",Kf(Li,b),",",Kf(Li,c))}function Mf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Nf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Mf(e,f);++b<c;)d[b]=(g+(g=Mf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Of(a){for(var b,c,d,e,f=[],g=Nf(a),h=-1,i=a.length-1;++h<i;)b=Mf(a[h],a[h+1]),vg(b)<Mg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Pf(a){return a.length<3?wf(a):a[0]+Ef(a,Of(a))}function Qf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Rg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Rf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ca(c),v=Ca(e),w=c===d?function(){return n}:Ca(d),x=e===f?function(){return o}:Ca(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Ec,d=Ec,e=0,f=Fc,g=Fb,h=wf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Ii.get(a)||wf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Sf(a){return a.radius}function Tf(a){return[a.x,a.y]}function Uf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Rg;return[c*Math.cos(d),c*Math.sin(d)]}}function Vf(){return 64}function Wf(){return"circle"}function Xf(a){var b=Math.sqrt(a/Og);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Yf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Zf(a,b,c){return Ag(a,Si),a.namespace=b,a.id=c,a}function $f(a,b,c,d){var e=a.id,f=a.namespace;return T(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function _f(a){return null==a&&(a=""),function(){this.textContent=a}}function ag(a){return null==a?"__transition__":"__transition_"+a+"__"}function bg(a,b,c,d,e){function f(a){var b=p.delay;return j.t=b+i,a>=b?g(a-b):void(j.c=g)}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(d>+g){var l=o[g];l.timer.c=null,l.timer.t=NaN,--o.count,delete o[g]}j.c=h,Ha(function(){return j.c&&h(c||1)&&(j.c=null,j.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,k=p.duration}function h(e){for(var f=e/k,g=m(f),h=n.length;h>0;)n[--h].call(a,g);return f>=1?(p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1):void 0}var i,j,k,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,j=Ha(f,0,i),p=o[d]={tween:new l,time:i,timer:j,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function cg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function dg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function eg(a){return a.toISOString()}function fg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=jg.bisect(_i,e);return f==_i.length?[b.year,_e(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/_i[f-1]<_i[f]/e?f-1:f]:[cj,_e(a,c)[2]]}return d.invert=function(b){return gg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(gg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,gg(+c+1),b).length}var f=d.domain(),g=Se(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ve(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=gg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=gg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Se(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],gg(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return fg(a.copy(),b,c)},Ze(d,a)}function gg(a){return new Date(a)}function hg(a){return JSON.parse(a.responseText)}function ig(a){var b=mg.createRange();return b.selectNode(mg.body),b.createContextualFragment(a.responseText)}var jg={version:"3.5.17"},kg=[].slice,lg=function(a){return kg.call(a)},mg=this.document;if(mg)try{lg(mg.documentElement.childNodes)[0].nodeType}catch(ng){lg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),mg)try{mg.createElement("DIV").style.setProperty("opacity",0,"")}catch(og){var pg=this.Element.prototype,qg=pg.setAttribute,rg=pg.setAttributeNS,sg=this.CSSStyleDeclaration.prototype,tg=sg.setProperty;pg.setAttribute=function(a,b){qg.call(this,a,b+"")},pg.setAttributeNS=function(a,b,c){rg.call(this,a,b,c+"")},sg.setProperty=function(a,b,c){tg.call(this,a,b+"",c)}}jg.ascending=e,jg.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},jg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},jg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},jg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},jg.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)g(c=+a[f])&&(d+=c);else for(;++f<e;)g(c=+b.call(a,a[f],f))&&(d+=c);return d},jg.mean=function(a,b){var c,d=0,e=a.length,h=-1,i=e;if(1===arguments.length)for(;++h<e;)g(c=f(a[h]))?d+=c:--i;else for(;++h<e;)g(c=f(b.call(a,a[h],h)))?d+=c:--i;return i?d/i:void 0},jg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},jg.median=function(a,b){var c,d=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)g(c=f(a[i]))&&d.push(c);else for(;++i<h;)g(c=f(b.call(a,a[i],i)))&&d.push(c);return d.length?jg.quantile(d.sort(e),.5):void 0},jg.variance=function(a,b){var c,d,e=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<e;)g(c=f(a[j]))&&(d=c-h,h+=d/++k,i+=d*(c-h));else for(;++j<e;)g(c=f(b.call(a,a[j],j)))&&(d=c-h,h+=d/++k,i+=d*(c-h));return k>1?i/(k-1):void 0},jg.deviation=function(){var a=jg.variance.apply(this,arguments);return a?Math.sqrt(a):a};var ug=h(e);jg.bisectLeft=ug.left,jg.bisect=jg.bisectRight=ug.right,jg.bisector=function(a){return h(1===a.length?function(b,c){return e(a(b),c)}:a)},jg.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,2>f&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},jg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},jg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},jg.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=jg.min(a,i),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d},jg.zip=function(){return jg.transpose(arguments)},jg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},jg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},jg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},jg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var vg=Math.abs;jg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=j(vg(c)),g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},jg.map=function(a,b){var c=new l;if(a instanceof l)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var wg="__proto__",xg="\x00";k(l,{has:o,get:function(a){return this._[m(a)]},set:function(a,b){return this._[m(a)]=b},remove:p,keys:q,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:n(b),value:this._[b]});return a},size:r,empty:s,forEach:function(a){for(var b in this._)a.call(this,n(b),this._[b])}}),jg.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,j,k,m,n=-1,o=g.length,p=f[h++],q=new l;++n<o;)(m=q.get(i=p(j=g[n])))?m.push(j):q.set(i,[j]);return b?(j=b(),k=function(c,d){j.set(c,a(b,d,h))}):(j={},k=function(c,d){j[c]=a(b,d,h)}),q.forEach(k),j}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(jg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},jg.set=function(a){var b=new t;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},k(t,{has:o,add:function(a){return this._[m(a+="")]=!0,a},remove:p,values:q,size:r,empty:s,forEach:function(a){for(var b in this._)a.call(this,n(b))}}),jg.behavior={},jg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=v(a,b,b[c]);return a};var yg=["webkit","ms","moz","Moz","o","O"];jg.dispatch=function(){for(var a=new y,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=z(a);return a},y.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},jg.event=null,jg.requote=function(a){return a.replace(zg,"\\$&")};var zg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ag={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Bg=function(a,b){return b.querySelector(a)},Cg=function(a,b){return b.querySelectorAll(a)},Dg=function(a,b){var c=a.matches||a[w(a,"matchesSelector")];return(Dg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(Bg=function(a,b){return Sizzle(a,b)[0]||null},Cg=Sizzle,Dg=Sizzle.matchesSelector),jg.selection=function(){return jg.select(mg.documentElement)};var Eg=jg.selection.prototype=[];Eg.select=function(a){var b,c,d,e,f=[];a=E(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return D(f)},Eg.selectAll=function(a){var b,c,d=[];a=F(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=lg(a.call(c,c.__data__,h,e))),b.parentNode=c);return D(d)};var Fg="http://www.w3.org/1999/xhtml",Gg={svg:"http://www.w3.org/2000/svg",xhtml:Fg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};jg.ns={prefix:Gg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Gg.hasOwnProperty(c)?{space:Gg[c],local:a}:a}},Eg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=jg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(G(b,a[b]));return this}return this.each(G(a,b))},Eg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=J(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!I(a[e]).test(b))return!1;return!0}for(b in a)this.each(K(b,a[b]));return this}return this.each(K(a,b))},Eg.style=function(a,b,c){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.each(M(c,a[c],b));return this}if(2>e){var f=this.node();return d(f).getComputedStyle(f,null).getPropertyValue(a)}c=""}return this.each(M(a,b,c))},Eg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(N(b,a[b]));return this}return this.each(N(a,b))},Eg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Eg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Eg.append=function(a){return a=O(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Eg.insert=function(a,b){return a=O(a),b=E(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Eg.remove=function(){return this.each(P)},Eg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,k=c.length,m=Math.min(g,k),n=new Array(k),o=new Array(k),p=new Array(g);if(b){var q,r=new l,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<k;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=Q(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=Q(f);for(;k>d;++d)o[d]=Q(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),j.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=U([]),i=D([]),j=D([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return j},i},Eg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Eg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=R(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return D(e)},Eg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Eg.sort=function(a){a=S.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Eg.each=function(a){return T(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Eg.call=function(a){var b=lg(arguments);return a.apply(b[0]=this,b),this},Eg.empty=function(){return!this.node()},Eg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},Eg.size=function(){var a=0;return T(this,function(){++a}),a};var Hg=[];jg.selection.enter=U,jg.selection.enter.prototype=Hg,Hg.append=Eg.append,Hg.empty=Eg.empty,Hg.node=Eg.node,Hg.call=Eg.call,Hg.size=Eg.size,Hg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return D(g)},Hg.insert=function(a,b){return arguments.length<2&&(b=V(this)),Eg.insert.call(this,a,b)},jg.select=function(a){var c;return"string"==typeof a?(c=[Bg(a,mg)],c.parentNode=mg.documentElement):(c=[a],c.parentNode=b(a)),D([c])},jg.selectAll=function(a){var b;return"string"==typeof a?(b=lg(Cg(a,mg)),b.parentNode=mg.documentElement):(b=lg(a),b.parentNode=null),D([b])},Eg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(W(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(W(a,b,c))};var Ig=jg.map({mouseenter:"mouseover",mouseleave:"mouseout"});mg&&Ig.forEach(function(a){"on"+a in mg&&Ig.remove(a)});var Jg,Kg=0;jg.mouse=function(a){return $(a,B())};var Lg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;jg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=B().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return $(a,d)},jg.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function b(a,b,d,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=jg.event.target.correspondingElement||jg.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=jg.select(d(l)).on(f+q,h).on(g+q,i),s=Z(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=C(a,"drag","dragstart","dragend"),e=null,f=b(x,jg.mouse,d,"mousemove","mouseup"),g=b(_,jg.touch,u,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},jg.rebind(a,c,"on")},jg.touches=function(a,b){return arguments.length<2&&(b=B().touches),b?lg(b).map(function(b){var c=$(a,b);return c.identifier=b.identifier,c}):[]};var Mg=1e-6,Ng=Mg*Mg,Og=Math.PI,Pg=2*Og,Qg=Pg-Mg,Rg=Og/2,Sg=Og/180,Tg=180/Og,Ug=Math.SQRT2,Vg=2,Wg=4;jg.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(Ng>m)d=Math.log(j/g)/Ug,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Ug*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+Wg*m)/(2*g*Vg*n),p=(j*j-g*g-Wg*m)/(2*j*Vg*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Ug,c=function(a){var b=a*d,c=fa(q),h=g/(Vg*n)*(c*ga(Ug*b+q)-ea(q));return[e+h*k,f+h*l,g*c/fa(Ug*b+q)]}}return c.duration=1e3*d,c},jg.behavior.zoom=function(){function a(a){a.on(F,l).on(Yg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function c(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function e(a){y.k=Math.max(B[0],Math.min(B[1],a));
}function f(a,b){b=c(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:y.x,y:y.y,k:y.k},e(Math.pow(2,g)),f(q=c,d),b=jg.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(jg.mouse(e),m),j(g)}function c(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=jg.select(d(e)).on(G,a).on(H,c),m=b(jg.mouse(e)),n=Z(e);Ri.call(e),i(g)}function m(){function a(){var a=jg.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=jg.event.target;jg.select(b).on(u,d).on(v,h),w.push(b);for(var c=jg.event.changedTouches,e=0,f=c.length;f>e;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(500>j-t){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),A()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=jg.touches(o);Ri.call(o);for(var h=0,i=g.length;i>h;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(jg.event.touches.length){for(var b=jg.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}jg.selectAll(w).on(s,null),x.on(F,l).on(I,m),z(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+jg.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=jg.select(o),z=Z(o);c(),i(p),x.on(F,null).on(I,c)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Ri.call(this),p=b(q=r||jg.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),A(),e(Math.pow(2,.002*Xg())*y.k),f(q,p),j(a)}function o(){var a=jg.mouse(this),c=Math.log(y.k)/Math.LN2;g(this,a,b(a),jg.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var p,q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},z=[960,500],B=Zg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=C(a,"zoomstart","zoom","zoomend");return Yg||(Yg="onwheel"in mg?(Xg=function(){return-jg.event.deltaY*(jg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in mg?(Xg=function(){return jg.event.wheelDelta},"mousewheel"):(Xg=function(){return-jg.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=y;Pi?jg.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=jg.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=y={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=y,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:null},e(+b),h(),a):y.k},a.scaleExtent=function(b){return arguments.length?(B=null==b?Zg:[+b[0],+b[1]],a):B},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},jg.rebind(a,J,"on")};var Xg,Yg,Zg=[0,1/0];jg.color=ia,ia.prototype.toString=function(){return this.rgb()+""},jg.hsl=ja;var $g=ja.prototype=new ia;$g.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ja(this.h,this.s,this.l/a)},$g.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ja(this.h,this.s,a*this.l)},$g.rgb=function(){return ka(this.h,this.s,this.l)},jg.hcl=la;var _g=la.prototype=new ia;_g.brighter=function(a){return new la(this.h,this.c,Math.min(100,this.l+ah*(arguments.length?a:1)))},_g.darker=function(a){return new la(this.h,this.c,Math.max(0,this.l-ah*(arguments.length?a:1)))},_g.rgb=function(){return ma(this.h,this.c,this.l).rgb()},jg.lab=na;var ah=18,bh=.95047,ch=1,dh=1.08883,eh=na.prototype=new ia;eh.brighter=function(a){return new na(Math.min(100,this.l+ah*(arguments.length?a:1)),this.a,this.b)},eh.darker=function(a){return new na(Math.max(0,this.l-ah*(arguments.length?a:1)),this.a,this.b)},eh.rgb=function(){return oa(this.l,this.a,this.b)},jg.rgb=ta;var fh=ta.prototype=new ia;fh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new ta(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ta(e,e,e)},fh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ta(a*this.r,a*this.g,a*this.b)},fh.hsl=function(){return ya(this.r,this.g,this.b)},fh.toString=function(){return"#"+wa(this.r)+wa(this.g)+wa(this.b)};var gh=jg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});gh.forEach(function(a,b){gh.set(a,ua(b))}),jg.functor=Ca,jg.xhr=Da(u),jg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Ea(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new t,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},jg.csv=jg.dsv(",","text/csv"),jg.tsv=jg.dsv("	","text/tab-separated-values");var hh,ih,jh,kh,lh=this[w(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};jg.timer=function(){Ha.apply(this,arguments)},jg.timer.flush=function(){Ja(),Ka()},jg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var mh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ma);jg.formatPrefix=function(a,b){var c=0;return(a=+a)&&(0>a&&(a*=-1),b&&(a=jg.round(a,La(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),mh[8+c/3]};var nh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,oh=jg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=jg.round(a,La(a,b))).toFixed(Math.max(0,Math.min(20,La(a*(1+1e-15),b))))}}),ph=jg.time={},qh=Date;Pa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){rh.setUTCDate.apply(this._,arguments)},setDay:function(){rh.setUTCDay.apply(this._,arguments)},setFullYear:function(){rh.setUTCFullYear.apply(this._,arguments)},setHours:function(){rh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){rh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){rh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){rh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){rh.setUTCSeconds.apply(this._,arguments)},setTime:function(){rh.setTime.apply(this._,arguments)}};var rh=Date.prototype;ph.year=Qa(function(a){return a=ph.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),ph.years=ph.year.range,ph.years.utc=ph.year.utc.range,ph.day=Qa(function(a){var b=new qh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),ph.days=ph.day.range,ph.days.utc=ph.day.utc.range,ph.dayOfYear=function(a){var b=ph.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=ph[a]=Qa(function(a){return(a=ph.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=ph.year(a).getDay();return Math.floor((ph.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});ph[a+"s"]=c.range,ph[a+"s"].utc=c.utc.range,ph[a+"OfYear"]=function(a){var c=ph.year(a).getDay();return Math.floor((ph.dayOfYear(a)+(c+b)%7)/7)}}),ph.week=ph.sunday,ph.weeks=ph.sunday.range,ph.weeks.utc=ph.sunday.utc.range,ph.weekOfYear=ph.sundayOfYear;var sh={"-":"",_:" ",0:"0"},th=/^\s*\d+/,uh=/^%/;jg.locale=function(a){return{numberFormat:Na(a),timeFormat:Sa(a)}};var vh=jg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});jg.format=vh.numberFormat,jg.geo={},lb.prototype={s:0,t:0,add:function(a){mb(a,this.t,wh),mb(wh.s,this.s,this),this.s?this.t+=wh.t:this.s=wh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var wh=new lb;jg.geo.stream=function(a,b){a&&xh.hasOwnProperty(a.type)?xh[a.type](a,b):nb(a,b)};var xh={Feature:function(a,b){nb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)nb(c[d].geometry,b)}},yh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){ob(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b,0)},Polygon:function(a,b){pb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)pb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)nb(c[d],b)}};jg.geo.area=function(a){return zh=0,jg.geo.stream(a,Bh),zh};var zh,Ah=new lb,Bh={sphere:function(){zh+=4*Og},point:x,lineStart:x,lineEnd:x,polygonStart:function(){Ah.reset(),Bh.lineStart=qb},polygonEnd:function(){var a=2*Ah;zh+=0>a?4*Og+a:a,Bh.lineStart=Bh.lineEnd=Bh.point=x}};jg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=rb([b*Sg,c*Sg]);if(r){var e=tb(r,d),f=[e[1],-e[0],0],g=tb(f,e);wb(g),g=xb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Tg*j,q=vg(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Tg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Tg;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=vg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;Bh.point(a,c),b(a,c)}function f(){Bh.lineStart()}function g(){e(p,q),Bh.lineEnd(),vg(s)>Mg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,Bh.polygonStart()},polygonEnd:function(){Bh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>Ah?(k=-(m=180),l=-(n=90)):s>Mg?n=90:-Mg>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],jg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),jg.geo.centroid=function(a){Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=Lh=Mh=0,jg.geo.stream(a,Nh);var b=Kh,c=Lh,d=Mh,e=b*b+c*c+d*d;return Ng>e&&(b=Hh,c=Ih,d=Jh,Mg>Dh&&(b=Eh,c=Fh,d=Gh),e=b*b+c*c+d*d,Ng>e)?[NaN,NaN]:[Math.atan2(c,b)*Tg,da(d/Math.sqrt(e))*Tg]};var Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh,Lh,Mh,Nh={sphere:x,point:zb,lineStart:Bb,lineEnd:Cb,polygonStart:function(){Nh.lineStart=Db},polygonEnd:function(){Nh.lineStart=Bb}},Oh=Jb(Fb,Nb,Pb,[-Og,-Og/2]),Ph=1e9;jg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Tb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(jg.geo.conicEqualArea=function(){return Ub(Vb)}).raw=Vb,jg.geo.albers=function(){return jg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},jg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=jg.geo.albers(),g=jg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=jg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Mg,l+.12*j+Mg],[k-.214*j-Mg,l+.234*j-Mg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Mg,l+.166*j+Mg],[k-.115*j-Mg,l+.234*j-Mg]]).stream(i).point,a},a.scale(1070)};var Qh,Rh,Sh,Th,Uh,Vh,Wh={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Rh=0,Wh.lineStart=Wb},polygonEnd:function(){Wh.lineStart=Wh.lineEnd=Wh.point=x,Qh+=vg(Rh/2)}},Xh={point:Xb,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Yh={point:$b,lineStart:_b,lineEnd:ac,polygonStart:function(){Yh.lineStart=bc},polygonEnd:function(){Yh.point=$b,Yh.lineStart=_b,Yh.lineEnd=ac}};jg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),jg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Qh=0,jg.geo.stream(a,e(Wh)),Qh},a.centroid=function(a){return Eh=Fh=Gh=Hh=Ih=Jh=Kh=Lh=Mh=0,jg.geo.stream(a,e(Yh)),Mh?[Kh/Mh,Lh/Mh]:Jh?[Hh/Jh,Ih/Jh]:Gh?[Eh/Gh,Fh/Gh]:[NaN,NaN]},a.bounds=function(a){return Uh=Vh=-(Sh=Th=1/0),jg.geo.stream(a,e(Xh)),[[Sh,Th],[Uh,Vh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||ec(a):u,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Yb:new cc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(jg.geo.albersUsa()).context(null)},jg.geo.transform=function(a){return{stream:function(b){var c=new fc(b);for(var d in a)c[d]=a[d];return c}}},fc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},jg.geo.projection=hc,jg.geo.projectionMutator=ic,(jg.geo.equirectangular=function(){return hc(kc)}).raw=kc.invert=kc,jg.geo.rotation=function(a){function b(b){return b=a(b[0]*Sg,b[1]*Sg),b[0]*=Tg,b[1]*=Tg,b}return a=mc(a[0]%360*Sg,a[1]*Sg,a.length>2?a[2]*Sg:0),b.invert=function(b){return b=a.invert(b[0]*Sg,b[1]*Sg),b[0]*=Tg,b[1]*=Tg,b},b},lc.invert=kc,jg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=mc(-a[0]*Sg,-a[1]*Sg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Tg,a[1]*=Tg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=qc((b=+d)*Sg,e*Sg),a):b},a.precision=function(d){return arguments.length?(c=qc(b*Sg,(e=+d)*Sg),a):e},a.angle(90)},jg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Sg,e=a[1]*Sg,f=b[1]*Sg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},jg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return jg.range(Math.ceil(f/q)*q,e,q).map(m).concat(jg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(jg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return vg(a%q)>Mg}).map(k)).concat(jg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return vg(a%r)>Mg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=sc(h,g,90),l=tc(d,c,s),m=sc(j,i,90),n=tc(f,e,s),a):s},a.majorExtent([[-180,-90+Mg],[180,90-Mg]]).minorExtent([[-180,-80-Mg],[180,80+Mg]])},jg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=uc,e=vc;return a.distance=function(){return jg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},jg.geo.interpolate=function(a,b){return wc(a[0]*Sg,a[1]*Sg,b[0]*Sg,b[1]*Sg)},jg.geo.length=function(a){return Zh=0,jg.geo.stream(a,$h),Zh};var Zh,$h={sphere:x,point:x,lineStart:xc,lineEnd:x,polygonStart:x,polygonEnd:x},_h=yc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(jg.geo.azimuthalEqualArea=function(){return hc(_h)}).raw=_h;var ai=yc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},u);(jg.geo.azimuthalEquidistant=function(){return hc(ai)}).raw=ai,(jg.geo.conicConformal=function(){return Ub(zc)}).raw=zc,(jg.geo.conicEquidistant=function(){return Ub(Ac)}).raw=Ac;var bi=yc(function(a){return 1/a},Math.atan);(jg.geo.gnomonic=function(){return hc(bi)}).raw=bi,Bc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Rg]},(jg.geo.mercator=function(){return Cc(Bc)}).raw=Bc;var ci=yc(function(){return 1},Math.asin);(jg.geo.orthographic=function(){return hc(ci)}).raw=ci;var di=yc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(jg.geo.stereographic=function(){return hc(di)}).raw=di,Dc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Rg]},(jg.geo.transverseMercator=function(){var a=Cc(Dc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Dc,jg.geom={},jg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ca(c),f=Ca(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Hc),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Gc(h),k=Gc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Ec,d=Fc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},jg.geom.polygon=function(a){return Ag(a,ei),a};var ei=jg.geom.polygon.prototype=[];ei.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},ei.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},ei.clip=function(a){for(var b,c,d,e,f,g,h=Kc(a),i=-1,j=this.length-Kc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Ic(g,k,e)?(Ic(f,k,e)||a.push(Jc(f,g,k,e)),a.push(g)):Ic(f,k,e)&&a.push(Jc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var fi,gi,hi,ii,ji,ki=[],li=[];Sc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Uc),b.length},cd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},dd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=hd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(fd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,gd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(gd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,fd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?hd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,fd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,gd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,fd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,gd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,fd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,gd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},jg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return id(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Mg)*Mg,y:Math.round(g(a,b)/Mg)*Mg,i:b}})}var d=Ec,e=Fc,f=d,g=e,h=mi;return a?b(a):(b.links=function(a){return id(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return id(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Uc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&kd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ca(d=a),b):d},b.y=function(a){return arguments.length?(g=Ca(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?mi:a,b):h===mi?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===mi?null:h&&h[1]},b)};var mi=[[-1e6,-1e6],[1e6,1e6]];jg.geom.delaunay=function(a){return jg.geom.voronoi().triangles(a)},jg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(vg(i-c)+vg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=nd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ca(h),u=Ca(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=nd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){od(a,z,p,q,r,s)},z.find=function(a){return pd(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Ec,i=Fc;return(g=arguments.length)?(h=ld,i=md,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},jg.interpolateRgb=qd,jg.interpolateObject=rd,jg.interpolateNumber=sd,jg.interpolateString=td;var ni=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oi=new RegExp(ni.source,"g");jg.interpolate=ud,jg.interpolators=[function(a,b){var c=typeof b;return("string"===c?gh.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?qd:td:b instanceof ia?qd:Array.isArray(b)?vd:"object"===c&&isNaN(b)?rd:sd)(a,b)}],jg.interpolateArray=vd;var pi=function(){return u},qi=jg.map({linear:pi,poly:Cd,quad:function(){return zd},cubic:function(){return Ad},sin:function(){return Dd},exp:function(){return Ed},circle:function(){return Fd},elastic:Gd,back:Hd,bounce:function(){return Id}}),ri=jg.map({"in":u,out:xd,"in-out":yd,"out-in":function(a){return yd(xd(a))}});jg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=qi.get(c)||pi,d=ri.get(d)||u,wd(d(c.apply(null,kg.call(arguments,1))))},jg.interpolateHcl=Jd,jg.interpolateHsl=Kd,jg.interpolateLab=Ld,jg.interpolateRound=Md,jg.transform=function(a){var b=mg.createElementNS(jg.ns.prefix.svg,"g");return(jg.transform=function(a){if(null!=a){
b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Nd(c?c.matrix:si)})(a)},Nd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var si={a:1,b:0,c:0,d:1,e:0,f:0};jg.interpolateTransform=Wd,jg.layout={},jg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Zd(a[c]));return b}},jg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=jg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(jg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Pg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},jg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/r){if(p>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&p>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=jg.event.x,a.py=jg.event.y,i.resume()}var c,d,e,f,g,h,i={},j=jg.dispatch("start","tick","end"),k=[1,1],l=.9,m=ti,n=ui,o=-30,p=vi,q=.1,r=.64,s=[],t=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,u,v,w=s.length,x=t.length;for(d=0;x>d;++d)i=t[d],m=i.source,n=i.target,u=n.x-m.x,v=n.y-m.y,(p=u*u+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,u*=p,v*=p,n.x-=u*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=u*(r=1-r),m.y+=v*r);if((r=e*q)&&(u=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=s[d],i.x+=(u-i.x)*r,i.y+=(v-i.y)*r;if(o)for(ee(b=jg.geom.quadtree(s),e,h),d=-1;++d<w;)(i=s[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=s[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(s=a,i):s},i.links=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Ha(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;e>i;++i)c[i]=[];for(i=0;j>i;++i){var f=t[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=s.length,j=t.length,l=k[0],p=k[1];for(b=0;e>b;++b)(d=s[b]).index=b,d.weight=0;for(b=0;j>b;++b)d=t[b],"number"==typeof d.source&&(d.source=s[d.source]),"number"==typeof d.target&&(d.target=s[d.target]),++d.source.weight,++d.target.weight;for(b=0;e>b;++b)d=s[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;j>b;++b)f[b]=+m.call(this,t[b],b);else for(b=0;j>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;j>b;++b)g[b]=+n.call(this,t[b],b);else for(b=0;j>b;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;e>b;++b)h[b]=+o.call(this,s[b],b);else for(b=0;e>b;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){return d||(d=jg.behavior.drag().origin(u).on("dragstart.force",ae).on("drag.force",b).on("dragend.force",be)),arguments.length?void this.on("mouseover.force",ce).on("mouseout.force",de).call(d):d},jg.rebind(i,j,"on")};var ti=20,ui=1,vi=1/0;jg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return he(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=ke,c=ie,d=je;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(ge(b,function(a){a.children&&(a.value=0)}),he(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},jg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=jg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},fe(c,d)},jg.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(0>l?-1:1),o=jg.sum(j),p=o?(l-i*n)/o:0,q=jg.range(i),r=[];return null!=c&&q.sort(c===wi?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=wi,d=0,e=Pg,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var wi={};jg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=jg.permute(j,l),k=jg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=u,c=pe,d=qe,e=oe,f=me,g=ne;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:xi.get(b)||pe,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:yi.get(b)||qe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var xi=jg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(re),f=a.map(se),g=jg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return jg.range(a.length).reverse()},"default":pe}),yi=jg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:qe});jg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[jg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=we,e=ue;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ca(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ve(a,b)}:Ca(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},jg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,he(h,function(a){a.r=+k(a.value)}),he(h,Be),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;he(h,function(a){a.r+=l}),he(h,Be),he(h,function(a){a.r-=l})}return Ee(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=jg.layout.hierarchy().sort(xe),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},fe(a,c)},jg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(he(m,c),m.parent.m=-m.z,ge(m,d),j)ge(l,f);else{var n=l,o=l,p=l;ge(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);ge(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ke(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Ie(g),e=He(e),g&&e;)i=He(i),f=Ie(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Je(Le(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Ie(f)&&(f.t=g,f.m+=l-k),e&&!He(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=jg.layout.hierarchy().sort(null).value(null),h=Ge,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},fe(a,g)},jg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;he(i,function(a){var b=a.children;b&&b.length?(a.x=Ne(b),a.y=Me(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Oe(i),l=Pe(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return he(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=jg.layout.hierarchy().sort(null).value(null),c=Ge,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},fe(a,b)},jg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=jg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Qe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Qe(b):Re(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Re(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Qe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},fe(f,h)},jg.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=jg.random.normal.apply(jg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=jg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},jg.scale={};var zi={floor:u,ceil:u};jg.scale.linear=function(){return Ye([0,1],[0,1],ud,!1)};var Ai={s:1,g:1,p:1,r:1,e:1};jg.scale.log=function(){return ef(jg.scale.linear().domain([0,1]),10,!0,[1,10])};var Bi=jg.format(".0e"),Ci={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};jg.scale.pow=function(){return ff(jg.scale.linear(),1,[0,1])},jg.scale.sqrt=function(){return jg.scale.pow().exponent(.5)},jg.scale.ordinal=function(){return hf([],{t:"range",a:[[]]})},jg.scale.category10=function(){return jg.scale.ordinal().range(Di)},jg.scale.category20=function(){return jg.scale.ordinal().range(Ei)},jg.scale.category20b=function(){return jg.scale.ordinal().range(Fi)},jg.scale.category20c=function(){return jg.scale.ordinal().range(Gi)};var Di=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(va),Ei=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(va),Fi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(va),Gi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(va);jg.scale.quantile=function(){return jf([],[])},jg.scale.quantize=function(){return kf(0,1,[0,1])},jg.scale.threshold=function(){return lf([.5],[0,1])},jg.scale.identity=function(){return mf([0,1])},jg.svg={},jg.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Rg,l=h.apply(this,arguments)-Rg,m=Math.abs(l-k),n=k>l?0:1;if(a>j&&(o=j,j=a,a=o),m>=Qg)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Hi?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=da(q/j*Math.sin(r))),a&&(A=da(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Og?0:1;if(B&&tf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Og?0:1;if(A&&tf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Mg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=j>a^n?0:1;var H=o,I=o;if(Og>m){var J=null==y?[w,x]:null==u?[s,t]:Jc([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=uf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=uf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^tf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=uf([s,t],[y,z],a,-I,n),T=uf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^tf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=of,d=pf,e=nf,f=Hi,g=qf,h=rf,i=sf;return a.innerRadius=function(b){return arguments.length?(c=Ca(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ca(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ca(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Hi?Hi:Ca(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ca(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ca(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ca(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Rg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Hi="auto";jg.svg.line=function(){return vf(u)};var Ii=jg.map({linear:wf,"linear-closed":xf,step:yf,"step-before":zf,"step-after":Af,basis:Gf,"basis-open":Hf,"basis-closed":If,bundle:Jf,cardinal:Df,"cardinal-open":Bf,"cardinal-closed":Cf,monotone:Pf});Ii.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Ji=[0,2/3,1/3,0],Ki=[0,1/3,2/3,0],Li=[0,1/6,2/3,1/6];jg.svg.line.radial=function(){var a=vf(Qf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},zf.reverse=Af,Af.reverse=zf,jg.svg.area=function(){return Rf(u)},jg.svg.area.radial=function(){var a=Rf(Qf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},jg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Rg,k=j.call(a,e,d)-Rg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Og)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=uc,g=vc,h=Sf,i=qf,j=rf;return a.radius=function(b){return arguments.length?(h=Ca(b),a):h},a.source=function(b){return arguments.length?(f=Ca(b),a):f},a.target=function(b){return arguments.length?(g=Ca(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ca(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ca(b),a):j},a},jg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=uc,c=vc,d=Tf;return a.source=function(c){return arguments.length?(b=Ca(c),a):b},a.target=function(b){return arguments.length?(c=Ca(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},jg.svg.diagonal.radial=function(){var a=jg.svg.diagonal(),b=Tf,c=a.projection;return a.projection=function(a){return arguments.length?c(Uf(b=a)):b},a},jg.svg.symbol=function(){function a(a,d){return(Mi.get(b.call(this,a,d))||Xf)(c.call(this,a,d))}var b=Wf,c=Vf;return a.type=function(c){return arguments.length?(b=Ca(c),a):b},a.size=function(b){return arguments.length?(c=Ca(b),a):c},a};var Mi=jg.map({circle:Xf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Oi)),c=b*Oi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Ni),c=b*Ni/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Ni),c=b*Ni/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});jg.svg.symbolTypes=Mi.keys();var Ni=Math.sqrt(3),Oi=Math.tan(30*Sg);Eg.transition=function(a){for(var b,c,d=Pi||++Ti,e=ag(a),f=[],g=Qi||{time:Date.now(),ease:Bd,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&bg(c,k,e,d,g),b.push(c)}return Zf(f,e,d)},Eg.interrupt=function(a){return this.each(null==a?Ri:Yf(ag(a)))};var Pi,Qi,Ri=Yf(ag()),Si=[],Ti=0;Si.call=Eg.call,Si.empty=Eg.empty,Si.node=Eg.node,Si.size=Eg.size,jg.transition=function(a,b){return a&&a.transition?Pi?a.transition(b):a:jg.selection().transition(a)},jg.transition.prototype=Si,Si.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=E(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),bg(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Zf(g,f,e)},Si.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=F(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&bg(e,o,h,g,f),b.push(e)}return Zf(i,h,g)},Si.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=R(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Zf(e,this.namespace,this.id)},Si.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):T(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Si.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Wd:ud,h=jg.ns.qualify(a);return $f(this,"attr."+a,b,h.local?f:e)},Si.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=jg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Si.style=function(a,b,c){function e(){this.style.removeProperty(a)}function f(b){return null==b?e:(b+="",function(){var e,f=d(this).getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=ud(f,b),function(b){this.style.setProperty(a,e(b),c)})})}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return $f(this,"style."+a,b,f)},Si.styleTween=function(a,b,c){function e(e,f){var g=b.call(this,e,f,d(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,e)},Si.text=function(a){return $f(this,"text",a,_f)},Si.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Si.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=jg.ease.apply(jg,arguments)),T(this,function(d){d[c][b].ease=a}))},Si.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:T(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Si.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:T(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Si.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Qi,f=Pi;try{Pi=c,T(this,function(b,e,f){Qi=b[d][c],a.call(b,b.__data__,e,f)})}finally{Qi=e,Pi=f}}else T(this,function(e){var f=e[d][c];(f.event||(f.event=jg.dispatch("start","end","interrupt"))).on(a,b)});return this},Si.transition=function(){for(var a,b,c,d,e=this.id,f=++Ti,g=this.namespace,h=[],i=0,j=this.length;j>i;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;l>k;k++)(c=b[k])&&(d=c[g][e],bg(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Zf(h,g,f)},jg.svg.axis=function(){function a(a){a.each(function(){var a,j=jg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):u:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Mg),q=jg.transition(o.exit()).style("opacity",Mg).remove(),r=jg.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Te(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),jg.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=cg,x="x",z="y",y="x2",A="y2",D.attr("dy",0>G?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+t[0]+","+G*f+"V0H"+t[1]+"V"+G*f)):(a=dg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",0>G?"end":"start"),w.attr("d","M"+G*f+","+t[0]+"H0V"+t[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*s),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*s),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=jg.scale.linear(),d=Ui,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Vi?b+"":Ui,a):d},a.ticks=function(){return arguments.length?(h=lg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ui="bottom",Vi={top:1,right:1,bottom:1,left:1};jg.svg.brush=function(){function a(d){d.each(function(){var d=jg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=d.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),d.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=d.selectAll(".resize").data(p,u);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Wi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=jg.transition(d),m=jg.transition(g);j&&(i=Te(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),c(l)),k&&(i=Te(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==jg.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),A())}function p(){32==jg.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,A())}function q(){var a=jg.mouse(v),d=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(jg.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(c(y),d=!0),C&&r(a,k,1)&&(e(y),d=!0),d&&(b(y),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Te(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];return D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),d>k?(e=d,d=k):e=k),p[0]!=d||p[1]!=e?(c?h=null:g=null,p[0]=d,p[1]=e,!0):void 0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),jg.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=jg.select(jg.event.target),x=i.of(v,arguments),y=jg.select(v),z=w.datum(),B=!/^(n|s)$/.test(z)&&j,C=!/^(e|w)$/.test(z)&&k,D=w.classed("extent"),E=Z(v),F=jg.mouse(v),G=jg.select(d(v)).on("keydown.brush",f).on("keyup.brush",p);if(jg.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),
y.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(z){var H=+/w$/.test(z),I=+/^n/.test(z);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else jg.event.altKey&&(t=F.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),jg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=C(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Xi[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Pi?jg.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=vd(l,b.x),d=vd(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Xi[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Xi[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),c>d&&(i=c,c=d,d=i),(c!=l[0]||d!=l[1])&&(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),e>f&&(i=e,e=f,f=i),(e!=m[0]||f!=m[1])&&(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),c>d&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),e>f&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},jg.rebind(a,i,"on")};var Wi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Yi=ph.format=vh.timeFormat,Zi=Yi.utc,$i=Zi("%Y-%m-%dT%H:%M:%S.%LZ");Yi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eg:$i,eg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},eg.toString=$i.toString,ph.second=Qa(function(a){return new qh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),ph.seconds=ph.second.range,ph.seconds.utc=ph.second.utc.range,ph.minute=Qa(function(a){return new qh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),ph.minutes=ph.minute.range,ph.minutes.utc=ph.minute.utc.range,ph.hour=Qa(function(a){var b=a.getTimezoneOffset()/60;return new qh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),ph.hours=ph.hour.range,ph.hours.utc=ph.hour.utc.range,ph.month=Qa(function(a){return a=ph.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),ph.months=ph.month.range,ph.months.utc=ph.month.utc.range;var _i=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],aj=[[ph.second,1],[ph.second,5],[ph.second,15],[ph.second,30],[ph.minute,1],[ph.minute,5],[ph.minute,15],[ph.minute,30],[ph.hour,1],[ph.hour,3],[ph.hour,6],[ph.hour,12],[ph.day,1],[ph.day,2],[ph.week,1],[ph.month,1],[ph.month,3],[ph.year,1]],bj=Yi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Fb]]),cj={range:function(a,b,c){return jg.range(Math.ceil(a/c)*c,+b,c).map(gg)},floor:u,ceil:u};aj.year=ph.year,ph.scale=function(){return fg(jg.scale.linear(),aj,bj)};var dj=aj.map(function(a){return[a[0].utc,a[1]]}),ej=Zi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Fb]]);dj.year=ph.year.utc,ph.scale.utc=function(){return fg(jg.scale.linear(),dj,ej)},jg.text=Da(function(a){return a.responseText}),jg.json=function(a,b){return Ea(a,"application/json",hg,b)},jg.html=function(a,b){return Ea(a,"text/html",ig,b)},jg.xml=Da(function(a){return a.responseXML}),"function"==typeof a&&a.amd?(this.d3=jg,a(jg)):"object"==typeof c&&c.exports?c.exports=jg:this.d3=jg}()},{}],124:[function(a,b,c){"use strict";function d(a,b){this.point=a,this.index=b}function e(a,b){for(var c=a.point,d=b.point,e=c.length,f=0;e>f;++f){var g=d[f]-c[f];if(g)return g}return 0}function f(a,b,c){if(1===a)return c?[[-1,0]]:[];var d=b.map(function(a,b){return[a[0],b]});d.sort(function(a,b){return a[0]-b[0]});for(var e=new Array(a-1),f=1;a>f;++f){var g=d[f-1],h=d[f];e[f-1]=[g[1],h[1]]}return c&&e.push([-1,e[0][1]],[e[a-1][1],-1]),e}function g(a,b){var c=a.length;if(0===c)return[];var g=a[0].length;if(1>g)return[];if(1===g)return f(c,a,b);for(var j=new Array(c),k=1,l=0;c>l;++l){for(var m=a[l],n=new Array(g+1),o=0,p=0;g>p;++p){var q=m[p];n[p]=q,o+=q*q}n[g]=o,j[l]=new d(n,l),k=Math.max(o,k)}i(j,e),c=j.length;for(var r=new Array(c+g+1),s=new Array(c+g+1),t=(g+1)*(g+1)*k,u=new Array(g+1),l=0;g>=l;++l)u[l]=0;u[g]=t,r[0]=u.slice(),s[0]=-1;for(var l=0;g>=l;++l){var n=u.slice();n[l]=1,r[l+1]=n,s[l+1]=-1}for(var l=0;c>l;++l){var v=j[l];r[l+g+1]=v.point,s[l+g+1]=v.index}var w=h(r,!1);if(w=b?w.filter(function(a){for(var b=0,c=0;g>=c;++c){var d=s[a[c]];if(0>d&&++b>=2)return!1;a[c]=d}return!0}):w.filter(function(a){for(var b=0;g>=b;++b){var c=s[a[b]];if(0>c)return!1;a[b]=c}return!0}),1&g)for(var l=0;l<w.length;++l){var v=w[l],n=v[0];v[0]=v[1],v[1]=n}return w}var h=a("incremental-convex-hull"),i=a("uniq");b.exports=g},{"incremental-convex-hull":291,uniq:552}],125:[function(a,b,c){(function(a){function c(a,b){return n[0]=a,n[1]=b,m[0]}function d(a){return m[0]=a,n[0]}function e(a){return m[0]=a,n[1]}function f(a,b){return n[1]=a,n[0]=b,m[0]}function g(a){return m[0]=a,n[1]}function h(a){return m[0]=a,n[0]}function i(a,b){return o.writeUInt32LE(a,0,!0),o.writeUInt32LE(b,4,!0),o.readDoubleLE(0,!0)}function j(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(0,!0)}function k(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(4,!0)}var l=!1;if("undefined"!=typeof Float64Array){var m=new Float64Array(1),n=new Uint32Array(m.buffer);m[0]=1,l=!0,1072693248===n[1]?(b.exports=function(a){return m[0]=a,[n[0],n[1]]},b.exports.pack=c,b.exports.lo=d,b.exports.hi=e):1072693248===n[0]?(b.exports=function(a){return m[0]=a,[n[1],n[0]]},b.exports.pack=f,b.exports.lo=g,b.exports.hi=h):l=!1}if(!l){var o=new a(8);b.exports=function(a){return o.writeDoubleLE(a,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},b.exports.pack=i,b.exports.lo=j,b.exports.hi=k}b.exports.sign=function(a){return b.exports.hi(a)>>>31},b.exports.exponent=function(a){var c=b.exports.hi(a);return(c<<1>>>21)-1023},b.exports.fraction=function(a){var c=b.exports.lo(a),d=b.exports.hi(a),e=1048575&d;return 2146435072&d&&(e+=1<<20),[c,e]},b.exports.denormalized=function(a){var c=b.exports.hi(a);return!(2146435072&c)}}).call(this,a("buffer").Buffer)},{buffer:78}],126:[function(a,b,c){"use strict";function d(a,b,c){var e=0|a[c];if(0>=e)return[];var f,g=new Array(e);if(c===a.length-1)for(f=0;e>f;++f)g[f]=b;else for(f=0;e>f;++f)g[f]=d(a,b,c+1);return g}function e(a,b){var c,d;for(c=new Array(a),d=0;a>d;++d)c[d]=b;return c}function f(a,b){switch("undefined"==typeof b&&(b=0),typeof a){case"number":if(a>0)return e(0|a,b);break;case"object":if("number"==typeof a.length)return d(a,b,0)}return[]}b.exports=f},{}],127:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;f>r;r+=c)o=a[r],p=a[r+1],j>o&&(j=o),k>p&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;c>f;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;h>g;g++)i=b[g]*d,j=h-1>g?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-(1/0);do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(e>=h&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&t(l>f?e:g,f,k,l,l>f?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(m>i||i===m&&d.x>c.x)&&z(d,a)&&(c=d,m=i)),d=d.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;j>b&&(h++,d=d.nextZ,d);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return w(a,b)&&w(c,d)||w(a,d)&&w(c,b)?!0:v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;c>f;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;i>h;h++){var j=b[h]*c,k=i-1>h?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;b>g;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],128:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if("number"!=typeof b){b=0;for(var d=0;c>d;++d){var f=a[d];b=Math.max(b,f[0],f[1])}b=(0|b)+1}b=0|b;for(var g=new Array(b),d=0;b>d;++d)g[d]=[];for(var d=0;c>d;++d){var f=a[d];g[f[0]].push(f[1]),g[f[1]].push(f[0])}for(var h=0;b>h;++h)e(g[h],function(a,b){return a-b});return g}b.exports=d;var e=a("uniq")},{uniq:552}],129:[function(b,c,d){(function(e,f){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ES6Promise=e()}(this,function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){X=a}function g(a){Y=a}function h(){return function(){return e.nextTick(m)}}function i(){return function(){W(m)}}function j(){var a=0,b=new _(m),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function k(){var a=new MessageChannel;return a.port1.onmessage=m,function(){return a.port2.postMessage(0)}}function l(){var a=setTimeout;return function(){return a(m,1)}}function m(){for(var a=0;V>a;a+=2){var b=ca[a],c=ca[a+1];b(c),ca[a]=void 0,ca[a+1]=void 0}V=0}function n(){try{var a=b,c=a("vertx");return W=c.runOnLoop||c.runOnContext,i()}catch(d){return l()}}function o(a,b){var c=arguments,d=this,e=new this.constructor(q);void 0===e[ea]&&J(e);var f=d._state;return f?!function(){var a=c[f-1];Y(function(){return G(f,e,a,d._result)})}():C(d,e,a,b),e}function p(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(q);return y(c,a),c}function q(){}function r(){return new TypeError("You cannot resolve a promise with itself")}function s(){return new TypeError("A promises callback cannot return that same promise.")}function t(a){try{return a.then}catch(b){return ia.error=b,ia}}function u(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function v(a,b,c){Y(function(a){var d=!1,e=u(c,b,function(c){d||(d=!0,b!==c?y(a,c):A(a,c))},function(b){d||(d=!0,B(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,B(a,e))},a)}function w(a,b){b._state===ga?A(a,b._result):b._state===ha?B(a,b._result):C(b,void 0,function(b){return y(a,b)},function(b){return B(a,b)})}function x(a,b,d){b.constructor===a.constructor&&d===o&&b.constructor.resolve===p?w(a,b):d===ia?B(a,ia.error):void 0===d?A(a,b):c(d)?v(a,b,d):A(a,b)}function y(b,c){b===c?B(b,r()):a(c)?x(b,c,t(c)):A(b,c)}function z(a){a._onerror&&a._onerror(a._result),D(a)}function A(a,b){a._state===fa&&(a._result=b,a._state=ga,0!==a._subscribers.length&&Y(D,a))}function B(a,b){a._state===fa&&(a._state=ha,a._result=b,Y(z,a))}function C(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ga]=c,e[f+ha]=d,0===f&&a._state&&Y(D,a)}function D(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?G(c,d,e,f):e(f);a._subscribers.length=0}}function E(){this.error=null}function F(a,b){try{return a(b)}catch(c){return ja.error=c,ja}}function G(a,b,d,e){var f=c(d),g=void 0,h=void 0,i=void 0,j=void 0;if(f){if(g=F(d,e),g===ja?(j=!0,h=g.error,g=null):i=!0,b===g)return void B(b,s())}else g=e,i=!0;b._state!==fa||(f&&i?y(b,g):j?B(b,h):a===ga?A(b,g):a===ha&&B(b,g))}function H(a,b){try{b(function(b){y(a,b)},function(b){B(a,b)})}catch(c){B(a,c)}}function I(){return ka++}function J(a){a[ea]=ka++,a._state=void 0,a._result=void 0,a._subscribers=[]}function K(a,b){this._instanceConstructor=a,this.promise=new a(q),this.promise[ea]||J(this.promise),U(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):B(this.promise,L())}function L(){return new Error("Array Methods must be provided an Array")}function M(a){return new K(this,a).promise}function N(a){var b=this;return new b(U(a)?function(c,d){for(var e=a.length,f=0;e>f;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})}function O(a){var b=this,c=new b(q);return B(c,a),c}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(a){this[ea]=I(),this._result=this._state=void 0,this._subscribers=[],q!==a&&("function"!=typeof a&&P(),this instanceof R?H(this,a):Q())}function S(){var a=void 0;if("undefined"!=typeof f)a=f;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;if(c){var d=null;try{d=Object.prototype.toString.call(c.resolve())}catch(b){}if("[object Promise]"===d&&!c.cast)return}a.Promise=R}var T=void 0;T=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var U=T,V=0,W=void 0,X=void 0,Y=function(a,b){ca[V]=a,ca[V+1]=b,V+=2,2===V&&(X?X(m):da())},Z="undefined"!=typeof window?window:void 0,$=Z||{},_=$.MutationObserver||$.WebKitMutationObserver,aa="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ba="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ca=new Array(1e3),da=void 0;da=aa?h():_?j():ba?k():void 0===Z&&"function"==typeof b?n():l();var ea=Math.random().toString(36).substring(16),fa=void 0,ga=1,ha=2,ia=new E,ja=new E,ka=0;return K.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===fa&&a>c;c++)this._eachEntry(b[c],c)},K.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===p){var e=t(a);if(e===o&&a._state!==fa)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===R){var f=new c(q);x(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},K.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===fa&&(this._remaining--,a===ha?B(d,c):this._result[b]=c),0===this._remaining&&A(d,this._result)},K.prototype._willSettleAt=function(a,b){var c=this;C(a,void 0,function(a){return c._settledAt(ga,b,a)},function(a){return c._settledAt(ha,b,a)})},R.all=M,R.race=N,R.resolve=p,R.reject=O,R._setScheduler=d,R._setAsap=g,R._asap=Y,R.prototype={constructor:R,then:o,"catch":function(a){return this.then(null,a)}},S(),R.polyfill=S,R.Promise=R,R})}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:496}],130:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],131:[function(a,b,c){"use strict";function d(a,b,c){var d=b||0,e=c||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[d*a[12]+a[8],d*a[13]+a[9],d*a[14]+a[10],d*a[15]+a[11]],[e*a[12]-a[8],e*a[13]-a[9],e*a[14]-a[10],e*a[15]-a[11]]]}b.exports=d},{}],132:[function(a,b,c){"use strict";function d(a){for(var b,c=a.length,d=0;c>d;d++)if(b=a.charCodeAt(d),(9>b||b>13)&&32!==b&&133!==b&&160!==b&&5760!==b&&6158!==b&&(8192>b||b>8205)&&8232!==b&&8233!==b&&8239!==b&&8287!==b&&8288!==b&&12288!==b&&65279!==b)return!1;return!0}b.exports=function(a){var b=typeof a;if("string"===b){var c=a;if(a=+a,0===a&&d(c))return!1}else if("number"!==b)return!1;return 1>a-a}},{}],133:[function(a,b,c){"use strict";function d(a){return new Function("f","var p = (f && f.properties || {}); return "+e(a))}function e(a){if(!a)return"true";var b=a[0];if(a.length<=1)return"any"===b?"false":"true";var c="=="===b?g(a[1],a[2],"===",!1):"!="===b?g(a[1],a[2],"!==",!1):"<"===b||">"===b||"<="===b||">="===b?g(a[1],a[2],b,!0):"any"===b?h(a.slice(1),"||"):"all"===b?h(a.slice(1),"&&"):"none"===b?k(h(a.slice(1),"||")):"in"===b?i(a[1],a.slice(2)):"!in"===b?k(i(a[1],a.slice(2))):"has"===b?j(a[1]):"!has"===b?k(j([a[1]])):"true";return"("+c+")"}function f(a){return"$type"===a?"f.type":"$id"===a?"f.id":"p["+JSON.stringify(a)+"]"}function g(a,b,c,d){var e=f(a),g="$type"===a?m.indexOf(b):JSON.stringify(b);return(d?"typeof "+e+"=== typeof "+g+"&&":"")+e+c+g}function h(a,b){return a.map(e).join(b)}function i(a,b){"$type"===a&&(b=b.map(function(a){return m.indexOf(a)}));var c=JSON.stringify(b.sort(l)),d=f(a);return b.length<=200?c+".indexOf("+d+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+d+", "+c+",0,"+(b.length-1)+")"}function j(a){return JSON.stringify(a)+" in p"}function k(a){return"!("+a+")"}function l(a,b){return b>a?-1:a>b?1:0}b.exports=d;var m=["Unknown","Point","LineString","Polygon"]},{}],134:[function(a,b,c){"use strict";function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a,b,c){this.dimension=a.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-(1/0),this.bounds[1][d]=1/0;this._state=a.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[c],this._scratch=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice()]}function f(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=0;return b}function g(a,b,c){switch(arguments.length){case 0:return new e([0],[0],0);case 1:if("number"==typeof a){var d=f(a);return new e(d,d,0)}return new e(a,f(a.length),0);case 2:if("number"==typeof b){var d=f(a.length);return new e(a,d,+b)}c=0;case 3:if(a.length!==b.length)throw new Error("state and velocity lengths must match");return new e(a,b,c)}}b.exports=g;var h=a("cubic-hermite"),i=a("binary-search-bounds"),j=e.prototype;j.flush=function(a){var b=i.gt(this._time,a)-1;0>=b||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},j.curve=function(a){var b=this._time,c=b.length,e=i.le(b,a),f=this._scratch[0],g=this._state,j=this._velocity,k=this.dimension,l=this.bounds;if(0>e)for(var m=k-1,n=0;k>n;++n,--m)f[n]=g[m];else if(e>=c-1)for(var m=g.length-1,o=a-b[c-1],n=0;k>n;++n,--m)f[n]=g[m]+o*j[m];else{for(var m=k*(e+1)-1,p=b[e],q=b[e+1],r=q-p||1,s=this._scratch[1],t=this._scratch[2],u=this._scratch[3],v=this._scratch[4],w=!0,n=0;k>n;++n,--m)s[n]=g[m],u[n]=j[m]*r,t[n]=g[m+k],v[n]=j[m+k]*r,w=w&&s[n]===t[n]&&u[n]===v[n]&&0===u[n];if(w)for(var n=0;k>n;++n)f[n]=s[n];else h(s,u,t,v,(a-p)/r,f)}for(var x=l[0],y=l[1],n=0;k>n;++n)f[n]=d(x[n],y[n],f[n]);return f},j.dcurve=function(a){var b=this._time,c=b.length,d=i.le(b,a),e=this._scratch[0],f=this._state,g=this._velocity,j=this.dimension;if(d>=c-1)for(var k=f.length-1,l=(a-b[c-1],0);j>l;++l,--k)e[l]=g[k];else{for(var k=j*(d+1)-1,m=b[d],n=b[d+1],o=n-m||1,p=this._scratch[1],q=this._scratch[2],r=this._scratch[3],s=this._scratch[4],t=!0,l=0;j>l;++l,--k)p[l]=f[k],r[l]=g[k]*o,q[l]=f[k+j],s[l]=g[k+j]*o,t=t&&p[l]===q[l]&&r[l]===s[l]&&0===r[l];if(t)for(var l=0;j>l;++l)e[l]=0;else{h.derivative(p,r,q,s,(a-m)/o,e);for(var l=0;j>l;++l)e[l]/=o}}return e},j.lastT=function(){var a=this._time;return a[a.length-1]},j.stable=function(){for(var a=this._velocity,b=a.length,c=this.dimension-1;c>=0;--c)if(a[--b])return!1;return!0},j.jump=function(a){var b=this.lastT(),c=this.dimension;if(!(b>a||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1];this._time.push(b,a);for(var k=0;2>k;++k)for(var l=0;c>l;++l)e.push(e[g++]),f.push(0);this._time.push(a);for(var l=c;l>0;--l)e.push(d(i[l-1],j[l-1],arguments[l])),f.push(0)}},j.push=function(a){var b=this.lastT(),c=this.dimension;if(!(b>a||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=a-b,i=this.bounds,j=i[0],k=i[1],l=h>1e-6?1/h:0;this._time.push(a);for(var m=c;m>0;--m){var n=d(j[m-1],k[m-1],arguments[m]);e.push(n),f.push((n-e[g++])*l)}}},j.set=function(a){var b=this.dimension;if(!(a<this.lastT()||arguments.length!==b+1)){var c=this._state,e=this._velocity,f=this.bounds,g=f[0],h=f[1];this._time.push(a);for(var i=b;i>0;--i)c.push(d(g[i-1],h[i-1],arguments[i])),e.push(0)}},j.move=function(a){var b=this.lastT(),c=this.dimension;if(!(b>=a||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1],k=a-b,l=k>1e-6?1/k:0;this._time.push(a);for(var m=c;m>0;--m){var n=arguments[m];e.push(d(i[m-1],j[m-1],e[g++]+n)),f.push(n*l)}}},j.idle=function(a){var b=this.lastT();if(!(b>a)){var c=this.dimension,e=this._state,f=this._velocity,g=e.length-c,h=this.bounds,i=h[0],j=h[1],k=a-b;this._time.push(a);for(var l=c-1;l>=0;--l)e.push(d(i[l],j[l],e[g]+k*f[g])),f.push(0),g+=1}}},{"binary-search-bounds":67,"cubic-hermite":110}],135:[function(a,b,c){"use strict";function d(a){a=a||{};var b,c,d=a.canvas||document.createElement("canvas"),g=a.family||"sans-serif",h=a.shape||[512,512],i=a.step||[32,32],j=parseFloat(a.size)||16,k=a.chars||[32,126],l=Math.floor((i[0]-j)/2),m=a.radius||1.5*l,n=new f(j,l,m,0,g),o=null==a.align?"optical":a.align,p=null==a.fit||1==a.fit?.5:a.fit;if(Array.isArray(k)){if(2===k.length&&"number"==typeof k[0]&&"number"==typeof k[1]){var q=[];for(b=k[0],c=0;b<=k[1];b++)q[c++]=String.fromCharCode(b);k=q}}else k=String(k).split("");h=h.slice(),d.width=h[0],d.height=h[1];var r=d.getContext("2d");r.fillStyle="#000",r.fillRect(0,0,d.width,d.height),r.textBaseline="middle";var s=i[0],t=i[1],u=0,v=0,w=j/t,x=Math.min(k.length,Math.floor(h[0]/s)*Math.ceil(h[1]/t)),y=n.ctx.textAlign,z=n.buffer,A=n.middle;for(n.ctx.textAlign="center",n.buffer=n.size/2,b=0;x>b;b++)if(k[b]){var B=e(k[b],g,w),C=1,D=[0,0];if(p){var E=p;Array.isArray(p)&&(E=p[b]);var F=.5*(B.bounds[3]-B.bounds[1]),G=.5*(B.bounds[2]-B.bounds[0]),H=Math.max(F,G),I=Math.sqrt(F*F+G*G),J=.333*B.radius+.333*H+.333*I;C=t*E/(J*t*2),n.ctx.font=j*C+"px "+g}else n.ctx.font=j+"px "+g;o&&(D="optical"===o||o===!0?[.5*s-s*B.center[0],.5*t-t*B.center[1]]:[.5*s-s*(B.bounds[2]+B.bounds[0])*.5,.5*t-t*(B.bounds[3]+B.bounds[1])*.5],n.middle=A+D[1]*C);var K=n.draw(k[b]);r.putImageData(K,u+D[0]*C,v),u+=i[0],u>h[0]-i[0]&&(u=0,v+=i[1])}return n.ctx.textAlign=y,n.buffer=z,n.middle=A,d}function e(a,b,c){if(h[b]&&h[b][a])return h[b][a];var d=200,e=d*c,f=g(a,{size:d,fontSize:e,fontFamily:b});h[b]||(h[b]={});var i={center:[f.center[0]/d,f.center[1]/d],bounds:f.bounds.map(function(a){return a/d}),radius:f.radius/d};return h[b][a]=i,
i}var f=a("tiny-sdf"),g=a("optical-properties");b.exports=d;var h={}},{"optical-properties":472,"tiny-sdf":542}],136:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._color=a,this.key=b,this.value=c,this.left=d,this.right=e,this._count=f}function e(a){return new d(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,b){return new d(a,b.key,b.value,b.left,b.right,b._count)}function g(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function h(a,b){this._compare=a,this.root=b}function i(a,b){if(b.left){var c=i(a,b.left);if(c)return c}var c=a(b.key,b.value);return c?c:b.right?i(a,b.right):void 0}function j(a,b,c,d){var e=b(a,d.key);if(0>=e){if(d.left){var f=j(a,b,c,d.left);if(f)return f}var f=c(d.key,d.value);if(f)return f}return d.right?j(a,b,c,d.right):void 0}function k(a,b,c,d,e){var f,g=c(a,e.key),h=c(b,e.key);if(0>=g){if(e.left&&(f=k(a,b,c,d,e.left)))return f;if(h>0&&(f=d(e.key,e.value)))return f}return h>0&&e.right?k(a,b,c,d,e.right):void 0}function l(a,b){this.tree=a,this._stack=b}function m(a,b){a.key=b.key,a.value=b.value,a.left=b.left,a.right=b.right,a._color=b._color,a._count=b._count}function n(a){for(var b,c,d,h,i=a.length-1;i>=0;--i){if(b=a[i],0===i)return void(b._color=r);if(c=a[i-1],c.left===b){if(d=c.right,d.right&&d.right._color===q){if(d=c.right=e(d),h=d.right=e(d.right),c.right=d.left,d.left=c,d.right=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}return void(a[i-1]=d)}if(d.left&&d.left._color===q){if(d=c.right=e(d),h=d.left=e(d.left),c.right=h.left,d.left=h.right,h.left=c,h.right=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.left===c?j.left=h:j.right=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.right=f(q,d));c.right=f(q,d);continue}if(d=e(d),c.right=d.left,d.left=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}else{if(d=c.left,d.left&&d.left._color===q){if(d=c.left=e(d),h=d.left=e(d.left),c.left=d.right,d.right=c,d.left=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}return void(a[i-1]=d)}if(d.right&&d.right._color===q){if(d=c.left=e(d),h=d.right=e(d.right),c.left=h.right,d.right=h.left,h.right=c,h.left=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.right===c?j.right=h:j.left=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.left=f(q,d));c.left=f(q,d);continue}if(d=e(d),c.left=d.right,d.right=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}}}function o(a,b){return b>a?-1:a>b?1:0}function p(a){return new h(a||o,null)}b.exports=p;var q=0,r=1,s=h.prototype;Object.defineProperty(s,"keys",{get:function(){var a=[];return this.forEach(function(b,c){a.push(b)}),a}}),Object.defineProperty(s,"values",{get:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(a,b){for(var c=this._compare,e=this.root,i=[],j=[];e;){var k=c(a,e.key);i.push(e),j.push(k),e=0>=k?e.left:e.right}i.push(new d(q,a,b,null,null,1));for(var l=i.length-2;l>=0;--l){var e=i[l];j[l]<=0?i[l]=new d(e._color,e.key,e.value,i[l+1],e.right,e._count+1):i[l]=new d(e._color,e.key,e.value,e.left,i[l+1],e._count+1)}for(var l=i.length-1;l>1;--l){var m=i[l-1],e=i[l];if(m._color===r||e._color===r)break;var n=i[l-2];if(n.left===m)if(m.left===e){var o=n.right;if(!o||o._color!==q){if(n._color=q,n.left=m.right,m._color=r,m.right=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.left===n?p.left=m:p.right=m}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else{var o=n.right;if(!o||o._color!==q){if(m.right=e.left,n._color=q,n.left=e.right,e._color=r,e.left=m,e.right=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.left===n?p.left=e:p.right=e}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else if(m.right===e){var o=n.left;if(!o||o._color!==q){if(n._color=q,n.right=m.left,m._color=r,m.left=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.right===n?p.right=m:p.left=m}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}else{var o=n.left;if(!o||o._color!==q){if(m.left=e.right,n._color=q,n.right=e.left,e._color=r,e.right=m,e.left=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.right===n?p.right=e:p.left=e}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}}return i[0]._color=r,new h(c,i[0])},s.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return i(a,this.root);case 2:return j(b,this._compare,a,this.root);case 3:if(this._compare(b,c)>=0)return;return k(b,c,this._compare,a,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new l(this,a)}}),Object.defineProperty(s,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new l(this,a)}}),s.at=function(a){if(0>a)return new l(this,[]);for(var b=this.root,c=[];;){if(c.push(b),b.left){if(a<b.left._count){b=b.left;continue}a-=b.left._count}if(!a)return new l(this,c);if(a-=1,!b.right)break;if(a>=b.right._count)break;b=b.right}return new l(this,[])},s.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),0>=f&&(e=d.length),c=0>=f?c.left:c.right}return d.length=e,new l(this,d)},s.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),0>f&&(e=d.length),c=0>f?c.left:c.right}return d.length=e,new l(this,d)},s.lt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>0&&(e=d.length),c=0>=f?c.left:c.right}return d.length=e,new l(this,d)},s.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>=0&&(e=d.length),c=0>f?c.left:c.right}return d.length=e,new l(this,d)},s.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);if(d.push(c),0===e)return new l(this,d);c=0>=e?c.left:c.right}return new l(this,[])},s.remove=function(a){var b=this.find(a);return b?b.remove():this},s.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};var t=l.prototype;Object.defineProperty(t,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(t,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),t.clone=function(){return new l(this.tree,this._stack.slice())},t.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=new Array(a.length),c=a[a.length-1];b[b.length-1]=new d(c._color,c.key,c.value,c.left,c.right,c._count);for(var e=a.length-2;e>=0;--e){var c=a[e];c.left===a[e+1]?b[e]=new d(c._color,c.key,c.value,b[e+1],c.right,c._count):b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count)}if(c=b[b.length-1],c.left&&c.right){var f=b.length;for(c=c.left;c.right;)b.push(c),c=c.right;var g=b[f-1];b.push(new d(c._color,g.key,g.value,c.left,c.right,c._count)),b[f-1].key=c.key,b[f-1].value=c.value;for(var e=b.length-2;e>=f;--e)c=b[e],b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count);b[f-1].left=b[f]}if(c=b[b.length-1],c._color===q){var i=b[b.length-2];i.left===c?i.left=null:i.right===c&&(i.right=null),b.pop();for(var e=0;e<b.length;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(c.left||c.right){c.left?m(c,c.left):c.right&&m(c,c.right),c._color=r;for(var e=0;e<b.length-1;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(1===b.length)return new h(this.tree._compare,null);for(var e=0;e<b.length;++e)b[e]._count--;var j=b[b.length-2];return n(b),j.left===c?j.left=null:j.right=null,new h(this.tree._compare,b[0])},Object.defineProperty(t,"key",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].key:void 0},enumerable:!0}),Object.defineProperty(t,"value",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].value:void 0},enumerable:!0}),Object.defineProperty(t,"index",{get:function(){var a=0,b=this._stack;if(0===b.length){var c=this.tree.root;return c?c._count:0}b[b.length-1].left&&(a=b[b.length-1].left._count);for(var d=b.length-2;d>=0;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));return a},enumerable:!0}),t.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();a.length>0&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].left===a[b])return!0;return!1}}),t.update=function(a){var b=this._stack;if(0===b.length)throw new Error("Can't update empty node!");var c=new Array(b.length),e=b[b.length-1];c[c.length-1]=new d(e._color,e.key,a,e.left,e.right,e._count);for(var f=b.length-2;f>=0;--f)e=b[f],e.left===b[f+1]?c[f]=new d(e._color,e.key,e.value,c[f+1],e.right,e._count):c[f]=new d(e._color,e.key,e.value,e.left,c[f+1],e._count);return new h(this.tree._compare,c[0])},t.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();a.length>0&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],137:[function(a,b,c){function d(a){if(0>a)return Number("0/0");for(var b=h[0],c=h.length-1;c>0;--c)b+=h[c]/(a+c);var d=a+g+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(d)-d+Math.log(b)-Math.log(a)}var e=7,f=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],g=607/128,h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];b.exports=function i(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*i(1-a));if(a>100)return Math.exp(d(a));a-=1;for(var b=f[0],c=1;e+2>c;c++)b+=f[c]/(a+c);var g=a+e+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*b},b.exports.log=d},{}],138:[function(a,b,c){function d(a){if("Polygon"===a.type)return e(a.coordinates);if("MultiPolygon"===a.type){for(var b=0,c=0;c<a.coordinates.length;c++)b+=e(a.coordinates[c]);return b}return null}function e(a){var b=0;if(a&&a.length>0){b+=Math.abs(f(a[0]));for(var c=1;c<a.length;c++)b-=Math.abs(f(a[c]))}return b}function f(a){var b=0;if(a.length>2){for(var c,d,e=0;e<a.length-1;e++)c=a[e],d=a[e+1],b+=g(d[0]-c[0])*(2+Math.sin(g(c[1]))+Math.sin(g(d[1])));b=b*h.RADIUS*h.RADIUS/2}return b}function g(a){return a*Math.PI/180}var h=a("wgs84");b.exports.geometry=d,b.exports.ring=f},{wgs84:574}],139:[function(a,b,c){function d(a,b){switch(a&&a.type||null){case"FeatureCollection":return a.features=a.features.map(e(d,b)),a;case"Feature":return a.geometry=d(a.geometry,b),a;case"Polygon":case"MultiPolygon":return f(a,b);default:return a}}function e(a,b){return function(c){return a(c,b)}}function f(a,b){return"Polygon"===a.type?a.coordinates=g(a.coordinates,b):"MultiPolygon"===a.type&&(a.coordinates=a.coordinates.map(e(g,b))),a}function g(a,b){b=!!b,a[0]=h(a[0],!b);for(var c=1;c<a.length;c++)a[c]=h(a[c],b);return a}function h(a,b){return i(a)===b?a:a.reverse()}function i(a){return j.ring(a)>=0}var j=a("geojson-area");b.exports=d},{"geojson-area":138}],140:[function(a,b,c){"use strict";function d(a,b,c,d,g,i,j,k){if(c/=b,d/=b,j>=c&&d>=k)return a;if(j>d||c>k)return null;for(var l=[],m=0;m<a.length;m++){var n,o,p=a[m],q=p.geometry,r=p.type;if(n=p.min[g],o=p.max[g],n>=c&&d>=o)l.push(p);else if(!(n>d||c>o)){var s=1===r?e(q,c,d,g):f(q,c,d,g,i,3===r);s.length&&l.push(h(p.tags,r,s,p.id))}}return l.length?l:null}function e(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=g[d];h>=b&&c>=h&&e.push(g)}return e}function f(a,b,c,d,e,f){for(var h=[],i=0;i<a.length;i++){var j,k,l,m=0,n=0,o=null,p=a[i],q=p.area,r=p.dist,s=p.outer,t=p.length,u=[];for(k=0;t-1>k;k++)j=o||p[k],o=p[k+1],m=n||j[d],n=o[d],b>m?n>c?(u.push(e(j,o,b),e(j,o,c)),f||(u=g(h,u,q,r,s))):n>=b&&u.push(e(j,o,b)):m>c?b>n?(u.push(e(j,o,c),e(j,o,b)),f||(u=g(h,u,q,r,s))):c>=n&&u.push(e(j,o,c)):(u.push(j),b>n?(u.push(e(j,o,b)),f||(u=g(h,u,q,r,s))):n>c&&(u.push(e(j,o,c)),f||(u=g(h,u,q,r,s))));j=p[t-1],m=j[d],m>=b&&c>=m&&u.push(j),l=u[u.length-1],f&&l&&(u[0][0]!==l[0]||u[0][1]!==l[1])&&u.push(u[0]),g(h,u,q,r,s)}return h}function g(a,b,c,d,e){return b.length&&(b.area=c,b.dist=d,void 0!==e&&(b.outer=e),a.push(b)),[]}b.exports=d;var h=a("./feature")},{"./feature":142}],141:[function(a,b,c){"use strict";function d(a,b){var c=[];if("FeatureCollection"===a.type)for(var d=0;d<a.features.length;d++)e(c,a.features[d],b);else"Feature"===a.type?e(c,a,b):e(c,{geometry:a},b);return c}function e(a,b,c){if(null!==b.geometry){var d,h,i,k,l=b.geometry,m=l.type,n=l.coordinates,o=b.properties,p=b.id;if("Point"===m)a.push(j(o,1,[g(n)],p));else if("MultiPoint"===m)a.push(j(o,1,f(n),p));else if("LineString"===m)a.push(j(o,2,[f(n,c)],p));else if("MultiLineString"===m||"Polygon"===m){for(i=[],d=0;d<n.length;d++)k=f(n[d],c),"Polygon"===m&&(k.outer=0===d),i.push(k);a.push(j(o,"Polygon"===m?3:2,i,p))}else if("MultiPolygon"===m){for(i=[],d=0;d<n.length;d++)for(h=0;h<n[d].length;h++)k=f(n[d][h],c),k.outer=0===h,i.push(k);a.push(j(o,3,i,p))}else{if("GeometryCollection"!==m)throw new Error("Input data is not a valid GeoJSON object.");for(d=0;d<l.geometries.length;d++)e(a,{geometry:l.geometries[d],properties:o},c)}}}function f(a,b){for(var c=[],d=0;d<a.length;d++)c.push(g(a[d]));return b&&(i(c,b),h(c)),c}function g(a){var b=Math.sin(a[1]*Math.PI/180),c=a[0]/360+.5,d=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return d=0>d?0:d>1?1:d,[c,d,0]}function h(a){for(var b,c,d=0,e=0,f=0;f<a.length-1;f++)b=c||a[f],c=a[f+1],d+=b[0]*c[1]-c[0]*b[1],e+=Math.abs(c[0]-b[0])+Math.abs(c[1]-b[1]);a.area=Math.abs(d/2),a.dist=e}b.exports=d;var i=a("./simplify"),j=a("./feature")},{"./feature":142,"./simplify":144}],142:[function(a,b,c){"use strict";function d(a,b,c,d){var f={id:d||null,type:b,geometry:c,tags:a||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return e(f),f}function e(a){var b=a.geometry,c=a.min,d=a.max;if(1===a.type)f(c,d,b);else for(var e=0;e<b.length;e++)f(c,d,b[e]);return a}function f(a,b,c){for(var d,e=0;e<c.length;e++)d=c[e],a[0]=Math.min(d[0],a[0]),b[0]=Math.max(d[0],b[0]),a[1]=Math.min(d[1],a[1]),b[1]=Math.max(d[1],b[1])}b.exports=d},{}],143:[function(a,b,c){"use strict";function d(a,b){return new e(a,b)}function e(a,b){b=this.options=i(Object.create(this.options),b);var c=b.debug;c&&console.time("preprocess data");var d=1<<b.maxZoom,e=k(a,b.tolerance/(d*b.extent));this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",b.indexMaxZoom,b.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e=n(e,b.buffer/b.extent,g),e.length&&this.splitTile(e,0,0,0),c&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function f(a,b,c){return 32*((1<<a)*c+b)+a}function g(a,b,c){return[c,(c-a[0])*(b[1]-a[1])/(b[0]-a[0])+a[1],1]}function h(a,b,c){return[(c-a[1])*(b[0]-a[0])/(b[1]-a[1])+a[0],c,1]}function i(a,b){for(var c in b)a[c]=b[c];return a}function j(a,b,c){var d=a.source;if(1!==d.length)return!1;var e=d[0];if(3!==e.type||e.geometry.length>1)return!1;var f=e.geometry[0].length;if(5!==f)return!1;for(var g=0;f>g;g++){var h=l.point(e.geometry[0][g],b,a.z2,a.x,a.y);if(h[0]!==-c&&h[0]!==b+c||h[1]!==-c&&h[1]!==b+c)return!1}return!0}b.exports=d;var k=a("./convert"),l=a("./transform"),m=a("./clip"),n=a("./wrap"),o=a("./tile");e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},e.prototype.splitTile=function(a,b,c,d,e,i,k){for(var l=[a,b,c,d],n=this.options,p=n.debug,q=null;l.length;){d=l.pop(),c=l.pop(),b=l.pop(),a=l.pop();var r=1<<b,s=f(b,c,d),t=this.tiles[s],u=b===n.maxZoom?0:n.tolerance/(r*n.extent);if(!t&&(p>1&&console.time("creation"),t=this.tiles[s]=o(a,r,c,d,u,b===n.maxZoom),this.tileCoords.push({z:b,x:c,y:d}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",b,c,d,t.numFeatures,t.numPoints,t.numSimplified),console.timeEnd("creation"));var v="z"+b;this.stats[v]=(this.stats[v]||0)+1,this.total++}if(t.source=a,e){if(b===n.maxZoom||b===e)continue;var w=1<<e-b;if(c!==Math.floor(i/w)||d!==Math.floor(k/w))continue}else if(b===n.indexMaxZoom||t.numPoints<=n.indexMaxPoints)continue;if(n.solidChildren||!j(t,n.extent,n.buffer)){t.source=null,p>1&&console.time("clipping");var x,y,z,A,B,C,D=.5*n.buffer/n.extent,E=.5-D,F=.5+D,G=1+D;x=y=z=A=null,B=m(a,r,c-D,c+F,0,g,t.min[0],t.max[0]),C=m(a,r,c+E,c+G,0,g,t.min[0],t.max[0]),B&&(x=m(B,r,d-D,d+F,1,h,t.min[1],t.max[1]),y=m(B,r,d+E,d+G,1,h,t.min[1],t.max[1])),C&&(z=m(C,r,d-D,d+F,1,h,t.min[1],t.max[1]),A=m(C,r,d+E,d+G,1,h,t.min[1],t.max[1])),p>1&&console.timeEnd("clipping"),a.length&&(l.push(x||[],b+1,2*c,2*d),l.push(y||[],b+1,2*c,2*d+1),l.push(z||[],b+1,2*c+1,2*d),l.push(A||[],b+1,2*c+1,2*d+1))}else e&&(q=b)}return q},e.prototype.getTile=function(a,b,c){var d=this.options,e=d.extent,g=d.debug,h=1<<a;b=(b%h+h)%h;var i=f(a,b,c);if(this.tiles[i])return l.tile(this.tiles[i],e);g>1&&console.log("drilling down to z%d-%d-%d",a,b,c);for(var k,m=a,n=b,o=c;!k&&m>0;)m--,n=Math.floor(n/2),o=Math.floor(o/2),k=this.tiles[f(m,n,o)];if(!k||!k.source)return null;if(g>1&&console.log("found parent tile z%d-%d-%d",m,n,o),j(k,e,d.buffer))return l.tile(k,e);g>1&&console.time("drilling down");var p=this.splitTile(k.source,m,n,o,a,b,c);if(g>1&&console.timeEnd("drilling down"),null!==p){var q=1<<a-p;i=f(p,Math.floor(b/q),Math.floor(c/q))}return this.tiles[i]?l.tile(this.tiles[i],e):null}},{"./clip":140,"./convert":141,"./tile":145,"./transform":146,"./wrap":147}],144:[function(a,b,c){"use strict";function d(a,b){var c,d,f,g,h=b*b,i=a.length,j=0,k=i-1,l=[];for(a[j][2]=1,a[k][2]=1;k;){for(d=0,c=j+1;k>c;c++)f=e(a[c],a[j],a[k]),f>d&&(g=c,d=f);d>h?(a[g][2]=d,l.push(j),l.push(g),j=g):(k=l.pop(),j=l.pop())}}function e(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1],h=a[0],i=a[1],j=f-d,k=g-e;if(0!==j||0!==k){var l=((h-d)*j+(i-e)*k)/(j*j+k*k);l>1?(d=f,e=g):l>0&&(d+=j*l,e+=k*l)}return j=h-d,k=i-e,j*j+k*k}b.exports=d},{}],145:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z2:b,transformed:!1,min:[2,1],max:[-1,0]},i=0;i<a.length;i++){h.numFeatures++,e(h,a[i],f,g);var j=a[i].min,k=a[i].max;j[0]<h.min[0]&&(h.min[0]=j[0]),j[1]<h.min[1]&&(h.min[1]=j[1]),k[0]>h.max[0]&&(h.max[0]=k[0]),k[1]>h.max[1]&&(h.max[1]=k[1])}return h}function e(a,b,c,d){var e,g,h,i,j=b.geometry,k=b.type,l=[],m=c*c;if(1===k)for(e=0;e<j.length;e++)l.push(j[e]),a.numPoints++,a.numSimplified++;else for(e=0;e<j.length;e++)if(h=j[e],d||!(2===k&&h.dist<c||3===k&&h.area<m)){var n=[];for(g=0;g<h.length;g++)i=h[g],(d||i[2]>m)&&(n.push(i),a.numSimplified++),a.numPoints++;3===k&&f(n,h.outer),l.push(n)}else a.numPoints+=h.length;if(l.length){var o={geometry:l,type:k,tags:b.tags||null};null!==b.id&&(o.id=b.id),a.features.push(o)}}function f(a,b){var c=g(a);0>c===b&&a.reverse()}function g(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;f>e;g=e++)b=a[e],c=a[g],d+=(c[0]-b[0])*(b[1]+c[1]);return d}b.exports=d},{}],146:[function(a,b,c){"use strict";function d(a,b){if(a.transformed)return a;var c,d,f,g=a.z2,h=a.x,i=a.y;for(c=0;c<a.features.length;c++){var j=a.features[c],k=j.geometry,l=j.type;if(1===l)for(d=0;d<k.length;d++)k[d]=e(k[d],b,g,h,i);else for(d=0;d<k.length;d++){var m=k[d];for(f=0;f<m.length;f++)m[f]=e(m[f],b,g,h,i)}}return a.transformed=!0,a}function e(a,b,c,d,e){var f=Math.round(b*(a[0]*c-d)),g=Math.round(b*(a[1]*c-e));return[f,g]}c.tile=d,c.point=e},{}],147:[function(a,b,c){"use strict";function d(a,b,c){var d=a,f=g(a,1,-1-b,b,0,c,-1,2),h=g(a,1,1-b,2+b,0,c,-1,2);return(f||h)&&(d=g(a,1,-b,1+b,0,c,-1,2)||[],f&&(d=e(f,1).concat(d)),h&&(d=d.concat(e(h,-1)))),d}function e(a,b){for(var c=[],d=0;d<a.length;d++){var e,g=a[d],i=g.type;if(1===i)e=f(g.geometry,b);else{e=[];for(var j=0;j<g.geometry.length;j++)e.push(f(g.geometry[j],b))}c.push(h(g.tags,i,e,g.id))}return c}function f(a,b){var c=[];c.area=a.area,c.dist=a.dist;for(var d=0;d<a.length;d++)c.push([a[d][0]+b,a[d][1],a[d][2]]);return c}var g=a("./clip"),h=a("./feature");b.exports=d},{"./clip":140,"./feature":142}],148:[function(a,b,c){function d(a,b){if("string"!=typeof a)throw new TypeError("must specify type string");if(b=b||{},"undefined"==typeof document&&!b.canvas)return null;var c=b.canvas||document.createElement("canvas");"number"==typeof b.width&&(c.width=b.width),"number"==typeof b.height&&(c.height=b.height);var d,e=b;try{var f=[a];0===a.indexOf("webgl")&&f.push("experimental-"+a);for(var g=0;g<f.length;g++)if(d=c.getContext(f[g],e))return d}catch(h){d=null}return d||null}b.exports=d},{}],149:[function(a,b,c){"use strict";function d(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function e(a){this.gl=a,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=k(a)}function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function g(a,b,c,d,e){for(var f=a.primalOffset,g=a.primalMinor,h=a.mirrorOffset,i=a.mirrorMinor,j=d[b],k=0;3>k;++k)if(b!==k){var l=f,m=h,n=g,o=i;j&1<<k&&(l=h,m=f,n=i,o=g),l[k]=c[0][k],m[k]=c[1][k],e[k]>0?(n[k]=-1,o[k]=0):(n[k]=0,o[k]=1)}}function h(a,b){var c=new e(a);return c.update(b),c}b.exports=h;var i=a("./lib/text.js"),j=a("./lib/lines.js"),k=a("./lib/background.js"),l=a("./lib/cube.js"),m=a("./lib/ticks.js"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=e.prototype;o.update=function(a){function b(b,c,d){if(d in a){var e,f=a[d],g=this[d];(b?Array.isArray(f)&&Array.isArray(f[0]):Array.isArray(f))?this[d]=e=[c(f[0]),c(f[1]),c(f[2])]:this[d]=e=[c(f),c(f),c(f)];for(var h=0;3>h;++h)if(e[h]!==g[h])return!0}return!1}a=a||{};var c,d=b.bind(this,!1,Number),e=b.bind(this,!1,Boolean),f=b.bind(this,!1,String),g=b.bind(this,!0,function(a){if(Array.isArray(a)){if(3===a.length)return[+a[0],+a[1],+a[2],1];if(4===a.length)return[+a[0],+a[1],+a[2],+a[3]]}return[0,0,0,1]}),h=!1,k=!1;if("bounds"in a)for(var l=a.bounds,n=0;2>n;++n)for(var o=0;3>o;++o)l[n][o]!==this.bounds[n][o]&&(k=!0),this.bounds[n][o]=l[n][o];if("ticks"in a){c=a.ticks,h=!0,this.autoTicks=!1;for(var n=0;3>n;++n)this.tickSpacing[n]=0}else d("tickSpacing")&&(this.autoTicks=!0,k=!0);if(this._firstInit&&("ticks"in a||"tickSpacing"in a||(this.autoTicks=!0),k=!0,h=!0,this._firstInit=!1),k&&this.autoTicks&&(c=m.create(this.bounds,this.tickSpacing),h=!0),h){for(var n=0;3>n;++n)c[n].sort(function(a,b){return a.x-b.x});m.equal(c,this.ticks)?h=!1:this.ticks=c}e("tickEnable"),f("tickFont")&&(h=!0),d("tickSize"),d("tickAngle"),d("tickPad"),g("tickColor");var p=f("labels");f("labelFont")&&(p=!0),e("labelEnable"),d("labelSize"),d("labelPad"),g("labelColor"),e("lineEnable"),e("lineMirror"),d("lineWidth"),g("lineColor"),e("lineTickEnable"),e("lineTickMirror"),d("lineTickLength"),d("lineTickWidth"),g("lineTickColor"),e("gridEnable"),d("gridWidth"),g("gridColor"),e("zeroEnable"),g("zeroLineColor"),d("zeroLineWidth"),e("backgroundEnable"),g("backgroundColor"),this._text?this._text&&(p||h)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=j(this.gl,this.bounds,this.ticks))};var p=[new f,new f,new f],q=[0,0,0],r={model:n,view:n,projection:n};o.isOpaque=function(){return!0},o.isTransparent=function(){return!1},o.drawTransparent=function(a){};var s=[0,0,0],t=[0,0,0],u=[0,0,0];o.draw=function(a){a=a||r;for(var b=this.gl,c=a.model||n,e=a.view||n,f=a.projection||n,h=this.bounds,i=l(c,e,f,h),j=i.cubeEdges,k=i.axis,m=e[12],o=e[13],v=e[14],w=e[15],x=this.pixelRatio*(f[3]*m+f[7]*o+f[11]*v+f[15]*w)/b.drawingBufferHeight,y=0;3>y;++y)this.lastCubeProps.cubeEdges[y]=j[y],this.lastCubeProps.axis[y]=k[y];for(var z=p,y=0;3>y;++y)g(p[y],y,this.bounds,j,k);for(var b=this.gl,A=q,y=0;3>y;++y)this.backgroundEnable[y]?A[y]=k[y]:A[y]=0;this._background.draw(c,e,f,h,A,this.backgroundColor),this._lines.bind(c,e,f,this);for(var y=0;3>y;++y){var B=[0,0,0];k[y]>0?B[y]=h[1][y]:B[y]=h[0][y];for(var C=0;2>C;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.gridEnable[D]&&this._lines.drawGrid(D,E,this.bounds,B,this.gridColor[D],this.gridWidth[D]*this.pixelRatio)}for(var C=0;2>C;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.zeroEnable[E]&&h[0][E]<=0&&h[1][E]>=0&&this._lines.drawZero(D,E,this.bounds,B,this.zeroLineColor[E],this.zeroLineWidth[E]*this.pixelRatio)}}for(var y=0;3>y;++y){this.lineEnable[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].primalOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio),this.lineMirror[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].mirrorOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);for(var F=d(s,z[y].primalMinor),G=d(t,z[y].mirrorMinor),H=this.lineTickLength,C=0;3>C;++C){var I=x/c[5*C];F[C]*=H[C]*I,G[C]*=H[C]*I}this.lineTickEnable[y]&&this._lines.drawAxisTicks(y,z[y].primalOffset,F,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio),this.lineTickMirror[y]&&this._lines.drawAxisTicks(y,z[y].mirrorOffset,G,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio)}this._text.bind(c,e,f,this.pixelRatio);for(var y=0;3>y;++y){for(var J=z[y].primalMinor,K=d(u,z[y].primalOffset),C=0;3>C;++C)this.lineTickEnable[y]&&(K[C]+=x*J[C]*Math.max(this.lineTickLength[C],0)/c[5*C]);if(this.tickEnable[y]){for(var C=0;3>C;++C)K[C]+=x*J[C]*this.tickPad[C]/c[5*C];this._text.drawTicks(y,this.tickSize[y],this.tickAngle[y],K,this.tickColor[y])}if(this.labelEnable[y]){for(var C=0;3>C;++C)K[C]+=x*J[C]*this.labelPad[C]/c[5*C];K[y]+=.5*(h[0][y]+h[1][y]),this._text.drawLabel(y,this.labelSize[y],this.labelAngle[y],K,this.labelColor[y])}}},o.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":150,"./lib/cube.js":151,"./lib/lines.js":152,"./lib/text.js":154,"./lib/ticks.js":155}],150:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d}function e(a){for(var b=[],c=[],e=0,i=0;3>i;++i)for(var j=(i+1)%3,k=(i+2)%3,l=[0,0,0],m=[0,0,0],n=-1;1>=n;n+=2){c.push(e,e+2,e+1,e+1,e+2,e+3),l[i]=n,m[i]=n;for(var o=-1;1>=o;o+=2){l[j]=o;for(var p=-1;1>=p;p+=2)l[k]=p,b.push(l[0],l[1],l[2],m[0],m[1],m[2]),e+=1}var q=j;j=k,k=q}var r=f(a,new Float32Array(b)),s=f(a,new Uint16Array(c),a.ELEMENT_ARRAY_BUFFER),t=g(a,[{buffer:r,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:r,type:a.FLOAT,size:3,offset:12,stride:24}],s),u=h(a);return u.attributes.position.location=0,u.attributes.normal.location=1,new d(a,r,t,u)}b.exports=e;var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders").bg,i=d.prototype;i.draw=function(a,b,c,d,e,f){for(var g=!1,h=0;3>h;++h)g=g||e[h];if(g){var i=this.gl;i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:b,projection:c,bounds:d,enable:e,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),i.disable(i.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":153,"gl-buffer":157,"gl-vao":272}],151:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;4>d;++d){a[d]=c[12+d];for(var e=0;3>e;++e)a[d]+=b[e]*c[4*e+d]}}function e(a){for(var b=0;b<p.length;++b)if(a=i.positive(a,p[b]),a.length<3)return 0;for(var c=a[0],d=c[0]/c[3],e=c[1]/c[3],f=0,b=1;b+1<a.length;++b){var g=a[b],h=a[b+1],j=g[0]/g[3],k=g[1]/g[3],l=h[0]/h[3],m=h[1]/h[3],n=j-d,o=k-e,q=l-d,r=m-e;f+=Math.abs(n*r-o*q)}return f}function f(a,b,c,f){h(k,b,a),h(k,c,k);for(var i=0,p=0;2>p;++p){n[2]=f[p][2];for(var t=0;2>t;++t){n[1]=f[t][1];for(var u=0;2>u;++u)n[0]=f[u][0],d(l[i],n,k),i+=1}}for(var v=-1,p=0;8>p;++p){for(var w=l[p][3],x=0;3>x;++x)m[p][x]=l[p][x]/w;0>w&&(0>v?v=p:m[p][2]<m[v][2]&&(v=p))}if(0>v){v=0;for(var y=0;3>y;++y){for(var z=(y+2)%3,A=(y+1)%3,B=-1,C=-1,D=0;2>D;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A);j(m[E],m[F],m[G],o)<0||(D?B=1:C=1)}if(0>B||0>C)C>B&&(v|=1<<y);else{for(var D=0;2>D;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A),H=e([l[E],l[F],l[G],l[E+(1<<z)+(1<<A)]]);D?B=H:C=H}C>B&&(v|=1<<y)}}}for(var I=7^v,J=-1,p=0;8>p;++p)p!==v&&p!==I&&(0>J?J=p:m[J][1]>m[p][1]&&(J=p));for(var K=-1,p=0;3>p;++p){var L=J^1<<p;if(L!==v&&L!==I){0>K&&(K=L);var A=m[L];A[0]<m[K][0]&&(K=L)}}for(var M=-1,p=0;3>p;++p){var L=J^1<<p;if(L!==v&&L!==I&&L!==K){0>M&&(M=L);var A=m[L];A[0]>m[M][0]&&(M=L)}}var N=q;N[0]=N[1]=N[2]=0,N[g.log2(K^J)]=J&K,N[g.log2(J^M)]=J&M;var O=7^M;O===v||O===I?(O=7^K,N[g.log2(M^O)]=O&M):N[g.log2(K^O)]=O&K;for(var P=r,Q=v,y=0;3>y;++y)Q&1<<y?P[y]=-1:P[y]=1;return s}b.exports=f;var g=a("bit-twiddle"),h=a("gl-mat4/multiply"),i=(a("gl-mat4/invert"),a("split-polygon")),j=a("robust-orientation"),k=new Array(16),l=(new Array(16),new Array(8)),m=new Array(8),n=new Array(3),o=[0,0,0];!function(){for(var a=0;8>a;++a)l[a]=[1,1,1,1],m[a]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],q=[1,1,1],r=[0,0,0],s={cubeEdges:q,axis:r}},{"bit-twiddle":68,"gl-mat4/invert":182,"gl-mat4/multiply":184,"robust-orientation":517,"split-polygon":535}],152:[function(a,b,c){"use strict";function d(a){return a[0]=a[1]=a[2]=0,a}function e(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function f(a,b,c,d,e,f,g,h){this.gl=a,this.vertBuffer=b,this.vao=c,this.shader=d,this.tickCount=e,this.tickOffset=f,this.gridCount=g,this.gridOffset=h}function g(a,b,c){var d=[],e=[0,0,0],g=[0,0,0],k=[0,0,0],l=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var m=0;3>m;++m){for(var n=d.length/3|0,o=0;o<c[m].length;++o){var p=+c[m][o].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;e[m]=n,g[m]=q-n;for(var n=d.length/3|0,r=0;r<c[m].length;++r){var p=+c[m][r].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;k[m]=n,l[m]=q-n}var s=h(a,new Float32Array(d)),t=i(a,[{buffer:s,type:a.FLOAT,size:3,
stride:0,offset:0}]),u=j(a);return u.attributes.position.location=0,new f(a,s,t,u,g,e,l,k)}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders").line,k=[0,0,0],l=[0,0,0],m=[0,0,0],n=[0,0,0],o=[1,1],p=f.prototype;p.bind=function(a,b,c){this.shader.bind(),this.shader.uniforms.model=a,this.shader.uniforms.view=b,this.shader.uniforms.projection=c,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},p.drawAxisLine=function(a,b,c,f,g){var h=d(l);this.shader.uniforms.majorAxis=l,h[a]=b[1][a]-b[0][a],this.shader.uniforms.minorAxis=h;var i=e(n,c);i[a]+=b[0][a],this.shader.uniforms.offset=i,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=f;var j=d(m);j[(a+2)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6);var j=d(m);j[(a+1)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(a,b,c,e,f){if(this.tickCount[a]){var g=d(k);g[a]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=b,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=e,this.shader.uniforms.lineWidth=f;var h=d(m);h[a]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])}},p.drawGrid=function(a,b,c,f,g,h){if(this.gridCount[a]){var i=d(l);i[b]=c[1][b]-c[0][b],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[b]+=c[0][b],this.shader.uniforms.offset=j;var o=d(k);o[a]=1,this.shader.uniforms.majorAxis=o;var p=d(m);p[a]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,this.gridCount[a],this.gridOffset[a])}},p.drawZero=function(a,b,c,f,g,h){var i=d(l);this.shader.uniforms.majorAxis=i,i[a]=c[1][a]-c[0][a],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[a]+=c[0][a],this.shader.uniforms.offset=j;var k=d(m);k[b]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":153,"gl-buffer":157,"gl-vao":272}],153:[function(a,b,c){"use strict";var d=a("gl-shader"),e="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n",f="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";c.line=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"}])};var g="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}",h="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";c.text=function(a){return d(a,g,h,null,[{name:"position",type:"vec3"}])};var i="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}",j="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}";c.bg=function(a){return d(a,i,j,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":256}],154:[function(a,b,c){(function(c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=b,this.buffer=c,this.vao=d,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function e(a,b){try{return i(a,b)}catch(c){return console.warn("error vectorizing text:",c),{cells:[],positions:[]}}}function f(a,b,c,e,f,i){var k=g(a),l=h(a,[{buffer:k,size:3}]),m=j(a);m.attributes.position.location=0;var n=new d(a,m,k,l);return n.update(b,c,e,f,i),n}b.exports=f;var g=a("gl-buffer"),h=a("gl-vao"),i=a("vectorize-text"),j=a("./shaders").text,k=window||c.global||{},l=k.__TEXT_CACHE||{};k.__TEXT_CACHE={};var m=3,n=d.prototype,o=[0,0];n.bind=function(a,b,c,d){this.vao.bind(),this.shader.bind();var e=this.shader.uniforms;e.model=a,e.view=b,e.projection=c,e.pixelScale=d,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=o},n.update=function(a,b,c,d,f){function g(a,b,c,d){var f=l[c];f||(f=l[c]={});var g=f[b];g||(g=f[b]=e(b,{triangles:!0,font:c,textAlign:"center",textBaseline:"middle"}));for(var i=(d||12)/12,j=g.positions,k=g.cells,m=0,n=k.length;n>m;++m)for(var o=k[m],p=2;p>=0;--p){var q=j[o[p]];h.push(i*q[0],-i*q[1],a)}}for(var h=(this.gl,[]),i=[0,0,0],j=[0,0,0],k=[0,0,0],n=[0,0,0],o=0;3>o;++o){k[o]=h.length/m|0,g(.5*(a[0][o]+a[1][o]),b[o],c),n[o]=(h.length/m|0)-k[o],i[o]=h.length/m|0;for(var p=0;p<d[o].length;++p)d[o][p].text&&g(d[o][p].x,d[o][p].text,d[o][p].font||f,d[o][p].fontSize||12);j[o]=(h.length/m|0)-i[o]}this.buffer.update(h),this.tickOffset=i,this.tickCount=j,this.labelOffset=k,this.labelCount=n};var p=[0,0,0];n.drawTicks=function(a,b,c,d,e){if(this.tickCount[a]){var f=p;f[0]=f[1]=f[2]=0,f[a]=1,this.shader.uniforms.axis=f,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])}};var q=[0,0,0];n.drawLabel=function(a,b,c,d,e){this.labelCount[a]&&(this.shader.uniforms.axis=q,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.labelCount[a],this.labelOffset[a]))},n.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":153,_process:496,"gl-buffer":157,"gl-vao":272,"vectorize-text":563}],155:[function(a,b,c){"use strict";function d(a,b){var c=a+"",d=c.indexOf("."),e=0;d>=0&&(e=c.length-d-1);var f=Math.pow(10,e),g=Math.round(a*b*f),h=g+"";if(h.indexOf("e")>=0)return h;var i=g/f,j=g%f;0>g?(i=0|-Math.ceil(i),j=0|-j):(i=0|Math.floor(i),j=0|j);var k=""+i;if(0>g&&(k="-"+k),e){for(var l=""+j;l.length<e;)l="0"+l;return k+"."+l}return k}function e(a,b){for(var c=[],e=0;3>e;++e){for(var f=[],g=(.5*(a[0][e]+a[1][e]),0);g*b[e]<=a[1][e];++g)f.push({x:g*b[e],text:d(b[e],g)});for(var g=-1;g*b[e]>=a[0][e];--g)f.push({x:g*b[e],text:d(b[e],g)});c.push(f)}return c}function f(a,b){for(var c=0;3>c;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;++d){var e=a[c][d],f=b[c][d];if(e.x!==f.x||e.text!==f.text||e.font!==f.font||e.fontColor!==f.fontColor||e.fontSize!==f.fontSize||e.dx!==f.dx||e.dy!==f.dy)return!1}}return!0}c.create=e,c.equal=f},{}],156:[function(a,b,c){"use strict";function d(a,b,c){this.lo=a,this.hi=b,this.pixelsPerDataUnit=c}function e(a,b,c,d,e){for(var f=0;3>f;++f){for(var g=o,h=p,i=0;3>i;++i)h[i]=g[i]=c[i];h[3]=g[3]=1,h[f]+=1,l(h,h,b),h[3]<0&&(a[f]=1/0),g[f]-=1,l(g,g,b),g[3]<0&&(a[f]=1/0);var j=(g[0]/g[3]-h[0]/h[3])*d,k=(g[1]/g[3]-h[1]/h[3])*e;a[f]=.25*Math.sqrt(j*j+k*k)}return a}function f(a,b,c,d,f){var l=b.model||m,o=b.view||m,p=b.projection||m,s=a.bounds,f=f||i(l,o,p,s),t=f.axis;f.edges;j(n,o,l),j(n,p,n);for(var u=q,v=0;3>v;++v)u[v].lo=1/0,u[v].hi=-(1/0),u[v].pixelsPerDataUnit=1/0;var w=g(k(n,n));k(n,n);for(var x=0;3>x;++x){var y=(x+1)%3,z=(x+2)%3,A=r;a:for(var v=0;2>v;++v){var B=[];if(t[x]<0!=!!v){A[x]=s[v][x];for(var C=0;2>C;++C){A[y]=s[C^v][y];for(var D=0;2>D;++D)A[z]=s[D^C^v][z],B.push(A.slice())}for(var C=0;C<w.length;++C){if(0===B.length)continue a;B=h.positive(B,w[C])}for(var C=0;C<B.length;++C)for(var z=B[C],E=e(r,n,z,c,d),D=0;3>D;++D)u[D].lo=Math.min(u[D].lo,z[D]),u[D].hi=Math.max(u[D].hi,z[D]),D!==x&&(u[D].pixelsPerDataUnit=Math.min(u[D].pixelsPerDataUnit,Math.abs(E[D])))}}}return u}b.exports=f;var g=a("extract-frustum-planes"),h=a("split-polygon"),i=a("./lib/cube.js"),j=a("gl-mat4/multiply"),k=a("gl-mat4/transpose"),l=a("gl-vec4/transformMat4"),m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n=new Float32Array(16),o=[0,0,0,1],p=[0,0,0,1],q=[new d(1/0,-(1/0),1/0),new d(1/0,-(1/0),1/0),new d(1/0,-(1/0),1/0)],r=[0,0,0]},{"./lib/cube.js":151,"extract-frustum-planes":131,"gl-mat4/multiply":184,"gl-mat4/transpose":192,"gl-vec4/transformMat4":278,"split-polygon":535}],157:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.gl=a,this.type=b,this.handle=c,this.length=d,this.usage=e}function e(a,b,c,d,e,f){var g=e.length*e.BYTES_PER_ELEMENT;if(0>f)return a.bufferData(b,e,d),g;if(g+f>c)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return a.bufferSubData(b,f,e),c}function f(a,b){for(var c=i.malloc(a.length,b),d=a.length,e=0;d>e;++e)c[e]=a[e];return c}function g(a,b){for(var c=1,d=b.length-1;d>=0;--d){if(b[d]!==c)return!1;c*=a[d]}return!0}function h(a,b,c,e){if(c=c||a.ARRAY_BUFFER,e=e||a.DYNAMIC_DRAW,c!==a.ARRAY_BUFFER&&c!==a.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(e!==a.DYNAMIC_DRAW&&e!==a.STATIC_DRAW&&e!==a.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=a.createBuffer(),g=new d(a,c,f,0,e);return g.update(b),g}var i=a("typedarray-pool"),j=a("ndarray-ops"),k=a("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],m=d.prototype;m.bind=function(){this.gl.bindBuffer(this.type,this.handle)},m.unbind=function(){this.gl.bindBuffer(this.type,null)},m.dispose=function(){this.gl.deleteBuffer(this.handle)},m.update=function(a,b){if("number"!=typeof b&&(b=-1),this.bind(),"object"==typeof a&&"undefined"!=typeof a.shape){var c=a.dtype;if(l.indexOf(c)<0&&(c="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var d=gl.getExtension("OES_element_index_uint");c=d&&"uint16"!==c?"uint32":"uint16"}if(c===a.dtype&&g(a.shape,a.stride))0===a.offset&&a.data.length===a.shape[0]?this.length=e(this.gl,this.type,this.length,this.usage,a.data,b):this.length=e(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),b);else{var h=i.malloc(a.size,c),m=k(h,a.shape);j.assign(m,a),0>b?this.length=e(this.gl,this.type,this.length,this.usage,h,b):this.length=e(this.gl,this.type,this.length,this.usage,h.subarray(0,a.size),b),i.free(h)}}else if(Array.isArray(a)){var n;n=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(a,"uint16"):f(a,"float32"),0>b?this.length=e(this.gl,this.type,this.length,this.usage,n,b):this.length=e(this.gl,this.type,this.length,this.usage,n.subarray(0,a.length),b),i.free(n)}else if("object"==typeof a&&"number"==typeof a.length)this.length=e(this.gl,this.type,this.length,this.usage,a,b);else{if("number"!=typeof a&&void 0!==a)throw new Error("gl-buffer: Invalid data type");if(b>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");a=0|a,0>=a&&(a=1),this.gl.bufferData(this.type,0|a,this.usage),this.length=a}},b.exports=h},{ndarray:468,"ndarray-ops":462,"typedarray-pool":550}],158:[function(a,b,c){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],159:[function(a,b,c){var d=a("./1.0/numbers");b.exports=function(a){return d[a]}},{"./1.0/numbers":158}],160:[function(a,b,c){"use strict";function d(a,b,c,d){this.plot=a,this.shader=b,this.bufferHi=c,this.bufferLo=d,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.numPoints=0,this.color=[0,0,0,1]}function e(a,b){var c=f(a.gl,i.vertex,i.fragment),e=g(a.gl),h=g(a.gl),j=new d(a,c,e,h);return j.update(b),a.addObject(j),j}var f=a("gl-shader"),g=a("gl-buffer"),h=a("typedarray-pool"),i=a("./lib/shaders");b.exports=e;var j=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]],k=d.prototype;k.draw=function(){var a=new Float32Array([0,0]),b=new Float32Array([0,0]),c=new Float32Array([0,0]),d=new Float32Array([0,0]),e=[1,1];return function(){var f=this.plot,g=this.shader,h=this.bounds,i=this.numPoints;if(i){var k=f.gl,l=f.dataBox,m=f.viewBox,n=f.pixelRatio,o=h[2]-h[0],p=h[3]-h[1],q=l[2]-l[0],r=l[3]-l[1],s=2*o/q,t=2*p/r,u=(h[0]-l[0]-.5*q)/o,v=(h[1]-l[1]-.5*r)/p;a[0]=s,a[1]=t,b[0]=s-a[0],b[1]=t-a[1],c[0]=u,c[1]=v,d[0]=u-c[0],d[1]=v-c[1];var w=m[2]-m[0],x=m[3]-m[1];e[0]=2*n/w,e[1]=2*n/x,g.bind(),g.uniforms.scaleHi=a,g.uniforms.scaleLo=b,g.uniforms.translateHi=c,g.uniforms.translateLo=d,g.uniforms.pixelScale=e,g.uniforms.color=this.color,this.bufferLo.bind(),g.attributes.positionLo.pointer(k.FLOAT,!1,16,0),this.bufferHi.bind(),g.attributes.positionHi.pointer(k.FLOAT,!1,16,0),g.attributes.pixelOffset.pointer(k.FLOAT,!1,16,8),k.drawArrays(k.TRIANGLES,0,i*j.length)}}}(),k.drawPick=function(a){return a},k.pick=function(){return null},k.update=function(a){a=a||{};var b,c,d,e=a.positions||[],f=a.errors||[],g=1;"lineWidth"in a&&(g=+a.lineWidth);var i=5;"capSize"in a&&(i=+a.capSize),this.color=(a.color||[0,0,0,1]).slice();var k=this.bounds=[1/0,1/0,-(1/0),-(1/0)],l=this.numPoints=e.length>>1;for(b=0;l>b;++b)c=e[2*b],d=e[2*b+1],k[0]=Math.min(c,k[0]),k[1]=Math.min(d,k[1]),k[2]=Math.max(c,k[2]),k[3]=Math.max(d,k[3]);k[2]===k[0]&&(k[2]+=1),k[3]===k[1]&&(k[3]+=1);var m=1/(k[2]-k[0]),n=1/(k[3]-k[1]),o=k[0],p=k[1],q=h.mallocFloat64(l*j.length*4),r=h.mallocFloat32(l*j.length*4),s=h.mallocFloat32(l*j.length*4),t=0;for(b=0;l>b;++b){c=e[2*b],d=e[2*b+1];for(var u=f[4*b],v=f[4*b+1],w=f[4*b+2],x=f[4*b+3],y=0;y<j.length;++y){var z=j[y],A=z[0],B=z[1];0>A?A*=u:A>0&&(A*=v),0>B?B*=w:B>0&&(B*=x),q[t++]=m*(c-o+A),q[t++]=n*(d-p+B),q[t++]=g*z[2]+(i+g)*z[4],q[t++]=g*z[3]+(i+g)*z[5]}}for(b=0;b<q.length;b++)r[b]=q[b],s[b]=q[b]-r[b];this.bufferHi.update(r),this.bufferLo.update(s),h.free(q)},k.dispose=function(){this.plot.removeObject(this),this.shader.dispose(),this.bufferHi.dispose(),this.bufferLo.dispose()}},{"./lib/shaders":161,"gl-buffer":157,"gl-shader":256,"typedarray-pool":550}],161:[function(a,b,c){b.exports={vertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi;\nattribute vec2 positionLo;\nattribute vec2 pixelOffset;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo, pixelScale;\n\nvec2 project(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\nvoid main() {\n  vec3 scrPosition = vec3(\n         project(scaleHi, translateHi, scaleLo, translateLo, positionHi, positionLo),\n         1);\n  gl_Position = vec4(\n    scrPosition.xy + scrPosition.z * pixelScale * pixelOffset,\n    0,\n    scrPosition.z);\n}\n",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"}},{}],162:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=d,this.buffer=b,this.vao=c,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function e(a,b){for(var c=0;3>c;++c)a[0][c]=Math.min(a[0][c],b[c]),a[1][c]=Math.max(a[1][c],b[c])}function f(a,b,c,d){for(var e=m[d],f=0;f<e.length;++f){var g=e[f];a.push(b[0],b[1],b[2],c[0],c[1],c[2],c[3],g[0],g[1],g[2])}return e.length}function g(a){var b=a.gl,c=h(b),e=i(b,[{buffer:c,type:b.FLOAT,size:3,offset:0,stride:40},{buffer:c,type:b.FLOAT,size:4,offset:12,stride:40},{buffer:c,type:b.FLOAT,size:3,offset:28,stride:40}]),f=j(b);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.offset.location=2;var g=new d(b,c,e,f);return g.update(a),g}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders/index"),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=d.prototype;l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.drawTransparent=l.draw=function(a){var b=this.gl,c=this.shader.uniforms;this.shader.bind();var d=c.view=a.view||k,e=c.projection=a.projection||k;c.model=a.model||k,c.clipBounds=this.clipBounds,c.opacity=this.opacity;var f=d[12],g=d[13],h=d[14],i=d[15],j=this.pixelRatio*(e[3]*f+e[7]*g+e[11]*h+e[15]*i)/b.drawingBufferHeight;this.vao.bind();for(var l=0;3>l;++l)b.lineWidth(this.lineWidth[l]),c.capSize=this.capSize[l]*j,this.lineCount[l]&&b.drawArrays(b.LINES,this.lineOffset[l],this.lineCount[l]);this.vao.unbind()};var m=function(){for(var a=new Array(3),b=0;3>b;++b){for(var c=[],d=1;2>=d;++d)for(var e=-1;1>=e;e+=2){var f=(d+b)%3,g=[0,0,0];g[f]=e,c.push(g)}a[b]=c}return a}();l.update=function(a){a=a||{},"lineWidth"in a&&(this.lineWidth=a.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in a&&(this.capSize=a.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in a&&(this.opacity=a.opacity);var b=a.color||[[0,0,0],[0,0,0],[0,0,0]],c=a.position,d=a.error;if(Array.isArray(b[0])||(b=[b,b,b]),c&&d){var g=[],h=c.length,i=0;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.lineCount=[0,0,0];for(var j=0;3>j;++j){this.lineOffset[j]=i;a:for(var k=0;h>k;++k){for(var l=c[k],m=0;3>m;++m)if(isNaN(l[m])||!isFinite(l[m]))continue a;var n=d[k],o=b[j];if(Array.isArray(o[0])&&(o=b[k]),3===o.length&&(o=[o[0],o[1],o[2],1]),!isNaN(n[0][j])&&!isNaN(n[1][j])){if(n[0][j]<0){var p=l.slice();p[j]+=n[0][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}if(n[1][j]>0){var p=l.slice();p[j]+=n[1][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}}}this.lineCount[j]=i-this.lineOffset[j]}this.buffer.update(g)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":164,"gl-buffer":157,"gl-vao":272}],163:[function(a,b,c){b.exports=function(a){"string"==typeof a&&(a=[a]);for(var b=[].slice.call(arguments,1),c=[],d=0;d<a.length-1;d++)c.push(a[d],b[d]||"");return c.push(a[d]),c.join("")}},{}],164:[function(a,b,c){"use strict";var d=a("glslify"),e=a("gl-shader"),f=d(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),g=d(["precision mediump float;\n#define GLSLIFY 1\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}"]);b.exports=function(a){return e(a,f,g,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":256,glslify:163}],165:[function(a,b,c){"use strict";function d(a){var b=a.getParameter(a.FRAMEBUFFER_BINDING),c=a.getParameter(a.RENDERBUFFER_BINDING),d=a.getParameter(a.TEXTURE_BINDING_2D);return[b,c,d]}function e(a,b){a.bindFramebuffer(a.FRAMEBUFFER,b[0]),a.bindRenderbuffer(a.RENDERBUFFER,b[1]),a.bindTexture(a.TEXTURE_2D,b[2])}function f(a,b){var c=a.getParameter(b.MAX_COLOR_ATTACHMENTS_WEBGL);s=new Array(c+1);for(var d=0;c>=d;++d){for(var e=new Array(c),f=0;d>f;++f)e[f]=a.COLOR_ATTACHMENT0+f;for(var f=d;c>f;++f)e[f]=a.NONE;s[d]=e}}function g(a){switch(a){case o:throw new Error("gl-fbo: Framebuffer unsupported");case p:throw new Error("gl-fbo: Framebuffer incomplete attachment");case q:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(a,b,c,d,e,f){if(!d)return null;var g=n(a,b,c,e,d);return g.magFilter=a.NEAREST,g.minFilter=a.NEAREST,g.mipSamples=1,g.bind(),a.framebufferTexture2D(a.FRAMEBUFFER,f,a.TEXTURE_2D,g.handle,0),g}function i(a,b,c,d,e){var f=a.createRenderbuffer();return a.bindRenderbuffer(a.RENDERBUFFER,f),a.renderbufferStorage(a.RENDERBUFFER,d,b,c),a.framebufferRenderbuffer(a.FRAMEBUFFER,e,a.RENDERBUFFER,f),f}function j(a){var b=d(a.gl),c=a.gl,f=a.handle=c.createFramebuffer(),j=a._shape[0],k=a._shape[1],l=a.color.length,m=a._ext,n=a._useStencil,o=a._useDepth,p=a._colorType;c.bindFramebuffer(c.FRAMEBUFFER,f);for(var q=0;l>q;++q)a.color[q]=h(c,j,k,p,c.RGBA,c.COLOR_ATTACHMENT0+q);0===l?(a._color_rb=i(c,j,k,c.RGBA4,c.COLOR_ATTACHMENT0),m&&m.drawBuffersWEBGL(s[0])):l>1&&m.drawBuffersWEBGL(s[l]);var r=c.getExtension("WEBGL_depth_texture");r?n?a.depth=h(c,j,k,r.UNSIGNED_INT_24_8_WEBGL,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o&&(a.depth=h(c,j,k,c.UNSIGNED_SHORT,c.DEPTH_COMPONENT,c.DEPTH_ATTACHMENT)):o&&n?a._depth_rb=i(c,j,k,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o?a._depth_rb=i(c,j,k,c.DEPTH_COMPONENT16,c.DEPTH_ATTACHMENT):n&&(a._depth_rb=i(c,j,k,c.STENCIL_INDEX,c.STENCIL_ATTACHMENT));var t=c.checkFramebufferStatus(c.FRAMEBUFFER);if(t!==c.FRAMEBUFFER_COMPLETE){a._destroyed=!0,c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteFramebuffer(a.handle),a.handle=null,a.depth&&(a.depth.dispose(),a.depth=null),a._depth_rb&&(c.deleteRenderbuffer(a._depth_rb),a._depth_rb=null);for(var q=0;q<a.color.length;++q)a.color[q].dispose(),a.color[q]=null;a._color_rb&&(c.deleteRenderbuffer(a._color_rb),a._color_rb=null),e(c,b),g(t)}e(c,b)}function k(a,b,c,d,e,f,g,h){this.gl=a,this._shape=[0|b,0|c],this._destroyed=!1,this._ext=h,this.color=new Array(e);for(var i=0;e>i;++i)this.color[i]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=d,this._useDepth=f,this._useStencil=g;var k=this,l=[0|b,0|c];Object.defineProperties(l,{0:{get:function(){return k._shape[0]},set:function(a){return k.width=a}},1:{get:function(){return k._shape[1]},set:function(a){return k.height=a}}}),this._shapeVector=l,j(this)}function l(a,b,c){if(a._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(a._shape[0]!==b||a._shape[1]!==c){var f=a.gl,h=f.getParameter(f.MAX_RENDERBUFFER_SIZE);if(0>b||b>h||0>c||c>h)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");a._shape[0]=b,a._shape[1]=c;for(var i=d(f),j=0;j<a.color.length;++j)a.color[j].shape=a._shape;a._color_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._color_rb),f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,a._shape[0],a._shape[1])),a.depth&&(a.depth.shape=a._shape),a._depth_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._depth_rb),a._useDepth&&a._useStencil?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,a._shape[0],a._shape[1]):a._useDepth?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,a._shape[0],a._shape[1]):a._useStencil&&f.renderbufferStorage(f.RENDERBUFFER,f.STENCIL_INDEX,a._shape[0],a._shape[1])),f.bindFramebuffer(f.FRAMEBUFFER,a.handle);
var k=f.checkFramebufferStatus(f.FRAMEBUFFER);k!==f.FRAMEBUFFER_COMPLETE&&(a.dispose(),e(f,i),g(k)),e(f,i)}}function m(a,b,c,d){o||(o=a.FRAMEBUFFER_UNSUPPORTED,p=a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,q=a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var e=a.getExtension("WEBGL_draw_buffers");if(!s&&e&&f(a,e),Array.isArray(b)&&(d=c,c=0|b[1],b=0|b[0]),"number"!=typeof b)throw new Error("gl-fbo: Missing shape parameter");var g=a.getParameter(a.MAX_RENDERBUFFER_SIZE);if(0>b||b>g||0>c||c>g)throw new Error("gl-fbo: Parameters are too large for FBO");d=d||{};var h=1;if("color"in d){if(h=Math.max(0|d.color,0),0>h)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!e)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>a.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var i=a.UNSIGNED_BYTE,j=a.getExtension("OES_texture_float");if(d["float"]&&h>0){if(!j)throw new Error("gl-fbo: Context does not support floating point textures");i=a.FLOAT}else d.preferFloat&&h>0&&j&&(i=a.FLOAT);var l=!0;"depth"in d&&(l=!!d.depth);var m=!1;return"stencil"in d&&(m=!!d.stencil),new k(a,b,c,i,h,l,m,e)}var n=a("gl-texture2d");b.exports=m;var o,p,q,r,s=null,t=k.prototype;Object.defineProperties(t,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(a){if(Array.isArray(a)||(a=[0|a,0|a]),2!==a.length)throw new Error("gl-fbo: Shape vector must be length 2");var b=0|a[0],c=0|a[1];return l(this,b,c),[b,c]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(a){return a=0|a,l(this,a,this._shape[1]),a},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(a){return a=0|a,l(this,this._shape[0],a),a},enumerable:!1}}),t.bind=function(){if(!this._destroyed){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.handle),a.viewport(0,0,this._shape[0],this._shape[1])}},t.dispose=function(){if(!this._destroyed){this._destroyed=!0;var a=this.gl;a.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(a.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var b=0;b<this.color.length;++b)this.color[b].dispose(),this.color[b]=null;this._color_rb&&(a.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":268}],166:[function(a,b,c){function d(a,b,c){"use strict";var d=g(b)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==c&&(i=c===f.FRAGMENT_SHADER?"fragment":"vertex");for(var j=e("Error compiling %s shader %s:\n",i,d),k=e("%s%s",j,a),l=a.split("\n"),m={},n=0;n<l.length;n++){var o=l[n];if(""!==o){var p=parseInt(o.split(":")[2]);if(isNaN(p))throw new Error(e("Could not parse error: %s",o));m[p]=o}}for(var q=h(b).split("\n"),n=0;n<q.length;n++)if(m[n+3]||m[n+2]||m[n+1]){var r=q[n];if(j+=r+"\n",m[n+1]){var s=m[n+1];s=s.substr(s.split(":",3).join(":").length+1).trim(),j+=e("^^^ %s\n\n",s)}}return{"long":j.trim(),"short":k.trim()}}var e=a("sprintf-js").sprintf,f=a("gl-constants/lookup"),g=a("glsl-shader-name"),h=a("add-line-numbers");b.exports=d},{"add-line-numbers":41,"gl-constants/lookup":159,"glsl-shader-name":280,"sprintf-js":536}],167:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.plot=a,this.shader=b,this.pickShader=c,this.positionBuffer=d,this.weightBuffer=e,this.colorBuffer=f,this.idBuffer=g,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.pickOffset=0}function e(a,b){var c=a.gl,e=i(c,k.vertex,k.fragment),f=i(c,k.pickVertex,k.pickFragment),g=j(c),h=j(c),l=j(c),m=j(c),n=new d(a,e,f,g,h,l,m);return n.update(b),a.addObject(n),n}b.exports=e;var f=a("binary-search-bounds"),g=a("iota-array"),h=a("typedarray-pool"),i=a("gl-shader"),j=a("gl-buffer"),k=a("./lib/shaders"),l=d.prototype,m=[0,0,1,0,0,1,1,0,1,1,0,1];l.draw=function(){var a=[1,0,0,0,1,0,0,0,1];return function(){var b=this.plot,c=this.shader,d=this.bounds,e=this.numVertices;if(!(0>=e)){var f=b.gl,g=b.dataBox,h=d[2]-d[0],i=d[3]-d[1],j=g[2]-g[0],k=g[3]-g[1];a[0]=2*h/j,a[4]=2*i/k,a[6]=2*(d[0]-g[0])/j-1,a[7]=2*(d[1]-g[1])/k-1,c.bind();var l=c.uniforms;l.viewTransform=a,l.shape=this.shape;var m=c.attributes;this.positionBuffer.bind(),m.position.pointer(),this.weightBuffer.bind(),m.weight.pointer(f.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),m.color.pointer(f.UNSIGNED_BYTE,!0),f.drawArrays(f.TRIANGLES,0,e)}}}(),l.drawPick=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(c){var d=this.plot,e=this.pickShader,f=this.bounds,g=this.numVertices;if(!(0>=g)){var h=d.gl,i=d.dataBox,j=f[2]-f[0],k=f[3]-f[1],l=i[2]-i[0],m=i[3]-i[1];a[0]=2*j/l,a[4]=2*k/m,a[6]=2*(f[0]-i[0])/l-1,a[7]=2*(f[1]-i[1])/m-1;for(var n=0;4>n;++n)b[n]=c>>8*n&255;this.pickOffset=c,e.bind();var o=e.uniforms;o.viewTransform=a,o.pickOffset=b,o.shape=this.shape;var p=e.attributes;return this.positionBuffer.bind(),p.position.pointer(),this.weightBuffer.bind(),p.weight.pointer(h.UNSIGNED_BYTE,!1),this.idBuffer.bind(),p.pickId.pointer(h.UNSIGNED_BYTE,!1),h.drawArrays(h.TRIANGLES,0,g),c+this.shape[0]*this.shape[1]}}}(),l.pick=function(a,b,c){var d=this.pickOffset,e=this.shape[0]*this.shape[1];if(d>c||c>=d+e)return null;var f=c-d,g=this.xData,h=this.yData;return{object:this,pointId:f,dataCoord:[g[f%this.shape[0]],h[f/this.shape[0]|0]]}},l.update=function(a){a=a||{};var b=a.shape||[0,0],c=a.x||g(b[0]),d=a.y||g(b[1]),e=a.z||new Float32Array(b[0]*b[1]);this.xData=c,this.yData=d;var i=a.colorLevels||[0],j=a.colorValues||[0,0,0,1],k=i.length,l=this.bounds,n=l[0]=c[0],o=l[1]=d[0],p=l[2]=c[c.length-1],q=l[3]=d[d.length-1],r=1/(p-n),s=1/(q-o),t=b[0],u=b[1];this.shape=[t,u];var v=(t-1)*(u-1)*(m.length>>>1);this.numVertices=v;for(var w=h.mallocUint8(4*v),x=h.mallocFloat32(2*v),y=h.mallocUint8(2*v),z=h.mallocUint32(v),A=0,B=0;u-1>B;++B)for(var C=s*(d[B]-o),D=s*(d[B+1]-o),E=0;t-1>E;++E)for(var F=r*(c[E]-n),G=r*(c[E+1]-n),H=0;H<m.length;H+=2){var I,J,K,L,M=m[H],N=m[H+1],O=(B+N)*t+(E+M),P=e[O],Q=f.le(i,P);if(0>Q)I=j[0],J=j[1],K=j[2],L=j[3];else if(Q===k-1)I=j[4*k-4],J=j[4*k-3],K=j[4*k-2],L=j[4*k-1];else{var R=(P-i[Q])/(i[Q+1]-i[Q]),S=1-R,T=4*Q,U=4*(Q+1);I=S*j[T]+R*j[U],J=S*j[T+1]+R*j[U+1],K=S*j[T+2]+R*j[U+2],L=S*j[T+3]+R*j[U+3]}w[4*A]=255*I,w[4*A+1]=255*J,w[4*A+2]=255*K,w[4*A+3]=255*L,x[2*A]=.5*F+.5*G,x[2*A+1]=.5*C+.5*D,y[2*A]=M,y[2*A+1]=N,z[A]=B*t+E,A+=1}this.positionBuffer.update(x),this.weightBuffer.update(y),this.colorBuffer.update(w),this.idBuffer.update(z),h.free(x),h.free(w),h.free(y),h.free(z)},l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":168,"binary-search-bounds":169,"gl-buffer":157,"gl-shader":256,"iota-array":294,"typedarray-pool":550}],168:[function(a,b,c){"use strict";b.exports={fragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n",pickFragment:"precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n",pickVertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"}},{}],169:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85}],170:[function(a,b,c){c.lineVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi, dLo;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, screenShape;\nuniform float width;\n\nvarying vec2 direction;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvec2 project_2_1(vec2 scHi, vec2 scLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi\n       + scLo * posHi\n       + scHi * posLo\n       + scLo * posLo;\n}\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  vec2 dir = project_2_1(scaleHi, scaleLo, dHi, dLo);\n  vec2 n = 0.5 * width * normalize(screenShape.yx * vec2(dir.y, -dir.x)) / screenShape.xy;\n  vec2 tangent = normalize(screenShape.xy * dir);\n  if(dir.x < 0.0 || (dir.x == 0.0 && dir.y < 0.0)) {\n    direction = -tangent;\n  } else {\n    direction = tangent;\n  }\n  gl_Position = vec4(p + n, 0.0, 1.0);\n}",c.lineFragment="precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nuniform vec2 screenShape;\nuniform sampler2D dashPattern;\nuniform float dashLength;\n\nvarying vec2 direction;\n\nvoid main() {\n  float t = fract(dot(direction, gl_FragCoord.xy) / dashLength);\n  vec4 pcolor = color * texture2D(dashPattern, vec2(t, 0.0)).r;\n  gl_FragColor = vec4(pcolor.rgb * pcolor.a, pcolor.a);\n}",c.mitreVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo;\nuniform float radius;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  gl_Position = vec4(p, 0.0, 1.0);\n  gl_PointSize = radius;\n}",c.mitreFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  if(length(gl_PointCoord.xy - 0.5) > 0.25) {\n    discard;\n  }\n  gl_FragColor = vec4(color.rgb, color.a);\n}",c.pickVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi;\nattribute vec4 pick0, pick1;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, screenShape;\nuniform float width;\n\nvarying vec4 pickA, pickB;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  vec2 n = width * normalize(screenShape.yx * vec2(dHi.y, -dHi.x)) / screenShape.xy;\n  gl_Position = vec4(p + n, 0, 1);\n  pickA = pick0;\n  pickB = pick1;\n}",c.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 pickOffset;\n\nvarying vec4 pickA, pickB;\n\nvoid main() {\n  vec4 fragId = vec4(pickA.xyz, 0.0);\n  if(pickB.w > pickA.w) {\n    fragId.xyz = pickB.xyz;\n  }\n\n  fragId += pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  gl_FragColor = fragId / 255.0;\n}",c.fillVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, projectAxis;\nuniform float projectValue, depth;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  if(dHi.y < 0.0 || (dHi.y == 0.0 && dHi.x < 0.0)) {\n    if(dot(p, projectAxis) < projectValue) {\n      p = p * (1.0 - abs(projectAxis)) + projectAxis * projectValue;\n    }\n  }\n  gl_Position = vec4(p, depth, 1);\n}",c.fillFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}"},{}],171:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i){this.plot=a,this.dashPattern=b,this.lineBufferHi=c,this.lineBufferLo=d,this.pickBuffer=e,this.lineShader=f,this.mitreShader=g,this.fillShader=h,this.pickShader=i,this.usingDashes=!1,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.width=1,this.color=[0,0,1,1],this.fill=[!1,!1,!1,!1],this.fillColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.data=null,this.numPoints=0,this.vertCount=0,this.pickOffset=0}function e(a){return a.map(function(a){return a.slice()})}function f(a,b){var c=a.gl,e=h(c),f=h(c),j=h(c),k=i(c,[1,1]),m=g(c,l.lineVertex,l.lineFragment),n=g(c,l.mitreVertex,l.mitreFragment),o=g(c,l.fillVertex,l.fillFragment),p=g(c,l.pickVertex,l.pickFragment),q=new d(a,k,e,f,j,m,n,o,p);return a.addObject(q),q.update(b),q}b.exports=f;var g=a("gl-shader"),h=a("gl-buffer"),i=a("gl-texture2d"),j=a("ndarray"),k=a("typedarray-pool"),l=a("./lib/shaders"),m=d.prototype;m.setProjectionModel=function(){var a={scaleHi:new Float32Array([0,0]),scaleLo:new Float32Array([0,0]),translateHi:new Float32Array([0,0]),translateLo:new Float32Array([0,0]),screenShape:[0,0]};return function(){var b=this.bounds,c=this.plot.viewBox,d=this.plot.dataBox,e=b[2]-b[0],f=b[3]-b[1],g=d[2]-d[0],h=d[3]-d[1],i=c[2]-c[0],j=c[3]-c[1],k=2*e/g,l=2*f/h,m=(b[0]-d[0]-.5*g)/e,n=(b[1]-d[1]-.5*h)/f;return a.scaleHi[0]=k,a.scaleHi[1]=l,a.scaleLo[0]=k-a.scaleHi[0],a.scaleLo[1]=l-a.scaleHi[1],a.translateHi[0]=m,a.translateHi[1]=n,a.translateLo[0]=m-a.translateHi[0],a.translateLo[1]=n-a.translateHi[1],a.screenShape[0]=i,a.screenShape[1]=j,a}}(),m.setProjectionUniforms=function(a,b){a.scaleHi=b.scaleHi,a.scaleLo=b.scaleLo,a.translateHi=b.translateHi,a.translateLo=b.translateLo,a.screenShape=b.screenShape},m.draw=function(){var a=[1,0],b=[-1,0],c=[0,1],d=[0,-1];return function(){var e=this.vertCount;if(e){var f=this.setProjectionModel(),g=this.plot,h=this.width,i=g.gl,j=g.pixelRatio,k=this.color,l=this.fillShader.attributes;this.lineBufferLo.bind(),l.aLo.pointer(i.FLOAT,!1,16,0),this.lineBufferHi.bind();var m=this.fill;if(m[0]||m[1]||m[2]||m[3]){var n=this.fillShader;n.bind();var o=n.uniforms;this.setProjectionUniforms(o,f),o.depth=g.nextDepthValue(),l.aHi.pointer(i.FLOAT,!1,16,0),l.dHi.pointer(i.FLOAT,!1,16,8),i.depthMask(!0),i.enable(i.DEPTH_TEST);var p=this.fillColor;m[0]&&(o.color=p[0],o.projectAxis=b,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),m[1]&&(o.color=p[1],o.projectAxis=d,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),m[2]&&(o.color=p[2],o.projectAxis=a,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),m[3]&&(o.color=p[3],o.projectAxis=c,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),i.depthMask(!1),i.disable(i.DEPTH_TEST)}var q=this.lineShader;q.bind(),this.lineBufferLo.bind(),q.attributes.aLo.pointer(i.FLOAT,!1,16,0),q.attributes.dLo.pointer(i.FLOAT,!1,16,8),this.lineBufferHi.bind();var r=q.uniforms;this.setProjectionUniforms(r,f),r.color=k,r.width=h*j,r.dashPattern=this.dashPattern.bind(),r.dashLength=this.dashLength*j;var s=q.attributes;if(s.aHi.pointer(i.FLOAT,!1,16,0),s.dHi.pointer(i.FLOAT,!1,16,8),i.drawArrays(i.TRIANGLES,0,e),h>2&&!this.usingDashes){var t=this.mitreShader;this.lineBufferLo.bind(),t.attributes.aLo.pointer(i.FLOAT,!1,48,0),this.lineBufferHi.bind(),t.bind();var u=t.uniforms;this.setProjectionUniforms(u,f),u.color=k,u.radius=h*j,t.attributes.aHi.pointer(i.FLOAT,!1,48,0),i.drawArrays(i.POINTS,0,e/3|0)}}}}(),m.drawPick=function(){var a=[0,0,0,0];return function(b){var c=this.vertCount,d=this.numPoints;if(this.pickOffset=b,!c)return b+d;var e=this.setProjectionModel(),f=this.plot,g=this.width,h=f.gl,i=f.pickPixelRatio,j=this.pickShader,k=this.pickBuffer;a[0]=255&b,a[1]=b>>>8&255,a[2]=b>>>16&255,a[3]=b>>>24,j.bind();var l=j.uniforms;this.setProjectionUniforms(l,e),l.width=g*i,l.pickOffset=a;var m=j.attributes;return this.lineBufferHi.bind(),m.aHi.pointer(h.FLOAT,!1,16,0),m.dHi.pointer(h.FLOAT,!1,16,8),this.lineBufferLo.bind(),m.aLo.pointer(h.FLOAT,!1,16,0),k.bind(),m.pick0.pointer(h.UNSIGNED_BYTE,!1,8,0),m.pick1.pointer(h.UNSIGNED_BYTE,!1,8,4),h.drawArrays(h.TRIANGLES,0,c),b+d}}(),m.pick=function(a,b,c){var d=this.pickOffset,e=this.numPoints;if(d>c||c>=d+e)return null;var f=c-d,g=this.data;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}},m.update=function(a){a=a||{};var b,c,d,f,g,h=this.plot.gl;this.color=(a.color||[0,0,1,1]).slice(),this.width=+(a.width||1),this.fill=(a.fill||[!1,!1,!1,!1]).slice(),this.fillColor=e(a.fillColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var l=a.dashes||[1],m=0;for(b=0;b<l.length;++b)m+=l[b];var n=k.mallocUint8(m);d=0;var o=255;for(b=0;b<l.length;++b){for(c=0;c<l[b];++c)n[d++]=o;o^=255}this.dashPattern.dispose(),this.usingDashes=l.length>1,this.dashPattern=i(h,j(n,[m,1,4],[1,0,0])),this.dashPattern.minFilter=h.NEAREST,this.dashPattern.magFilter=h.NEAREST,this.dashLength=m,k.free(n);var p=a.positions;this.data=p;var q=this.bounds;q[0]=q[1]=1/0,q[2]=q[3]=-(1/0);var r=this.numPoints=p.length>>>1;if(0!==r){for(b=0;r>b;++b)f=p[2*b],g=p[2*b+1],isNaN(f)||isNaN(g)||(q[0]=Math.min(q[0],f),q[1]=Math.min(q[1],g),q[2]=Math.max(q[2],f),q[3]=Math.max(q[3],g));q[0]===q[2]&&(q[2]+=1),q[3]===q[1]&&(q[3]+=1);var s=k.mallocFloat64(24*(r-1)),t=k.mallocFloat32(24*(r-1)),u=k.mallocFloat32(24*(r-1)),v=k.mallocUint32(12*(r-1)),w=t.length,x=v.length;d=r;for(var y=0;d>1;){var z=--d;f=p[2*d],g=p[2*d+1];var A=z-1,B=p[2*A],C=p[2*A+1];if(!(isNaN(f)||isNaN(g)||isNaN(B)||isNaN(C))){y+=1,f=(f-q[0])/(q[2]-q[0]),g=(g-q[1])/(q[3]-q[1]),B=(B-q[0])/(q[2]-q[0]),C=(C-q[1])/(q[3]-q[1]);var D=B-f,E=C-g,F=z|1<<24,G=z-1,H=z,I=z-1|1<<24;s[--w]=-E,s[--w]=-D,s[--w]=g,s[--w]=f,v[--x]=F,v[--x]=G,s[--w]=E,s[--w]=D,s[--w]=C,s[--w]=B,v[--x]=H,v[--x]=I,s[--w]=-E,s[--w]=-D,s[--w]=C,s[--w]=B,v[--x]=H,v[--x]=I,s[--w]=E,s[--w]=D,s[--w]=C,s[--w]=B,v[--x]=H,v[--x]=I,s[--w]=-E,s[--w]=-D,s[--w]=g,s[--w]=f,v[--x]=F,v[--x]=G,s[--w]=E,s[--w]=D,s[--w]=g,s[--w]=f,v[--x]=F,v[--x]=G}}for(b=0;b<s.length;b++)t[b]=s[b],u[b]=s[b]-t[b];this.vertCount=6*y,this.lineBufferHi.update(t.subarray(w)),this.lineBufferLo.update(u.subarray(w)),this.pickBuffer.update(v.subarray(x)),k.free(s),k.free(t),k.free(u),k.free(v)}},m.dispose=function(){this.plot.removeObject(this),this.lineBufferLo.dispose(),this.lineBufferHi.dispose(),this.pickBuffer.dispose(),this.lineShader.dispose(),this.mitreShader.dispose(),this.fillShader.dispose(),this.pickShader.dispose(),this.dashPattern.dispose()}},{"./lib/shaders":170,"gl-buffer":157,"gl-shader":256,"gl-texture2d":268,ndarray:468,"typedarray-pool":550}],172:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",g="precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];c.createShader=function(a){return d(a,e,f,null,h)},c.createPickShader=function(a){return d(a,e,g,null,h)}},{"gl-shader":256}],173:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=0;3>d;++d){var e=a[d]-b[d];c+=e*e}return Math.sqrt(c)}function e(a){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],c=0;3>c;++c)b[0][c]=Math.max(a[0][c],b[0][c]),b[1][c]=Math.min(a[1][c],b[1][c]);return b}function f(a,b,c,d){this.arcLength=a,this.position=b,this.index=c,this.dataCoordinate=d}function g(a,b,c,d,e,f){this.gl=a,this.shader=b,this.pickShader=c,this.buffer=d,this.vao=e,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=f,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function h(a){var b=a.gl||a.scene&&a.scene.gl,c=p(b);c.attributes.position.location=0,c.attributes.nextPosition.location=1,c.attributes.arcLength.location=2,c.attributes.lineWidth.location=3,c.attributes.color.location=4;var d=q(b);d.attributes.position.location=0,d.attributes.nextPosition.location=1,d.attributes.arcLength.location=2,d.attributes.lineWidth.location=3,d.attributes.color.location=4;for(var e=i(b),f=j(b,[{buffer:e,size:3,offset:0,stride:48},{buffer:e,size:3,offset:12,stride:48},{buffer:e,size:1,offset:24,stride:48},{buffer:e,size:1,offset:28,stride:48},{buffer:e,size:4,offset:32,stride:48}]),h=n(new Array(1024),[256,1,4]),l=0;1024>l;++l)h.data[l]=255;var m=k(b,h);m.wrap=b.REPEAT;var o=new g(b,c,d,e,f,m);return o.update(a),o}b.exports=h;var i=a("gl-buffer"),j=a("gl-vao"),k=a("gl-texture2d"),l=a("glsl-read-float"),m=a("binary-search-bounds"),n=a("ndarray"),o=a("./lib/shaders"),p=o.createShader,q=o.createPickShader,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=g.prototype;s.isTransparent=function(){return this.opacity<1},s.isOpaque=function(){return this.opacity>=1},s.pickSlots=1,s.setPickBase=function(a){this.pickId=a},s.drawTransparent=s.draw=function(a){var b=this.gl,c=this.shader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,clipBounds:e(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.drawPick=function(a){var b=this.gl,c=this.pickShader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,pickId:this.pickId,clipBounds:e(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.update=function(a){var b,c;this.dirty=!0;var e=!!a.connectGaps;"dashScale"in a&&(this.dashScale=a.dashScale),"opacity"in a&&(this.opacity=+a.opacity);var f=a.position||a.positions;if(f){var g=a.color||a.colors||[0,0,0,1],h=a.lineWidth||1,i=[],j=[],k=[],l=0,o=0,p=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],q=!1;a:for(b=1;b<f.length;++b){var r=f[b-1],s=f[b];for(j.push(l),k.push(r.slice()),c=0;3>c;++c){if(isNaN(r[c])||isNaN(s[c])||!isFinite(r[c])||!isFinite(s[c])){if(!e&&i.length>0){for(var t=0;24>t;++t)i.push(i[i.length-12]);o+=2,q=!0}continue a}p[0][c]=Math.min(p[0][c],r[c],s[c]),p[1][c]=Math.max(p[1][c],r[c],s[c])}var u,v;Array.isArray(g[0])?(u=g[b-1],v=g[b]):u=v=g,3===u.length&&(u=[u[0],u[1],u[2],1]),3===v.length&&(v=[v[0],v[1],v[2],1]);var w;w=Array.isArray(h)?h[b-1]:h;var x=l;if(l+=d(r,s),q){for(c=0;2>c;++c)i.push(r[0],r[1],r[2],s[0],s[1],s[2],x,w,u[0],u[1],u[2],u[3]);o+=2,q=!1}i.push(r[0],r[1],r[2],s[0],s[1],s[2],x,w,u[0],u[1],u[2],u[3],r[0],r[1],r[2],s[0],s[1],s[2],x,-w,u[0],u[1],u[2],u[3],s[0],s[1],s[2],r[0],r[1],r[2],l,-w,v[0],v[1],v[2],v[3],s[0],s[1],s[2],r[0],r[1],r[2],l,w,v[0],v[1],v[2],v[3]),o+=4}if(this.buffer.update(i),j.push(l),k.push(f[f.length-1].slice()),this.bounds=p,this.vertexCount=o,this.points=k,this.arcLength=j,"dashes"in a){var y=a.dashes,z=y.slice();for(z.unshift(0),b=1;b<z.length;++b)z[b]=z[b-1]+z[b];var A=n(new Array(1024),[256,1,4]);for(b=0;256>b;++b){for(c=0;4>c;++c)A.set(b,0,c,0);1&m.le(z,z[z.length-1]*b/255)?A.set(b,0,0,0):A.set(b,0,0,255)}this.texture.setPixels(A)}}},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},s.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=l(a.value[0],a.value[1],a.value[2],0),c=m.le(this.arcLength,b);if(0>c)return null;if(c===this.arcLength.length-1)return new f(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),c);for(var d=this.points[c],e=this.points[Math.min(c+1,this.points.length-1)],g=(b-this.arcLength[c])/(this.arcLength[c+1]-this.arcLength[c]),h=1-g,i=[0,0,0],j=0;3>j;++j)i[j]=h*d[j]+g*e[j];var k=Math.min(.5>g?c:c+1,this.points.length-1);return new f(b,i,k,this.points[k])}},{"./lib/shaders":172,"binary-search-bounds":67,"gl-buffer":157,"gl-texture2d":268,"gl-vao":272,"glsl-read-float":279,ndarray:468}],174:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null}b.exports=d},{}],175:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null}b.exports=d},{}],176:[function(a,b,c){function d(a){var b=new Float32Array(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b}b.exports=d},{}],177:[function(a,b,c){function d(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],178:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x}b.exports=d},{}],179:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],180:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}b.exports=d},{}],181:[function(a,b,c){function d(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],182:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null}b.exports=d},{}],183:[function(a,b,c){function d(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,p=b[0],q=b[1],r=b[2],s=d[0],t=d[1],u=d[2],v=c[0],w=c[1],x=c[2];return Math.abs(p-v)<1e-6&&Math.abs(q-w)<1e-6&&Math.abs(r-x)<1e-6?e(a):(l=p-v,m=q-w,n=r-x,o=1/Math.sqrt(l*l+m*m+n*n),l*=o,m*=o,n*=o,f=t*n-u*m,g=u*l-s*n,h=s*m-t*l,o=Math.sqrt(f*f+g*g+h*h),o?(o=1/o,f*=o,g*=o,h*=o):(f=0,g=0,h=0),i=m*h-n*g,j=n*f-l*h,k=l*g-m*f,o=Math.sqrt(i*i+j*j+k*k),o?(o=1/o,i*=o,j*=o,k*=o):(i=0,j=0,k=0),a[0]=f,a[1]=i,a[2]=l,a[3]=0,a[4]=g,a[5]=j,a[6]=m,a[7]=0,a[8]=h,a[9]=k,a[10]=n,a[11]=0,a[12]=-(f*p+g*q+h*r),a[13]=-(i*p+j*q+k*r),a[14]=-(l*p+m*q+n*r),a[15]=1,a)}var e=a("./identity");b.exports=d},{"./identity":181}],184:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a}b.exports=d},{}],185:[function(a,b,c){function d(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a}b.exports=d},{}],186:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=d[0],D=d[1],E=d[2],F=Math.sqrt(C*C+D*D+E*E);return Math.abs(F)<1e-6?null:(F=1/F,
C*=F,D*=F,E*=F,e=Math.sin(c),f=Math.cos(c),g=1-f,h=b[0],i=b[1],j=b[2],k=b[3],l=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9],r=b[10],s=b[11],t=C*C*g+f,u=D*C*g+E*e,v=E*C*g-D*e,w=C*D*g-E*e,x=D*D*g+f,y=E*D*g+C*e,z=C*E*g+D*e,A=D*E*g-C*e,B=E*E*g+f,a[0]=h*t+l*u+p*v,a[1]=i*t+m*u+q*v,a[2]=j*t+n*u+r*v,a[3]=k*t+o*u+s*v,a[4]=h*w+l*x+p*y,a[5]=i*w+m*x+q*y,a[6]=j*w+n*x+r*y,a[7]=k*w+o*x+s*y,a[8]=h*z+l*A+p*B,a[9]=i*z+m*A+q*B,a[10]=j*z+n*A+r*B,a[11]=k*z+o*A+s*B,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)}b.exports=d},{}],187:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a}b.exports=d},{}],188:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a}b.exports=d},{}],189:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a}b.exports=d},{}],190:[function(a,b,c){function d(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}b.exports=d},{}],191:[function(a,b,c){function d(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a}b.exports=d},{}],192:[function(a,b,c){function d(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}b.exports=d},{}],193:[function(a,b,c){"use strict";function d(a,b){switch(b.length){case 0:break;case 1:a[0]=1/b[0];break;case 4:e(a,b);break;case 9:f(a,b);break;case 16:g(a,b);break;default:throw new Error("currently supports matrices up to 4x4")}return a}b.exports=d;var e=a("gl-mat2/invert"),f=a("gl-mat3/invert"),g=a("gl-mat4/invert")},{"gl-mat2/invert":174,"gl-mat3/invert":175,"gl-mat4/invert":182}],194:[function(a,b,c){c.glMatrix=a("./gl-matrix/common.js"),c.mat2=a("./gl-matrix/mat2.js"),c.mat2d=a("./gl-matrix/mat2d.js"),c.mat3=a("./gl-matrix/mat3.js"),c.mat4=a("./gl-matrix/mat4.js"),c.quat=a("./gl-matrix/quat.js"),c.vec2=a("./gl-matrix/vec2.js"),c.vec3=a("./gl-matrix/vec3.js"),c.vec4=a("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":195,"./gl-matrix/mat2.js":196,"./gl-matrix/mat2d.js":197,"./gl-matrix/mat3.js":198,"./gl-matrix/mat4.js":199,"./gl-matrix/quat.js":200,"./gl-matrix/vec2.js":201,"./gl-matrix/vec3.js":202,"./gl-matrix/vec4.js":203}],195:[function(a,b,c){var d={};d.EPSILON=1e-6,d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,d.RANDOM=Math.random,d.ENABLE_SIMD=!1,d.SIMD_AVAILABLE=d.ARRAY_TYPE===Float32Array&&"SIMD"in this,d.USE_SIMD=d.ENABLE_SIMD&&d.SIMD_AVAILABLE,d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};var e=Math.PI/180;d.toRadian=function(a){return a*e},d.equals=function(a,b){return Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},b.exports=d},{}],196:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},b.exports=e},{"./common.js":195}],197:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.fromValues=function(a,b,c,e,f,g){var h=new d.ARRAY_TYPE(6);return h[0]=a,h[1]=b,h[2]=c,h[3]=e,h[4]=f,h[5]=g,h},e.set=function(a,b,c,d,e,f,g){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=b[0],k=b[1],l=b[2],m=b[3],n=b[4],o=b[5];return Math.abs(c-j)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(e-k)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(g-m)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(h-n)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(i-o)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))},b.exports=e},{"./common.js":195}],198:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromValues=function(a,b,c,e,f,g,h,i,j){var k=new d.ARRAY_TYPE(9);return k[0]=a,k[1]=b,k[2]=c,k[3]=e,k[4]=f,k[5]=g,k[6]=h,k[7]=i,k[8]=j,k},e.set=function(a,b,c,d,e,f,g,h,i,j){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5],s=a[6],t=b[7],u=b[8];return Math.abs(c-m)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(e-n)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(f-o)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(o))&&Math.abs(g-p)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(h-q)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(i-r)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(j-s)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(s))&&Math.abs(k-t)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(t))&&Math.abs(l-u)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(u))},b.exports=e},{"./common.js":195}],199:[function(a,b,c){var d=a("./common.js"),e={scalar:{},SIMD:{}};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.fromValues=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=new d.ARRAY_TYPE(16);return r[0]=a,r[1]=b,r[2]=c,r[3]=e,r[4]=f,r[5]=g,r[6]=h,r[7]=i,r[8]=j,r[9]=k,r[10]=l,r[11]=m,r[12]=n,r[13]=o,r[14]=p,r[15]=q,r},e.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a[9]=k,a[10]=l,a[11]=m,a[12]=n,a[13]=o,a[14]=p,a[15]=q,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.scalar.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.SIMD.transpose=function(a,b){var c,d,e,f,g,h,i,j,k,l;return c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12),g=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),i=SIMD.Float32x4.shuffle(g,h,0,2,4,6),j=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,0,i),SIMD.Float32x4.store(a,4,j),g=SIMD.Float32x4.shuffle(c,d,2,3,6,7),h=SIMD.Float32x4.shuffle(e,f,2,3,6,7),k=SIMD.Float32x4.shuffle(g,h,0,2,4,6),l=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,8,k),SIMD.Float32x4.store(a,12,l),a},e.transpose=d.USE_SIMD?e.SIMD.transpose:e.scalar.transpose,e.scalar.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.SIMD.invert=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=SIMD.Float32x4.load(b,0),n=SIMD.Float32x4.load(b,4),o=SIMD.Float32x4.load(b,8),p=SIMD.Float32x4.load(b,12);return g=SIMD.Float32x4.shuffle(m,n,0,1,4,5),d=SIMD.Float32x4.shuffle(o,p,0,1,4,5),c=SIMD.Float32x4.shuffle(g,d,0,2,4,6),d=SIMD.Float32x4.shuffle(d,g,1,3,5,7),g=SIMD.Float32x4.shuffle(m,n,2,3,6,7),f=SIMD.Float32x4.shuffle(o,p,2,3,6,7),e=SIMD.Float32x4.shuffle(g,f,0,2,4,6),f=SIMD.Float32x4.shuffle(f,g,1,3,5,7),g=SIMD.Float32x4.mul(e,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.mul(d,g),i=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),h),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),g=SIMD.Float32x4.mul(d,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),h),k=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),g=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),h),j=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),j),j=SIMD.Float32x4.swizzle(j,2,3,0,1),g=SIMD.Float32x4.mul(c,d),g=SIMD.Float32x4.swizzle(g,1,0,3,2),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,g),k),g=SIMD.Float32x4.swizzle(g,2,3,0,1),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,g)),g=SIMD.Float32x4.mul(c,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),j),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),i),j=SIMD.Float32x4.sub(j,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.mul(c,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),i),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),k),l=SIMD.Float32x4.mul(c,h),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,2,3,0,1),l),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,1,0,3,2),l),g=SIMD.Float32x4.reciprocalApproximation(l),l=SIMD.Float32x4.sub(SIMD.Float32x4.add(g,g),SIMD.Float32x4.mul(l,SIMD.Float32x4.mul(g,g))),(l=SIMD.Float32x4.swizzle(l,0,0,0,0))?(SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(l,h)),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(l,i)),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(l,j)),SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(l,k)),a):null},e.invert=d.USE_SIMD?e.SIMD.invert:e.scalar.invert,e.scalar.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.SIMD.adjoint=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12);return k=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),g=SIMD.Float32x4.shuffle(k,h,0,2,4,6),h=SIMD.Float32x4.shuffle(h,k,1,3,5,7),k=SIMD.Float32x4.shuffle(c,d,2,3,6,7),j=SIMD.Float32x4.shuffle(e,f,2,3,6,7),i=SIMD.Float32x4.shuffle(k,j,0,2,4,6),j=SIMD.Float32x4.shuffle(j,k,1,3,5,7),k=SIMD.Float32x4.mul(i,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.mul(h,k),m=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,k),l),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),k=SIMD.Float32x4.mul(h,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),l),o=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),l),n=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),k=SIMD.Float32x4.mul(g,h),k=SIMD.Float32x4.swizzle(k,1,0,3,2),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,k),o),k=SIMD.Float32x4.swizzle(k,2,3,0,1),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(i,k)),k=SIMD.Float32x4.mul(g,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),n),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),m),n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.mul(g,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),m),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),o),SIMD.Float32x4.store(a,0,l),SIMD.Float32x4.store(a,4,m),SIMD.Float32x4.store(a,8,n),SIMD.Float32x4.store(a,12,o),a},e.adjoint=d.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint,e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.SIMD.multiply=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4.load(c,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),g))));SIMD.Float32x4.store(a,0,i);var j=SIMD.Float32x4.load(c,4),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,3,3,3,3),g))));SIMD.Float32x4.store(a,4,k);var l=SIMD.Float32x4.load(c,8),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),g))));SIMD.Float32x4.store(a,8,m);var n=SIMD.Float32x4.load(c,12),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,3,3,3,3),g))));return SIMD.Float32x4.store(a,12,o),a},e.scalar.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.multiply=d.USE_SIMD?e.SIMD.multiply:e.scalar.multiply,e.mul=e.multiply,e.scalar.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.SIMD.translate=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]),d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(h,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(h,1,1,1,1)),f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(h,2,2,2,2));var i=SIMD.Float32x4.add(d,SIMD.Float32x4.add(e,SIMD.Float32x4.add(f,g)));return SIMD.Float32x4.store(a,12,i),a},e.translate=d.USE_SIMD?e.SIMD.translate:e.scalar.translate,e.scalar.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.SIMD.scale=function(a,b,c){var d,e,f,g=SIMD.Float32x4(c[0],c[1],c[2],0);return d=SIMD.Float32x4.load(b,0),SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,0,0,0,0))),e=SIMD.Float32x4.load(b,4),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(g,1,1,1,1))),f=SIMD.Float32x4.load(b,8),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,2,2,2,2))),a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.scale=d.USE_SIMD?e.SIMD.scale:e.scalar.scale,e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.scalar.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.SIMD.rotateX=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateX=d.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX,e.scalar.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.SIMD.rotateY=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(g,e))),a},e.rotateY=d.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY,e.scalar.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];
return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.SIMD.rotateZ=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,4);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateZ=d.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ,e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a},e.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;return c>0?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d),a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a[9]=b[9]+c[9],a[10]=b[10]+c[10],a[11]=b[11]+c[11],a[12]=b[12]+c[12],a[13]=b[13]+c[13],a[14]=b[14]+c[14],a[15]=b[15]+c[15],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a[9]=b[9]-c[9],a[10]=b[10]-c[10],a[11]=b[11]-c[11],a[12]=b[12]-c[12],a[13]=b[13]-c[13],a[14]=b[14]-c[14],a[15]=b[15]-c[15],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a[9]=b[9]+c[9]*d,a[10]=b[10]+c[10]*d,a[11]=b[11]+c[11]*d,a[12]=b[12]+c[12]*d,a[13]=b[13]+c[13]*d,a[14]=b[14]+c[14]*d,a[15]=b[15]+c[15]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],x=b[4],y=b[5],z=b[6],A=b[7],B=b[8],C=b[9],D=b[10],E=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return Math.abs(c-t)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(e-u)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-v)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(g-w)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(h-x)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(i-y)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(j-z)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(z))&&Math.abs(k-A)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(l-B)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(m-C)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(n-D)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-E)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(p-F)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(q-G)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(r-H)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(H))&&Math.abs(s-I)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))},b.exports=e},{"./common.js":195}],200:[function(a,b,c){var d=a("./common.js"),e=a("./mat3.js"),f=a("./vec3.js"),g=a("./vec4.js"),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return-.999999>i?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);return 0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0),c},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},h.exactEquals=g.exactEquals,h.equals=g.equals,b.exports=h},{"./common.js":195,"./mat3.js":198,"./vec3.js":202,"./vec4.js":203}],201:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},e.equals=function(a,b){var c=a[0],e=a[1],f=b[0],g=b[1];return Math.abs(c-f)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))},b.exports=e},{"./common.js":195}],202:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))},b.exports=e},{"./common.js":195}],203:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a[3]=Math.ceil(b[3]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a[3]=Math.floor(b[3]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a[3]=Math.round(b[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},b.exports=e},{"./common.js":195}],204:[function(a,b,c){"use strict";function d(a,b){for(var c=[0,0,0,0],d=0;4>d;++d)for(var e=0;4>e;++e)c[e]+=a[4*d+e]*b[d];return c}function e(a,b,c,e,f){for(var g=d(e,d(c,d(b,[a[0],a[1],a[2],1]))),h=0;3>h;++h)g[h]/=g[3];return[.5*f[0]*(1+g[0]),.5*f[1]*(1-g[1])]}function f(a,b){if(2===a.length){for(var c=0,d=0,e=0;2>e;++e)c+=Math.pow(b[e]-a[0][e],2),d+=Math.pow(b[e]-a[1][e],2);return c=Math.sqrt(c),d=Math.sqrt(d),1e-6>c+d?[1,0]:[d/(c+d),c/(d+c)]}if(3===a.length){var f=[0,0];return j(a[0],a[1],a[2],b,f),i(a,f)}return[]}function g(a,b){for(var c=[0,0,0],d=0;d<a.length;++d)for(var e=a[d],f=b[d],g=0;3>g;++g)c[g]+=f*e[g];return c}function h(a,b,c,d,h,i){if(1===a.length)return[0,a[0].slice()];for(var j=new Array(a.length),k=0;k<a.length;++k)j[k]=e(a[k],c,d,h,i);for(var l=0,m=1/0,k=0;k<j.length;++k){for(var n=0,o=0;2>o;++o)n+=Math.pow(j[k][o]-b[o],2);m>n&&(m=n,l=k)}for(var p=f(j,b),q=0,k=0;3>k;++k){if(p[k]<-.001||p[k]>1.0001)return null;q+=p[k]}return Math.abs(q-1)>.001?null:[l,g(a,p),p]}var i=a("barycentric"),j=a("polytope-closest-point/lib/closest_point_2d.js");b.exports=h},{barycentric:50,"polytope-closest-point/lib/closest_point_2d.js":495}],205:[function(a,b,c){var d="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",e="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",g="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",h="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",i="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",j="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",k="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",l="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",m="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",n="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n";
c.meshShader={vertex:d,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.wireShader={vertex:f,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.pointShader={vertex:h,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},c.pickShader={vertex:j,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},c.pointPickShader={vertex:l,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},c.contourShader={vertex:m,fragment:n,attributes:[{name:"position",type:"vec3"}]}},{}],206:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){this.gl=a,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=c,this.lineShader=d,this.pointShader=e,this.pickShader=f,this.pointPickShader=g,this.contourShader=h,this.trianglePositions=i,this.triangleColors=k,this.triangleNormals=m,this.triangleUVs=l,this.triangleIds=j,this.triangleVAO=n,this.triangleCount=0,this.lineWidth=1,this.edgePositions=o,this.edgeColors=q,this.edgeUVs=r,this.edgeIds=p,this.edgeVAO=s,this.edgeCount=0,this.pointPositions=t,this.pointColors=v,this.pointUVs=w,this.pointSizes=x,this.pointIds=u,this.pointVAO=y,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=z,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=J,this._view=J,this._projection=J,this._resolution=[1,1]}function e(a){for(var b=y({colormap:a,nshades:256,format:"rgba"}),c=new Uint8Array(1024),d=0;256>d;++d){for(var e=b[d],f=0;3>f;++f)c[4*d+f]=e[f];c[4*d+3]=255*e[3]}return x(c,[256,256,4],[4,0,1])}function f(a,b,c){for(var d=new Array(b),e=0;b>e;++e)d[e]=0;for(var f=a.length,e=0;f>e;++e)for(var g=a[e],h=0;h<g.length;++h)d[g[h]]=c[e];return d}function g(a){for(var b=a.length,c=new Array(b),d=0;b>d;++d)c[d]=a[d][2];return c}function h(a){var b=q(a,D.vertex,D.fragment);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.normal.location=4,b}function i(a){var b=q(a,E.vertex,E.fragment);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b}function j(a){var b=q(a,F.vertex,F.fragment);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.pointSize.location=4,b}function k(a){var b=q(a,G.vertex,G.fragment);return b.attributes.position.location=0,b.attributes.id.location=1,b}function l(a){var b=q(a,H.vertex,H.fragment);return b.attributes.position.location=0,b.attributes.id.location=1,b.attributes.pointSize.location=4,b}function m(a){var b=q(a,I.vertex,I.fragment);return b.attributes.position.location=0,b}function n(a,b){1===arguments.length&&(b=a,a=b.gl);var c=h(a),e=i(a),f=j(a),g=k(a),n=l(a),o=m(a),p=t(a,x(new Uint8Array([255,255,255,255]),[1,1,4]));p.generateMipmap(),p.minFilter=a.LINEAR_MIPMAP_LINEAR,p.magFilter=a.LINEAR;var q=r(a),u=r(a),v=r(a),w=r(a),y=r(a),z=s(a,[{buffer:q,type:a.FLOAT,size:3},{buffer:y,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:a.FLOAT,size:4},{buffer:v,type:a.FLOAT,size:2},{buffer:w,type:a.FLOAT,size:3}]),A=r(a),B=r(a),C=r(a),D=r(a),E=s(a,[{buffer:A,type:a.FLOAT,size:3},{buffer:D,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:a.FLOAT,size:4},{buffer:C,type:a.FLOAT,size:2}]),F=r(a),G=r(a),H=r(a),I=r(a),J=r(a),K=s(a,[{buffer:F,type:a.FLOAT,size:3},{buffer:J,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:G,type:a.FLOAT,size:4},{buffer:H,type:a.FLOAT,size:2},{buffer:I,type:a.FLOAT,size:1}]),L=r(a),M=s(a,[{buffer:L,type:a.FLOAT,size:3}]),N=new d(a,p,c,e,f,g,n,o,q,y,u,v,w,z,A,D,B,C,E,F,J,G,H,I,K,L,M);return N.update(b),N}var o=1e-6,p=1e-6,q=a("gl-shader"),r=a("gl-buffer"),s=a("gl-vao"),t=a("gl-texture2d"),u=a("normals"),v=a("gl-mat4/multiply"),w=a("gl-mat4/invert"),x=a("ndarray"),y=a("colormap"),z=a("simplicial-complex-contour"),A=a("typedarray-pool"),B=a("./lib/shaders"),C=a("./lib/closest-point"),D=B.meshShader,E=B.wireShader,F=B.pointShader,G=B.pickShader,H=B.pointPickShader,I=B.contourShader,J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K=d.prototype;K.isOpaque=function(){return this.opacity>=1},K.isTransparent=function(){return this.opacity<1},K.pickSlots=1,K.setPickBase=function(a){this.pickId=a},K.highlight=function(a){if(!a||!this.contourEnable)return void(this.contourCount=0);for(var b=z(this.cells,this.intensity,a.intensity),c=b.cells,d=b.vertexIds,e=b.vertexWeights,f=c.length,g=A.mallocFloat32(6*f),h=0,i=0;f>i;++i)for(var j=c[i],k=0;2>k;++k){var l=j[0];2===j.length&&(l=j[k]);for(var m=d[l][0],n=d[l][1],o=e[l],p=1-o,q=this.positions[m],r=this.positions[n],s=0;3>s;++s)g[h++]=o*q[s]+p*r[s]}this.contourCount=h/3|0,this.contourPositions.update(g.subarray(0,h)),A.free(g)},K.update=function(a){a=a||{};var b=this.gl;this.dirty=!0,"contourEnable"in a&&(this.contourEnable=a.contourEnable),"contourColor"in a&&(this.contourColor=a.contourColor),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"lightPosition"in a&&(this.lightPosition=a.lightPosition),"opacity"in a&&(this.opacity=a.opacity),"ambient"in a&&(this.ambientLight=a.ambient),"diffuse"in a&&(this.diffuseLight=a.diffuse),"specular"in a&&(this.specularLight=a.specular),"roughness"in a&&(this.roughness=a.roughness),"fresnel"in a&&(this.fresnel=a.fresnel),a.texture?(this.texture.dispose(),this.texture=t(b,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(e(a.colormap)),this.texture.generateMipmap());var c=a.cells,d=a.positions;if(d&&c){var h=[],i=[],j=[],k=[],l=[],m=[],n=[],q=[],r=[],s=[],v=[],w=[],x=[],y=[];this.cells=c,this.positions=d;var z=a.vertexNormals,A=a.cellNormals,B=void 0===a.vertexNormalsEpsilon?o:a.vertexNormalsEpsilon,C=void 0===a.faceNormalsEpsilon?p:a.faceNormalsEpsilon;a.useFacetNormals&&!A&&(A=u.faceNormals(c,d,C)),A||z||(z=u.vertexNormals(c,d,B));var D=a.vertexColors,E=a.cellColors,F=a.meshColor||[1,1,1,1],G=a.vertexUVs,H=a.vertexIntensity,I=a.cellUVs,J=a.cellIntensity,K=1/0,L=-(1/0);if(!G&&!I)if(H)if(a.vertexIntensityBounds)K=+a.vertexIntensityBounds[0],L=+a.vertexIntensityBounds[1];else for(var M=0;M<H.length;++M){var N=H[M];K=Math.min(K,N),L=Math.max(L,N)}else if(J)for(var M=0;M<J.length;++M){var N=J[M];K=Math.min(K,N),L=Math.max(L,N)}else for(var M=0;M<d.length;++M){var N=d[M][2];K=Math.min(K,N),L=Math.max(L,N)}H?this.intensity=H:J?this.intensity=f(c,d.length,J):this.intensity=g(d);var O=a.pointSizes,P=a.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(var M=0;M<d.length;++M)for(var Q=d[M],R=0;3>R;++R)!isNaN(Q[R])&&isFinite(Q[R])&&(this.bounds[0][R]=Math.min(this.bounds[0][R],Q[R]),this.bounds[1][R]=Math.max(this.bounds[1][R],Q[R]));var S=0,T=0,U=0;a:for(var M=0;M<c.length;++M){var V=c[M];switch(V.length){case 1:for(var W=V[0],Q=d[W],R=0;3>R;++R)if(isNaN(Q[R])||!isFinite(Q[R]))continue a;s.push(Q[0],Q[1],Q[2]);var X;X=D?D[W]:E?E[M]:F,3===X.length?v.push(X[0],X[1],X[2],1):v.push(X[0],X[1],X[2],X[3]);var Y;Y=G?G[W]:H?[(H[W]-K)/(L-K),0]:I?I[M]:J?[(J[M]-K)/(L-K),0]:[(Q[2]-K)/(L-K),0],w.push(Y[0],Y[1]),O?x.push(O[W]):x.push(P),y.push(M),U+=1;break;case 2:for(var R=0;2>R;++R)for(var W=V[R],Q=d[W],Z=0;3>Z;++Z)if(isNaN(Q[Z])||!isFinite(Q[Z]))continue a;for(var R=0;2>R;++R){var W=V[R],Q=d[W];m.push(Q[0],Q[1],Q[2]);var X;X=D?D[W]:E?E[M]:F,3===X.length?n.push(X[0],X[1],X[2],1):n.push(X[0],X[1],X[2],X[3]);var Y;Y=G?G[W]:H?[(H[W]-K)/(L-K),0]:I?I[M]:J?[(J[M]-K)/(L-K),0]:[(Q[2]-K)/(L-K),0],q.push(Y[0],Y[1]),r.push(M)}T+=1;break;case 3:for(var R=0;3>R;++R)for(var W=V[R],Q=d[W],Z=0;3>Z;++Z)if(isNaN(Q[Z])||!isFinite(Q[Z]))continue a;for(var R=0;3>R;++R){var W=V[R],Q=d[W];h.push(Q[0],Q[1],Q[2]);var X;X=D?D[W]:E?E[M]:F,3===X.length?i.push(X[0],X[1],X[2],1):i.push(X[0],X[1],X[2],X[3]);var Y;Y=G?G[W]:H?[(H[W]-K)/(L-K),0]:I?I[M]:J?[(J[M]-K)/(L-K),0]:[(Q[2]-K)/(L-K),0],k.push(Y[0],Y[1]);var $;$=z?z[W]:A[M],j.push($[0],$[1],$[2]),l.push(M)}S+=1}}this.pointCount=U,this.edgeCount=T,this.triangleCount=S,this.pointPositions.update(s),this.pointColors.update(v),this.pointUVs.update(w),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(y)),this.edgePositions.update(m),this.edgeColors.update(n),this.edgeUVs.update(q),this.edgeIds.update(new Uint32Array(r)),this.trianglePositions.update(h),this.triangleColors.update(i),this.triangleUVs.update(k),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(l))}},K.drawTransparent=K.draw=function(a){a=a||{};for(var b=this.gl,c=a.model||J,d=a.view||J,e=a.projection||J,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;3>g;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);var h={model:c,view:d,projection:e,clipBounds:f,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var i=new Array(16);v(i,h.view,h.model),v(i,h.projection,i),w(i,i);for(var g=0;3>g;++g)h.eyePosition[g]=i[12+g]/i[15];for(var j=i[15],g=0;3>g;++g)j+=this.lightPosition[g]*i[4*g+3];for(var g=0;3>g;++g){for(var k=i[12+g],l=0;3>l;++l)k+=i[4*l+g]*this.lightPosition[l];h.lightPosition[g]=k/j}if(this.triangleCount>0){var m=this.triShader;m.bind(),m.uniforms=h,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var m=this.lineShader;m.bind(),m.uniforms=h,this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var m=this.pointShader;m.bind(),m.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var m=this.contourShader;m.bind(),m.uniforms=h,this.contourVAO.bind(),b.drawArrays(b.LINES,0,this.contourCount),this.contourVAO.unbind()}},K.drawPick=function(a){a=a||{};for(var b=this.gl,c=a.model||J,d=a.view||J,e=a.projection||J,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;3>g;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c),this._view=[].slice.call(d),this._projection=[].slice.call(e),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var h={model:c,view:d,projection:e,clipBounds:f,pickId:this.pickId/255},i=this.pickShader;if(i.bind(),i.uniforms=h,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var i=this.pointPickShader;i.bind(),i.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}},K.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;for(var b=a.value[0]+256*a.value[1]+65536*a.value[2],c=this.cells[b],d=this.positions,e=new Array(c.length),f=0;f<c.length;++f)e[f]=d[c[f]];var g=C(e,[a.coord[0],this._resolution[1]-a.coord[1]],this._model,this._view,this._projection,this._resolution);if(!g)return null;for(var h=g[2],i=0,f=0;f<c.length;++f)i+=h[f]*this.intensity[c[f]];return{position:g[1],index:c[g[0]],cell:c,cellId:b,intensity:i,dataCoordinate:this.positions[c[g[0]]]}},K.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=n},{"./lib/closest-point":204,"./lib/shaders":205,colormap:100,"gl-buffer":157,"gl-mat4/invert":182,"gl-mat4/multiply":184,"gl-shader":256,"gl-texture2d":268,"gl-vao":272,ndarray:468,normals:470,"simplicial-complex-contour":526,"typedarray-pool":550}],207:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl,c=f(b,[0,0,0,1,1,0,1,1]),e=g(b,h.boxVert,h.lineFrag);return new d(a,c,e)}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawBox=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g){var h=this.plot,i=this.shader,j=h.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,i.uniforms.lo=a,i.uniforms.hi=b,i.uniforms.color=g,j.drawArrays(j.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":210,"gl-buffer":157,"gl-shader":213}],208:[function(a,b,c){"use strict";function d(a,b,c,d){this.plot=a,this.vbo=b,this.shader=c,this.tickShader=d,this.ticks=[[],[]]}function e(a,b){return a-b}function f(a){var b=a.gl,c=g(b),e=h(b,j.gridVert,j.gridFrag),f=h(b,j.tickVert,j.gridFrag),i=new d(a,c,e,f);return i}b.exports=f;var g=a("gl-buffer"),h=a("gl-shader"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.draw=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){for(var d=this.plot,e=this.vbo,f=this.shader,g=this.ticks,h=d.gl,i=d._tickBounds,j=d.dataBox,k=d.viewBox,l=d.gridLineWidth,m=d.gridLineColor,n=d.gridLineEnable,o=d.pixelRatio,p=0;2>p;++p){var q=i[p],r=i[p+2],s=r-q,t=.5*(j[p+2]+j[p]),u=j[p+2]-j[p];b[p]=2*s/u,a[p]=2*(q-t)/u}f.bind(),e.bind(),f.attributes.dataCoord.pointer(),f.uniforms.dataShift=a,f.uniforms.dataScale=b;for(var v=0,p=0;2>p;++p){c[0]=c[1]=0,c[p]=1,f.uniforms.dataAxis=c,f.uniforms.lineWidth=l[p]/(k[p+2]-k[p])*o,f.uniforms.color=m[p];var w=6*g[p].length;n[p]&&w&&h.drawArrays(h.TRIANGLES,v,w),v+=w}}}(),k.drawTickMarks=function(){var a=[0,0],b=[0,0],c=[1,0],d=[0,1],f=[0,0],g=[0,0];return function(){for(var h=this.plot,j=this.vbo,k=this.tickShader,l=this.ticks,m=h.gl,n=h._tickBounds,o=h.dataBox,p=h.viewBox,q=h.pixelRatio,r=h.screenBox,s=r[2]-r[0],t=r[3]-r[1],u=p[2]-p[0],v=p[3]-p[1],w=0;2>w;++w){var x=n[w],y=n[w+2],z=y-x,A=.5*(o[w+2]+o[w]),B=o[w+2]-o[w];b[w]=2*z/B,a[w]=2*(x-A)/B}b[0]*=u/s,a[0]*=u/s,b[1]*=v/t,a[1]*=v/t,k.bind(),j.bind(),k.attributes.dataCoord.pointer();var C=k.uniforms;C.dataShift=a,C.dataScale=b;var D=h.tickMarkLength,E=h.tickMarkWidth,F=h.tickMarkColor,G=0,H=6*l[0].length,I=Math.min(i.ge(l[0],(o[0]-n[0])/(n[2]-n[0]),e),l[0].length),J=Math.min(i.gt(l[0],(o[2]-n[0])/(n[2]-n[0]),e),l[0].length),K=G+6*I,L=6*Math.max(0,J-I),M=Math.min(i.ge(l[1],(o[1]-n[1])/(n[3]-n[1]),e),l[1].length),N=Math.min(i.gt(l[1],(o[3]-n[1])/(n[3]-n[1]),e),l[1].length),O=H+6*M,P=6*Math.max(0,N-M);f[0]=2*(p[0]-D[1])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[1]*q/s,g[1]=E[1]*q/t,P&&(C.color=F[1],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,O,P)),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[1]-D[0])/t-1,g[0]=E[0]*q/s,g[1]=D[0]*q/t,L&&(C.color=F[0],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,K,L)),f[0]=2*(p[2]+D[3])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[3]*q/s,g[1]=E[3]*q/t,P&&(C.color=F[3],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,O,P)),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[3]+D[2])/t-1,g[0]=E[2]*q/s,g[1]=D[2]*q/t,L&&(C.color=F[2],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,K,L))}}(),k.update=function(){var a=[1,1,-1,-1,1,-1],b=[1,-1,1,1,-1,-1];return function(c){for(var d=c.ticks,e=c.bounds,f=new Float32Array(18*(d[0].length+d[1].length)),g=(this.plot.zeroLineEnable,0),h=[[],[]],i=0;2>i;++i)for(var j=h[i],k=d[i],l=e[i],m=e[i+2],n=0;n<k.length;++n){var o=(k[n].x-l)/(m-l);j.push(o);for(var p=0;6>p;++p)f[g++]=o,f[g++]=a[p],f[g++]=b[p]}this.ticks=h,this.vbo.update(f)}}(),k.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":210,"binary-search-bounds":212,"gl-buffer":157,"gl-shader":213}],209:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl,c=f(b,[-1,-1,-1,1,1,-1,1,1]),e=g(b,h.lineVert,h.lineFrag),i=new d(a,c,e);return i}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawLine=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g,h){var i=this.plot,j=this.shader,k=i.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,j.uniforms.start=a,j.uniforms.end=b,j.uniforms.width=g*i.pixelRatio,j.uniforms.color=h,k.drawArrays(k.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":210,"gl-buffer":157,"gl-shader":213}],210:[function(a,b,c){"use strict";var d="precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n";b.exports={lineVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",lineFrag:d,textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",textFrag:d,gridVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",gridFrag:d,boxVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},{}],211:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function e(a){var b=a.gl,c=f(b),e=g(b,j.textVert,j.textFrag),h=new d(a,c,e);return h}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("text-cache"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.drawTicks=function(){var a=[0,0],b=[0,0],c=[0,0];return function(d){var e=this.plot,f=this.shader,g=this.tickX[d],h=this.tickOffset[d],j=e.gl,k=e.viewBox,l=e.dataBox,m=e.screenBox,n=e.pixelRatio,o=e.tickEnable,p=e.tickPad,q=e.tickColor,r=e.tickAngle,s=e.labelEnable,t=e.labelPad,u=e.labelColor,v=e.labelAngle,w=this.labelOffset[d],x=this.labelCount[d],y=i.lt(g,l[d]),z=i.le(g,l[d+2]);a[0]=a[1]=0,a[d]=1,b[d]=(k[2+d]+k[d])/(m[2+d]-m[d])-1;var A=2/m[2+(1^d)]-m[1^d];b[1^d]=A*k[1^d]-1,o[d]&&(b[1^d]-=A*n*p[d],z>y&&h[z]>h[y]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d],f.uniforms.angle=r[d],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d]&&x&&(b[1^d]-=A*n*t[d],f.uniforms.dataAxis=c,f.uniforms.screenOffset=b,f.uniforms.color=u[d],f.uniforms.angle=v[d],j.drawArrays(j.TRIANGLES,w,x)),b[1^d]=A*k[2+(1^d)]-1,o[d+2]&&(b[1^d]+=A*n*p[d+2],z>y&&h[z]>h[y]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d+2],f.uniforms.angle=r[d+2],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d+2]&&x&&(b[1^d]+=A*n*t[d+2],f.uniforms.dataAxis=c,f.uniforms.screenOffset=b,f.uniforms.color=u[d+2],f.uniforms.angle=v[d+2],j.drawArrays(j.TRIANGLES,w,x))}}(),k.drawTitle=function(){var a=[0,0],b=[0,0];return function(){var c=this.plot,d=this.shader,e=c.gl,f=c.screenBox,g=c.titleCenter,h=c.titleAngle,i=c.titleColor,j=c.pixelRatio;if(this.titleCount){for(var k=0;2>k;++k)b[k]=2*(g[k]*j-f[k])/(f[2+k]-f[k])-1;d.bind(),d.uniforms.dataAxis=a,d.uniforms.screenOffset=b,d.uniforms.angle=h,d.uniforms.color=i,e.drawArrays(e.TRIANGLES,this.titleOffset,this.titleCount)}}}(),k.bind=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){var d=this.plot,e=this.shader,f=d._tickBounds,g=d.dataBox,h=d.screenBox,i=d.viewBox;e.bind();for(var j=0;2>j;++j){var k=f[j],l=f[j+2],m=l-k,n=.5*(g[j+2]+g[j]),o=g[j+2]-g[j],p=i[j],q=i[j+2],r=q-p,s=h[j],t=h[j+2],u=t-s;b[j]=2*m/o*r/u,a[j]=2*(k-n)/o*r/u}c[1]=2*d.pixelRatio/(h[3]-h[1]),c[0]=c[1]*(h[3]-h[1])/(h[2]-h[0]),e.uniforms.dataScale=b,e.uniforms.dataShift=a,e.uniforms.textScale=c,this.vbo.bind(),e.attributes.textCoordinate.pointer()}}(),k.update=function(a){var b,c,d,e,f,g=[],i=a.ticks,j=a.bounds;for(f=0;2>f;++f){var k=[Math.floor(g.length/3)],l=[-(1/0)],m=i[f];for(b=0;b<m.length;++b){var n=m[b],o=n.x,p=n.text,q=n.font||"sans-serif";e=n.fontSize||12;for(var r=1/(j[f+2]-j[f]),s=j[f],t=p.split("\n"),u=0;u<t.length;u++)for(d=h(q,t[u]).data,c=0;c<d.length;c+=2)g.push(d[c]*e,-d[c+1]*e-u*e*1.2,(o-s)*r);k.push(Math.floor(g.length/3)),l.push(o)}this.tickOffset[f]=k,this.tickX[f]=l}for(f=0;2>f;++f){for(this.labelOffset[f]=Math.floor(g.length/3),d=h(a.labelFont[f],a.labels[f],{textAlign:"center"}).data,e=a.labelSize[f],b=0;b<d.length;b+=2)g.push(d[b]*e,-d[b+1]*e,0);this.labelCount[f]=Math.floor(g.length/3)-this.labelOffset[f]}for(this.titleOffset=Math.floor(g.length/3),d=h(a.titleFont,a.title).data,e=a.titleSize,b=0;b<d.length;b+=2)g.push(d[b]*e,-d[b+1]*e,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},k.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":210,"binary-search-bounds":212,"gl-buffer":157,"gl-shader":213,"text-cache":541}],212:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85}],213:[function(a,b,c){"use strict";function d(a){this.gl=a,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function e(a,b){return a.name<b.name?-1:1}function f(a,b,c,e,f){var g=new d(a);return g.update(b,c,e,f),g}var g=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),i=a("./lib/reflect"),j=a("./lib/shader-cache"),k=a("./lib/runtime-reflect"),l=a("./lib/GLError"),m=d.prototype;m.bind=function(){this.program||this._relink();var a,b=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),c=this.gl.lastAttribCount;if(b>c)for(a=c;b>a;a++)this.gl.enableVertexAttribArray(a);else if(c>b)for(a=b;c>a;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=b,this.gl.useProgram(this.program)},m.dispose=function(){for(var a=this.gl.lastAttribCount,b=0;a>b;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},m.update=function(a,b,c,d){function f(){n.program=j.program(o,n._vref,n._fref,v,w);for(var a=0;a<c.length;++a)C[a]=o.getUniformLocation(n.program,c[a].name)}if(!b||1===arguments.length){var m=a;a=m.vertex,b=m.fragment,c=m.uniforms,d=m.attributes}var n=this,o=n.gl,p=n._vref;n._vref=j.shader(o,o.VERTEX_SHADER,a),p&&p.dispose(),n.vertShader=n._vref.shader;var q=this._fref;if(n._fref=j.shader(o,o.FRAGMENT_SHADER,b),q&&q.dispose(),n.fragShader=n._fref.shader,!c||!d){var r=o.createProgram();if(o.attachShader(r,n.fragShader),o.attachShader(r,n.vertShader),o.linkProgram(r),!o.getProgramParameter(r,o.LINK_STATUS)){var s=o.getProgramInfoLog(r);throw new l(s,"Error linking program:"+s)}c=c||k.uniforms(o,r),d=d||k.attributes(o,r),o.deleteProgram(r)}d=d.slice(),d.sort(e);var t,u=[],v=[],w=[];for(t=0;t<d.length;++t){var x=d[t];if(x.type.indexOf("mat")>=0){for(var y=0|x.type.charAt(x.type.length-1),z=new Array(y),A=0;y>A;++A)z[A]=w.length,v.push(x.name+"["+A+"]"),"number"==typeof x.location?w.push(x.location+A):Array.isArray(x.location)&&x.location.length===y&&"number"==typeof x.location[A]?w.push(0|x.location[A]):w.push(-1);u.push({name:x.name,type:x.type,locations:z})}else u.push({name:x.name,type:x.type,locations:[w.length]}),v.push(x.name),"number"==typeof x.location?w.push(0|x.location):w.push(-1)}var B=0;for(t=0;t<w.length;++t)if(w[t]<0){for(;w.indexOf(B)>=0;)B+=1;w[t]=B}var C=new Array(c.length);f(),n._relink=f,n.types={uniforms:i(c),attributes:i(d)},n.attributes=h(o,n,u,w),Object.defineProperty(n,"uniforms",g(o,n,c,C))},b.exports=f},{"./lib/GLError":214,"./lib/create-attributes":215,"./lib/create-uniforms":216,"./lib/reflect":217,"./lib/runtime-reflect":218,"./lib/shader-cache":219}],214:[function(a,b,c){function d(a,b,c){this.shortMessage=b||"",this.longMessage=c||"",this.rawError=a||"",this.message="gl-shader: "+(b||a||"")+(c?"\n"+c:""),this.stack=(new Error).stack}d.prototype=new Error,d.prototype.name="GLError",d.prototype.constructor=d,b.exports=d},{}],215:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._gl=a,this._wrapper=b,this._index=c,this._locations=d,this._dimension=e,this._constFunc=f}function e(a,b,c,e,f,g,h){for(var i=["gl","v"],j=[],k=0;f>k;++k)i.push("x"+k),j.push("x"+k);i.push("if(x0.length===void 0){return gl.vertexAttrib"+f+"f(v,"+j.join()+")}else{return gl.vertexAttrib"+f+"fv(v,x0)}");var l=Function.apply(null,i),m=new d(a,b,c,e,f,l);Object.defineProperty(g,h,{set:function(b){return a.disableVertexAttribArray(e[c]),l(a,e[c],b),b},get:function(){return m},enumerable:!0})}function f(a,b,c,d,f,g,h){for(var i=new Array(f),j=new Array(f),k=0;f>k;++k)e(a,b,c[k],d,f,i,k),j[k]=i[k];Object.defineProperty(i,"location",{set:function(a){if(Array.isArray(a))for(var b=0;f>b;++b)j[b].location=a[b];else for(var b=0;f>b;++b)j[b].location=a+b;return a},get:function(){for(var a=new Array(f),b=0;f>b;++b)a[b]=d[c[b]];return a},enumerable:!0}),i.pointer=function(b,e,g,h){b=b||a.FLOAT,e=!!e,g=g||f*f,h=h||0;for(var i=0;f>i;++i){var j=d[c[i]];a.vertexAttribPointer(j,f,b,e,g,h+i*f),a.enableVertexAttribArray(j)}};var l=new Array(f),m=a["vertexAttrib"+f+"fv"];Object.defineProperty(g,h,{set:function(b){for(var e=0;f>e;++e){var g=d[c[e]];if(a.disableVertexAttribArray(g),Array.isArray(b[0]))m.call(a,g,b[e]);else{for(var h=0;f>h;++h)l[h]=b[f*e+h];m.call(a,g,l)}}return b},get:function(){return i},enumerable:!0})}function g(a,b,c,d){for(var g={},i=0,j=c.length;j>i;++i){var k=c[i],l=k.name,m=k.type,n=k.locations;switch(m){case"bool":case"int":case"float":e(a,b,n[0],d,1,g,l);break;default:if(m.indexOf("vec")>=0){var o=m.charCodeAt(m.length-1)-48;if(2>o||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);e(a,b,n[0],d,o,g,l)}else{if(!(m.indexOf("mat")>=0))throw new h("","Unknown data type for attribute "+l+": "+m);var o=m.charCodeAt(m.length-1)-48;if(2>o||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);f(a,b,n,d,o,g,l)}}}return g}b.exports=g;var h=a("./GLError"),i=d.prototype;i.pointer=function(a,b,c,d){var e=this,f=e._gl,g=e._locations[e._index];f.vertexAttribPointer(g,e._dimension,a||f.FLOAT,!!b,c||0,d||0),f.enableVertexAttribArray(g)},i.set=function(a,b,c,d){return this._constFunc(this._locations[this._index],a,b,c,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(a){return a!==this._locations[this._index]&&(this._locations[this._index]=0|a,this._wrapper.program=null),0|a}})},{"./GLError":214}],216:[function(a,b,c){"use strict";function d(a){var b=new Function("y","return function(){return y}");return b(a)}function e(a,b){for(var c=new Array(a),d=0;a>d;++d)c[d]=b;return c}function f(a,b,c,f){function i(c){var d=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+c+"])}");return d(a,b,f)}function j(a,b,c){switch(c){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+b+"],obj"+a+")";case"float":return"gl.uniform1f(locations["+b+"],obj"+a+")";default:var d=c.indexOf("vec");if(!(d>=0&&1>=d&&c.length===4+d)){if(0===c.indexOf("mat")&&4===c.length){var e=c.charCodeAt(c.length-1)-48;if(2>e||e>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+e+"fv(locations["+b+"],false,obj"+a+")"}throw new h("","Unknown uniform data type for "+name+": "+c)}var e=c.charCodeAt(c.length-1)-48;if(2>e||e>4)throw new h("","Invalid data type");switch(c.charAt(0)){case"b":case"i":return"gl.uniform"+e+"iv(locations["+b+"],obj"+a+")";case"v":return"gl.uniform"+e+"fv(locations["+b+"],obj"+a+")";default:throw new h("","Unrecognized data type for vector "+name+": "+c)}}}function k(a,b){if("object"!=typeof b)return[[a,b]];var c=[];for(var d in b){var e=b[d],f=a;f+=parseInt(d)+""===d?"["+d+"]":"."+d,"object"==typeof e?c.push.apply(c,k(f,e)):c.push([f,e])}return c}function l(b){for(var d=["return function updateProperty(obj){"],e=k("",b),g=0;g<e.length;++g){var h=e[g],i=h[0],l=h[1];f[l]&&d.push(j(i,l,c[l].type))}d.push("return obj}");var m=new Function("gl","locations",d.join("\n"));return m(a,f)}function m(a){switch(a){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var b=a.indexOf("vec");if(b>=0&&1>=b&&a.length===4+b){var c=a.charCodeAt(a.length-1)-48;if(2>c||c>4)throw new h("","Invalid data type");return"b"===a.charAt(0)?e(c,!1):e(c,0)}if(0===a.indexOf("mat")&&4===a.length){var c=a.charCodeAt(a.length-1)-48;if(2>c||c>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+a);return e(c*c,0)}throw new h("","Unknown uniform data type for "+name+": "+a)}}function n(a,b,e){if("object"==typeof e){var g=o(e);Object.defineProperty(a,b,{get:d(g),set:l(e),enumerable:!0,configurable:!1})}else f[e]?Object.defineProperty(a,b,{get:i(e),set:l(e),enumerable:!0,configurable:!1}):a[b]=m(c[e].type)}function o(a){var b;if(Array.isArray(a)){b=new Array(a.length);for(var c=0;c<a.length;++c)n(b,c,a[c])}else{b={};for(var d in a)n(b,d,a[d])}return b}var p=g(c,!0);return{get:d(o(p)),set:l(p),enumerable:!0,configurable:!0}}var g=a("./reflect"),h=a("./GLError");b.exports=f},{"./GLError":214,"./reflect":217}],217:[function(a,b,c){"use strict";function d(a,b){for(var c={},d=0;d<a.length;++d)for(var e=a[d].name,f=e.split("."),g=c,h=0;h<f.length;++h){var i=f[h].split("[");if(i.length>1){i[0]in g||(g[i[0]]=[]),g=g[i[0]];for(var j=1;j<i.length;++j){var k=parseInt(i[j]);
j<i.length-1||h<f.length-1?(k in g||(j<i.length-1?g[k]=[]:g[k]={}),g=g[k]):b?g[k]=d:g[k]=a[d].type}}else h<f.length-1?(i[0]in g||(g[i[0]]={}),g=g[i[0]]):b?g[i[0]]=d:g[i[0]]=a[d].type}return c}b.exports=d},{}],218:[function(a,b,c){"use strict";function d(a,b){if(!h){var c=Object.keys(g);h={};for(var d=0;d<c.length;++d){var e=c[d];h[a[e]]=g[e]}}return h[b]}function e(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),e=[],f=0;c>f;++f){var g=a.getActiveUniform(b,f);if(g){var h=d(a,g.type);if(g.size>1)for(var i=0;i<g.size;++i)e.push({name:g.name.replace("[0]","["+i+"]"),type:h});else e.push({name:g.name,type:h})}}return e}function f(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),e=[],f=0;c>f;++f){var g=a.getActiveAttrib(b,f);g&&e.push({name:g.name,type:d(a,g.type)})}return e}c.uniforms=e,c.attributes=f;var g={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},h=null},{}],219:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.id=a,this.src=b,this.type=c,this.shader=d,this.count=f,this.programs=[],this.cache=g}function e(a){this.gl=a,this.shaders=[{},{}],this.programs={}}function f(a,b,c){var d=a.createShader(b);if(a.shaderSource(d,c),a.compileShader(d),!a.getShaderParameter(d,a.COMPILE_STATUS)){var e=a.getShaderInfoLog(d);try{var f=l(e,c,b)}catch(g){throw console.warn("Failed to format compiler error: "+g),new k(e,"Error compiling shader:\n"+e)}throw new k(e,f["short"],f["long"])}return d}function g(a,b,c,d,e){var f=a.createProgram();a.attachShader(f,b),a.attachShader(f,c);for(var g=0;g<d.length;++g)a.bindAttribLocation(f,e[g],d[g]);if(a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS)){var h=a.getProgramInfoLog(f);throw new k(h,"Error linking program: "+h)}return f}function h(a){var b=n.get(a);return b||(b=new e(a),n.set(a,b)),b}function i(a,b,c){return h(a).getShaderReference(b,c)}function j(a,b,c,d,e){return h(a).getProgram(b,c,d,e)}c.shader=i,c.program=j;var k=a("./GLError"),l=a("gl-format-compiler-error"),m="undefined"==typeof WeakMap?a("weakmap-shim"):WeakMap,n=new m,o=0;d.prototype.dispose=function(){if(0===--this.count){for(var a=this.cache,b=a.gl,c=this.programs,d=0,e=c.length;e>d;++d){var f=a.programs[c[d]];f&&(delete a.programs[d],b.deleteProgram(f))}b.deleteShader(this.shader),delete a.shaders[this.type===b.FRAGMENT_SHADER|0][this.src]}};var p=e.prototype;p.getShaderReference=function(a,b){var c=this.gl,e=this.shaders[a===c.FRAGMENT_SHADER|0],g=e[b];if(g&&c.isShader(g.shader))g.count+=1;else{var h=f(c,a,b);g=e[b]=new d(o++,b,a,h,[],1,this)}return g},p.getProgram=function(a,b,c,d){var e=[a.id,b.id,c.join(":"),d.join(":")].join("@"),f=this.programs[e];return f&&this.gl.isProgram(f)||(this.programs[e]=f=g(this.gl,a.shader,b.shader,c,d),a.programs.push(e),b.programs.push(e)),f}},{"./GLError":214,"gl-format-compiler-error":166,"weakmap-shim":571}],220:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.pickBuffer=b,this.screenBox=[0,0,a.drawingBufferWidth,a.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-(1/0),-(1/0)],this["static"]=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function e(a){for(var b=a.slice(),c=0;c<b.length;++c)b[c]=b[c].slice();return b}function f(a,b){return a.x-b.x}function g(a){var b=a.gl,c=h(b,[b.drawingBufferWidth,b.drawingBufferHeight]),e=new d(b,c);return e.grid=i(e),e.text=j(e),e.line=k(e),e.box=l(e),e.update(a),e}b.exports=g;var h=a("gl-select-static"),i=a("./lib/grid"),j=a("./lib/text"),k=a("./lib/line"),l=a("./lib/box"),m=d.prototype;m.setDirty=function(){this.dirty=this.pickDirty=!0},m.setOverlayDirty=function(){this.dirty=!0},m.nextDepthValue=function(){return this._depthCounter++/65536},m.draw=function(){return function(){var a=this.gl,b=this.screenBox,c=this.viewBox,d=this.dataBox,e=this.pixelRatio,f=this.grid,g=this.line,h=this.text,i=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),a.disable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.depthMask(!1),a.enable(a.BLEND),a.blendEquation(a.FUNC_ADD,a.FUNC_ADD),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),this.borderColor){a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);var j=this.borderColor;a.clearColor(j[0]*j[3],j[1]*j[3],j[2]*j[3],j[3]),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)}a.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),a.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);var k=this.backgroundColor;a.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),a.clear(a.COLOR_BUFFER_BIT),f.draw();var l=this.zeroLineEnable,m=this.zeroLineColor,n=this.zeroLineWidth;if(l[0]||l[1]){g.bind();for(var o=0;2>o;++o)if(l[o]&&d[o]<=0&&d[o+2]>=0){var p=b[o]-d[o]*(b[o+2]-b[o])/(d[o+2]-d[o]);0===o?g.drawLine(p,b[1],p,b[3],n[o],m[o]):g.drawLine(b[0],p,b[2],p,n[o],m[o])}}for(var o=0;o<i.length;++o)i[o].draw();a.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]),a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.grid.drawTickMarks(),g.bind();var q=this.borderLineEnable,r=this.borderLineWidth,s=this.borderLineColor;q[1]&&g.drawLine(c[0],c[1]-.5*r[1]*e,c[0],c[3]+.5*r[3]*e,r[1],s[1]),q[0]&&g.drawLine(c[0]-.5*r[0]*e,c[1],c[2]+.5*r[2]*e,c[1],r[0],s[0]),q[3]&&g.drawLine(c[2],c[1]-.5*r[1]*e,c[2],c[3]+.5*r[3]*e,r[3],s[3]),q[2]&&g.drawLine(c[0]-.5*r[0]*e,c[3],c[2]+.5*r[2]*e,c[3],r[2],s[2]),h.bind();for(var o=0;2>o;++o)h.drawTicks(o);this.titleEnable&&h.drawTitle();for(var t=this.overlays,o=0;o<t.length;++o)t[o].draw();a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.depthMask(!0)}}}(),m.drawPick=function(){return function(){if(!this["static"]){var a=this.pickBuffer;this.gl;this._pickTimeout=null,a.begin();for(var b=1,c=this.objects,d=0;d<c.length;++d)b=c[d].drawPick(b);a.end()}}}(),m.pick=function(){return function(a,b){if(!this["static"]){var c=this.pixelRatio,d=this.pickPixelRatio,e=this.viewBox,f=0|Math.round((a-e[0]/c)*d),g=0|Math.round((b-e[1]/c)*d),h=this.pickBuffer.query(f,g,this.pickRadius);if(!h)return null;for(var i=h.id+(h.value[0]<<8)+(h.value[1]<<16)+(h.value[2]<<24),j=this.objects,k=0;k<j.length;++k){var l=j[k].pick(f,g,i);if(l)return l}return null}}}(),m.setScreenBox=function(a){var b=this.screenBox,c=this.pixelRatio;b[0]=0|Math.round(a[0]*c),b[1]=0|Math.round(a[1]*c),b[2]=0|Math.round(a[2]*c),b[3]=0|Math.round(a[3]*c),this.setDirty()},m.setDataBox=function(a){var b=this.dataBox,c=b[0]!==a[0]||b[1]!==a[1]||b[2]!==a[2]||b[3]!==a[3];c&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],this.setDirty())},m.setViewBox=function(a){var b=this.pixelRatio,c=this.viewBox;c[0]=0|Math.round(a[0]*b),c[1]=0|Math.round(a[1]*b),c[2]=0|Math.round(a[2]*b),c[3]=0|Math.round(a[3]*b);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((a[2]-a[0])*d),0|Math.round((a[3]-a[1])*d)],this.setDirty()},m.update=function(a){a=a||{};var b=this.gl;this.pixelRatio=a.pixelRatio||1;var c=this.pixelRatio;this.pickPixelRatio=Math.max(c,1),this.setScreenBox(a.screenBox||[0,0,b.drawingBufferWidth/c,b.drawingBufferHeight/c]);this.screenBox;this.setViewBox(a.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/c,.125*(this.screenBox[3]-this.screenBox[1])/c,.875*(this.screenBox[2]-this.screenBox[0])/c,.875*(this.screenBox[3]-this.screenBox[1])/c]);var d=this.viewBox,g=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(a.dataBox||[-10,-10/g,10,10/g]),this.borderColor=a.borderColor!==!1?(a.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(a.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(a.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(a.gridLineWidth||[1,1]).slice(),this.gridLineColor=e(a.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(a.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(a.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=e(a.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(a.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(a.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=e(a.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(a.titleCenter||[.5*(d[0]+d[2])/c,(d[3]+120)/c]).slice(),this.titleEnable=!("titleEnable"in a&&!a.titleEnable),this.titleAngle=a.titleAngle||0,this.titleColor=(a.titleColor||[0,0,0,1]).slice(),this.labelPad=(a.labelPad||[15,15,15,15]).slice(),this.labelAngle=(a.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(a.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=e(a.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(a.tickPad||[15,15,15,15]).slice(),this.tickAngle=(a.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(a.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=e(a.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(a.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(a.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=e(a.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var h=a.ticks||[[],[]],i=this._tickBounds;i[0]=i[1]=1/0,i[2]=i[3]=-(1/0);for(var j=0;2>j;++j){var k=h[j].slice(0);0!==k.length&&(k.sort(f),i[j]=Math.min(i[j],k[0].x),i[j+2]=Math.max(i[j+2],k[k.length-1].x))}this.grid.update({bounds:i,ticks:h}),this.text.update({bounds:i,ticks:h,labels:a.labels||["x","y"],labelSize:a.labelSize||[12,12],labelFont:a.labelFont||["sans-serif","sans-serif"],title:a.title||"",titleSize:a.titleSize||18,titleFont:a.titleFont||"sans-serif"}),this["static"]=!!a["static"],this.setDirty()},m.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var a=this.objects.length-1;a>=0;--a)this.objects[a].dispose();this.objects.length=0;for(var a=this.overlays.length-1;a>=0;--a)this.overlays[a].dispose();this.overlays.length=0,this.gl=null},m.addObject=function(a){this.objects.indexOf(a)<0&&(this.objects.push(a),this.setDirty())},m.removeObject=function(a){for(var b=this.objects,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setDirty();break}},m.addOverlay=function(a){this.overlays.indexOf(a)<0&&(this.overlays.push(a),this.setOverlayDirty())},m.removeOverlay=function(a){for(var b=this.overlays,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setOverlayDirty();break}}},{"./lib/box":207,"./lib/grid":208,"./lib/line":209,"./lib/text":211,"gl-select-static":255}],221:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec2"}])}},{"gl-shader":256}],222:[function(a,b,c){"use strict";function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function e(a,b){var c=null;try{c=a.getContext("webgl",b),c||(c=a.getContext("experimental-webgl",b))}catch(d){return null}return c}function f(a){var b=Math.round(Math.log(Math.abs(a))/Math.log(10));if(0>b){var c=Math.round(Math.pow(10,-b));return Math.ceil(a*c)/c}if(b>0){var c=Math.round(Math.pow(10,b));return Math.ceil(a/c)*c}return Math.ceil(a)}function g(a){return"boolean"==typeof a?a:!0}function h(a){function b(){if(!w&&T.autoResize){var a=x.parentNode,b=1,c=1;a&&a!==document.body?(b=a.clientWidth,c=a.clientHeight):(b=window.innerWidth,c=window.innerHeight);var d=0|Math.ceil(b*T.pixelRatio),e=0|Math.ceil(c*T.pixelRatio);if(d!==x.width||e!==x.height){x.width=d,x.height=e;var f=x.style;f.position=f.position||"absolute",f.left="0px",f.top="0px",f.width=b+"px",f.height=c+"px",N=!0}}}function c(){for(var a=J.length,b=M.length,c=0;b>c;++c)L[c]=0;a:for(var c=0;a>c;++c){var d=J[c],e=d.pickSlots;if(e){for(var f=0;b>f;++f)if(L[f]+e<255){K[c]=f,d.setPickBase(L[f]+1),L[f]+=e;continue a}var g=m(z,S);K[c]=b,M.push(g),L.push(e),d.setPickBase(1),b+=1}else K[c]=-1}for(;b>0&&0===L[b-1];)L.pop(),M.pop().dispose()}function h(){return T.contextLost?!0:void(z.isContextLost()&&(T.contextLost=!0,T.mouseListener.enabled=!1,T.selection.object=null,T.oncontextloss&&T.oncontextloss()))}function t(){if(!h()){z.colorMask(!0,!0,!0,!0),z.depthMask(!0),z.disable(z.BLEND),z.enable(z.DEPTH_TEST);for(var a=J.length,b=M.length,c=0;b>c;++c){var d=M[c];d.shape=U,d.begin();for(var e=0;a>e;++e)if(K[e]===c){var f=J[e];f.drawPick&&(f.pixelRatio=1,f.drawPick(R))}d.end()}}}function u(){if(!h()){b();var a=T.camera.tick();R.view=T.camera.matrix,N=N||a,O=O||a,G.pixelRatio=T.pixelRatio,I.pixelRatio=T.pixelRatio;var c=J.length,d=X[0],e=X[1];d[0]=d[1]=d[2]=1/0,e[0]=e[1]=e[2]=-(1/0);for(var g=0;c>g;++g){var i=J[g];i.pixelRatio=T.pixelRatio,i.axes=T.axes,N=N||!!i.dirty,O=O||!!i.dirty;var j=i.bounds;if(j)for(var l=j[0],m=j[1],n=0;3>n;++n)d[n]=Math.min(d[n],l[n]),e[n]=Math.max(e[n],m[n])}var p=T.bounds;if(T.autoBounds)for(var n=0;3>n;++n){if(e[n]<d[n])d[n]=-1,e[n]=1;else{d[n]===e[n]&&(d[n]-=1,e[n]+=1);var r=.05*(e[n]-d[n]);d[n]=d[n]-r,e[n]=e[n]+r}p[0][n]=d[n],p[1][n]=e[n]}for(var s=!1,n=0;3>n;++n)s=s||Y[0][n]!==p[0][n]||Y[1][n]!==p[1][n],Y[0][n]=p[0][n],Y[1][n]=p[1][n];if(O=O||s,N=N||s){if(s){for(var u=[0,0,0],g=0;3>g;++g)u[g]=f((p[1][g]-p[0][g])/10);G.autoTicks?G.update({bounds:p,tickSpacing:u}):G.update({bounds:p})}var v=z.drawingBufferWidth,w=z.drawingBufferHeight;S[0]=v,S[1]=w,U[0]=0|Math.max(v/T.pixelRatio,1),U[1]=0|Math.max(w/T.pixelRatio,1),q(P,T.fovy,v/w,T.zNear,T.zFar);for(var g=0;16>g;++g)Q[g]=0;Q[15]=1;for(var x=0,g=0;3>g;++g)x=Math.max(x,p[1][g]-p[0][g]);for(var g=0;3>g;++g)T.autoScale?Q[5*g]=T.aspect[g]/(p[1][g]-p[0][g]):Q[5*g]=1/x,T.autoCenter&&(Q[12+g]=.5*-Q[5*g]*(p[0][g]+p[1][g]));for(var g=0;c>g;++g){var i=J[g];i.axesBounds=p,T.clipToBounds&&(i.clipBounds=p)}B.object&&(T.snapToData?I.position=B.dataCoordinate:I.position=B.dataPosition,I.bounds=p),O&&(O=!1,t()),T.axesPixels=k(T.axes,R,v,w),T.onrender&&T.onrender(),z.bindFramebuffer(z.FRAMEBUFFER,null),z.viewport(0,0,v,w);var y=T.clearColor;z.clearColor(y[0],y[1],y[2],y[3]),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),z.depthMask(!0),z.colorMask(!0,!0,!0,!0),z.enable(z.DEPTH_TEST),z.depthFunc(z.LEQUAL),z.disable(z.BLEND),z.disable(z.CULL_FACE);var A=!1;G.enable&&(A=A||G.isTransparent(),G.draw(R)),I.axes=G,B.object&&I.draw(R),z.disable(z.CULL_FACE);for(var g=0;c>g;++g){var i=J[g];i.axes=G,i.pixelRatio=T.pixelRatio,i.isOpaque&&i.isOpaque()&&i.draw(R),i.isTransparent&&i.isTransparent()&&(A=!0)}if(A){C.shape=S,C.bind(),z.clear(z.DEPTH_BUFFER_BIT),z.colorMask(!1,!1,!1,!1),z.depthMask(!0),z.depthFunc(z.LESS),G.enable&&G.isTransparent()&&G.drawTransparent(R);for(var g=0;c>g;++g){var i=J[g];i.isOpaque&&i.isOpaque()&&i.draw(R)}z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.ONE,z.ONE_MINUS_SRC_ALPHA),z.colorMask(!0,!0,!0,!0),z.depthMask(!1),z.clearColor(0,0,0,0),z.clear(z.COLOR_BUFFER_BIT),G.isTransparent()&&G.drawTransparent(R);for(var g=0;c>g;++g){var i=J[g];i.isTransparent&&i.isTransparent()&&i.drawTransparent(R)}z.bindFramebuffer(z.FRAMEBUFFER,null),z.blendFunc(z.ONE,z.ONE_MINUS_SRC_ALPHA),z.disable(z.DEPTH_TEST),D.bind(),C.color[0].bind(0),D.uniforms.accumBuffer=0,o(z),z.disable(z.BLEND)}N=!1;for(var g=0;c>g;++g)J[g].dirty=!1}}}function v(){w||T.contextLost||(requestAnimationFrame(v),u())}a=a||{};var w=!1,x=(a.pixelRatio||parseFloat(window.devicePixelRatio),a.canvas);if(!x)if(x=document.createElement("canvas"),a.container){var y=a.container;y.appendChild(x)}else document.body.appendChild(x);var z=a.gl;if(z||(z=e(x,a.glOptions||{premultipliedAlpha:!0,antialias:!0})),!z)throw new Error("webgl not supported");var A=a.bounds||[[-10,-10,-10],[10,10,10]],B=new d,C=n(z,[z.drawingBufferWidth,z.drawingBufferHeight],{preferFloat:!s}),D=r(z),E=a.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},F=a.axes||{},G=j(z,F);G.enable=!F.disable;var H=a.spikes||{},I=l(z,H),J=[],K=[],L=[],M=[],N=!0,O=!0,P=new Array(16),Q=new Array(16),R={view:null,projection:P,model:Q},O=!0,S=[z.drawingBufferWidth,z.drawingBufferHeight],T={gl:z,contextLost:!1,pixelRatio:a.pixelRatio||parseFloat(window.devicePixelRatio),canvas:x,selection:B,camera:i(x,E),axes:G,axesPixels:null,spikes:I,bounds:A,objects:J,shape:S,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||10,zNear:a.zNear||.01,zFar:a.zFar||1e3,fovy:a.fovy||Math.PI/4,clearColor:a.clearColor||[0,0,0,0],autoResize:g(a.autoResize),autoBounds:g(a.autoBounds),autoScale:!!a.autoScale,autoCenter:g(a.autoCenter),clipToBounds:g(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:R,oncontextloss:null,mouseListener:null},U=[z.drawingBufferWidth/T.pixelRatio|0,z.drawingBufferHeight/T.pixelRatio|0];T.autoResize&&b(),window.addEventListener("resize",b),T.update=function(a){w||(a=a||{},N=!0,O=!0)},T.add=function(a){w||(a.axes=G,J.push(a),K.push(-1),N=!0,O=!0,c())},T.remove=function(a){if(!w){var b=J.indexOf(a);0>b||(J.splice(b,1),K.pop(),N=!0,O=!0,c())}},T.dispose=function(){if(!w&&(w=!0,window.removeEventListener("resize",b),x.removeEventListener("webglcontextlost",h),T.mouseListener.enabled=!1,!T.contextLost)){G.dispose(),I.dispose();for(var a=0;a<J.length;++a)J[a].dispose();C.dispose();for(var a=0;a<M.length;++a)M[a].dispose();D.dispose(),z=null,G=null,I=null,J=[]}};var V=!1,W=0;T.mouseListener=p(x,function(a,b,c){if(!w){var d=M.length,e=J.length,f=B.object;B.distance=1/0,B.mouse[0]=b,B.mouse[1]=c,B.object=null,B.screen=null,B.dataCoordinate=B.dataPosition=null;var g=!1;if(a&&W)V=!0;else{V&&(O=!0),V=!1;for(var h=0;d>h;++h){var i=M[h].query(b,U[1]-c-1,T.pickRadius);if(i){if(i.distance>B.distance)continue;for(var j=0;e>j;++j){var k=J[j];if(K[j]===h){var l=k.pick(i);l&&(B.buttons=a,B.screen=i.coord,B.distance=i.distance,B.object=k,B.index=l.distance,B.dataPosition=l.position,B.dataCoordinate=l.dataCoordinate,B.data=l,g=!0)}}}}}f&&f!==B.object&&(f.highlight&&f.highlight(null),N=!0),B.object&&(B.object.highlight&&B.object.highlight(B.data),N=!0),g=g||B.object!==f,g&&T.onselect&&T.onselect(B),1&a&&!(1&W)&&T.onclick&&T.onclick(B),W=a}}),x.addEventListener("webglcontextlost",h);var X=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],Y=[X[0].slice(),X[1].slice()];return v(),T.redraw=function(){w||(N=!0,u())},T}b.exports=h;var i=a("3d-view-controls"),j=a("gl-axes3d"),k=a("gl-axes3d/properties"),l=a("gl-spikes3d"),m=a("gl-select-static"),n=a("gl-fbo"),o=a("a-big-triangle"),p=a("mouse-change"),q=a("gl-mat4/perspective"),r=a("./lib/shader"),s=a("is-mobile")()},{"./lib/shader":221,"3d-view-controls":37,"a-big-triangle":40,"gl-axes3d":149,"gl-axes3d/properties":156,"gl-fbo":165,"gl-mat4/perspective":185,"gl-select-static":255,"gl-spikes3d":265,"is-mobile":297,"mouse-change":453}],223:[function(a,b,c){c.pointVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}",c.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n",c.pickVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n",c.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],224:[function(a,b,c){arguments[4][213][0].apply(c,arguments)},{"./lib/GLError":225,"./lib/create-attributes":226,"./lib/create-uniforms":227,"./lib/reflect":228,"./lib/runtime-reflect":229,"./lib/shader-cache":230,dup:213}],225:[function(a,b,c){arguments[4][214][0].apply(c,arguments)},{dup:214}],226:[function(a,b,c){arguments[4][215][0].apply(c,arguments)},{"./GLError":225,dup:215}],227:[function(a,b,c){arguments[4][216][0].apply(c,arguments)},{"./GLError":225,"./reflect":228,dup:216}],228:[function(a,b,c){arguments[4][217][0].apply(c,arguments)},{dup:217}],229:[function(a,b,c){arguments[4][218][0].apply(c,arguments)},{dup:218}],230:[function(a,b,c){arguments[4][219][0].apply(c,arguments)},{"./GLError":225,dup:219,"gl-format-compiler-error":166,"weakmap-shim":571}],231:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.plot=a,this.offsetBuffer=b,this.pickBuffer=c,this.shader=d,this.pickShader=e,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}function e(a,b){var c,d=0,e=a.length>>>1;for(c=0;e>c;c++){var f=a[2*c],g=a[2*c+1];f>=b[0]&&f<=b[2]&&g>=b[1]&&g<=b[3]&&d++}return d}function f(a,b){var c=a.gl,e=h(c),f=h(c),i=g(c,j.pointVertex,j.pointFragment),k=g(c,j.pickVertex,j.pickFragment),l=new d(a,e,f,i,k);return l.update(b),a.addObject(l),l}var g=a("gl-shader"),h=a("gl-buffer"),i=a("typedarray-pool"),j=a("./lib/shader");b.exports=f;var k=d.prototype;k.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},k.update=function(a){function b(b,c){return b in a?a[b]:c}var c;a=a||{},this.sizeMin=b("sizeMin",.5),this.sizeMax=b("sizeMax",20),this.color=b("color",[1,0,0,1]).slice(),this.areaRatio=b("areaRatio",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.blend=b("blend",!1);var d=a.positions.length>>>1,e=a.positions instanceof Float32Array,f=a.idToIndex instanceof Int32Array&&a.idToIndex.length>=d,g=a.positions,h=e?g:i.mallocFloat32(g.length),j=f?a.idToIndex:i.mallocInt32(d);if(e||h.set(g),!f)for(h.set(g),c=0;d>c;c++)j[c]=c;this.points=g,this.offsetBuffer.update(h),this.pickBuffer.update(j),e||i.free(h),f||i.free(j),this.pointCount=d,this.pickOffset=0},k.unifiedDraw=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(c){var d=void 0!==c,f=d?this.pickShader:this.shader,g=this.plot.gl,h=this.plot.dataBox;if(0===this.pointCount)return c;var i=h[2]-h[0],j=h[3]-h[1],k=e(this.points,h),l=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(k,.33333)));a[0]=2/i,a[4]=2/j,a[6]=-2*h[0]/i-1,a[7]=-2*h[1]/j-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=a,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=5>l,f.uniforms.pointSize=l,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(b[0]=255&c,b[1]=c>>8&255,b[2]=c>>16&255,b[3]=c>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(g.UNSIGNED_BYTE),f.uniforms.pickOffset=b,this.pickOffset=c);var m=g.getParameter(g.BLEND),n=g.getParameter(g.DITHER);return m&&!this.blend&&g.disable(g.BLEND),n&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),m&&!this.blend&&g.enable(g.BLEND),n&&g.enable(g.DITHER),c+this.pointCount}}(),k.draw=k.unifiedDraw,k.drawPick=k.unifiedDraw,k.pick=function(a,b,c){var d=this.pickOffset,e=this.pointCount;if(d>c||c>=d+e)return null;var f=c-d,g=this.points;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}}},{"./lib/shader":223,"gl-buffer":157,"gl-shader":224,"typedarray-pool":550}],232:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a}b.exports=d},{}],233:[function(a,b,c){"use strict";b.exports={vertex:"precision highp float;\n#define GLSLIFY 1\n\n\nvec4 computePosition_1_0(vec2 posHi, vec2 posLo, vec2 scHi, vec2 scLo, vec2 trHi, vec2 trLo) {\n  return vec4((posHi + trHi) * scHi\n  			//FIXME: this thingy does not give noticeable precision gain, need test\n            + (posLo + trLo) * scHi\n            + (posHi + trHi) * scLo\n            + (posLo + trLo) * scLo\n            , 0, 1);\n}\n\n\nattribute vec2 positionHi, positionLo;\nattribute float size, border;\nattribute vec2 char, color;\n\n//this is 64-bit form of scale and translate\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform float pixelRatio;\nuniform vec4 viewBox;\nuniform sampler2D palette;\n\nvarying vec4 charColor, borderColor;\nvarying vec2 charId;\nvarying vec2 pointCoord;\nvarying float pointSize;\nvarying float borderWidth;\n\n\nvoid main() {\n  charColor = texture2D(palette, vec2(color.x / 255., 0));\n  borderColor = texture2D(palette, vec2(color.y / 255., 0));\n\n  gl_PointSize = size * pixelRatio;\n  pointSize = size * pixelRatio;\n\n  charId = char;\n  borderWidth = border;\n\n  gl_Position = computePosition_1_0(\n    positionHi, positionLo,\n    scaleHi, scaleLo,\n    translateHi, translateLo);\n\n  pointCoord = viewBox.xy + (viewBox.zw - viewBox.xy) * (gl_Position.xy * .5 + .5);\n}\n",fragment:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D chars;\nuniform vec2 charsShape;\nuniform float charsStep, pixelRatio, charOffset;\n\nvarying vec4 borderColor;\nvarying vec4 charColor;\nvarying vec2 charId;\nvarying vec2 pointCoord;\nvarying float pointSize;\nvarying float borderWidth;\n\nvoid main() {\n	vec2 pointUV = (pointCoord - gl_FragCoord.xy + pointSize * .5) / pointSize;\n	pointUV.x = 1. - pointUV.x;\n	vec2 texCoord = ((charId + pointUV) * charsStep) / charsShape;\n	float dist = texture2D(chars, texCoord).r;\n\n	//max-distance alpha\n	if (dist < 1e-2)\n		discard;\n\n	float gamma = .0045 * charsStep / pointSize;\n\n    //null-border case\n 	if (borderWidth * borderColor.a == 0.) {\n		float charAmt = smoothstep(.748 - gamma, .748 + gamma, dist);\n		gl_FragColor = vec4(charColor.rgb, charAmt*charColor.a);\n		return;\n	}\n\n	float dif = 5. * pixelRatio * borderWidth / pointSize;\n	float borderLevel = .748 - dif * .5;\n	float charLevel = .748 + dif * .5;\n\n	float borderAmt = smoothstep(borderLevel - gamma, borderLevel + gamma, dist);\n	float charAmt = smoothstep(charLevel - gamma, charLevel + gamma, dist);\n\n	vec4 color = borderColor;\n	color.a *= borderAmt;\n\n	gl_FragColor = mix(color, charColor, charAmt);\n}\n",pickVertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute vec4 id;\nattribute float size;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform vec4 pickOffset;\nuniform float pixelRatio;\n\nvarying vec4 fragColor;\n\n\nvec4 computePosition_1_0(vec2 posHi, vec2 posLo, vec2 scHi, vec2 scLo, vec2 trHi, vec2 trLo) {\n  return vec4((posHi + trHi) * scHi\n  			//FIXME: this thingy does not give noticeable precision gain, need test\n            + (posLo + trLo) * scHi\n            + (posHi + trHi) * scLo\n            + (posLo + trLo) * scLo\n            , 0, 1);\n}\n\n\nvoid main() {\n  vec4 fragId = id + pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  fragColor = fragId / 255.0;\n\n  gl_PointSize = size * .25 * pixelRatio;\n\n  gl_Position = computePosition_1_0(\n    positionHi, positionLo,\n    scaleHi, scaleLo,\n    translateHi, translateLo);\n}\n",pickFragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}\n"}},{}],234:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85}],235:[function(a,b,c){arguments[4][213][0].apply(c,arguments)},{"./lib/GLError":236,"./lib/create-attributes":237,"./lib/create-uniforms":238,"./lib/reflect":239,"./lib/runtime-reflect":240,"./lib/shader-cache":241,dup:213}],236:[function(a,b,c){arguments[4][214][0].apply(c,arguments)},{dup:214}],237:[function(a,b,c){arguments[4][215][0].apply(c,arguments)},{"./GLError":236,dup:215}],238:[function(a,b,c){arguments[4][216][0].apply(c,arguments)},{"./GLError":236,"./reflect":239,dup:216}],239:[function(a,b,c){arguments[4][217][0].apply(c,arguments)},{dup:217}],240:[function(a,b,c){arguments[4][218][0].apply(c,arguments)},{dup:218}],241:[function(a,b,c){arguments[4][219][0].apply(c,arguments)},{"./GLError":236,dup:219,"gl-format-compiler-error":166,"weakmap-shim":571}],242:[function(a,b,c){"use strict";function d(a,b,c,d,f){4*m>=f?e(0,f-1,a,b,c,d):l(0,f-1,a,b,c,d)}function e(a,b,c,d,e,f){for(var g=a+1;b>=g;++g){for(var h=c[g],i=d[2*g],j=d[2*g+1],k=e[g],l=f[g],m=g;m>a;){var n=c[m-1],o=d[2*(m-1)];if((n-h||i-o)>=0)break;c[m]=n,d[2*m]=o,d[2*m+1]=d[2*m-1],e[m]=e[m-1],f[m]=f[m-1],m-=1}c[m]=h,d[2*m]=i,d[2*m+1]=j,e[m]=k,f[m]=l}}function f(a,b,c,d,e,f){var g=c[a],h=d[2*a],i=d[2*a+1],j=e[a],k=f[a];c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b],c[b]=g,d[2*b]=h,d[2*b+1]=i,e[b]=j,
f[b]=k}function g(a,b,c,d,e,f){c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b]}function h(a,b,c,d,e,f,g){var h=d[a],i=e[2*a],j=e[2*a+1],k=f[a],l=g[a];d[a]=d[b],e[2*a]=e[2*b],e[2*a+1]=e[2*b+1],f[a]=f[b],g[a]=g[b],d[b]=d[c],e[2*b]=e[2*c],e[2*b+1]=e[2*c+1],f[b]=f[c],g[b]=g[c],d[c]=h,e[2*c]=i,e[2*c+1]=j,f[c]=k,g[c]=l}function i(a,b,c,d,e,f,g,h,i,j,k){h[a]=h[b],i[2*a]=i[2*b],i[2*a+1]=i[2*b+1],j[a]=j[b],k[a]=k[b],h[b]=c,i[2*b]=d,i[2*b+1]=e,j[b]=f,k[b]=g}function j(a,b,c,d,e){return(c[a]-c[b]||d[2*b]-d[2*a]||e[a]-e[b])<0}function k(a,b,c,d,e,f,g,h){return(b-f[a]||g[2*a]-c||e-h[a])<0}function l(a,b,c,d,n,o){var p=(b-a+1)/6|0,q=a+p,r=b-p,s=a+b>>1,t=s-p,u=s+p,v=q,w=t,x=s,y=u,z=r,A=a+1,B=b-1,C=0;j(v,w,c,d,n,o)&&(C=v,v=w,w=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C),j(v,x,c,d,n,o)&&(C=v,v=x,x=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(v,y,c,d,n,o)&&(C=v,v=y,y=C),j(x,y,c,d,n,o)&&(C=x,x=y,y=C),j(w,z,c,d,n,o)&&(C=w,w=z,z=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C);var D=c[w],E=d[2*w],F=d[2*w+1],G=n[w],H=o[w],I=c[y],J=d[2*y],K=d[2*y+1],L=n[y],M=o[y],N=v,O=x,P=z,Q=q,R=s,S=r,T=c[N],U=c[O],V=c[P];c[Q]=T,c[R]=U,c[S]=V;for(var W=0;2>W;++W){var X=d[2*N+W],Y=d[2*O+W],Z=d[2*P+W];d[2*Q+W]=X,d[2*R+W]=Y,d[2*S+W]=Z}var $=n[N],_=n[O],aa=n[P];n[Q]=$,n[R]=_,n[S]=aa;var ba=o[N],ca=o[O],da=o[P];o[Q]=ba,o[R]=ca,o[S]=da,g(t,a,c,d,n,o),g(u,b,c,d,n,o);for(var ea=A;B>=ea;++ea)if(k(ea,D,E,F,G,c,d,n))ea!==A&&f(ea,A,c,d,n,o),++A;else if(!k(ea,I,J,K,L,c,d,n))for(;;){if(k(B,I,J,K,L,c,d,n)){k(B,D,E,F,G,c,d,n)?(h(ea,A,B,c,d,n,o),++A,--B):(f(ea,B,c,d,n,o),--B);break}if(--B<ea)break}i(a,A-1,D,E,F,G,H,c,d,n,o),i(b,B+1,I,J,K,L,M,c,d,n,o),m>=A-2-a?e(a,A-2,c,d,n,o):l(a,A-2,c,d,n,o),m>=b-(B+2)?e(B+2,b,c,d,n,o):l(B+2,b,c,d,n,o),m>=B-A?e(A,B,c,d,n,o):l(A,B,c,d,n,o)}b.exports=d;var m=32},{}],243:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){for(var i=c,j=c;d>j;++j){var k=a[2*j],l=a[2*j+1],m=b[j];k>=e&&g>=k&&l>=f&&h>=l&&(j===i?i+=1:(a[2*j]=a[2*i],a[2*j+1]=a[2*i+1],b[j]=b[i],a[2*i]=k,a[2*i+1]=l,b[i]=m,i+=1))}return i}function e(a,b,c){this.pixelSize=a,this.offset=b,this.count=c}function f(a,b,c,f){function i(e,f,g,h,j,k){var l=.5*g,m=h+1,n=j-h;c[v]=n,u[v++]=k;for(var o=0;2>o;++o)for(var p=0;2>p;++p){var q=e+o*l,r=f+p*l,s=d(a,b,m,j,q,r,q+l,r+l);if(s!==m){if(s-m>=Math.max(.9*n,32)){var t=j+h>>>1;i(q,r,l,m,t,k+1),m=t}i(q,r,l,m,s,k+1),m=s}}}var j=a.length>>>1;if(1>j)return[];for(var k=1/0,l=1/0,m=-(1/0),n=-(1/0),o=0;j>o;++o){var p=a[2*o],q=a[2*o+1];k=Math.min(k,p),m=Math.max(m,p),l=Math.min(l,q),n=Math.max(n,q),b[o]=o}k===m&&(m+=1+Math.abs(m)),l===n&&(n+=1+Math.abs(m));var r=1/(m-k),s=1/(n-l),t=Math.max(m-k,n-l);f=f||[0,0,0,0],f[0]=k,f[1]=l,f[2]=m,f[3]=n;var u=g.mallocInt32(j),v=0;i(k,l,t,0,j,0),h(u,a,b,c,j);for(var w=[],x=0,y=j,v=j-1;v>=0;--v){a[2*v]=(a[2*v]-k)*r,a[2*v+1]=(a[2*v+1]-l)*s;var z=u[v];z!==x&&(w.push(new e(t*Math.pow(.5,z),v+1,y-(v+1))),y=v+1,x=z)}return w.push(new e(t*Math.pow(.5,z+1),0,y)),g.free(u),w}var g=a("typedarray-pool"),h=a("./lib/sort");b.exports=f},{"./lib/sort":242,"typedarray-pool":550}],244:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){this.plot=a,this.shader=b,this.pickShader=c,this.positionBuffer=d,this.sizeBuffer=e,this.colorBuffer=f,this.idBuffer=g,this.charBuffer=h,this.pointCount=0,this.pickOffset=0,this.points=null,this.scales=[],this.xCoords=[],this.charCanvas=document.createElement("canvas"),this.charTexture=p(this.plot.gl,this.charCanvas),this.charStep=400,this.charFit=.255,this.snapThreshold=1e4,this.paletteTexture=p(this.plot.gl,[256,1])}function e(){var a=this.plot,b=a.viewBox,c=a.dataBox,d=a.pixelRatio,e=c[2]-c[0],f=c[3]-c[1],j=2/e,k=2/f,l=-c[0]-.5*e,m=-c[1]-.5*f;v[0]=j,w[0]=j-v[0],v[1]=k,w[1]=k-v[1],x[0]=l,y[0]=l-x[0],x[1]=m,y[1]=m-x[1];var n=b[2]-b[0],o=b[3]-b[1];g=Math.min(e/n,f/o),z[0]=2*d/n,z[1]=2*d/o,h=c[0],i=c[2]}function f(a,b){var c=a.gl,e=j(c,m.vertex,m.fragment),f=j(c,m.pickVertex,m.pickFragment),g=k(c),h=k(c),i=k(c),l=k(c),n=k(c),o=new d(a,e,f,g,h,i,l,n);return o.update(b),a.addObject(o),o}b.exports=f;var g,h,i,j=a("gl-shader"),k=a("gl-buffer"),l=a("typedarray-pool"),m=a("./lib/shaders"),n=a("snap-points-2d"),o=a("font-atlas-sdf"),p=a("gl-texture2d"),q=a("color-id"),r=a("ndarray"),s=a("clamp"),t=a("binary-search-bounds"),u=d.prototype,v=new Float32Array([0,0]),w=new Float32Array([0,0]),x=new Float32Array([0,0]),y=new Float32Array([0,0]),z=[0,0],A=[0,0,0,0];u.drawPick=function(a){var b=void 0!==a,c=this.plot,d=this.pointCount,f=d>this.snapThreshold;if(!d)return a;e.call(this);var j=c.gl,k=b?this.pickShader:this.shader,l=j.isEnabled(j.BLEND);if(k.bind(),b){this.pickOffset=a;for(var m=0;4>m;++m)A[m]=a>>8*m&255;k.uniforms.pickOffset=A,this.idBuffer.bind(),k.attributes.id.pointer(j.UNSIGNED_BYTE,!1)}else j.blendFuncSeparate(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA,j.ONE,j.ONE_MINUS_SRC_ALPHA),j.blendColor(0,0,0,1),l||j.enable(j.BLEND),this.colorBuffer.bind(),k.attributes.color.pointer(j.UNSIGNED_BYTE,!1),this.charBuffer.bind(),k.attributes["char"].pointer(j.UNSIGNED_BYTE,!1),k.uniforms.chars=this.charTexture.bind(0),k.uniforms.charsShape=[this.charCanvas.width,this.charCanvas.height],k.uniforms.charsStep=this.charStep,k.uniforms.palette=this.paletteTexture.bind(1);this.sizeBuffer.bind(),k.attributes.size.pointer(j.FLOAT,!1,8,0),b||k.attributes.border.pointer(j.FLOAT,!1,8,4),this.positionBuffer.bind(),k.attributes.positionHi.pointer(j.FLOAT,!1,16,0),k.attributes.positionLo.pointer(j.FLOAT,!1,16,8),k.uniforms.pixelRatio=c.pixelRatio,k.uniforms.scaleHi=v,k.uniforms.scaleLo=w,k.uniforms.translateHi=x,k.uniforms.translateLo=y,k.uniforms.viewBox=c.viewBox;var n=this.scales;if(f)for(var o=n.length-1;o>=0;o--){var p=n[o];if(!(p.pixelSize&&p.pixelSize<1.25*g&&o>1)){var q=p.offset,r=p.count+q,s=t.ge(this.xCoords,h,q,r-1),u=t.lt(this.xCoords,i,s,r-1)+1;u>s&&j.drawArrays(j.POINTS,s,u-s)}}else j.drawArrays(j.POINTS,0,d);return b?a+d:void(l?j.blendFunc(j.ONE,j.ONE_MINUS_SRC_ALPHA):j.disable(j.BLEND))},u.draw=u.drawPick,u.pick=function(a,b,c){var d=this.pickOffset,e=this.pointCount;if(d>c||c>=d+e)return null;var f=c-d,g=this.points;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}},u.update=function(a){a=a||{};var b=a.positions||[],c=a.colors||[],d=a.glyphs||[],e=a.sizes||[],f=a.borderWidths||[],g=a.borderColors||[],h=this.plot.gl,i=this.pointCount,j=i>this.snapThreshold;if(null!=a.positions){this.points=b,i=this.points.length/2,j=i>this.snapThreshold;var k=l.mallocFloat32(2*i),m=l.mallocFloat64(2*i),p=l.mallocUint32(i),t=l.mallocFloat32(4*i);m.set(this.points),j&&(this.i2idx&&l.free(this.i2idx),this.i2idx=l.mallocInt32(i),this.scales=n(m,this.i2idx,k)),this.pointCount=i;for(var u=0;i>u;++u){var v=j?this.i2idx[u]:u;p[u]=v;var w=b[2*v],x=b[2*v+1];t[4*u]=w,t[4*u+1]=x,t[4*u+2]=w-t[4*u],t[4*u+3]=x-t[4*u+1],this.xCoords[u]=w}this.idBuffer.update(p),this.positionBuffer.update(t),l.free(t),l.free(p),l.free(m),l.free(k)}for(var y=l.mallocFloat32(2*i),z=l.mallocUint8(2*i),A=l.mallocUint8(2*i),B={},C=[],D=[],E=[],u=0,F=i,G=0;F>u;++u){var H=[255*c[4*u],255*c[4*u+1],255*c[4*u+2],255*c[4*u+3]],I=q(H,!1);null==B[I]&&(B[I]=G++,D.push(H[0]),D.push(H[1]),D.push(H[2]),D.push(H[3])),C.push(I),g&&g.length&&(H=[255*g[4*u],255*g[4*u+1],255*g[4*u+2],255*g[4*u+3]],I=q(H,!1),null==B[I]&&(B[I]=G++,D.push(H[0]),D.push(H[1]),D.push(H[2]),D.push(H[3])),E.push(I))}for(var J={},u=0,F=i,G=0;F>u;u++){var K=d[u];null==J[K]&&(J[K]=G++)}for(var L=0,u=0,F=e.length;F>u;++u)e[u]>L&&(L=e[u]);var M=this.charStep;this.charStep=s(Math.ceil(4*L),128,768);var N=Object.keys(J),O=this.charStep,P=Math.floor(O/2),Q=h.getParameter(h.MAX_TEXTURE_SIZE),R=Q/O*(Q/O),S=Math.min(Q,O*N.length),T=Math.min(Q,O*Math.ceil(O*N.length/Q)),U=Math.floor(S/O);N.length>R&&console.warn("gl-scatter2d-fancy: number of characters is more than maximum texture size. Try reducing it."),this.chars&&this.chars+""==N+""&&this.charStep==M||(this.charCanvas=o({canvas:this.charCanvas,family:"sans-serif",size:P,shape:[S,T],step:[O,O],chars:N,align:!0,fit:this.charFit}),this.chars=N);for(var u=0;i>u;++u){var v=j?this.i2idx[u]:u,V=e[v],W=f[v];y[2*u]=2*V,y[2*u+1]=W;var I=C[v],X=B[I];z[2*u]=X;var Y=E[v],Z=B[Y];z[2*u+1]=Z;var K=d[v],$=J[K];A[2*u+1]=Math.floor($/U),A[2*u]=$%U}this.sizeBuffer.update(y),this.colorBuffer.update(z),this.charBuffer.update(A),this.charTexture.shape=[this.charCanvas.width,this.charCanvas.height],this.charCanvas&&this.charCanvas.width&&this.charTexture.setPixels(this.charCanvas),this.paletteTexture.setPixels(r(D.slice(0,1024),[256,1,4])),l.free(y),l.free(z),l.free(A)},u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.sizeBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.charBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":233,"binary-search-bounds":234,clamp:89,"color-id":93,"font-atlas-sdf":135,"gl-buffer":157,"gl-shader":235,"gl-texture2d":268,ndarray:468,"snap-points-2d":243,"typedarray-pool":550}],245:[function(a,b,c){c.pointVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute float weight;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform float pointSize, useWeight;\n\nvarying float fragWeight;\n\n\nvec4 pfx_1_0(vec2 scaleHi, vec2 scaleLo, vec2 translateHi, vec2 translateLo, vec2 positionHi, vec2 positionLo) {\n  return vec4((positionHi + translateHi) * scaleHi\n            + (positionLo + translateLo) * scaleHi\n            + (positionHi + translateHi) * scaleLo\n            + (positionLo + translateLo) * scaleLo, 0.0, 1.0);\n}\n\nvoid main() {\n  gl_Position = pfx_1_0(scaleHi, scaleLo, translateHi, translateLo, positionHi, positionLo);\n  gl_PointSize = pointSize;\n  fragWeight = mix(1.0, weight, useWeight);\n}",c.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\n\nvarying float fragWeight;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, fragWeight);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n",c.pickVertex="precision highp float;\n#define GLSLIFY 1\n\nvec4 pfx_1_0(vec2 scaleHi, vec2 scaleLo, vec2 translateHi, vec2 translateLo, vec2 positionHi, vec2 positionLo) {\n  return vec4((positionHi + translateHi) * scaleHi\n            + (positionLo + translateLo) * scaleHi\n            + (positionHi + translateHi) * scaleLo\n            + (positionLo + translateLo) * scaleLo, 0.0, 1.0);\n}\n\nattribute vec2 positionHi, positionLo;\nattribute vec4 pickId;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_Position = pfx_1_0(scaleHi, scaleLo, translateHi, translateLo, positionHi, positionLo);\n  gl_PointSize = pointSize;\n  fragId = id;\n}",c.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}"},{}],246:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85}],247:[function(a,b,c){arguments[4][242][0].apply(c,arguments)},{dup:242}],248:[function(a,b,c){arguments[4][243][0].apply(c,arguments)},{"./lib/sort":247,dup:243,"typedarray-pool":550}],249:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.plot=a,this.positionBufferHi=b,this.positionBufferLo=c,this.pickBuffer=d,this.weightBuffer=e,this.shader=f,this.pickShader=g,this.scales=[],this.size=12,this.borderSize=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.pickOffset=0,this.points=null,this.xCoords=null,this.snapPoints=!0}function e(a,b){var c=a.gl,e=g(c),h=g(c),i=g(c),j=g(c),l=f(c,k.pointVertex,k.pointFragment),m=f(c,k.pickVertex,k.pickFragment),n=new d(a,e,h,i,j,l,m);return n.update(b),a.addObject(n),n}var f=a("gl-shader"),g=a("gl-buffer"),h=a("binary-search-bounds"),i=a("snap-points-2d"),j=a("typedarray-pool"),k=a("./lib/shader"),l=a("array-normalize"),m=a("array-bounds");b.exports=e;var n=d.prototype,o=new Float32Array(2),p=new Float32Array(2),q=new Float32Array(2),r=new Float32Array(2),s=[0,0,0,0];n.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBufferHi.dispose(),this.positionBufferLo.dispose(),this.pickBuffer.dispose(),this.xCoords&&j.free(this.xCoords),this.plot.removeObject(this)},n.update=function(a){function b(b,c){return b in a?a[b]:c}if(a=a||{},this.size=b("size",12),this.color=b("color",[1,0,0,1]).slice(),this.borderSize=b("borderSize",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.snapPoints=b("snapPoints",!0),null!=a.positions){this.xCoords&&j.free(this.xCoords),this.points=a.positions;var c=this.points.length>>>1,d=j.mallocInt32(c),e=j.mallocFloat32(c),f=j.mallocFloat64(2*c);if(f.set(this.points),this.snapPoints)this.scales=i(f,d,e,this.bounds);else{this.bounds=m(f,2),l(f,2,this.bounds);for(var g=0;c>g;g++)d[g]=g,e[g]=1}var h=j.mallocFloat64(c),k=j.mallocFloat32(2*c),n=j.mallocFloat32(2*c);k.set(f);for(var g=0,o=0;c>g;g++,o+=2)n[o]=f[o]-k[o],n[o+1]=f[o+1]-k[o+1],h[g]=f[o];this.positionBufferHi.update(k),this.positionBufferLo.update(n),this.pickBuffer.update(d),this.weightBuffer.update(e),j.free(k),j.free(n),j.free(e),j.free(f),j.free(d),this.xCoords=h,this.pointCount=c,this.pickOffset=0}},n.draw=function(a){var b=void 0!==a,c=this.plot,d=b?this.pickShader:this.shader,e=this.scales,f=this.positionBufferHi,g=this.positionBufferLo,h=this.pickBuffer,i=this.bounds,j=this.size,k=this.borderSize,l=c.gl,m=b?c.pickPixelRatio:c.pixelRatio,n=c.viewBox,t=c.dataBox;if(0===this.pointCount)return a;var u=i[2]-i[0],v=i[3]-i[1],w=t[2]-t[0],x=t[3]-t[1],y=(n[2]-n[0])*m/c.pixelRatio,z=(n[3]-n[1])*m/c.pixelRatio,A=this.pixelSize=Math.min(w/y,x/z),B=2*u/w,C=2*v/x;o[0]=B,o[1]=C,p[0]=B-o[0],p[1]=C-o[1];var D=(i[0]-t[0]-.5*w)/u,E=(i[1]-t[1]-.5*x)/v;q[0]=D,q[1]=E,r[0]=D-q[0],r[1]=E-q[1],d.bind(),d.uniforms.scaleHi=o,d.uniforms.scaleLo=p,d.uniforms.translateHi=q,d.uniforms.translateLo=r,d.uniforms.color=this.color,d.uniforms.borderColor=this.borderColor,d.uniforms.pointSize=m*(j+k),d.uniforms.centerFraction=0===this.borderSize?2:j/(j+k+1.25),f.bind(),d.attributes.positionHi.pointer(),g.bind(),d.attributes.positionLo.pointer(),b?(this.pickOffset=a,s[0]=255&a,s[1]=a>>8&255,s[2]=a>>16&255,s[3]=a>>24&255,d.uniforms.pickOffset=s,h.bind(),d.attributes.pickId.pointer(l.UNSIGNED_BYTE)):(d.uniforms.useWeight=1,this.weightBuffer.bind(),d.attributes.weight.pointer());var F=!0;if(this.snapPoints)for(var G=e.length-1;G>=0;G--){var H=e[G];if(!(H.pixelSize<A&&G>1)){var I=this.getVisibleRange(H),J=I[0],K=I[1];K>J&&l.drawArrays(l.POINTS,J,K-J),!b&&F&&(F=!1,d.uniforms.useWeight=0)}}else l.drawArrays(l.POINTS,0,this.pointCount);return a+this.pointCount},n.getVisibleRange=function(a){var b=this.plot.dataBox,c=this.bounds,d=this.pixelSize,e=this.size,f=this.plot.pixelRatio,g=c[2]-c[0];c[3]-c[1];if(!a)for(var a,i=this.scales.length-1;i>=0&&(a=this.scales[i],a.pixelSize<d&&i>1);i--);var j=this.xCoords,k=(b[0]-c[0]-d*e*f)/g,l=(b[2]-c[0]+d*e*f)/g,m=a.offset,n=a.count+m,o=h.ge(j,k,m,n-1),p=h.lt(j,l,o,n-1)+1;return[o,p]},n.drawPick=n.draw,n.pick=function(a,b,c){var d=c-this.pickOffset;return 0>d||d>=this.pointCount?null:{object:this,pointId:d,dataCoord:[this.points[2*d],this.points[2*d+1]]}}},{"./lib/shader":245,"array-bounds":45,"array-normalize":46,"binary-search-bounds":246,"gl-buffer":157,"gl-shader":256,"snap-points-2d":248,"typedarray-pool":550}],250:[function(a,b,c){"use strict";function d(a,b){var c=f[b];if(c||(c=f[b]={}),a in c)return c[a];for(var d=e(a,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),g=e(a,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),h=[[1/0,1/0],[-(1/0),-(1/0)]],i=0;i<d.positions.length;++i)for(var j=d.positions[i],k=0;2>k;++k)h[0][k]=Math.min(h[0][k],j[k]),h[1][k]=Math.max(h[1][k],j[k]);return c[a]=[g,d,h]}var e=a("vectorize-text");b.exports=d;var f={}},{"vectorize-text":563}],251:[function(a,b,c){function d(a,b){var c=e(a,b),d=c.attributes;return d.position.location=0,d.color.location=1,d.glyph.location=2,d.id.location=3,c}var e=a("gl-shader"),f="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",g="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",h="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",i="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",j="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",k=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:f,fragment:i,attributes:k},m={vertex:g,fragment:i,attributes:k},n={vertex:h,fragment:i,attributes:k},o={vertex:f,fragment:j,attributes:k},p={vertex:g,fragment:j,attributes:k},q={vertex:h,fragment:j,attributes:k};c.createPerspective=function(a){return d(a,l)},c.createOrtho=function(a){return d(a,m)},c.createProject=function(a){return d(a,n)},c.createPickPerspective=function(a){return d(a,o)},c.createPickOrtho=function(a){return d(a,p)},c.createPickProject=function(a){return d(a,q)}},{"gl-shader":256}],252:[function(a,b,c){"use strict";function d(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];return a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*f,a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*f,a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*f,a[3]=b[3]*c+b[7]*d+b[11]*e+b[15]*f,a}function e(a,b,c,e){return d(e,e,c),d(e,e,b),d(e,e,a)}function f(a,b){this.index=a,this.dataCoordinate=this.position=b}function g(a,b,c,d,e,g,h,i,j,k,l,m){this.gl=a,this.pixelRatio=1,this.shader=b,this.orthoShader=c,this.projectShader=d,this.pointBuffer=e,this.colorBuffer=g,this.glyphBuffer=h,this.idBuffer=i,this.vao=j,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=k,this.pickOrthoShader=l,this.pickProjectShader=m,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.dirty=!0}function h(a){return a[0]=a[1]=a[2]=0,a}function i(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=1,a}function j(a,b,c,d){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[c]=d,a}function k(a){for(var b=D,c=0;2>c;++c)for(var d=0;3>d;++d)b[c][d]=Math.max(Math.min(a[c][d],1e8),-1e8);return b}function l(a,b,c,d,f){var g,l=b.axesProject,m=b.gl,n=a.uniforms,o=c.model||u,p=c.view||u,q=c.projection||u,s=b.axesBounds,t=k(b.clipBounds);g=b.axes?b.axes.lastCubeProps.axis:[1,1,1],w[0]=2/m.drawingBufferWidth,w[1]=2/m.drawingBufferHeight,a.bind(),n.view=p,n.projection=q,n.screenSize=w,n.highlightId=b.highlightId,n.highlightScale=b.highlightScale,n.clipBounds=t,n.pickGroup=b.pickId/255,n.pixelRatio=b.pixelRatio;for(var v=0;3>v;++v)if(l[v]&&b.projectOpacity[v]<1===d){n.scale=b.projectScale[v],n.opacity=b.projectOpacity[v];for(var D=B,E=0;16>E;++E)D[E]=0;for(var E=0;4>E;++E)D[5*E]=1;D[5*v]=0,g[v]<0?D[12+v]=s[0][v]:D[12+v]=s[1][v],r(D,o,D),n.model=D;var F=(v+1)%3,G=(v+2)%3,H=h(x),I=h(y);H[F]=1,I[G]=1;var J=e(q,p,o,i(z,H)),K=e(q,p,o,i(A,I));if(Math.abs(J[1])>Math.abs(K[1])){var L=J;J=K,K=L,L=H,H=I,I=L;var M=F;F=G,G=M}J[0]<0&&(H[F]=-1),K[1]>0&&(I[G]=-1);for(var N=0,O=0,E=0;4>E;++E)N+=Math.pow(o[4*F+E],2),O+=Math.pow(o[4*G+E],2);H[F]/=Math.sqrt(N),I[G]/=Math.sqrt(O),n.axes[0]=H,n.axes[1]=I,n.fragClipBounds[0]=j(C,t[0],v,-1e8),n.fragClipBounds[1]=j(C,t[1],v,1e8),b.vao.draw(m.TRIANGLES,b.vertexCount),b.lineWidth>0&&(m.lineWidth(b.lineWidth),b.vao.draw(m.LINES,b.lineVertexCount,b.vertexCount))}}function m(a,b,c,d,e,f){var g=c.gl;if(c.vao.bind(),e===c.opacity<1||f){a.bind();var h=a.uniforms;h.model=d.model||u,h.view=d.view||u,h.projection=d.projection||u,w[0]=2/g.drawingBufferWidth,w[1]=2/g.drawingBufferHeight,h.screenSize=w,h.highlightId=c.highlightId,h.highlightScale=c.highlightScale,h.fragClipBounds=G,h.clipBounds=c.axes.bounds,h.opacity=c.opacity,h.pickGroup=c.pickId/255,h.pixelRatio=c.pixelRatio,c.vao.draw(g.TRIANGLES,c.vertexCount),c.lineWidth>0&&(g.lineWidth(c.lineWidth),c.vao.draw(g.LINES,c.lineVertexCount,c.vertexCount))}l(b,c,d,e,f),c.vao.unbind()}function n(a){var b=a.gl,c=s.createPerspective(b),d=s.createOrtho(b),e=s.createProject(b),f=s.createPickPerspective(b),h=s.createPickOrtho(b),i=s.createPickProject(b),j=o(b),k=o(b),l=o(b),m=o(b),n=p(b,[{buffer:j,size:3,type:b.FLOAT},{buffer:k,size:4,type:b.FLOAT},{buffer:l,size:2,type:b.FLOAT},{buffer:m,size:4,type:b.UNSIGNED_BYTE,normalized:!0}]),q=new g(b,c,d,e,j,k,l,m,n,f,h,i);return q.update(a),q}var o=a("gl-buffer"),p=a("gl-vao"),q=a("typedarray-pool"),r=a("gl-mat4/multiply"),s=a("./lib/shaders"),t=a("./lib/glyphs"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.exports=n;var v=g.prototype;v.pickSlots=1,v.setPickBase=function(a){this.pickId=a},v.isTransparent=function(){if(this.opacity<1)return!0;for(var a=0;3>a;++a)if(this.axesProject[a]&&this.projectOpacity[a]<1)return!0;return!1},v.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;3>a;++a)if(this.axesProject[a]&&this.projectOpacity[a]>=1)return!0;return!1};var w=[0,0],x=[0,0,0],y=[0,0,0],z=[0,0,0,1],A=[0,0,0,1],B=u.slice(),C=[0,0,0],D=[[0,0,0],[0,0,0]],E=[-1e8,-1e8,-1e8],F=[1e8,1e8,1e8],G=[E,F];v.draw=function(a){var b=this.useOrtho?this.orthoShader:this.shader;m(b,this.projectShader,this,a,!1,!1)},v.drawTransparent=function(a){var b=this.useOrtho?this.orthoShader:this.shader;m(b,this.projectShader,this,a,!0,!1)},v.drawPick=function(a){var b=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;m(b,this.pickProjectShader,this,a,!1,!0)},v.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=a.value[2]+(a.value[1]<<8)+(a.value[0]<<16);if(b>=this.pointCount||0>b)return null;var c=this.points[b],d=this._selectResult;d.index=b;for(var e=0;3>e;++e)d.position[e]=d.dataCoordinate[e]=c[e];return d},v.highlight=function(a){if(a){var b=a.index,c=255&b,d=b>>8&255,e=b>>16&255;this.highlightId=[c/255,d/255,e/255,0]}else this.highlightId=[1,1,1,1]},v.update=function(a){if(a=a||{},"perspective"in a&&(this.useOrtho=!a.perspective),"orthographic"in a&&(this.useOrtho=!!a.orthographic),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"project"in a)if(Array.isArray(a.project))this.axesProject=a.project;else{var b=!!a.project;this.axesProject=[b,b,b]}if("projectScale"in a)if(Array.isArray(a.projectScale))this.projectScale=a.projectScale.slice();else{var c=+a.projectScale;this.projectScale=[c,c,c]}if("projectOpacity"in a)if(Array.isArray(a.projectOpacity))this.projectOpacity=a.projectOpacity.slice();else{var c=+a.projectOpacity;this.projectOpacity=[c,c,c]}"opacity"in a&&(this.opacity=a.opacity),this.dirty=!0;var d=a.position;if(d){var e=a.font||"normal",f=a.alignment||[0,0],g=[1/0,1/0,1/0],h=[-(1/0),-(1/0),-(1/0)],i=a.glyph,j=a.color,k=a.size,l=a.angle,m=a.lineColor,n=0,o=0,p=0,r=d.length;a:for(var s=0;r>s;++s){for(var u=d[s],v=0;3>v;++v)if(isNaN(u[v])||!isFinite(u[v]))continue a;var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("●",e);var x=w[0],y=w[1],z=w[2];o+=3*x.cells.length,p+=2*y.edges.length}var A=o+p,B=q.mallocFloat(3*A),C=q.mallocFloat(4*A),D=q.mallocFloat(2*A),E=q.mallocUint32(A),F=[0,f[1]],G=0,H=o,I=[0,0,0,1],J=[0,0,0,1],K=Array.isArray(j)&&Array.isArray(j[0]),L=Array.isArray(m)&&Array.isArray(m[0]);a:for(var s=0;r>s;++s){for(var u=d[s],v=0;3>v;++v){if(isNaN(u[v])||!isFinite(u[v])){n+=1;continue a}h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v])}var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("●",e);var x=w[0],y=w[1],z=w[2];if(Array.isArray(j)){var M;if(M=K?j[s]:j,3===M.length){for(var v=0;3>v;++v)I[v]=M[v];I[3]=1}else if(4===M.length)for(var v=0;4>v;++v)I[v]=M[v]}else I[0]=I[1]=I[2]=0,I[3]=1;if(Array.isArray(m)){var M;if(M=L?m[s]:m,3===M.length){for(var v=0;3>v;++v)J[v]=M[v];J[v]=1}else if(4===M.length)for(var v=0;4>v;++v)J[v]=M[v]}else J[0]=J[1]=J[2]=0,J[3]=1;var N=.5;Array.isArray(k)?N=+k[s]:k?N=+k:this.useOrtho&&(N=12);var O=0;Array.isArray(l)?O=+l[s]:l&&(O=+l);for(var P=Math.cos(O),Q=Math.sin(O),u=d[s],v=0;3>v;++v)h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v]);f[0]<0?F[0]=f[0]*(1+z[1][0]):f[0]>0&&(F[0]=-f[0]*(1+z[0][0]));for(var R=x.cells,S=x.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;3>U;++U){for(var V=0;3>V;++V)B[3*G+V]=u[V];for(var V=0;4>V;++V)C[4*G+V]=I[V];E[G]=n;var W=S[T[U]];D[2*G]=N*(P*W[0]-Q*W[1]+F[0]),D[2*G+1]=N*(Q*W[0]+P*W[1]+F[1]),G+=1}for(var R=y.edges,S=y.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;2>U;++U){for(var V=0;3>V;++V)B[3*H+V]=u[V];for(var V=0;4>V;++V)C[4*H+V]=J[V];E[H]=n;var W=S[T[U]];D[2*H]=N*(P*W[0]-Q*W[1]+F[0]),D[2*H+1]=N*(Q*W[0]+P*W[1]+F[1]),H+=1}n+=1}this.vertexCount=o,this.lineVertexCount=p,this.pointBuffer.update(B),this.colorBuffer.update(C),this.glyphBuffer.update(D),this.idBuffer.update(new Uint32Array(E)),q.free(B),q.free(C),q.free(D),q.free(E),this.bounds=[g,h],this.points=d,this.pointCount=d.length}},v.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/glyphs":250,"./lib/shaders":251,"gl-buffer":157,"gl-mat4/multiply":184,"gl-vao":272,"typedarray-pool":550}],253:[function(a,b,c){"use strict";c.boxVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n",c.boxFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},{}],254:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.boxBuffer=b,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-(1/0),-(1/0)],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function e(a,b){var c=a.gl,e=g(c,[0,0,0,1,1,0,1,1]),i=f(c,h.boxVertex,h.boxFragment),j=new d(a,e,i);return j.update(b),a.addOverlay(j),j}var f=a("gl-shader"),g=a("gl-buffer"),h=a("./lib/shaders");b.exports=e;var i=d.prototype;i.draw=function(){if(this.enabled){var a=this.plot,b=this.selectBox,c=this.borderWidth,d=(this.innerFill,this.innerColor),e=(this.outerFill,this.outerColor),f=this.borderColor,g=a.box,h=a.screenBox,i=a.dataBox,j=a.viewBox,k=a.pixelRatio,l=(b[0]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],m=(b[1]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1],n=(b[2]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],o=(b[3]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1];if(l=Math.max(l,j[0]),m=Math.max(m,j[1]),n=Math.min(n,j[2]),o=Math.min(o,j[3]),!(l>n||m>o)){g.bind();var p=h[2]-h[0],q=h[3]-h[1];if(this.outerFill&&(g.drawBox(0,0,p,m,e),g.drawBox(0,m,l,o,e),g.drawBox(0,o,p,q,e),g.drawBox(n,m,p,o,e)),this.innerFill&&g.drawBox(l,m,n,o,d),c>0){var r=c*k;g.drawBox(l-r,m-r,n+r,m+r,f),g.drawBox(l-r,o-r,n+r,o+r,f),g.drawBox(l-r,m-r,l+r,o+r,f),g.drawBox(n-r,m-r,n+r,o+r,f)}}}},i.update=function(a){a=a||{},this.innerFill=!!a.innerFill,this.outerFill=!!a.outerFill,this.innerColor=(a.innerColor||[0,0,0,.5]).slice(),this.outerColor=(a.outerColor||[0,0,0,.5]).slice(),this.borderColor=(a.borderColor||[0,0,0,1]).slice(),this.borderWidth=a.borderWidth||0,this.selectBox=(a.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":253,"gl-buffer":157,"gl-shader":256}],255:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.coord=[a,b],this.id=c,this.value=d,this.distance=e}function e(a,b,c){this.gl=a,this.fbo=b,this.buffer=c,this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(b.bind(),a.readPixels(0,0,b.shape[0],b.shape[1],a.RGBA,a.UNSIGNED_BYTE,d.buffer),
d._readTimeout=null)}}function f(a,b){var c=g(a,b),d=h.mallocUint8(b[0]*b[1]*4);return new e(a,c,d)}b.exports=f;var g=a("gl-fbo"),h=a("typedarray-pool"),i=a("ndarray"),j=a("bit-twiddle").nextPow2,k=a("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_46_arg0_<255||_inline_46_arg1_<255||_inline_46_arg2_<255||_inline_46_arg3_<255){var _inline_46_l=_inline_46_arg4_-_inline_46_arg6_[0],_inline_46_a=_inline_46_arg5_-_inline_46_arg6_[1],_inline_46_f=_inline_46_l*_inline_46_l+_inline_46_a*_inline_46_a;_inline_46_f<this_closestD2&&(this_closestD2=_inline_46_f,this_closestX=_inline_46_arg6_[0],this_closestY=_inline_46_arg6_[1])}}",args:[{name:"_inline_46_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_46_a","_inline_46_f","_inline_46_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),l=e.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var b=this.fbo.shape[0],c=this.fbo.shape[1];if(c*b*4>this.buffer.length){h.free(this.buffer);for(var d=this.buffer=h.mallocUint8(j(c*b*4)),e=0;c*b*4>e;++e)d[e]=255}return a}}}),l.begin=function(){var a=this.gl;this.shape;a&&(this.fbo.bind(),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))},l.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},l.query=function(a,b,c){if(!this.gl)return null;var e=this.fbo.shape.slice();a=0|a,b=0|b,"number"!=typeof c&&(c=1);var f=0|Math.min(Math.max(a-c,0),e[0]),g=0|Math.min(Math.max(a+c,0),e[0]),h=0|Math.min(Math.max(b-c,0),e[1]),j=0|Math.min(Math.max(b+c,0),e[1]);if(f>=g||h>=j)return null;var l=[g-f,j-h],m=i(this.buffer,[l[0],l[1],4],[4,4*e[0],1],4*(f+e[0]*h)),n=k(m.hi(l[0],l[1],1),c,c),o=n[0],p=n[1];if(0>o||Math.pow(this.radius,2)<n[2])return null;var q=m.get(o,p,0),r=m.get(o,p,1),s=m.get(o,p,2),t=m.get(o,p,3);return new d(o+f|0,p+h|0,q,[r,s,t],Math.sqrt(n[2]))},l.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":68,"cwise/lib/wrapper":114,"gl-fbo":165,ndarray:468,"typedarray-pool":550}],256:[function(a,b,c){"use strict";function d(a){this.gl=a,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function e(a,b){return a.name<b.name?-1:1}function f(a,b,c,e,f){var g=new d(a);return g.update(b,c,e,f),g}var g=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),i=a("./lib/reflect"),j=a("./lib/shader-cache"),k=a("./lib/runtime-reflect"),l=a("./lib/GLError"),m=d.prototype;m.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},m.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},m.update=function(a,b,c,d){function f(){n.program=j.program(o,n._vref,n._fref,u,v);for(var a=0;a<c.length;++a)C[a]=o.getUniformLocation(n.program,c[a].name)}if(!b||1===arguments.length){var m=a;a=m.vertex,b=m.fragment,c=m.uniforms,d=m.attributes}var n=this,o=n.gl,p=n._vref;n._vref=j.shader(o,o.VERTEX_SHADER,a),p&&p.dispose(),n.vertShader=n._vref.shader;var q=this._fref;if(n._fref=j.shader(o,o.FRAGMENT_SHADER,b),q&&q.dispose(),n.fragShader=n._fref.shader,!c||!d){var r=o.createProgram();if(o.attachShader(r,n.fragShader),o.attachShader(r,n.vertShader),o.linkProgram(r),!o.getProgramParameter(r,o.LINK_STATUS)){var s=o.getProgramInfoLog(r);throw new l(s,"Error linking program:"+s)}c=c||k.uniforms(o,r),d=d||k.attributes(o,r),o.deleteProgram(r)}d=d.slice(),d.sort(e);for(var t=[],u=[],v=[],w=0;w<d.length;++w){var x=d[w];if(x.type.indexOf("mat")>=0){for(var y=0|x.type.charAt(x.type.length-1),z=new Array(y),A=0;y>A;++A)z[A]=v.length,u.push(x.name+"["+A+"]"),"number"==typeof x.location?v.push(x.location+A):Array.isArray(x.location)&&x.location.length===y&&"number"==typeof x.location[A]?v.push(0|x.location[A]):v.push(-1);t.push({name:x.name,type:x.type,locations:z})}else t.push({name:x.name,type:x.type,locations:[v.length]}),u.push(x.name),"number"==typeof x.location?v.push(0|x.location):v.push(-1)}for(var B=0,w=0;w<v.length;++w)if(v[w]<0){for(;v.indexOf(B)>=0;)B+=1;v[w]=B}var C=new Array(c.length);f(),n._relink=f,n.types={uniforms:i(c),attributes:i(d)},n.attributes=h(o,n,t,v),Object.defineProperty(n,"uniforms",g(o,n,c,C))},b.exports=f},{"./lib/GLError":257,"./lib/create-attributes":258,"./lib/create-uniforms":259,"./lib/reflect":260,"./lib/runtime-reflect":261,"./lib/shader-cache":262}],257:[function(a,b,c){arguments[4][214][0].apply(c,arguments)},{dup:214}],258:[function(a,b,c){arguments[4][215][0].apply(c,arguments)},{"./GLError":257,dup:215}],259:[function(a,b,c){arguments[4][216][0].apply(c,arguments)},{"./GLError":257,"./reflect":260,dup:216}],260:[function(a,b,c){arguments[4][217][0].apply(c,arguments)},{dup:217}],261:[function(a,b,c){arguments[4][218][0].apply(c,arguments)},{dup:218}],262:[function(a,b,c){arguments[4][219][0].apply(c,arguments)},{"./GLError":257,dup:219,"gl-format-compiler-error":166,"weakmap-shim":571}],263:[function(a,b,c){"use strict";function d(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}function e(a,b){var c=new d(a);return c.update(b),a.addOverlay(c),c}b.exports=e;var f=d.prototype;f.update=function(a){a=a||{},this.enable=(a.enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},f.draw=function(){var a=this.enable,b=this.width,c=this.color,d=this.center,e=this.plot,f=e.line,g=e.dataBox,h=e.viewBox;if(f.bind(),g[0]<=d[0]&&d[0]<=g[2]&&g[1]<=d[1]&&d[1]<=g[3]){var i=h[0]+(d[0]-g[0])/(g[2]-g[0])*(h[2]-h[0]),j=h[1]+(d[1]-g[1])/(g[3]-g[1])*(h[3]-h[1]);a[0]&&f.drawLine(i,j,h[0],j,b[0],c[0]),a[1]&&f.drawLine(i,j,i,h[1],b[1],c[1]),a[2]&&f.drawLine(i,j,h[2],j,b[2],c[2]),a[3]&&f.drawLine(i,j,i,h[3],b[3],c[3])}},f.dispose=function(){this.plot.removeOverlay(this)}},{}],264:[function(a,b,c){"use strict";var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":256}],265:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function e(a,b){function c(a,b,c,d,f,g){var h=[a,b,c,0,0,0,1];h[d+3]=1,h[d]=f,e.push.apply(e,h),h[6]=-1,e.push.apply(e,h),h[d]=g,e.push.apply(e,h),e.push.apply(e,h),h[6]=1,e.push.apply(e,h),h[d]=f,e.push.apply(e,h)}var e=[];c(0,0,0,0,0,1),c(0,0,0,1,0,1),c(0,0,0,2,0,1),c(1,0,0,1,-1,1),c(1,0,0,2,-1,1),c(0,1,0,0,-1,1),c(0,1,0,2,-1,1),c(0,0,1,0,-1,1),c(0,0,1,1,-1,1);var i=f(a,e),j=g(a,[{type:a.FLOAT,buffer:i,size:3,offset:0,stride:28},{type:a.FLOAT,buffer:i,size:3,offset:12,stride:28},{type:a.FLOAT,buffer:i,size:1,offset:24,stride:28}]),k=h(a);k.attributes.position.location=0,k.attributes.color.location=1,k.attributes.weight.location=2;var l=new d(a,i,j,k);return l.update(b),l}var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders/index");b.exports=e;var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],j=d.prototype,k=[0,0,0],l=[0,0,0],m=[0,0];j.isTransparent=function(){return!1},j.drawTransparent=function(a){},j.draw=function(a){var b=this.gl,c=this.vao,d=this.shader;c.bind(),d.bind();var e,f=a.model||i,g=a.view||i,h=a.projection||i;this.axes&&(e=this.axes.lastCubeProps.axis);for(var j=k,n=l,o=0;3>o;++o)e&&e[o]<0?(j[o]=this.bounds[0][o],n[o]=this.bounds[1][o]):(j[o]=this.bounds[1][o],n[o]=this.bounds[0][o]);m[0]=b.drawingBufferWidth,m[1]=b.drawingBufferHeight,d.uniforms.model=f,d.uniforms.view=g,d.uniforms.projection=h,d.uniforms.coordinates=[this.position,j,n],d.uniforms.colors=this.colors,d.uniforms.screenShape=m;for(var o=0;3>o;++o)d.uniforms.lineWidth=this.lineWidth[o]*this.pixelRatio,this.enabled[o]&&(c.draw(b.TRIANGLES,6,6*o),this.drawSides[o]&&c.draw(b.TRIANGLES,12,18+12*o));c.unbind()},j.update=function(a){a&&("bounds"in a&&(this.bounds=a.bounds),"position"in a&&(this.position=a.position),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"colors"in a&&(this.colors=a.colors),"enabled"in a&&(this.enabled=a.enabled),"drawSides"in a&&(this.drawSides=a.drawSides))},j.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":264,"gl-buffer":157,"gl-vao":272}],266:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular_1_1(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor = step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) + step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",g="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",h="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n";c.createShader=function(a){var b=d(a,e,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createPickShader=function(a){var b=d(a,e,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createContourShader=function(a){var b=d(a,g,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b},c.createPickContourShader=function(a){var b=d(a,g,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b}},{"gl-shader":256}],267:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.position=a,this.index=b,this.uv=c,this.level=d,this.dataCoordinate=e}function e(a){var b=u([s({colormap:a,nshades:K,format:"rgba"}).map(function(a){return[a[0],a[1],a[2],255*a[3]]})]);return t.divseq(b,255),b}function f(a,b,c,e,f,g,h,i,j,k,l,m,n,o){this.gl=a,this.shape=b,this.bounds=c,this.intensityBounds=[],this._shader=e,this._pickShader=f,this._coordinateBuffer=g,this._vao=h,this._colorMap=i,this._contourShader=j,this._contourPickShader=k,this._contourBuffer=l,this._contourVAO=m,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new d([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=n,this._dynamicVAO=o,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}function g(a,b){var c,d,e,f=b.axes&&b.axes.lastCubeProps.axis||M,g=b.showSurface,h=b.showContour;for(c=0;3>c;++c)for(g=g||b.surfaceProject[c],d=0;3>d;++d)h=h||b.contourProject[c][d];for(c=0;3>c;++c){var i=N.projections[c];for(d=0;16>d;++d)i[d]=0;for(d=0;4>d;++d)i[5*d]=1;i[5*c]=0,i[12+c]=b.axesBounds[+(f[c]>0)][c],x(i,a.model,i);var j=N.clipBounds[c];for(e=0;2>e;++e)for(d=0;3>d;++d)j[e][d]=a.clipBounds[e][d];j[0][c]=-1e8,j[1][c]=1e8}return N.showSurface=g,N.showContour=h,N}function h(a,b){a=a||{};var c=this.gl;c.disable(c.CULL_FACE),this._colorMap.bind(0);var d=O;d.model=a.model||H,d.view=a.view||H,d.projection=a.projection||H,d.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],d.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],d.contourColor=this.contourColor[0],d.inverseModel=y(d.inverseModel,d.model);for(var e=0;2>e;++e)for(var f=d.clipBounds[e],h=0;3>h;++h)f[h]=Math.min(Math.max(this.clipBounds[e][h],-1e8),1e8);d.kambient=this.ambientLight,d.kdiffuse=this.diffuseLight,d.kspecular=this.specularLight,d.roughness=this.roughness,d.fresnel=this.fresnel,d.opacity=this.opacity,d.height=0,d.permutation=Q,d.vertexColor=this.vertexColor;var i=P;for(x(i,d.view,d.model),x(i,d.projection,i),y(i,i),e=0;3>e;++e)d.eyePosition[e]=i[12+e]/i[15];var j=i[15];for(e=0;3>e;++e)j+=this.lightPosition[e]*i[4*e+3];for(e=0;3>e;++e){var k=i[12+e];for(h=0;3>h;++h)k+=i[4*h+e]*this.lightPosition[h];d.lightPosition[e]=k/j}var l=g(d,this);if(l.showSurface&&b===this.opacity<1){for(this._shader.bind(),this._shader.uniforms=d,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(c.TRIANGLES,this._vertexCount),e=0;3>e;++e)this.surfaceProject[e]&&this.vertexCount&&(this._shader.uniforms.model=l.projections[e],this._shader.uniforms.clipBounds=l.clipBounds[e],this._vao.draw(c.TRIANGLES,this._vertexCount));this._vao.unbind()}if(l.showContour&&!b){var m=this._contourShader;d.kambient=1,d.kdiffuse=0,d.kspecular=0,d.opacity=1,m.bind(),m.uniforms=d;var n=this._contourVAO;for(n.bind(),e=0;3>e;++e)for(m.uniforms.permutation=J[e],c.lineWidth(this.contourWidth[e]),h=0;h<this.contourLevels[e].length;++h)this._contourCounts[e][h]&&(h===this.highlightLevel[e]?(m.uniforms.contourColor=this.highlightColor[e],m.uniforms.contourTint=this.highlightTint[e]):(0===h||h-1===this.highlightLevel[e])&&(m.uniforms.contourColor=this.contourColor[e],m.uniforms.contourTint=this.contourTint[e]),m.uniforms.height=this.contourLevels[e][h],n.draw(c.LINES,this._contourCounts[e][h],this._contourOffsets[e][h]));for(e=0;3>e;++e)for(m.uniforms.model=l.projections[e],m.uniforms.clipBounds=l.clipBounds[e],h=0;3>h;++h)if(this.contourProject[e][h]){m.uniforms.permutation=J[h],c.lineWidth(this.contourWidth[h]);for(var o=0;o<this.contourLevels[h].length;++o)o===this.highlightLevel[h]?(m.uniforms.contourColor=this.highlightColor[h],m.uniforms.contourTint=this.highlightTint[h]):(0===o||o-1===this.highlightLevel[h])&&(m.uniforms.contourColor=this.contourColor[h],m.uniforms.contourTint=this.contourTint[h]),m.uniforms.height=this.contourLevels[h][o],n.draw(c.LINES,this._contourCounts[h][o],this._contourOffsets[h][o])}for(n=this._dynamicVAO,n.bind(),e=0;3>e;++e)if(0!==this._dynamicCounts[e])for(m.uniforms.model=d.model,m.uniforms.clipBounds=d.clipBounds,m.uniforms.permutation=J[e],c.lineWidth(this.dynamicWidth[e]),m.uniforms.contourColor=this.dynamicColor[e],m.uniforms.contourTint=this.dynamicTint[e],m.uniforms.height=this.dynamicLevel[e],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]),h=0;3>h;++h)this.contourProject[h][e]&&(m.uniforms.model=l.projections[h],m.uniforms.clipBounds=l.clipBounds[h],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]));n.unbind()}}function i(a,b){var c=b.shape.slice(),d=a.shape.slice();t.assign(a.lo(1,1).hi(c[0],c[1]),b),t.assign(a.lo(1).hi(c[0],1),b.hi(c[0],1)),t.assign(a.lo(1,d[1]-1).hi(c[0],1),b.lo(0,c[1]-1).hi(c[0],1)),t.assign(a.lo(0,1).hi(1,c[1]),b.hi(1)),t.assign(a.lo(d[0]-1,1).hi(1,c[1]),b.lo(c[0]-1)),a.set(0,0,b.get(0,0)),a.set(0,d[1]-1,b.get(0,c[1]-1)),a.set(d[0]-1,0,b.get(c[0]-1,0)),a.set(d[0]-1,d[1]-1,b.get(c[0]-1,c[1]-1))}function j(a,b){return Array.isArray(a)?[b(a[0]),b(a[1]),b(a[2])]:[b(a),b(a),b(a)]}function k(a){return Array.isArray(a)?3===a.length?[a[0],a[1],a[2],1]:[a[0],a[1],a[2],a[3]]:[0,0,0,1]}function l(a){if(Array.isArray(a)){if(Array.isArray(a))return[k(a[0]),k(a[1]),k(a[2])];var b=k(a);return[b.slice(),b.slice(),b.slice()]}}function m(a){var b=a.gl,c=C(b),d=E(b),e=D(b),g=F(b),h=o(b),i=p(b,[{buffer:h,size:4,stride:G,offset:0},{buffer:h,size:3,stride:G,offset:16},{buffer:h,size:3,stride:G,offset:28}]),j=o(b),k=p(b,[{buffer:j,size:4,stride:20,offset:0},{buffer:j,size:1,stride:20,offset:16}]),l=o(b),m=p(b,[{buffer:l,size:2,type:b.FLOAT}]),n=q(b,1,K,b.RGBA,b.UNSIGNED_BYTE);n.minFilter=b.LINEAR,n.magFilter=b.LINEAR;var r=new f(b,[0,0],[[0,0,0],[0,0,0]],c,d,h,i,n,e,g,j,k,l,m),s={levels:[[],[],[]]};for(var t in a)s[t]=a[t];return s.colormap=s.colormap||"jet",r.update(s),r}b.exports=m;var n=a("bit-twiddle"),o=a("gl-buffer"),p=a("gl-vao"),q=a("gl-texture2d"),r=a("typedarray-pool"),s=a("colormap"),t=a("ndarray-ops"),u=a("ndarray-pack"),v=a("ndarray"),w=a("surface-nets"),x=a("gl-mat4/multiply"),y=a("gl-mat4/invert"),z=a("binary-search-bounds"),A=a("ndarray-gradient"),B=a("./lib/shaders"),C=B.createShader,D=B.createContourShader,E=B.createPickShader,F=B.createPickContourShader,G=40,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],J=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var a=0;3>a;++a){var b=J[a],c=(a+1)%3,d=(a+2)%3;b[c+0]=1,b[d+3]=1,b[a+6]=1}}();var K=256,L=f.prototype;L.isTransparent=function(){return this.opacity<1},L.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;3>a;++a)if(this._contourCounts[a].length>0||this._dynamicCounts[a]>0)return!0;return!1},L.pickSlots=1,L.setPickBase=function(a){this.pickId=a};var M=[0,0,0],N={showSurface:!1,showContour:!1,projections:[H.slice(),H.slice(),H.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O={model:H,view:H,projection:H,inverseModel:H.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},P=H.slice(),Q=[1,0,0,0,1,0,0,0,1];L.draw=function(a){return h.call(this,a,!1)},L.drawTransparent=function(a){return h.call(this,a,!0)};var R={model:H,view:H,projection:H,inverseModel:H,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};L.drawPick=function(a){a=a||{};var b=this.gl;b.disable(b.CULL_FACE);var c=R;c.model=a.model||H,c.view=a.view||H,c.projection=a.projection||H,c.shape=this._field[2].shape,c.pickId=this.pickId/255,c.lowerBound=this.bounds[0],c.upperBound=this.bounds[1],c.permutation=Q;for(var d=0;2>d;++d)for(var e=c.clipBounds[d],f=0;3>f;++f)e[f]=Math.min(Math.max(this.clipBounds[d][f],-1e8),1e8);var h=g(c,this);if(h.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=c,this._vao.bind(),this._vao.draw(b.TRIANGLES,this._vertexCount),d=0;3>d;++d)this.surfaceProject[d]&&(this._pickShader.uniforms.model=h.projections[d],this._pickShader.uniforms.clipBounds=h.clipBounds[d],this._vao.draw(b.TRIANGLES,this._vertexCount));this._vao.unbind()}if(h.showContour){var i=this._contourPickShader;i.bind(),i.uniforms=c;var j=this._contourVAO;for(j.bind(),f=0;3>f;++f)for(b.lineWidth(this.contourWidth[f]),i.uniforms.permutation=J[f],d=0;d<this.contourLevels[f].length;++d)this._contourCounts[f][d]&&(i.uniforms.height=this.contourLevels[f][d],j.draw(b.LINES,this._contourCounts[f][d],this._contourOffsets[f][d]));for(d=0;3>d;++d)for(i.uniforms.model=h.projections[d],i.uniforms.clipBounds=h.clipBounds[d],f=0;3>f;++f)if(this.contourProject[d][f]){i.uniforms.permutation=J[f],b.lineWidth(this.contourWidth[f]);for(var k=0;k<this.contourLevels[f].length;++k)this._contourCounts[f][k]&&(i.uniforms.height=this.contourLevels[f][k],j.draw(b.LINES,this._contourCounts[f][k],this._contourOffsets[f][k]))}j.unbind()}},L.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=this._field[2].shape,c=this._pickResult,d=b[0]*(a.value[0]+(a.value[2]>>4)/16)/255,e=Math.floor(d),f=d-e,g=b[1]*(a.value[1]+(15&a.value[2])/16)/255,h=Math.floor(g),i=g-h;e+=1,h+=1;var j=c.position;j[0]=j[1]=j[2]=0;for(var k=0;2>k;++k)for(var l=k?f:1-f,m=0;2>m;++m)for(var n=m?i:1-i,o=e+k,p=h+m,q=l*n,r=0;3>r;++r)j[r]+=this._field[r].get(o,p)*q;for(var s=this._pickResult.level,t=0;3>t;++t)if(s[t]=z.le(this.contourLevels[t],j[t]),s[t]<0)this.contourLevels[t].length>0&&(s[t]=0);else if(s[t]<this.contourLevels[t].length-1){var u=this.contourLevels[t][s[t]],v=this.contourLevels[t][s[t]+1];Math.abs(u-j[t])>Math.abs(v-j[t])&&(s[t]+=1)}for(c.index[0]=.5>f?e:e+1,c.index[1]=.5>i?h:h+1,c.uv[0]=d/b[0],c.uv[1]=g/b[1],r=0;3>r;++r)c.dataCoordinate[r]=this._field[r].get(c.index[0],c.index[1]);return c},L.update=function(a){a=a||{},this.dirty=!0,"contourWidth"in a&&(this.contourWidth=j(a.contourWidth,Number)),"showContour"in a&&(this.showContour=j(a.showContour,Boolean)),"showSurface"in a&&(this.showSurface=!!a.showSurface),"contourTint"in a&&(this.contourTint=j(a.contourTint,Boolean)),"contourColor"in a&&(this.contourColor=l(a.contourColor)),"contourProject"in a&&(this.contourProject=j(a.contourProject,function(a){return j(a,Boolean)})),"surfaceProject"in a&&(this.surfaceProject=a.surfaceProject),"dynamicColor"in a&&(this.dynamicColor=l(a.dynamicColor)),"dynamicTint"in a&&(this.dynamicTint=j(a.dynamicTint,Number)),"dynamicWidth"in a&&(this.dynamicWidth=j(a.dynamicWidth,Number)),"opacity"in a&&(this.opacity=a.opacity),"colorBounds"in a&&(this.colorBounds=a.colorBounds),"vertexColor"in a&&(this.vertexColor=a.vertexColor?1:0);var b=a.field||a.coords&&a.coords[2]||null,c=!1;if(b||(b=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in a||"coords"in a){var d=(b.shape[0]+2)*(b.shape[1]+2);d>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(n.nextPow2(d))),this._field[2]=v(this._field[2].data,[b.shape[0]+2,b.shape[1]+2]),i(this._field[2],b),this.shape=b.shape.slice();for(var f=this.shape,g=0;2>g;++g)this._field[2].size>this._field[g].data.length&&(r.freeFloat(this._field[g].data),this._field[g].data=r.mallocFloat(this._field[2].size)),this._field[g]=v(this._field[g].data,[f[0]+2,f[1]+2]);if(a.coords){var h=a.coords;if(!Array.isArray(h)||3!==h.length)throw new Error("gl-surface: invalid coordinates for x/y");for(g=0;2>g;++g){var k=h[g];for(s=0;2>s;++s)if(k.shape[s]!==f[s])throw new Error("gl-surface: coords have incorrect shape");i(this._field[g],k)}}else if(a.ticks){var m=a.ticks;if(!Array.isArray(m)||2!==m.length)throw new Error("gl-surface: invalid ticks");for(g=0;2>g;++g){var o=m[g];if((Array.isArray(o)||o.length)&&(o=v(o)),o.shape[0]!==f[g])throw new Error("gl-surface: invalid tick length");var p=v(o.data,f);p.stride[g]=o.stride[0],p.stride[1^g]=0,i(this._field[g],p)}}else{for(g=0;2>g;++g){var q=[0,0];q[g]=1,this._field[g]=v(this._field[g].data,[f[0]+2,f[1]+2],q,0)}this._field[0].set(0,0,0);for(var s=0;s<f[0];++s)this._field[0].set(s+1,0,s);for(this._field[0].set(f[0]+1,0,f[0]-1),this._field[1].set(0,0,0),s=0;s<f[1];++s)this._field[1].set(0,s+1,s);this._field[1].set(0,f[1]+1,f[1]-1)}var t=this._field,u=v(r.mallocFloat(3*t[2].size*2),[3,f[0]+2,f[1]+2,2]);for(g=0;3>g;++g)A(u.pick(g),t[g],"mirror");var x=v(r.mallocFloat(3*t[2].size),[f[0]+2,f[1]+2,3]);for(g=0;g<f[0]+2;++g)for(s=0;s<f[1]+2;++s){var y=u.get(0,g,s,0),z=u.get(0,g,s,1),B=u.get(1,g,s,0),C=u.get(1,g,s,1),D=u.get(2,g,s,0),E=u.get(2,g,s,1),F=B*E-C*D,G=D*z-E*y,H=y*C-z*B,J=Math.sqrt(F*F+G*G+H*H);1e-8>J?(J=Math.max(Math.abs(F),Math.abs(G),Math.abs(H)),1e-8>J?(H=1,G=F=0,J=1):J=1/J):J=1/Math.sqrt(J),x.set(g,s,0,F*J),x.set(g,s,1,G*J),x.set(g,s,2,H*J)}r.free(u.data);var K=[1/0,1/0,1/0],L=[-(1/0),-(1/0),-(1/0)],M=1/0,N=-(1/0),O=(f[0]-1)*(f[1]-1)*6,P=r.mallocFloat(n.nextPow2(10*O)),Q=0,R=0;for(g=0;g<f[0]-1;++g)a:for(s=0;s<f[1]-1;++s){for(var S=0;2>S;++S)for(var T=0;2>T;++T)for(var U=0;3>U;++U){var V=this._field[U].get(1+g+S,1+s+T);if(isNaN(V)||!isFinite(V))continue a}for(U=0;6>U;++U){var W=g+I[U][0],X=s+I[U][1],Y=this._field[0].get(W+1,X+1),Z=this._field[1].get(W+1,X+1);V=this._field[2].get(W+1,X+1);var $=V;F=x.get(W+1,X+1,0),G=x.get(W+1,X+1,1),H=x.get(W+1,X+1,2),a.intensity&&($=a.intensity.get(W,X)),P[Q++]=W,P[Q++]=X,P[Q++]=Y,P[Q++]=Z,P[Q++]=V,P[Q++]=0,P[Q++]=$,P[Q++]=F,P[Q++]=G,P[Q++]=H,K[0]=Math.min(K[0],Y),K[1]=Math.min(K[1],Z),K[2]=Math.min(K[2],V),M=Math.min(M,$),L[0]=Math.max(L[0],Y),L[1]=Math.max(L[1],Z),L[2]=Math.max(L[2],V),N=Math.max(N,$),R+=1}}for(a.intensityBounds&&(M=+a.intensityBounds[0],N=+a.intensityBounds[1]),g=6;Q>g;g+=10)P[g]=(P[g]-M)/(N-M);this._vertexCount=R,this._coordinateBuffer.update(P.subarray(0,Q)),r.freeFloat(P),r.free(x.data),this.bounds=[K,L],this.intensity=a.intensity||this._field[2],(this.intensityBounds[0]!==M||this.intensityBounds[1]!==N)&&(c=!0),this.intensityBounds=[M,N]}if("levels"in a){var _=a.levels;for(_=Array.isArray(_[0])?_.slice():[[],[],_],g=0;3>g;++g)_[g]=_[g].slice(),_.sort(function(a,b){return a-b});a:for(g=0;3>g;++g){if(_[g].length!==this.contourLevels[g].length){c=!0;break}for(s=0;s<_[g].length;++s)if(_[g][s]!==this.contourLevels[g][s]){c=!0;break a}}this.contourLevels=_}if(c){t=this._field,f=this.shape;for(var aa=[],ba=0;3>ba;++ba){_=this.contourLevels[ba];var ca=[],da=[],ea=[0,0,0];for(g=0;g<_.length;++g){var fa=w(this._field[ba],_[g]);ca.push(aa.length/5|0),R=0;a:for(s=0;s<fa.cells.length;++s){var ga=fa.cells[s];for(U=0;2>U;++U){var ha=fa.positions[ga[U]],ia=ha[0],ja=0|Math.floor(ia),ka=ia-ja,la=ha[1],ma=0|Math.floor(la),na=la-ma,oa=!1;
b:for(var pa=0;3>pa;++pa){ea[pa]=0;var qa=(ba+pa+1)%3;for(S=0;2>S;++S){var ra=S?ka:1-ka;for(W=0|Math.min(Math.max(ja+S,0),f[0]),T=0;2>T;++T){var sa=T?na:1-na;if(X=0|Math.min(Math.max(ma+T,0),f[1]),V=2>pa?this._field[qa].get(W,X):(this.intensity.get(W,X)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(V)||isNaN(V)){oa=!0;break b}var ta=ra*sa;ea[pa]+=ta*V}}}if(oa){if(U>0){for(var ua=0;5>ua;++ua)aa.pop();R-=1}continue a}aa.push(ea[0],ea[1],ha[0],ha[1],ea[2]),R+=1}}da.push(R)}this._contourOffsets[ba]=ca,this._contourCounts[ba]=da}var va=r.mallocFloat(aa.length);for(g=0;g<aa.length;++g)va[g]=aa[g];this._contourBuffer.update(va),r.freeFloat(va)}a.colormap&&this._colorMap.setPixels(e(a.colormap))},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var a=0;3>a;++a)r.freeFloat(this._field[a].data)},L.highlight=function(a){if(!a)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var b=0;3>b;++b)this.enableHighlight[b]?this.highlightLevel[b]=a.level[b]:this.highlightLevel[b]=-1;var c;if(c=this.snapToData?a.dataCoordinate:a.position,this.enableDynamic[0]&&c[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&c[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&c[2]!==this.dynamicLevel[2]){for(var d=0,e=this.shape,f=r.mallocFloat(12*e[0]*e[1]),g=0;3>g;++g)if(this.enableDynamic[g]){this.dynamicLevel[g]=c[g];var h=(g+1)%3,i=(g+2)%3,j=this._field[g],k=this._field[h],l=this._field[i],m=(this.intensity,w(j,c[g])),n=m.cells,o=m.positions;for(this._dynamicOffsets[g]=d,b=0;b<n.length;++b)for(var p=n[b],q=0;2>q;++q){var s=o[p[q]],t=+s[0],u=0|t,v=0|Math.min(u+1,e[0]),x=t-u,y=1-x,z=+s[1],A=0|z,B=0|Math.min(A+1,e[1]),C=z-A,D=1-C,E=y*D,F=y*C,G=x*D,H=x*C,I=E*k.get(u,A)+F*k.get(u,B)+G*k.get(v,A)+H*k.get(v,B),J=E*l.get(u,A)+F*l.get(u,B)+G*l.get(v,A)+H*l.get(v,B);if(isNaN(I)||isNaN(J)){q&&(d-=1);break}f[2*d+0]=I,f[2*d+1]=J,d+=1}this._dynamicCounts[g]=d-this._dynamicOffsets[g]}else this.dynamicLevel[g]=NaN,this._dynamicCounts[g]=0;this._dynamicBuffer.update(f.subarray(0,2*d)),r.freeFloat(f)}}},{"./lib/shaders":266,"binary-search-bounds":67,"bit-twiddle":68,colormap:100,"gl-buffer":157,"gl-mat4/invert":182,"gl-mat4/multiply":184,"gl-texture2d":268,"gl-vao":272,ndarray:468,"ndarray-gradient":459,"ndarray-ops":462,"ndarray-pack":463,"surface-nets":540,"typedarray-pool":550}],268:[function(a,b,c){"use strict";function d(a){r=[a.LINEAR,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_NEAREST],s=[a.NEAREST,a.LINEAR,a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR],t=[a.REPEAT,a.CLAMP_TO_EDGE,a.MIRRORED_REPEAT]}function e(a){return"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&a instanceof ImageData}function f(a,b,c){var d=a.gl,e=d.getParameter(d.MAX_TEXTURE_SIZE);if(0>b||b>e||0>c||c>e)throw new Error("gl-texture2d: Invalid texture size");return a._shape=[b,c],a.bind(),d.texImage2D(d.TEXTURE_2D,0,a.format,b,c,0,a.format,a.type,null),a._mipLevels=[0],a}function g(a,b,c,d,e,f){this.gl=a,this.handle=b,this.format=e,this.type=f,this._shape=[c,d],this._mipLevels=[0],this._magFilter=a.NEAREST,this._minFilter=a.NEAREST,this._wrapS=a.CLAMP_TO_EDGE,this._wrapT=a.CLAMP_TO_EDGE,this._anisoSamples=1;var g=this,h=[this._wrapS,this._wrapT];Object.defineProperties(h,[{get:function(){return g._wrapS},set:function(a){return g.wrapS=a}},{get:function(){return g._wrapT},set:function(a){return g.wrapT=a}}]),this._wrapVector=h;var i=[this._shape[0],this._shape[1]];Object.defineProperties(i,[{get:function(){return g._shape[0]},set:function(a){return g.width=a}},{get:function(){return g._shape[1]},set:function(a){return g.height=a}}]),this._shapeVector=i}function h(a,b){return 3===a.length?1===b[2]&&b[1]===a[0]*a[2]&&b[0]===a[2]:1===b[0]&&b[1]===a[0]}function i(a,b,c,d,e,f,g,i){var j=i.dtype,k=i.shape.slice();if(k.length<2||k.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var l=0,m=0,n=h(k,i.stride.slice());"float32"===j?l=a.FLOAT:"float64"===j?(l=a.FLOAT,n=!1,j="float32"):"uint8"===j?l=a.UNSIGNED_BYTE:(l=a.UNSIGNED_BYTE,n=!1,j="uint8");var r=1;if(2===k.length)m=a.LUMINANCE,k=[k[0],k[1],1],i=o(i.data,k,[i.stride[0],i.stride[1],1],i.offset);else{if(3!==k.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===k[2])m=a.ALPHA;else if(2===k[2])m=a.LUMINANCE_ALPHA;else if(3===k[2])m=a.RGB;else{if(4!==k[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");m=a.RGBA}r=k[2]}if(m!==a.LUMINANCE&&m!==a.ALPHA||e!==a.LUMINANCE&&e!==a.ALPHA||(m=e),m!==e)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var s=i.size,t=g.indexOf(d)<0;if(t&&g.push(d),l===f&&n)0===i.offset&&i.data.length===s?t?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data):t?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data.subarray(i.offset,i.offset+s)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data.subarray(i.offset,i.offset+s));else{var v;v=f===a.FLOAT?q.mallocFloat32(s):q.mallocUint8(s);var w=o(v,k,[k[2],k[2]*k[0],1]);l===a.FLOAT&&f===a.UNSIGNED_BYTE?u(w,i):p.assign(w,i),t?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,v.subarray(0,s)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,v.subarray(0,s)),f===a.FLOAT?q.freeFloat32(v):q.freeUint8(v)}}function j(a){var b=a.createTexture();return a.bindTexture(a.TEXTURE_2D,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),b}function k(a,b,c,d,e){var f=a.getParameter(a.MAX_TEXTURE_SIZE);if(0>b||b>f||0>c||c>f)throw new Error("gl-texture2d: Invalid texture shape");if(e===a.FLOAT&&!a.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var h=j(a);return a.texImage2D(a.TEXTURE_2D,0,d,b,c,0,d,e,null),new g(a,h,b,c,d,e)}function l(a,b,c,d,e,f){var h=j(a);return a.texImage2D(a.TEXTURE_2D,0,e,e,f,b),new g(a,h,c,d,e,f)}function m(a,b){var c=b.dtype,d=b.shape.slice(),e=a.getParameter(a.MAX_TEXTURE_SIZE);if(d[0]<0||d[0]>e||d[1]<0||d[1]>e)throw new Error("gl-texture2d: Invalid texture size");var f=h(d,b.stride.slice()),i=0;"float32"===c?i=a.FLOAT:"float64"===c?(i=a.FLOAT,f=!1,c="float32"):"uint8"===c?i=a.UNSIGNED_BYTE:(i=a.UNSIGNED_BYTE,f=!1,c="uint8");var k=0;if(2===d.length)k=a.LUMINANCE,d=[d[0],d[1],1],b=o(b.data,d,[b.stride[0],b.stride[1],1],b.offset);else{if(3!==d.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===d[2])k=a.ALPHA;else if(2===d[2])k=a.LUMINANCE_ALPHA;else if(3===d[2])k=a.RGB;else{if(4!==d[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");k=a.RGBA}}i!==a.FLOAT||a.getExtension("OES_texture_float")||(i=a.UNSIGNED_BYTE,f=!1);var l,m,n=b.size;if(f)l=0===b.offset&&b.data.length===n?b.data:b.data.subarray(b.offset,b.offset+n);else{var r=[d[2],d[2]*d[0],1];m=q.malloc(n,c);var s=o(m,d,r,0);"float32"!==c&&"float64"!==c||i!==a.UNSIGNED_BYTE?p.assign(s,b):u(s,b),l=m.subarray(0,n)}var t=j(a);return a.texImage2D(a.TEXTURE_2D,0,k,d[0],d[1],0,k,i,l),f||q.free(m),new g(a,t,d[0],d[1],k,i)}function n(a){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||d(a),"number"==typeof arguments[1])return k(a,arguments[1],arguments[2],arguments[3]||a.RGBA,arguments[4]||a.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return k(a,0|arguments[1][0],0|arguments[1][1],arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var b=arguments[1],c=e(b)?b:b.raw;if(c)return l(a,c,0|b.width,0|b.height,arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if(b.shape&&b.data&&b.stride)return m(a,b)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var o=a("ndarray"),p=a("ndarray-ops"),q=a("typedarray-pool");b.exports=n;var r=null,s=null,t=null,u=function(a,b){p.muls(a,b,255)},v=g.prototype;Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&r.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a),this._minFilter=a}},magFilter:{get:function(){return this._magFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&r.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a),this._magFilter=a}},mipSamples:{get:function(){return this._anisoSamples},set:function(a){var b=this._anisoSamples;if(this._anisoSamples=0|Math.max(a,1),b!==this._anisoSamples){var c=this.gl.getExtension("EXT_texture_filter_anisotropic");c&&this.gl.texParameterf(this.gl.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(a){if(this.bind(),t.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,a),this._wrapS=a}},wrapT:{get:function(){return this._wrapT},set:function(a){if(this.bind(),t.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,a),this._wrapT=a}},wrap:{get:function(){return this._wrapVector},set:function(a){if(Array.isArray(a)||(a=[a,a]),2!==a.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var b=0;2>b;++b)if(t.indexOf(a[b])<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);this._wrapS=a[0],this._wrapT=a[1];var c=this.gl;return this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),a}},shape:{get:function(){return this._shapeVector},set:function(a){if(Array.isArray(a)){if(2!==a.length)throw new Error("gl-texture2d: Invalid texture shape")}else a=[0|a,0|a];return f(this,0|a[0],0|a[1]),[0|a[0],0|a[1]]}},width:{get:function(){return this._shape[0]},set:function(a){return a=0|a,f(this,a,this._shape[1]),a}},height:{get:function(){return this._shape[1]},set:function(a){return a=0|a,f(this,this._shape[0],a),a}}}),v.bind=function(a){var b=this.gl;return void 0!==a&&b.activeTexture(b.TEXTURE0+(0|a)),b.bindTexture(b.TEXTURE_2D,this.handle),void 0!==a?0|a:b.getParameter(b.ACTIVE_TEXTURE)-b.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var a=Math.min(this._shape[0],this._shape[1]),b=0;a>0;++b,a>>>=1)this._mipLevels.indexOf(b)<0&&this._mipLevels.push(b)},v.setPixels=function(a,b,c,d){var f=this.gl;this.bind(),Array.isArray(b)?(d=c,c=0|b[1],b=0|b[0]):(b=b||0,c=c||0),d=d||0;var g=e(a)?a:a.raw;if(g){var h=this._mipLevels.indexOf(d)<0;h?(f.texImage2D(f.TEXTURE_2D,0,this.format,this.format,this.type,g),this._mipLevels.push(d)):f.texSubImage2D(f.TEXTURE_2D,d,b,c,this.format,this.type,g)}else{if(!(a.shape&&a.stride&&a.data))throw new Error("gl-texture2d: Unsupported data type");if(a.shape.length<2||b+a.shape[1]>this._shape[1]>>>d||c+a.shape[0]>this._shape[0]>>>d||0>b||0>c)throw new Error("gl-texture2d: Texture dimensions are out of bounds");i(f,b,c,d,this.format,this.type,this._mipLevels,a)}}},{ndarray:468,"ndarray-ops":462,"typedarray-pool":550}],269:[function(a,b,c){"use strict";function d(a,b,c){b?b.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var d=0|a.getParameter(a.MAX_VERTEX_ATTRIBS);if(c){if(c.length>d)throw new Error("gl-vao: Too many vertex attributes");for(var e=0;e<c.length;++e){var f=c[e];if(f.buffer){var g=f.buffer,h=f.size||4,i=f.type||a.FLOAT,j=!!f.normalized,k=f.stride||0,l=f.offset||0;g.bind(),a.enableVertexAttribArray(e),a.vertexAttribPointer(e,h,i,j,k,l)}else{if("number"==typeof f)a.vertexAttrib1f(e,f);else if(1===f.length)a.vertexAttrib1f(e,f[0]);else if(2===f.length)a.vertexAttrib2f(e,f[0],f[1]);else if(3===f.length)a.vertexAttrib3f(e,f[0],f[1],f[2]);else{if(4!==f.length)throw new Error("gl-vao: Invalid vertex attribute");a.vertexAttrib4f(e,f[0],f[1],f[2],f[3])}a.disableVertexAttribArray(e)}}for(;d>e;++e)a.disableVertexAttribArray(e)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var e=0;d>e;++e)a.disableVertexAttribArray(e)}}b.exports=d},{}],270:[function(a,b,c){"use strict";function d(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}function e(a){return new d(a)}var f=a("./do-bind.js");d.prototype.bind=function(){f(this.gl,this._elements,this._attributes)},d.prototype.update=function(a,b,c){this._elements=b,this._attributes=a,this._elementsType=c||this.gl.UNSIGNED_SHORT},d.prototype.dispose=function(){},d.prototype.unbind=function(){},d.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._elements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=e},{"./do-bind.js":269}],271:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this.location=a,this.dimension=b,this.a=c,this.b=d,this.c=e,this.d=f}function e(a,b,c){this.gl=a,this._ext=b,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}function f(a,b){return new e(a,b,b.createVertexArrayOES())}var g=a("./do-bind.js");d.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},e.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},e.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},e.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},e.prototype.update=function(a,b,c){if(this.bind(),g(this.gl,b,a),this.unbind(),this._attribs.length=0,a)for(var e=0;e<a.length;++e){var f=a[e];"number"==typeof f?this._attribs.push(new d(e,1,f)):Array.isArray(f)&&this._attribs.push(new d(e,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!b,this._elementsType=c||this.gl.UNSIGNED_SHORT},e.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._useElements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=f},{"./do-bind.js":269}],272:[function(a,b,c){"use strict";function d(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}function e(a,b,c,e){var h,i=a.createVertexArray?new d(a):a.getExtension("OES_vertex_array_object");return h=i?f(a,i):g(a),h.update(b,c,e),h}var f=a("./lib/vao-native.js"),g=a("./lib/vao-emulated.js");b.exports=e},{"./lib/vao-emulated.js":270,"./lib/vao-native.js":271}],273:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a}b.exports=d},{}],274:[function(a,b,c){function d(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}b.exports=d},{}],275:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)}b.exports=d},{}],276:[function(a,b,c){function d(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a}b.exports=d},{}],277:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a}b.exports=d},{}],278:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}b.exports=d},{}],279:[function(a,b,c){function d(a,b,c,d){return e[0]=d,e[1]=c,e[2]=b,e[3]=a,f[0]}b.exports=d;var e=new Uint8Array(4),f=new Float32Array(e.buffer)},{}],280:[function(a,b,c){function d(a){for(var b=Array.isArray(a)?a:e(a),c=0;c<b.length;c++){var d=b[c];if("preprocessor"===d.type){var g=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(g&&g[2]){var h=g[1],i=g[2];return(h?f(i):i).trim()}}}}var e=a("glsl-tokenizer"),f=a("atob-lite");b.exports=d},{"atob-lite":49,"glsl-tokenizer":287}],281:[function(a,b,c){function d(a){function b(a){a.length&&Q.push({type:x[O],data:a,position:T,line:R,column:S})}function c(a){M=0,W+=a,L=W.length;for(var b;J=W[M],L>M;){switch(b=M,O){case l:M=C();break;case m:M=B();break;case n:M=A();break;case o:M=D();break;case p:M=G();break;case w:M=F();break;case q:M=H();break;case k:M=I();break;case u:M=z();break;case j:M=y()}if(b!==M)switch(W[b]){case"\n":S=0,++R;break;default:++S}}return N+=M,W=W.slice(M),Q}function d(a){return P.length&&b(P.join("")),O=v,b("(eof)"),Q}function y(){return P=P.length?[]:P,"/"===K&&"*"===J?(T=N+M-1,O=l,K=J,M+1):"/"===K&&"/"===J?(T=N+M-1,O=m,K=J,M+1):"#"===J?(O=n,T=N+M,M):/\s/.test(J)?(O=u,T=N+M,M):(U=/\d/.test(J),V=/[^\w_]/.test(J),T=N+M,O=U?p:V?o:k,M)}function z(){return/[^\s]/g.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function A(){return"\r"!==J&&"\n"!==J||"\\"===K?(P.push(J),K=J,M+1):(b(P.join("")),O=j,M)}function B(){return A()}function C(){return"/"===J&&"*"===K?(P.push(J),b(P.join("")),O=j,M+1):(P.push(J),K=J,M+1)}function D(){if("."===K&&/\d/.test(J))return O=q,M;if("/"===K&&"*"===J)return O=l,M;if("/"===K&&"/"===J)return O=m,M;if("."===J&&P.length){for(;E(P););return O=q,M}if(";"===J||")"===J||"("===J){if(P.length)for(;E(P););return b(J),O=j,M+1}var a=2===P.length&&"="!==J;if(/[\w_\d\s]/.test(J)||a){for(;E(P););return O=j,M}return P.push(J),K=J,M+1}function E(a){for(var c,d,e=0;;){if(c=f.indexOf(a.slice(0,a.length+e).join("")),d=f[c],-1===c){if(e--+a.length>0)continue;d=a.slice(0,1).join("")}return b(d),T+=d.length,P=P.slice(d.length),P.length}}function F(){return/[^a-fA-F0-9]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function G(){return"."===J?(P.push(J),O=q,K=J,M+1):/[eE]/.test(J)?(P.push(J),O=q,K=J,M+1):"x"===J&&1===P.length&&"0"===P[0]?(O=w,P.push(J),K=J,M+1):/[^\d]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function H(){return"f"===J&&(P.push(J),K=J,M+=1),/[eE]/.test(J)?(P.push(J),K=J,M+1):"-"===J&&/[eE]/.test(K)?(P.push(J),K=J,M+1):/[^\d]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function I(){if(/[^\d\w_]/.test(J)){var a=P.join("");return O=Y.indexOf(a)>-1?t:X.indexOf(a)>-1?s:r,b(P.join("")),O=j,M}return P.push(J),K=J,M+1}var J,K,L,M=0,N=0,O=j,P=[],Q=[],R=1,S=0,T=0,U=!1,V=!1,W="";a=a||{};var X=g,Y=e;return"300 es"===a.version&&(X=i,Y=h),function(a){return Q=[],null!==a?c(a.replace?a.replace(/\r\n/g,"\n"):a):d()}}b.exports=d;var e=a("./lib/literals"),f=a("./lib/operators"),g=a("./lib/builtins"),h=a("./lib/literals-300es"),i=a("./lib/builtins-300es"),j=999,k=9999,l=0,m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=9,v=10,w=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":283,"./lib/builtins-300es":282,"./lib/literals":285,"./lib/literals-300es":284,"./lib/operators":286}],282:[function(a,b,c){var d=a("./builtins");d=d.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),b.exports=d.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":283}],283:[function(a,b,c){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],284:[function(a,b,c){var d=a("./literals");b.exports=d.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":285}],285:[function(a,b,c){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],286:[function(a,b,c){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],287:[function(a,b,c){function d(a,b){var c=e(b),d=[];return d=d.concat(c(a)),d=d.concat(c(null))}var e=a("./index");b.exports=d},{"./index":281}],288:[function(a,b,c){"use strict";function d(a,b,c){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var f=new Int32Array(this.arrayBuffer);a=f[0],b=f[1],c=f[2],this.d=b+2*c;for(var g=0;g<this.d*this.d;g++){var h=f[e+g],i=f[e+g+1];d.push(h===i?null:f.subarray(h,i))}var j=f[e+d.length],k=f[e+d.length+1];this.keys=f.subarray(j,k),this.bboxes=f.subarray(k),this.insert=this._insertReadonly}else{this.d=b+2*c;for(var l=0;l<this.d*this.d;l++)d.push([]);this.keys=[],this.bboxes=[]}this.n=b,this.extent=a,this.padding=c,this.scale=b/a,this.uid=0;var m=c/b*a;this.min=-m,this.max=a+m}b.exports=d;var e=3;d.prototype.insert=function(a,b,c,d,e){this._forEachCell(b,c,d,e,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(b),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(e)},d.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},d.prototype._insertCell=function(a,b,c,d,e,f){this.cells[e].push(f)},d.prototype.query=function(a,b,c,d){var e=this.min,f=this.max;if(e>=a&&e>=b&&c>=f&&d>=f)return Array.prototype.slice.call(this.keys);var g=[],h={};return this._forEachCell(a,b,c,d,this._queryCell,g,h),g},d.prototype._queryCell=function(a,b,c,d,e,f,g){var h=this.cells[e];if(null!==h)for(var i=this.keys,j=this.bboxes,k=0;k<h.length;k++){var l=h[k];if(void 0===g[l]){var m=4*l;a<=j[m+2]&&b<=j[m+3]&&c>=j[m+0]&&d>=j[m+1]?(g[l]=!0,f.push(i[l])):g[l]=!1}}},d.prototype._forEachCell=function(a,b,c,d,e,f,g){for(var h=this._convertToCellCoord(a),i=this._convertToCellCoord(b),j=this._convertToCellCoord(c),k=this._convertToCellCoord(d),l=h;j>=l;l++)for(var m=i;k>=m;m++){var n=this.d*m+l;if(e.call(this,a,b,c,d,n,f,g))return}},d.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},d.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,b=e+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=this.cells[d].length;var f=new Int32Array(b+c+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var g=b,h=0;h<a.length;h++){var i=a[h];f[e+h]=g,f.set(i,g),g+=i.length}return f[e+a.length]=g,f.set(this.keys,g),g+=this.keys.length,f[e+a.length+1]=g,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer}},{}],289:[function(a,b,c){(function(c){"use strict";var d,e=a("is-browser");d="function"==typeof c.matchMedia?!c.matchMedia("(hover: none)").matches:e,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":295}],290:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],291:[function(a,b,c){"use strict";function d(a,b,c){this.vertices=a,this.adjacent=b,this.boundary=c,this.lastVisited=-1}function e(a,b,c){this.vertices=a,this.cell=b,this.index=c}function f(a,b){return k(a.vertices,b.vertices)}function g(a){for(var b=["function orient(){var tuple=this.tuple;return test("],c=0;a>=c;++c)c>0&&b.push(","),b.push("tuple[",c,"]");b.push(")}return orient");var d=new Function("test",b.join("")),e=j[a+1];return e||(e=j),d(e)}function h(a,b,c){this.dimension=a,this.vertices=b,this.simplices=c,this.interior=c.filter(function(a){return!a.boundary}),this.tuple=new Array(a+1);for(var d=0;a>=d;++d)this.tuple[d]=this.vertices[d];var e=l[a];e||(e=l[a]=g(a)),this.orient=e}function i(a,b){var c=a.length;if(0===c)throw new Error("Must have at least d+1 points");var e=a[0].length;if(e>=c)throw new Error("Must input at least d+1 points");var f=a.slice(0,e+1),g=j.apply(void 0,f);if(0===g)throw new Error("Input not in general position");for(var i=new Array(e+1),k=0;e>=k;++k)i[k]=k;0>g&&(i[0]=1,i[1]=0);for(var l=new d(i,new Array(e+1),!1),m=l.adjacent,n=new Array(e+2),k=0;e>=k;++k){for(var o=i.slice(),p=0;e>=p;++p)p===k&&(o[p]=-1);var q=o[0];o[0]=o[1],o[1]=q;var r=new d(o,new Array(e+1),!0);m[k]=r,n[k]=r}n[e+1]=l;for(var k=0;e>=k;++k)for(var o=m[k].vertices,s=m[k].adjacent,p=0;e>=p;++p){var t=o[p];if(0>t)s[p]=l;else for(var u=0;e>=u;++u)m[u].vertices.indexOf(t)<0&&(s[p]=m[u])}for(var v=new h(e,f,n),w=!!b,k=e+1;c>k;++k)v.insert(a[k],w);return v.boundary()}b.exports=i;var j=a("robust-orientation"),k=a("simplicial-complex").compareCells;d.prototype.flip=function(){var a=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=a;var b=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=b};var l=[],m=h.prototype;m.handleBoundaryDegeneracy=function(a,b){var c=this.dimension,d=this.vertices.length-1,e=this.tuple,f=this.vertices,g=[a];for(a.lastVisited=-d;g.length>0;){a=g.pop();for(var h=(a.vertices,a.adjacent),i=0;c>=i;++i){var j=h[i];if(j.boundary&&!(j.lastVisited<=-d)){for(var k=j.vertices,l=0;c>=l;++l){var m=k[l];0>m?e[l]=b:e[l]=f[m]}var n=this.orient();if(n>0)return j;j.lastVisited=-d,0===n&&g.push(j)}}}return null},m.walk=function(a,b){var c=this.vertices.length-1,d=this.dimension,e=this.vertices,f=this.tuple,g=b?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[g];a:for(;!h.boundary;){for(var i=h.vertices,j=h.adjacent,k=0;d>=k;++k)f[k]=e[i[k]];h.lastVisited=c;for(var k=0;d>=k;++k){var l=j[k];if(!(l.lastVisited>=c)){var m=f[k];f[k]=a;var n=this.orient();if(f[k]=m,0>n){h=l;continue a}l.boundary?l.lastVisited=-c:l.lastVisited=c;
}}return}return h},m.addPeaks=function(a,b){var c=this.vertices.length-1,g=this.dimension,h=this.vertices,i=this.tuple,j=this.interior,k=this.simplices,l=[b];b.lastVisited=c,b.vertices[b.vertices.indexOf(-1)]=c,b.boundary=!1,j.push(b);for(var m=[];l.length>0;){var b=l.pop(),n=b.vertices,o=b.adjacent,p=n.indexOf(c);if(!(0>p))for(var q=0;g>=q;++q)if(q!==p){var r=o[q];if(r.boundary&&!(r.lastVisited>=c)){var s=r.vertices;if(r.lastVisited!==-c){for(var t=0,u=0;g>=u;++u)s[u]<0?(t=u,i[u]=a):i[u]=h[s[u]];var v=this.orient();if(v>0){s[t]=c,r.boundary=!1,j.push(r),l.push(r),r.lastVisited=c;continue}r.lastVisited=-c}var w=r.adjacent,x=n.slice(),y=o.slice(),z=new d(x,y,!0);k.push(z);var A=w.indexOf(b);if(!(0>A)){w[A]=z,y[p]=r,x[q]=-1,y[q]=b,o[q]=z,z.flip();for(var u=0;g>=u;++u){var B=x[u];if(!(0>B||B===c)){for(var C=new Array(g-1),D=0,E=0;g>=E;++E){var F=x[E];0>F||E===u||(C[D++]=F)}m.push(new e(C,z,u))}}}}}}m.sort(f);for(var q=0;q+1<m.length;q+=2){var G=m[q],H=m[q+1],I=G.index,J=H.index;0>I||0>J||(G.cell.adjacent[G.index]=H.cell,H.cell.adjacent[H.index]=G.cell)}},m.insert=function(a,b){var c=this.vertices;c.push(a);var d=this.walk(a,b);if(d){for(var e=this.dimension,f=this.tuple,g=0;e>=g;++g){var h=d.vertices[g];0>h?f[g]=a:f[g]=c[h]}var i=this.orient(f);0>i||(0!==i||(d=this.handleBoundaryDegeneracy(d,a)))&&this.addPeaks(a,d)}},m.boundary=function(){for(var a=this.dimension,b=[],c=this.simplices,d=c.length,e=0;d>e;++e){var f=c[e];if(f.boundary){for(var g=new Array(a),h=f.vertices,i=0,j=0,k=0;a>=k;++k)h[k]>=0?g[i++]=h[k]:j=1&k;if(j===(1&a)){var l=g[0];g[0]=g[1],g[1]=l}b.push(g)}}return b}},{"robust-orientation":517,"simplicial-complex":528}],292:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.mid=a,this.left=b,this.right=c,this.leftPoints=d,this.rightPoints=e,this.count=(b?b.count:0)+(c?c.count:0)+d.length}function e(a,b){a.mid=b.mid,a.left=b.left,a.right=b.right,a.leftPoints=b.leftPoints,a.rightPoints=b.rightPoints,a.count=b.count}function f(a,b){var c=o(b);a.mid=c.mid,a.left=c.left,a.right=c.right,a.leftPoints=c.leftPoints,a.rightPoints=c.rightPoints,a.count=c.count}function g(a,b){var c=a.intervals([]);c.push(b),f(a,c)}function h(a,b){var c=a.intervals([]),d=c.indexOf(b);return 0>d?s:(c.splice(d,1),f(a,c),t)}function i(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var e=c(a[d]);if(e)return e}}function j(a,b,c){for(var d=a.length-1;d>=0&&a[d][1]>=b;--d){var e=c(a[d]);if(e)return e}}function k(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function l(a,b){return a-b}function m(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function n(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function o(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(l);for(var e=b[b.length>>1],f=[],g=[],h=[],c=0;c<a.length;++c){var i=a[c];i[1]<e?f.push(i):e<i[0]?g.push(i):h.push(i)}var j=h,k=h.slice();return j.sort(m),k.sort(n),new d(e,o(f),o(g),j,k)}function p(a){this.root=a}function q(a){return new p(a&&0!==a.length?o(a):null)}var r=a("binary-search-bounds"),s=0,t=1,u=2;b.exports=q;var v=d.prototype;v.intervals=function(a){return a.push.apply(a,this.leftPoints),this.left&&this.left.intervals(a),this.right&&this.right.intervals(a),a},v.insert=function(a){var b=this.count-this.leftPoints.length;if(this.count+=1,a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?g(this,a):this.left.insert(a):this.left=o([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?g(this,a):this.right.insert(a):this.right=o([a]);else{var c=r.ge(this.leftPoints,a,m),d=r.ge(this.rightPoints,a,n);this.leftPoints.splice(c,0,a),this.rightPoints.splice(d,0,a)}},v.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return s;var c=this.right?this.right.count:0;if(4*c>3*(b-1))return h(this,a);var d=this.left.remove(a);return d===u?(this.left=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(a[0]>this.mid){if(!this.right)return s;var f=this.left?this.left.count:0;if(4*f>3*(b-1))return h(this,a);var d=this.right.remove(a);return d===u?(this.right=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(1===this.count)return this.leftPoints[0]===a?u:s;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){for(var g=this,i=this.left;i.right;)g=i,i=i.right;if(g===this)i.right=this.right;else{var j=this.left,d=this.right;g.count-=i.count,g.right=i.left,i.left=j,i.right=d}e(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?e(this,this.left):e(this,this.right);return t}for(var j=r.ge(this.leftPoints,a,m);j<this.leftPoints.length&&this.leftPoints[j][0]===a[0];++j)if(this.leftPoints[j]===a){this.count-=1,this.leftPoints.splice(j,1);for(var d=r.ge(this.rightPoints,a,n);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),t}return s},v.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,b);if(c)return c}return i(this.leftPoints,a,b)}if(a>this.mid){if(this.right){var c=this.right.queryPoint(a,b);if(c)return c}return j(this.rightPoints,a,b)}return k(this.leftPoints,b)},v.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var d=this.left.queryInterval(a,b,c);if(d)return d}if(b>this.mid&&this.right){var d=this.right.queryInterval(a,b,c);if(d)return d}return b<this.mid?i(this.leftPoints,b,c):a>this.mid?j(this.rightPoints,a,c):k(this.leftPoints,c)};var w=p.prototype;w.insert=function(a){this.root?this.root.insert(a):this.root=new d(a[0],null,null,[a],[a])},w.remove=function(a){if(this.root){var b=this.root.remove(a);return b===u&&(this.root=null),b!==s}return!1},w.queryPoint=function(a,b){return this.root?this.root.queryPoint(a,b):void 0},w.queryInterval=function(a,b,c){return b>=a&&this.root?this.root.queryInterval(a,b,c):void 0},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":67}],293:[function(a,b,c){"use strict";function d(a,b){b=b||new Array(a.length);for(var c=0;c<a.length;++c)b[a[c]]=c;return b}b.exports=d},{}],294:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=c;return b}b.exports=d},{}],295:[function(a,b,c){b.exports=!0},{}],296:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],297:[function(a,b,c){function d(a){return a||"undefined"==typeof navigator||(a=navigator.userAgent),a&&a.headers&&"string"==typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]),"string"!=typeof a?!1:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}b.exports=d},{}],298:[function(a,b,c){"use strict";var d=Object.prototype.toString;b.exports=function(a){var b;return"[object Object]"===d.call(a)&&(b=Object.getPrototypeOf(a),null===b||b===Object.getPrototypeOf({}))}},{}],299:[function(a,b,c){"use strict";function d(a,b,c,d,f){return new e(a,b,c,d,f)}function e(a,b,c,d,e){b=b||f,c=c||g,e=e||Array,this.nodeSize=d||64,this.points=a,this.ids=new e(a.length),this.coords=new e(2*a.length);for(var i=0;i<a.length;i++)this.ids[i]=i,this.coords[2*i]=b(a[i]),this.coords[2*i+1]=c(a[i]);h(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function f(a){return a[0]}function g(a){return a[1]}var h=a("./sort"),i=a("./range"),j=a("./within");b.exports=d,e.prototype={range:function(a,b,c,d){return i(this.ids,this.coords,a,b,c,d,this.nodeSize)},within:function(a,b,c){return j(this.ids,this.coords,a,b,c,this.nodeSize)}}},{"./range":300,"./sort":301,"./within":302}],300:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){for(var h,i,j=[0,a.length-1,0],k=[];j.length;){var l=j.pop(),m=j.pop(),n=j.pop();if(g>=m-n)for(var o=n;m>=o;o++)h=b[2*o],i=b[2*o+1],h>=c&&e>=h&&i>=d&&f>=i&&k.push(a[o]);else{var p=Math.floor((n+m)/2);h=b[2*p],i=b[2*p+1],h>=c&&e>=h&&i>=d&&f>=i&&k.push(a[p]);var q=(l+1)%2;(0===l?h>=c:i>=d)&&(j.push(n),j.push(p-1),j.push(q)),(0===l?e>=h:f>=i)&&(j.push(p+1),j.push(m),j.push(q))}}return k}b.exports=d},{}],301:[function(a,b,c){"use strict";function d(a,b,c,f,g,h){if(!(c>=g-f)){var i=Math.floor((f+g)/2);e(a,b,i,f,g,h%2),d(a,b,c,f,i-1,h+1),d(a,b,c,i+1,g,h+1)}}function e(a,b,c,d,g,h){for(;g>d;){if(g-d>600){var i=g-d+1,j=c-d+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(0>j-i/2?-1:1),n=Math.max(d,Math.floor(c-j*l/i+m)),o=Math.min(g,Math.floor(c+(i-j)*l/i+m));e(a,b,c,n,o,h)}var p=b[2*c+h],q=d,r=g;for(f(a,b,d,c),b[2*g+h]>p&&f(a,b,d,g);r>q;){for(f(a,b,q,r),q++,r--;b[2*q+h]<p;)q++;for(;b[2*r+h]>p;)r--}b[2*d+h]===p?f(a,b,d,r):(r++,f(a,b,r,g)),c>=r&&(d=r+1),r>=c&&(g=r-1)}}function f(a,b,c,d){g(a,c,d),g(b,2*c,2*d),g(b,2*c+1,2*d+1)}function g(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}b.exports=d},{}],302:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h=[0,a.length-1,0],i=[],j=f*f;h.length;){var k=h.pop(),l=h.pop(),m=h.pop();if(g>=l-m)for(var n=m;l>=n;n++)e(b[2*n],b[2*n+1],c,d)<=j&&i.push(a[n]);else{var o=Math.floor((m+l)/2),p=b[2*o],q=b[2*o+1];e(p,q,c,d)<=j&&i.push(a[o]);var r=(k+1)%2;(0===k?p>=c-f:q>=d-f)&&(h.push(m),h.push(o-1),h.push(r)),(0===k?c+f>=p:d+f>=q)&&(h.push(o+1),h.push(l),h.push(r))}}return i}function e(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f}b.exports=d},{}],303:[function(a,b,c){"use strict";function d(a,b){var c;if(l(a)){var i,j=a.stops&&"object"==typeof a.stops[0][0],k=j||void 0!==a.property,m=j||!k,n=a.type||b||"exponential";if("exponential"===n)i=g;else if("interval"===n)i=f;else if("categorical"===n)i=e;else{if("identity"!==n)throw new Error('Unknown function type "'+n+'"');i=h}if(j){for(var o={},p=[],q=0;q<a.stops.length;q++){var r=a.stops[q];void 0===o[r[0].zoom]&&(o[r[0].zoom]={zoom:r[0].zoom,type:a.type,property:a.property,stops:[]}),o[r[0].zoom].stops.push([r[0].value,r[1]])}for(var s in o)p.push([o[s].zoom,d(o[s])]);c=function(b,c){return g({stops:p,base:a.base},b)(b,c)},c.isFeatureConstant=!1,c.isZoomConstant=!1}else m?(c=function(b){return i(a,b)},c.isFeatureConstant=!0,c.isZoomConstant=!1):(c=function(b,c){return i(a,c[a.property])},c.isFeatureConstant=!1,c.isZoomConstant=!0)}else c=function(){return a},c.isFeatureConstant=!0,c.isZoomConstant=!0;return c}function e(a,b){for(var c=0;c<a.stops.length;c++)if(b===a.stops[c][0])return a.stops[c][1];return a.stops[0][1]}function f(a,b){for(var c=0;c<a.stops.length&&!(b<a.stops[c][0]);c++);return a.stops[Math.max(c-1,0)][1]}function g(a,b){for(var c=void 0!==a.base?a.base:1,d=0;;){if(d>=a.stops.length)break;if(b<=a.stops[d][0])break;d++}return 0===d?a.stops[d][1]:d===a.stops.length?a.stops[d-1][1]:i(b,c,a.stops[d-1][0],a.stops[d][0],a.stops[d-1][1],a.stops[d][1])}function h(a,b){return b}function i(a,b,c,d,e,f){return"function"==typeof e?function(){var g=e.apply(void 0,arguments),h=f.apply(void 0,arguments);return i(a,b,c,d,g,h)}:e.length?k(a,b,c,d,e,f):j(a,b,c,d,e,f)}function j(a,b,c,d,e,f){var g,h=d-c,i=a-c;return g=1===b?i/h:(Math.pow(b,i)-1)/(Math.pow(b,h)-1),e*(1-g)+f*g}function k(a,b,c,d,e,f){for(var g=[],h=0;h<e.length;h++)g[h]=j(a,b,c,d,e[h],f[h]);return g}function l(a){return"object"==typeof a&&(a.stops||"identity"===a.type)}b.exports.isFunctionDefinition=l,b.exports.interpolated=function(a){return d(a,"exponential")},b.exports["piecewise-constant"]=function(a){return d(a,"interval")}},{}],304:[function(a,b,c){a("path");b.exports={debug:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},circle:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    float t = smoothstep(1.0 - max(blur, v_antialiasblur), 1.0, length(v_extrude));\n    gl_FragColor = color * (1.0 - t) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\nuniform float u_devicepixelratio;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / u_devicepixelratio / radius;\n}\n"},line:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform float u_blur;\n\nvarying vec2 v_linewidth;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\nuniform mediump float u_blur;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_blur;\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    alpha *= u_opacity;\n\n    gl_FragColor = color * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n    v_linesofar = a_linesofar;\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linesdfpattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\n\nuniform float u_blur;\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},outline:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},outlinepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    \n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},pattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n}\n"},raster:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity0;\nuniform float u_opacity1;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = color0 * u_opacity0 + color1 * u_opacity1;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb), color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},icon:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},sdf:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nconst float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = (gl_Position.w - 0.5);\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},collisionbox:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"}},b.exports.util="float evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n"},{path:477}],305:[function(a,b,c){"use strict";function d(a,b){this.message=(a?a+": ":"")+e.apply(e,Array.prototype.slice.call(arguments,2)),null!==b&&void 0!==b&&b.__line__&&(this.line=b.__line__)}var e=a("util").format;b.exports=d},{util:558}],306:[function(a,b,c){"use strict";b.exports=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}},{}],307:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}},{}],308:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}},{}],309:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("../util/extend");b.exports=function(b){var c=a("./validate_function"),g=a("./validate_object"),h={"*":function(){return[]},array:a("./validate_array"),"boolean":a("./validate_boolean"),number:a("./validate_number"),color:a("./validate_color"),constants:a("./validate_constants"),"enum":a("./validate_enum"),filter:a("./validate_filter"),"function":a("./validate_function"),layer:a("./validate_layer"),object:a("./validate_object"),source:a("./validate_source"),string:a("./validate_string")},i=b.value,j=b.valueSpec,k=b.key,l=b.styleSpec,m=b.style;if("string"===e(i)&&"@"===i[0]){if(l.$version>7)return[new d(k,i,"constants have been deprecated as of v8")];if(!(i in m.constants))return[new d(k,i,'constant "%s" not found',i)];b=f({},b,{value:m.constants[i]})}return j["function"]&&"object"===e(i)?c(b):j.type&&h[j.type]?h[j.type](b):g(f({},b,{valueSpec:j.type?l[j.type]:j}))}},{"../error/validation_error":305,"../util/extend":306,"../util/get_type":307,"./validate_array":310,"./validate_boolean":311,"./validate_color":312,"./validate_constants":313,"./validate_enum":314,"./validate_filter":315,"./validate_function":316,"./validate_layer":318,"./validate_number":320,"./validate_object":321,"./validate_source":323,"./validate_string":324}],310:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("./validate"),f=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.valueSpec,g=a.style,h=a.styleSpec,i=a.key,j=a.arrayElementValidator||e;if("array"!==d(b))return[new f(i,b,"array expected, %s found",d(b))];if(c.length&&b.length!==c.length)return[new f(i,b,"array length %d expected, length %d found",c.length,b.length)];if(c["min-length"]&&b.length<c["min-length"])return[new f(i,b,"array length at least %d expected, length %d found",c["min-length"],b.length)];var k={type:c.value};h.$version<7&&(k["function"]=c["function"]),"object"===d(c.value)&&(k=c.value);for(var l=[],m=0;m<b.length;m++)l=l.concat(j({array:b,arrayIndex:m,value:b[m],valueSpec:k,style:g,styleSpec:h,key:i+"["+m+"]"}));return l}},{"../error/validation_error":305,"../util/get_type":307,"./validate":309}],311:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"boolean"!==f?[new e(c,b,"boolean expected, %s found",f)]:[]}},{"../error/validation_error":305,"../util/get_type":307}],312:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("csscolorparser").parseCSSColor;b.exports=function(a){var b=a.key,c=a.value,g=e(c);return"string"!==g?[new d(b,c,"color expected, %s found",g)]:null===f(c)?[new d(b,c,'color expected, "%s" found',c)]:[]}},{"../error/validation_error":305,"../util/get_type":307,csscolorparser:109}],313:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type");b.exports=function(a){var b=a.key,c=a.value,f=a.styleSpec;if(f.$version>7)return c?[new d(b,c,"constants have been deprecated as of v8")]:[];var g=e(c);if("object"!==g)return[new d(b,c,"object expected, %s found",g)];var h=[];for(var i in c)"@"!==i[0]&&h.push(new d(b+"."+i,c[i],'constants must start with "@"'));return h}},{"../error/validation_error":305,"../util/get_type":307}],314:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=[];return-1===f.values.indexOf(e(c))&&g.push(new d(b,c,"expected one of [%s], %s found",f.values.join(", "),c)),g}},{"../error/validation_error":305,"../util/unbundle_jsonlint":308}],315:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_enum"),f=a("../util/get_type"),g=a("../util/unbundle_jsonlint");b.exports=function h(a){var b,c=a.value,i=a.key,j=a.styleSpec,k=[];if("array"!==f(c))return[new d(i,c,"array expected, %s found",f(c))];if(c.length<1)return[new d(i,c,"filter array must have at least 1 element")];switch(k=k.concat(e({key:i+"[0]",value:c[0],valueSpec:j.filter_operator,style:a.style,styleSpec:a.styleSpec})),g(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&"$type"==c[1]&&k.push(new d(i,c,'"$type" cannot be use with operator "%s"',c[0]));case"==":case"!=":3!=c.length&&k.push(new d(i,c,'filter array for operator "%s" must have 3 elements',c[0]));case"in":case"!in":c.length>=2&&(b=f(c[1]),"string"!==b?k.push(new d(i+"[1]",c[1],"string expected, %s found",b)):"@"===c[1][0]&&k.push(new d(i+"[1]",c[1],"filter key cannot be a constant")));for(var l=2;l<c.length;l++)b=f(c[l]),"$type"==c[1]?k=k.concat(e({key:i+"["+l+"]",value:c[l],valueSpec:j.geometry_type,style:a.style,styleSpec:a.styleSpec})):"string"===b&&"@"===c[l][0]?k.push(new d(i+"["+l+"]",c[l],"filter value cannot be a constant")):"string"!==b&&"number"!==b&&"boolean"!==b&&k.push(new d(i+"["+l+"]",c[l],"string, number, or boolean expected, %s found",b));break;case"any":case"all":case"none":for(l=1;l<c.length;l++)k=k.concat(h({key:i+"["+l+"]",value:c[l],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":b=f(c[1]),2!==c.length?k.push(new d(i,c,'filter array for "%s" operator must have 2 elements',c[0])):"string"!==b?k.push(new d(i+"[1]",c[1],"string expected, %s found",b)):"@"===c[1][0]&&k.push(new d(i+"[1]",c[1],"filter key cannot be a constant"))}return k}},{"../error/validation_error":305,"../util/get_type":307,"../util/unbundle_jsonlint":308,"./validate_enum":314}],316:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate"),g=a("./validate_object"),h=a("./validate_array"),i=a("./validate_number");b.exports=function(a){function b(a){var b=[],f=a.value;return b=b.concat(h({key:a.key,value:f,valueSpec:a.valueSpec,style:a.style,styleSpec:a.styleSpec,arrayElementValidator:c})),"array"===e(f)&&0===f.length&&b.push(new d(a.key,f,"array must have at least one stop")),b}function c(a){var b=[],c=a.value,h=a.key;if("array"!==e(c))return[new d(h,c,"array expected, %s found",e(c))];if(2!==c.length)return[new d(h,c,"array length %d expected, length %d found",2,c.length)];var m=e(c[0]);if(k||(k=m),m!==k)return[new d(h,c,"%s stop key type must match previous stop key type %s",m,k)];if("object"===m){if(void 0===c[0].zoom)return[new d(h,c,"object stop key must have zoom")];if(void 0===c[0].value)return[new d(h,c,"object stop key must have value")];b=b.concat(g({key:h+"[0]",value:c[0],valueSpec:{zoom:{}},style:a.style,styleSpec:a.styleSpec,objectElementValidators:{zoom:i,value:j}}))}else b=b.concat((n?i:j)({key:h+"[0]",value:c[0],valueSpec:{},style:a.style,styleSpec:a.styleSpec}));return b=b.concat(f({key:h+"[1]",value:c[1],valueSpec:l,style:a.style,styleSpec:a.styleSpec})),"number"===e(c[0])&&("piecewise-constant"===l["function"]&&c[0]%1!==0&&b.push(new d(h+"[0]",c[0],"zoom level for piecewise-constant functions must be an integer")),0!==a.arrayIndex&&c[0]<a.array[a.arrayIndex-1][0]&&b.push(new d(h+"[0]",c[0],"array stops must appear in ascending order"))),b}function j(a){var b=[],c=e(a.value);return"number"!==c&&"string"!==c&&"array"!==c&&b.push(new d(a.key,a.value,"property value must be a number, string or array")),b}var k,l=a.valueSpec,m=void 0!==a.value.property||"object"===k,n=void 0===a.value.property||"object"===k,o=g({key:a.key,value:a.value,valueSpec:a.styleSpec["function"],style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:b}});return a.styleSpec.$version>=8&&(m&&!a.valueSpec["property-function"]?o.push(new d(a.key,a.value,"property functions not supported")):n&&!a.valueSpec["zoom-function"]&&o.push(new d(a.key,a.value,"zoom functions not supported"))),o}},{"../error/validation_error":305,"../util/get_type":307,"./validate":309,"./validate_array":310,"./validate_number":320,"./validate_object":321}],317:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_string");b.exports=function(a){var b=a.value,c=a.key,f=e(a);return f.length?f:(-1===b.indexOf("{fontstack}")&&f.push(new d(c,b,'"glyphs" url must include a "{fontstack}" token')),-1===b.indexOf("{range}")&&f.push(new d(c,b,'"glyphs" url must include a "{range}" token')),f)}},{"../error/validation_error":305,"./validate_string":324}],318:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_filter"),h=a("./validate_paint_property"),i=a("./validate_layout_property"),j=a("../util/extend");b.exports=function(a){var b=[],c=a.value,k=a.key,l=a.style,m=a.styleSpec;c.type||c.ref||b.push(new d(k,c,'either "type" or "ref" is required'));var n=e(c.type),o=e(c.ref);if(c.id)for(var p=0;p<a.arrayIndex;p++){var q=l.layers[p];e(q.id)===e(c.id)&&b.push(new d(k,c.id,'duplicate layer id "%s", previously used at line %d',c.id,q.id.__line__))}if("ref"in c){["type","source","source-layer","filter","layout"].forEach(function(a){a in c&&b.push(new d(k,c[a],'"%s" is prohibited for ref layers',a))});var r;l.layers.forEach(function(a){a.id==o&&(r=a)}),r?r.ref?b.push(new d(k,c.ref,"ref cannot reference another ref layer")):n=e(r.type):b.push(new d(k,c.ref,'ref layer "%s" not found',o))}else if("background"!==n)if(c.source){var s=l.sources&&l.sources[c.source];s?"vector"==s.type&&"raster"==n?b.push(new d(k,c.source,'layer "%s" requires a raster source',c.id)):"raster"==s.type&&"raster"!=n?b.push(new d(k,c.source,'layer "%s" requires a vector source',c.id)):"vector"!=s.type||c["source-layer"]||b.push(new d(k,c,'layer "%s" must specify a "source-layer"',c.id)):b.push(new d(k,c.source,'source "%s" not found',c.source))}else b.push(new d(k,c,'missing required property "source"'));return b=b.concat(f({key:k,value:c,valueSpec:m.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{filter:g,layout:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return i(j({layerType:n},a))}}})},paint:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return h(j({layerType:n},a))}}})}}}))}},{"../error/validation_error":305,"../util/extend":306,"../util/unbundle_jsonlint":308,"./validate_filter":315,"./validate_layout_property":319,"./validate_object":321,"./validate_paint_property":322}],319:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["layout_"+a.layerType];if(a.valueSpec||i[h]){var j=[];return"symbol"===a.layerType&&("icon-image"===h&&c&&!c.sprite?j.push(new e(b,g,'use of "icon-image" requires a style "sprite" property')):"text-field"===h&&c&&!c.glyphs&&j.push(new e(b,g,'use of "text-field" requires a style "glyphs" property'))),j.concat(d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}))}return[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":305,"./validate":309}],320:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=d(c);return"number"!==g?[new e(b,c,"number expected, %s found",g)]:"minimum"in f&&c<f.minimum?[new e(b,c,"%s is less than the minimum value %s",c,f.minimum)]:"maximum"in f&&c>f.maximum?[new e(b,c,"%s is greater than the maximum value %s",c,f.maximum)]:[]}},{"../error/validation_error":305,"../util/get_type":307}],321:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate");b.exports=function(a){var b=a.key,c=a.value,g=a.valueSpec,h=a.objectElementValidators||{},i=a.style,j=a.styleSpec,k=[],l=e(c);if("object"!==l)return[new d(b,c,"object expected, %s found",l)];for(var m in c){var n=m.split(".")[0],o=g&&(g[n]||g["*"]),p=h[n]||h["*"];o||p?k=k.concat((p||f)({key:(b?b+".":b)+m,value:c[m],valueSpec:o,style:i,styleSpec:j,object:c,objectKey:m})):""!==b&&1!==b.split(".").length&&k.push(new d(b,c[m],'unknown property "%s"',m))}for(n in g)g[n].required&&void 0===g[n]["default"]&&void 0===c[n]&&k.push(new d(b,c,'missing required property "%s"',n));return k}},{"../error/validation_error":305,"../util/get_type":307,"./validate":309}],322:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["paint_"+a.layerType],j=h.match(/^(.*)-transition$/);return j&&i[j[1]]&&i[j[1]].transition?d({key:b,value:g,valueSpec:f.transition,style:c,styleSpec:f}):a.valueSpec||i[h]?d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}):[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":305,"./validate":309}],323:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_enum");b.exports=function(a){var b=a.value,c=a.key,h=a.styleSpec,i=a.style;if(!b.type)return[new d(c,b,'"type" is required')];var j=e(b.type);switch(j){case"vector":case"raster":var k=[];if(k=k.concat(f({key:c,value:b,valueSpec:h.source_tile,style:a.style,styleSpec:h})),"url"in b)for(var l in b)["type","url","tileSize"].indexOf(l)<0&&k.push(new d(c+"."+l,b[l],'a source with a "url" property may not include a "%s" property',l));return k;case"geojson":return f({key:c,value:b,valueSpec:h.source_geojson,style:i,styleSpec:h});case"video":return f({key:c,value:b,valueSpec:h.source_video,style:i,styleSpec:h});case"image":return f({key:c,value:b,valueSpec:h.source_image,style:i,styleSpec:h});default:return g({key:c+".type",value:b.type,valueSpec:{values:["vector","raster","geojson","video","image"]},style:i,styleSpec:h})}}},{"../error/validation_error":305,"../util/unbundle_jsonlint":308,"./validate_enum":314,"./validate_object":321}],324:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"string"!==f?[new e(c,b,"string expected, %s found",f)]:[]}},{"../error/validation_error":305,"../util/get_type":307}],325:[function(a,b,c){"use strict";function d(a,b){b=b||i;var c=[];return c=c.concat(h({key:"",value:a,valueSpec:b.$root,styleSpec:b,style:a,objectElementValidators:{glyphs:j}})),b.$version>7&&a.constants&&(c=c.concat(g({key:"constants",value:a.constants,style:a,styleSpec:b}))),e(c)}function e(a){return[].concat(a).sort(function(a,b){return a.line-b.line})}function f(a){return function(){return e(a.apply(this,arguments))}}var g=a("./validate/validate_constants"),h=a("./validate/validate"),i=a("../reference/latest.min"),j=a("./validate/validate_glyphs_url");d.source=f(a("./validate/validate_source")),d.layer=f(a("./validate/validate_layer")),d.filter=f(a("./validate/validate_filter")),d.paintProperty=f(a("./validate/validate_paint_property")),d.layoutProperty=f(a("./validate/validate_layout_property")),b.exports=d},{"../reference/latest.min":326,"./validate/validate":309,"./validate/validate_constants":313,"./validate/validate_filter":315,"./validate/validate_glyphs_url":317,"./validate/validate_layer":318,"./validate/validate_layout_property":319,"./validate/validate_paint_property":322,"./validate/validate_source":323}],326:[function(a,b,c){b.exports=a("./v8.min.json")},{"./v8.min.json":327}],327:[function(a,b,c){b.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"]},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"]},data:{type:"*"},maxzoom:{type:"number","default":14},buffer:{type:"number","default":64},tolerance:{type:"number","default":3},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":400},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:["video"]},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:["image"]},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"]},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:22},maxzoom:{type:"number",minimum:0,maximum:22},interactive:{
type:"boolean","default":!1},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_fill:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_circle:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_line:{"line-cap":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["point","line"],"default":"point"},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"viewport",requires:["icon-image"]},"icon-size":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!1,values:["none","both","width","height"],"default":"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image","icon-text-fit","text-field"]},"icon-image":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],requires:["text-field"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"viewport",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":"",tokens:!0},"text-font":{type:"array",value:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["left","center","right"],"default":"center",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"default":"center",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number","default":0,period:360,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["none","uppercase","lowercase"],"default":"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems","function":"interpolated","zoom-function":!0,"property-function":!0,length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field","icon-image"]},visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_raster:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none","has","!has"]},geometry_type:{type:"enum",values:["Point","LineString","Polygon"]},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"]},"function":{stops:{type:"array",required:!0,value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:["exponential","interval","categorical"],"default":"exponential"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!0},"fill-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["fill-translate"]},"fill-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant","zoom-function":!0,"property-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map"}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number","function":"interpolated","zoom-function":!0,"default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated","zoom-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}}}},{}],328:[function(a,b,c){"use strict";function d(a){return!!(e()&&f()&&g()&&h()&&i()&&j()&&k()&&l(a&&a.failIfMajorPerformanceCaveat))}function e(){return"undefined"!=typeof window&&"undefined"!=typeof document}function f(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function g(){return Function.prototype&&Function.prototype.bind}function h(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function i(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function j(){return"Worker"in window}function k(){return"Uint8ClampedArray"in window}function l(a){return void 0===n[a]&&(n[a]=m(a)),n[a]}function m(a){var b=document.createElement("canvas"),c=Object.create(d.webGLContextAttributes);return c.failIfMajorPerformanceCaveat=a,b.probablySupportsContext?b.probablySupportsContext("webgl",c)||b.probablySupportsContext("experimental-webgl",c):b.supportsContext?b.supportsContext("webgl",c)||b.supportsContext("experimental-webgl",c):b.getContext("webgl",c)||b.getContext("experimental-webgl",c)}"undefined"!=typeof b&&b.exports?b.exports=d:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=d);var n={};d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],329:[function(a,b,c){"use strict";function d(a){var b=a.layoutVertexArrayType;this.layoutVertexArray=new b;var c=a.elementArrayType;c&&(this.elementArray=new c);var d=a.elementArrayType2;d&&(this.elementArray2=new d),this.paintVertexArrays=e.mapObject(a.paintVertexArrayTypes,function(a){return new a})}var e=a("../util/util");b.exports=d,d.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,d.prototype.hasCapacityFor=function(a){return this.layoutVertexArray.length+a<=d.MAX_VERTEX_ARRAY_LENGTH},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.trim=function(){this.layoutVertexArray.trim(),this.elementArray&&this.elementArray.trim(),this.elementArray2&&this.elementArray2.trim();for(var a in this.paintVertexArrays)this.paintVertexArrays[a].trim()},d.prototype.serialize=function(){return{layoutVertexArray:this.layoutVertexArray.serialize(),elementArray:this.elementArray&&this.elementArray.serialize(),elementArray2:this.elementArray2&&this.elementArray2.serialize(),paintVertexArrays:e.mapObject(this.paintVertexArrays,function(a){return a.serialize()})}},d.prototype.getTransferables=function(a){a.push(this.layoutVertexArray.arrayBuffer),this.elementArray&&a.push(this.elementArray.arrayBuffer),this.elementArray2&&a.push(this.elementArray2.arrayBuffer);for(var b in this.paintVertexArrays)a.push(this.paintVertexArrays[b].arrayBuffer)}},{"../util/util":443}],330:[function(a,b,c){"use strict";function d(a){if(this.zoom=a.zoom,this.overscaling=a.overscaling,this.layer=a.layer,this.childLayers=a.childLayers,this.type=this.layer.type,this.features=[],this.id=this.layer.id,this.index=a.index,this.sourceLayer=this.layer.sourceLayer,this.sourceLayerIndex=a.sourceLayerIndex,this.minZoom=this.layer.minzoom,this.maxZoom=this.layer.maxzoom,this.paintAttributes=e(this),a.arrays){var b=this.programInterfaces;this.bufferGroups=k.mapObject(a.arrays,function(c,d){var e=b[d],f=a.paintVertexArrayTypes[d];return c.map(function(a){return new j(a,{layoutVertexArrayType:e.layoutVertexArrayType.serialize(),elementArrayType:e.elementArrayType&&e.elementArrayType.serialize(),elementArrayType2:e.elementArrayType2&&e.elementArrayType2.serialize(),paintVertexArrayTypes:f})})})}}function e(a){var b={};for(var c in a.programInterfaces){for(var d=b[c]={},e=0;e<a.childLayers.length;e++){var h=a.childLayers[e];d[h.id]={attributes:[],uniforms:[],defines:[],vertexPragmas:{define:{},initialize:{}},fragmentPragmas:{define:{},initialize:{}}}}var i=a.programInterfaces[c];if(i.paintAttributes)for(var j="{precision}",l="{type}",n=0;n<i.paintAttributes.length;n++){var o=i.paintAttributes[n];o.multiplier=o.multiplier||1;for(var p=0;p<a.childLayers.length;p++){var q=a.childLayers[p],r=d[q.id],s=o.name;m("a_"===o.name.slice(0,2));var t,u=o.name.slice(2);if(r.fragmentPragmas.initialize[u]="",q.isPaintValueFeatureConstant(o.paintProperty))r.uniforms.push(o),r.fragmentPragmas.define[u]=r.vertexPragmas.define[u]=["uniform",j,l,s].join(" ")+";",r.fragmentPragmas.initialize[u]=r.vertexPragmas.initialize[u]=[j,l,u,"=",s].join(" ")+";\n";else if(q.isPaintValueZoomConstant(o.paintProperty)){r.attributes.push(k.extend({},o,{name:s})),t=["varying",j,l,u].join(" ")+";\n";var v=[r.fragmentPragmas.define[u],"attribute",j,l,s].join(" ")+";\n";r.fragmentPragmas.define[u]=t,r.vertexPragmas.define[u]=t+v,r.vertexPragmas.initialize[u]=[u,"=",s,"/",o.multiplier.toFixed(1)].join(" ")+";\n"}else{for(var w="u_"+s.slice(2)+"_t",x=q.getPaintValueStopZoomLevels(o.paintProperty),y=0;y<x.length&&x[y]<a.zoom;)y++;for(var z=Math.max(0,Math.min(x.length-4,y-2)),A=[],B=0;4>B;B++)A.push(x[Math.min(z+B,x.length-1)]);t=["varying",j,l,u].join(" ")+";\n",r.vertexPragmas.define[u]=t+["uniform","lowp","float",w].join(" ")+";\n",r.fragmentPragmas.define[u]=t,r.uniforms.push(k.extend({},o,{name:w,getValue:g(o,z),components:1}));var C=o.components;if(1===C)r.attributes.push(k.extend({},o,{getValue:f(o,A),isFunction:!0,components:4*C})),r.vertexPragmas.define[u]+=["attribute",j,"vec4",s].join(" ")+";\n",r.vertexPragmas.initialize[u]=[u,"=","evaluate_zoom_function_1("+s+", "+w+")","/",o.multiplier.toFixed(1)].join(" ")+";\n";else{for(var D=[],E=0;4>E;E++)D.push(s+E),r.attributes.push(k.extend({},o,{getValue:f(o,[A[E]]),isFunction:!0,name:s+E})),r.vertexPragmas.define[u]+=["attribute",j,l,s+E].join(" ")+";\n";r.vertexPragmas.initialize[u]=[u," = ","evaluate_zoom_function_4("+D.join(", ")+", "+w+")","/",o.multiplier.toFixed(1)].join(" ")+";\n"}}}}}return b}function f(a,b){return function(c,d,e){if(1===b.length)return a.getValue(c,k.extend({},d,{zoom:b[0]}),e);for(var f=[],g=0;g<b.length;g++){var h=b[g];f.push(a.getValue(c,k.extend({},d,{zoom:h}),e)[0])}return f}}function g(a,b){return function(c,d){var e=c.getPaintInterpolationT(a.paintProperty,d.zoom);return[Math.max(0,Math.min(4,e-b))]}}var h=a("feature-filter"),i=a("./array_group"),j=a("./buffer_group"),k=a("../util/util"),l=a("../util/struct_array"),m=a("assert");b.exports=d,d.create=function(b){var c={fill:a("./bucket/fill_bucket"),line:a("./bucket/line_bucket"),circle:a("./bucket/circle_bucket"),symbol:a("./bucket/symbol_bucket")};return new c[b.layer.type](b)},d.EXTENT=8192,d.prototype.populateArrays=function(){this.createArrays(),this.recalculateStyleLayers();for(var a=0;a<this.features.length;a++)this.addFeature(this.features[a]);this.trimArrays()},d.prototype.prepareArrayGroup=function(a,b){var c=this.arrayGroups[a],d=c.length&&c[c.length-1];return d&&d.hasCapacityFor(b)||(d=new i({layoutVertexArrayType:this.programInterfaces[a].layoutVertexArrayType,elementArrayType:this.programInterfaces[a].elementArrayType,elementArrayType2:this.programInterfaces[a].elementArrayType2,paintVertexArrayTypes:this.paintVertexArrayTypes[a]}),d.index=c.length,c.push(d)),d},d.prototype.createArrays=function(){this.arrayGroups={},this.paintVertexArrayTypes={};for(var a in this.programInterfaces){this.arrayGroups[a]=[];var b=this.paintVertexArrayTypes[a]={},c=this.paintAttributes[a];for(var e in c)b[e]=new d.VertexArrayType(c[e].attributes)}},d.prototype.destroy=function(a){for(var b in this.bufferGroups)for(var c=this.bufferGroups[b],d=0;d<c.length;d++)c[d].destroy(a)},d.prototype.trimArrays=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)b[c].trim()},d.prototype.isEmpty=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)if(!b[c].isEmpty())return!1;return!0},d.prototype.getTransferables=function(a){for(var b in this.arrayGroups)for(var c=this.arrayGroups[b],d=0;d<c.length;d++)c[d].getTransferables(a)},d.prototype.setUniforms=function(a,b,c,d,e){for(var f=this.paintAttributes[b][d.id].uniforms,g=0;g<f.length;g++){var h=f[g],i=c[h.name];a["uniform"+h.components+"fv"](i,h.getValue(d,e))}},d.prototype.serialize=function(){return{layerId:this.layer.id,zoom:this.zoom,arrays:k.mapObject(this.arrayGroups,function(a){return a.map(function(a){return a.serialize()})}),paintVertexArrayTypes:k.mapObject(this.paintVertexArrayTypes,function(a){return k.mapObject(a,function(a){return a.serialize()})}),childLayerIds:this.childLayers.map(function(a){return a.id})}},d.prototype.createFilter=function(){this.filter||(this.filter=h(this.layer.filter))};var n={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};d.prototype.recalculateStyleLayers=function(){for(var a=0;a<this.childLayers.length;a++)this.childLayers[a].recalculate(this.zoom,n)},d.prototype.populatePaintArrays=function(a,b,c,d,e){for(var f=0;f<this.childLayers.length;f++)for(var g=this.childLayers[f],h=this.arrayGroups[a],i=d.index;i<h.length;i++){var j=h[i],k=j.layoutVertexArray.length,l=j.paintVertexArrays[g.id];l.resize(k);for(var m=this.paintAttributes[a][g.id].attributes,n=0;n<m.length;n++)for(var o=m[n],p=o.getValue(g,b,c),q=o.multiplier||1,r=o.components||1,s=i===d.index?e:0,t=s;k>t;t++)for(var u=l.get(t),v=0;r>v;v++){var w=r>1?o.name+v:o.name;u[w]=p[v]*q}}},d.VertexArrayType=function(a){return new l({members:a,alignment:4})},d.ElementArrayType=function(a){return new l({members:[{type:"Uint16",name:"vertices",components:a||3}]})}},{"../util/struct_array":441,"../util/util":443,"./array_group":329,"./bucket/circle_bucket":331,"./bucket/fill_bucket":332,"./bucket/line_bucket":333,"./bucket/symbol_bucket":334,"./buffer_group":336,assert:48,"feature-filter":133}],331:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addCircleVertex=function(a,b,c,d,e){return a.emplaceBack(2*b+(d+1)/2,2*c+(e+1)/2)},d.prototype.programInterfaces={circle:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new e.ElementArrayType,paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("circle-color",b,c)},multiplier:255,paintProperty:"circle-color"},{name:"a_radius",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-radius",b,c)]},multiplier:10,paintProperty:"circle-radius"},{name:"a_blur",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-blur",b,c)]},multiplier:10,paintProperty:"circle-blur"},{name:"a_opacity",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-opacity",b,c)]},multiplier:255,paintProperty:"circle-opacity"}]}},d.prototype.addFeature=function(a){for(var b={zoom:this.zoom},c=g(a),d=this.prepareArrayGroup("circle",0),e=d.layoutVertexArray.length,f=0;f<c.length;f++)for(var i=0;i<c[f].length;i++){var j=c[f][i].x,k=c[f][i].y;if(!(0>j||j>=h||0>k||k>=h)){var l=this.prepareArrayGroup("circle",4),m=l.layoutVertexArray,n=this.addCircleVertex(m,j,k,-1,-1);this.addCircleVertex(m,j,k,1,-1),this.addCircleVertex(m,j,k,1,1),this.addCircleVertex(m,j,k,-1,1),l.elementArray.emplaceBack(n,n+1,n+2),l.elementArray.emplaceBack(n,n+3,n+2)}}this.populatePaintArrays("circle",b,a.properties,d,e)}},{"../../util/util":443,"../bucket":330,"../load_geometry":338}],332:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=a("earcut"),i=a("../../util/classify_rings"),j=500;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.programInterfaces={fill:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new e.ElementArrayType(1),elementArrayType2:new e.ElementArrayType(2),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-color",b,c)},multiplier:255,paintProperty:"fill-color"},{name:"a_outline_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-outline-color",b,c)},multiplier:255,paintProperty:"fill-outline-color"},{name:"a_opacity",components:1,type:"Uint8",getValue:function(a,b,c){return[a.getPaintValue("fill-opacity",b,c)]},multiplier:255,paintProperty:"fill-opacity"}]}},d.prototype.addFeature=function(a){for(var b=g(a),c=i(b,j),d=this.prepareArrayGroup("fill",0),e=d.layoutVertexArray.length,f=0;f<c.length;f++)this.addPolygon(c[f]);this.populatePaintArrays("fill",{zoom:this.zoom},a.properties,d,e)},d.prototype.addPolygon=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].length;for(var d=this.prepareArrayGroup("fill",b),e=[],f=[],g=d.layoutVertexArray.length,i=0;i<a.length;i++){var j=a[i];i>0&&f.push(e.length/2);for(var k=0;k<j.length;k++){var l=j[k],m=d.layoutVertexArray.emplaceBack(l.x,l.y);k>=1&&d.elementArray2.emplaceBack(m-1,m),e.push(l.x),e.push(l.y)}}for(var n=h(e,f),o=0;o<n.length;o++)d.elementArray.emplaceBack(n[o]+g)}},{"../../util/classify_rings":431,"../../util/util":443,"../bucket":330,"../load_geometry":338,earcut:127}],333:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT,i=63,j=Math.cos(37.5*(Math.PI/180)),k=15,l=15,m=.5,n=Math.pow(2,l-1)/m;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addLineVertex=function(a,b,c,d,e,f,g){return a.emplaceBack(b.x<<1|d,b.y<<1|e,Math.round(i*c.x)+128,Math.round(i*c.y)+128,(0===f?0:0>f?-1:1)+1|(g*m&63)<<2,g*m>>6)},d.prototype.programInterfaces={line:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),elementArrayType:new e.ElementArrayType}},d.prototype.addFeature=function(a){for(var b=g(a,l),c=0;c<b.length;c++)this.addLine(b[c],this.layer.layout["line-join"],this.layer.layout["line-cap"],this.layer.layout["line-miter-limit"],this.layer.layout["line-round-limit"])},d.prototype.addLine=function(a,b,c,d,e){for(var f=a.length;f>2&&a[f-1].equals(a[f-2]);)f--;if(!(a.length<2)){"bevel"===b&&(d=1.05);var g=k*(h/(512*this.overscaling)),i=a[0],l=a[f-1],m=i.equals(l);if(this.prepareArrayGroup("line",10*f),2!==f||!m){this.distance=0;var n,o,p,q,r,s,t,u=c,v=m?"butt":c,w=!0;this.e1=this.e2=this.e3=-1,m&&(n=a[f-2],r=i.sub(n)._unit()._perp());for(var x=0;f>x;x++)if(p=m&&x===f-1?a[1]:a[x+1],!p||!a[x].equals(p)){r&&(q=r),n&&(o=n),n=a[x],r=p?p.sub(n)._unit()._perp():q,q=q||r;var y=q.add(r)._unit(),z=y.x*r.x+y.y*r.y,A=1/z,B=j>z&&o&&p;if(B&&x>0){var C=n.dist(o);if(C>2*g){var D=n.sub(n.sub(o)._mult(g/C)._round());this.distance+=D.dist(o),this.addCurrentVertex(D,this.distance,q.mult(1),0,0,!1),o=D}}var E=o&&p,F=E?b:p?u:v;if(E&&"round"===F&&(e>A?F="miter":2>=A&&(F="fakeround")),"miter"===F&&A>d&&(F="bevel"),"bevel"===F&&(A>2&&(F="flipbevel"),d>A&&(F="miter")),o&&(this.distance+=n.dist(o)),"miter"===F)y._mult(A),this.addCurrentVertex(n,this.distance,y,0,0,!1);else if("flipbevel"===F){if(A>100)y=r.clone();else{var G=q.x*r.y-q.y*r.x>0?-1:1,H=A*q.add(r).mag()/q.sub(r).mag();y._perp()._mult(H*G)}this.addCurrentVertex(n,this.distance,y,0,0,!1),this.addCurrentVertex(n,this.distance,y.mult(-1),0,0,!1)}else if("bevel"===F||"fakeround"===F){var I=q.x*r.y-q.y*r.x>0,J=-Math.sqrt(A*A-1);if(I?(t=0,s=J):(s=0,t=J),w||this.addCurrentVertex(n,this.distance,q,s,t,!1),"fakeround"===F){for(var K,L=Math.floor(8*(.5-(z-.5))),M=0;L>M;M++)K=r.mult((M+1)/(L+1))._add(q)._unit(),this.addPieSliceVertex(n,this.distance,K,I);this.addPieSliceVertex(n,this.distance,y,I);for(var N=L-1;N>=0;N--)K=q.mult((N+1)/(L+1))._add(r)._unit(),this.addPieSliceVertex(n,this.distance,K,I)}p&&this.addCurrentVertex(n,this.distance,r,-s,-t,!1)}else"butt"===F?(w||this.addCurrentVertex(n,this.distance,q,0,0,!1),p&&this.addCurrentVertex(n,this.distance,r,0,0,!1)):"square"===F?(w||(this.addCurrentVertex(n,this.distance,q,1,1,!1),
this.e1=this.e2=-1),p&&this.addCurrentVertex(n,this.distance,r,-1,-1,!1)):"round"===F&&(w||(this.addCurrentVertex(n,this.distance,q,0,0,!1),this.addCurrentVertex(n,this.distance,q,1,1,!0),this.e1=this.e2=-1),p&&(this.addCurrentVertex(n,this.distance,r,-1,-1,!0),this.addCurrentVertex(n,this.distance,r,0,0,!1)));if(B&&f-1>x){var O=n.dist(p);if(O>2*g){var P=n.add(p.sub(n)._mult(g/O)._round());this.distance+=P.dist(n),this.addCurrentVertex(P,this.distance,r.mult(1),0,0,!1),n=P}}w=!1}}}},d.prototype.addCurrentVertex=function(a,b,c,d,e,f){var g,h=f?1:0,i=this.arrayGroups.line[this.arrayGroups.line.length-1],j=i.layoutVertexArray,k=i.elementArray;g=c.clone(),d&&g._sub(c.perp()._mult(d)),this.e3=this.addLineVertex(j,a,g,h,0,d,b),this.e1>=0&&this.e2>=0&&k.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,g=c.mult(-1),e&&g._sub(c.perp()._mult(e)),this.e3=this.addLineVertex(j,a,g,h,1,-e,b),this.e1>=0&&this.e2>=0&&k.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,b>n/2&&(this.distance=0,this.addCurrentVertex(a,this.distance,c,d,e,f))},d.prototype.addPieSliceVertex=function(a,b,c,d){var e=d?1:0;c=c.mult(d?-1:1);var f=this.arrayGroups.line[this.arrayGroups.line.length-1],g=f.layoutVertexArray,h=f.elementArray;this.e3=this.addLineVertex(g,a,c,0,e,0,b),this.e1>=0&&this.e2>=0&&h.emplaceBack(this.e1,this.e2,this.e3),d?this.e2=this.e3:this.e1=this.e3}},{"../../util/util":443,"../bucket":330,"../load_geometry":338}],334:[function(a,b,c){"use strict";function d(a){g.apply(this,arguments),this.showCollisionBoxes=a.showCollisionBoxes,this.overscaling=a.overscaling,this.collisionBoxArray=a.collisionBoxArray,this.symbolQuadsArray=a.symbolQuadsArray,this.symbolInstancesArray=a.symbolInstancesArray,this.sdfIcons=a.sdfIcons,this.iconsNeedLinear=a.iconsNeedLinear,this.adjustedTextSize=a.adjustedTextSize,this.adjustedIconSize=a.adjustedIconSize,this.fontstack=a.fontstack}function e(a,b,c,d,e,f,g,h,i,j,k){return a.emplaceBack(b,c,Math.round(64*d),Math.round(64*e),f/4,g/4,10*(j||0),k,10*(h||0),10*Math.min(i||25,25))}var f=a("point-geometry"),g=a("../bucket"),h=a("../../symbol/anchor"),i=a("../../symbol/get_anchors"),j=a("../../util/token"),k=a("../../symbol/quads"),l=a("../../symbol/shaping"),m=a("../../symbol/resolve_text"),n=a("../../symbol/mergelines"),o=a("../../symbol/clip_line"),p=a("../../util/util"),q=a("../load_geometry"),r=a("../../symbol/collision_feature"),s=l.shapeText,t=l.shapeIcon,u=k.getGlyphQuads,v=k.getIconQuads,w=g.EXTENT;b.exports=d,d.MAX_QUADS=65535,d.prototype=p.inherit(g,{}),d.prototype.serialize=function(){var a=g.prototype.serialize.apply(this);return a.sdfIcons=this.sdfIcons,a.iconsNeedLinear=this.iconsNeedLinear,a.adjustedTextSize=this.adjustedTextSize,a.adjustedIconSize=this.adjustedIconSize,a.fontstack=this.fontstack,a};var x=new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),y=new g.ElementArrayType;d.prototype.addCollisionBoxVertex=function(a,b,c,d,e){return a.emplaceBack(b.x,b.y,Math.round(c.x),Math.round(c.y),10*d,10*e)},d.prototype.programInterfaces={glyph:{layoutVertexArrayType:x,elementArrayType:y},icon:{layoutVertexArrayType:x,elementArrayType:y},collisionBox:{layoutVertexArrayType:new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}])}},d.prototype.populateArrays=function(a,b,c){var d={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};this.adjustedTextMaxSize=this.layer.getLayoutValue("text-size",{zoom:18,zoomHistory:d}),this.adjustedTextSize=this.layer.getLayoutValue("text-size",{zoom:this.zoom+1,zoomHistory:d}),this.adjustedIconMaxSize=this.layer.getLayoutValue("icon-size",{zoom:18,zoomHistory:d}),this.adjustedIconSize=this.layer.getLayoutValue("icon-size",{zoom:this.zoom+1,zoomHistory:d});var e=512*this.overscaling;this.tilePixelRatio=w/e,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var f=this.layer.layout,g=this.features,h=this.textFeatures,i=.5,k=.5;switch(f["text-anchor"]){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(f["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":k=1;break;case"top":case"top-right":case"top-left":k=0}for(var l="right"===f["text-justify"]?1:"left"===f["text-justify"]?0:.5,m=24,o=f["text-line-height"]*m,r="line"!==f["symbol-placement"]?f["text-max-width"]*m:0,u=f["text-letter-spacing"]*m,v=[f["text-offset"][0]*m,f["text-offset"][1]*m],x=this.fontstack=f["text-font"].join(","),y=[],z=0;z<g.length;z++)y.push(q(g[z]));if("line"===f["symbol-placement"]){var A=n(g,h,y);y=A.geometries,g=A.features,h=A.textFeatures}for(var B,C,D=0;D<g.length;D++)if(y[D]){if(B=h[D]?s(h[D],b[x],r,o,i,k,l,u,v):null,f["icon-image"]){var E=j(g[D].properties,f["icon-image"]),F=c[E];C=t(F,f),F&&(void 0===this.sdfIcons?this.sdfIcons=F.sdf:this.sdfIcons!==F.sdf&&p.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==F.pixelRatio?this.iconsNeedLinear=!0:0===f["icon-rotate"]&&this.layer.isLayoutValueFeatureConstant("icon-rotate")||(this.iconsNeedLinear=!0))}else C=null;(B||C)&&this.addFeature(y[D],B,C,g[D])}this.symbolInstancesEndIndex=this.symbolInstancesArray.length,this.placeFeatures(a,this.showCollisionBoxes),this.trimArrays()},d.prototype.addFeature=function(a,b,c,d){var e=this.layer.layout,f=24,g=this.adjustedTextSize/f,j=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,k=this.tilePixelRatio*g,l=this.tilePixelRatio*j/f,m=this.tilePixelRatio*this.adjustedIconSize,n=this.tilePixelRatio*e["symbol-spacing"],p=e["symbol-avoid-edges"],q=e["text-padding"]*this.tilePixelRatio,r=e["icon-padding"]*this.tilePixelRatio,s=e["text-max-angle"]/180*Math.PI,t="map"===e["text-rotation-alignment"]&&"line"===e["symbol-placement"],u="map"===e["icon-rotation-alignment"]&&"line"===e["symbol-placement"],v=e["text-allow-overlap"]||e["icon-allow-overlap"]||e["text-ignore-placement"]||e["icon-ignore-placement"],x="line"===e["symbol-placement"],y=n/2;x&&(a=o(a,0,0,w,w));for(var z=0;z<a.length;z++){var A,B=a[z];A=x?i(B,n,s,b,c,f,l,this.overscaling,w):[new h(B[0].x,B[0].y,0)];for(var C=0,D=A.length;D>C;C++){var E=A[C];if(!(b&&x&&this.anchorIsTooClose(b.text,y,E))){var F=!(E.x<0||E.x>w||E.y<0||E.y>w);if(!p||F){var G=F||v;this.addSymbolInstance(E,B,b,c,this.layer,G,this.symbolInstancesArray.length,this.collisionBoxArray,d.index,this.sourceLayerIndex,this.index,k,q,t,m,r,u,{zoom:this.zoom},d.properties)}}}}},d.prototype.anchorIsTooClose=function(a,b,c){var d=this.compareText;if(a in d){for(var e=d[a],f=e.length-1;f>=0;f--)if(c.dist(e[f])<b)return!0}else d[a]=[];return d[a].push(c),!1},d.prototype.placeFeatures=function(a,b){this.recalculateStyleLayers(),this.createArrays();var c=this.layer.layout,d=a.maxScale,e="map"===c["text-rotation-alignment"]&&"line"===c["symbol-placement"],f="map"===c["icon-rotation-alignment"]&&"line"===c["symbol-placement"],g=c["text-allow-overlap"]||c["icon-allow-overlap"]||c["text-ignore-placement"]||c["icon-ignore-placement"];if(g){var h=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),i=a.angle,j=Math.sin(i),k=Math.cos(i);this.sortedSymbolInstances=h.sort(function(a,b){var c=j*a.anchorPointX+k*a.anchorPointY|0,d=j*b.anchorPointX+k*b.anchorPointY|0;return c-d||b.index-a.index})}for(var l=this.symbolInstancesStartIndex;l<this.symbolInstancesEndIndex;l++){var m=this.sortedSymbolInstances?this.sortedSymbolInstances[l-this.symbolInstancesStartIndex]:this.symbolInstancesArray.get(l),n={boxStartIndex:m.textBoxStartIndex,boxEndIndex:m.textBoxEndIndex},o={boxStartIndex:m.iconBoxStartIndex,boxEndIndex:m.iconBoxEndIndex},p=!(m.textBoxStartIndex===m.textBoxEndIndex),q=!(m.iconBoxStartIndex===m.iconBoxEndIndex),r=c["text-optional"]||!p,s=c["icon-optional"]||!q,t=p?a.placeCollisionFeature(n,c["text-allow-overlap"],c["symbol-avoid-edges"]):a.minScale,u=q?a.placeCollisionFeature(o,c["icon-allow-overlap"],c["symbol-avoid-edges"]):a.minScale;r||s?!s&&t?t=Math.max(u,t):!r&&u&&(u=Math.max(u,t)):u=t=Math.max(u,t),p&&(a.insertCollisionFeature(n,t,c["text-ignore-placement"]),d>=t&&this.addSymbols("glyph",m.glyphQuadStartIndex,m.glyphQuadEndIndex,t,c["text-keep-upright"],e,a.angle)),q&&(a.insertCollisionFeature(o,u,c["icon-ignore-placement"]),d>=u&&this.addSymbols("icon",m.iconQuadStartIndex,m.iconQuadEndIndex,u,c["icon-keep-upright"],f,a.angle))}b&&this.addToDebugBuffers(a)},d.prototype.addSymbols=function(a,b,c,d,f,g,h){for(var i=this.prepareArrayGroup(a,4*(c-b)),j=i.elementArray,k=i.layoutVertexArray,l=this.zoom,m=Math.max(Math.log(d)/Math.LN2+l,0),n=b;c>n;n++){var o=this.symbolQuadsArray.get(n).SymbolQuad,p=(o.anchorAngle+h+Math.PI)%(2*Math.PI);if(!(f&&g&&(p<=Math.PI/2||p>3*Math.PI/2))){var q=o.tl,r=o.tr,s=o.bl,t=o.br,u=o.tex,v=o.anchorPoint,w=Math.max(l+Math.log(o.minScale)/Math.LN2,m),x=Math.min(l+Math.log(o.maxScale)/Math.LN2,25);if(!(w>=x)){w===m&&(w=0);var y=Math.round(o.glyphAngle/(2*Math.PI)*256),z=e(k,v.x,v.y,q.x,q.y,u.x,u.y,w,x,m,y);e(k,v.x,v.y,r.x,r.y,u.x+u.w,u.y,w,x,m,y),e(k,v.x,v.y,s.x,s.y,u.x,u.y+u.h,w,x,m,y),e(k,v.x,v.y,t.x,t.y,u.x+u.w,u.y+u.h,w,x,m,y),j.emplaceBack(z,z+1,z+2),j.emplaceBack(z+1,z+2,z+3)}}}},d.prototype.updateIcons=function(a){this.recalculateStyleLayers();var b=this.layer.layout["icon-image"];if(b)for(var c=0;c<this.features.length;c++){var d=j(this.features[c].properties,b);d&&(a[d]=!0)}},d.prototype.updateFont=function(a){this.recalculateStyleLayers();var b=this.layer.layout["text-font"],c=a[b]=a[b]||{};this.textFeatures=m(this.features,this.layer.layout,c)},d.prototype.addToDebugBuffers=function(a){for(var b=this.prepareArrayGroup("collisionBox",0),c=b.layoutVertexArray,d=-a.angle,e=a.yStretch,g=this.symbolInstancesStartIndex;g<this.symbolInstancesEndIndex;g++){var h=this.symbolInstancesArray.get(g);h.textCollisionFeature={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},h.iconCollisionFeature={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex};for(var i=0;2>i;i++){var j=h[0===i?"textCollisionFeature":"iconCollisionFeature"];if(j)for(var k=j.boxStartIndex;k<j.boxEndIndex;k++){var l=this.collisionBoxArray.get(k),m=l.anchorPoint,n=new f(l.x1,l.y1*e)._rotate(d),o=new f(l.x2,l.y1*e)._rotate(d),p=new f(l.x1,l.y2*e)._rotate(d),q=new f(l.x2,l.y2*e)._rotate(d),r=Math.max(0,Math.min(25,this.zoom+Math.log(l.maxScale)/Math.LN2)),s=Math.max(0,Math.min(25,this.zoom+Math.log(l.placementScale)/Math.LN2));this.addCollisionBoxVertex(c,m,n,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,n,r,s)}}}},d.prototype.addSymbolInstance=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,q,s,t,w,x){var y,z,A,B,C,D,E,F;if(c&&(E=g?u(a,c,m,b,f,o):[],C=new r(i,b,a,j,k,l,c,m,n,o,!1)),y=this.symbolQuadsArray.length,E&&E.length)for(var G=0;G<E.length;G++)this.addSymbolQuad(E[G]);z=this.symbolQuadsArray.length;var H=C?C.boxStartIndex:this.collisionBoxArray.length,I=C?C.boxEndIndex:this.collisionBoxArray.length;e&&(F=g?v(a,e,q,b,f,t,c,w,x):[],D=new r(i,b,a,j,k,l,e,q,s,t,!0)),A=this.symbolQuadsArray.length,F&&1===F.length&&this.addSymbolQuad(F[0]),B=this.symbolQuadsArray.length;var J=D?D.boxStartIndex:this.collisionBoxArray.length,K=D?D.boxEndIndex:this.collisionBoxArray.length;return B>d.MAX_QUADS&&p.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),z>d.MAX_QUADS&&p.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),this.symbolInstancesArray.emplaceBack(H,I,J,K,y,z,A,B,a.x,a.y,h)},d.prototype.addSymbolQuad=function(a){return this.symbolQuadsArray.emplaceBack(a.anchorPoint.x,a.anchorPoint.y,a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y,a.tex.h,a.tex.w,a.tex.x,a.tex.y,a.anchorAngle,a.glyphAngle,a.maxScale,a.minScale)}},{"../../symbol/anchor":392,"../../symbol/clip_line":394,"../../symbol/collision_feature":396,"../../symbol/get_anchors":398,"../../symbol/mergelines":401,"../../symbol/quads":402,"../../symbol/resolve_text":403,"../../symbol/shaping":404,"../../util/token":442,"../../util/util":443,"../bucket":330,"../load_geometry":338,"point-geometry":485}],335:[function(a,b,c){"use strict";function d(a,b,c){this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.attributes=b.members,this.itemSize=b.bytesPerElement,this.type=c,this.arrayType=b}b.exports=d,d.prototype.bind=function(a){var b=a[this.type];this.buffer?a.bindBuffer(b,this.buffer):(this.buffer=a.createBuffer(),a.bindBuffer(b,this.buffer),a.bufferData(b,this.arrayBuffer,a.STATIC_DRAW),this.arrayBuffer=null)};var e={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"};d.prototype.setVertexAttribPointers=function(a,b){for(var c=0;c<this.attributes.length;c++){var d=this.attributes[c],f=b[d.name];void 0!==f&&a.vertexAttribPointer(f,d.components,a[e[d.type]],!1,this.arrayType.bytesPerElement,d.offset)}},d.prototype.destroy=function(a){this.buffer&&a.deleteBuffer(this.buffer)},d.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"}},{}],336:[function(a,b,c){"use strict";function d(a,b){this.layoutVertexBuffer=new f(a.layoutVertexArray,b.layoutVertexArrayType,f.BufferType.VERTEX),a.elementArray&&(this.elementBuffer=new f(a.elementArray,b.elementArrayType,f.BufferType.ELEMENT));var c,d=this.vaos={};a.elementArray2&&(this.elementBuffer2=new f(a.elementArray2,b.elementArrayType2,f.BufferType.ELEMENT),c=this.secondVaos={}),this.paintVertexBuffers=e.mapObject(a.paintVertexArrays,function(e,h){return d[h]=new g,a.elementArray2&&(c[h]=new g),new f(e,b.paintVertexArrayTypes[h],f.BufferType.VERTEX)})}var e=a("../util/util"),f=a("./buffer"),g=a("../render/vertex_array_object");b.exports=d,d.prototype.destroy=function(a){this.layoutVertexBuffer.destroy(a),this.elementBuffer&&this.elementBuffer.destroy(a),this.elementBuffer2&&this.elementBuffer2.destroy(a);for(var b in this.paintVertexBuffers)this.paintVertexBuffers[b].destroy(a);for(var c in this.vaos)this.vaos[c].destroy(a);for(var d in this.secondVaos)this.secondVaos[d].destroy(a)}},{"../render/vertex_array_object":358,"../util/util":443,"./buffer":335}],337:[function(a,b,c){"use strict";function d(a,b,c){if(a.grid){var d=a,e=b;a=d.coord,b=d.overscaling,this.grid=new o(d.grid),this.featureIndexArray=new y(d.featureIndexArray),this.rawTileData=e,this.bucketLayerIDs=d.bucketLayerIDs}else this.grid=new o(l,16,0),this.featureIndexArray=new y;this.coord=a,this.overscaling=b,this.x=a.x,this.y=a.y,this.z=a.z-Math.log(b)/Math.LN2,this.setCollisionTile(c)}function e(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function f(a,b){return b-a}function g(a){return a["line-gap-width"]>0?a["line-gap-width"]+2*a["line-width"]:a["line-width"]}function h(a,b,c,d,e){if(!b[0]&&!b[1])return a;b=j.convert(b),"viewport"===c&&b._rotate(-d);for(var f=[],g=0;g<a.length;g++){for(var h=a[g],i=[],k=0;k<h.length;k++)i.push(h[k].sub(b._mult(e)));f.push(i)}return f}function i(a,b){for(var c=[],d=new j(0,0),e=0;e<a.length;e++){for(var f=a[e],g=[],h=0;h<f.length;h++){var i=f[h-1],k=f[h],l=f[h+1],m=0===h?d:k.sub(i)._unit()._perp(),n=h===f.length-1?d:l.sub(k)._unit()._perp(),o=m._add(n)._unit(),p=o.x*n.x+o.y*n.y;o._mult(1/p),g.push(o._mult(b)._add(k))}c.push(g)}return c}var j=a("point-geometry"),k=a("./load_geometry"),l=a("./bucket").EXTENT,m=a("feature-filter"),n=a("../util/struct_array"),o=a("grid-index"),p=a("../util/dictionary_coder"),q=a("vector-tile"),r=a("pbf"),s=a("../util/vectortile_to_geojson"),t=a("../util/util").arraysIntersect,u=a("../util/intersection_tests"),v=u.multiPolygonIntersectsBufferedMultiPoint,w=u.multiPolygonIntersectsMultiPolygon,x=u.multiPolygonIntersectsBufferedMultiLine,y=new n({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]});b.exports=d,d.prototype.insert=function(a,b,c,d){var e=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,c,d);for(var f=k(a),g=0;g<f.length;g++){for(var h=f[g],i=[1/0,1/0,-(1/0),-(1/0)],j=0;j<h.length;j++){var l=h[j];i[0]=Math.min(i[0],l.x),i[1]=Math.min(i[1],l.y),i[2]=Math.max(i[2],l.x),i[3]=Math.max(i[3],l.y)}this.grid.insert(e,i[0],i[1],i[2],i[3])}},d.prototype.setCollisionTile=function(a){this.collisionTile=a},d.prototype.serialize=function(){var a={coord:this.coord,overscaling:this.overscaling,grid:this.grid.toArrayBuffer(),featureIndexArray:this.featureIndexArray.serialize(),bucketLayerIDs:this.bucketLayerIDs};return{data:a,transferables:[a.grid,a.featureIndexArray.arrayBuffer]}},d.prototype.query=function(a,b){this.vtLayers||(this.vtLayers=new q.VectorTile(new r(new Uint8Array(this.rawTileData))).layers,this.sourceLayerCoder=new p(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var c={},d=a.params||{},h=l/a.tileSize/a.scale,i=m(d.filter),k=0;for(var n in b){var o=b[n],s=o.paint,t=0;"line"===o.type?t=g(s)/2+Math.abs(s["line-offset"])+e(s["line-translate"]):"fill"===o.type?t=e(s["fill-translate"]):"circle"===o.type&&(t=s["circle-radius"]+e(s["circle-translate"])),k=Math.max(k,t*h)}for(var u=a.queryGeometry.map(function(a){return a.map(function(a){return new j(a.x,a.y)})}),v=1/0,w=1/0,x=-(1/0),y=-(1/0),z=0;z<u.length;z++)for(var A=u[z],B=0;B<A.length;B++){var C=A[B];v=Math.min(v,C.x),w=Math.min(w,C.y),x=Math.max(x,C.x),y=Math.max(y,C.y)}var D=this.grid.query(v-k,w-k,x+k,y+k);D.sort(f),this.filterMatching(c,D,this.featureIndexArray,u,i,d.layers,b,a.bearing,h);var E=this.collisionTile.queryRenderedSymbols(v,w,x,y,a.scale);return E.sort(),this.filterMatching(c,E,this.collisionTile.collisionBoxArray,u,i,d.layers,b,a.bearing,h),c},d.prototype.filterMatching=function(a,b,c,d,e,f,j,l,m){for(var n,o=0;o<b.length;o++){var p=b[o];if(p!==n){n=p;var q=c.get(p),r=this.bucketLayerIDs[q.bucketIndex];if(!f||t(f,r)){var u=this.sourceLayerCoder.decode(q.sourceLayerIndex),y=this.vtLayers[u],z=y.feature(q.featureIndex);if(e(z))for(var A=null,B=0;B<r.length;B++){var C=r[B];if(!(f&&f.indexOf(C)<0)){var D=j[C];if(D){var E;if("symbol"!==D.type){A||(A=k(z));var F=D.paint;if("line"===D.type){E=h(d,F["line-translate"],F["line-translate-anchor"],l,m);var G=g(F)/2*m;if(F["line-offset"]&&(A=i(A,F["line-offset"]*m)),!x(E,A,G))continue}else if("fill"===D.type){if(E=h(d,F["fill-translate"],F["fill-translate-anchor"],l,m),!w(E,A))continue}else if("circle"===D.type){E=h(d,F["circle-translate"],F["circle-translate-anchor"],l,m);var H=F["circle-radius"]*m;if(!v(E,A,H))continue}}var I=new s(z,this.z,this.x,this.y);I.layer=D.serialize({includeRefProperties:!0});var J=a[C];void 0===J&&(J=a[C]=[]),J.push(I)}}}}}}}},{"../util/dictionary_coder":433,"../util/intersection_tests":438,"../util/struct_array":441,"../util/util":443,"../util/vectortile_to_geojson":444,"./bucket":330,"./load_geometry":338,"feature-filter":133,"grid-index":288,pbf:479,"point-geometry":485,"vector-tile":559}],338:[function(a,b,c){"use strict";function d(a){return{min:-1*Math.pow(2,a-1),max:Math.pow(2,a-1)-1}}var e=a("../util/util"),f=a("./bucket").EXTENT,g=a("assert"),h={15:d(15),16:d(16)};b.exports=function(a,b){var c=h[b||16];g(c);for(var d=f/a.extent,i=a.loadGeometry(),j=0;j<i.length;j++)for(var k=i[j],l=0;l<k.length;l++){var m=k[l];m.x=Math.round(m.x*d),m.y=Math.round(m.y*d),(m.x<c.min||m.x>c.max||m.y<c.min||m.y>c.max)&&e.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}},{"../util/util":443,"./bucket":330,assert:48}],339:[function(a,b,c){"use strict";function d(a,b,c){this.column=a,this.row=b,this.zoom=c}b.exports=d,d.prototype={clone:function(){return new d(this.column,this.row,this.zoom)},zoomTo:function(a){return this.clone()._zoomTo(a)},sub:function(a){return this.clone()._sub(a)},_zoomTo:function(a){var b=Math.pow(2,a-this.zoom);return this.column*=b,this.row*=b,this.zoom=a,this},_sub:function(a){return a=a.zoomTo(this.zoom),this.column-=a.column,this.row-=a.row,this}}},{}],340:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))throw new Error("Invalid LngLat object: ("+a+", "+b+")");if(this.lng=+a,this.lat=+b,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}b.exports=d;var e=a("../util/util").wrap;d.prototype.wrap=function(){return new d(e(this.lng,-180,180),this.lat)},d.prototype.toArray=function(){return[this.lng,this.lat]},d.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{"../util/util":443}],341:[function(a,b,c){"use strict";function d(a,b){a&&(b?this.extend(a).extend(b):4===a.length?this.extend([a[0],a[1]]).extend([a[2],a[3]]):this.extend(a[0]).extend(a[1]))}b.exports=d;var e=a("./lng_lat");d.prototype={extend:function(a){var b,c,f=this._sw,g=this._ne;if(a instanceof e)b=a,c=a;else{if(!(a instanceof d))return a?this.extend(e.convert(a)||d.convert(a)):this;if(b=a._sw,c=a._ne,!b||!c)return this}return f||g?(f.lng=Math.min(b.lng,f.lng),f.lat=Math.min(b.lat,f.lat),g.lng=Math.max(c.lng,g.lng),g.lat=Math.max(c.lat,g.lat)):(this._sw=new e(b.lng,b.lat),this._ne=new e(c.lng,c.lat)),this},getCenter:function(){return new e((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new e(this.getWest(),this.getNorth())},getSouthEast:function(){return new e(this.getEast(),this.getSouth())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat},toArray:function(){return[this._sw.toArray(),this._ne.toArray()]},toString:function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}},d.convert=function(a){return!a||a instanceof d?a:new d(a)}},{"./lng_lat":340}],342:[function(a,b,c){"use strict";function d(a,b){this.tileSize=512,this._minZoom=a||0,this._maxZoom=b||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new e(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var e=a("./lng_lat"),f=a("point-geometry"),g=a("./coordinate"),h=a("../util/util").wrap,i=a("../util/interpolate"),j=a("../source/tile_coord"),k=a("../data/bucket").EXTENT,l=a("gl-matrix"),m=l.vec4,n=l.mat4,o=l.mat2;b.exports=d,d.prototype={get minZoom(){return this._minZoom},set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))},get maxZoom(){return this._maxZoom},set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new f(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(a){var b=-h(a,-180,180)*Math.PI/180;this.angle!==b&&(this._unmodified=!1,this.angle=b,this._calcMatrices(),this.rotationMatrix=o.create(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(a){var b=Math.min(60,a)/180*Math.PI;this._pitch!==b&&(this._unmodified=!1,this._pitch=b,this._calcMatrices())},get altitude(){return this._altitude},set altitude(a){var b=Math.max(.75,a);this._altitude!==b&&(this._unmodified=!1,this._altitude=b,this._calcMatrices())},get zoom(){return this._zoom},set zoom(a){var b=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==b&&(this._unmodified=!1,this._zoom=b,this.scale=this.zoomScale(b),this.tileZoom=Math.floor(b),this.zoomFraction=b-this.tileZoom,this._calcMatrices(),this._constrain())},get center(){return this._center},set center(a){(a.lat!==this._center.lat||a.lng!==this._center.lng)&&(this._unmodified=!1,this._center=a,this._calcMatrices(),this._constrain())},coveringZoomLevel:function(a){return(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize))},coveringTiles:function(a){var b=this.coveringZoomLevel(a),c=b;if(b<a.minzoom)return[];b>a.maxzoom&&(b=a.maxzoom);var d=this,e=d.locationCoordinate(d.center)._zoomTo(b),g=new f(e.column-.5,e.row-.5);return j.cover(b,[d.pointCoordinate(new f(0,0))._zoomTo(b),d.pointCoordinate(new f(d.width,0))._zoomTo(b),d.pointCoordinate(new f(d.width,d.height))._zoomTo(b),d.pointCoordinate(new f(0,d.height))._zoomTo(b)],a.reparseOverscaled?c:b).sort(function(a,b){return g.dist(a)-g.dist(b)})},resize:function(a,b){this.width=a,this.height=b,this.pixelsToGLUnits=[2/a,-2/b],this._calcMatrices(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(a){return Math.pow(2,a)},scaleZoom:function(a){return Math.log(a)/Math.LN2},project:function(a,b){return new f(this.lngX(a.lng,b),this.latY(a.lat,b))},unproject:function(a,b){return new e(this.xLng(a.x,b),this.yLat(a.y,b))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new f(this.x,this.y)},lngX:function(a,b){return(180+a)*(b||this.worldSize)/360},latY:function(a,b){var c=180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360));return(180-c)*(b||this.worldSize)/360},xLng:function(a,b){return 360*a/(b||this.worldSize)-180},yLat:function(a,b){var c=180-360*a/(b||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(c*Math.PI/180))-90},panBy:function(a){var b=this.centerPoint._add(a);this.center=this.pointLocation(b)},setLocationAtPoint:function(a,b){var c=this.locationCoordinate(a),d=this.pointCoordinate(b),e=this.pointCoordinate(this.centerPoint),f=d._sub(c);this._unmodified=!1,this.center=this.coordinateLocation(e._sub(f))},locationPoint:function(a){return this.coordinatePoint(this.locationCoordinate(a))},pointLocation:function(a){return this.coordinateLocation(this.pointCoordinate(a))},locationCoordinate:function(a){var b=this.zoomScale(this.tileZoom)/this.worldSize,c=e.convert(a);return new g(this.lngX(c.lng)*b,this.latY(c.lat)*b,this.tileZoom)},coordinateLocation:function(a){var b=this.zoomScale(a.zoom);return new e(this.xLng(a.column,b),this.yLat(a.row,b))},pointCoordinate:function(a){var b=0,c=[a.x,a.y,0,1],d=[a.x,a.y,1,1];m.transformMat4(c,c,this.pixelMatrixInverse),m.transformMat4(d,d,this.pixelMatrixInverse);var e=c[3],f=d[3],h=c[0]/e,j=d[0]/f,k=c[1]/e,l=d[1]/f,n=c[2]/e,o=d[2]/f,p=n===o?0:(b-n)/(o-n),q=this.worldSize/this.zoomScale(this.tileZoom);return new g(i(h,j,p)/q,i(k,l,p)/q,this.tileZoom)},coordinatePoint:function(a){var b=this.worldSize/this.zoomScale(a.zoom),c=[a.column*b,a.row*b,0,1];return m.transformMat4(c,c,this.pixelMatrix),new f(c[0]/c[3],c[1]/c[3])},calculatePosMatrix:function(a,b){void 0===b&&(b=1/0),a instanceof j&&(a=a.toCoordinate(b));var c=Math.min(a.zoom,b),d=this.worldSize/Math.pow(2,c),e=new Float64Array(16);return n.identity(e),n.translate(e,e,[a.column*d,a.row*d,0]),n.scale(e,e,[d/k,d/k,1]),n.multiply(e,this.projMatrix,e),new Float32Array(e)},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,b,c,d,e,g,h,i,j=this.size,k=this._unmodified;this.latRange&&(a=this.latY(this.latRange[1]),b=this.latY(this.latRange[0]),e=b-a<j.y?j.y/(b-a):0),this.lngRange&&(c=this.lngX(this.lngRange[0]),d=this.lngX(this.lngRange[1]),g=d-c<j.x?j.x/(d-c):0);var l=Math.max(g||0,e||0);if(l)return this.center=this.unproject(new f(g?(d+c)/2:this.x,e?(b+a)/2:this.y)),this.zoom+=this.scaleZoom(l),this._unmodified=k,void(this._constraining=!1);if(this.latRange){var m=this.y,n=j.y/2;a>m-n&&(i=a+n),m+n>b&&(i=b-n)}if(this.lngRange){var o=this.x,p=j.x/2;c>o-p&&(h=c+p),o+p>d&&(h=d-p)}(void 0!==h||void 0!==i)&&(this.center=this.unproject(new f(void 0!==h?h:this.x,void 0!==i?i:this.y))),this._unmodified=k,this._constraining=!1}},_calcMatrices:function(){if(this.height){var a=Math.atan(.5/this.altitude),b=Math.sin(a)*this.altitude/Math.sin(Math.PI/2-this._pitch-a),c=Math.cos(Math.PI/2-this._pitch)*b+this.altitude,d=new Float64Array(16);if(n.perspective(d,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,c),n.translate(d,d,[0,0,-this.altitude]),n.scale(d,d,[1,-1,1/this.height]),n.rotateX(d,d,this._pitch),n.rotateZ(d,d,this.angle),n.translate(d,d,[-this.x,-this.y,0]),this.projMatrix=d,d=n.create(),n.scale(d,d,[this.width/2,-this.height/2,1]),n.translate(d,d,[1,-1,0]),this.pixelMatrix=n.multiply(new Float64Array(16),d,this.projMatrix),d=n.invert(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d}}}},{"../data/bucket":330,"../source/tile_coord":370,"../util/interpolate":437,"../util/util":443,"./coordinate":339,"./lng_lat":340,"gl-matrix":194,"point-geometry":485}],343:[function(a,b,c){"use strict";var d={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],
G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};b.exports=function(a,b,c,e){e=e||1;var f,g,h,i,j,k,l,m,n=[];for(f=0,g=a.length;g>f;f++)if(j=d[a[f]]){for(m=null,h=0,i=j[1].length;i>h;h+=2)-1===j[1][h]&&-1===j[1][h+1]?m=null:(k=b+j[1][h]*e,l=c-j[1][h+1]*e,m&&n.push(m.x,m.y,k,l),m={x:k,y:l});b+=j[0]*e}return n}},{}],344:[function(a,b,c){"use strict";var d=b.exports={};d.version=a("../package.json").version,d.Map=a("./ui/map"),d.Control=a("./ui/control/control"),d.Navigation=a("./ui/control/navigation"),d.Geolocate=a("./ui/control/geolocate"),d.Attribution=a("./ui/control/attribution"),d.Popup=a("./ui/popup"),d.Marker=a("./ui/marker"),d.Style=a("./style/style"),d.LngLat=a("./geo/lng_lat"),d.LngLatBounds=a("./geo/lng_lat_bounds"),d.Point=a("point-geometry"),d.Evented=a("./util/evented"),d.util=a("./util/util"),d.supported=a("./util/browser").supported;var e=a("./util/ajax");d.util.getJSON=e.getJSON,d.util.getArrayBuffer=e.getArrayBuffer;var f=a("./util/config");d.config=f,Object.defineProperty(d,"accessToken",{get:function(){return f.ACCESS_TOKEN},set:function(a){f.ACCESS_TOKEN=a}})},{"../package.json":445,"./geo/lng_lat":340,"./geo/lng_lat_bounds":341,"./style/style":379,"./ui/control/attribution":410,"./ui/control/control":411,"./ui/control/geolocate":412,"./ui/control/navigation":413,"./ui/map":422,"./ui/marker":423,"./ui/popup":424,"./util/ajax":426,"./util/browser":427,"./util/config":432,"./util/evented":435,"./util/util":443,"point-geometry":485}],345:[function(a,b,c){"use strict";var d=a("assert");b.exports=function(a){for(var b={define:{},initialize:{}},c=0;c<a.length;c++){var e=a[c];d("u_"===e.name.slice(0,2));var f="{precision} "+(1===e.components?"float":"vec"+e.components);b.define[e.name.slice(2)]="uniform "+f+" "+e.name+";\n",b.initialize[e.name.slice(2)]=f+" "+e.name.slice(2)+" = "+e.name+";\n"}return b}},{assert:48}],346:[function(a,b,c){"use strict";function d(a,b,c){var d,h=a.gl,i=a.transform,j=c.paint["background-color"],k=c.paint["background-pattern"],l=c.paint["background-opacity"],m=k?a.spriteAtlas.getPosition(k.from,!0):null,n=k?a.spriteAtlas.getPosition(k.to,!0):null;if(a.setDepthSublayer(0),m&&n){if(a.isOpaquePass)return;d=a.useProgram("pattern"),h.uniform1i(d.u_image,0),h.uniform2fv(d.u_pattern_tl_a,m.tl),h.uniform2fv(d.u_pattern_br_a,m.br),h.uniform2fv(d.u_pattern_tl_b,n.tl),h.uniform2fv(d.u_pattern_br_b,n.br),h.uniform1f(d.u_opacity,l),h.uniform1f(d.u_mix,k.t),h.uniform2fv(d.u_pattern_size_a,m.size),h.uniform2fv(d.u_pattern_size_b,n.size),h.uniform1f(d.u_scale_a,k.fromScale),h.uniform1f(d.u_scale_b,k.toScale),h.activeTexture(h.TEXTURE0),a.spriteAtlas.bind(h,!0),a.tileExtentPatternVAO.bind(h,d,a.tileExtentBuffer)}else{if(a.isOpaquePass!==(1===j[3]))return;var o=f([{name:"u_color",components:4},{name:"u_opacity",components:1}]);d=a.useProgram("fill",[],o,o),h.uniform4fv(d.u_color,j),h.uniform1f(d.u_opacity,l),a.tileExtentVAO.bind(h,d,a.tileExtentBuffer)}h.disable(h.STENCIL_TEST);for(var p=i.coveringTiles({tileSize:g}),q=0;q<p.length;q++){var r=p[q];if(m&&n){var s={coord:r,tileSize:g};h.uniform1f(d.u_tile_units_to_pixels,1/e(s,1,a.transform.tileZoom));var t=s.tileSize*Math.pow(2,a.transform.tileZoom-s.coord.z),u=t*(s.coord.x+r.w*Math.pow(2,s.coord.z)),v=t*s.coord.y;h.uniform2f(d.u_pixel_coord_upper,u>>16,v>>16),h.uniform2f(d.u_pixel_coord_lower,65535&u,65535&v)}h.uniformMatrix4fv(d.u_matrix,!1,a.transform.calculatePosMatrix(r)),h.drawArrays(h.TRIANGLE_STRIP,0,a.tileExtentBuffer.length)}h.stencilMask(0),h.stencilFunc(h.EQUAL,128,128)}var e=a("../source/pixels_to_tile_units"),f=a("./create_uniform_pragmas"),g=512;b.exports=d},{"../source/pixels_to_tile_units":364,"./create_uniform_pragmas":345}],347:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;a.setDepthSublayer(0),a.depthMask(!1),f.disable(f.STENCIL_TEST);for(var g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.circle;if(k){var l=j.paintAttributes.circle[c.id],m=a.useProgram("circle",l.defines,l.vertexPragmas,l.fragmentPragmas);"map"===c.paint["circle-pitch-scale"]?(f.uniform1i(m.u_scale_with_map,!0),f.uniform2f(m.u_extrude_scale,a.transform.pixelsToGLUnits[0]*a.transform.altitude,a.transform.pixelsToGLUnits[1]*a.transform.altitude)):(f.uniform1i(m.u_scale_with_map,!1),f.uniform2fv(m.u_extrude_scale,a.transform.pixelsToGLUnits)),f.uniform1f(m.u_devicepixelratio,e.devicePixelRatio),f.uniformMatrix4fv(m.u_matrix,!1,a.translatePosMatrix(h.posMatrix,i,c.paint["circle-translate"],c.paint["circle-translate-anchor"])),j.setUniforms(f,"circle",m,c,{zoom:a.transform.zoom});for(var n=0;n<k.length;n++){var o=k[n];o.vaos[c.id].bind(f,m,o.layoutVertexBuffer,o.elementBuffer,o.paintVertexBuffers[c.id]),f.drawElements(f.TRIANGLES,3*o.elementBuffer.length,f.UNSIGNED_SHORT,0)}}}}}}var e=a("../util/browser");b.exports=d},{"../util/browser":427}],348:[function(a,b,c){"use strict";function d(a,b,c,d){var e=a.gl;e.enable(e.STENCIL_TEST);for(var f=a.useProgram("collisionbox"),g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.collisionBox;if(k&&k.length){var l=k[0];0!==l.layoutVertexBuffer.length&&(e.uniformMatrix4fv(f.u_matrix,!1,h.posMatrix),a.enableTileClippingMask(h),a.lineWidth(1),e.uniform1f(f.u_scale,Math.pow(2,a.transform.zoom-i.coord.z)),e.uniform1f(f.u_zoom,10*a.transform.zoom),e.uniform1f(f.u_maxzoom,10*(i.coord.z+1)),l.vaos[c.id].bind(e,f,l.layoutVertexBuffer),e.drawArrays(e.LINES,0,l.layoutVertexBuffer.length))}}}}b.exports=d},{}],349:[function(a,b,c){"use strict";function d(a,b,c){if(!a.isOpaquePass&&a.options.debug)for(var d=0;d<c.length;d++)e(a,b,c[d])}function e(a,b,c){var d=a.gl;d.disable(d.STENCIL_TEST),a.lineWidth(1*g.devicePixelRatio);var e=c.posMatrix,l=a.useProgram("debug");d.uniformMatrix4fv(l.u_matrix,!1,e),d.uniform4f(l.u_color,1,0,0,1),a.debugVAO.bind(d,l,a.debugBuffer),d.drawArrays(d.LINE_STRIP,0,a.debugBuffer.length);for(var m=f(c.toString(),50,200,5),n=new a.PosArray,o=0;o<m.length;o+=2)n.emplaceBack(m[o],m[o+1]);var p=new j(n.serialize(),a.PosArray.serialize(),j.BufferType.VERTEX),q=new k;q.bind(d,l,p),d.uniform4f(l.u_color,1,1,1,1);for(var r=b.getTile(c).tileSize,s=i/(Math.pow(2,a.transform.zoom-c.z)*r),t=[[-1,-1],[-1,1],[1,-1],[1,1]],u=0;u<t.length;u++){var v=t[u];d.uniformMatrix4fv(l.u_matrix,!1,h.translate([],e,[s*v[0],s*v[1],0])),d.drawArrays(d.LINES,0,p.length)}d.uniform4f(l.u_color,0,0,0,1),d.uniformMatrix4fv(l.u_matrix,!1,e),d.drawArrays(d.LINES,0,p.length)}var f=a("../lib/debugtext"),g=a("../util/browser"),h=a("gl-matrix").mat4,i=a("../data/bucket").EXTENT,j=a("../data/buffer"),k=a("./vertex_array_object");b.exports=d},{"../data/bucket":330,"../data/buffer":335,"../lib/debugtext":343,"../util/browser":427,"./vertex_array_object":358,"gl-matrix":194}],350:[function(a,b,c){"use strict";function d(a,b,c,d){var g=a.gl;g.enable(g.STENCIL_TEST);var h;if(h=c.paint["fill-pattern"]?!1:c.isPaintValueFeatureConstant("fill-color")&&c.isPaintValueFeatureConstant("fill-opacity")&&1===c.paint["fill-color"][3]&&1===c.paint["fill-opacity"],a.isOpaquePass===h){a.setDepthSublayer(1);for(var i=0;i<d.length;i++)e(a,b,c,d[i])}if(!a.isOpaquePass&&c.paint["fill-antialias"]){a.lineWidth(2),a.depthMask(!1);var j=c.getPaintProperty("fill-outline-color");(j||!c.paint["fill-pattern"])&&j?a.setDepthSublayer(2):a.setDepthSublayer(0);for(var k=0;k<d.length;k++)f(a,b,c,d[k])}}function e(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h=f.bufferGroups.fill;if(h){var i,j=a.gl,k=c.paint["fill-pattern"];if(k)i=a.useProgram("pattern"),g(k,c.paint["fill-opacity"],e,d,a,i),j.activeTexture(j.TEXTURE0),a.spriteAtlas.bind(j,!0);else{var l=f.paintAttributes.fill[c.id];i=a.useProgram("fill",l.defines,l.vertexPragmas,l.fragmentPragmas),f.setUniforms(j,"fill",i,c,{zoom:a.transform.zoom})}j.uniformMatrix4fv(i.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),a.enableTileClippingMask(d);for(var m=0;m<h.length;m++){var n=h[m];n.vaos[c.id].bind(j,i,n.layoutVertexBuffer,n.elementBuffer,n.paintVertexBuffers[c.id]),j.drawElements(j.TRIANGLES,n.elementBuffer.length,j.UNSIGNED_SHORT,0)}}}}function f(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h,i=a.gl,j=f.bufferGroups.fill,k=c.paint["fill-pattern"],l=c.paint["fill-opacity"],m=c.getPaintProperty("fill-outline-color");if(k&&!m)h=a.useProgram("outlinepattern"),i.uniform2f(h.u_world,i.drawingBufferWidth,i.drawingBufferHeight);else{var n=f.paintAttributes.fill[c.id];h=a.useProgram("outline",n.defines,n.vertexPragmas,n.fragmentPragmas),i.uniform2f(h.u_world,i.drawingBufferWidth,i.drawingBufferHeight),i.uniform1f(h.u_opacity,l),f.setUniforms(i,"fill",h,c,{zoom:a.transform.zoom})}i.uniformMatrix4fv(h.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),k&&g(k,l,e,d,a,h),a.enableTileClippingMask(d);for(var o=0;o<j.length;o++){var p=j[o];p.secondVaos[c.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer2,p.paintVertexBuffers[c.id]),i.drawElements(i.LINES,2*p.elementBuffer2.length,i.UNSIGNED_SHORT,0)}}}function g(a,b,c,d,e,f){var g=e.gl,i=e.spriteAtlas.getPosition(a.from,!0),j=e.spriteAtlas.getPosition(a.to,!0);if(i&&j){g.uniform1i(f.u_image,0),g.uniform2fv(f.u_pattern_tl_a,i.tl),g.uniform2fv(f.u_pattern_br_a,i.br),g.uniform2fv(f.u_pattern_tl_b,j.tl),g.uniform2fv(f.u_pattern_br_b,j.br),g.uniform1f(f.u_opacity,b),g.uniform1f(f.u_mix,a.t),g.uniform1f(f.u_tile_units_to_pixels,1/h(c,1,e.transform.tileZoom)),g.uniform2fv(f.u_pattern_size_a,i.size),g.uniform2fv(f.u_pattern_size_b,j.size),g.uniform1f(f.u_scale_a,a.fromScale),g.uniform1f(f.u_scale_b,a.toScale);var k=c.tileSize*Math.pow(2,e.transform.tileZoom-c.coord.z),l=k*(c.coord.x+d.w*Math.pow(2,c.coord.z)),m=k*c.coord.y;g.uniform2f(f.u_pixel_coord_upper,l>>16,m>>16),g.uniform2f(f.u_pixel_coord_lower,65535&l,65535&m),g.activeTexture(g.TEXTURE0),e.spriteAtlas.bind(g,!0)}}var h=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":364}],351:[function(a,b,c){"use strict";var d=a("../util/browser"),e=a("gl-matrix").mat2,f=a("../source/pixels_to_tile_units");b.exports=function(a,b,c,g){if(!a.isOpaquePass){a.setDepthSublayer(0),a.depthMask(!1);var h=a.gl;if(h.enable(h.STENCIL_TEST),!(c.paint["line-width"]<=0)){var i=1/d.devicePixelRatio,j=c.paint["line-blur"]+i,k=c.paint["line-color"],l=a.transform,m=e.create();e.scale(m,m,[1,Math.cos(l._pitch)]),e.rotate(m,m,a.transform.angle);var n,o,p,q,r,s=Math.sqrt(l.height*l.height/4*(1+l.altitude*l.altitude)),t=l.height/2*Math.tan(l._pitch),u=(s+t)/s-1,v=c.paint["line-dasharray"],w=c.paint["line-pattern"];if(v)n=a.useProgram("linesdfpattern"),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform4fv(n.u_color,k),h.uniform1f(n.u_opacity,c.paint["line-opacity"]),o=a.lineAtlas.getDash(v.from,"round"===c.layout["line-cap"]),p=a.lineAtlas.getDash(v.to,"round"===c.layout["line-cap"]),h.uniform1i(n.u_image,0),h.activeTexture(h.TEXTURE0),a.lineAtlas.bind(h),h.uniform1f(n.u_tex_y_a,o.y),h.uniform1f(n.u_tex_y_b,p.y),h.uniform1f(n.u_mix,v.t),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m);else if(w){if(q=a.spriteAtlas.getPosition(w.from,!0),r=a.spriteAtlas.getPosition(w.to,!0),!q||!r)return;n=a.useProgram("linepattern"),h.uniform1i(n.u_image,0),h.activeTexture(h.TEXTURE0),a.spriteAtlas.bind(h,!0),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform2fv(n.u_pattern_tl_a,q.tl),h.uniform2fv(n.u_pattern_br_a,q.br),h.uniform2fv(n.u_pattern_tl_b,r.tl),h.uniform2fv(n.u_pattern_br_b,r.br),h.uniform1f(n.u_fade,w.t),h.uniform1f(n.u_opacity,c.paint["line-opacity"]),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m)}else n=a.useProgram("line"),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m),h.uniform4fv(n.u_color,k),h.uniform1f(n.u_opacity,c.paint["line-opacity"]);for(var x=0;x<g.length;x++){var y=g[x],z=b.getTile(y),A=z.getBucket(c);if(A){var B=A.bufferGroups.line;if(B){a.enableTileClippingMask(y);var C=a.translatePosMatrix(y.posMatrix,z,c.paint["line-translate"],c.paint["line-translate-anchor"]);h.uniformMatrix4fv(n.u_matrix,!1,C);var D=1/f(z,1,a.transform.zoom);if(v){var E=o.width*v.fromScale,F=p.width*v.toScale,G=[1/f(z,E,a.transform.tileZoom),-o.height/2],H=[1/f(z,F,a.transform.tileZoom),-p.height/2],I=a.lineAtlas.width/(256*Math.min(E,F)*d.devicePixelRatio)/2;h.uniform1f(n.u_ratio,D),h.uniform2fv(n.u_patternscale_a,G),h.uniform2fv(n.u_patternscale_b,H),h.uniform1f(n.u_sdfgamma,I)}else w?(h.uniform1f(n.u_ratio,D),h.uniform2fv(n.u_pattern_size_a,[f(z,q.size[0]*w.fromScale,a.transform.tileZoom),r.size[1]]),h.uniform2fv(n.u_pattern_size_b,[f(z,r.size[0]*w.toScale,a.transform.tileZoom),r.size[1]])):h.uniform1f(n.u_ratio,D);for(var J=0;J<B.length;J++){var K=B[J];K.vaos[c.id].bind(h,n,K.layoutVertexBuffer,K.elementBuffer),h.drawElements(h.TRIANGLES,3*K.elementBuffer.length,h.UNSIGNED_SHORT,0)}}}}}}}},{"../source/pixels_to_tile_units":364,"../util/browser":427,"gl-matrix":194}],352:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;f.enable(f.DEPTH_TEST),a.depthMask(!0),f.depthFunc(f.LESS);for(var g=d.length&&d[0].z,h=0;h<d.length;h++){var i=d[h];a.setDepthSublayer(i.z-g),e(a,b,c,i)}f.depthFunc(f.LEQUAL)}}function e(a,b,c,d){var e=a.gl;e.disable(e.STENCIL_TEST);var j=b.getTile(d),k=a.transform.calculatePosMatrix(d,b.maxzoom),l=a.useProgram("raster");e.uniformMatrix4fv(l.u_matrix,!1,k),e.uniform1f(l.u_brightness_low,c.paint["raster-brightness-min"]),e.uniform1f(l.u_brightness_high,c.paint["raster-brightness-max"]),e.uniform1f(l.u_saturation_factor,h(c.paint["raster-saturation"])),e.uniform1f(l.u_contrast_factor,g(c.paint["raster-contrast"])),e.uniform3fv(l.u_spin_weights,f(c.paint["raster-hue-rotate"]));var m,n,o=j.source&&j.source.findLoadedParent(d,0,{}),p=i(j,o,c,a.transform);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,j.texture),e.activeTexture(e.TEXTURE1),o?(e.bindTexture(e.TEXTURE_2D,o.texture),m=Math.pow(2,o.coord.z-j.coord.z),n=[j.coord.x*m%1,j.coord.y*m%1]):(e.bindTexture(e.TEXTURE_2D,j.texture),p[1]=0),e.uniform2fv(l.u_tl_parent,n||[0,0]),e.uniform1f(l.u_scale_parent,m||1),e.uniform1f(l.u_buffer_scale,1),e.uniform1f(l.u_opacity0,p[0]),e.uniform1f(l.u_opacity1,p[1]),e.uniform1i(l.u_image0,0),e.uniform1i(l.u_image1,1);var q=j.boundsBuffer||a.rasterBoundsBuffer,r=j.boundsVAO||a.rasterBoundsVAO;r.bind(e,l,q),e.drawArrays(e.TRIANGLE_STRIP,0,q.length)}function f(a){a*=Math.PI/180;var b=Math.sin(a),c=Math.cos(a);return[(2*c+1)/3,(-Math.sqrt(3)*b-c+1)/3,(Math.sqrt(3)*b-c+1)/3]}function g(a){return a>0?1/(1-a):1+a}function h(a){return a>0?1-1/(1.001-a):-a}function i(a,b,c,d){var e=[1,0],f=c.paint["raster-fade-duration"];if(a.source&&f>0){var g=(new Date).getTime(),h=(g-a.timeAdded)/f,i=b?(g-b.timeAdded)/f:-1,k=d.coveringZoomLevel(a.source),l=b?Math.abs(b.coord.z-k)>Math.abs(a.coord.z-k):!1;!b||l?(e[0]=j.clamp(h,0,1),e[1]=1-e[0]):(e[0]=j.clamp(1-i,0,1),e[1]=1-e[0])}var m=c.paint["raster-opacity"];return e[0]*=m,e[1]*=m,e}var j=a("../util/util"),k=a("../util/struct_array");b.exports=d,d.RasterBoundsArray=new k({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]})},{"../util/struct_array":441,"../util/util":443}],353:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=!(c.layout["text-allow-overlap"]||c.layout["icon-allow-overlap"]||c.layout["text-ignore-placement"]||c.layout["icon-ignore-placement"]),g=a.gl;f?g.disable(g.STENCIL_TEST):g.enable(g.STENCIL_TEST),a.setDepthSublayer(0),a.depthMask(!1),g.disable(g.DEPTH_TEST),e(a,b,c,d,!1,c.paint["icon-translate"],c.paint["icon-translate-anchor"],c.layout["icon-rotation-alignment"],c.layout["icon-rotation-alignment"],c.layout["icon-size"],c.paint["icon-halo-width"],c.paint["icon-halo-color"],c.paint["icon-halo-blur"],c.paint["icon-opacity"],c.paint["icon-color"]),e(a,b,c,d,!0,c.paint["text-translate"],c.paint["text-translate-anchor"],c.layout["text-rotation-alignment"],c.layout["text-pitch-alignment"],c.layout["text-size"],c.paint["text-halo-width"],c.paint["text-halo-color"],c.paint["text-halo-blur"],c.paint["text-opacity"],c.paint["text-color"]),g.enable(g.DEPTH_TEST),b.map.showCollisionBoxes&&h(a,b,c,d)}}function e(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p){for(var q=0;q<d.length;q++){var r=b.getTile(d[q]),s=r.getBucket(c);if(s){var t=s.bufferGroups,u=e?t.glyph:t.icon;u.length&&(a.enableTileClippingMask(d[q]),f(a,c,d[q].posMatrix,r,s,u,e,e||s.sdfIcons,!e&&s.iconsNeedLinear,e?s.adjustedTextSize:s.adjustedIconSize,s.fontstack,g,h,i,j,k,l,m,n,o,p))}}}function f(a,b,c,d,e,f,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y,z,A=a.gl,B=a.transform,C="map"===p,D="map"===q,E=h?24:1,F=r/E;if(D?(y=i(d,1,a.transform.zoom)*F,z=1/Math.cos(B._pitch),x=[y,y]):(y=a.transform.altitude*F,z=1,x=[B.pixelsToGLUnits[0]*y,B.pixelsToGLUnits[1]*y]),h||a.style.sprite.loaded()){var G=a.useProgram(j?"sdf":"icon");if(A.uniformMatrix4fv(G.u_matrix,!1,a.translatePosMatrix(c,d,n,o)),A.uniform1i(G.u_rotate_with_map,C),A.uniform1i(G.u_pitch_with_map,D),A.uniform2fv(G.u_extrude_scale,x),A.activeTexture(A.TEXTURE0),A.uniform1i(G.u_texture,0),h){var H=m&&a.glyphSource.getGlyphAtlas(m);if(!H)return;H.updateTexture(A),A.uniform2f(G.u_texsize,H.width/4,H.height/4)}else{var I=a.options.rotating||a.options.zooming,J=1!==F||g.devicePixelRatio!==a.spriteAtlas.pixelRatio||k,K=D||a.transform.pitch;a.spriteAtlas.bind(A,j||I||J||K),A.uniform2f(G.u_texsize,a.spriteAtlas.width/4,a.spriteAtlas.height/4)}var L=Math.log(r/l)/Math.LN2||0;A.uniform1f(G.u_zoom,10*(a.transform.zoom-L)),A.activeTexture(A.TEXTURE1),a.frameHistory.bind(A),A.uniform1i(G.u_fadetexture,1);var M;if(j){var N=8,O=1.19,P=6,Q=.105*E/r/g.devicePixelRatio;if(s){A.uniform1f(G.u_gamma,(u*O/F/N+Q)*z),A.uniform4fv(G.u_color,t),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,(P-s/F)/N);for(var R=0;R<f.length;R++)M=f[R],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}A.uniform1f(G.u_gamma,Q*z),A.uniform4fv(G.u_color,w),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,.75),A.uniform1f(G.u_pitch,B.pitch/360*2*Math.PI),A.uniform1f(G.u_bearing,B.bearing/360*2*Math.PI),A.uniform1f(G.u_aspect_ratio,B.width/B.height);for(var S=0;S<f.length;S++)M=f[S],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}else{A.uniform1f(G.u_opacity,v);for(var T=0;T<f.length;T++)M=f[T],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}}}var g=a("../util/browser"),h=a("./draw_collision_debug"),i=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":364,"../util/browser":427,"./draw_collision_debug":348}],354:[function(a,b,c){"use strict";function d(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.fadeDuration=300,this.previousZoom=0,this.firstFrame=!0}b.exports=d,d.prototype.record=function(a){var b=Date.now();this.firstFrame&&(b=0,this.firstFrame=!1),a=Math.floor(10*a);var c;if(a<this.previousZoom)for(c=a+1;c<=this.previousZoom;c++)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];else for(c=a;c>this.previousZoom;c--)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];for(c=0;256>c;c++){var d=b-this.changeTimes[c],e=d/this.fadeDuration*255;a>=c?this.opacities[c]=this.changeOpacities[c]+e:this.opacities[c]=this.changeOpacities[c]-e}this.changed=!0,this.previousZoom=a},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.changed&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,256,1,a.ALPHA,a.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,256,1,0,a.ALPHA,a.UNSIGNED_BYTE,this.array))}},{}],355:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}var e=a("../util/util");b.exports=d,d.prototype.setSprite=function(a){this.sprite=a},d.prototype.getDash=function(a,b){var c=a.join(",")+b;return this.positions[c]||(this.positions[c]=this.addDash(a,b)),this.positions[c]},d.prototype.addDash=function(a,b){var c=b?7:0,d=2*c+1,f=128;if(this.nextRow+d>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var g=0,h=0;h<a.length;h++)g+=a[h];for(var i=this.width/g,j=i/2,k=a.length%2===1,l=-c;c>=l;l++)for(var m=this.nextRow+c+l,n=this.width*m,o=k?-a[a.length-1]:0,p=a[0],q=1,r=0;r<this.width;r++){for(;r/i>p;)o=p,p+=a[q],k&&q===a.length-1&&(p+=a[0]),q++;var s,t=Math.abs(r-o*i),u=Math.abs(r-p*i),v=Math.min(t,u),w=q%2===1;if(b){var x=c?l/c*(j+1):0;if(w){var y=j-Math.abs(x);s=Math.sqrt(v*v+y*y)}else s=j-Math.sqrt(v*v+x*x)}else s=(w?1:-1)*v;this.data[3+4*(n+r)]=Math.max(0,Math.min(255,s+f))}var z={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:g};return this.nextRow+=d,this.dirty=!0,z},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this.data))}},{"../util/util":443}],356:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.transform=b,this.reusableTextures={},this.preFbos={},this.frameHistory=new g,this.setup(),this.numSublayers=h.maxUnderzooming+h.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE)}var e=a("../util/browser"),f=a("gl-matrix").mat4,g=a("./frame_history"),h=a("../source/source_cache"),i=a("../data/bucket").EXTENT,j=a("../source/pixels_to_tile_units"),k=a("../util/util"),l=a("../util/struct_array"),m=a("../data/buffer"),n=a("./vertex_array_object"),o=a("./draw_raster").RasterBoundsArray,p=a("./create_uniform_pragmas");b.exports=d,k.extend(d.prototype,a("./painter/use_program")),d.prototype.resize=function(a,b){var c=this.gl;this.width=a*e.devicePixelRatio,this.height=b*e.devicePixelRatio,c.viewport(0,0,this.width,this.height)},d.prototype.setup=function(){var a=this.gl;a.verbose=!0,a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),this._depthMask=!1,a.depthMask(!1);var b=this.PosArray=new l({members:[{name:"a_pos",type:"Int16",components:2}]}),c=new b;c.emplaceBack(0,0),c.emplaceBack(i,0),c.emplaceBack(0,i),c.emplaceBack(i,i),this.tileExtentBuffer=new m(c.serialize(),b.serialize(),m.BufferType.VERTEX),this.tileExtentVAO=new n,this.tileExtentPatternVAO=new n;var d=new b;d.emplaceBack(0,0),d.emplaceBack(i,0),d.emplaceBack(i,i),d.emplaceBack(0,i),d.emplaceBack(0,0),this.debugBuffer=new m(d.serialize(),b.serialize(),m.BufferType.VERTEX),this.debugVAO=new n;var e=new o;e.emplaceBack(0,0,0,0),e.emplaceBack(i,0,32767,0),e.emplaceBack(0,i,0,32767),e.emplaceBack(i,i,32767,32767),this.rasterBoundsBuffer=new m(e.serialize(),o.serialize(),m.BufferType.VERTEX),this.rasterBoundsVAO=new n},d.prototype.clearColor=function(){var a=this.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},d.prototype.clearStencil=function(){var a=this.gl;a.clearStencil(0),a.stencilMask(255),a.clear(a.STENCIL_BUFFER_BIT)},d.prototype.clearDepth=function(){var a=this.gl;a.clearDepth(1),this.depthMask(!0),a.clear(a.DEPTH_BUFFER_BIT)},d.prototype._renderTileClippingMasks=function(a){var b=this.gl;b.colorMask(!1,!1,!1,!1),this.depthMask(!1),b.disable(b.DEPTH_TEST),b.enable(b.STENCIL_TEST),b.stencilMask(248),b.stencilOp(b.KEEP,b.KEEP,b.REPLACE);var c=1;this._tileClippingMaskIDs={};for(var d=0;d<a.length;d++){var e=a[d],f=this._tileClippingMaskIDs[e.id]=c++<<3;b.stencilFunc(b.ALWAYS,f,248);var g=p([{name:"u_color",components:4},{name:"u_opacity",components:1}]),h=this.useProgram("fill",[],g,g);b.uniformMatrix4fv(h.u_matrix,!1,e.posMatrix),this.tileExtentVAO.bind(b,h,this.tileExtentBuffer),b.drawArrays(b.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}b.stencilMask(0),b.colorMask(!0,!0,!0,!0),this.depthMask(!0),b.enable(b.DEPTH_TEST)},d.prototype.enableTileClippingMask=function(a){var b=this.gl;b.stencilFunc(b.EQUAL,this._tileClippingMaskIDs[a.id],248)},d.prototype.prepareBuffers=function(){},d.prototype.bindDefaultFramebuffer=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)};var q={symbol:a("./draw_symbol"),circle:a("./draw_circle"),line:a("./draw_line"),fill:a("./draw_fill"),raster:a("./draw_raster"),background:a("./draw_background"),debug:a("./draw_debug")};d.prototype.render=function(a,b){this.style=a,this.options=b,this.lineAtlas=a.lineAtlas,this.spriteAtlas=a.spriteAtlas,this.spriteAtlas.setSprite(a.sprite),this.glyphSource=a.glyphSource,this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(b.showOverdrawInspector),this.depthRange=(a._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass({isOpaquePass:!0}),this.renderPass({isOpaquePass:!1})},d.prototype.renderPass=function(a){var b=this.style._groups,c=a.isOpaquePass;this.currentLayer=c?this.style._order.length:-1;for(var d=0;d<b.length;d++){var e,f=b[c?b.length-1-d:d],g=this.style.sources[f.source],h=[];if(g){for(h=g.getVisibleCoordinates(),e=0;e<h.length;e++)h[e].posMatrix=this.transform.calculatePosMatrix(h[e],g.maxzoom);this.clearStencil(),g.prepare&&g.prepare(),g.isTileClipped&&this._renderTileClippingMasks(h)}for(c?(this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.isOpaquePass=!0):(this.gl.enable(this.gl.BLEND),this.isOpaquePass=!1,h.reverse()),e=0;e<f.length;e++){var i=f[c?f.length-1-e:e];this.currentLayer+=c?-1:1,this.renderLayer(this,g,i,h)}g&&q.debug(this,g,h)}},d.prototype.depthMask=function(a){a!==this._depthMask&&(this._depthMask=a,this.gl.depthMask(a))},d.prototype.renderLayer=function(a,b,c,d){c.isHidden(this.transform.zoom)||("background"===c.type||d.length)&&(this.id=c.id,q[c.type](a,b,c,d))},d.prototype.setDepthSublayer=function(a){var b=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon,c=b-1+this.depthRange;this.gl.depthRange(c,b)},d.prototype.translatePosMatrix=function(a,b,c,d){if(!c[0]&&!c[1])return a;if("viewport"===d){var e=Math.sin(-this.transform.angle),g=Math.cos(-this.transform.angle);c=[c[0]*g-c[1]*e,c[0]*e+c[1]*g]}var h=[j(b,c[0],this.transform.zoom),j(b,c[1],this.transform.zoom),0],i=new Float32Array(16);return f.translate(i,a,h),i},d.prototype.saveTexture=function(a){var b=this.reusableTextures[a.size];b?b.push(a):this.reusableTextures[a.size]=[a]},d.prototype.getTexture=function(a){var b=this.reusableTextures[a];return b&&b.length>0?b.pop():null},d.prototype.lineWidth=function(a){this.gl.lineWidth(k.clamp(a,this.lineWidthRange[0],this.lineWidthRange[1]));
},d.prototype.showOverdrawInspector=function(a){if(a||this._showOverdrawInspector){this._showOverdrawInspector=a;var b=this.gl;if(a){b.blendFunc(b.CONSTANT_COLOR,b.ONE);var c=8,d=1/c;b.blendColor(d,d,d,0),b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)}else b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA)}}},{"../data/bucket":330,"../data/buffer":335,"../source/pixels_to_tile_units":364,"../source/source_cache":368,"../util/browser":427,"../util/struct_array":441,"../util/util":443,"./create_uniform_pragmas":345,"./draw_background":346,"./draw_circle":347,"./draw_debug":349,"./draw_fill":350,"./draw_line":351,"./draw_raster":352,"./draw_symbol":353,"./frame_history":354,"./painter/use_program":357,"./vertex_array_object":358,"gl-matrix":194}],357:[function(a,b,c){"use strict";function d(a,b){return a.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(a,c,d,e,f){return b[c][f].replace(/{type}/g,e).replace(/{precision}/g,d)})}var e=a("assert"),f=a("../../util/util"),g=a("mapbox-gl-shaders"),h=g.util;b.exports._createProgram=function(a,b,c,i){for(var j=this.gl,k=j.createProgram(),l=g[a],m="#define MAPBOX_GL_JS;\n",n=0;n<b.length;n++)m+="#define "+b[n]+";\n";var o=j.createShader(j.FRAGMENT_SHADER);j.shaderSource(o,d(m+l.fragmentSource,i)),j.compileShader(o),e(j.getShaderParameter(o,j.COMPILE_STATUS),j.getShaderInfoLog(o)),j.attachShader(k,o);var p=j.createShader(j.VERTEX_SHADER);j.shaderSource(p,d(m+h+l.vertexSource,c)),j.compileShader(p),e(j.getShaderParameter(p,j.COMPILE_STATUS),j.getShaderInfoLog(p)),j.attachShader(k,p),j.linkProgram(k),e(j.getProgramParameter(k,j.LINK_STATUS),j.getProgramInfoLog(k));for(var q={},r=j.getProgramParameter(k,j.ACTIVE_ATTRIBUTES),s=0;r>s;s++){var t=j.getActiveAttrib(k,s);q[t.name]=j.getAttribLocation(k,t.name)}for(var u={},v=j.getProgramParameter(k,j.ACTIVE_UNIFORMS),w=0;v>w;w++){var x=j.getActiveUniform(k,w);u[x.name]=j.getUniformLocation(k,x.name)}return f.extend({program:k,definition:l,attributes:q,numAttributes:r},q,u)},b.exports._createProgramCached=function(a,b,c,d){this.cache=this.cache||{};var e=JSON.stringify({name:a,defines:b,vertexPragmas:c,fragmentPragmas:d});return this.cache[e]||(this.cache[e]=this._createProgram(a,b,c,d)),this.cache[e]},b.exports.useProgram=function(a,b,c,d){var e=this.gl;b=b||[],this._showOverdrawInspector&&(b=b.concat("OVERDRAW_INSPECTOR"));var f=this._createProgramCached(a,b,c,d),g=this.currentProgram;return g!==f&&(e.useProgram(f.program),this.currentProgram=f),f}},{"../../util/util":443,assert:48,"mapbox-gl-shaders":304}],358:[function(a,b,c){"use strict";function d(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.vao=null}var e=a("assert");b.exports=d,d.prototype.bind=function(a,b,c,d,e){void 0===a.extVertexArrayObject&&(a.extVertexArrayObject=a.getExtension("OES_vertex_array_object"));var f=!this.vao||this.boundProgram!==b||this.boundVertexBuffer!==c||this.boundVertexBuffer2!==e||this.boundElementBuffer!==d;!a.extVertexArrayObject||f?this.freshBind(a,b,c,d,e):a.extVertexArrayObject.bindVertexArrayOES(this.vao)},d.prototype.freshBind=function(a,b,c,d,f){var g,h=b.numAttributes;if(a.extVertexArrayObject)this.vao&&this.destroy(a),this.vao=a.extVertexArrayObject.createVertexArrayOES(),a.extVertexArrayObject.bindVertexArrayOES(this.vao),g=0,this.boundProgram=b,this.boundVertexBuffer=c,this.boundVertexBuffer2=f,this.boundElementBuffer=d;else{g=a.currentNumAttributes||0;for(var i=h;g>i;i++)e(0!==i),a.disableVertexAttribArray(i)}for(var j=g;h>j;j++)a.enableVertexAttribArray(j);c.bind(a),c.setVertexAttribPointers(a,b),f&&(f.bind(a),f.setVertexAttribPointers(a,b)),d&&d.bind(a),a.currentNumAttributes=h},d.prototype.unbind=function(a){var b=a.extVertexArrayObject;b&&b.bindVertexArrayOES(null)},d.prototype.destroy=function(a){var b=a.extVertexArrayObject;b&&this.vao&&(b.deleteVertexArrayOES(this.vao),this.vao=null)}},{assert:48}],359:[function(a,b,c){"use strict";function d(a,b,c){b=b||{},this.id=a,this.dispatcher=c,this._data=b.data,void 0!==b.maxzoom&&(this.maxzoom=b.maxzoom),b.type&&(this.type=b.type);var d=h/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:b.cluster||!1,geojsonVtOptions:{buffer:(void 0!==b.buffer?b.buffer:128)*d,tolerance:(void 0!==b.tolerance?b.tolerance:.375)*d,extent:h,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(b.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:h,radius:(b.clusterRadius||50)*d,log:!1}},b.workerOptions),this._updateWorkerData(function(a){return a?void this.fire("error",{error:a}):void this.fire("load")}.bind(this))}var e=a("../util/evented"),f=a("../util/util"),g=a("resolve-url"),h=a("../data/bucket").EXTENT;b.exports=d,d.prototype=f.inherit(e,{type:"geojson",minzoom:0,maxzoom:18,tileSize:512,isTileClipped:!0,reparseOverscaled:!0,onAdd:function(a){this.map=a},setData:function(a){return this._data=a,this._updateWorkerData(function(a){return a?this.fire("error",{error:a}):void this.fire("change")}.bind(this)),this},_updateWorkerData:function(a){var b=f.extend({},this.workerOptions),c=this._data;"string"==typeof c?b.url="undefined"!=typeof window?g(window.location.href,c):c:b.data=JSON.stringify(c),this.workerID=this.dispatcher.send(this.type+".loadData",b,function(b){this._loaded=!0,a(b)}.bind(this))},loadTile:function(a,b){var c=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,d={type:this.type,uid:a.uid,coord:a.coord,zoom:a.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:c,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID=this.dispatcher.send("load tile",d,function(c,d){return a.unloadVectorData(this.map.painter),a.aborted?void 0:c?b(c):(a.loadVectorData(d,this.map.style),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null))}.bind(this),this.workerID)},abortTile:function(a){a.aborted=!0},unloadTile:function(a){a.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},function(){},a.workerID)},serialize:function(){return{type:this.type,data:this._data}}})},{"../data/bucket":330,"../util/evented":435,"../util/util":443,"resolve-url":510}],360:[function(a,b,c){"use strict";function d(a,b,c){c&&(this.loadGeoJSON=c),l.call(this,a,b)}var e=a("../util/util"),f=a("../util/ajax"),g=a("geojson-rewind"),h=a("./geojson_wrapper"),i=a("vt-pbf"),j=a("supercluster"),k=a("geojson-vt"),l=a("./vector_tile_worker_source");b.exports=d,d.prototype=e.inherit(l,{_geoJSONIndexes:{},loadVectorData:function(a,b){var c=a.source,d=a.coord;if(!this._geoJSONIndexes[c])return b(null,null);var e=this._geoJSONIndexes[c].getTile(Math.min(d.z,a.maxZoom),d.x,d.y);if(!e)return b(null,null);var f=new h(e.features);f.name="_geojsonTileLayer";var g=i({layers:{_geojsonTileLayer:f}});(0!==g.byteOffset||g.byteLength!==g.buffer.byteLength)&&(g=new Uint8Array(g)),b(null,{tile:f,rawTileData:g.buffer})},loadData:function(a,b){var c=function(c,d){return c?b(c):"object"!=typeof d?b(new Error("Input data is not a valid GeoJSON object.")):(g(d,!0),void this._indexData(d,a,function(c,d){return c?b(c):(this._geoJSONIndexes[a.source]=d,void b(null))}.bind(this)))}.bind(this);this.loadGeoJSON(a,c)},loadGeoJSON:function(a,b){if(a.url)f.getJSON(a.url,b);else{if("string"!=typeof a.data)return b(new Error("Input data is not a valid GeoJSON object."));try{return b(null,JSON.parse(a.data))}catch(c){return b(new Error("Input data is not a valid GeoJSON object."))}}},_indexData:function(a,b,c){try{b.cluster?c(null,j(b.superclusterOptions).load(a.features)):c(null,k(a,b.geojsonVtOptions))}catch(d){return c(d)}}})},{"../util/ajax":426,"../util/util":443,"./geojson_wrapper":361,"./vector_tile_worker_source":372,"geojson-rewind":139,"geojson-vt":143,supercluster:538,"vt-pbf":565}],361:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length,this.extent=h}function e(a){if(this.type=a.type,1===a.type){this.rawGeometry=[];for(var b=0;b<a.geometry.length;b++)this.rawGeometry.push([a.geometry[b]])}else this.rawGeometry=a.geometry;this.properties=a.tags,this.extent=h}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature,h=a("../data/bucket").EXTENT;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-(1/0),d=1/0,e=-(1/0),f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"../data/bucket":330,"point-geometry":485,"vector-tile":559}],362:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c,this.url=b.url,this.coordinates=b.coordinates,j.getImage(b.url,function(a,c){return a?this.fire("error",{error:a}):(this.image=c,this.image.addEventListener("load",function(){this.map._rerender()}.bind(this)),this._loaded=!0,this.fire("load"),void(this.map&&this.setCoordinates(b.coordinates)))}.bind(this))}var e=a("../util/util"),f=a("./tile_coord"),g=a("../geo/lng_lat"),h=a("point-geometry"),i=a("../util/evented"),j=a("../util/ajax"),k=a("../data/bucket").EXTENT,l=a("../render/draw_raster").RasterBoundsArray,m=a("../data/buffer"),n=a("../render/vertex_array_object");b.exports=d,d.prototype=e.inherit(i,{minzoom:0,maxzoom:22,tileSize:512,onAdd:function(a){this.map=a,this.image&&this.setCoordinates(this.coordinates)},setCoordinates:function(a){this.coordinates=a;var b=this.map,c=a.map(function(a){return b.transform.locationCoordinate(g.convert(a)).zoomTo(0)}),d=this.centerCoord=e.getCoordinatesCenter(c);return d.column=Math.round(d.column),d.row=Math.round(d.row),this.minzoom=this.maxzoom=d.zoom,this._coord=new f(d.zoom,d.column,d.row),this._tileCoords=c.map(function(a){var b=a.zoomTo(d.zoom);return new h(Math.round((b.column-d.column)*k),Math.round((b.row-d.row)*k))}),this.fire("change"),this},_setTile:function(a){this._prepared=!1,this.tile=a;var b=32767,c=new l;c.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),c.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,b,0),c.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,b),c.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,b,b),this.tile.buckets={},this.tile.boundsBuffer=new m(c.serialize(),l.serialize(),m.BufferType.VERTEX),this.tile.boundsVAO=new n,this.tile.state="loaded"},prepare:function(){if(this._loaded&&this.image&&this.image.complete&&this.tile){var a=this.map.painter,b=a.gl;this._prepared?(b.bindTexture(b.TEXTURE_2D,this.tile.texture),b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,this.image)):(this.tile.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.tile.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,this.image))}},loadTile:function(a,b){this._coord&&this._coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},serialize:function(){return{type:"image",urls:this.url,coordinates:this.coordinates}}})},{"../data/bucket":330,"../data/buffer":335,"../geo/lng_lat":340,"../render/draw_raster":352,"../render/vertex_array_object":358,"../util/ajax":426,"../util/evented":435,"../util/util":443,"./tile_coord":370,"point-geometry":485}],363:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/ajax"),f=a("../util/browser"),g=a("../util/mapbox").normalizeSourceURL;b.exports=function(a,b){var c=function(a,c){if(a)return b(a);var e=d.pick(c,["tiles","minzoom","maxzoom","attribution"]);c.vector_layers&&(e.vectorLayers=c.vector_layers,e.vectorLayerIds=e.vectorLayers.map(function(a){return a.id})),b(null,e)};a.url?e.getJSON(g(a.url),c):f.frame(c.bind(null,null,a))}},{"../util/ajax":426,"../util/browser":427,"../util/mapbox":440,"../util/util":443}],364:[function(a,b,c){"use strict";var d=a("../data/bucket");b.exports=function(a,b,c){return b*(d.EXTENT/(a.tileSize*Math.pow(2,c-a.coord.z)))}},{"../data/bucket":330}],365:[function(a,b,c){"use strict";function d(a,b){var c=a.coord,d=b.coord;return c.z-d.z||c.y-d.y||c.w-d.w||c.x-d.x}function e(a){for(var b=a[0]||{},c=1;c<a.length;c++){var d=a[c];for(var e in d){var f=d[e],g=b[e];if(void 0===g)g=b[e]=f;else for(var h=0;h<f.length;h++)g.push(f[h])}}return b}var f=a("./tile_coord");c.rendered=function(a,b,c,f,g,h){var i=a.tilesIn(c);i.sort(d);for(var j=[],k=0;k<i.length;k++){var l=i[k];l.tile.featureIndex&&j.push(l.tile.featureIndex.query({queryGeometry:l.queryGeometry,scale:l.scale,tileSize:l.tile.tileSize,bearing:h,params:f},b))}return e(j)},c.source=function(a,b){for(var c=a.getRenderableIds().map(function(b){return a.getTileByID(b)}),d=[],e={},g=0;g<c.length;g++){var h=c[g],i=new f(Math.min(h.sourceMaxZoom,h.coord.z),h.coord.x,h.coord.y,0).id;e[i]||(e[i]=!0,h.querySourceFeatures(d,b))}return d}},{"./tile_coord":370}],366:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c,e.extend(this,e.pick(b,["url","scheme","tileSize"])),h(b,function(a,b){return a?this.fire("error",a):(e.extend(this,b),void this.fire("load"))}.bind(this))}var e=a("../util/util"),f=a("../util/ajax"),g=a("../util/evented"),h=a("./load_tilejson"),i=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=e.inherit(g,{minzoom:0,maxzoom:22,roundZoom:!0,scheme:"xyz",tileSize:512,_loaded:!1,onAdd:function(a){this.map=a},serialize:function(){return{type:"raster",url:this.url,tileSize:this.tileSize}},loadTile:function(a,b){function c(c,d){if(delete a.request,!a.aborted){if(c)return b(c);var e=this.map.painter.gl;a.texture=this.map.painter.getTexture(d.width),a.texture?(e.bindTexture(e.TEXTURE_2D,a.texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,d)):(a.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,a.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,d),a.texture.size=d.width),e.generateMipmap(e.TEXTURE_2D),this.map.animationLoop.set(this.map.style.rasterFadeDuration),a.state="loaded",b(null)}}var d=i(a.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);a.request=f.getImage(d,c.bind(this))},abortTile:function(a){a.request&&(a.request.abort(),delete a.request)},unloadTile:function(a){a.texture&&this.map.painter.saveTexture(a.texture)}})},{"../util/ajax":426,"../util/evented":435,"../util/mapbox":440,"../util/util":443,"./load_tilejson":363}],367:[function(a,b,c){"use strict";var d=a("../util/util"),e={vector:a("../source/vector_tile_source"),raster:a("../source/raster_tile_source"),geojson:a("../source/geojson_source"),video:a("../source/video_source"),image:a("../source/image_source")};c.create=function(a,b,c){if(b=new e[b.type](a,b,c),b.id!==a)throw new Error("Expected Source id to be "+a+" instead of "+b.id);return d.bindAll(["load","abort","unload","serialize","prepare"],b),b},c.getType=function(a){return e[a]},c.setType=function(a,b){e[a]=b}},{"../source/geojson_source":359,"../source/image_source":362,"../source/raster_tile_source":366,"../source/vector_tile_source":371,"../source/video_source":373,"../util/util":443}],368:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c;var d=this._source=g.create(a,b,c).on("load",function(){this.map&&this._source.onAdd&&this._source.onAdd(this.map),this._sourceLoaded=!0,this.tileSize=d.tileSize,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,this.roundZoom=d.roundZoom,this.reparseOverscaled=d.reparseOverscaled,this.isTileClipped=d.isTileClipped,this.attribution=d.attribution,this.vectorLayerIds=d.vectorLayerIds,this.fire("load")}.bind(this)).on("error",function(a){this._sourceErrored=!0,this.fire("error",a)}.bind(this)).on("change",function(){this.reload(),this.transform&&this.update(this.transform,this.map&&this.map.style.rasterFadeDuration),this.fire("change")}.bind(this));this._tiles={},this._cache=new k(0,this.unloadTile.bind(this)),this._isIdRenderable=this._isIdRenderable.bind(this)}function e(a,b,c){var d=c.zoomTo(Math.min(a.z,b));return{x:(d.column-(a.x+a.w*Math.pow(2,a.z)))*n,y:(d.row-a.y)*n}}function f(a,b){return a%32-b%32}var g=a("./source"),h=a("./tile"),i=a("../util/evented"),j=a("./tile_coord"),k=a("../util/lru_cache"),l=a("../geo/coordinate"),m=a("../util/util"),n=a("../data/bucket").EXTENT;b.exports=d,d.maxOverzooming=10,d.maxUnderzooming=3,d.prototype=m.inherit(i,{onAdd:function(a){this.map=a,this._source&&this._source.onAdd&&this._source.onAdd(a)},loaded:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var a in this._tiles){var b=this._tiles[a];if("loaded"!==b.state&&"errored"!==b.state)return!1}return!0},getSource:function(){return this._source},loadTile:function(a,b){return this._source.loadTile(a,b)},unloadTile:function(a){return this._source.unloadTile?this._source.unloadTile(a):void 0},abortTile:function(a){return this._source.abortTile?this._source.abortTile(a):void 0},serialize:function(){return this._source.serialize()},prepare:function(){return this._sourceLoaded&&this._source.prepare?this._source.prepare():void 0},getIds:function(){return Object.keys(this._tiles).map(Number).sort(f)},getRenderableIds:function(){return this.getIds().filter(this._isIdRenderable)},_isIdRenderable:function(a){return this._tiles[a].isRenderable()&&!this._coveredTiles[a]},reload:function(){this._cache.reset();for(var a in this._tiles){var b=this._tiles[a];"loading"!==b.state&&(b.state="reloading"),this.loadTile(this._tiles[a],this._tileLoaded.bind(this,this._tiles[a]))}},_tileLoaded:function(a,b){return b?(a.state="errored",this.fire("tile.error",{tile:a,error:b}),void this._source.fire("tile.error",{tile:a,error:b})):(a.source=this,a.timeAdded=(new Date).getTime(),this.fire("tile.load",{tile:a}),void this._source.fire("tile.load",{tile:a}))},getTile:function(a){return this.getTileByID(a.id)},getTileByID:function(a){return this._tiles[a]},getZoom:function(a){return a.zoom+a.scaleZoom(a.tileSize/this.tileSize)},findLoadedChildren:function(a,b,c){var d=!1;for(var e in this._tiles){var f=this._tiles[e];if(!(c[e]||!f.isRenderable()||f.coord.z<=a.z||f.coord.z>b)){var g=Math.pow(2,Math.min(f.coord.z,this.maxzoom)-Math.min(a.z,this.maxzoom));if(Math.floor(f.coord.x/g)===a.x&&Math.floor(f.coord.y/g)===a.y)for(c[e]=!0,d=!0;f&&f.coord.z-1>a.z;){var h=f.coord.parent(this.maxzoom).id;f=this._tiles[h],f&&f.isRenderable()&&(delete c[e],c[h]=!0)}}}return d},findLoadedParent:function(a,b,c){for(var d=a.z-1;d>=b;d--){a=a.parent(this.maxzoom);var e=this._tiles[a.id];if(e&&e.isRenderable())return c[a.id]=!0,e;if(this._cache.has(a.id))return this.addTile(a),c[a.id]=!0,this._tiles[a.id]}},updateCacheSize:function(a){var b=Math.ceil(a.width/a.tileSize)+1,c=Math.ceil(a.height/a.tileSize)+1,d=b*c,e=5;this._cache.setMaxSize(Math.floor(d*e))},update:function(a,b){if(this._sourceLoaded){var c,e,f;this.updateCacheSize(a);var g=(this.roundZoom?Math.round:Math.floor)(this.getZoom(a)),h=Math.max(g-d.maxOverzooming,this.minzoom),i=Math.max(g+d.maxUnderzooming,this.minzoom),k={},l=(new Date).getTime();this._coveredTiles={};var n=this.used?a.coveringTiles(this._source):[];for(c=0;c<n.length;c++)e=n[c],f=this.addTile(e),k[e.id]=!0,f.isRenderable()||this.findLoadedChildren(e,i,k)||this.findLoadedParent(e,h,k);for(var o={},p=Object.keys(k),q=0;q<p.length;q++){var r=p[q];e=j.fromID(r),f=this._tiles[r],f&&f.timeAdded>l-(b||0)&&(this.findLoadedChildren(e,i,k)&&(k[r]=!0),this.findLoadedParent(e,h,o))}var s;for(s in o)k[s]||(this._coveredTiles[s]=!0);for(s in o)k[s]=!0;var t=m.keysDifference(this._tiles,k);for(c=0;c<t.length;c++)this.removeTile(+t[c]);this.transform=a}},addTile:function(a){var b=this._tiles[a.id];if(b)return b;var c=a.wrapped();if(b=this._tiles[c.id],b||(b=this._cache.get(c.id),b&&this._redoPlacement&&this._redoPlacement(b)),!b){var d=a.z,e=d>this.maxzoom?Math.pow(2,d-this.maxzoom):1;b=new h(c,this.tileSize*e,this.maxzoom),this.loadTile(b,this._tileLoaded.bind(this,b))}return b.uses++,this._tiles[a.id]=b,this.fire("tile.add",{tile:b}),this._source.fire("tile.add",{tile:b}),b},removeTile:function(a){var b=this._tiles[a];b&&(b.uses--,delete this._tiles[a],this.fire("tile.remove",{tile:b}),this._source.fire("tile.remove",{tile:b}),b.uses>0||(b.isRenderable()?this._cache.add(b.coord.wrapped().id,b):(b.aborted=!0,this.abortTile(b),this.unloadTile(b))))},clearTiles:function(){for(var a in this._tiles)this.removeTile(a);this._cache.reset()},tilesIn:function(a){for(var b={},c=this.getIds(),d=1/0,f=1/0,g=-(1/0),h=-(1/0),i=a[0].zoom,k=0;k<a.length;k++){var m=a[k];d=Math.min(d,m.column),f=Math.min(f,m.row),g=Math.max(g,m.column),h=Math.max(h,m.row)}for(var o=0;o<c.length;o++){var p=this._tiles[c[o]],q=j.fromID(c[o]),r=[e(q,p.sourceMaxZoom,new l(d,f,i)),e(q,p.sourceMaxZoom,new l(g,h,i))];if(r[0].x<n&&r[0].y<n&&r[1].x>=0&&r[1].y>=0){for(var s=[],t=0;t<a.length;t++)s.push(e(q,p.sourceMaxZoom,a[t]));var u=b[p.coord.id];void 0===u&&(u=b[p.coord.id]={tile:p,coord:q,queryGeometry:[],scale:Math.pow(2,this.transform.zoom-p.coord.z)}),u.queryGeometry.push(s)}}var v=[];for(var w in b)v.push(b[w]);return v},redoPlacement:function(){for(var a=this.getIds(),b=0;b<a.length;b++){var c=this.getTileByID(a[b]);c.redoPlacement(this)}},getVisibleCoordinates:function(){return this.getRenderableIds().map(j.fromID)}})},{"../data/bucket":330,"../geo/coordinate":339,"../util/evented":435,"../util/lru_cache":439,"../util/util":443,"./source":367,"./tile":369,"./tile_coord":370}],369:[function(a,b,c){"use strict";function d(a,b,c){this.coord=a,this.uid=f.uniqueId(),this.uses=0,this.tileSize=b,this.sourceMaxZoom=c,this.buckets={},this.state="loading"}function e(a,b){if(b){for(var c={},d=0;d<a.length;d++){var e=b.getLayer(a[d].layerId);if(e){var h=g.create(f.extend({layer:e,childLayers:a[d].childLayerIds.map(b.getLayer.bind(b)).filter(function(a){return a})},a[d]));c[h.id]=h}}return c}}var f=a("../util/util"),g=a("../data/bucket"),h=a("../data/feature_index"),i=a("vector-tile"),j=a("pbf"),k=a("../util/vectortile_to_geojson"),l=a("feature-filter"),m=a("../symbol/collision_tile"),n=a("../symbol/collision_box"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype={loadVectorData:function(a,b){this.state="loaded",a&&(this.collisionBoxArray=new n(a.collisionBoxArray),this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new o(a.symbolInstancesArray),this.symbolQuadsArray=new p(a.symbolQuadsArray),this.featureIndex=new h(a.featureIndex,a.rawTileData,this.collisionTile),this.rawTileData=a.rawTileData,this.buckets=e(a.buckets,b))},reloadSymbolData:function(a,b,c){if("unloaded"!==this.state){this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var d in this.buckets){var g=this.buckets[d];"symbol"===g.type&&(g.destroy(b.gl),delete this.buckets[d])}f.extend(this.buckets,e(a.buckets,c))}},unloadVectorData:function(a){for(var b in this.buckets){var c=this.buckets[b];c.destroy(a.gl)}this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.rawTileData=null,this.buckets=null,this.state="unloaded"},redoPlacement:function(a){function b(b,c){this.reloadSymbolData(c,a.map.painter,a.map.style),a.fire("tile.load",{tile:this}),this.state="loaded",this.redoWhenDone&&(this.redoPlacement(a),this.redoWhenDone=!1)}return"loaded"!==this.state||"reloading"===this.state?void(this.redoWhenDone=!0):(this.state="reloading",void a.dispatcher.send("redo placement",{uid:this.uid,source:a.id,angle:a.map.transform.angle,pitch:a.map.transform.pitch,showCollisionBoxes:a.map.showCollisionBoxes},b.bind(this),this.workerID))},getBucket:function(a){return this.buckets&&this.buckets[a.ref||a.id]},querySourceFeatures:function(a,b){if(this.rawTileData){this.vtLayers||(this.vtLayers=new i.VectorTile(new j(new Uint8Array(this.rawTileData))).layers);var c=this.vtLayers._geojsonTileLayer||this.vtLayers[b.sourceLayer];if(c)for(var d=l(b.filter),e={z:this.coord.z,x:this.coord.x,y:this.coord.y},f=0;f<c.length;f++){var g=c.feature(f);if(d(g)){var h=new k(g,this.coord.z,this.coord.x,this.coord.y);h.tile=e,a.push(h)}}}},isRenderable:function(){return"loaded"===this.state||"reloading"===this.state}}},{"../data/bucket":330,"../data/feature_index":337,"../symbol/collision_box":395,"../symbol/collision_tile":397,"../symbol/symbol_instances":406,"../symbol/symbol_quads":407,"../util/util":443,"../util/vectortile_to_geojson":444,"feature-filter":133,pbf:479,"vector-tile":559}],370:[function(a,b,c){"use strict";function d(a,b,c,d){i(!isNaN(a)&&a>=0&&a%1===0),i(!isNaN(b)&&b>=0&&b%1===0),i(!isNaN(c)&&c>=0&&c%1===0),isNaN(d)&&(d=0),this.z=+a,this.x=+b,this.y=+c,this.w=+d,d*=2,0>d&&(d=-1*d-1);var e=1<<this.z;this.id=32*(e*e*d+e*this.y+this.x)+this.z,this.posMatrix=null}function e(a,b,c){for(var d,e="",f=a;f>0;f--)d=1<<f-1,e+=(b&d?1:0)+(c&d?2:0);return e}function f(a,b){if(a.row>b.row){var c=a;a=b,b=c}return{x0:a.column,y0:a.row,x1:b.column,y1:b.row,dx:b.column-a.column,dy:b.row-a.row}}function g(a,b,c,d,e){var f=Math.max(c,Math.floor(b.y0)),g=Math.min(d,Math.ceil(b.y1));if(a.x0===b.x0&&a.y0===b.y0?a.x0+b.dy/a.dy*a.dx<b.x1:a.x1-b.dy/a.dy*a.dx<b.x0){var h=a;a=b,b=h}for(var i=a.dx/a.dy,j=b.dx/b.dy,k=a.dx>0,l=b.dx<0,m=f;g>m;m++){var n=i*Math.max(0,Math.min(a.dy,m+k-a.y0))+a.x0,o=j*Math.max(0,Math.min(b.dy,m+l-b.y0))+b.x0;e(Math.floor(o),Math.ceil(n),m)}}function h(a,b,c,d,e,h){var i,j=f(a,b),k=f(b,c),l=f(c,a);j.dy>k.dy&&(i=j,j=k,k=i),j.dy>l.dy&&(i=j,j=l,l=i),k.dy>l.dy&&(i=k,k=l,l=i),j.dy&&g(l,j,d,e,h),k.dy&&g(l,k,d,e,h)}var i=a("assert"),j=a("whoots-js"),k=a("../geo/coordinate");b.exports=d,d.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},d.prototype.toCoordinate=function(a){var b=Math.min(this.z,a),c=Math.pow(2,b),d=this.y,e=this.x+c*this.w;return new k(e,d,b)},d.fromID=function(a){var b=a%32,c=1<<b,e=(a-b)/32,f=e%c,g=(e-f)/c%c,h=Math.floor(e/(c*c));return h%2!==0&&(h=-1*h-1),h/=2,new d(b,f,g,h)},d.prototype.url=function(a,b,c){var d=j.getTileBBox(this.x,this.y,this.z),f=e(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,b||this.z)).replace("{x}",this.x).replace("{y}","tms"===c?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)},d.prototype.parent=function(a){return 0===this.z?null:this.z>a?new d(this.z-1,this.x,this.y,this.w):new d(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},d.prototype.wrapped=function(){return new d(this.z,this.x,this.y,0)},d.prototype.children=function(a){if(this.z>=a)return[new d(this.z+1,this.x,this.y,this.w)];var b=this.z+1,c=2*this.x,e=2*this.y;return[new d(b,c,e,this.w),new d(b,c+1,e,this.w),new d(b,c,e+1,this.w),new d(b,c+1,e+1,this.w)]},d.cover=function(a,b,c){function e(a,b,e){var h,i,j;if(e>=0&&f>=e)for(h=a;b>h;h++)i=(h%f+f)%f,j=new d(c,i,e,Math.floor(h/f)),g[j.id]=j}var f=1<<a,g={};return h(b[0],b[1],b[2],0,f,e),h(b[2],b[3],b[0],0,f,e),Object.keys(g).map(function(a){return g[a]})}},{"../geo/coordinate":339,assert:48,"whoots-js":575}],371:[function(a,b,c){"use strict";function d(a,b,c){if(this.id=a,this.dispatcher=c,f.extend(this,f.pick(b,["url","scheme","tileSize"])),this._options=f.extend({type:"vector"},b),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");g(b,function(a,b){return a?void this.fire("error",a):(f.extend(this,b),void this.fire("load"))}.bind(this))}var e=a("../util/evented"),f=a("../util/util"),g=a("./load_tilejson"),h=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=f.inherit(e,{minzoom:0,maxzoom:22,scheme:"xyz",tileSize:512,reparseOverscaled:!0,isTileClipped:!0,onAdd:function(a){this.map=a},serialize:function(){return f.extend({},this._options)},loadTile:function(a,b){function c(c,d){if(!a.aborted){if(c)return b(c);a.loadVectorData(d,this.map.style),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null),a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)}}var d=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,e={url:h(a.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:a.uid,coord:a.coord,zoom:a.coord.z,tileSize:this.tileSize*d,source:this.id,overscaling:d,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID?"loading"===a.state?a.reloadCallback=b:(e.rawTileData=a.rawTileData,this.dispatcher.send("reload tile",e,c.bind(this),a.workerID)):a.workerID=this.dispatcher.send("load tile",e,c.bind(this))},abortTile:function(a){this.dispatcher.send("abort tile",{uid:a.uid,source:this.id},null,a.workerID)},unloadTile:function(a){a.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},null,a.workerID)}})},{"../util/evented":435,"../util/mapbox":440,"../util/util":443,"./load_tilejson":363}],372:[function(a,b,c){"use strict";function d(a,b,c){this.actor=a,this.styleLayers=b,c&&(this.loadVectorData=c),this.loading={},this.loaded={}}var e=a("../util/ajax"),f=a("vector-tile"),g=a("pbf"),h=a("./worker_tile");b.exports=d,d.prototype={loadTile:function(a,b){function c(a,c){return delete this.loading[d][e],a?b(a):c?(f.data=c.tile,f.parse(f.data,this.styleLayers.getLayerFamilies(),this.actor,c.rawTileData,b),this.loaded[d]=this.loaded[d]||{},void(this.loaded[d][e]=f)):b(null,null)}var d=a.source,e=a.uid;this.loading[d]||(this.loading[d]={});var f=this.loading[d][e]=new h(a);f.abort=this.loadVectorData(a,c.bind(this))},reloadTile:function(a,b){var c=this.loaded[a.source],d=a.uid;if(c&&c[d]){var e=c[d];e.parse(e.data,this.styleLayers.getLayerFamilies(),this.actor,a.rawTileData,b)}},abortTile:function(a){var b=this.loading[a.source],c=a.uid;b&&b[c]&&b[c].abort&&(b[c].abort(),delete b[c])},removeTile:function(a){var b=this.loaded[a.source],c=a.uid;b&&b[c]&&delete b[c]},loadVectorData:function(a,b){function c(a,c){if(a)return b(a);var d=new f.VectorTile(new g(new Uint8Array(c)));b(a,{tile:d,rawTileData:c})}var d=e.getArrayBuffer(a.url,c.bind(this));return function(){d.abort()}},redoPlacement:function(a,b){var c=this.loaded[a.source],d=this.loading[a.source],e=a.uid;if(c&&c[e]){var f=c[e],g=f.redoPlacement(a.angle,a.pitch,a.showCollisionBoxes);g.result&&b(null,g.result,g.transferables)}else d&&d[e]&&(d[e].angle=a.angle)}}},{"../util/ajax":426,"./worker_tile":375,pbf:479,"vector-tile":559}],373:[function(a,b,c){"use strict";function d(a,b){this.id=a,this.urls=b.urls,this.coordinates=b.coordinates,j.getVideo(b.urls,function(a,c){if(a)return this.fire("error",{error:a});this.video=c,this.video.loop=!0;var d;this.video.addEventListener("playing",function(){d=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener("pause",function(){this.map.style.animationLoop.cancel(d)}.bind(this)),this.map&&(this.video.play(),this.setCoordinates(b.coordinates)),this.fire("load")}.bind(this))}var e=a("../util/util"),f=a("./tile_coord"),g=a("../geo/lng_lat"),h=a("point-geometry"),i=a("../util/evented"),j=a("../util/ajax"),k=a("../data/bucket").EXTENT,l=a("../render/draw_raster").RasterBoundsArray,m=a("../data/buffer"),n=a("../render/vertex_array_object");
b.exports=d,d.prototype=e.inherit(i,{minzoom:0,maxzoom:22,tileSize:512,roundZoom:!0,getVideo:function(){return this.video},onAdd:function(a){this.map||(this.map=a,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},setCoordinates:function(a){this.coordinates=a;var b=this.map,c=a.map(function(a){return b.transform.locationCoordinate(g.convert(a)).zoomTo(0)}),d=this.centerCoord=e.getCoordinatesCenter(c);return d.column=Math.round(d.column),d.row=Math.round(d.row),this.minzoom=this.maxzoom=d.zoom,this._coord=new f(d.zoom,d.column,d.row),this._tileCoords=c.map(function(a){var b=a.zoomTo(d.zoom);return new h(Math.round((b.column-d.column)*k),Math.round((b.row-d.row)*k))}),this.fire("change"),this},_setTile:function(a){this._prepared=!1,this.tile=a;var b=32767,c=new l;c.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),c.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,b,0),c.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,b),c.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,b,b),this.tile.buckets={},this.tile.boundsBuffer=new m(c.serialize(),l.serialize(),m.BufferType.VERTEX),this.tile.boundsVAO=new n,this.tile.state="loaded"},prepare:function(){if(!(this.video.readyState<2)&&this.tile){var a=this.map.painter.gl;this._prepared?(a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this._prepared=!0,this.tile.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.video)),this._currentTime=this.video.currentTime}},loadTile:function(a,b){this._coord&&this._coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},serialize:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}})},{"../data/bucket":330,"../data/buffer":335,"../geo/lng_lat":340,"../render/draw_raster":352,"../render/vertex_array_object":358,"../util/ajax":426,"../util/evented":435,"../util/util":443,"./tile_coord":370,"point-geometry":485}],374:[function(a,b,c){"use strict";function d(a){this.self=a,this.actor=new f(a,this);var b={getLayers:function(){return this.layers}.bind(this),getLayerFamilies:function(){return this.layerFamilies}.bind(this)};this.workerSources={vector:new i(this.actor,b),geojson:new j(this.actor,b)},this.self.registerWorkerSource=function(a,c){if(this.workerSources[a])throw new Error('Worker source with name "'+a+'" already registered.');this.workerSources[a]=new c(this.actor,b)}.bind(this)}function e(a){var b={};for(var c in a){var d=a[c],e=d.ref||d.id,f=a[e];f.layout&&"none"===f.layout.visibility||(b[e]=b[e]||[],c===e?b[e].unshift(d):b[e].push(d))}return b}var f=a("../util/actor"),g=a("../style/style_layer"),h=a("../util/util"),i=a("./vector_tile_worker_source"),j=a("./geojson_worker_source");b.exports=function(a){return new d(a)},h.extend(d.prototype,{"set layers":function(a){function b(a){var b=g.create(a,a.ref&&c.layers[a.ref]);b.updatePaintTransitions({},{transition:!1}),c.layers[b.id]=b}this.layers={};for(var c=this,d=[],f=0;f<a.length;f++){var h=a[f];("fill"===h.type||"line"===h.type||"circle"===h.type||"symbol"===h.type)&&(h.ref?d.push(f):b(h))}for(var i=0;i<d.length;i++)b(a[d[i]]);this.layerFamilies=e(this.layers)},"update layers":function(a){function b(a){var b=f.layers[a.ref];f.layers[a.id]?f.layers[a.id].set(a,b):f.layers[a.id]=g.create(a,b),f.layers[a.id].updatePaintTransitions({},{transition:!1})}var c,d,f=this;for(c in a)d=a[c],d.ref&&b(d);for(c in a)d=a[c],d.ref||b(d);this.layerFamilies=e(this.layers)},"load tile":function(a,b){var c=a.type||"vector";this.workerSources[c].loadTile(a,b)},"reload tile":function(a,b){var c=a.type||"vector";this.workerSources[c].reloadTile(a,b)},"abort tile":function(a){var b=a.type||"vector";this.workerSources[b].abortTile(a)},"remove tile":function(a){var b=a.type||"vector";this.workerSources[b].removeTile(a)},"redo placement":function(a,b){var c=a.type||"vector";this.workerSources[c].redoPlacement(a,b)},"load worker source":function(a,b){try{this.self.importScripts(a.url),b()}catch(c){b(c)}}})},{"../style/style_layer":382,"../util/actor":425,"../util/util":443,"./geojson_worker_source":360,"./vector_tile_worker_source":372}],375:[function(a,b,c){"use strict";function d(a){this.coord=a.coord,this.uid=a.uid,this.zoom=a.zoom,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=a.overscaling,this.angle=a.angle,this.pitch=a.pitch,this.showCollisionBoxes=a.showCollisionBoxes}function e(a){return!a.isEmpty()}function f(a){return a.serialize()}function g(a){var b=[];for(var c in a)a[c].getTransferables(b);return b}function h(a){return a.id}var i=a("../data/feature_index"),j=a("../symbol/collision_tile"),k=a("../data/bucket"),l=a("../symbol/collision_box"),m=a("../util/dictionary_coder"),n=a("../util/util"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype.parse=function(a,b,c,d,q){function r(a,b){for(var c=0;c<a.length;c++){var d=a.feature(c);d.index=c;for(var e in b)b[e].filter(d)&&b[e].features.push(d)}}function s(a){if(a)return q(a);if(N++,2===N){for(var b=I.length-1;b>=0;b--)t(C,I[b]);u()}}function t(a,b){if(b.populateArrays(z,M,L),"symbol"!==b.type)for(var c=0;c<b.features.length;c++){var d=b.features[c];A.insert(d,d.index,b.sourceLayerIndex,b.index)}b.features=null}function u(){C.status="done",C.redoPlacementAfterDone&&(C.redoPlacement(C.angle,C.pitch,null),C.redoPlacementAfterDone=!1);var a=A.serialize(),b=z.serialize(),c=C.collisionBoxArray.serialize(),h=C.symbolInstancesArray.serialize(),i=C.symbolQuadsArray.serialize(),j=[d].concat(a.transferables).concat(b.transferables),k=H.filter(e);q(null,{buckets:k.map(f),featureIndex:a.data,collisionTile:b.data,collisionBoxArray:c,symbolInstancesArray:h,symbolQuadsArray:i,rawTileData:d},g(k).concat(j))}this.status="parsing",this.data=a,this.collisionBoxArray=new l,this.symbolInstancesArray=new o,this.symbolQuadsArray=new p;var v,w,x,y,z=new j(this.angle,this.pitch,this.collisionBoxArray),A=new i(this.coord,this.overscaling,z,a.layers),B=new m(a.layers?Object.keys(a.layers).sort():["_geojsonTileLayer"]),C=this,D={},E={},F=0;for(var G in b)w=b[G][0],w.source===this.source&&(w.ref||w.minzoom&&this.zoom<w.minzoom||w.maxzoom&&this.zoom>=w.maxzoom||w.layout&&"none"===w.layout.visibility||(!a.layers||a.layers[w.sourceLayer])&&(y=k.create({layer:w,index:F++,childLayers:b[G],zoom:this.zoom,overscaling:this.overscaling,showCollisionBoxes:this.showCollisionBoxes,collisionBoxArray:this.collisionBoxArray,symbolQuadsArray:this.symbolQuadsArray,symbolInstancesArray:this.symbolInstancesArray,sourceLayerIndex:B.encode(w.sourceLayer||"_geojsonTileLayer")}),y.createFilter(),D[w.id]=y,a.layers&&(x=w.sourceLayer,E[x]=E[x]||{},E[x][w.id]=y)));if(a.layers)for(x in E)1===w.version&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+x+'" does not use vector tile spec v2 and therefore may have some rendering errors.'),w=a.layers[x],w&&r(w,E[x]);else r(a,D);var H=[],I=this.symbolBuckets=[],J=[];A.bucketLayerIDs={};for(var K in D)y=D[K],0!==y.features.length&&(A.bucketLayerIDs[y.index]=y.childLayers.map(h),H.push(y),"symbol"===y.type?I.push(y):J.push(y));var L={},M={},N=0;if(I.length>0){for(v=I.length-1;v>=0;v--)I[v].updateIcons(L),I[v].updateFont(M);for(var O in M)M[O]=Object.keys(M[O]).map(Number);L=Object.keys(L),c.send("get glyphs",{uid:this.uid,stacks:M},function(a,b){M=b,s(a)}),L.length?c.send("get icons",{icons:L},function(a,b){L=b,s(a)}):s()}for(v=J.length-1;v>=0;v--)t(this,J[v]);return 0===I.length?u():void 0},d.prototype.redoPlacement=function(a,b,c){if("done"!==this.status)return this.redoPlacementAfterDone=!0,this.angle=a,{};for(var d=new j(a,b,this.collisionBoxArray),h=this.symbolBuckets,i=h.length-1;i>=0;i--)h[i].placeFeatures(d,c);var k=d.serialize(),l=h.filter(e);return{result:{buckets:l.map(f),collisionTile:k.data},transferables:g(l).concat(k.transferables)}}},{"../data/bucket":330,"../data/feature_index":337,"../symbol/collision_box":395,"../symbol/collision_tile":397,"../symbol/symbol_instances":406,"../symbol/symbol_quads":407,"../util/dictionary_coder":433,"../util/util":443}],376:[function(a,b,c){"use strict";function d(){this.n=0,this.times=[]}b.exports=d,d.prototype.stopped=function(){return this.times=this.times.filter(function(a){return a.time>=(new Date).getTime()}),!this.times.length},d.prototype.set=function(a){return this.times.push({id:this.n,time:a+(new Date).getTime()}),this.n++},d.prototype.cancel=function(a){this.times=this.times.filter(function(b){return b.id!==a})}},{}],377:[function(a,b,c){"use strict";function d(a){this.base=a,this.retina=h.devicePixelRatio>1;var b=this.retina?"@2x":"";g.getJSON(i(a,b,".json"),function(a,b){return a?void this.fire("error",{error:a}):(this.data=b,void(this.img&&this.fire("load")))}.bind(this)),g.getImage(i(a,b,".png"),function(a,b){if(a)return void this.fire("error",{error:a});for(var c=b.getData(),d=b.data=new Uint8Array(c.length),e=0;e<c.length;e+=4){var f=c[e+3]/255;d[e+0]=c[e+0]*f,d[e+1]=c[e+1]*f,d[e+2]=c[e+2]*f,d[e+3]=c[e+3]}this.img=b,this.data&&this.fire("load")}.bind(this))}function e(){}var f=a("../util/evented"),g=a("../util/ajax"),h=a("../util/browser"),i=a("../util/mapbox").normalizeSpriteURL;b.exports=d,d.prototype=Object.create(f),d.prototype.toJSON=function(){return this.base},d.prototype.loaded=function(){return!(!this.data||!this.img)},d.prototype.resize=function(){if(h.devicePixelRatio>1!==this.retina){var a=new d(this.base);a.on("load",function(){this.img=a.img,this.data=a.data,this.retina=a.retina}.bind(this))}},e.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},d.prototype.getSpritePosition=function(a){if(!this.loaded())return new e;var b=this.data&&this.data[a];return b&&this.img?b:new e}},{"../util/ajax":426,"../util/browser":427,"../util/evented":435,"../util/mapbox":440}],378:[function(a,b,c){"use strict";var d=a("csscolorparser").parseCSSColor,e=a("../util/util"),f=a("./style_function"),g={};b.exports=function h(a){if(f.isFunctionDefinition(a))return e.extend({},a,{stops:a.stops.map(function(a){return[a[0],h(a[1])]})});if("string"==typeof a){if(!g[a]){var b=d(a);if(!b)throw new Error("Invalid color "+a);g[a]=[b[0]/255*b[3],b[1]/255*b[3],b[2]/255*b[3],b[3]]}return g[a]}throw new Error("Invalid color "+a)}},{"../util/util":443,"./style_function":381,csscolorparser:109}],379:[function(a,b,c){"use strict";function d(a,b,c){this.animationLoop=b||new p,this.dispatcher=new o(c||1,this),this.spriteAtlas=new i(1024,1024),this.lineAtlas=new j(256,512),this._layers={},this._order=[],this._groups=[],this.sources={},this.zoomHistory={},k.bindAll(["_forwardSourceEvent","_forwardTileEvent","_forwardLayerEvent","_redoPlacement"],this),this._resetUpdates();var d=function(a,b){if(a)return void this.fire("error",{error:a});if(!q.emitErrors(this,q(b))){this._loaded=!0,this.stylesheet=b,this.updateClasses();var c=b.sources;for(var d in c)this.addSource(d,c[d]);b.sprite&&(this.sprite=new g(b.sprite),this.sprite.on("load",this.fire.bind(this,"change"))),this.glyphSource=new h(b.glyphs),this._resolve(),this.fire("load")}}.bind(this);"string"==typeof a?l.getJSON(m(a),d):n.frame(d.bind(this,null,a)),this.on("source.load",function(a){var b=a.source;if(b&&b.vectorLayerIds)for(var c in this._layers){var d=this._layers[c];d.source===b.id&&this._validateLayer(d)}})}var e=a("../util/evented"),f=a("./style_layer"),g=a("./image_sprite"),h=a("../symbol/glyph_source"),i=a("../symbol/sprite_atlas"),j=a("../render/line_atlas"),k=a("../util/util"),l=a("../util/ajax"),m=a("../util/mapbox").normalizeStyleURL,n=a("../util/browser"),o=a("../util/dispatcher"),p=a("./animation_loop"),q=a("./validate_style"),r=a("../source/source"),s=a("../source/query_features"),t=a("../source/source_cache"),u=a("./style_spec"),v=a("./style_function");b.exports=d,d.prototype=k.inherit(e,{_loaded:!1,_validateLayer:function(a){var b=this.sources[a.source];a.sourceLayer&&b&&b.vectorLayerIds&&-1===b.vectorLayerIds.indexOf(a.sourceLayer)&&this.fire("error",{error:new Error('Source layer "'+a.sourceLayer+'" does not exist on source "'+b.id+'" as specified by style layer "'+a.id+'"')})},loaded:function(){if(!this._loaded)return!1;if(Object.keys(this._updates.sources).length)return!1;for(var a in this.sources)if(!this.sources[a].loaded())return!1;return this.sprite&&!this.sprite.loaded()?!1:!0},_resolve:function(){var a,b;this._layers={},this._order=this.stylesheet.layers.map(function(a){return a.id});for(var c=0;c<this.stylesheet.layers.length;c++)b=this.stylesheet.layers[c],b.ref||(a=f.create(b),this._layers[a.id]=a,a.on("error",this._forwardLayerEvent));for(var d=0;d<this.stylesheet.layers.length;d++)if(b=this.stylesheet.layers[d],b.ref){var e=this.getLayer(b.ref);a=f.create(b,e),this._layers[a.id]=a,a.on("error",this._forwardLayerEvent)}this._groupLayers(),this._updateWorkerLayers()},_groupLayers:function(){var a;this._groups=[];for(var b=0;b<this._order.length;++b){var c=this._layers[this._order[b]];a&&c.source===a.source||(a=[],a.source=c.source,this._groups.push(a)),a.push(c)}},_updateWorkerLayers:function(a){this.dispatcher.broadcast(a?"update layers":"set layers",this._serializeLayers(a))},_serializeLayers:function(a){a=a||this._order;for(var b=[],c={includeRefProperties:!0},d=0;d<a.length;d++)b.push(this._layers[a[d]].serialize(c));return b},_applyClasses:function(a,b){if(this._loaded){a=a||[],b=b||{transition:!0};var c=this.stylesheet.transition||{},d=this._updates.allPaintProps?this._layers:this._updates.paintProps;for(var e in d){var f=this._layers[e],g=this._updates.paintProps[e];if(this._updates.allPaintProps||g.all)f.updatePaintTransitions(a,b,c,this.animationLoop);else for(var h in g)this._layers[e].updatePaintTransition(h,a,b,c,this.animationLoop)}}},_recalculate:function(a){for(var b in this.sources)this.sources[b].used=!1;this._updateZoomHistory(a),this.rasterFadeDuration=300;for(var c in this._layers){var d=this._layers[c];d.recalculate(a,this.zoomHistory),!d.isHidden(a)&&d.source&&(this.sources[d.source].used=!0)}var e=300;Math.floor(this.z)!==Math.floor(a)&&this.animationLoop.set(e),this.z=a,this.fire("zoom")},_updateZoomHistory:function(a){var b=this.zoomHistory;void 0===b.lastIntegerZoom&&(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=0,b.lastZoom=a),Math.floor(b.lastZoom)<Math.floor(a)?(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=Date.now()):Math.floor(b.lastZoom)>Math.floor(a)&&(b.lastIntegerZoom=Math.floor(a+1),b.lastIntegerZoomTime=Date.now()),b.lastZoom=a},_checkLoaded:function(){if(!this._loaded)throw new Error("Style is not done loading")},update:function(a,b){if(!this._updates.changed)return this;if(this._updates.allLayers)this._groupLayers(),this._updateWorkerLayers();else{var c=Object.keys(this._updates.layers);c.length&&this._updateWorkerLayers(c)}var d,e=Object.keys(this._updates.sources);for(d=0;d<e.length;d++)this._reloadSource(e[d]);for(d=0;d<this._updates.events.length;d++){var f=this._updates.events[d];this.fire(f[0],f[1])}return this._applyClasses(a,b),this._updates.changed&&this.fire("change"),this._resetUpdates(),this},_resetUpdates:function(){this._updates={events:[],layers:{},sources:{},paintProps:{}}},addSource:function(a,b){if(this._checkLoaded(),void 0!==this.sources[a])throw new Error("There is already a source with this ID");if(!b.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(b)+".");var c=["vector","raster","geojson","video","image"],d=c.indexOf(b.type)>=0;return d&&this._handleErrors(q.source,"sources."+a,b)?this:(b=new t(a,b,this.dispatcher),this.sources[a]=b,b.style=this,b.on("load",this._forwardSourceEvent).on("error",this._forwardSourceEvent).on("change",this._forwardSourceEvent).on("tile.add",this._forwardTileEvent).on("tile.load",this._forwardTileEvent).on("tile.error",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.add",{source:b}]),this._updates.changed=!0,this)},removeSource:function(a){if(this._checkLoaded(),void 0===this.sources[a])throw new Error("There is no source with this ID");var b=this.sources[a];return delete this.sources[a],delete this._updates.sources[a],b.off("load",this._forwardSourceEvent).off("error",this._forwardSourceEvent).off("change",this._forwardSourceEvent).off("tile.add",this._forwardTileEvent).off("tile.load",this._forwardTileEvent).off("tile.error",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.remove",{source:b}]),this._updates.changed=!0,this},getSource:function(a){return this.sources[a]&&this.sources[a].getSource()},addLayer:function(a,b){if(this._checkLoaded(),!(a instanceof f)){if(this._handleErrors(q.layer,"layers."+a.id,a,!1,{arrayIndex:-1}))return this;var c=a.ref&&this.getLayer(a.ref);a=f.create(a,c)}return this._validateLayer(a),a.on("error",this._forwardLayerEvent),this._layers[a.id]=a,this._order.splice(b?this._order.indexOf(b):1/0,0,a.id),this._updates.allLayers=!0,a.source&&(this._updates.sources[a.source]=!0),this._updates.events.push(["layer.add",{layer:a}]),this.updateClasses(a.id)},removeLayer:function(a){this._checkLoaded();var b=this._layers[a];if(void 0===b)throw new Error("There is no layer with this ID");for(var c in this._layers)this._layers[c].ref===a&&this.removeLayer(c);return b.off("error",this._forwardLayerEvent),delete this._layers[a],delete this._updates.layers[a],delete this._updates.paintProps[a],this._order.splice(this._order.indexOf(a),1),this._updates.allLayers=!0,this._updates.events.push(["layer.remove",{layer:b}]),this._updates.changed=!0,this},getLayer:function(a){return this._layers[a]},getReferentLayer:function(a){var b=this.getLayer(a);return b.ref&&(b=this.getLayer(b.ref)),b},setLayerZoomRange:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return d.minzoom===b&&d.maxzoom===c?this:(null!=b&&(d.minzoom=b),null!=c&&(d.maxzoom=c),this._updateLayer(d))},setFilter:function(a,b){this._checkLoaded();var c=this.getReferentLayer(a);return null!==b&&this._handleErrors(q.filter,"layers."+c.id+".filter",b)?this:k.deepEqual(c.filter,b)?this:(c.filter=k.clone(b),this._updateLayer(c))},getFilter:function(a){return this.getReferentLayer(a).filter},setLayoutProperty:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return k.deepEqual(d.getLayoutProperty(b),c)?this:(d.setLayoutProperty(b,c),this._updateLayer(d))},getLayoutProperty:function(a,b){return this.getReferentLayer(a).getLayoutProperty(b)},setPaintProperty:function(a,b,c,d){this._checkLoaded();var e=this.getLayer(a);if(k.deepEqual(e.getPaintProperty(b,d),c))return this;var f=e.isPaintValueFeatureConstant(b);e.setPaintProperty(b,c,d);var g=!(c&&v.isFunctionDefinition(c)&&"$zoom"!==c.property&&void 0!==c.property);return g&&f||(this._updates.layers[a]=!0,e.source&&(this._updates.sources[e.source]=!0)),this.updateClasses(a,b)},getPaintProperty:function(a,b,c){return this.getLayer(a).getPaintProperty(b,c)},updateClasses:function(a,b){if(this._updates.changed=!0,a){var c=this._updates.paintProps;c[a]||(c[a]={}),c[a][b||"all"]=!0}else this._updates.allPaintProps=!0;return this},serialize:function(){return k.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:k.mapObject(this.sources,function(a){return a.serialize()}),layers:this._order.map(function(a){return this._layers[a].serialize()},this)},function(a){return void 0!==a})},_updateLayer:function(a){return this._updates.layers[a.id]=!0,a.source&&(this._updates.sources[a.source]=!0),this._updates.changed=!0,this},_flattenRenderedFeatures:function(a){for(var b=[],c=this._order.length-1;c>=0;c--)for(var d=this._order[c],e=0;e<a.length;e++){var f=a[e][d];if(f)for(var g=0;g<f.length;g++)b.push(f[g])}return b},queryRenderedFeatures:function(a,b,c,d){b&&b.filter&&this._handleErrors(q.filter,"queryRenderedFeatures.filter",b.filter,!0);var e={};if(b&&b.layers)for(var f=0;f<b.layers.length;f++){var g=b.layers[f];e[this._layers[g].source]=!0}var h=[];for(var i in this.sources)if(!b.layers||e[i]){var j=this.sources[i],k=s.rendered(j,this._layers,a,b,c,d);h.push(k)}return this._flattenRenderedFeatures(h)},querySourceFeatures:function(a,b){b&&b.filter&&this._handleErrors(q.filter,"querySourceFeatures.filter",b.filter,!0);var c=this.sources[a];return c?s.source(c,b):[]},addSourceType:function(a,b,c){return r.getType(a)?c(new Error('A source type called "'+a+'" already exists.')):(r.setType(a,b),b.workerSourceURL?void this.dispatcher.broadcast("load worker source",{name:a,url:b.workerSourceURL},c):c(null,null))},_handleErrors:function(a,b,c,d,e){var f=d?q.throwErrors:q.emitErrors,g=a.call(q,k.extend({key:b,style:this.serialize(),value:c,styleSpec:u},e));return f.call(q,this,g)},_remove:function(){this.dispatcher.remove()},_reloadSource:function(a){this.sources[a].reload()},_updateSources:function(a){for(var b in this.sources)this.sources[b].update(a)},_redoPlacement:function(){for(var a in this.sources)this.sources[a].redoPlacement&&this.sources[a].redoPlacement()},_forwardSourceEvent:function(a){this.fire("source."+a.type,k.extend({source:a.target.getSource()},a))},_forwardTileEvent:function(a){this.fire(a.type,k.extend({source:a.target},a))},_forwardLayerEvent:function(a){this.fire("layer."+a.type,k.extend({layer:{id:a.target.id}},a))},"get sprite json":function(a,b){var c=this.sprite;c.loaded()?b(null,{sprite:c.data,retina:c.retina}):c.on("load",function(){b(null,{sprite:c.data,retina:c.retina})})},"get icons":function(a,b){var c=this.sprite,d=this.spriteAtlas;c.loaded()?(d.setSprite(c),d.addIcons(a.icons,b)):c.on("load",function(){d.setSprite(c),d.addIcons(a.icons,b)})},"get glyphs":function(a,b){function c(a,c,d){a&&console.error(a),f[d]=c,e--,0===e&&b(null,f)}var d=a.stacks,e=Object.keys(d).length,f={};for(var g in d)this.glyphSource.getSimpleGlyphs(g,d[g],a.uid,c)}})},{"../render/line_atlas":355,"../source/query_features":365,"../source/source":367,"../source/source_cache":368,"../symbol/glyph_source":400,"../symbol/sprite_atlas":405,"../util/ajax":426,"../util/browser":427,"../util/dispatcher":434,"../util/evented":435,"../util/mapbox":440,"../util/util":443,"./animation_loop":376,"./image_sprite":377,"./style_function":381,"./style_layer":382,"./style_spec":389,"./validate_style":391}],380:[function(a,b,c){"use strict";function d(a,b){this.value=h.clone(b),this.isFunction=f.isFunctionDefinition(b),this.json=JSON.stringify(this.value);var c="color"===a.type&&this.value?g(this.value):b;if(this.calculate=f[a["function"]||"piecewise-constant"](c),this.isFeatureConstant=this.calculate.isFeatureConstant,this.isZoomConstant=this.calculate.isZoomConstant,"piecewise-constant"===a["function"]&&a.transition&&(this.calculate=e(this.calculate)),!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var d=[],i=this.value.stops,j=0;j<this.value.stops.length;j++){var k=i[j][0].zoom;this.stopZoomLevels.indexOf(k)<0&&(this.stopZoomLevels.push(k),d.push([k,d.length]))}this.calculateInterpolationT=f.interpolated({stops:d,base:b.base})}}function e(a){return function(b,c){var d,e,f,g=b.zoom,h=b.zoomHistory,i=b.duration,j=g%1,k=Math.min((Date.now()-h.lastIntegerZoomTime)/i,1),l=1,m=1;return g>h.lastIntegerZoom?(d=j+(1-j)*k,l*=2,e=a({zoom:g-1},c),f=a({zoom:g},c)):(d=1-(1-k)*j,f=a({zoom:g},c),e=a({zoom:g+1},c),l/=2),void 0===e||void 0===f?void 0:{from:e,fromScale:l,to:f,toScale:m,t:d}}}var f=a("./style_function"),g=a("./parse_color"),h=a("../util/util");b.exports=d},{"../util/util":443,"./parse_color":378,"./style_function":381}],381:[function(a,b,c){"use strict";var d=a("mapbox-gl-function");c.interpolated=function(a){var b=d.interpolated(a),c=function(a,c){return b(a&&a.zoom,c||{})};return c.isFeatureConstant=b.isFeatureConstant,c.isZoomConstant=b.isZoomConstant,c},c["piecewise-constant"]=function(a){var b=d["piecewise-constant"](a),c=function(a,c){return b(a&&a.zoom,c||{})};return c.isFeatureConstant=b.isFeatureConstant,c.isZoomConstant=b.isZoomConstant,c},c.isFunctionDefinition=d.isFunctionDefinition},{"mapbox-gl-function":303}],382:[function(a,b,c){"use strict";function d(a,b){this.set(a,b)}function e(a){return a.value}var f=a("../util/util"),g=a("./style_transition"),h=a("./style_declaration"),i=a("./style_spec"),j=a("./validate_style"),k=a("./parse_color"),l=a("../util/evented");b.exports=d;var m="-transition";d.create=function(b,c){var d={background:a("./style_layer/background_style_layer"),circle:a("./style_layer/circle_style_layer"),fill:a("./style_layer/fill_style_layer"),line:a("./style_layer/line_style_layer"),raster:a("./style_layer/raster_style_layer"),symbol:a("./style_layer/symbol_style_layer")};return new d[(c||b).type](b,c)},d.prototype=f.inherit(l,{set:function(a,b){this.id=a.id,this.ref=a.ref,this.metadata=a.metadata,this.type=(b||a).type,this.source=(b||a).source,this.sourceLayer=(b||a)["source-layer"],this.minzoom=(b||a).minzoom,this.maxzoom=(b||a).maxzoom,this.filter=(b||a).filter,this.paint={},this.layout={},this._paintSpecifications=i["paint_"+this.type],this._layoutSpecifications=i["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var c,d;for(var e in a){var f=e.match(/^paint(?:\.(.*))?$/);if(f){var g=f[1]||"";for(c in a[e])this.setPaintProperty(c,a[e][c],g)}}if(this.ref)this._layoutDeclarations=b._layoutDeclarations;else for(d in a.layout)this.setLayoutProperty(d,a.layout[d]);for(c in this._paintSpecifications)this.paint[c]=this.getPaintValue(c);for(d in this._layoutSpecifications)this._updateLayoutValue(d)},setLayoutProperty:function(a,b){if(null==b)delete this._layoutDeclarations[a];else{var c="layers."+this.id+".layout."+a;if(this._handleErrors(j.layoutProperty,c,a,b))return;this._layoutDeclarations[a]=new h(this._layoutSpecifications[a],b)}this._updateLayoutValue(a)},getLayoutProperty:function(a){return this._layoutDeclarations[a]&&this._layoutDeclarations[a].value},getLayoutValue:function(a,b,c){var d=this._layoutSpecifications[a],e=this._layoutDeclarations[a];return e?e.calculate(b,c):d["default"]},setPaintProperty:function(a,b,c){var d="layers."+this.id+(c?'["paint.'+c+'"].':".paint.")+a;if(f.endsWith(a,m))if(this._paintTransitionOptions[c||""]||(this._paintTransitionOptions[c||""]={}),null===b||void 0===b)delete this._paintTransitionOptions[c||""][a];else{if(this._handleErrors(j.paintProperty,d,a,b))return;this._paintTransitionOptions[c||""][a]=b}else if(this._paintDeclarations[c||""]||(this._paintDeclarations[c||""]={}),null===b||void 0===b)delete this._paintDeclarations[c||""][a];else{if(this._handleErrors(j.paintProperty,d,a,b))return;this._paintDeclarations[c||""][a]=new h(this._paintSpecifications[a],b)}},getPaintProperty:function(a,b){return b=b||"",f.endsWith(a,m)?this._paintTransitionOptions[b]&&this._paintTransitionOptions[b][a]:this._paintDeclarations[b]&&this._paintDeclarations[b][a]&&this._paintDeclarations[b][a].value},getPaintValue:function(a,b,c){var d=this._paintSpecifications[a],e=this._paintTransitions[a];return e?e.calculate(b,c):"color"===d.type&&d["default"]?k(d["default"]):d["default"]},getPaintValueStopZoomLevels:function(a){var b=this._paintTransitions[a];return b?b.declaration.stopZoomLevels:[]},getPaintInterpolationT:function(a,b){var c=this._paintTransitions[a];return c.declaration.calculateInterpolationT({zoom:b})},isPaintValueFeatureConstant:function(a){var b=this._paintTransitions[a];return b?b.declaration.isFeatureConstant:!0},isLayoutValueFeatureConstant:function(a){var b=this._layoutDeclarations[a];return b?b.isFeatureConstant:!0},isPaintValueZoomConstant:function(a){var b=this._paintTransitions[a];return b?b.declaration.isZoomConstant:!0},isHidden:function(a){return this.minzoom&&a<this.minzoom?!0:this.maxzoom&&a>=this.maxzoom?!0:"none"===this.layout.visibility?!0:0===this.paint[this.type+"-opacity"]?!0:!1},updatePaintTransitions:function(a,b,c,d){for(var e=f.extend({},this._paintDeclarations[""]),g=0;g<a.length;g++)f.extend(e,this._paintDeclarations[a[g]]);var h;for(h in e)this._applyPaintDeclaration(h,e[h],b,c,d);for(h in this._paintTransitions)h in e||this._applyPaintDeclaration(h,null,b,c,d)},updatePaintTransition:function(a,b,c,d,e){for(var f=this._paintDeclarations[""][a],g=0;g<b.length;g++){var h=this._paintDeclarations[b[g]];h&&h[a]&&(f=h[a])}this._applyPaintDeclaration(a,f,c,d,e)},recalculate:function(a,b){for(var c in this._paintTransitions)this.paint[c]=this.getPaintValue(c,{zoom:a,zoomHistory:b});for(var d in this._layoutFunctions)this.layout[d]=this.getLayoutValue(d,{zoom:a,zoomHistory:b})},serialize:function(a){var b={id:this.id,ref:this.ref,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom};for(var c in this._paintDeclarations){var d=""===c?"paint":"paint."+c;b[d]=f.mapObject(this._paintDeclarations[c],e)}return(!this.ref||a&&a.includeRefProperties)&&f.extend(b,{type:this.type,source:this.source,"source-layer":this.sourceLayer,filter:this.filter,layout:f.mapObject(this._layoutDeclarations,e)}),f.filterObject(b,function(a,b){return void 0!==a&&!("layout"===b&&!Object.keys(a).length)})},_applyPaintDeclaration:function(a,b,c,d,e){var i=c.transition?this._paintTransitions[a]:void 0,j=this._paintSpecifications[a];if((null===b||void 0===b)&&(b=new h(j,j["default"])),!i||i.declaration.json!==b.json){var k=f.extend({duration:300,delay:0},d,this.getPaintProperty(a+m)),l=this._paintTransitions[a]=new g(j,b,i,k);l.instant()||(l.loopID=e.set(l.endTime-Date.now())),i&&e.cancel(i.loopID)}},_updateLayoutValue:function(a){var b=this._layoutDeclarations[a];b&&b.isFunction?this._layoutFunctions[a]=!0:(delete this._layoutFunctions[a],this.layout[a]=this.getLayoutValue(a))},_handleErrors:function(a,b,c,d){return j.emitErrors(this,a.call(j,{key:b,layerType:this.type,objectKey:c,value:d,styleSpec:i,style:{glyphs:!0,sprite:!0}}))}})},{"../util/evented":435,"../util/util":443,"./parse_color":378,"./style_declaration":380,"./style_layer/background_style_layer":383,"./style_layer/circle_style_layer":384,"./style_layer/fill_style_layer":385,"./style_layer/line_style_layer":386,"./style_layer/raster_style_layer":387,"./style_layer/symbol_style_layer":388,"./style_spec":389,"./style_transition":390,"./validate_style":391}],383:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":443,"../style_layer":382}],384:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":443,"../style_layer":382}],385:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValue.call(this,"fill-color",b,c):f.prototype.getPaintValue.call(this,a,b,c)},getPaintValueStopZoomLevels:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):f.prototype.getPaintValueStopZoomLevels.call(this,arguments)},getPaintInterpolationT:function(a,b){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintInterpolationT.call(this,"fill-color",b):f.prototype.getPaintInterpolationT.call(this,a,b);
},isPaintValueFeatureConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):f.prototype.isPaintValueFeatureConstant.call(this,a)},isPaintValueZoomConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueZoomConstant.call(this,"fill-color"):f.prototype.isPaintValueZoomConstant.call(this,a)}}),b.exports=d},{"../../util/util":443,"../style_layer":382}],386:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){var d=f.prototype.getPaintValue.apply(this,arguments);if(d&&"line-dasharray"===a){var e=Math.floor(b.zoom);this._flooredZoom!==e&&(this._flooredZoom=e,this._flooredLineWidth=this.getPaintValue("line-width",b,c)),d.fromScale*=this._flooredLineWidth,d.toScale*=this._flooredLineWidth}return d}})},{"../../util/util":443,"../style_layer":382}],387:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":443,"../style_layer":382}],388:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{isHidden:function(){if(f.prototype.isHidden.apply(this,arguments))return!0;var a=0===this.paint["text-opacity"]||!this.layout["text-field"],b=0===this.paint["icon-opacity"]||!this.layout["icon-image"];return a&&b?!0:!1},getLayoutValue:function(a,b,c){return("text-rotation-alignment"!==a||"line"!==this.getLayoutValue("symbol-placement",b,c)||this.getLayoutProperty("text-rotation-alignment"))&&("icon-rotation-alignment"!==a||"line"!==this.getLayoutValue("symbol-placement",b,c)||this.getLayoutProperty("icon-rotation-alignment"))?"text-pitch-alignment"!==a||this.getLayoutProperty("text-pitch-alignment")?f.prototype.getLayoutValue.apply(this,arguments):this.getLayoutValue("text-rotation-alignment"):"map"}})},{"../../util/util":443,"../style_layer":382}],389:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":326}],390:[function(a,b,c){"use strict";function d(a,b,c,d){this.declaration=b,this.startTime=this.endTime=(new Date).getTime(),"piecewise-constant"===a["function"]&&a.transition?this.interp=e:this.interp=g[a.type],this.oldTransition=c,this.duration=d.duration||0,this.delay=d.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=f.easeCubicInOut),c&&c.endTime<=this.startTime&&delete c.oldTransition}function e(a,b,c){return void 0===(a&&a.to)||void 0===(b&&b.to)?void 0:{from:a.to,fromScale:a.toScale,to:b.to,toScale:b.toScale,t:c}}var f=a("../util/util"),g=a("../util/interpolate");b.exports=d,d.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},d.prototype.calculate=function(a,b){var c=this.declaration.calculate(f.extend({},a,{duration:this.duration}),b);if(this.instant())return c;var d=a.time||Date.now();if(d<this.endTime){var e=this.oldTransition.calculate(f.extend({},a,{time:this.startTime}),b),g=this.ease((d-this.startTime-this.delay)/this.duration);c=this.interp(e,c,g)}return c}},{"../util/interpolate":437,"../util/util":443}],391:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/lib/validate_style.min"),b.exports.emitErrors=function(a,b){if(b&&b.length){for(var c=0;c<b.length;c++)a.fire("error",{error:new Error(b[c].message)});return!0}return!1},b.exports.throwErrors=function(a,b){if(b)for(var c=0;c<b.length;c++)throw new Error(b[c].message)}},{"mapbox-gl-style-spec/lib/validate_style.min":325}],392:[function(a,b,c){"use strict";function d(a,b,c,d){this.x=a,this.y=b,this.angle=c,void 0!==d&&(this.segment=d)}var e=a("point-geometry");b.exports=d,d.prototype=Object.create(e.prototype),d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)}},{"point-geometry":485}],393:[function(a,b,c){"use strict";function d(a,b,c,d,e){if(void 0===b.segment)return!0;for(var f=b,g=b.segment+1,h=0;h>-c/2;){if(g--,0>g)return!1;h-=a[g].dist(f),f=a[g]}h+=a[g].dist(a[g+1]),g++;for(var i=[],j=0;c/2>h;){var k=a[g-1],l=a[g],m=a[g+1];if(!m)return!1;var n=k.angleTo(l)-l.angleTo(m);for(n=Math.abs((n+3*Math.PI)%(2*Math.PI)-Math.PI),i.push({distance:h,angleDelta:n}),j+=n;h-i[0].distance>d;)j-=i.shift().angleDelta;if(j>e)return!1;g++,h+=l.dist(m)}return!0}b.exports=d},{}],394:[function(a,b,c){"use strict";function d(a,b,c,d,f){for(var g=[],h=0;h<a.length;h++)for(var i,j=a[h],k=0;k<j.length-1;k++){var l=j[k],m=j[k+1];l.x<b&&m.x<b||(l.x<b?l=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round():m.x<b&&(m=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round()),l.y<c&&m.y<c||(l.y<c?l=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round():m.y<c&&(m=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round()),l.x>=d&&m.x>=d||(l.x>=d?l=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round():m.x>=d&&(m=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round()),l.y>=f&&m.y>=f||(l.y>=f?l=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round():m.y>=f&&(m=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round()),i&&l.equals(i[i.length-1])||(i=[l],g.push(i)),i.push(m)))))}return g}var e=a("point-geometry");b.exports=d},{"point-geometry":485}],395:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":441,"../util/util":443,"point-geometry":485}],396:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k){var l=g.top*h-i,m=g.bottom*h+i,n=g.left*h-i,o=g.right*h+i;if(this.boxStartIndex=a.length,j){var p=m-l,q=o-n;if(p>0)if(p=Math.max(10*h,p),k){var r=b[c.segment+1].sub(b[c.segment])._unit()._mult(q),s=[c.sub(r),c.add(r)];this._addLineCollisionBoxes(a,s,c,0,q,p,d,e,f)}else this._addLineCollisionBoxes(a,b,c,c.segment,q,p,d,e,f)}else a.emplaceBack(c.x,c.y,n,l,o,m,1/0,d,e,f,0,0,0,0,0);this.boxEndIndex=a.length}b.exports=d,d.prototype._addLineCollisionBoxes=function(a,b,c,d,e,f,g,h,i){var j=f/2,k=Math.floor(e/j),l=-f/2,m=this.boxes,n=c,o=d+1,p=l;do{if(o--,0>o)return m;p-=b[o].dist(n),n=b[o]}while(p>-e/2);for(var q=b[o].dist(b[o+1]),r=0;k>r;r++){for(var s=-e/2+r*j;s>p+q;){if(p+=q,o++,o+1>=b.length)return m;q=b[o].dist(b[o+1])}var t=s-p,u=b[o],v=b[o+1],w=v.sub(u)._unit()._mult(t)._add(u)._round(),x=Math.max(Math.abs(s-l)-j/2,0),y=e/2/x;a.emplaceBack(w.x,w.y,-f/2,-f/2,f/2,f/2,y,g,h,i,0,0,0,0,0)}return m}},{}],397:[function(a,b,c){"use strict";function d(a,b,c){if("object"==typeof a){var d=a;c=b,a=d.angle,b=d.pitch,this.grid=new g(d.grid),this.ignoredGrid=new g(d.ignoredGrid)}else this.grid=new g(f,12,6),this.ignoredGrid=new g(f,12,0);this.angle=a,this.pitch=b;var e=Math.sin(a),h=Math.cos(a);if(this.rotationMatrix=[h,-e,e,h],this.reverseRotationMatrix=[h,e,-e,h],this.yStretch=1/Math.cos(b/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=c,0===c.length){c.emplaceBack();var i=32767;c.emplaceBack(0,0,0,-i,0,i,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(f,0,0,-i,0,i,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,0,-i,0,i,0,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,f,-i,0,i,0,i,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=c.get(0),this.edges=[c.get(1),c.get(2),c.get(3),c.get(4)]}var e=a("point-geometry"),f=a("../data/bucket").EXTENT,g=a("grid-index");b.exports=d,d.prototype.serialize=function(){var a={angle:this.angle,pitch:this.pitch,grid:this.grid.toArrayBuffer(),ignoredGrid:this.ignoredGrid.toArrayBuffer()};return{data:a,transferables:[a.grid,a.ignoredGrid]}},d.prototype.minScale=.25,d.prototype.maxScale=2,d.prototype.placeCollisionFeature=function(a,b,c){for(var d=this.collisionBoxArray,f=this.minScale,g=this.rotationMatrix,h=this.yStretch,i=a.boxStartIndex;i<a.boxEndIndex;i++){var j=d.get(i),k=j.anchorPoint._matMult(g),l=k.x,m=k.y,n=l+j.x1,o=m+j.y1*h,p=l+j.x2,q=m+j.y2*h;if(j.bbox0=n,j.bbox1=o,j.bbox2=p,j.bbox3=q,!b)for(var r=this.grid.query(n,o,p,q),s=0;s<r.length;s++){var t=d.get(r[s]),u=t.anchorPoint._matMult(g);if(f=this.getPlacementScale(f,k,j,u,t),f>=this.maxScale)return f}if(c){var v;if(this.angle){var w=this.reverseRotationMatrix,x=new e(j.x1,j.y1).matMult(w),y=new e(j.x2,j.y1).matMult(w),z=new e(j.x1,j.y2).matMult(w),A=new e(j.x2,j.y2).matMult(w);v=this.tempCollisionBox,v.anchorPointX=j.anchorPoint.x,v.anchorPointY=j.anchorPoint.y,v.x1=Math.min(x.x,y.x,z.x,A.x),v.y1=Math.min(x.y,y.x,z.x,A.x),v.x2=Math.max(x.x,y.x,z.x,A.x),v.y2=Math.max(x.y,y.x,z.x,A.x),v.maxScale=j.maxScale}else v=j;for(var B=0;B<this.edges.length;B++){var C=this.edges[B];if(f=this.getPlacementScale(f,j.anchorPoint,v,C.anchorPoint,C),f>=this.maxScale)return f}}}return f},d.prototype.queryRenderedSymbols=function(a,b,c,d,f){var g={},h=[],i=this.collisionBoxArray,j=this.rotationMatrix,k=new e(a,b)._matMult(j),l=this.tempCollisionBox;l.anchorX=k.x,l.anchorY=k.y,l.x1=0,l.y1=0,l.x2=c-a,l.y2=d-b,l.maxScale=f,f=l.maxScale;for(var m=[k.x+l.x1/f,k.y+l.y1/f*this.yStretch,k.x+l.x2/f,k.y+l.y2/f*this.yStretch],n=this.grid.query(m[0],m[1],m[2],m[3]),o=this.ignoredGrid.query(m[0],m[1],m[2],m[3]),p=0;p<o.length;p++)n.push(o[p]);for(var q=0;q<n.length;q++){var r=i.get(n[q]),s=r.sourceLayerIndex,t=r.featureIndex;if(void 0===g[s]&&(g[s]={}),!g[s][t]){var u=r.anchorPoint.matMult(j),v=this.getPlacementScale(this.minScale,k,l,u,r);v>=f&&(g[s][t]=!0,h.push(n[q]))}}return h},d.prototype.getPlacementScale=function(a,b,c,d,e){var f=b.x-d.x,g=b.y-d.y,h=(e.x1-c.x2)/f,i=(e.x2-c.x1)/f,j=(e.y1-c.y2)*this.yStretch/g,k=(e.y2-c.y1)*this.yStretch/g;(isNaN(h)||isNaN(i))&&(h=i=1),(isNaN(j)||isNaN(k))&&(j=k=1);var l=Math.min(Math.max(h,i),Math.max(j,k)),m=e.maxScale,n=c.maxScale;return l>m&&(l=m),l>n&&(l=n),l>a&&l>=e.placementScale&&(a=l),a},d.prototype.insertCollisionFeature=function(a,b,c){for(var d=c?this.ignoredGrid:this.grid,e=this.collisionBoxArray,f=a.boxStartIndex;f<a.boxEndIndex;f++){var g=e.get(f);g.placementScale=b,b<this.maxScale&&d.insert(f,g.bbox0,g.bbox1,g.bbox2,g.bbox3)}}},{"../data/bucket":330,"grid-index":288,"point-geometry":485}],398:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){var k=d?.6*g*h:0,l=Math.max(d?d.right-d.left:0,f?f.right-f.left:0),m=0===a[0].x||a[0].x===j||0===a[0].y||a[0].y===j;b/4>b-l*h&&(b=l*h+b/4);var n=2*g,o=m?b/2*i%b:(l/2+n)*h*i%b;return e(a,o,b,k,c,l*h,m,!1,j)}function e(a,b,c,d,i,j,k,l,m){for(var n=j/2,o=0,p=0;p<a.length-1;p++)o+=a[p].dist(a[p+1]);for(var q=0,r=b-c,s=[],t=0;t<a.length-1;t++){for(var u=a[t],v=a[t+1],w=u.dist(v),x=v.angleTo(u);q+w>r+c;){r+=c;var y=(r-q)/w,z=f(u.x,v.x,y),A=f(u.y,v.y,y);if(z>=0&&m>z&&A>=0&&m>A&&r-n>=0&&o>=r+n){var B=new g(z,A,x,t)._round();(!d||h(a,B,j,d,i))&&s.push(B)}}q+=w}return l||s.length||k||(s=e(a,q/2,c,d,i,j,k,!0,m)),s}var f=a("../util/interpolate"),g=a("../symbol/anchor"),h=a("./check_max_angle");b.exports=d},{"../symbol/anchor":392,"../util/interpolate":437,"./check_max_angle":393}],399:[function(a,b,c){"use strict";function d(){this.width=h,this.height=h,this.bin=new e(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)}var e=a("shelf-pack"),f=a("../util/util"),g=4,h=128,i=2048;b.exports=d,d.prototype.getGlyphs=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]=[]),d[b].push(c);return d},d.prototype.getRects=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]={}),d[b][c]=this.index[e];return d},d.prototype.addGlyph=function(a,b,c,d){if(!c)return null;var e=b+"#"+c.id;if(this.index[e])return this.ids[e].indexOf(a)<0&&this.ids[e].push(a),this.index[e];if(!c.bitmap)return null;var g=c.width+2*d,h=c.height+2*d,i=1,j=g+2*i,k=h+2*i;j+=4-j%4,k+=4-k%4;var l=this.bin.packOne(j,k);if(l||(this.resize(),l=this.bin.packOne(j,k)),!l)return f.warnOnce("glyph bitmap overflow"),null;this.index[e]=l,this.ids[e]=[a];for(var m=this.data,n=c.bitmap,o=0;h>o;o++)for(var p=this.width*(l.y+o+i)+l.x+i,q=g*o,r=0;g>r;r++)m[p+r]=n[q+r];return this.dirty=!0,l},d.prototype.resize=function(){var a=this.width,b=this.height;if(!(a>=i||b>=i)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=g,this.height*=g,this.bin.resize(this.width,this.height);for(var c=new ArrayBuffer(this.width*this.height),d=0;b>d;d++){var e=new Uint8Array(this.data.buffer,b*d,a),f=new Uint8Array(c,b*d*g,a);f.set(e)}this.data=new Uint8Array(c)}},d.prototype.bind=function(a){this.gl=a,this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,null))},d.prototype.updateTexture=function(a){this.bind(a),this.dirty&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data),this.dirty=!1)}},{"../util/util":443,"shelf-pack":523}],400:[function(a,b,c){"use strict";function d(a){this.url=a&&g(a),this.atlases={},this.stacks={},this.loading={}}function e(a,b,c){var d=1;this.advance=a.advance,this.left=a.left-c-d,this.top=a.top+c+d,this.rect=b}function f(a,b,c,d){return d=d||"abc",c.replace("{s}",d[a.length%d.length]).replace("{fontstack}",a).replace("{range}",b)}var g=a("../util/mapbox").normalizeGlyphsURL,h=a("../util/ajax").getArrayBuffer,i=a("../util/glyphs"),j=a("../symbol/glyph_atlas"),k=a("pbf");b.exports=d,d.prototype.getSimpleGlyphs=function(a,b,c,d){void 0===this.stacks[a]&&(this.stacks[a]={}),void 0===this.atlases[a]&&(this.atlases[a]=new j);for(var f,g={},h=this.stacks[a],i=this.atlases[a],k=3,l={},m=0,n=0;n<b.length;n++){var o=b[n];if(f=Math.floor(o/256),h[f]){var p=h[f].glyphs[o],q=i.addGlyph(c,a,p,k);p&&(g[o]=new e(p,q,k))}else void 0===l[f]&&(l[f]=[],m++),l[f].push(o)}m||d(void 0,g,a);var r=function(b,f,h){if(!b)for(var j=this.stacks[a][f]=h.stacks[0],n=0;n<l[f].length;n++){var o=l[f][n],p=j.glyphs[o],q=i.addGlyph(c,a,p,k);p&&(g[o]=new e(p,q,k))}m--,m||d(void 0,g,a)}.bind(this);for(var s in l)this.loadRange(a,s,r)},d.prototype.loadRange=function(a,b,c){if(256*b>65535)return c("glyphs > 65535 not supported");void 0===this.loading[a]&&(this.loading[a]={});var d=this.loading[a];if(d[b])d[b].push(c);else{d[b]=[c];var e=256*b+"-"+(256*b+255),g=f(a,e,this.url);h(g,function(a,c){for(var e=!a&&new i(new k(new Uint8Array(c))),f=0;f<d[b].length;f++)d[b][f](a,b,e);delete d[b]})}},d.prototype.getGlyphAtlas=function(a){return this.atlases[a]}},{"../symbol/glyph_atlas":399,"../util/ajax":426,"../util/glyphs":436,"../util/mapbox":440,pbf:479}],401:[function(a,b,c){"use strict";b.exports=function(a,b,c){function d(d){k.push(a[d]),l.push(c[d]),m.push(b[d]),n++}function e(a,b,c){var d=j[a];return delete j[a],j[b]=d,l[d][0].pop(),l[d][0]=l[d][0].concat(c[0]),d}function f(a,b,c){var d=i[b];return delete i[b],i[a]=d,l[d][0].shift(),l[d][0]=c[0].concat(l[d][0]),d}function g(a,b,c){var d=c?b[0][b[0].length-1]:b[0][0];return a+":"+d.x+":"+d.y}var h,i={},j={},k=[],l=[],m=[],n=0;for(h=0;h<a.length;h++){var o=c[h],p=b[h];if(p){var q=g(p,o),r=g(p,o,!0);if(q in j&&r in i&&j[q]!==i[r]){var s=f(q,r,o),t=e(q,r,l[s]);delete i[q],delete j[r],j[g(p,l[t],!0)]=t,l[s]=null}else q in j?e(q,r,o):r in i?f(q,r,o):(d(h),i[q]=n-1,j[r]=n-1)}else d(h)}return{features:k,textFeatures:m,geometries:l}}},{}],402:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){this.anchorPoint=a,this.tl=b,this.tr=c,this.bl=d,this.br=e,this.tex=f,this.anchorAngle=g,this.glyphAngle=h,this.minScale=i,this.maxScale=j}function e(a,b,c,e,f,g,j,k,l){var m,n,o,p,q=b.image.rect,r=f.layout,s=1,t=b.left-s,u=t+q.w/b.image.pixelRatio,v=b.top-s,w=v+q.h/b.image.pixelRatio;if("none"!==r["icon-text-fit"]&&j){var x=u-t,y=w-v,z=r["text-size"]/24,A=j.left*z,B=j.right*z,C=j.top*z,D=j.bottom*z,E=B-A,F=D-C,G=r["icon-text-fit-padding"][0],H=r["icon-text-fit-padding"][1],I=r["icon-text-fit-padding"][2],J=r["icon-text-fit-padding"][3],K="width"===r["icon-text-fit"]?.5*(F-y):0,L="height"===r["icon-text-fit"]?.5*(E-x):0,M="width"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?E:x,N="height"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?F:y;m=new h(A+L-J,C+K-G),n=new h(A+L+H+M,C+K-G),o=new h(A+L+H+M,C+K+I+N),p=new h(A+L-J,C+K+I+N)}else m=new h(t,v),n=new h(u,v),o=new h(u,w),p=new h(t,w);var O=f.getLayoutValue("icon-rotate",k,l)*Math.PI/180;if(g){var P=e[a.segment];if(a.y===P.y&&a.x===P.x&&a.segment+1<e.length){var Q=e[a.segment+1];O+=Math.atan2(a.y-Q.y,a.x-Q.x)+Math.PI}else O+=Math.atan2(a.y-P.y,a.x-P.x)}if(O){var R=Math.sin(O),S=Math.cos(O),T=[S,-R,R,S];m=m.matMult(T),n=n.matMult(T),p=p.matMult(T),o=o.matMult(T)}return[new d(new h(a.x,a.y),m,n,p,o,b.image.rect,0,0,i,1/0)]}function f(a,b,c,e,f,j){for(var k=f.layout["text-rotate"]*Math.PI/180,l=f.layout["text-keep-upright"],m=b.positionedGlyphs,n=[],o=0;o<m.length;o++){var p=m[o],q=p.glyph,r=q.rect;if(r){var s,t=(p.x+q.advance/2)*c,u=i;j?(s=[],u=g(s,a,t,e,a.segment,!0),l&&(u=Math.min(u,g(s,a,t,e,a.segment,!1)))):s=[{anchorPoint:new h(a.x,a.y),offset:0,angle:0,maxScale:1/0,minScale:i}];for(var v=p.x+q.left,w=p.y-q.top,x=v+r.w,y=w+r.h,z=new h(v,w),A=new h(x,w),B=new h(v,y),C=new h(x,y),D=0;D<s.length;D++){var E=s[D],F=z,G=A,H=B,I=C;if(k){var J=Math.sin(k),K=Math.cos(k),L=[K,-J,J,K];F=F.matMult(L),G=G.matMult(L),H=H.matMult(L),I=I.matMult(L)}var M=Math.max(E.minScale,u),N=(a.angle+E.offset+2*Math.PI)%(2*Math.PI),O=(E.angle+E.offset+2*Math.PI)%(2*Math.PI);n.push(new d(E.anchorPoint,F,G,H,I,r,N,O,M,E.maxScale))}}}return n}function g(a,b,c,d,e,f){var g=!f;0>c&&(f=!f),f&&e++;var j=new h(b.x,b.y),k=d[e],l=1/0;c=Math.abs(c);for(var m=i;;){var n=j.dist(k),o=c/n,p=Math.atan2(k.y-j.y,k.x-j.x);if(f||(p+=Math.PI),a.push({anchorPoint:j,offset:g?Math.PI:0,minScale:o,maxScale:l,angle:(p+2*Math.PI)%(2*Math.PI)}),m>=o)break;for(j=k;j.equals(k);)if(e+=f?1:-1,k=d[e],!k)return o;var q=k.sub(j)._unit();j=j.sub(q._mult(n)),l=o}return m}var h=a("point-geometry");b.exports={getIconQuads:e,getGlyphQuads:f,SymbolQuad:d};var i=.5},{"point-geometry":485}],403:[function(a,b,c){"use strict";function d(a,b,c){for(var d=[],f=0,g=a.length;g>f;f++){var h=e(a[f].properties,b["text-field"]);if(h){h=h.toString();var i=b["text-transform"];"uppercase"===i?h=h.toLocaleUpperCase():"lowercase"===i&&(h=h.toLocaleLowerCase());for(var j=0;j<h.length;j++)c[h.charCodeAt(j)]=!0;d[f]=h}else d[f]=null}return d}var e=a("../util/token");b.exports=d},{"../util/token":442}],404:[function(a,b,c){"use strict";function d(a,b,c,d){this.codePoint=a,this.x=b,this.y=c,this.glyph=d}function e(a,b,c,d,e,f){this.positionedGlyphs=a,this.text=b,this.top=c,this.bottom=d,this.left=e,this.right=f}function f(a,b,c,f,h,i,j,k,l){for(var m=[],n=new e(m,a,l[1],l[1],l[0],l[0]),o=-17,p=0,q=o,r=0;r<a.length;r++){var s=a.charCodeAt(r),t=b[s];t&&(m.push(new d(s,p,q,t)),p+=t.advance+k)}return m.length?(g(n,b,f,c,h,i,j,l),n):!1}function g(a,b,c,d,e,f,g,j){var k=null,n=0,o=0,p=0,q=0,r=a.positionedGlyphs;if(d)for(var s=0;s<r.length;s++){var t=r[s];if(t.x-=n,t.y+=c*p,t.x>d&&null!==k){var u=r[k+1].x;q=Math.max(u,q);for(var v=k+1;s>=v;v++)r[v].y+=c,r[v].x-=u;if(g){var w=k;l[r[k].codePoint]&&w--,h(r,b,o,w,g)}o=k+1,k=null,n+=u,p++}m[t.codePoint]&&(k=s)}var x=r[r.length-1],y=x.x+b[x.codePoint].advance;q=Math.max(q,y);var z=(p+1)*c;h(r,b,o,r.length-1,g),i(r,g,e,f,q,c,p,j),a.top+=-f*z,a.bottom=a.top+z,a.left+=-e*q,a.right=a.left+q}function h(a,b,c,d,e){for(var f=b[a[d].codePoint].advance,g=(a[d].x+f)*e,h=c;d>=h;h++)a[h].x-=g}function i(a,b,c,d,e,f,g,h){for(var i=(b-c)*e+h[0],j=(-d*(g+1)+.5)*f+h[1],k=0;k<a.length;k++)a[k].x+=i,a[k].y+=j}function j(a,b){if(!a||!a.rect)return null;var c=b["icon-offset"][0],d=b["icon-offset"][1],e=c-a.width/2,f=e+a.width,g=d-a.height/2,h=g+a.height;return new k(a,g,h,e,f)}function k(a,b,c,d,e){this.image=a,this.top=b,this.bottom=c,this.left=d,this.right=e}b.exports={shapeText:f,shapeIcon:j};var l={32:!0,8203:!0},m={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0}},{}],405:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.bin=new g(a,b),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function e(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=d*b+c,o=h*f+g;if(k)for(o-=f,m=-1;j>=m;m++,n=((m+j)%j+d)*b+c,o+=f)for(l=-1;i>=l;l++)e[o+l]=a[n+(l+i)%i];else for(m=0;j>m;m++,n+=b,o+=f)for(l=0;i>l;l++)e[o+l]=a[n+l]}function f(a,b,c,d,e){this.rect=a,this.width=b,this.height=c,this.sdf=d,this.pixelRatio=e}var g=a("shelf-pack"),h=a("../util/browser"),i=a("../util/util");b.exports=d,d.prototype.allocateImage=function(a,b){a/=this.pixelRatio,b/=this.pixelRatio;var c=2,d=a+c+(4-(a+c)%4),e=b+c+(4-(b+c)%4),f=this.bin.packOne(d,e);return f?f:(i.warnOnce("SpriteAtlas out of space."),null)},d.prototype.getImage=function(a,b){if(this.images[a])return this.images[a];if(!this.sprite)return null;var c=this.sprite.getSpritePosition(a);if(!c.width||!c.height)return null;var d=this.allocateImage(c.width,c.height);if(!d)return null;var e=new f(d,c.width/c.pixelRatio,c.height/c.pixelRatio,c.sdf,c.pixelRatio/this.pixelRatio);return this.images[a]=e,this.copy(d,c,b),e},d.prototype.getPosition=function(a,b){var c=this.getImage(a,b),d=c&&c.rect;if(!d)return null;var e=c.width*c.pixelRatio,f=c.height*c.pixelRatio,g=1;return{size:[c.width,c.height],tl:[(d.x+g)/this.width,(d.y+g)/this.height],br:[(d.x+g+e)/this.width,(d.y+g+f)/this.height]}},d.prototype.allocate=function(){if(!this.data){var a=Math.floor(this.width*this.pixelRatio),b=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(a*b);for(var c=0;c<this.data.length;c++)this.data[c]=0}},d.prototype.copy=function(a,b,c){if(this.sprite.img.data){var d=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var f=this.data,g=1;e(d,this.sprite.img.width,b.x,b.y,f,this.width*this.pixelRatio,(a.x+g)*this.pixelRatio,(a.y+g)*this.pixelRatio,b.width,b.height,c),this.dirty=!0}},d.prototype.setSprite=function(a){a&&(this.pixelRatio=h.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=a},d.prototype.addIcons=function(a,b){for(var c=0;c<a.length;c++)this.getImage(a[c]);b(null,this.images)},d.prototype.bind=function(a,b){var c=!1;this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),c=!0);var d=b?a.LINEAR:a.NEAREST;d!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d),this.filter=d),this.dirty&&(this.allocate(),c?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)}},{"../util/browser":427,"../util/util":443,"shelf-pack":523}],406:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":441,"../util/util":443,"point-geometry":485}],407:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=a("./quads").SymbolQuad,h=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"}]});e.extendAll(h.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)},get SymbolQuad(){return new g(this.anchorPoint,new f(this.tlX,this.tlY),new f(this.trX,this.trY),new f(this.blX,this.blY),new f(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale)}})},{"../util/struct_array":441,"../util/util":443,"./quads":402,"point-geometry":485}],408:[function(a,b,c){"use strict";var d=a("../util/dom"),e=a("point-geometry"),f={scrollZoom:a("./handler/scroll_zoom"),boxZoom:a("./handler/box_zoom"),dragRotate:a("./handler/drag_rotate"),dragPan:a("./handler/drag_pan"),keyboard:a("./handler/keyboard"),doubleClickZoom:a("./handler/dblclick_zoom"),touchZoomRotate:a("./handler/touch_zoom_rotate")};b.exports=function(a,b){function c(a){r("mouseout",a)}function g(b){a.stop(),v=d.mousePos(t,b),r("mousedown",b)}function h(b){var c=a.dragRotate&&a.dragRotate.isActive();u&&!c&&r("contextmenu",u),u=null,r("mouseup",b)}function i(b){if(!(a.dragPan&&a.dragPan.isActive()||a.dragRotate&&a.dragRotate.isActive())){for(var c=b.toElement||b.target;c&&c!==t;)c=c.parentNode;c===t&&r("mousemove",b)}}function j(b){a.stop(),s("touchstart",b),!b.touches||b.touches.length>1||(w?(clearTimeout(w),w=null,r("dblclick",b)):w=setTimeout(n,300))}function k(a){s("touchmove",a)}function l(a){s("touchend",a)}function m(a){s("touchcancel",a)}function n(){w=null}function o(a){var b=d.mousePos(t,a);b.equals(v)&&r("click",a)}function p(a){r("dblclick",a),a.preventDefault()}function q(a){u=a,a.preventDefault()}function r(b,c){var e=d.mousePos(t,c);return a.fire(b,{lngLat:a.unproject(e),point:e,originalEvent:c})}function s(b,c){var f=d.touchPos(t,c),g=f.reduce(function(a,b,c,d){return a.add(b.div(d.length))},new e(0,0));return a.fire(b,{lngLat:a.unproject(g),point:g,lngLats:f.map(function(b){return a.unproject(b)},this),points:f,originalEvent:c})}var t=a.getCanvasContainer(),u=null,v=null,w=null;for(var x in f)a[x]=new f[x](a,b),b.interactive&&b[x]&&a[x].enable();t.addEventListener("mouseout",c,!1),t.addEventListener("mousedown",g,!1),t.addEventListener("mouseup",h,!1),t.addEventListener("mousemove",i,!1),t.addEventListener("touchstart",j,!1),t.addEventListener("touchend",l,!1),t.addEventListener("touchmove",k,!1),t.addEventListener("touchcancel",m,!1),t.addEventListener("click",o,!1),t.addEventListener("dblclick",p,!1),t.addEventListener("contextmenu",q,!1)}},{"../util/dom":429,"./handler/box_zoom":414,"./handler/dblclick_zoom":415,"./handler/drag_pan":416,"./handler/drag_rotate":417,"./handler/keyboard":418,"./handler/scroll_zoom":419,"./handler/touch_zoom_rotate":420,"point-geometry":485}],409:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/interpolate"),f=a("../util/browser"),g=a("../geo/lng_lat"),h=a("../geo/lng_lat_bounds"),i=a("point-geometry"),j=b.exports=function(){};d.extend(j.prototype,{getCenter:function(){return this.transform.center},setCenter:function(a,b){return this.jumpTo({center:a},b),this},panBy:function(a,b,c){return this.panTo(this.transform.center,d.extend({offset:i.convert(a).mult(-1)},b),c),this},panTo:function(a,b,c){return this.easeTo(d.extend({center:a},b),c)},getZoom:function(){return this.transform.zoom},setZoom:function(a,b){return this.jumpTo({zoom:a},b),this},zoomTo:function(a,b,c){return this.easeTo(d.extend({zoom:a},b),c)},zoomIn:function(a,b){return this.zoomTo(this.getZoom()+1,a,b),this},zoomOut:function(a,b){return this.zoomTo(this.getZoom()-1,a,b),this},getBearing:function(){return this.transform.bearing},setBearing:function(a,b){return this.jumpTo({bearing:a},b),this},rotateTo:function(a,b,c){return this.easeTo(d.extend({bearing:a},b),c)},resetNorth:function(a,b){return this.rotateTo(0,d.extend({duration:1e3},a),b),this},snapToNorth:function(a,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,b):this},getPitch:function(){return this.transform.pitch},setPitch:function(a,b){return this.jumpTo({pitch:a},b),this},fitBounds:function(a,b,c){b=d.extend({padding:0,offset:[0,0],maxZoom:1/0},b),a=h.convert(a);var e=i.convert(b.offset),f=this.transform,g=f.project(a.getNorthWest()),j=f.project(a.getSouthEast()),k=j.sub(g),l=(f.width-2*b.padding-2*Math.abs(e.x))/k.x,m=(f.height-2*b.padding-2*Math.abs(e.y))/k.y;return b.center=f.unproject(g.add(j).div(2)),b.zoom=Math.min(f.scaleZoom(f.scale*Math.min(l,m)),b.maxZoom),b.bearing=0,b.linear?this.easeTo(b,c):this.flyTo(b,c)},jumpTo:function(a,b){this.stop();var c=this.transform,d=!1,e=!1,f=!1;return"zoom"in a&&c.zoom!==+a.zoom&&(d=!0,c.zoom=+a.zoom),"center"in a&&(c.center=g.convert(a.center)),"bearing"in a&&c.bearing!==+a.bearing&&(e=!0,c.bearing=+a.bearing),"pitch"in a&&c.pitch!==+a.pitch&&(f=!0,c.pitch=+a.pitch),this.fire("movestart",b).fire("move",b),d&&this.fire("zoomstart",b).fire("zoom",b).fire("zoomend",b),e&&this.fire("rotate",b),f&&this.fire("pitch",b),this.fire("moveend",b)},easeTo:function(a,b){this.stop(),a=d.extend({offset:[0,0],duration:500,easing:d.ease},a);var c,f,h=this.transform,j=i.convert(a.offset),k=this.getZoom(),l=this.getBearing(),m=this.getPitch(),n="zoom"in a?+a.zoom:k,o="bearing"in a?this._normalizeBearing(a.bearing,l):l,p="pitch"in a?+a.pitch:m;"center"in a?(c=g.convert(a.center),f=h.centerPoint.add(j)):"around"in a?(c=g.convert(a.around),f=h.locationPoint(c)):(f=h.centerPoint.add(j),c=h.pointLocation(f));var q=h.locationPoint(c);return a.animate===!1&&(a.duration=0),this.zooming=n!==k,this.rotating=l!==o,this.pitching=p!==m,a.noMoveStart||this.fire("movestart",b),this.zooming&&this.fire("zoomstart",b),clearTimeout(this._onEaseEnd),this._ease(function(a){this.zooming&&(h.zoom=e(k,n,a)),this.rotating&&(h.bearing=e(l,o,a)),this.pitching&&(h.pitch=e(m,p,a)),h.setLocationAtPoint(c,q.add(f.sub(q)._mult(a))),this.fire("move",b),this.zooming&&this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){a.delayEndEvents?this._onEaseEnd=setTimeout(this._easeToEnd.bind(this,b),a.delayEndEvents):this._easeToEnd(b)}.bind(this),a),this},_easeToEnd:function(a){var b=this.zooming;this.zooming=!1,this.rotating=!1,this.pitching=!1,b&&this.fire("zoomend",a),this.fire("moveend",a)},flyTo:function(a,b){function c(a){var b=(z*z-y*y+(a?-1:1)*D*D*A*A)/(2*(a?z:y)*D*A);return Math.log(Math.sqrt(b*b+1)-b)}function f(a){return(Math.exp(a)-Math.exp(-a))/2}function h(a){return(Math.exp(a)+Math.exp(-a))/2}function j(a){return f(a)/h(a)}this.stop(),a=d.extend({offset:[0,0],speed:1.2,curve:1.42,easing:d.ease
},a);var k=this.transform,l=i.convert(a.offset),m=this.getZoom(),n=this.getBearing(),o=this.getPitch(),p="center"in a?g.convert(a.center):this.getCenter(),q="zoom"in a?+a.zoom:m,r="bearing"in a?this._normalizeBearing(a.bearing,n):n,s="pitch"in a?+a.pitch:o;Math.abs(k.center.lng)+Math.abs(p.lng)>180&&(k.center.lng>0&&p.lng<0?p.lng+=360:k.center.lng<0&&p.lng>0&&(p.lng-=360));var t=k.zoomScale(q-m),u=k.point,v="center"in a?k.project(p).sub(l.div(t)):u,w=k.worldSize,x=a.curve,y=Math.max(k.width,k.height),z=y/t,A=v.sub(u).mag();if("minZoom"in a){var B=d.clamp(Math.min(a.minZoom,m,q),k.minZoom,k.maxZoom),C=y/k.zoomScale(B-m);x=Math.sqrt(C/A*2)}var D=x*x,E=c(0),F=function(a){return h(E)/h(E+x*a)},G=function(a){return y*((h(E)*j(E+x*a)-f(E))/D)/A},H=(c(1)-E)/x;if(Math.abs(A)<1e-6){if(Math.abs(y-z)<1e-6)return this.easeTo(a);var I=y>z?-1:1;H=Math.abs(Math.log(z/y))/x,G=function(){return 0},F=function(a){return Math.exp(I*x*a)}}if("duration"in a)a.duration=+a.duration;else{var J="screenSpeed"in a?+a.screenSpeed/x:+a.speed;a.duration=1e3*H/J}return this.zooming=!0,n!==r&&(this.rotating=!0),o!==s&&(this.pitching=!0),this.fire("movestart",b),this.fire("zoomstart",b),this._ease(function(a){var c=a*H,d=G(c);k.zoom=m+k.scaleZoom(1/F(c)),k.center=k.unproject(u.add(v.sub(u).mult(d)),w),this.rotating&&(k.bearing=e(n,r,a)),this.pitching&&(k.pitch=e(o,s,a)),this.fire("move",b),this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",b),this.fire("moveend",b)},a),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},_ease:function(a,b,c){this._finishFn=b,this._abortFn=f.timed(function(b){a.call(this,c.easing(b)),1===b&&this._finishEase()},c.animate===!1?0:c.duration,this)},_finishEase:function(){delete this._abortFn;var a=this._finishFn;delete this._finishFn,a.call(this)},_normalizeBearing:function(a,b){a=d.wrap(a,-180,180);var c=Math.abs(a-b);return Math.abs(a-360-b)<c&&(a-=360),Math.abs(a+360-b)<c&&(a+=360),a},_updateEasing:function(a,b,c){var e;if(this.ease){var f=this.ease,g=(Date.now()-f.start)/f.duration,h=f.easing(g+.01)-f.easing(g),i=.27/Math.sqrt(h*h+1e-4)*.01,j=Math.sqrt(.0729-i*i);e=d.bezier(i,j,.25,1)}else e=c?d.bezier.apply(d,c):d.ease;return this.ease={start:(new Date).getTime(),to:Math.pow(2,b),duration:a,easing:e},e}})},{"../geo/lng_lat":340,"../geo/lng_lat_bounds":341,"../util/browser":427,"../util/interpolate":437,"../util/util":443,"point-geometry":485}],410:[function(a,b,c){"use strict";function d(a){g.setOptions(this,a)}var e=a("./control"),f=a("../../util/dom"),g=a("../../util/util");b.exports=d,d.createAttributionString=function(a){var b=[];for(var c in a){var d=a[c];d.attribution&&b.indexOf(d.attribution)<0&&b.push(d.attribution)}return b.sort(function(a,b){return a.length-b.length}),b=b.filter(function(a,c){for(var d=c+1;d<b.length;d++)if(b[d].indexOf(a)>=0)return!1;return!0}),b.join(" | ")},d.prototype=g.inherit(e,{options:{position:"bottom-right"},onAdd:function(a){var b="mapboxgl-ctrl-attrib",c=this._container=f.create("div",b,a.getContainer());return this._update(),a.on("source.load",this._update.bind(this)),a.on("source.change",this._update.bind(this)),a.on("source.remove",this._update.bind(this)),a.on("moveend",this._updateEditLink.bind(this)),c},_update:function(){this._map.style&&(this._container.innerHTML=d.createAttributionString(this._map.style.sources)),this._editLink=this._container.getElementsByClassName("mapbox-improve-map")[0],this._updateEditLink()},_updateEditLink:function(){if(this._editLink){var a=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+a.lng+"/"+a.lat+"/"+Math.round(this._map.getZoom()+1)}}})},{"../../util/dom":429,"../../util/util":443,"./control":411}],411:[function(a,b,c){"use strict";function d(){}var e=a("../../util/util"),f=a("../../util/evented");b.exports=d,d.prototype={addTo:function(a){this._map=a;var b=this._container=this.onAdd(a);if(this.options&&this.options.position){var c=this.options.position,d=a._controlCorners[c];b.className+=" mapboxgl-ctrl",-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}},e.extend(d.prototype,f)},{"../../util/evented":435,"../../util/util":443}],412:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}var e=a("./control"),f=a("../../util/browser"),g=a("../../util/dom"),h=a("../../util/util");b.exports=d;var i={enableHighAccuracy:!1,timeout:6e3};d.prototype=h.inherit(e,{options:{position:"top-right"},onAdd:function(a){var b="mapboxgl-ctrl",c=this._container=g.create("div",b+"-group",a.getContainer());return f.supportsGeolocation?(this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._geolocateButton=g.create("button",b+"-icon "+b+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),c):c},_onContextMenu:function(a){a.preventDefault()},_onClickGeolocate:function(){navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this),i),this._timeoutId=setTimeout(this._finish.bind(this),1e4)},_success:function(a){this._map.jumpTo({center:[a.coords.longitude,a.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",a),this._finish()},_error:function(a){this.fire("error",a),this._finish()},_finish:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}})},{"../../util/browser":427,"../../util/dom":429,"../../util/util":443,"./control":411}],413:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}function e(a){return new MouseEvent(a.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:a.detail,view:a.view,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY,movementX:a.movementX,movementY:a.movementY,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,altKey:a.altKey,metaKey:a.metaKey})}var f=a("./control"),g=a("../../util/dom"),h=a("../../util/util");b.exports=d,d.prototype=h.inherit(f,{options:{position:"top-right"},onAdd:function(a){var b="mapboxgl-ctrl",c=this._container=g.create("div",b+"-group",a.getContainer());return this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(b+"-icon "+b+"-zoom-in",a.zoomIn.bind(a)),this._zoomOutButton=this._createButton(b+"-icon "+b+"-zoom-out",a.zoomOut.bind(a)),this._compass=this._createButton(b+"-icon "+b+"-compass",a.resetNorth.bind(a)),this._compassArrow=g.create("div","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),a.on("rotate",this._rotateCompassArrow.bind(this)),this._rotateCompassArrow(),this._el=a.getCanvasContainer(),c},_onContextMenu:function(a){a.preventDefault()},_onCompassDown:function(a){0===a.button&&(g.disableDrag(),document.addEventListener("mousemove",this._onCompassMove),document.addEventListener("mouseup",this._onCompassUp),this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassMove:function(a){0===a.button&&(this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassUp:function(a){0===a.button&&(document.removeEventListener("mousemove",this._onCompassMove),document.removeEventListener("mouseup",this._onCompassUp),g.enableDrag(),this._el.dispatchEvent(e(a)),a.stopPropagation())},_createButton:function(a,b){var c=g.create("button",a,this._container);return c.type="button",c.addEventListener("click",function(){b()}),c},_rotateCompassArrow:function(){var a="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=a}})},{"../../util/dom":429,"../../util/util":443,"./control":411}],414:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),g.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../geo/lng_lat_bounds"),g=a("../../util/util");b.exports=d,d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},_onMouseDown:function(a){a.shiftKey&&0===a.button&&(document.addEventListener("mousemove",this._onMouseMove,!1),document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("mouseup",this._onMouseUp,!1),e.disableDrag(),this._startPos=e.mousePos(this._el,a),this._active=!0)},_onMouseMove:function(a){var b=this._startPos,c=e.mousePos(this._el,a);this._box||(this._box=e.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));var d=Math.min(b.x,c.x),f=Math.max(b.x,c.x),g=Math.min(b.y,c.y),h=Math.max(b.y,c.y);e.setTransform(this._box,"translate("+d+"px,"+g+"px)"),this._box.style.width=f-d+"px",this._box.style.height=h-g+"px"},_onMouseUp:function(a){if(0===a.button){var b=this._startPos,c=e.mousePos(this._el,a),d=new f(this._map.unproject(b),this._map.unproject(c));this._finish(),b.x===c.x&&b.y===c.y?this._fireEvent("boxzoomcancel",a):this._map.fitBounds(d,{linear:!0}).fire("boxzoomend",{originalEvent:a,boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",a))},_finish:function(){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!1),document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),e.enableDrag()},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})}}},{"../../geo/lng_lat_bounds":341,"../../util/dom":429,"../../util/util":443}],415:[function(a,b,c){"use strict";function d(a){this._map=a,this._onDblClick=this._onDblClick.bind(this)}b.exports=d,d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},_onDblClick:function(a){this._map.zoomTo(this._map.getZoom()+(a.originalEvent.shiftKey?-1:1),{around:a.lngLat},a)}}},{}],416:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util");b.exports=d;var g=.3,h=f.bezier(0,0,g,1),i=1400,j=2500;d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},_onDown:function(a){this._ignoreEvent(a)||this.isActive()||(a.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=e.mousePos(this._el,a),this._inertia=[[Date.now(),this._pos]])},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",a),this._fireEvent("movestart",a));var b=e.mousePos(this._el,a),c=this._map;c.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),b]),c.transform.setLocationAtPoint(c.transform.pointLocation(this._pos),b),this._fireEvent("drag",a),this._fireEvent("move",a),this._pos=b,a.preventDefault()}},_onUp:function(a){if(this.isActive()){this._active=!1,this._fireEvent("dragend",a),this._drainInertiaBuffer();var b=function(){this._fireEvent("moveend",a)}.bind(this),c=this._inertia;if(c.length<2)return void b();var d=c[c.length-1],e=c[0],f=d[1].sub(e[1]),k=(d[0]-e[0])/1e3;if(0===k||d[1].equals(e[1]))return void b();var l=f.mult(g/k),m=l.mag();m>i&&(m=i,l._unit()._mult(m));var n=m/(j*g),o=l.mult(-n/2);this._map.panBy(o,{duration:1e3*n,easing:h,noMoveStart:!0},{originalEvent:a})}},_onMouseUp:function(a){this._ignoreEvent(a)||(this._onUp(a),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp))},_onTouchEnd:function(a){this._ignoreEvent(a)||(this._onUp(a),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd))},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragRotate&&b.dragRotate.isActive())return!0;if(a.touches)return a.touches.length>1;if(a.ctrlKey)return!0;var c=1,d=0;return"mousemove"===a.type?a.buttons&0===c:a.button!==d},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>0&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":429,"../../util/util":443}],417:[function(a,b,c){"use strict";function d(a,b){this._map=a,this._el=a.getCanvasContainer(),this._bearingSnap=b.bearingSnap,g.bindHandlers(this)}var e=a("../../util/dom"),f=a("point-geometry"),g=a("../../util/util");b.exports=d;var h=.25,i=g.bezier(0,0,h,1),j=180,k=720;d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},_onDown:function(a){if(!this._ignoreEvent(a)&&!this.isActive()){document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=e.mousePos(this._el,a),this._center=this._map.transform.centerPoint;var b=this._startPos.sub(this._center),c=b.mag();200>c&&(this._center=this._startPos.add(new f(-200,0)._rotate(b.angle()))),a.preventDefault()}},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",a),this._fireEvent("movestart",a));var b=this._map;b.stop();var c=this._pos,d=e.mousePos(this._el,a),f=this._center,g=c.sub(f).angleWith(d.sub(f))/Math.PI*180,h=b.getBearing()-g,i=this._inertia,j=i[i.length-1];this._drainInertiaBuffer(),i.push([Date.now(),b._normalizeBearing(h,j[1])]),b.transform.bearing=h,this._fireEvent("rotate",a),this._fireEvent("move",a),this._pos=d}},_onUp:function(a){if(!this._ignoreEvent(a)&&(document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",a),this._drainInertiaBuffer();var b=this._map,c=b.getBearing(),d=this._inertia,e=function(){Math.abs(c)<this._bearingSnap?b.resetNorth({noMoveStart:!0},{originalEvent:a}):this._fireEvent("moveend",a)}.bind(this);if(d.length<2)return void e();var f=d[0],g=d[d.length-1],l=d[d.length-2],m=b._normalizeBearing(c,l[1]),n=g[1]-f[1],o=0>n?-1:1,p=(g[0]-f[0])/1e3;if(0===n||0===p)return void e();var q=Math.abs(n*(h/p));q>j&&(q=j);var r=q/(k*h),s=o*q*(r/2);m+=s,Math.abs(b._normalizeBearing(m,0))<this._bearingSnap&&(m=b._normalizeBearing(0,m)),b.rotateTo(m,{duration:1e3*r,easing:i,noMoveStart:!0},{originalEvent:a})}},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragPan&&b.dragPan.isActive())return!0;if(a.touches)return a.touches.length>1;var c=a.ctrlKey?1:2,d=a.ctrlKey?0:2;return"mousemove"===a.type?a.buttons&0===c:a.button!==d},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>0&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":429,"../../util/util":443,"point-geometry":485}],418:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)}b.exports=d;var e=80,f=2,g=5;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b=this._map,c={originalEvent:a};if(!b.isEasing())switch(a.keyCode){case 61:case 107:case 171:case 187:b.zoomTo(Math.round(b.getZoom())+(a.shiftKey?2:1),c);break;case 189:case 109:case 173:b.zoomTo(Math.round(b.getZoom())-(a.shiftKey?2:1),c);break;case 37:a.shiftKey?b.easeTo({bearing:b.getBearing()-f},c):(a.preventDefault(),b.panBy([-e,0],c));break;case 39:a.shiftKey?b.easeTo({bearing:b.getBearing()+f},c):(a.preventDefault(),b.panBy([e,0],c));break;case 38:a.shiftKey?b.easeTo({pitch:b.getPitch()+g},c):(a.preventDefault(),b.panBy([0,-e],c));break;case 40:a.shiftKey?b.easeTo({pitch:Math.max(b.getPitch()-g,0)},c):(a.preventDefault(),b.panBy([0,e],c))}}}}},{}],419:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),g.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/browser"),g=a("../../util/util");b.exports=d;var h="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=-1!==h.indexOf("firefox"),j=-1!==h.indexOf("safari")&&-1===h.indexOf("chrom");d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},_onWheel:function(a){var b;"wheel"===a.type?(b=a.deltaY,i&&a.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(b/=f.devicePixelRatio),a.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(b*=40)):"mousewheel"===a.type&&(b=-a.wheelDeltaY,j&&(b/=3));var c=f.now(),d=c-(this._time||0);this._pos=e.mousePos(this._el,a),this._time=c,0!==b&&b%4.000244140625===0?(this._type="wheel",b=Math.floor(b/4)):0!==b&&Math.abs(b)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=b,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(d*b)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,b+=this._lastValue)),a.shiftKey&&b&&(b/=4),this._type&&this._zoom(-b,a),a.preventDefault()},_onTimeout:function(){this._type="wheel",this._zoom(-this._lastValue)},_zoom:function(a,b){if(0!==a){var c=this._map,d=2/(1+Math.exp(-Math.abs(a/100)));0>a&&0!==d&&(d=1/d);var e=c.ease?c.ease.to:c.transform.scale,f=c.transform.scaleZoom(e*d);c.zoomTo(f,{duration:0,around:c.unproject(this._pos),delayEndEvents:200},{originalEvent:b})}}}},{"../../util/browser":427,"../../util/dom":429,"../../util/util":443}],420:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util");b.exports=d;var g=.15,h=f.bezier(0,0,g,1),i=12,j=2.5,k=.15,l=4;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},disableRotation:function(){this._rotationDisabled=!0},enableRotation:function(){this._rotationDisabled=!1},_onStart:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]);this._startVec=b.sub(c),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],document.addEventListener("touchmove",this._onMove,!1),document.addEventListener("touchend",this._onEnd,!1)}},_onMove:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]),d=b.add(c).div(2),f=b.sub(c),g=f.mag()/this._startVec.mag(),h=this._rotationDisabled?0:180*f.angleWith(this._startVec)/Math.PI,i=this._map;if(this._gestureIntent){var j={duration:0,around:i.unproject(d)};"rotate"===this._gestureIntent&&(j.bearing=this._startBearing+h),("zoom"===this._gestureIntent||"rotate"===this._gestureIntent)&&(j.zoom=i.transform.scaleZoom(this._startScale*g)),i.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),g,d]),i.easeTo(j,{originalEvent:a})}else{var m=Math.abs(1-g)>k,n=Math.abs(h)>l;n?this._gestureIntent="rotate":m&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=f,this._startScale=i.transform.scale,this._startBearing=i.transform.bearing)}a.preventDefault()}},_onEnd:function(a){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var b=this._inertia,c=this._map;if(b.length<2)return void c.snapToNorth({},{originalEvent:a});var d=b[b.length-1],e=b[0],f=c.transform.scaleZoom(this._startScale*d[1]),k=c.transform.scaleZoom(this._startScale*e[1]),l=f-k,m=(d[0]-e[0])/1e3,n=d[2];if(0===m||f===k)return void c.snapToNorth({},{originalEvent:a});var o=l*g/m;Math.abs(o)>j&&(o=o>0?j:-j);var p=1e3*Math.abs(o/(i*g)),q=f+o*p/2e3;0>q&&(q=0),c.easeTo({zoom:q,duration:p,easing:h,around:c.unproject(n)},{originalEvent:a})},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>2&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":429,"../../util/util":443}],421:[function(a,b,c){"use strict";function d(){e.bindAll(["_onHashChange","_updateHash"],this)}b.exports=d;var e=a("../util/util");d.prototype={addTo:function(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},remove:function(){return window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},_onHashChange:function(){var a=location.hash.replace("#","").split("/");return a.length>=3?(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||0)}),!0):!1},_updateHash:function(){var a=this._map.getCenter(),b=this._map.getZoom(),c=this._map.getBearing(),d=Math.max(0,Math.ceil(Math.log(b)/Math.LN2)),e="#"+Math.round(100*b)/100+"/"+a.lat.toFixed(d)+"/"+a.lng.toFixed(d)+(c?"/"+Math.round(10*c)/10:"");window.history.replaceState("","",e)}}},{"../util/util":443}],422:[function(a,b,c){"use strict";function d(a){a.parentNode&&a.parentNode.removeChild(a)}var e=a("../util/canvas"),f=a("../util/util"),g=a("../util/browser"),h=a("../util/browser").window,i=a("../util/evented"),j=a("../util/dom"),k=a("../style/style"),l=a("../style/animation_loop"),m=a("../render/painter"),n=a("../geo/transform"),o=a("./hash"),p=a("./bind_handlers"),q=a("./camera"),r=a("../geo/lng_lat"),s=a("../geo/lng_lat_bounds"),t=a("point-geometry"),u=a("./control/attribution"),v=0,w=20,x={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:v,maxZoom:w,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,workerCount:Math.max(g.hardwareConcurrency-1,1)},y=b.exports=function(a){if(a=f.extend({},x,a),a.workerCount<1)throw new Error("workerCount must an integer greater than or equal to 1.");this._interactive=a.interactive,this._failIfMajorPerformanceCaveat=a.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=a.preserveDrawingBuffer,this._trackResize=a.trackResize,this._workerCount=a.workerCount,this._bearingSnap=a.bearingSnap,"string"==typeof a.container?this._container=document.getElementById(a.container):this._container=a.container,this.animationLoop=new l,this.transform=new n(a.minZoom,a.maxZoom),a.maxBounds&&this.setMaxBounds(a.maxBounds),f.bindAll(["_forwardStyleEvent","_forwardSourceEvent","_forwardLayerEvent","_forwardTileEvent","_onStyleLoad","_onStyleChange","_onSourceAdd","_onSourceRemove","_onSourceUpdate","_onWindowOnline","_onWindowResize","_update","_render"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){this.animationLoop.set(300),this._rerender()}.bind(this)),"undefined"!=typeof h&&(h.addEventListener("online",this._onWindowOnline,!1),h.addEventListener("resize",this._onWindowResize,!1)),p(this,a),this._hash=a.hash&&(new o).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),this.stacks={},this._classes=[],this.resize(),a.classes&&this.setClasses(a.classes),a.style&&this.setStyle(a.style),a.attributionControl&&this.addControl(new u(a.attributionControl));var b=this.fire.bind(this,"error");this.on("style.error",b),this.on("source.error",b),this.on("tile.error",b),this.on("layer.error",b)};f.extend(y.prototype,i),f.extend(y.prototype,q.prototype),f.extend(y.prototype,{addControl:function(a){return a.addTo(this),this},addClass:function(a,b){return this._classes.indexOf(a)>=0||""===a?this:(this._classes.push(a),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},removeClass:function(a,b){var c=this._classes.indexOf(a);return 0>c||""===a?this:(this._classes.splice(c,1),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},setClasses:function(a,b){for(var c={},d=0;d<a.length;d++)""!==a[d]&&(c[a[d]]=!0);return this._classes=Object.keys(c),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0)},hasClass:function(a){return this._classes.indexOf(a)>=0},getClasses:function(){return this._classes},resize:function(){var a=0,b=0;return this._container&&(a=this._container.offsetWidth||400,b=this._container.offsetHeight||300),this._canvas.resize(a,b),this.transform.resize(a,b),this.painter.resize(a,b),this.fire("movestart").fire("move").fire("resize").fire("moveend")},getBounds:function(){var a=new s(this.transform.pointLocation(new t(0,0)),this.transform.pointLocation(this.transform.size));return(this.transform.angle||this.transform.pitch)&&(a.extend(this.transform.pointLocation(new t(this.transform.size.x,0))),a.extend(this.transform.pointLocation(new t(0,this.transform.size.y)))),a},setMaxBounds:function(a){if(a){var b=s.convert(a);this.transform.lngRange=[b.getWest(),b.getEast()],this.transform.latRange=[b.getSouth(),b.getNorth()],this.transform._constrain(),this._update()}else(null===a||void 0===a)&&(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},setMinZoom:function(a){if(a=null===a||void 0===a?v:a,a>=v&&a<=this.transform.maxZoom)return this.transform.minZoom=a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw new Error("minZoom must be between "+v+" and the current maxZoom, inclusive")},setMaxZoom:function(a){if(a=null===a||void 0===a?w:a,a>=this.transform.minZoom&&w>=a)return this.transform.maxZoom=a,this._update(),this.getZoom()>a&&this.setZoom(a),this;throw new Error("maxZoom must be between the current minZoom and "+w+", inclusive")},project:function(a){return this.transform.locationPoint(r.convert(a))},unproject:function(a){return this.transform.pointLocation(t.convert(a))},queryRenderedFeatures:function(){function a(a){return a instanceof t||Array.isArray(a)}var b,c={};return 2===arguments.length?(b=arguments[0],c=arguments[1]):1===arguments.length&&a(arguments[0])?b=arguments[0]:1===arguments.length&&(c=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(b),c,this.transform.zoom,this.transform.angle)},_makeQueryGeometry:function(a){void 0===a&&(a=[t.convert([0,0]),t.convert([this.transform.width,this.transform.height])]);var b,c=a instanceof t||"number"==typeof a[0];if(c){var d=t.convert(a);b=[d]}else{var e=[t.convert(a[0]),t.convert(a[1])];b=[e[0],new t(e[1].x,e[0].y),e[1],new t(e[0].x,e[1].y),e[0]]}return b=b.map(function(a){return this.transform.pointCoordinate(a)}.bind(this))},querySourceFeatures:function(a,b){return this.style.querySourceFeatures(a,b)},setStyle:function(a){return this.style&&(this.style.off("load",this._onStyleLoad).off("error",this._forwardStyleEvent).off("change",this._onStyleChange).off("source.add",this._onSourceAdd).off("source.remove",this._onSourceRemove).off("source.load",this._onSourceUpdate).off("source.error",this._forwardSourceEvent).off("source.change",this._onSourceUpdate).off("layer.add",this._forwardLayerEvent).off("layer.remove",this._forwardLayerEvent).off("layer.error",this._forwardLayerEvent).off("tile.add",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.load",this._update).off("tile.error",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent)._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),a?(a instanceof k?this.style=a:this.style=new k(a,this.animationLoop,this._workerCount),this.style.on("load",this._onStyleLoad).on("error",this._forwardStyleEvent).on("change",this._onStyleChange).on("source.add",this._onSourceAdd).on("source.remove",this._onSourceRemove).on("source.load",this._onSourceUpdate).on("source.error",this._forwardSourceEvent).on("source.change",this._onSourceUpdate).on("layer.add",this._forwardLayerEvent).on("layer.remove",this._forwardLayerEvent).on("layer.error",this._forwardLayerEvent).on("tile.add",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.load",this._update).on("tile.error",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},getStyle:function(){return this.style?this.style.serialize():void 0},addSource:function(a,b){return this.style.addSource(a,b),this._update(!0),this},addSourceType:function(a,b,c){return this.style.addSourceType(a,b,c)},removeSource:function(a){return this.style.removeSource(a),this._update(!0),this},getSource:function(a){return this.style.getSource(a)},addLayer:function(a,b){return this.style.addLayer(a,b),this._update(!0),this},removeLayer:function(a){return this.style.removeLayer(a),this._update(!0),this},getLayer:function(a){return this.style.getLayer(a)},setFilter:function(a,b){return this.style.setFilter(a,b),this._update(!0),this},setLayerZoomRange:function(a,b,c){return this.style.setLayerZoomRange(a,b,c),this._update(!0),this},getFilter:function(a){return this.style.getFilter(a)},setPaintProperty:function(a,b,c,d){return this.style.setPaintProperty(a,b,c,d),this._update(!0),this},getPaintProperty:function(a,b,c){return this.style.getPaintProperty(a,b,c)},setLayoutProperty:function(a,b,c){return this.style.setLayoutProperty(a,b,c),this._update(!0),this},getLayoutProperty:function(a,b){return this.style.getLayoutProperty(a,b)},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas.getElement()},_setupContainer:function(){var a=this._container;a.classList.add("mapboxgl-map");var b=this._canvasContainer=j.create("div","mapboxgl-canvas-container",a);this._interactive&&b.classList.add("mapboxgl-interactive"),this._canvas=new e(this,b);var c=this._controlContainer=j.create("div","mapboxgl-control-container",a),d=this._controlCorners={};
["top-left","top-right","bottom-left","bottom-right"].forEach(function(a){d[a]=j.create("div","mapboxgl-ctrl-"+a,c)})},_setupPainter:function(){var a=this._canvas.getWebGLContext({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer});return a?void(this.painter=new m(a,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},_contextLost:function(a){a.preventDefault(),this._frameId&&g.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:a})},_contextRestored:function(a){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:a})},loaded:function(){return this._styleDirty||this._sourcesDirty?!1:this.style&&this.style.loaded()?!0:!1},_update:function(a){return this.style?(this._styleDirty=this._styleDirty||a,this._sourcesDirty=!0,this._rerender(),this):this},_render:function(){try{this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender()}catch(a){this.fire("error",{error:a})}return this},remove:function(){this._hash&&this._hash.remove(),g.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof h&&h.removeEventListener("resize",this._onWindowResize,!1);var a=this.painter.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),d(this._canvasContainer),d(this._controlContainer),this._container.classList.remove("mapboxgl-map")},_rerender:function(){this.style&&!this._frameId&&(this._frameId=g.frame(this._render))},_forwardStyleEvent:function(a){this.fire("style."+a.type,f.extend({style:a.target},a))},_forwardSourceEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_forwardLayerEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_forwardTileEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_onStyleLoad:function(a){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1}),this._forwardStyleEvent(a)},_onStyleChange:function(a){this._update(!0),this._forwardStyleEvent(a)},_onSourceAdd:function(a){var b=a.source;b.onAdd&&b.onAdd(this),this._forwardSourceEvent(a)},_onSourceRemove:function(a){var b=a.source;b.onRemove&&b.onRemove(this),this._forwardSourceEvent(a)},_onSourceUpdate:function(a){this._update(),this._forwardSourceEvent(a)},_onWindowOnline:function(){this._update()},_onWindowResize:function(){this._trackResize&&this.stop().resize()._update()}}),f.extendAll(y.prototype,{_showTileBoundaries:!1,get showTileBoundaries(){return this._showTileBoundaries},set showTileBoundaries(a){this._showTileBoundaries!==a&&(this._showTileBoundaries=a,this._update())},_showCollisionBoxes:!1,get showCollisionBoxes(){return this._showCollisionBoxes},set showCollisionBoxes(a){this._showCollisionBoxes!==a&&(this._showCollisionBoxes=a,this.style._redoPlacement())},_showOverdrawInspector:!1,get showOverdrawInspector(){return this._showOverdrawInspector},set showOverdrawInspector(a){this._showOverdrawInspector!==a&&(this._showOverdrawInspector=a,this._update())},_repaint:!1,get repaint(){return this._repaint},set repaint(a){this._repaint=a,this._update()},_vertices:!1,get vertices(){return this._vertices},set vertices(a){this._vertices=a,this._update()}})},{"../geo/lng_lat":340,"../geo/lng_lat_bounds":341,"../geo/transform":342,"../render/painter":356,"../style/animation_loop":376,"../style/style":379,"../util/browser":427,"../util/canvas":428,"../util/dom":429,"../util/evented":435,"../util/util":443,"./bind_handlers":408,"./camera":409,"./control/attribution":410,"./hash":421,"point-geometry":485}],423:[function(a,b,c){"use strict";function d(a,b){a||(a=e.create("div")),a.classList.add("mapboxgl-marker"),this._el=a,this._offset=g.convert(b&&b.offset||[0,0]),this._update=this._update.bind(this)}b.exports=d;var e=a("../util/dom"),f=a("../geo/lng_lat"),g=a("point-geometry");d.prototype={addTo:function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._el),a.on("move",this._update),this._update(),this},remove:function(){this._map&&(this._map.off("move",this._update),this._map=null);var a=this._el.parentNode;return a&&a.removeChild(this._el),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=f.convert(a),this._update(),this},getElement:function(){return this._el},_update:function(){if(this._map){var a=this._map.project(this._lngLat)._add(this._offset);e.setTransform(this._el,"translate("+a.x+"px,"+a.y+"px)")}}}},{"../geo/lng_lat":340,"../util/dom":429,"point-geometry":485}],424:[function(a,b,c){"use strict";function d(a){e.setOptions(this,a),e.bindAll(["_update","_onClickClose"],this)}b.exports=d;var e=a("../util/util"),f=a("../util/evented"),g=a("../util/dom"),h=a("../geo/lng_lat");d.prototype=e.inherit(f,{options:{closeButton:!0,closeOnClick:!0},addTo:function(a){return this._map=a,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},remove:function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=h.convert(a),this._update(),this},setText:function(a){return this.setDOMContent(document.createTextNode(a))},setHTML:function(a){var b,c=document.createDocumentFragment(),d=document.createElement("body");for(d.innerHTML=a;;){if(b=d.firstChild,!b)break;c.appendChild(b)}return this.setDOMContent(c)},setDOMContent:function(a){return this._createContent(),this._content.appendChild(a),this._update(),this},_createContent:function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=g.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=g.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},_update:function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=g.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var a=this._map.project(this._lngLat).round(),b=this.options.anchor;if(!b){var c=this._container.offsetWidth,d=this._container.offsetHeight;b=a.y<d?["top"]:a.y>this._map.transform.height-d?["bottom"]:[],a.x<c/2?b.push("left"):a.x>this._map.transform.width-c/2&&b.push("right"),b=0===b.length?"bottom":b.join("-")}var e={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},f=this._container.classList;for(var h in e)f.remove("mapboxgl-popup-anchor-"+h);f.add("mapboxgl-popup-anchor-"+b),g.setTransform(this._container,e[b]+" translate("+a.x+"px,"+a.y+"px)")}},_onClickClose:function(){this.remove()}})},{"../geo/lng_lat":340,"../util/dom":429,"../util/evented":435,"../util/util":443}],425:[function(a,b,c){"use strict";function d(a,b){this.target=a,this.parent=b,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)}b.exports=d,d.prototype.receive=function(a){function b(a,b,c){this.postMessage({type:"<response>",id:String(e),error:a?String(a):null,data:b},c)}var c,d=a.data,e=d.id;if("<response>"===d.type)c=this.callbacks[d.id],delete this.callbacks[d.id],c&&c(d.error||null,d.data);else if("undefined"!=typeof d.id&&this.parent[d.type])this.parent[d.type](d.data,b.bind(this));else if("undefined"!=typeof d.id&&this.parent.workerSources){var f=d.type.split(".");this.parent.workerSources[f[0]][f[1]](d.data,b.bind(this))}else this.parent[d.type](d.data)},d.prototype.send=function(a,b,c,d){var e=null;c&&(this.callbacks[e=this.callbackID++]=c),this.postMessage({type:a,id:String(e),data:b},d)},d.prototype.postMessage=function(a,b){this.target.postMessage(a,b)}},{}],426:[function(a,b,c){"use strict";function d(a){var b=document.createElement("a");return b.href=a,b.protocol===document.location.protocol&&b.host===document.location.host}c.getJSON=function(a,b){var c=new XMLHttpRequest;return c.open("GET",a,!0),c.setRequestHeader("Accept","application/json"),c.onerror=function(a){b(a)},c.onload=function(){if(c.status>=200&&c.status<300&&c.response){var a;try{a=JSON.parse(c.response)}catch(d){return b(d)}b(null,a)}else b(new Error(c.statusText))},c.send(),c},c.getArrayBuffer=function(a,b){var c=new XMLHttpRequest;return c.open("GET",a,!0),c.responseType="arraybuffer",c.onerror=function(a){b(a)},c.onload=function(){c.status>=200&&c.status<300&&c.response?b(null,c.response):b(new Error(c.statusText))},c.send(),c},c.getImage=function(a,b){return c.getArrayBuffer(a,function(a,c){if(a)return b(a);var d=new Image;d.onload=function(){b(null,d),(window.URL||window.webkitURL).revokeObjectURL(d.src)};var e=new Blob([new Uint8Array(c)],{type:"image/png"});return d.src=(window.URL||window.webkitURL).createObjectURL(e),d.getData=function(){var a=document.createElement("canvas"),b=a.getContext("2d");return a.width=d.width,a.height=d.height,b.drawImage(d,0,0),b.getImageData(0,0,d.width,d.height).data},d})},c.getVideo=function(a,b){var c=document.createElement("video");c.onloadstart=function(){b(null,c)};for(var e=0;e<a.length;e++){var f=document.createElement("source");d(a[e])||(c.crossOrigin="Anonymous"),f.src=a[e],c.appendChild(f)}return c.getData=function(){return c},c}},{}],427:[function(a,b,c){"use strict";c.window=window,b.exports.now=function(){return window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date)}();var d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;c.frame=function(a){return d(a)};var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;c.cancelFrame=function(a){e(a)},c.timed=function(a,d,e){function f(i){g||(i=b.exports.now(),i>=h+d?a.call(e,1):(a.call(e,(i-h)/d),c.frame(f)))}if(!d)return a.call(e,1),null;var g=!1,h=b.exports.now();return c.frame(f),function(){g=!0}},c.supported=a("mapbox-gl-supported"),c.hardwareConcurrency=navigator.hardwareConcurrency||4,Object.defineProperty(c,"devicePixelRatio",{get:function(){return window.devicePixelRatio}}),c.supportsWebp=!1;var f=document.createElement("img");f.onload=function(){c.supportsWebp=!0},f.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",c.supportsGeolocation=!!navigator.geolocation},{"mapbox-gl-supported":328}],428:[function(a,b,c){"use strict";function d(a,b){this.canvas=document.createElement("canvas"),a&&b&&(this.canvas.style.position="absolute",this.canvas.classList.add("mapboxgl-canvas"),this.canvas.addEventListener("webglcontextlost",a._contextLost.bind(a),!1),this.canvas.addEventListener("webglcontextrestored",a._contextRestored.bind(a),!1),this.canvas.setAttribute("tabindex",0),b.appendChild(this.canvas))}var e=a("../util"),f=a("mapbox-gl-supported");b.exports=d,d.prototype.resize=function(a,b){var c=window.devicePixelRatio||1;this.canvas.width=c*a,this.canvas.height=c*b,this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"},d.prototype.getWebGLContext=function(a){return a=e.extend({},a,f.webGLContextAttributes),this.canvas.getContext("webgl",a)||this.canvas.getContext("experimental-webgl",a)},d.prototype.getElement=function(){return this.canvas}},{"../util":443,"mapbox-gl-supported":328}],429:[function(a,b,c){"use strict";function d(a){for(var b=0;b<a.length;b++)if(a[b]in h)return a[b]}function e(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",e,!0)}var f=a("point-geometry");c.create=function(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c&&c.appendChild(d),d};var g,h=document.documentElement.style,i=d(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);c.disableDrag=function(){i&&(g=h[i],h[i]="none")},c.enableDrag=function(){i&&(h[i]=g)};var j=d(["transform","WebkitTransform"]);c.setTransform=function(a,b){a.style[j]=b},c.suppressClick=function(){window.addEventListener("click",e,!0),window.setTimeout(function(){window.removeEventListener("click",e,!0)},0)},c.mousePos=function(a,b){var c=a.getBoundingClientRect();return b=b.touches?b.touches[0]:b,new f(b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop)},c.touchPos=function(a,b){for(var c=a.getBoundingClientRect(),d=[],e=0;e<b.touches.length;e++)d.push(new f(b.touches[e].clientX-c.left-a.clientLeft,b.touches[e].clientY-c.top-a.clientTop));return d}},{"point-geometry":485}],430:[function(a,b,c){"use strict";var d=a("webworkify");b.exports=function(){return new d(a("../../source/worker"))}},{"../../source/worker":374,webworkify:573}],431:[function(a,b,c){"use strict";function d(a,b){return b.area-a.area}function e(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;f>e;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var f=a("quickselect");b.exports=function(a,b){var c=a.length;if(1>=c)return[a];for(var g,h,i=[],j=0;c>j;j++){var k=e(a[j]);0!==k&&(a[j].area=Math.abs(k),void 0===h&&(h=0>k),h===0>k?(g&&i.push(g),g=[a[j]]):g.push(a[j]))}if(g&&i.push(g),b>1)for(var l=0;l<i.length;l++)i[l].length<=b||(f(i[l],b,1,i[l].length-1,d),i[l]=i[l].slice(0,b));return i}},{quickselect:502}],432:[function(a,b,c){"use strict";b.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0}},{}],433:[function(a,b,c){"use strict";function d(a){this._stringToNumber={},this._numberToString=[];for(var b=0;b<a.length;b++){var c=a[b];this._stringToNumber[c]=b,this._numberToString[b]=c}}var e=a("assert");b.exports=d,d.prototype.encode=function(a){return e(a in this._stringToNumber),this._stringToNumber[a]},d.prototype.decode=function(a){return e(a<this._numberToString.length),this._numberToString[a]}},{assert:48}],434:[function(a,b,c){"use strict";function d(a,b){this.actors=[],this.currentActor=0;for(var c=0;a>c;c++){var d=new g,e=new f(d,b);e.name="Worker "+c,this.actors.push(e)}}var e=a("./util"),f=a("./actor"),g=a("./web_worker");b.exports=d,d.prototype={broadcast:function(a,b,c){c=c||function(){},e.asyncAll(this.actors,function(c,d){c.send(a,b,d)},c)},send:function(a,b,c,d,e){return("number"!=typeof d||isNaN(d))&&(d=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[d].send(a,b,c,e),d},remove:function(){for(var a=0;a<this.actors.length;a++)this.actors[a].target.terminate();this.actors=[]}}},{"./actor":425,"./util":443,"./web_worker":430}],435:[function(a,b,c){"use strict";var d=a("./util"),e={on:function(a,b){return this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b),this},off:function(a,b){if(!a)return delete this._events,this;if(!this.listens(a))return this;if(b){var c=this._events[a].indexOf(b);c>=0&&this._events[a].splice(c,1),this._events[a].length||delete this._events[a]}else delete this._events[a];return this},once:function(a,b){var c=function(d){this.off(a,c),b.call(this,d)}.bind(this);return this.on(a,c),this},fire:function(a,b){if(!this.listens(a))return d.endsWith(a,"error")&&console.error(b&&b.error||b||"Empty error event"),this;b=d.extend({},b),d.extend(b,{type:a,target:this});for(var c=this._events[a].slice(),e=0;e<c.length;e++)c[e].call(this,b);return this},listens:function(a){return!(!this._events||!this._events[a])}};b.exports=e},{"./util":443}],436:[function(a,b,c){"use strict";function d(a,b){this.stacks=a.readFields(e,[],b)}function e(a,b,c){if(1===a){var d=c.readMessage(f,{glyphs:{}});b.push(d)}}function f(a,b,c){if(1===a)b.name=c.readString();else if(2===a)b.range=c.readString();else if(3===a){var d=c.readMessage(g,{});b.glyphs[d.id]=d}}function g(a,b,c){1===a?b.id=c.readVarint():2===a?b.bitmap=c.readBytes():3===a?b.width=c.readVarint():4===a?b.height=c.readVarint():5===a?b.left=c.readSVarint():6===a?b.top=c.readSVarint():7===a&&(b.advance=c.readVarint())}b.exports=d},{}],437:[function(a,b,c){"use strict";function d(a,b,c){return a*(1-c)+b*c}b.exports=d,d.number=d,d.vec2=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c)]},d.color=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c),d(a[2],b[2],c),d(a[3],b[3],c)]},d.array=function(a,b,c){return a.map(function(a,e){return d(a,b[e],c)})}},{}],438:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++)for(var g=b[f],h=0;h<g.length;h++){var i=g[h];if(n(e,i))return!0;if(k(i,e,c))return!0}return!1}function e(a,b){if(1===a.length&&1===a[0].length)return m(b,a[0][0]);for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)if(m(a,d[e]))return!0;for(var f=0;f<a.length;f++){for(var g=a[f],i=0;i<g.length;i++)if(m(b,g[i]))return!0;for(var j=0;j<b.length;j++)if(h(g,b[j]))return!0}return!1}function f(a,b,c){for(var d=0;d<b.length;d++)for(var e=b[d],f=0;f<a.length;f++){var h=a[f];if(h.length>=3)for(var i=0;i<e.length;i++)if(n(h,e[i]))return!0;if(g(h,e,c))return!0}return!1}function g(a,b,c){if(a.length>1){if(h(a,b))return!0;for(var d=0;d<b.length;d++)if(k(b[d],a,c))return!0}for(var e=0;e<a.length;e++)if(k(a[e],b,c))return!0;return!1}function h(a,b){for(var c=0;c<a.length-1;c++)for(var d=a[c],e=a[c+1],f=0;f<b.length-1;f++){var g=b[f],h=b[f+1];if(j(d,e,g,h))return!0}return!1}function i(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}function j(a,b,c,d){return i(a,c,d)!==i(b,c,d)&&i(a,b,c)!==i(a,b,d)}function k(a,b,c){var d=c*c;if(1===b.length)return a.distSqr(b[0])<d;for(var e=1;e<b.length;e++){var f=b[e-1],g=b[e];if(l(a,f,g)<d)return!0}return!1}function l(a,b,c){var d=b.distSqr(c);if(0===d)return a.distSqr(b);var e=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d;return 0>e?a.distSqr(b):e>1?a.distSqr(c):a.distSqr(c.sub(b)._mult(e)._add(b))}function m(a,b){for(var c,d,e,f=!1,g=0;g<a.length;g++){c=a[g];for(var h=0,i=c.length-1;h<c.length;i=h++)d=c[h],e=c[i],d.y>b.y!=e.y>b.y&&b.x<(e.x-d.x)*(b.y-d.y)/(e.y-d.y)+d.x&&(f=!f)}return f}function n(a,b){for(var c=!1,d=0,e=a.length-1;d<a.length;e=d++){var f=a[d],g=a[e];f.y>b.y!=g.y>b.y&&b.x<(g.x-f.x)*(b.y-f.y)/(g.y-f.y)+f.x&&(c=!c)}return c}b.exports={multiPolygonIntersectsBufferedMultiPoint:d,multiPolygonIntersectsMultiPolygon:e,multiPolygonIntersectsBufferedMultiLine:f}},{}],439:[function(a,b,c){"use strict";function d(a,b){this.max=a,this.onRemove=b,this.reset()}b.exports=d,d.prototype.reset=function(){for(var a in this.data)this.onRemove(this.data[a]);return this.data={},this.order=[],this},d.prototype.add=function(a,b){if(this.has(a))this.order.splice(this.order.indexOf(a),1),this.data[a]=b,this.order.push(a);else if(this.data[a]=b,this.order.push(a),this.order.length>this.max){var c=this.get(this.order[0]);c&&this.onRemove(c)}return this},d.prototype.has=function(a){return a in this.data},d.prototype.keys=function(){return this.order},d.prototype.get=function(a){if(!this.has(a))return null;var b=this.data[a];return delete this.data[a],this.order.splice(this.order.indexOf(a),1),b},d.prototype.setMaxSize=function(a){for(this.max=a;this.order.length>this.max;){var b=this.get(this.order[0]);b&&this.onRemove(b)}return this}},{}],440:[function(a,b,c){"use strict";function d(a,b,c){if(c=c||g.ACCESS_TOKEN,!c&&g.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens");if(a=a.replace(/^mapbox:\/\//,g.API_URL+b),a+=-1!==a.indexOf("?")?"&access_token=":"?access_token=",g.REQUIRE_ACCESS_TOKEN){if("s"===c[0])throw new Error("Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens");a+=c}return a}function e(a){return a?"?"+a:""}function f(a){return a.access_token&&"tk."===a.access_token.slice(0,3)?j.extend({},a,{access_token:g.ACCESS_TOKEN}):a}var g=a("./config"),h=a("./browser"),i=a("url"),j=a("./util");b.exports.normalizeStyleURL=function(a,b){var c=i.parse(a);return"mapbox:"!==c.protocol?a:d("mapbox:/"+c.pathname+e(c.query),"/styles/v1/",b)},b.exports.normalizeSourceURL=function(a,b){var c=i.parse(a);return"mapbox:"!==c.protocol?a:d(a+".json","/v4/",b)+"&secure"},b.exports.normalizeGlyphsURL=function(a,b){var c=i.parse(a);if("mapbox:"!==c.protocol)return a;var f=c.pathname.split("/")[1];return d("mapbox://"+f+"/{fontstack}/{range}.pbf"+e(c.query),"/fonts/v1/",b)},b.exports.normalizeSpriteURL=function(a,b,c,f){var g=i.parse(a);return"mapbox:"!==g.protocol?(g.pathname+=b+c,i.format(g)):d("mapbox:/"+g.pathname+"/sprite"+b+c+e(g.query),"/styles/v1/",f)},b.exports.normalizeTileURL=function(a,b,c){var d=i.parse(a,!0);if(!b)return a;var e=i.parse(b);if("mapbox:"!==e.protocol)return a;var g=h.supportsWebp?".webp":"$1",j=h.devicePixelRatio>=2||512===c?"@2x":"";return i.format({protocol:d.protocol,hostname:d.hostname,pathname:d.pathname.replace(/(\.(?:png|jpg)\d*)/,j+g),query:f(d.query)})}},{"./browser":427,"./config":432,"./util":443,url:554}],441:[function(a,b,c){"use strict";function d(a){function b(){m.apply(this,arguments)}function c(){n.apply(this,arguments),this.members=b.prototype.members}var d=JSON.stringify(a);if(q[d])return q[d];void 0===a.alignment&&(a.alignment=1),b.prototype=Object.create(m.prototype);var h=0,j=0,r=["Uint8"];return b.prototype.members=a.members.map(function(c){c={name:c.name,type:c.type,components:c.components||1},o(c.name.length),o(c.type in p),r.indexOf(c.type)<0&&r.push(c.type);var d=g(c.type);j=Math.max(j,d),c.offset=h=f(h,Math.max(a.alignment,d));for(var e=0;e<c.components;e++)Object.defineProperty(b.prototype,c.name+(1===c.components?"":e),{get:k(c,e),set:l(c,e)});return h+=d*c.components,c}),b.prototype.alignment=a.alignment,b.prototype.size=f(h,Math.max(j,a.alignment)),c.serialize=e,c.prototype=Object.create(n.prototype),c.prototype.StructType=b,c.prototype.bytesPerElement=b.prototype.size,c.prototype.emplaceBack=i(b.prototype.members,b.prototype.size),c.prototype._usedTypes=r,q[d]=c,c}function e(){return{members:this.prototype.StructType.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}}function f(a,b){return Math.ceil(a/b)*b}function g(a){return p[a].BYTES_PER_ELEMENT}function h(a){return a.toLowerCase()}function i(a,b){for(var c=[],d=[],e="var i = this.length;\nthis.resize(this.length + 1);\n",f=0;f<a.length;f++){var i=a[f],j=g(i.type);c.indexOf(j)<0&&(c.push(j),e+="var o"+j.toFixed(0)+" = i * "+(b/j).toFixed(0)+";\n");for(var k=0;k<i.components;k++){var l="v"+d.length,m="o"+j.toFixed(0)+" + "+(i.offset/j+k).toFixed(0);e+="this."+h(i.type)+"["+m+"] = "+l+";\n",d.push(l)}}return e+="return i;",new Function(d,e)}function j(a,b){var c="this._pos"+g(a.type).toFixed(0),d=(a.offset/g(a.type)+b).toFixed(0),e=c+" + "+d;return"this._structArray."+h(a.type)+"["+e+"]"}function k(a,b){return new Function([],"return "+j(a,b)+";")}function l(a,b){return new Function(["x"],j(a,b)+" = x;")}function m(a,b){this._structArray=a,this._pos1=b*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function n(a){void 0!==a?(this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))}var o=a("assert");b.exports=d;var p={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},q={};n.prototype.DEFAULT_CAPACITY=128,n.prototype.RESIZE_MULTIPLIER=5,n.prototype.serialize=function(){return this.trim(),{length:this.length,arrayBuffer:this.arrayBuffer}},n.prototype.get=function(a){return new this.StructType(this,a)},n.prototype.trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},n.prototype.resize=function(a){if(this.length=a,a>this.capacity){this.capacity=Math.max(a,Math.floor(this.capacity*this.RESIZE_MULTIPLIER),this.DEFAULT_CAPACITY),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var b=this.uint8;this._refreshViews(),b&&this.uint8.set(b)}},n.prototype._refreshViews=function(){for(var a=0;a<this._usedTypes.length;a++){var b=this._usedTypes[a];this[h(b)]=new p[b](this.arrayBuffer)}},n.prototype.toArray=function(a,b){for(var c=[],d=a;b>d;d++){var e=this.get(d);c.push(e)}return c}},{assert:48}],442:[function(a,b,c){"use strict";function d(a,b){return b.replace(/{([^{}]+)}/g,function(b,c){return c in a?a[c]:""})}b.exports=d},{}],443:[function(a,b,c){"use strict";var d=a("unitbezier"),e=a("../geo/coordinate");c.easeCubicInOut=function(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)},c.bezier=function(a,b,c,e){var f=new d(a,b,c,e);return function(a){return f.solve(a)}},c.ease=c.bezier(.25,.1,.25,1),c.clamp=function(a,b,c){return Math.min(c,Math.max(b,a))},c.wrap=function(a,b,c){var d=c-b,e=((a-b)%d+d)%d+b;return e===b?c:e},c.coalesce=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(null!==b&&void 0!==b)return b}},c.asyncAll=function(a,b,c){if(!a.length)return c(null,[]);var d=a.length,e=new Array(a.length),f=null;a.forEach(function(a,g){b(a,function(a,b){a&&(f=a),e[g]=b,0===--d&&c(f,e)})})},c.keysDifference=function(a,b){var c=[];for(var d in a)d in b||c.push(d);return c},c.extend=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},c.extendAll=function(a,b){for(var c in b)Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c));return a},c.inherit=function(a,b){var d="function"==typeof a?a.prototype:a,e=Object.create(d);return c.extendAll(e,b),e},c.pick=function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d];e in a&&(c[e]=a[e])}return c};var f=1;c.uniqueId=function(){return f++},c.debounce=function(a,b){var c,d;return function(){d=arguments,clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},c.bindAll=function(a,b){a.forEach(function(a){b[a]&&(b[a]=b[a].bind(b))})},c.bindHandlers=function(a){for(var b in a)"function"==typeof a[b]&&0===b.indexOf("_on")&&(a[b]=a[b].bind(a))},c.setOptions=function(a,b){a.hasOwnProperty("options")||(a.options=a.options?Object.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},c.getCoordinatesCenter=function(a){for(var b=1/0,c=1/0,d=-(1/0),f=-(1/0),g=0;g<a.length;g++)b=Math.min(b,a[g].column),c=Math.min(c,a[g].row),d=Math.max(d,a[g].column),f=Math.max(f,a[g].row);var h=d-b,i=f-c,j=Math.max(h,i);return new e((b+d)/2,(c+f)/2,0).zoomTo(Math.floor(-Math.log(j)/Math.LN2))},c.endsWith=function(a,b){return-1!==a.indexOf(b,a.length-b.length)},c.startsWith=function(a,b){return 0===a.indexOf(b)},c.mapObject=function(a,b,c){var d={};for(var e in a)d[e]=b.call(c||this,a[e],e,a);return d},c.filterObject=function(a,b,c){var d={};for(var e in a)b.call(c||this,a[e],e,a)&&(d[e]=a[e]);return d},c.deepEqual=function h(a,b){if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!h(a[c],b[c]))return!1;return!0}if("object"==typeof a&&null!==a&&null!==b){if("object"!=typeof b)return!1;var d=Object.keys(a);if(d.length!==Object.keys(b).length)return!1;for(var e in a)if(!h(a[e],b[e]))return!1;return!0}return a===b},c.clone=function(a){return Array.isArray(a)?a.map(c.clone):"object"==typeof a?c.mapObject(a,c.clone):a},c.arraysIntersect=function(a,b){for(var c=0;c<a.length;c++)if(b.indexOf(a[c])>=0)return!0;return!1};var g={};c.warnOnce=function(a){g[a]||("undefined"!=typeof console&&console.warn(a),g[a]=!0)}},{"../geo/coordinate":339,unitbezier:553}],444:[function(a,b,c){"use strict";function d(a,b,c,d){this._vectorTileFeature=a,a._z=b,a._x=c,a._y=d,this.properties=a.properties,null!=a.id&&(this.id=a.id)}b.exports=d,d.prototype={type:"Feature",get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set geometry(a){this._geometry=a},toJSON:function(){var a={};for(var b in this)"_geometry"!==b&&"_vectorTileFeature"!==b&&"toJSON"!==b&&(a[b]=this[b]);return a}}},{}],445:[function(a,b,c){b.exports={_args:[[{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},"/home/etienne/Documents/plotly/plotly.js"]],_from:"mapbox-gl@>=0.22.0 <0.23.0",_id:"mapbox-gl@0.22.1",_inCache:!0,_location:"/mapbox-gl",_nodeVersion:"4.4.5",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/mapbox-gl-0.22.1.tgz_1471549891670_0.8762630566488951"},_npmUser:{name:"lucaswoj",email:"lucas@lucaswoj.com"},_npmVersion:"2.15.5",_phantomChildren:{},_requested:{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz",_shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",_shrinkwrap:null,_spec:"mapbox-gl@^0.22.0",_where:"/home/etienne/Documents/plotly/plotly.js",browser:{"./js/util/ajax.js":"./js/util/browser/ajax.js","./js/util/browser.js":"./js/util/browser/browser.js","./js/util/canvas.js":"./js/util/browser/canvas.js","./js/util/dom.js":"./js/util/browser/dom.js","./js/util/web_worker.js":"./js/util/browser/web_worker.js"},bugs:{url:"https://github.com/mapbox/mapbox-gl-js/issues"},dependencies:{csscolorparser:"^1.0.2",earcut:"^2.0.3","feature-filter":"^2.2.0","geojson-rewind":"^0.1.0","geojson-vt":"^2.4.0","gl-matrix":"^2.3.1","grid-index":"^1.0.0","mapbox-gl-function":"^1.2.1","mapbox-gl-shaders":"github:mapbox/mapbox-gl-shaders#de2ab007455aa2587c552694c68583f94c9f2747","mapbox-gl-style-spec":"github:mapbox/mapbox-gl-style-spec#83b1a3e5837d785af582efd5ed1a212f2df6a4ae","mapbox-gl-supported":"^1.2.0",pbf:"^1.3.2",pngjs:"^2.2.0","point-geometry":"^0.0.0",quickselect:"^1.0.0",request:"^2.39.0","resolve-url":"^0.2.1","shelf-pack":"^1.0.0",supercluster:"^2.0.1",unassertify:"^2.0.0",unitbezier:"^0.0.0","vector-tile":"^1.3.0","vt-pbf":"^2.0.2",webworkify:"^1.3.0","whoots-js":"^2.0.0"},description:"A WebGL interactive maps library",devDependencies:{"babel-preset-react":"^6.11.1",babelify:"^7.3.0",benchmark:"~2.1.0",browserify:"^13.0.0",clipboard:"^1.5.12","concat-stream":"1.5.1",coveralls:"^2.11.8",doctrine:"^1.2.1",documentation:"https://github.com/documentationjs/documentation/archive/bb41619c734e59ef3fbc3648610032efcfdaaace.tar.gz","documentation-theme-utils":"3.0.0",envify:"^3.4.0",eslint:"^2.5.3","eslint-config-mourner":"^2.0.0","eslint-plugin-html":"^1.5.1",gl:"^4.0.1",handlebars:"4.0.5","highlight.js":"9.3.0",istanbul:"^0.4.2","json-loader":"^0.5.4",lodash:"^4.13.1","mapbox-gl-test-suite":"github:mapbox/mapbox-gl-test-suite#7babab52fb02788ebbc38384139bf350e8e38552","memory-fs":"^0.3.0",minifyify:"^7.0.1","npm-run-all":"^3.0.0",nyc:"6.4.0",
proxyquire:"^1.7.9",remark:"4.2.2","remark-html":"3.0.0",sinon:"^1.15.4",st:"^1.2.0",tap:"^5.7.0","transform-loader":"^0.2.3","unist-util-visit":"1.1.0",vinyl:"1.1.1","vinyl-fs":"2.4.3",watchify:"^3.7.0",webpack:"^1.13.1","webworkify-webpack":"^1.1.3"},directories:{},dist:{shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",tarball:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz"},engines:{node:">=4.0.0"},gitHead:"13a9015341f0602ccb55c98c53079838ad4b70b5",homepage:"https://github.com/mapbox/mapbox-gl-js#readme",license:"BSD-3-Clause",main:"js/mapbox-gl.js",maintainers:[{name:"aaronlidman",email:"aaronlidman@gmail.com"},{name:"ajashton",email:"aj.ashton@gmail.com"},{name:"ansis",email:"ansis.brammanis@gmail.com"},{name:"bergwerkgis",email:"wb@bergwerk-gis.at"},{name:"bhousel",email:"bryan@mapbox.com"},{name:"bsudekum",email:"bobby@mapbox.com"},{name:"camilleanne",email:"camille@mapbox.com"},{name:"dnomadb",email:"damon@mapbox.com"},{name:"dthompson",email:"dthompson@gmail.com"},{name:"emilymcafee",email:"emily@mapbox.com"},{name:"flippmoke",email:"flippmoke@gmail.com"},{name:"freenerd",email:"spam@freenerd.de"},{name:"gretacb",email:"carol@mapbox.com"},{name:"ian29",email:"ian.villeda@gmail.com"},{name:"ianshward",email:"ian@mapbox.com"},{name:"ingalls",email:"nicholas.ingalls@gmail.com"},{name:"jfirebaugh",email:"john.firebaugh@gmail.com"},{name:"jrpruit1",email:"jake@jakepruitt.com"},{name:"karenzshea",email:"karen@mapbox.com"},{name:"kkaefer",email:"kkaefer@gmail.com"},{name:"lbud",email:"lauren@mapbox.com"},{name:"lucaswoj",email:"lucas@lucaswoj.com"},{name:"lxbarth",email:"alex@mapbox.com"},{name:"lyzidiamond",email:"lyzi@mapbox.com"},{name:"mapbox-admin",email:"accounts@mapbox.com"},{name:"mateov",email:"matt@mapbox.com"},{name:"mcwhittemore",email:"mcwhittemore@gmail.com"},{name:"miccolis",email:"jeff@miccolis.net"},{name:"mikemorris",email:"michael.patrick.morris@gmail.com"},{name:"morganherlocker",email:"morgan.herlocker@gmail.com"},{name:"mourner",email:"agafonkin@gmail.com"},{name:"nickidlugash",email:"nicki@mapbox.com"},{name:"rclark",email:"ryan.clark.j@gmail.com"},{name:"samanbb",email:"saman@mapbox.com"},{name:"sbma44",email:"tlee@mapbox.com"},{name:"scothis",email:"scothis@gmail.com"},{name:"sgillies",email:"sean@mapbox.com"},{name:"springmeyer",email:"dane@mapbox.com"},{name:"themarex",email:"patrick@mapbox.com"},{name:"tmcw",email:"tom@macwright.org"},{name:"tristen",email:"tristen.brown@gmail.com"},{name:"willwhite",email:"will@mapbox.com"},{name:"yhahn",email:"young@mapbox.com"}],name:"mapbox-gl",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/mapbox/mapbox-gl-js.git"},scripts:{build:"npm run build-docs # invoked by publisher when publishing docs on the mb-pages branch","build-dev":"browserify js/mapbox-gl.js --debug --standalone mapboxgl > dist/mapbox-gl-dev.js && tap --no-coverage test/build/dev.test.js","build-docs":"documentation build --github --format html -c documentation.yml --theme ./docs/_theme --output docs/api/","build-min":"browserify js/mapbox-gl.js --debug -t unassertify --plugin [minifyify --map mapbox-gl.js.map --output dist/mapbox-gl.js.map] --standalone mapboxgl > dist/mapbox-gl.js && tap --no-coverage test/build/min.test.js","build-token":"browserify debug/access-token-src.js --debug -t envify > debug/access-token.js",lint:"eslint  --ignore-path .gitignore js test bench docs/_posts/examples/*.html","open-changed-examples":"git diff --name-only mb-pages HEAD -- docs/_posts/examples/*.html | awk '{print \"http://127.0.0.1:4000/mapbox-gl-js/example/\" substr($0,33,length($0)-37)}' | xargs open",start:"run-p build-token watch-dev watch-bench start-server","start-bench":"run-p build-token watch-bench start-server","start-debug":"run-p build-token watch-dev start-server","start-docs":"npm run build-min && npm run build-docs && jekyll serve -w","start-server":"st --no-cache --localhost --port 9966 --index index.html .",test:"npm run lint && tap --reporter dot test/js/*/*.js test/build/webpack.test.js","test-suite":"node test/render.test.js && node test/query.test.js","watch-bench":"node bench/download-data.js && watchify bench/index.js --plugin [minifyify --no-map] -t [babelify --presets react] -t unassertify -t envify -o bench/bench.js -v","watch-dev":"watchify js/mapbox-gl.js --debug --standalone mapboxgl -o dist/mapbox-gl-dev.js -v"},version:"0.22.1"}},{}],446:[function(a,b,c){"use strict";function d(a,b,c){for(var d=new Array(a),e=0;a>e;++e)d[e]=0,e===b&&(d[e]+=.5),e===c&&(d[e]+=.5);return d}function e(a,b){if(0===b||b===(1<<a+1)-1)return[];for(var c=[],e=[],f=0;a>=f;++f)if(b&1<<f){c.push(d(a,f-1,f-1)),e.push(null);for(var h=0;a>=h;++h)~b&1<<h&&(c.push(d(a,f-1,h-1)),e.push([f,h]))}var i=g(c),j=[];a:for(var f=0;f<i.length;++f){for(var k=i[f],l=[],h=0;h<k.length;++h){if(!e[k[h]])continue a;l.push(e[k[h]].slice())}j.push(l)}return j}function f(a){for(var b=1<<a+1,c=new Array(b),d=0;b>d;++d)c[d]=e(a,d);return c}b.exports=f;var g=a("convex-hull")},{"convex-hull":104}],447:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}function e(a,b){a[0][0]=b[0],a[0][1]=b[1],a[0][2]=b[2],a[1][0]=b[4],a[1][1]=b[5],a[1][2]=b[6],a[2][0]=b[8],a[2][1]=b[9],a[2][2]=b[10]}function f(a,b,c,d,e){a[0]=b[0]*d+c[0]*e,a[1]=b[1]*d+c[1]*e,a[2]=b[2]*d+c[2]*e}var g=a("./normalize"),h=a("gl-mat4/create"),i=a("gl-mat4/clone"),j=a("gl-mat4/determinant"),k=a("gl-mat4/invert"),l=a("gl-mat4/transpose"),m={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},n=h(),o=h(),p=[0,0,0,0],q=[[0,0,0],[0,0,0],[0,0,0]],r=[0,0,0];b.exports=function(a,b,c,h,s,t){if(b||(b=[0,0,0]),c||(c=[0,0,0]),h||(h=[0,0,0]),s||(s=[0,0,0,1]),t||(t=[0,0,0,1]),!g(n,a))return!1;if(i(o,n),o[3]=0,o[7]=0,o[11]=0,o[15]=1,Math.abs(j(o)<1e-8))return!1;var u=n[3],v=n[7],w=n[11],x=n[12],y=n[13],z=n[14],A=n[15];if(0!==u||0!==v||0!==w){p[0]=u,p[1]=v,p[2]=w,p[3]=A;var B=k(o,o);if(!B)return!1;l(o,o),d(s,p,o)}else s[0]=s[1]=s[2]=0,s[3]=1;if(b[0]=x,b[1]=y,b[2]=z,e(q,n),c[0]=m.length(q[0]),m.normalize(q[0],q[0]),h[0]=m.dot(q[0],q[1]),f(q[1],q[1],q[0],1,-h[0]),c[1]=m.length(q[1]),m.normalize(q[1],q[1]),h[0]/=c[1],h[1]=m.dot(q[0],q[2]),f(q[2],q[2],q[0],1,-h[1]),h[2]=m.dot(q[1],q[2]),f(q[2],q[2],q[1],1,-h[2]),c[2]=m.length(q[2]),m.normalize(q[2],q[2]),h[1]/=c[2],h[2]/=c[2],m.cross(r,q[1],q[2]),m.dot(q[0],r)<0)for(var C=0;3>C;C++)c[C]*=-1,q[C][0]*=-1,q[C][1]*=-1,q[C][2]*=-1;return t[0]=.5*Math.sqrt(Math.max(1+q[0][0]-q[1][1]-q[2][2],0)),t[1]=.5*Math.sqrt(Math.max(1-q[0][0]+q[1][1]-q[2][2],0)),t[2]=.5*Math.sqrt(Math.max(1-q[0][0]-q[1][1]+q[2][2],0)),t[3]=.5*Math.sqrt(Math.max(1+q[0][0]+q[1][1]+q[2][2],0)),q[2][1]>q[1][2]&&(t[0]=-t[0]),q[0][2]>q[2][0]&&(t[1]=-t[1]),q[1][0]>q[0][1]&&(t[2]=-t[2]),!0}},{"./normalize":448,"gl-mat4/clone":176,"gl-mat4/create":177,"gl-mat4/determinant":178,"gl-mat4/invert":182,"gl-mat4/transpose":192,"gl-vec3/cross":273,"gl-vec3/dot":274,"gl-vec3/length":275,"gl-vec3/normalize":277}],448:[function(a,b,c){b.exports=function(a,b){var c=b[15];if(0===c)return!1;for(var d=1/c,e=0;16>e;e++)a[e]=b[e]*d;return!0}},{}],449:[function(a,b,c){function d(a,b,c,d){if(0===k(b)||0===k(c))return!1;var e=j(b,m.translate,m.scale,m.skew,m.perspective,m.quaternion),f=j(c,n.translate,n.scale,n.skew,n.perspective,n.quaternion);return e&&f?(h(o.translate,m.translate,n.translate,d),h(o.skew,m.skew,n.skew,d),h(o.scale,m.scale,n.scale,d),h(o.perspective,m.perspective,n.perspective,d),l(o.quaternion,m.quaternion,n.quaternion,d),i(a,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0):!1}function e(){return{translate:f(),scale:f(1),skew:f(),perspective:g(),quaternion:g()}}function f(a){return[a||0,a||0,a||0]}function g(){return[0,0,0,1]}var h=a("gl-vec3/lerp"),i=a("mat4-recompose"),j=a("mat4-decompose"),k=a("gl-mat4/determinant"),l=a("quat-slerp"),m=e(),n=e(),o=e();b.exports=d},{"gl-mat4/determinant":178,"gl-vec3/lerp":276,"mat4-decompose":447,"mat4-recompose":450,"quat-slerp":498}],450:[function(a,b,c){var d={identity:a("gl-mat4/identity"),translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")},e=(d.create(),d.create());b.exports=function(a,b,c,f,g,h){return d.identity(a),d.fromRotationTranslation(a,h,b),a[3]=g[0],a[7]=g[1],a[11]=g[2],a[15]=g[3],d.identity(e),0!==f[2]&&(e[9]=f[2],d.multiply(a,a,e)),0!==f[1]&&(e[9]=0,e[8]=f[1],d.multiply(a,a,e)),0!==f[0]&&(e[8]=0,e[4]=f[0],d.multiply(a,a,e)),d.scale(a,a,c),a}},{"gl-mat4/create":177,"gl-mat4/fromRotationTranslation":180,"gl-mat4/identity":181,"gl-mat4/multiply":184,"gl-mat4/scale":190,"gl-mat4/translate":191}],451:[function(a,b,c){"use strict";function d(a){this._components=a.slice(),this._time=[0],this.prevMatrix=a.slice(),this.nextMatrix=a.slice(),this.computedMatrix=a.slice(),this.computedInverse=a.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-(1/0),1/0]}function e(a){a=a||{};var b=a.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(b)}var f=a("binary-search-bounds"),g=a("mat4-interpolate"),h=a("gl-mat4/invert"),i=a("gl-mat4/rotateX"),j=a("gl-mat4/rotateY"),k=a("gl-mat4/rotateZ"),l=a("gl-mat4/lookAt"),m=a("gl-mat4/translate"),n=(a("gl-mat4/scale"),a("gl-vec3/normalize")),o=[0,0,0];b.exports=e;var p=d.prototype;p.recalcMatrix=function(a){var b=this._time,c=f.le(b,a),d=this.computedMatrix;if(!(0>c)){var e=this._components;if(c===b.length-1)for(var i=16*c,j=0;16>j;++j)d[j]=e[i++];else{for(var k=b[c+1]-b[c],i=16*c,l=this.prevMatrix,m=!0,j=0;16>j;++j)l[j]=e[i++];for(var o=this.nextMatrix,j=0;16>j;++j)o[j]=e[i++],m=m&&l[j]===o[j];if(1e-6>k||m)for(var j=0;16>j;++j)d[j]=l[j];else g(d,l,o,(a-b[c])/k)}var p=this.computedUp;p[0]=d[1],p[1]=d[5],p[2]=d[9],n(p,p);var q=this.computedInverse;h(q,d);var r=this.computedEye,s=q[15];r[0]=q[12]/s,r[1]=q[13]/s,r[2]=q[14]/s;for(var t=this.computedCenter,u=Math.exp(this.computedRadius[0]),j=0;3>j;++j)t[j]=r[j]-d[2+4*j]*u}},p.idle=function(a){if(!(a<this.lastT())){for(var b=this._components,c=b.length-16,d=0;16>d;++d)b.push(b[c++]);this._time.push(a)}},p.flush=function(a){var b=f.gt(this._time,a)-2;0>b||(this._time.splice(0,b),this._components.splice(0,16*b))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(a,b,c,d){this.recalcMatrix(a),b=b||this.computedEye,c=c||o,d=d||this.computedUp,this.setMatrix(a,l(this.computedMatrix,b,c,d));for(var e=0,f=0;3>f;++f)e+=Math.pow(c[f]-b[f],2);e=Math.log(Math.sqrt(e)),this.computedRadius[0]=e},p.rotate=function(a,b,c,d){this.recalcMatrix(a);var e=this.computedInverse;b&&j(e,e,b),c&&i(e,e,c),d&&k(e,e,d),this.setMatrix(a,h(this.computedMatrix,e))};var q=[0,0,0];p.pan=function(a,b,c,d){q[0]=-(b||0),q[1]=-(c||0),q[2]=-(d||0),this.recalcMatrix(a);var e=this.computedInverse;m(e,e,q),this.setMatrix(a,h(e,e))},p.translate=function(a,b,c,d){q[0]=b||0,q[1]=c||0,q[2]=d||0,this.recalcMatrix(a);var e=this.computedMatrix;m(e,e,q),this.setMatrix(a,e)},p.setMatrix=function(a,b){if(!(a<this.lastT())){this._time.push(a);for(var c=0;16>c;++c)this._components.push(b[c])}},p.setDistance=function(a,b){this.computedRadius[0]=b},p.setDistanceLimits=function(a,b){var c=this._limits;c[0]=a,c[1]=b},p.getDistanceLimits=function(a){var b=this._limits;return a?(a[0]=b[0],a[1]=b[1],a):b}},{"binary-search-bounds":67,"gl-mat4/invert":182,"gl-mat4/lookAt":183,"gl-mat4/rotateX":187,"gl-mat4/rotateY":188,"gl-mat4/rotateZ":189,"gl-mat4/scale":190,"gl-mat4/translate":191,"gl-vec3/normalize":277,"mat4-interpolate":449}],452:[function(a,b,c){"use strict";function d(a){var b=a.length;if(3>b){for(var c=new Array(b),d=0;b>d;++d)c[d]=d;return 2===b&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:c}for(var f=new Array(b),d=0;b>d;++d)f[d]=d;f.sort(function(b,c){var d=a[b][0]-a[c][0];return d?d:a[b][1]-a[c][1]});for(var g=[f[0],f[1]],h=[f[0],f[1]],d=2;b>d;++d){for(var i=f[d],j=a[i],k=g.length;k>1&&e(a[g[k-2]],a[g[k-1]],j)<=0;)k-=1,g.pop();for(g.push(i),k=h.length;k>1&&e(a[h[k-2]],a[h[k-1]],j)>=0;)k-=1,h.pop();h.push(i)}for(var c=new Array(h.length+g.length-2),l=0,d=0,m=g.length;m>d;++d)c[l++]=g[d];for(var n=h.length-2;n>0;--n)c[l++]=h[n];return c}b.exports=d;var e=a("robust-orientation")[3]},{"robust-orientation":517}],453:[function(a,b,c){"use strict";function d(a,b){function c(a){var b=!1;return"altKey"in a&&(b=b||a.altKey!==q.alt,q.alt=!!a.altKey),"shiftKey"in a&&(b=b||a.shiftKey!==q.shift,q.shift=!!a.shiftKey),"ctrlKey"in a&&(b=b||a.ctrlKey!==q.control,q.control=!!a.ctrlKey),"metaKey"in a&&(b=b||a.metaKey!==q.meta,q.meta=!!a.metaKey),b}function d(a,d){var f=e.x(d),g=e.y(d);"buttons"in d&&(a=0|d.buttons),(a!==n||f!==o||g!==p||c(d))&&(n=0|a,o=f||0,p=g||0,b&&b(n,o,p,q))}function f(a){d(0,a)}function g(){(n||o||p||q.shift||q.alt||q.meta||q.control)&&(o=p=0,n=0,q.shift=q.alt=q.control=q.meta=!1,b&&b(0,0,0,q))}function h(a){c(a)&&b&&b(n,o,p,q)}function i(a){0===e.buttons(a)?d(0,a):d(n,a)}function j(a){d(n|e.buttons(a),a)}function k(a){d(n&~e.buttons(a),a)}function l(){r||(r=!0,a.addEventListener("mousemove",i),a.addEventListener("mousedown",j),a.addEventListener("mouseup",k),a.addEventListener("mouseleave",f),a.addEventListener("mouseenter",f),a.addEventListener("mouseout",f),a.addEventListener("mouseover",f),a.addEventListener("blur",g),a.addEventListener("keyup",h),a.addEventListener("keydown",h),a.addEventListener("keypress",h),a!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}function m(){r&&(r=!1,a.removeEventListener("mousemove",i),a.removeEventListener("mousedown",j),a.removeEventListener("mouseup",k),a.removeEventListener("mouseleave",f),a.removeEventListener("mouseenter",f),a.removeEventListener("mouseout",f),a.removeEventListener("mouseover",f),a.removeEventListener("blur",g),a.removeEventListener("keyup",h),a.removeEventListener("keydown",h),a.removeEventListener("keypress",h),a!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}b||(b=a,a=window);var n=0,o=0,p=0,q={shift:!1,alt:!1,control:!1,meta:!1},r=!1;l();var s={element:a};return Object.defineProperties(s,{enabled:{get:function(){return r},set:function(a){a?l():m()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return q},enumerable:!0}}),s}b.exports=d;var e=a("mouse-event")},{"mouse-event":455}],454:[function(a,b,c){function d(a,b,c){b=b||a.currentTarget||a.srcElement,Array.isArray(c)||(c=[0,0]);var d=a.clientX||0,f=a.clientY||0,g=e(b);return c[0]=d-g.left,c[1]=f-g.top,c}function e(a){return a===window||a===document||a===document.body?f:a.getBoundingClientRect()}var f={left:0,top:0};b.exports=d},{}],455:[function(a,b,c){"use strict";function d(a){if("object"==typeof a){if("buttons"in a)return a.buttons;if("which"in a){var b=a.which;if(2===b)return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in a){var b=a.button;if(1===b)return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0}function e(a){return a.target||a.srcElement||window}function f(a){if("object"==typeof a){if("offsetX"in a)return a.offsetX;var b=e(a),c=b.getBoundingClientRect();return a.clientX-c.left}return 0}function g(a){if("object"==typeof a){if("offsetY"in a)return a.offsetY;var b=e(a),c=b.getBoundingClientRect();return a.clientY-c.top}return 0}c.buttons=d,c.element=e,c.x=f,c.y=g},{}],456:[function(a,b,c){"use strict";function d(a,b,c){"function"==typeof a&&(c=!!b,b=a,a=window);var d=e("ex",a),f=function(a){c&&a.preventDefault();var e=a.deltaX||0,f=a.deltaY||0,g=a.deltaZ||0,h=a.deltaMode,i=1;switch(h){case 1:i=d;break;case 2:i=window.innerHeight}return e*=i,f*=i,g*=i,e||f||g?b(e,f,g,a):void 0};return a.addEventListener("wheel",f),f}var e=a("to-px");b.exports=d},{"to-px":544}],457:[function(a,b,c){"use strict";function d(a){return"a"+a}function e(a){return"d"+a}function f(a,b){return"c"+a+"_"+b}function g(a){return"s"+a}function h(a,b){return"t"+a+"_"+b}function i(a){return"o"+a}function j(a){return"x"+a}function k(a){return"p"+a}function l(a,b){return"d"+a+"_"+b}function m(a){return"i"+a}function n(a,b){return"u"+a+"_"+b}function o(a){return"b"+a}function p(a){return"y"+a}function q(a){return"e"+a}function r(a){return"v"+a}function s(a,b,c){for(var d=0,e=0;a>e;++e)b&1<<e&&(d|=1<<c[e]);return d}function t(a,b,c,t,u,C){function D(a,b){M.push("for(",m(u[a]),"=",b,";",m(u[a]),"<",g(u[a]),";","++",m(u[a]),"){")}function E(a){for(var b=0;J>b;++b)M.push(k(b),"+=",n(b,u[a]),";");M.push("}")}function F(a){for(var b=a-1;b>=0;--b)D(b,0);for(var c=[],b=0;J>b;++b)C[b]?c.push(e(b)+".get("+k(b)+")"):c.push(e(b)+"["+k(b)+"]");for(var b=0;t>b;++b)c.push(j(b));M.push(x,"[",A,"++]=phase(",c.join(),");");for(var b=0;a>b;++b)E(b);for(var d=0;J>d;++d)M.push(k(d),"+=",n(d,u[a]),";")}function G(a){for(var b=0;J>b;++b)C[b]?M.push(f(b,0),"=",e(b),".get(",k(b),");"):M.push(f(b,0),"=",e(b),"[",k(b),"];");for(var c=[],b=0;J>b;++b)c.push(f(b,0));for(var b=0;t>b;++b)c.push(j(b));M.push(o(0),"=",x,"[",A,"]=phase(",c.join(),");");for(var d=1;1<<K>d;++d)M.push(o(d),"=",x,"[",A,"+",q(d),"];");for(var g=[],d=1;1<<K>d;++d)g.push("("+o(0)+"!=="+o(d)+")");M.push("if(",g.join("||"),"){");for(var h=[],b=0;K>b;++b)h.push(m(b));for(var b=0;J>b;++b){h.push(f(b,0));for(var d=1;1<<K>d;++d)C[b]?M.push(f(b,d),"=",e(b),".get(",k(b),"+",l(b,d),");"):M.push(f(b,d),"=",e(b),"[",k(b),"+",l(b,d),"];"),h.push(f(b,d))}for(var b=0;1<<K>b;++b)h.push(o(b));for(var b=0;t>b;++b)h.push(j(b));M.push("vertex(",h.join(),");",r(0),"=",w,"[",A,"]=",y,"++;");for(var i=(1<<K)-1,n=o(i),d=0;K>d;++d)if(0===(a&~(1<<d))){for(var p=i^1<<d,s=o(p),u=[],v=p;v>0;v=v-1&p)u.push(w+"["+A+"+"+q(v)+"]");u.push(r(0));for(var v=0;J>v;++v)1&d?u.push(f(v,i),f(v,p)):u.push(f(v,p),f(v,i));1&d?u.push(n,s):u.push(s,n);for(var v=0;t>v;++v)u.push(j(v));M.push("if(",n,"!==",s,"){","face(",u.join(),")}")}M.push("}",A,"+=1;")}function H(){for(var a=1;1<<K>a;++a)M.push(B,"=",q(a),";",q(a),"=",p(a),";",p(a),"=",B,";")}function I(a,b){if(0>a)return void G(b);F(a),M.push("if(",g(u[a]),">0){",m(u[a]),"=1;"),I(a-1,b|1<<u[a]);for(var c=0;J>c;++c)M.push(k(c),"+=",n(c,u[a]),";");a===K-1&&(M.push(A,"=0;"),H()),D(a,2),I(a-1,b),a===K-1&&(M.push("if(",m(u[K-1]),"&1){",A,"=0;}"),H()),E(a),M.push("}")}var J=C.length,K=u.length;if(2>K)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var L="extractContour"+u.join("_"),M=[],N=[],O=[],P=0;J>P;++P)O.push(d(P));for(var P=0;t>P;++P)O.push(j(P));for(var P=0;K>P;++P)N.push(g(P)+"="+d(0)+".shape["+P+"]|0");for(var P=0;J>P;++P){N.push(e(P)+"="+d(P)+".data",i(P)+"="+d(P)+".offset|0");for(var Q=0;K>Q;++Q)N.push(h(P,Q)+"="+d(P)+".stride["+Q+"]|0")}for(var P=0;J>P;++P){N.push(k(P)+"="+i(P)),N.push(f(P,0));for(var Q=1;1<<K>Q;++Q){for(var R=[],S=0;K>S;++S)Q&1<<S&&R.push("-"+h(P,S));N.push(l(P,Q)+"=("+R.join("")+")|0"),N.push(f(P,Q)+"=0")}}for(var P=0;J>P;++P)for(var Q=0;K>Q;++Q){var T=[h(P,u[Q])];Q>0&&T.push(h(P,u[Q-1])+"*"+g(u[Q-1])),N.push(n(P,u[Q])+"=("+T.join("-")+")|0")}for(var P=0;K>P;++P)N.push(m(P)+"=0");N.push(y+"=0");for(var U=["2"],P=K-2;P>=0;--P)U.push(g(u[P]));N.push(z+"=("+U.join("*")+")|0",x+"=mallocUint32("+z+")",w+"=mallocUint32("+z+")",A+"=0"),N.push(o(0)+"=0");for(var Q=1;1<<K>Q;++Q){for(var V=[],W=[],S=0;K>S;++S)Q&1<<S&&(0===W.length?V.push("1"):V.unshift(W.join("*"))),W.push(g(u[S]));var X="";V[0].indexOf(g(u[K-2]))<0&&(X="-");var Y=s(K,Q,u);N.push(q(Y)+"=(-"+V.join("-")+")|0",p(Y)+"=("+X+V.join("-")+")|0",o(Y)+"=0")}N.push(r(0)+"=0",B+"=0"),I(K-1,0),M.push("freeUint32(",w,");freeUint32(",x,");");var Z=["'use strict';","function ",L,"(",O.join(),"){","var ",N.join(),";",M.join(""),"}","return ",L].join(""),$=new Function("vertex","face","phase","mallocUint32","freeUint32",Z);return $(a,b,c,v.mallocUint32,v.freeUint32)}function u(a){function b(a){throw new Error("ndarray-extract-contour: "+a)}"object"!=typeof a&&b("Must specify arguments");var c=a.order;Array.isArray(c)||b("Must specify order");var d=a.arrayArguments||1;1>d&&b("Must have at least one array argument");var e=a.scalarArguments||0;0>e&&b("Scalar arg count must be > 0"),"function"!=typeof a.vertex&&b("Must specify vertex creation function"),"function"!=typeof a.cell&&b("Must specify cell creation function"),"function"!=typeof a.phase&&b("Must specify phase function");for(var f=a.getters||[],g=new Array(d),h=0;d>h;++h)f.indexOf(h)>=0?g[h]=!0:g[h]=!1;return t(a.vertex,a.cell,a.phase,e,c,g)}var v=a("typedarray-pool");b.exports=u;var w="V",x="P",y="N",z="Q",A="X",B="T"},{"typedarray-pool":550}],458:[function(a,b,c){"use strict";var d=a("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});b.exports=function(a,b){return d(a,b),a}},{"cwise/lib/wrapper":114}],459:[function(a,b,c){"use strict";function d(a){if(a in i)return i[a];for(var b=[],c=0;a>c;++c)b.push("out",c,"s=0.5*(inp",c,"l-inp",c,"r);");for(var d=["array"],e=["junk"],c=0;a>c;++c){d.push("array"),e.push("out"+c+"s");var f=g(a);f[c]=-1,d.push({array:0,offset:f.slice()}),f[c]=1,d.push({array:0,offset:f.slice()}),e.push("inp"+c+"l","inp"+c+"r")}return i[a]=h({args:d,pre:k,post:k,body:{body:b.join(""),args:e.map(function(a){return{name:a,lvalue:0===a.indexOf("out"),rvalue:0===a.indexOf("inp"),count:"junk"!==a|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+a})}function e(a){function b(b){for(var c=f-b.length,d=[],e=[],h=[],i=0;f>i;++i)b.indexOf(i+1)>=0?h.push("0"):b.indexOf(-(i+1))>=0?h.push("s["+i+"]-1"):(h.push("-1"),d.push("1"),e.push("s["+i+"]-2"));var j=".lo("+d.join()+").hi("+e.join()+")";if(0===d.length&&(j=""),c>0){g.push("if(1");for(var i=0;f>i;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||g.push("&&s[",i,"]>2");g.push("){grad",c,"(src.pick(",h.join(),")",j);for(var i=0;f>i;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||g.push(",dst.pick(",h.join(),",",i,")",j);g.push(");")}for(var i=0;i<b.length;++i){var k=Math.abs(b[i])-1,l="dst.pick("+h.join()+","+k+")"+j;switch(a[k]){case"clamp":var m=h.slice(),n=h.slice();b[i]<0?m[k]="s["+k+"]-2":n[k]="1",0===c?g.push("if(s[",k,"]>1){dst.set(",h.join(),",",k,",0.5*(src.get(",m.join(),")-src.get(",n.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):g.push("if(s[",k,"]>1){diff(",l,",src.pick(",m.join(),")",j,",src.pick(",n.join(),")",j,");}else{zero(",l,");};");break;case"mirror":0===c?g.push("dst.set(",h.join(),",",k,",0);"):g.push("zero(",l,");");break;case"wrap":var o=h.slice(),p=h.slice();b[i]<0?(o[k]="s["+k+"]-2",p[k]="0"):(o[k]="s["+k+"]-1",p[k]="1"),0===c?g.push("if(s[",k,"]>2){dst.set(",h.join(),",",k,",0.5*(src.get(",o.join(),")-src.get(",p.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):g.push("if(s[",k,"]>2){diff(",l,",src.pick(",o.join(),")",j,",src.pick(",p.join(),")",j,");}else{zero(",l,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}c>0&&g.push("};")}var c=a.join(),e=j[c];if(e)return e;for(var f=a.length,g=["function gradient(dst,src){var s=src.shape.slice();"],h=0;1<<f>h;++h){for(var k=[],n=0;f>n;++n)h&1<<n&&k.push(n+1);for(var o=0;o<1<<k.length;++o){for(var p=k.slice(),n=0;n<k.length;++n)o&1<<n&&(p[n]=-p[n]);b(p)}}g.push("return dst;};return gradient");for(var q=["diff","zero"],r=[l,m],h=1;f>=h;++h)q.push("grad"+h),r.push(d(h));q.push(g.join(""));var s=Function.apply(void 0,q),e=s.apply(void 0,r);return i[c]=e,e}function f(a,b,c){if(Array.isArray(c)){if(c.length!==b.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else c="string"==typeof c?g(b.dimension,c):g(b.dimension,"clamp");if(a.dimension!==b.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(a.shape[b.dimension]!==b.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<b.dimension;++d)if(a.shape[d]!==b.shape[d])throw new Error("ndarray-gradient: shape mismatch");if(0===b.size)return a;if(b.dimension<=0)return a.set(0),a;var f=e(c);return f(a,b)}b.exports=f;var g=a("dup"),h=a("cwise-compiler"),i={},j={},k={body:"",args:[],thisVars:[],localVars:[]},l=h({args:["array","array","array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),m=h({args:["array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":111,dup:126}],460:[function(a,b,c){"use strict";function d(a,b,c){var d=b.dimension,g=f([],c);return e(a,b,function(a,b){for(var c=0;d>c;++c){a[c]=g[(d+1)*d+c];for(var e=0;d>e;++e)a[c]+=g[(d+1)*e+c]*b[e]}for(var f=g[(d+1)*(d+1)-1],e=0;d>e;++e)f+=g[(d+1)*e+d]*b[e];for(var h=1/f,c=0;d>c;++c)a[c]*=h;return a}),a}var e=a("ndarray-warp"),f=a("gl-matrix-invert");b.exports=d},{"gl-matrix-invert":193,"ndarray-warp":467}],461:[function(a,b,c){"use strict";function d(a,b){var c=Math.floor(b),d=b-c,e=c>=0&&c<a.shape[0],f=c+1>=0&&c+1<a.shape[0],g=e?+a.get(c):0,h=f?+a.get(c+1):0;return(1-d)*g+d*h}function e(a,b,c){var d=Math.floor(b),e=b-d,f=d>=0&&d<a.shape[0],g=d+1>=0&&d+1<a.shape[0],h=Math.floor(c),i=c-h,j=h>=0&&h<a.shape[1],k=h+1>=0&&h+1<a.shape[1],l=f&&j?a.get(d,h):0,m=f&&k?a.get(d,h+1):0,n=g&&j?a.get(d+1,h):0,o=g&&k?a.get(d+1,h+1):0;return(1-i)*((1-e)*l+e*n)+i*((1-e)*m+e*o)}function f(a,b,c,d){var e=Math.floor(b),f=b-e,g=e>=0&&e<a.shape[0],h=e+1>=0&&e+1<a.shape[0],i=Math.floor(c),j=c-i,k=i>=0&&i<a.shape[1],l=i+1>=0&&i+1<a.shape[1],m=Math.floor(d),n=d-m,o=m>=0&&m<a.shape[2],p=m+1>=0&&m+1<a.shape[2],q=g&&k&&o?a.get(e,i,m):0,r=g&&l&&o?a.get(e,i+1,m):0,s=h&&k&&o?a.get(e+1,i,m):0,t=h&&l&&o?a.get(e+1,i+1,m):0,u=g&&k&&p?a.get(e,i,m+1):0,v=g&&l&&p?a.get(e,i+1,m+1):0,w=h&&k&&p?a.get(e+1,i,m+1):0,x=h&&l&&p?a.get(e+1,i+1,m+1):0;return(1-n)*((1-j)*((1-f)*q+f*s)+j*((1-f)*r+f*t))+n*((1-j)*((1-f)*u+f*w)+j*((1-f)*v+f*x))}function g(a){var b,c,d=0|a.shape.length,e=new Array(d),f=new Array(d),g=new Array(d),h=new Array(d);for(b=0;d>b;++b)c=+arguments[b+1],e[b]=Math.floor(c),f[b]=c-e[b],g[b]=0<=e[b]&&e[b]<a.shape[b],h[b]=0<=e[b]+1&&e[b]+1<a.shape[b];var i,j,k,l=0;a:for(b=0;1<<d>b;++b){for(j=1,k=a.offset,i=0;d>i;++i)if(b&1<<i){if(!h[i])continue a;j*=f[i],k+=a.stride[i]*(e[i]+1)}else{if(!g[i])continue a;j*=1-f[i],k+=a.stride[i]*e[i]}l+=j*a.data[k]}return l}function h(a,b,c,h){switch(a.shape.length){case 0:return 0;case 1:return d(a,b);case 2:return e(a,b,c);case 3:return f(a,b,c,h);default:return g.apply(void 0,arguments)}}b.exports=h,b.exports.d1=d,b.exports.d2=e,b.exports.d3=f},{}],462:[function(a,b,c){"use strict";function d(a){if(!a)return h;for(var b=0;b<a.args.length;++b){var c=a.args[b];0===b?a.args[b]={name:c,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:a.args[b]={name:c,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function e(a){return g({args:a.args,pre:d(a.pre),body:d(a.body),post:d(a.proc),funcName:a.funcName})}function f(a){for(var b=[],c=0;c<a.args.length;++c)b.push("a"+c);var d=new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),") {P(",b.join(","),");return a0}"].join(""));return d(e(a))}var g=a("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},i={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in i){var b=i[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+b+"=b"},rvalue:!0,funcName:a+"eq"}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+b+"=s"},rvalue:!0,funcName:a+"seq"})}}();var j={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in j){var b=j[a];c[a]=f({args:["array","array"],body:{args:["a","b"],body:"a="+b+"b"},funcName:a}),c[a+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+b+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var k={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in k){var b=k[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+b+"b"},rvalue:!0,count:2,funcName:a+"eq"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+b+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<l.length;++a){var b=l[a];c[b]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:b}),c[b+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"})}}();var m=["max","min","atan2","pow"];!function(){for(var a=0;a<m.length;++a){var b=m[a];c[b]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b}),c[b+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b+"s"}),c[b+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"}),c[b+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"seq"})}}();var n=["atan2","pow"];!function(){for(var a=0;a<n.length;++a){var b=n[a];c[b+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"op"}),c[b+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"ops"}),c[b+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opeq"}),c[b+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opseq"})}}(),c.any=g({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),c.all=g({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),c.sum=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],
body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),c.prod=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),c.norm2squared=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),c.norm2=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),c.norminf=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),c.norm1=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),c.sup=g({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.inf=g({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.argmin=g({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.argmax=g({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.random=f({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),c.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),c.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),c.equals=g({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":111}],463:[function(a,b,c){"use strict";var d=a("ndarray"),e=a("./doConvert.js");b.exports=function(a,b){for(var c=[],f=a,g=1;Array.isArray(f);)c.push(f.length),g*=f.length,f=f[0];return 0===c.length?d():(b||(b=d(new Float64Array(g),c)),e(b,a),b)}},{"./doConvert.js":464,ndarray:468}],464:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":111}],465:[function(a,b,c){"use strict";function d(a){switch(a){case"uint8":return[i.mallocUint8,i.freeUint8];case"uint16":return[i.mallocUint16,i.freeUint16];case"uint32":return[i.mallocUint32,i.freeUint32];case"int8":return[i.mallocInt8,i.freeInt8];case"int16":return[i.mallocInt16,i.freeInt16];case"int32":return[i.mallocInt32,i.freeInt32];case"float32":return[i.mallocFloat,i.freeFloat];case"float64":return[i.mallocDouble,i.freeDouble];default:return null}}function e(a){for(var b=[],c=0;a>c;++c)b.push("s"+c);for(var c=0;a>c;++c)b.push("n"+c);for(var c=1;a>c;++c)b.push("d"+c);for(var c=1;a>c;++c)b.push("e"+c);for(var c=1;a>c;++c)b.push("f"+c);return b}function f(a,b){function c(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function f(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}var g=["'use strict'"],h=["ndarrayInsertionSort",a.join("d"),b].join(""),i=["left","right","data","offset"].concat(e(a.length)),j=d(b),k=["i,j,cptr,ptr=left*s0+offset"];if(a.length>1){for(var l=[],m=1;m<a.length;++m)k.push("i"+m),l.push("n"+m);j?k.push("scratch=malloc("+l.join("*")+")"):k.push("scratch=new Array("+l.join("*")+")"),k.push("dptr","sptr","a","b")}else k.push("scratch");if(g.push(["function ",h,"(",i.join(","),"){var ",k.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),a.length>1){g.push("dptr=0;sptr=ptr");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push("scratch[dptr++]=",c("sptr"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("sptr+=d"+n,"}")}g.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var m=1;m<a.length;++m)1===m&&g.push("__l:"),g.push(["for(i",m,"=0;i",m,"<n",m,";++i",m,"){"].join(""));g.push(["a=",c("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var m=a.length-1;m>=1;--m)g.push("sptr+=e"+m,"dptr+=f"+m,"}");g.push("dptr=cptr;sptr=cptr-s0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr",c("sptr")));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push(["dptr+=d",n,";sptr+=d",n].join(""),"}")}g.push("cptr-=s0\n}"),g.push("dptr=cptr;sptr=0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr","scratch[sptr++]"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("dptr+=d"+n,"}")}}else g.push("scratch="+c("ptr"),"while((j-->left)&&("+c("cptr-s0")+">scratch)){",f("cptr",c("cptr-s0")),"cptr-=s0","}",f("cptr","scratch"));if(g.push("}"),a.length>1&&j&&g.push("free(scratch)"),g.push("} return "+h),j){var o=new Function("malloc","free",g.join("\n"));return o(j[0],j[1])}var o=new Function(g.join("\n"));return o()}function g(a,b,c){function f(a){return["(offset+",a,"*s0)"].join("")}function g(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function h(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}function i(b,c,d){if(1===b.length)v.push("ptr0="+f(b[0]));else for(var e=0;e<b.length;++e)v.push(["b_ptr",e,"=s0*",b[e]].join(""));c&&v.push("pivot_ptr=0"),v.push("ptr_shift=offset");for(var e=a.length-1;e>=0;--e){var g=a[e];0!==g&&v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""))}if(b.length>1)for(var e=0;e<b.length;++e)v.push(["ptr",e,"=b_ptr",e,"+ptr_shift"].join(""));v.push(d),c&&v.push("++pivot_ptr");for(var e=0;e<a.length;++e){var g=a[e];0!==g&&(b.length>1?v.push("ptr_shift+=d"+g):v.push("ptr0+=d"+g),v.push("}"))}}function k(b,c,d,e){if(1===c.length)v.push("ptr0="+f(c[0]));else{for(var g=0;g<c.length;++g)v.push(["b_ptr",g,"=s0*",c[g]].join(""));v.push("ptr_shift=offset")}d&&v.push("pivot_ptr=0"),b&&v.push(b+":");for(var g=1;g<a.length;++g)v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""));if(c.length>1)for(var g=0;g<c.length;++g)v.push(["ptr",g,"=b_ptr",g,"+ptr_shift"].join(""));v.push(e);for(var g=a.length-1;g>=1;--g)d&&v.push("pivot_ptr+=f"+g),c.length>1?v.push("ptr_shift+=e"+g):v.push("ptr0+=e"+g),v.push("}")}function l(){a.length>1&&y&&v.push("free(pivot1)","free(pivot2)")}function m(b,c){var d="el"+b,e="el"+c;if(a.length>1){var h="__l"+ ++z;k(h,[d,e],!1,["comp=",g("ptr0"),"-",g("ptr1"),"\n","if(comp>0){tmp0=",d,";",d,"=",e,";",e,"=tmp0;break ",h,"}\n","if(comp<0){break ",h,"}"].join(""))}else v.push(["if(",g(f(d)),">",g(f(e)),"){tmp0=",d,";",d,"=",e,";",e,"=tmp0}"].join(""))}function n(b,c){a.length>1?i([b,c],!1,h("ptr0",g("ptr1"))):v.push(h(f(b),g(f(c))))}function o(b,c,d){if(a.length>1){var e="__l"+ ++z;k(e,[c],!0,[b,"=",g("ptr0"),"-pivot",d,"[pivot_ptr]\n","if(",b,"!==0){break ",e,"}"].join(""))}else v.push([b,"=",g(f(c)),"-pivot",d].join(""))}function p(b,c){a.length>1?i([b,c],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join("")):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join(""))}function q(b,c,d){a.length>1?(i([b,c,d],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join("")),v.push("++"+c,"--"+d)):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","ptr2=",f(d),"\n","++",c,"\n","--",d,"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join(""))}function r(a,b){p(a,b),v.push("--"+b)}function s(b,c,d){a.length>1?i([b,c],!0,[h("ptr0",g("ptr1")),"\n",h("ptr1",["pivot",d,"[pivot_ptr]"].join(""))].join("")):v.push(h(f(b),g(f(c))),h(f(c),"pivot"+d))}function t(b,c){v.push(["if((",c,"-",b,")<=",j,"){\n","insertionSort(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}else{\n",w,"(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}"].join(""))}function u(b,c,d){a.length>1?(v.push(["__l",++z,":while(true){"].join("")),i([b],!0,["if(",g("ptr0"),"!==pivot",c,"[pivot_ptr]){break __l",z,"}"].join("")),v.push(d,"}")):v.push(["while(",g(f(b)),"===pivot",c,"){",d,"}"].join(""))}var v=["'use strict'"],w=["ndarrayQuickSort",a.join("d"),b].join(""),x=["left","right","data","offset"].concat(e(a.length)),y=d(b),z=0;v.push(["function ",w,"(",x.join(","),"){"].join(""));var A=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(a.length>1){for(var B=[],C=1;C<a.length;++C)B.push("n"+C),A.push("i"+C);for(var C=0;8>C;++C)A.push("b_ptr"+C);A.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+B.join("*")),y?A.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):A.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else A.push("pivot1","pivot2");if(v.push("var "+A.join(",")),m(1,2),m(4,5),m(1,3),m(2,3),m(1,4),m(3,4),m(2,5),m(2,3),m(4,5),a.length>1?i(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",g("ptr1"),"\n","pivot2[pivot_ptr]=",g("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",g("ptr0"),"\n","y=",g("ptr2"),"\n","z=",g("ptr4"),"\n",h("ptr5","x"),"\n",h("ptr6","y"),"\n",h("ptr7","z")].join("")):v.push(["pivot1=",g(f("el2")),"\n","pivot2=",g(f("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",g(f("el1")),"\n","y=",g(f("el3")),"\n","z=",g(f("el5")),"\n",h(f("index1"),"x"),"\n",h(f("index3"),"y"),"\n",h(f("index5"),"z")].join("")),n("index2","left"),n("index4","right"),v.push("if(pivots_are_equal){"),v.push("for(k=less;k<=great;++k){"),o("comp","k",1),v.push("if(comp===0){continue}"),v.push("if(comp<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),v.push("while(true){"),o("comp","great",1),v.push("if(comp>0){"),v.push("great--"),v.push("}else if(comp<0){"),q("k","less","great"),v.push("break"),v.push("}else{"),r("k","great"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}else{"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2>0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp>0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),s("left","(less-1)",1),s("right","(great+1)",2),t("left","(less-2)"),t("(great+2)","right"),v.push("if(pivots_are_equal){"),l(),v.push("return"),v.push("}"),v.push("if(less<index1&&great>index5){"),u("less",1,"++less"),u("great",2,"--great"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1===0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2===0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp===0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),l(),t("less","great"),v.push("}return "+w),a.length>1&&y){var D=new Function("insertionSort","malloc","free",v.join("\n"));return D(c,y[0],y[1])}var D=new Function("insertionSort",v.join("\n"));return D(c)}function h(a,b){var c=["'use strict'"],d=["ndarraySortWrapper",a.join("d"),b].join(""),h=["array"];c.push(["function ",d,"(",h.join(","),"){"].join(""));for(var i=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],k=0;k<a.length;++k)i.push(["s",k,"=stride[",k,"]|0,n",k,"=shape[",k,"]|0"].join(""));for(var l=new Array(a.length),m=[],k=0;k<a.length;++k){var n=a[k];0!==n&&(0===m.length?l[n]="1":l[n]=m.join("*"),m.push("n"+n))}for(var o=-1,p=-1,k=0;k<a.length;++k){var q=a[k];0!==q&&(o>0?i.push(["d",q,"=s",q,"-d",o,"*n",o].join("")):i.push(["d",q,"=s",q].join("")),o=q);var n=a.length-1-k;0!==n&&(p>0?i.push(["e",n,"=s",n,"-e",p,"*n",p,",f",n,"=",l[n],"-f",p,"*n",p].join("")):i.push(["e",n,"=s",n,",f",n,"=",l[n]].join("")),p=n)}c.push("var "+i.join(","));var r=["0","n0-1","data","offset"].concat(e(a.length));c.push(["if(n0<=",j,"){","insertionSort(",r.join(","),")}else{","quickSort(",r.join(","),")}"].join("")),c.push("}return "+d);var s=new Function("insertionSort","quickSort",c.join("\n")),t=f(a,b),u=g(a,b,t);return s(t,u)}var i=a("typedarray-pool"),j=32;b.exports=h},{"typedarray-pool":550}],466:[function(a,b,c){"use strict";function d(a){var b=a.order,c=a.dtype,d=[b,c],g=d.join(":"),h=f[g];return h||(f[g]=h=e(b,c)),h(a),a}var e=a("./lib/compile_sort.js"),f={};b.exports=d},{"./lib/compile_sort.js":465}],467:[function(a,b,c){"use strict";var d=a("ndarray-linear-interpolate"),e=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_9_arg4_)}",args:[{name:"_inline_9_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_=_inline_10_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),f=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_(_inline_13_arg4_,this_warped[0])}",args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),g=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_16_arg2_(this_warped,_inline_16_arg0_),_inline_16_arg1_=_inline_16_arg3_(_inline_16_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),h=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_19_arg2_(this_warped,_inline_19_arg0_),_inline_19_arg1_=_inline_19_arg3_(_inline_19_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_19_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_19_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});b.exports=function(a,b,c){switch(b.shape.length){case 1:f(a,c,d.d1,b);break;case 2:g(a,c,d.d2,b);break;case 3:h(a,c,d.d3,b);break;default:e(a,c,d.bind(void 0,b),b.shape.length)}return a}},{"cwise/lib/wrapper":114,"ndarray-linear-interpolate":461}],468:[function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");0>b&&(c="View_Nil"+a);var d="generic"===a;if(-1===b){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;b>q;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;h>i;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=a("iota-array"),j=a("is-buffer"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};b.exports=h},{"iota-array":294,"is-buffer":296}],469:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return 0>b?-f:f;var c=e.hi(a),d=e.lo(a);return b>a==a>0?d===g?(c+=1,d=0):d+=1:0===d?(d=g,c-=1):d-=1,e.pack(d,c)}var e=a("double-bits"),f=Math.pow(2,-1074),g=-1>>>0;b.exports=d},{"double-bits":125}],470:[function(a,b,c){var d=1e-6,e=1e-6;c.vertexNormals=function(a,b,c){for(var e=b.length,f=new Array(e),g=void 0===c?d:c,h=0;e>h;++h)f[h]=[0,0,0];for(var h=0;h<a.length;++h)for(var i=a[h],j=0,k=i[i.length-1],l=i[0],m=0;m<i.length;++m){j=k,k=l,l=i[(m+1)%i.length];for(var n=b[j],o=b[k],p=b[l],q=new Array(3),r=0,s=new Array(3),t=0,u=0;3>u;++u)q[u]=n[u]-o[u],r+=q[u]*q[u],s[u]=p[u]-o[u],t+=s[u]*s[u];if(r*t>g)for(var v=f[k],w=1/Math.sqrt(r*t),u=0;3>u;++u){var x=(u+1)%3,y=(u+2)%3;v[u]+=w*(s[x]*q[y]-s[y]*q[x])}}for(var h=0;e>h;++h){for(var v=f[h],z=0,u=0;3>u;++u)z+=v[u]*v[u];if(z>g)for(var w=1/Math.sqrt(z),u=0;3>u;++u)v[u]*=w;else for(var u=0;3>u;++u)v[u]=0}return f},c.faceNormals=function(a,b,c){for(var d=a.length,f=new Array(d),g=void 0===c?e:c,h=0;d>h;++h){for(var i=a[h],j=new Array(3),k=0;3>k;++k)j[k]=b[i[k]];for(var l=new Array(3),m=new Array(3),k=0;3>k;++k)l[k]=j[1][k]-j[0][k],m[k]=j[2][k]-j[0][k];for(var n=new Array(3),o=0,k=0;3>k;++k){var p=(k+1)%3,q=(k+2)%3;n[k]=l[p]*m[q]-l[q]*m[p],o+=n[k]*n[k]}o=o>g?1/Math.sqrt(o):0;for(var k=0;3>k;++k)n[k]*=o;f[h]=n}return f}},{}],471:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;10>c;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},e)).join("")?!1:!0}catch(f){return!1}}var f=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;b.exports=e()?Object.assign:function(a,b){for(var c,e,i=d(a),j=1;j<arguments.length;j++){c=Object(arguments[j]);for(var k in c)g.call(c,k)&&(i[k]=c[k]);if(f){e=f(c);for(var l=0;l<e.length;l++)h.call(c,e[l])&&(i[e[l]]=c[e[l]])}}return i}},{}],472:[function(a,b,c){"use strict";function d(a,b){var c,d,g,h;return"string"==typeof a?(c=e(a,b),d=c.width,g=c.height):a instanceof HTMLCanvasElement?(d=a.width,g=a.height,a=a.getContext("2d"),c=a.getImageData(0,0,d,g)):a instanceof ImageData&&(d=a.width,g=a.height,c=a),h=f(c)}function e(a,b){b||(b={});var c=b.family||"sans-serif",d=i.width,e=i.height,f=b.width||b.height||b.size;f&&f!=d&&(d=e=i.width=i.height=f);var g=b.fontSize||d/2;return j.fillStyle="#000",j.fillRect(0,0,d,e),j.font=g+"px "+c,j.textBaseline="middle",j.textAlign="center",j.fillStyle="white",j.fillText(a,d/2,e/2),j.getImageData(0,0,d,e)}function f(a){var b,c,d,e,f,i,j,k,l,m,n,o,p,q=a.data,r=a.width,s=a.height,t=Array(s),u=Array(s),v=0,w=0,x=r,y=0,z=0,A=Array(s);for(c=0;s>c;c++)if(i=0,j=0,f=4*c*r,n=g(q.subarray(f,f+4*r),4),n[0]!==n[1]){for(v||(v=c),w=c,b=n[0];b<n[1];b++)e=4*b,d=q[f+e],i+=d,j+=b*d;t[c]=0===i?0:i/r,u[c]=0===i?0:j/i,n[0]<x&&(x=n[0]),n[1]>y&&(y=n[1]),A[c]=n}for(i=0,k=0,j=0,c=0;s>c;c++)o=t[c],o&&(k+=o*c,i+=o,j+=u[c]*o);for(m=k/i,l=j/i,z=0,p=0,c=0;s>c;c++)n=A[c],n&&(p=Math.max(h(l-n[0],m-c),h(l-n[1],m-c)),p>z&&(z=p));return{center:[l,m],bounds:[x,v,y,w+1],radius:Math.sqrt(z)}}function g(a,b){var c=0,d=a.length,e=0;for(b||(b=4);!a[e]&&d>e;)e+=b;for(c=e,e=a.length;!a[e]&&e>c;)e-=b;return d=e,[c/b,d/b]}function h(a,b){return a*a+b*b}b.exports=d;var i=document.createElement("canvas"),j=i.getContext("2d");i.width=200,i.height=200,d.canvas=i},{}],473:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){var k=b+f+j;if(l>0){var l=Math.sqrt(k+1);a[0]=.5*(g-i)/l,a[1]=.5*(h-d)/l,a[2]=.5*(c-f)/l,a[3]=.5*l}else{var m=Math.max(b,f,j),l=Math.sqrt(2*m-k+1);b>=m?(a[0]=.5*l,a[1]=.5*(e+c)/l,a[2]=.5*(h+d)/l,a[3]=.5*(g-i)/l):f>=m?(a[0]=.5*(c+e)/l,a[1]=.5*l,a[2]=.5*(i+g)/l,a[3]=.5*(h-d)/l):(a[0]=.5*(d+h)/l,a[1]=.5*(g+i)/l,a[2]=.5*l,a[3]=.5*(c-e)/l)}return a}b.exports=d},{}],474:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a,b,c,d){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2)+Math.pow(d,2))}function f(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],h=e(c,d,f,g);h>1e-6?(a[0]=c/h,a[1]=d/h,a[2]=f/h,a[3]=g/h):(a[0]=a[1]=a[2]=0,a[3]=1)}function g(a,b,c){this.radius=i([c]),this.center=i(b),this.rotation=i(a),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.rotation||[0,0,0,1],d=a.radius||1;b=[].slice.call(b,0,3),c=[].slice.call(c,0,4),f(c,c);var e=new g(c,b,Math.log(d));return e.setDistanceLimits(a.zoomMin,a.zoomMax),("eye"in a||"up"in a)&&e.lookAt(0,a.eye,a.center,a.up),e}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/lookAt"),k=a("gl-mat4/fromQuat"),l=a("gl-mat4/invert"),m=a("./lib/quatFromFrame"),n=g.prototype;n.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},n.recalcMatrix=function(a){this.radius.curve(a),this.center.curve(a),this.rotation.curve(a);var b=this.computedRotation;f(b,b);var c=this.computedMatrix;k(c,b);var d=this.computedCenter,e=this.computedEye,g=this.computedUp,h=Math.exp(this.computedRadius[0]);e[0]=d[0]+h*c[2],e[1]=d[1]+h*c[6],e[2]=d[2]+h*c[10],g[0]=c[1],g[1]=c[5],g[2]=c[9];for(var i=0;3>i;++i){for(var j=0,l=0;3>l;++l)j+=c[i+4*l]*e[l];c[12+i]=-j}},n.getMatrix=function(a,b){this.recalcMatrix(a);
var c=this.computedMatrix;if(b){for(var d=0;16>d;++d)b[d]=c[d];return b}return c},n.idle=function(a){this.center.idle(a),this.radius.idle(a),this.rotation.idle(a)},n.flush=function(a){this.center.flush(a),this.radius.flush(a),this.rotation.flush(a)},n.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=f[1],h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);k/=o,l/=o,m/=o;var p=f[2],q=f[6],r=f[10],s=p*g+q*h+r*i,t=p*k+q*l+r*m;p-=s*g+t*k,q-=s*h+t*l,r-=s*i+t*m;var u=d(p,q,r);p/=u,q/=u,r/=u;var v=k*b+g*c,w=l*b+h*c,x=m*b+i*c;this.center.move(a,v,w,x);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+e),this.radius.set(a,Math.log(y))},n.rotate=function(a,b,c,f){this.recalcMatrix(a),b=b||0,c=c||0;var g=this.computedMatrix,h=g[0],i=g[4],j=g[8],k=g[1],l=g[5],m=g[9],n=g[2],o=g[6],p=g[10],q=b*h+c*k,r=b*i+c*l,s=b*j+c*m,t=-(o*s-p*r),u=-(p*q-n*s),v=-(n*r-o*q),w=Math.sqrt(Math.max(0,1-Math.pow(t,2)-Math.pow(u,2)-Math.pow(v,2))),x=e(t,u,v,w);x>1e-6?(t/=x,u/=x,v/=x,w/=x):(t=u=v=0,w=1);var y=this.computedRotation,z=y[0],A=y[1],B=y[2],C=y[3],D=z*w+C*t+A*v-B*u,E=A*w+C*u+B*t-z*v,F=B*w+C*v+z*u-A*t,G=C*w-z*t-A*u-B*v;if(f){t=n,u=o,v=p;var H=Math.sin(f)/d(t,u,v);t*=H,u*=H,v*=H,w=Math.cos(b),D=D*w+G*t+E*v-F*u,E=E*w+G*u+F*t-D*v,F=F*w+G*v+D*u-E*t,G=G*w-D*t-E*u-F*v}var I=e(D,E,F,G);I>1e-6?(D/=I,E/=I,F/=I,G/=I):(D=E=F=0,G=1),this.rotation.set(a,D,E,F,G)},n.lookAt=function(a,b,c,d){this.recalcMatrix(a),c=c||this.computedCenter,b=b||this.computedEye,d=d||this.computedUp;var e=this.computedMatrix;j(e,b,c,d);var g=this.computedRotation;m(g,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),f(g,g),this.rotation.set(a,g[0],g[1],g[2],g[3]);for(var h=0,i=0;3>i;++i)h+=Math.pow(c[i]-b[i],2);this.radius.set(a,.5*Math.log(Math.max(h,1e-6))),this.center.set(a,c[0],c[1],c[2])},n.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},n.setMatrix=function(a,b){var c=this.computedRotation;m(c,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),f(c,c),this.rotation.set(a,c[0],c[1],c[2],c[3]);var d=this.computedMatrix;l(d,b);var e=d[15];if(Math.abs(e)>1e-6){var g=d[12]/e,h=d[13]/e,i=d[14]/e;this.recalcMatrix(a);var j=Math.exp(this.computedRadius[0]);this.center.set(a,g-d[2]*j,h-d[6]*j,i-d[10]*j),this.radius.idle(a)}else this.center.idle(a),this.radius.idle(a)},n.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},n.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-(1/0),b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},n.getDistanceLimits=function(a){var b=this.radius.bounds;return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},n.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},n.fromJSON=function(a){var b=this.lastT(),c=a.center;c&&this.center.set(b,c[0],c[1],c[2]);var d=a.rotation;d&&this.rotation.set(b,d[0],d[1],d[2],d[3]);var e=a.distance;e&&e>0&&this.radius.set(b,Math.log(e)),this.setDistanceLimits(a.zoomMin,a.zoomMax)}},{"./lib/quatFromFrame":473,"filtered-vector":134,"gl-mat4/fromQuat":179,"gl-mat4/invert":182,"gl-mat4/lookAt":183}],475:[function(a,b,c){"use strict";var d=a("repeat-string");b.exports=function(a,b,c){return c="undefined"!=typeof c?c+"":" ",d(c,b)+a}},{"repeat-string":509}],476:[function(a,b,c){b.exports=function(a,b){b||(b=[0,""]),a=String(a);var c=parseFloat(a,10);return b[0]=c,b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},{}],477:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:496}],478:[function(a,b,c){"use strict";function d(a){var b;a&&a.length&&(b=a,a=b.length);var c=new Uint8Array(a||0);return b&&c.set(b),c.readUInt32LE=f.readUInt32LE,c.writeUInt32LE=f.writeUInt32LE,c.readInt32LE=f.readInt32LE,c.writeInt32LE=f.writeInt32LE,c.readFloatLE=f.readFloatLE,c.writeFloatLE=f.writeFloatLE,c.readDoubleLE=f.readDoubleLE,c.writeDoubleLE=f.writeDoubleLE,c.toString=f.toString,c.write=f.write,c.slice=f.slice,c.copy=f.copy,c._isBuffer=!0,c}function e(a){for(var b,c,d=a.length,e=[],f=0;d>f;f++){if(b=a.charCodeAt(f),b>55295&&57344>b){if(!c){b>56319||f+1===d?e.push(239,191,189):c=b;continue}if(56320>b){e.push(239,191,189),c=b;continue}b=c-55296<<10|b-56320|65536,c=null}else c&&(e.push(239,191,189),c=null);128>b?e.push(b):2048>b?e.push(b>>6|192,63&b|128):65536>b?e.push(b>>12|224,b>>6&63|128,63&b|128):e.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}return e}b.exports=d;var f,g,h,i=a("ieee754");f={readUInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},writeUInt32LE:function(a,b){this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24},readInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},readFloatLE:function(a){return i.read(this,a,!0,23,4)},readDoubleLE:function(a){return i.read(this,a,!0,52,8)},writeFloatLE:function(a,b){return i.write(this,a,b,!0,23,4)},writeDoubleLE:function(a,b){return i.write(this,a,b,!0,52,8)},toString:function(a,b,c){var d="",e="";b=b||0,c=Math.min(this.length,c||this.length);for(var f=b;c>f;f++){var g=this[f];127>=g?(d+=decodeURIComponent(e)+String.fromCharCode(g),e=""):e+="%"+g.toString(16)}return d+=decodeURIComponent(e)},write:function(a,b){for(var c=a===g?h:e(a),d=0;d<c.length;d++)this[b+d]=c[d]},slice:function(a,b){return this.subarray(a,b)},copy:function(a,b){b=b||0;for(var c=0;c<this.length;c++)a[b+c]=this[c]}},f.writeInt32LE=f.writeUInt32LE,d.byteLength=function(a){return g=a,h=e(a),h.length},d.isBuffer=function(a){return!(!a||!a._isBuffer)}},{ieee754:290}],479:[function(a,b,c){(function(c){"use strict";function d(a){this.buf=q.isBuffer(a)?a:new q(a||0),this.pos=0,this.length=this.buf.length}function e(a,b){var c,d=b.buf;if(c=d[b.pos++],a+=268435456*(127&c),128>c)return a;if(c=d[b.pos++],a+=34359738368*(127&c),128>c)return a;if(c=d[b.pos++],a+=4398046511104*(127&c),128>c)return a;if(c=d[b.pos++],a+=562949953421312*(127&c),128>c)return a;if(c=d[b.pos++],a+=72057594037927940*(127&c),128>c)return a;if(c=d[b.pos++],a+=0x8000000000000000*(127&c),128>c)return a;throw new Error("Expected varint not more than 10 bytes")}function f(a,b){b.realloc(10);for(var c=b.pos+10;a>=1;){if(b.pos>=c)throw new Error("Given varint doesn't fit into 10 bytes");var d=255&a;b.buf[b.pos++]=d|(a>=128?128:0),a/=128}}function g(a,b,c){var d=16383>=b?1:2097151>=b?2:268435455>=b?3:Math.ceil(Math.log(b)/(7*Math.LN2));c.realloc(d);for(var e=c.pos-1;e>=a;e--)c.buf[e+d]=c.buf[e]}function h(a,b){for(var c=0;c<a.length;c++)b.writeVarint(a[c])}function i(a,b){for(var c=0;c<a.length;c++)b.writeSVarint(a[c])}function j(a,b){for(var c=0;c<a.length;c++)b.writeFloat(a[c])}function k(a,b){for(var c=0;c<a.length;c++)b.writeDouble(a[c])}function l(a,b){for(var c=0;c<a.length;c++)b.writeBoolean(a[c])}function m(a,b){for(var c=0;c<a.length;c++)b.writeFixed32(a[c])}function n(a,b){for(var c=0;c<a.length;c++)b.writeSFixed32(a[c])}function o(a,b){for(var c=0;c<a.length;c++)b.writeFixed64(a[c])}function p(a,b){for(var c=0;c<a.length;c++)b.writeSFixed64(a[c])}b.exports=d;var q=c.Buffer||a("./buffer");d.Varint=0,d.Fixed64=1,d.Bytes=2,d.Fixed32=5;var r=4294967296,s=1/r,t=Math.pow(2,63);d.prototype={destroy:function(){this.buf=null},readFields:function(a,b,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),e=d>>3,f=this.pos;a(e,b,this),this.pos===f&&this.skip(d)}return b},readMessage:function(a,b){return this.readFields(a,b,this.readVarint()+this.pos)},readFixed32:function(){var a=this.buf.readUInt32LE(this.pos);return this.pos+=4,a},readSFixed32:function(){var a=this.buf.readInt32LE(this.pos);return this.pos+=4,a},readFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*r;return this.pos+=8,a},readSFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*r;return this.pos+=8,a},readFloat:function(){var a=this.buf.readFloatLE(this.pos);return this.pos+=4,a},readDouble:function(){var a=this.buf.readDoubleLE(this.pos);return this.pos+=8,a},readVarint:function(){var a,b,c=this.buf;return b=c[this.pos++],a=127&b,128>b?a:(b=c[this.pos++],a|=(127&b)<<7,128>b?a:(b=c[this.pos++],a|=(127&b)<<14,128>b?a:(b=c[this.pos++],a|=(127&b)<<21,128>b?a:e(a,this))))},readVarint64:function(){var a=this.pos,b=this.readVarint();if(t>b)return b;for(var c=this.pos-2;255===this.buf[c];)c--;a>c&&(c=a),b=0;for(var d=0;c-a+1>d;d++){var e=127&~this.buf[a+d];b+=4>d?e<<7*d:e*Math.pow(2,7*d)}return-b-1},readSVarint:function(){var a=this.readVarint();return a%2===1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,b=this.buf.toString("utf8",this.pos,a);return this.pos=a,b},readBytes:function(){var a=this.readVarint()+this.pos,b=this.buf.slice(this.pos,a);return this.pos=a,b},readPackedVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readVarint());return b},readPackedSVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFloat());return b},readPackedDouble:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed32());return b},readPackedFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(a){var b=7&a;if(b===d.Varint)for(;this.buf[this.pos++]>127;);else if(b===d.Bytes)this.pos=this.readVarint()+this.pos;else if(b===d.Fixed32)this.pos+=4;else{if(b!==d.Fixed64)throw new Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(a,b){this.writeVarint(a<<3|b)},realloc:function(a){for(var b=this.length||16;b<this.pos+a;)b*=2;if(b!==this.length){var c=new q(b);this.buf.copy(c),this.buf=c,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(a){this.realloc(4),this.buf.writeUInt32LE(a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),this.buf.writeInt32LE(a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(-1&a,this.pos),this.buf.writeUInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(-1&a,this.pos),this.buf.writeInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeVarint:function(a){return a=+a,a>268435455?void f(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),void(127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),127>=a||(this.buf[this.pos++]=a>>>7&127)))))},writeSVarint:function(a){this.writeVarint(0>a?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a);var b=q.byteLength(a);this.writeVarint(b),this.realloc(b),this.buf.write(a,this.pos),this.pos+=b},writeFloat:function(a){this.realloc(4),this.buf.writeFloatLE(a,this.pos),this.pos+=4},writeDouble:function(a){this.realloc(8),this.buf.writeDoubleLE(a,this.pos),this.pos+=8},writeBytes:function(a){var b=a.length;this.writeVarint(b),this.realloc(b);for(var c=0;b>c;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,b){this.pos++;var c=this.pos;a(b,this);var d=this.pos-c;d>=128&&g(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,b,c){this.writeTag(a,d.Bytes),this.writeRawMessage(b,c)},writePackedVarint:function(a,b){this.writeMessage(a,h,b)},writePackedSVarint:function(a,b){this.writeMessage(a,i,b)},writePackedBoolean:function(a,b){this.writeMessage(a,l,b)},writePackedFloat:function(a,b){this.writeMessage(a,j,b)},writePackedDouble:function(a,b){this.writeMessage(a,k,b)},writePackedFixed32:function(a,b){this.writeMessage(a,m,b)},writePackedSFixed32:function(a,b){this.writeMessage(a,n,b)},writePackedFixed64:function(a,b){this.writeMessage(a,o,b)},writePackedSFixed64:function(a,b){this.writeMessage(a,p,b)},writeBytesField:function(a,b){this.writeTag(a,d.Bytes),this.writeBytes(b)},writeFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeSFixed64(b)},writeVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeVarint(b)},writeSVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeSVarint(b)},writeStringField:function(a,b){this.writeTag(a,d.Bytes),this.writeString(b)},writeFloatField:function(a,b){this.writeTag(a,d.Fixed32),this.writeFloat(b)},writeDoubleField:function(a,b){this.writeTag(a,d.Fixed64),this.writeDouble(b)},writeBooleanField:function(a,b){this.writeVarintField(a,Boolean(b))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":478}],480:[function(a,b,c){"use strict";function d(a){var b=a.length;if(e>b){for(var c=1,d=0;b>d;++d)for(var g=0;d>g;++g)if(a[d]<a[g])c=-c;else if(a[d]===a[g])return 0;return c}for(var h=f.mallocUint8(b),d=0;b>d;++d)h[d]=0;for(var c=1,d=0;b>d;++d)if(!h[d]){var i=1;h[d]=1;for(var g=a[d];g!==d;g=a[g]){if(h[g])return f.freeUint8(h),0;i+=1,h[g]=1}1&i||(c=-c)}return f.freeUint8(h),c}b.exports=d;var e=32,f=a("typedarray-pool")},{"typedarray-pool":550}],481:[function(a,b,c){"use strict";function d(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var c,d,e,h=f.mallocUint32(b),i=f.mallocUint32(b),j=0;for(g(a,i),e=0;b>e;++e)h[e]=a[e];for(e=b-1;e>0;--e)d=i[e],c=h[e],h[e]=h[d],h[d]=c,i[e]=i[c],i[c]=d,j=(j+c)*e;return f.freeUint32(i),f.freeUint32(h),j}function e(a,b,c){switch(a){case 0:return c?c:[];case 1:return c?(c[0]=0,c):[0];case 2:return c?(b?(c[0]=0,c[1]=1):(c[0]=1,c[1]=0),c):b?[0,1]:[1,0]}c=c||new Array(a);var d,e,f,g=1;for(c[0]=0,f=1;a>f;++f)c[f]=f,g=g*f|0;for(f=a-1;f>0;--f)d=b/g|0,b=b-d*g|0,g=g/f|0,e=0|c[f],c[f]=0|c[d],c[d]=0|e;return c}var f=a("typedarray-pool"),g=a("invert-permutation");c.rank=d,c.unrank=e},{"invert-permutation":293,"typedarray-pool":550}],482:[function(a,b,c){"use strict";function d(a,b){function c(a,b){var c=j[b][a[b]];c.splice(c.indexOf(a),1)}function d(a,d,f){for(var g,h,i,k=0;2>k;++k)if(j[k][d].length>0){g=j[k][d][0],i=k;break}h=g[1^i];for(var l=0;2>l;++l)for(var m=j[l][d],n=0;n<m.length;++n){var o=m[n],p=o[1^l],q=e(b[a],b[d],b[h],b[p]);q>0&&(g=o,h=p,i=l)}return f?h:(g&&c(g,i),h)}function f(a,f){var g=j[f][a][0],h=[a];c(g,f);for(var i=g[1^f];;){for(;i!==a;)h.push(i),i=d(h[h.length-2],i,!1);if(j[0][a].length+j[1][a].length===0)break;var k=h[h.length-1],l=a,m=h[1],n=d(k,l,!0);if(e(b[k],b[l],b[m],b[n])<0)break;h.push(a),i=d(k,l)}return h}function g(a,b){return b[1]===b[b.length-1]}for(var h=0|b.length,i=a.length,j=[new Array(h),new Array(h)],k=0;h>k;++k)j[0][k]=[],j[1][k]=[];for(var k=0;i>k;++k){var l=a[k];j[0][l[0]].push(l),j[1][l[1]].push(l)}for(var m=[],k=0;h>k;++k)j[0][k].length+j[1][k].length===0&&m.push([k]);for(var k=0;h>k;++k)for(var n=0;2>n;++n){for(var o=[];j[n][k].length>0;){var p=(j[0][k].length,f(k,n));g(o,p)?o.push.apply(o,p):(o.length>0&&m.push(o),o=p)}o.length>0&&m.push(o)}return m}b.exports=d;var e=a("compare-angle")},{"compare-angle":101}],483:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a,b.length),d=new Array(b.length),f=new Array(b.length),g=[],h=0;h<b.length;++h){var i=c[h].length;f[h]=i,d[h]=!0,1>=i&&g.push(h)}for(;g.length>0;){var j=g.pop();d[j]=!1;for(var k=c[j],h=0;h<k.length;++h){var l=k[h];0===--f[l]&&g.push(l)}}for(var m=new Array(b.length),n=[],h=0;h<b.length;++h)if(d[h]){var j=n.length;m[h]=j,n.push(b[h])}else m[h]=-1;for(var o=[],h=0;h<a.length;++h){var p=a[h];d[p[0]]&&d[p[1]]&&o.push([m[p[0]],m[p[1]]])}return[o,n]}b.exports=d;var e=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":128}],484:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a),d=0;a>d;++d)c[d]=b;return c}function e(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=[];return b}function f(a,b){function c(a){for(var c=a.length,d=[0],e=0;c>e;++e){var f=b[a[e]],g=b[a[(e+1)%c]],h=j(-f[0],f[1]),i=j(-f[0],g[1]),l=j(g[0],f[1]),m=j(g[0],g[1]);d=k(d,k(k(h,i),k(l,m)))}return d[d.length-1]>0}function f(a){for(var b=a.length,c=0;b>c;++c)if(!I[a[c]])return!1;return!0}var n=m(a,b);a=n[0],b=n[1];for(var o=b.length,p=(a.length,g(a,b.length)),q=0;o>q;++q)if(p[q].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var r=h(a,b);r=r.filter(c);for(var s=r.length,t=new Array(s),u=new Array(s),q=0;s>q;++q){t[q]=q;var v=new Array(s),w=r[q].map(function(a){return b[a]}),x=i([w]),y=0;a:for(var z=0;s>z;++z)if(v[z]=0,q!==z){for(var A=r[z],B=A.length,C=0;B>C;++C){var D=x(b[A[C]]);if(0!==D){0>D&&(v[z]=1,y+=1);continue a}}v[z]=1,y+=1}u[q]=[y,q,v]}u.sort(function(a,b){return b[0]-a[0]});for(var q=0;s>q;++q)for(var v=u[q],E=v[1],F=v[2],z=0;s>z;++z)F[z]&&(t[z]=E);for(var G=e(s),q=0;s>q;++q)G[q].push(t[q]),G[t[q]].push(q);for(var H={},I=d(o,!1),q=0;s>q;++q)for(var A=r[q],B=A.length,z=0;B>z;++z){var J=A[z],K=A[(z+1)%B],L=Math.min(J,K)+":"+Math.max(J,K);if(L in H){var M=H[L];G[M].push(q),G[q].push(M),I[J]=I[K]=!0}else H[L]=q}for(var N=[],O=d(s,-1),q=0;s>q;++q)t[q]!==q||f(r[q])?O[q]=-1:(N.push(q),O[q]=0);for(var n=[];N.length>0;){var P=N.pop(),Q=G[P];l(Q,function(a,b){return a-b});var R,S=Q.length,T=O[P];if(0===T){var A=r[P];R=[A]}for(var q=0;S>q;++q){var U=Q[q];if(!(O[U]>=0)&&(O[U]=1^T,N.push(U),0===T)){var A=r[U];f(A)||(A.reverse(),R.push(A))}}0===T&&n.push(R)}return n}b.exports=f;var g=a("edges-to-adjacency-list"),h=a("planar-dual"),i=a("point-in-big-polygon"),j=a("two-product"),k=a("robust-sum"),l=a("uniq"),m=a("./lib/trim-leaves")},{"./lib/trim-leaves":483,"edges-to-adjacency-list":128,"planar-dual":482,"point-in-big-polygon":486,"robust-sum":522,"two-product":548,uniq:552}],485:[function(a,b,c){"use strict";function d(a,b){this.x=a,this.y=b}b.exports=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var b=a.x-this.x,c=a.y-this.y;return b*b+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,b){return Math.atan2(this.x*b-this.y*a,this.x*a+this.y*b)},_matMult:function(a){var b=a[0]*this.x+a[1]*this.y,c=a[2]*this.x+a[3]*this.y;return this.x=b,this.y=c,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y,e=c*this.x+b*this.y;return this.x=d,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{}],486:[function(a,b,c){function d(){return!0}function e(a){return function(b,c){var e=a[b];return e?!!e.queryPoint(c,d):!1}}function f(a){for(var b={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],h=d[1][1],i=[Math.min(g,h),Math.max(g,h)];f in b?b[f].push(i):b[f]=[i]}for(var j={},k=Object.keys(b),c=0;c<k.length;++c){var l=b[k[c]];j[k[c]]=n(l)}return e(j)}function g(a,b){return function(c){var d=o.le(b,c[0]);if(0>d)return 1;var e=a[d];if(!e){if(!(d>0&&b[d]===c[0]))return 1;e=a[d-1]}for(var f=1;e;){var g=e.key,h=l(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>h)e=e.left;else{if(!(h>0))return 0;f=-1,e=e.right}else if(h>0)e=e.left;else{if(!(0>h))return 0;f=1,e=e.right}}return f}}function h(a){return 1}function i(a){return function(b){return a(b[0],b[1])?0:1}}function j(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}function k(a){for(var b=a.length,c=[],d=[],e=0;b>e;++e)for(var k=a[e],l=k.length,n=l-1,o=0;l>o;n=o++){var p=k[n],q=k[o];p[0]===q[0]?d.push([p,q]):c.push([p,q])}if(0===c.length)return 0===d.length?h:i(f(d));var r=m(c),s=g(r.slabs,r.coordinates);return 0===d.length?s:j(f(d),s)}b.exports=k;var l=a("robust-orientation")[3],m=a("slab-decomposition"),n=a("interval-tree-1d"),o=a("binary-search-bounds")},{"binary-search-bounds":67,"interval-tree-1d":292,"robust-orientation":517,"slab-decomposition":534}],487:[function(a,b,c){function d(a,b,c){var d=e.segments(a),f=e.segments(b),g=e.combine(d,f),h=c(g);return e.polygon(h)}var e,f=a("./lib/build-log"),g=a("./lib/epsilon"),h=a("./lib/intersecter"),i=a("./lib/segment-chainer"),j=a("./lib/segment-selector"),k=a("./lib/geojson"),l=!1,m=g();e={buildLog:function(a){return a===!0?l=f():a===!1&&(l=!1),l===!1?!1:l.list},epsilon:function(a){return m.epsilon(a)},segments:function(a){var b=h(!0,m,l);return a.regions.forEach(b.addRegion),{segments:b.calculate(a.inverted),inverted:a.inverted}},combine:function(a,b){var c=h(!1,m,l);return{combined:c.calculate(a.segments,a.inverted,b.segments,b.inverted),inverted1:a.inverted,inverted2:b.inverted}},selectUnion:function(a){return{segments:j.union(a.combined,l),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:j.intersect(a.combined,l),inverted:a.inverted1&&a.inverted2}},selectDifference:function(a){return{segments:j.difference(a.combined,l),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:j.differenceRev(a.combined,l),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:j.xor(a.combined,l),inverted:a.inverted1!==a.inverted2}},polygon:function(a){return{regions:i(a.segments,m,l),inverted:a.inverted}},polygonFromGeoJSON:function(a){return k.toPolygon(e,a)},polygonToGeoJSON:function(a){return k.fromPolygon(e,m,a)},union:function(a,b){return d(a,b,e.selectUnion)},intersect:function(a,b){return d(a,b,e.selectIntersect)},difference:function(a,b){return d(a,b,e.selectDifference)},differenceRev:function(a,b){return d(a,b,e.selectDifferenceRev)},xor:function(a,b){return d(a,b,e.selectXor)}},"object"==typeof window&&(window.PolyBool=e),b.exports=e},{"./lib/build-log":488,"./lib/epsilon":489,"./lib/geojson":490,"./lib/intersecter":491,"./lib/segment-chainer":493,"./lib/segment-selector":494}],488:[function(a,b,c){function d(){function a(a,c){return b.list.push({type:a,data:c?JSON.parse(JSON.stringify(c)):void 0}),b}var b,c=0,d=!1;return b={list:[],segmentId:function(){return c++},checkIntersection:function(b,c){return a("check",{seg1:b,seg2:c})},segmentChop:function(b,c){return a("div_seg",{seg:b,pt:c}),a("chop",{seg:b,pt:c})},statusRemove:function(b){return a("pop_seg",{seg:b})},segmentUpdate:function(b){return a("seg_update",{seg:b})},segmentNew:function(b,c){return a("new_seg",{seg:b,primary:c})},segmentRemove:function(b){return a("rem_seg",{seg:b})},tempStatus:function(b,c,d){return a("temp_status",{seg:b,above:c,below:d})},rewind:function(b){return a("rewind",{seg:b})},status:function(b,c,d){return a("status",{seg:b,above:c,below:d})},vert:function(c){return c===d?b:(d=c,a("vert",{x:c}))},log:function(b){return"string"!=typeof b&&(b=JSON.stringify(b,!1,"  ")),a("log",{txt:b})},reset:function(){return a("reset")},selected:function(b){return a("selected",{segs:b})},chainStart:function(b){return a("chain_start",{seg:b})},chainRemoveHead:function(b,c){return a("chain_rem_head",{index:b,pt:c})},chainRemoveTail:function(b,c){return a("chain_rem_tail",{index:b,pt:c})},chainNew:function(b,c){return a("chain_new",{pt1:b,pt2:c})},chainMatch:function(b){return a("chain_match",{index:b})},chainClose:function(b){return a("chain_close",{index:b})},chainAddHead:function(b,c){return a("chain_add_head",{index:b,pt:c})},chainAddTail:function(b,c){return a("chain_add_tail",{index:b,pt:c})},chainConnect:function(b,c){return a("chain_con",{index1:b,index2:c})},chainReverse:function(b){return a("chain_rev",{index:b})},chainJoin:function(b,c){return a("chain_join",{index1:b,index2:c})},done:function(){return a("done")}}}b.exports=d},{}],489:[function(a,b,c){function d(a){"number"!=typeof a&&(a=1e-10);var b={epsilon:function(b){return"number"==typeof b&&(a=b),a},pointAboveOrOnLine:function(b,c,d){var e=c[0],f=c[1],g=d[0],h=d[1],i=b[0],j=b[1];return(g-e)*(j-f)-(h-f)*(i-e)>=-a},pointBetween:function(b,c,d){var e=b[1]-c[1],f=d[0]-c[0],g=b[0]-c[0],h=d[1]-c[1],i=g*f+e*h;if(a>i)return!1;var j=f*f+h*h;return i-j>-a?!1:!0},pointsSameX:function(b,c){return Math.abs(b[0]-c[0])<a},pointsSameY:function(b,c){return Math.abs(b[1]-c[1])<a},pointsSame:function(a,c){return b.pointsSameX(a,c)&&b.pointsSameY(a,c)},pointsCompare:function(a,c){return b.pointsSameX(a,c)?b.pointsSameY(a,c)?0:a[1]<c[1]?-1:1:a[0]<c[0]?-1:1},pointsCollinear:function(b,c,d){var e=b[0]-c[0],f=b[1]-c[1],g=c[0]-d[0],h=c[1]-d[1];return Math.abs(e*h-g*f)<a},linesIntersect:function(b,c,d,e){var f=c[0]-b[0],g=c[1]-b[1],h=e[0]-d[0],i=e[1]-d[1],j=f*i-g*h;if(Math.abs(j)<a)return!1;var k=b[0]-d[0],l=b[1]-d[1],m=(h*l-i*k)/j,n=(f*l-g*k)/j,o={alongA:0,alongB:0,pt:[b[0]+m*f,b[1]+m*g]};return-a>=m?o.alongA=-2:a>m?o.alongA=-1:-a>=m-1?o.alongA=0:a>m-1?o.alongA=1:o.alongA=2,-a>=n?o.alongB=-2:a>n?o.alongB=-1:-a>=n-1?o.alongB=0:a>n-1?o.alongB=1:o.alongB=2,o},pointInsideRegion:function(b,c){for(var d=b[0],e=b[1],f=c[c.length-1][0],g=c[c.length-1][1],h=!1,i=0;i<c.length;i++){var j=c[i][0],k=c[i][1];k-e>a!=g-e>a&&(f-j)*(e-k)/(g-k)+j-d>a&&(h=!h),f=j,g=k}return h}};return b}b.exports=d},{}],490:[function(a,b,c){var d={toPolygon:function(a,b){function c(b){function c(b){var c=b.slice(0,b.length-1);return a.segments({inverted:!1,regions:[c]})}if(b.length<=0)return a.segments({inverted:!1,regions:[]});for(var d=c(b[0]),e=1;e<b.length;e++)d=a.selectDifference(a.combine(d,c(b[e])));return d}if("Polygon"===b.type)return a.polygon(c(b.coordinates));if("MultiPolygon"===b.type){for(var d=a.segments({inverted:!1,regions:[]}),e=0;e<b.coordinates.length;e++)d=a.selectUnion(a.combine(d,c(b.coordinates[e])));return a.polygon(d)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(a,b,c){function d(a,c){return b.pointInsideRegion([.5*(a[0][0]+a[1][0]),.5*(a[0][1]+a[1][1])],c)}function e(a){return{region:a,children:[]}}function f(a,b){for(var c=0;c<a.children.length;c++){var g=a.children[c];if(d(b,g.region))return void f(g,b)}for(var h=e(b),c=0;c<a.children.length;c++){var g=a.children[c];d(g.region,b)&&(h.children.push(g),a.children.splice(c,1),c--)}a.children.push(h)}function g(a,b){for(var c=0,d=a[a.length-1][0],e=a[a.length-1][1],f=[],g=0;g<a.length;g++){var h=a[g][0],i=a[g][1];f.push([h,i]),c+=i*d-h*e,d=h,e=i}var j=0>c;return j!==b&&f.reverse(),f.push([f[0][0],f[0][1]]),f}function h(a){var b=[g(a.region,!1)];m.push(b);for(var c=0;c<a.children.length;c++)b.push(i(a.children[c]))}function i(a){for(var b=0;b<a.children.length;b++)h(a.children[b]);return g(a.region,!0)}c=a.polygon(a.segments(c));for(var j=e(null),k=0;k<c.regions.length;k++){var l=c.regions[k];l.length<3||f(j,l)}for(var m=[],k=0;k<j.children.length;k++)h(j.children[k]);return m.length<=0?{type:"Polygon",coordinates:[]}:1==m.length?{type:"Polygon",coordinates:m[0]}:{type:"MultiPolygon",coordinates:m}}};b.exports=d},{}],491:[function(a,b,c){function d(a,b,c){function d(a,b){return{id:c?c.segmentId():-1,start:a,end:b,myFill:{above:null,below:null},otherFill:null}}function f(a,b,d){return{id:c?c.segmentId():-1,start:a,end:b,myFill:{above:d.myFill.above,below:d.myFill.below},otherFill:null}}function g(a,c,d,e,f,g){var h=b.pointsCompare(c,f);return 0!==h?h:b.pointsSame(d,g)?0:a!==e?a?1:-1:b.pointAboveOrOnLine(d,e?f:g,e?g:f)?1:-1}function h(a,b){o.insertBefore(a,function(c){var d=g(a.isStart,a.pt,b,c.isStart,c.pt,c.other.pt);return 0>d})}function i(a,b){var c=e.node({isStart:!0,pt:a.start,seg:a,primary:b,other:null,status:null});return h(c,a.end),c}function j(a,b,c){var d=e.node({isStart:!1,pt:b.end,seg:b,primary:c,other:a,status:null});a.other=d,h(d,a.pt)}function k(a,b){var c=i(a,b);return j(c,a,b),c}function l(a,b){c&&c.segmentChop(a.seg,b),a.other.remove(),a.seg.end=b,a.other.pt=b,h(a.other,a.pt)}function m(a,b){var c=f(b,a.seg.end,a.seg);return l(a,b),k(c,a.primary)}function n(d,f){function g(a,c){var d=a.seg.start,e=a.seg.end,f=c.seg.start,g=c.seg.end;return b.pointsCollinear(d,f,g)?b.pointsCollinear(e,f,g)?1:b.pointAboveOrOnLine(e,f,g)?1:-1:b.pointAboveOrOnLine(d,f,g)?1:-1}function h(a){return k.findTransition(function(b){var c=g(a,b.ev);return c>0})}function i(a,d){var e=a.seg,f=d.seg,g=e.start,h=e.end,i=f.start,j=f.end;c&&c.checkIntersection(e,f);var k=b.linesIntersect(g,h,i,j);if(k===!1){if(!b.pointsCollinear(g,h,i))return!1;if(b.pointsSame(g,j)||b.pointsSame(h,i))return!1;var l=b.pointsSame(g,i),n=b.pointsSame(h,j);if(l&&n)return d;var o=!l&&b.pointBetween(g,i,j),p=!n&&b.pointBetween(h,i,j);
if(l)return p?m(d,h):m(a,j),d;o&&(n||(p?m(d,h):m(a,j)),m(d,g))}else 0===k.alongA&&(-1===k.alongB?m(a,i):0===k.alongB?m(a,k.pt):1===k.alongB&&m(a,j)),0===k.alongB&&(-1===k.alongA?m(d,g):0===k.alongA?m(d,k.pt):1===k.alongA&&m(d,h));return!1}function j(){if(q){var a=i(n,q);if(a)return a}return r?i(n,r):!1}for(var k=e.create(),l=[];!o.isEmpty();){var n=o.getHead();if(c&&c.vert(n.pt[0]),n.isStart){c&&c.segmentNew(n.seg,n.primary);var p=h(n),q=p.before?p.before.ev:null,r=p.after?p.after.ev:null;c&&c.tempStatus(n.seg,q?q.seg:!1,r?r.seg:!1);var s=j();if(s){if(a){var t;t=null===n.seg.myFill.below?!0:n.seg.myFill.above!==n.seg.myFill.below,t&&(s.seg.myFill.above=!s.seg.myFill.above)}else s.seg.otherFill=n.seg.myFill;c&&c.segmentUpdate(s.seg),n.other.remove(),n.remove()}if(o.getHead()!==n){c&&c.rewind(n.seg);continue}if(a){var t;t=null===n.seg.myFill.below?!0:n.seg.myFill.above!==n.seg.myFill.below,r?n.seg.myFill.below=r.seg.myFill.above:n.seg.myFill.below=d,t?n.seg.myFill.above=!n.seg.myFill.below:n.seg.myFill.above=n.seg.myFill.below}else if(null===n.seg.otherFill){var u;u=r?n.primary===r.primary?r.seg.otherFill.above:r.seg.myFill.above:n.primary?f:d,n.seg.otherFill={above:u,below:u}}c&&c.status(n.seg,q?q.seg:!1,r?r.seg:!1),n.other.status=p.insert(e.node({ev:n}))}else{var v=n.status;if(null===v)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(k.exists(v.prev)&&k.exists(v.next)&&i(v.prev.ev,v.next.ev),c&&c.statusRemove(v.ev.seg),v.remove(),!n.primary){var w=n.seg.myFill;n.seg.myFill=n.seg.otherFill,n.seg.otherFill=w}l.push(n.seg)}o.getHead().remove()}return c&&c.done(),l}var o=e.create();return a?{addRegion:function(a){for(var c,e=a[a.length-1],f=0;f<a.length;f++){c=e,e=a[f];var g=b.pointsCompare(c,e);0!==g&&k(d(0>g?c:e,0>g?e:c),!0)}},calculate:function(a){return n(a,!1)}}:{calculate:function(a,b,c,d){return a.forEach(function(a){k(f(a.start,a.end,a),!0)}),c.forEach(function(a){k(f(a.start,a.end,a),!1)}),n(b,d)}}}var e=a("./linked-list");b.exports=d},{"./linked-list":492}],492:[function(a,b,c){var d={create:function(){var a={root:{root:!0,next:null},exists:function(b){return null===b||b===a.root?!1:!0},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(b,c){for(var d=a.root,e=a.root.next;null!==e;){if(c(e))return b.prev=e.prev,b.next=e,e.prev.next=b,void(e.prev=b);d=e,e=e.next}d.next=b,b.prev=d,b.next=null},findTransition:function(b){for(var c=a.root,d=a.root.next;null!==d&&!b(d);)c=d,d=d.next;return{before:c===a.root?null:c,after:d,insert:function(a){return a.prev=c,a.next=d,c.next=a,null!==d&&(d.prev=a),a}}}};return a},node:function(a){return a.prev=null,a.next=null,a.remove=function(){a.prev.next=a.next,a.next&&(a.next.prev=a.prev),a.prev=null,a.next=null},a}};b.exports=d},{}],493:[function(a,b,c){function d(a,b,c){var d=[],e=[];return a.forEach(function(a){function f(a,b,c){return m.index=a,m.matches_head=b,m.matches_pt1=c,m===k?(m=l,!1):(m=null,!0)}function g(a){c&&c.chainReverse(a),d[a].reverse()}function h(a,e){var f=d[a],g=d[e],h=f[f.length-1],i=f[f.length-2],j=g[0],k=g[1];b.pointsCollinear(i,h,j)&&(c&&c.chainRemoveTail(a,h),f.pop(),h=i),b.pointsCollinear(h,j,k)&&(c&&c.chainRemoveHead(e,j),g.shift()),c&&c.chainJoin(a,e),d[a]=f.concat(g),d.splice(e,1)}var i=a.start,j=a.end;if(b.pointsSame(i,j))return void console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");c&&c.chainStart(a);for(var k={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},m=k,n=0;n<d.length;n++){var o=d[n],p=o[0],q=(o[1],o[o.length-1]);o[o.length-2];if(b.pointsSame(p,i)){if(f(n,!0,!0))break}else if(b.pointsSame(p,j)){if(f(n,!0,!1))break}else if(b.pointsSame(q,i)){if(f(n,!1,!0))break}else if(b.pointsSame(q,j)&&f(n,!1,!1))break}if(m===k)return d.push([i,j]),void(c&&c.chainNew(i,j));if(m===l){c&&c.chainMatch(k.index);var r=k.index,s=k.matches_pt1?j:i,t=k.matches_head,o=d[r],u=t?o[0]:o[o.length-1],v=t?o[1]:o[o.length-2],w=t?o[o.length-1]:o[0],x=t?o[o.length-2]:o[1];return b.pointsCollinear(v,u,s)&&(t?(c&&c.chainRemoveHead(k.index,s),o.shift()):(c&&c.chainRemoveTail(k.index,s),o.pop()),u=v),b.pointsSame(w,s)?(d.splice(r,1),b.pointsCollinear(x,w,u)&&(t?(c&&c.chainRemoveTail(k.index,u),o.pop()):(c&&c.chainRemoveHead(k.index,u),o.shift())),c&&c.chainClose(k.index),void e.push(o)):void(t?(c&&c.chainAddHead(k.index,s),o.unshift(s)):(c&&c.chainAddTail(k.index,s),o.push(s)))}var y=k.index,z=l.index;c&&c.chainConnect(y,z);var A=d[y].length<d[z].length;k.matches_head?l.matches_head?A?(g(y),h(y,z)):(g(z),h(z,y)):h(z,y):l.matches_head?h(y,z):A?(g(y),h(z,y)):(g(z),h(y,z))}),e}b.exports=d},{}],494:[function(a,b,c){function d(a,b,c){var d=[];return a.forEach(function(a){var e=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);0!==b[e]&&d.push({id:c?c.segmentId():-1,start:a.start,end:a.end,myFill:{above:1===b[e],below:2===b[e]},otherFill:null})}),c&&c.selected(d),d}var e={union:function(a,b){return d(a,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],b)},intersect:function(a,b){return d(a,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],b)},difference:function(a,b){return d(a,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],b)},differenceRev:function(a,b){return d(a,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],b)},xor:function(a,b){return d(a,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],b)}};b.exports=e},{}],495:[function(a,b,c){"use strict";function d(a,b,c,d,h){e.length<d.length&&(e=new Float64Array(d.length),f=new Float64Array(d.length),g=new Float64Array(d.length));for(var i=0;i<d.length;++i)e[i]=a[i]-d[i],f[i]=b[i]-a[i],g[i]=c[i]-a[i];for(var j=0,k=0,l=0,m=0,n=0,o=0,i=0;i<d.length;++i){var p=f[i],q=g[i],r=e[i];j+=p*p,k+=p*q,l+=q*q,m+=r*p,n+=r*q,o+=r*r}var s,t=Math.abs(j*l-k*k),u=k*n-l*m,v=k*m-j*n;if(t>=u+v)if(0>u)0>v&&0>m?(v=0,-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o)):(u=0,n>=0?(v=0,s=o):-n>=l?(v=1,s=l+2*n+o):(v=-n/l,s=n*v+o));else if(0>v)v=0,m>=0?(u=0,s=o):-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o);else{var w=1/t;u*=w,v*=w,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o}else{var x,y,z,A;0>u?(x=k+m,y=l+n,y>x?(z=y-x,A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(u=0,0>=y?(v=1,s=l+2*n+o):n>=0?(v=0,s=o):(v=-n/l,s=n*v+o))):0>v?(x=k+n,y=j+m,y>x?(z=y-x,A=j-2*k+l,z>=A?(v=1,u=0,s=l+2*n+o):(v=z/A,u=1-v,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(v=0,0>=y?(u=1,s=j+2*m+o):m>=0?(u=0,s=o):(u=-m/j,s=m*u+o))):(z=l+n-k-m,0>=z?(u=0,v=1,s=l+2*n+o):(A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)))}for(var B=1-u-v,i=0;i<d.length;++i)h[i]=B*a[i]+u*b[i]+v*c[i];return 0>s?0:s}var e=new Float64Array(4),f=new Float64Array(4),g=new Float64Array(4);b.exports=d},{}],496:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],497:[function(b,c,d){(function(b){!function(e){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:x}function l(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;q>e;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=t>=i?y:i>=t+z?z:i-t,!(n>l);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;q>h;++h)p=a[h],128>p&&u.push(L(p));for(d=e=u.length,e&&u.push(E);q>d;){for(j=w,h=0;q>h;++h)p=a[h],p>=b&&j>p&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;q>h;++h)if(p=a[h],b>p&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=g>=n?y:n>=g+z?z:n-g,!(o>k);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;(t.global===t||t.window===t||t.self===t)&&(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],498:[function(a,b,c){b.exports=a("gl-quat/slerp")},{"gl-quat/slerp":232}],499:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],500:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],501:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":499,"./encode":500}],502:[function(a,b,c){"use strict";function d(a,b,c,g,h){for(c=c||0,g=g||a.length-1,h=h||f;g>c;){if(g-c>600){var i=g-c+1,j=b-c+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(0>j-i/2?-1:1),n=Math.max(c,Math.floor(b-j*l/i+m)),o=Math.min(g,Math.floor(b+(i-j)*l/i+m));d(a,b,n,o,h)}var p=a[b],q=c,r=g;for(e(a,c,b),h(a[g],p)>0&&e(a,c,g);r>q;){for(e(a,q,r),q++,r--;h(a[q],p)<0;)q++;for(;h(a[r],p)>0;)r--}0===h(a[c],p)?e(a,c,r):(r++,e(a,r,g)),b>=r&&(c=r+1),r>=b&&(g=r-1)}}function e(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function f(a,b){return b>a?-1:a>b?1:0}b.exports=d},{}],503:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;c>f;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/add");b.exports=d},{"big-rat/add":51}],504:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a.length),c=0;c<a.length;++c)b[c]=e(a[c]);return b}b.exports=d;var e=a("big-rat")},{"big-rat":54}],505:[function(a,b,c){"use strict";function d(a,b){for(var c=e(b),d=a.length,g=new Array(d),h=0;d>h;++h)g[h]=f(a[h],c);return g}var e=a("big-rat"),f=a("big-rat/mul");b.exports=d},{"big-rat":54,"big-rat/mul":63}],506:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;c>f;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/sub");b.exports=d},{"big-rat/sub":65}],507:[function(a,b,c){"use strict";function d(a){a.sort(f);for(var b=a.length,c=0,d=0;b>d;++d){var h=a[d],i=g(h);if(0!==i){if(c>0){var j=a[c-1];if(0===e(h,j)&&g(j)!==i){c-=1;continue}}a[c++]=h}}return a.length=c,a}var e=a("compare-cell"),f=a("compare-oriented-cell"),g=a("cell-orientation");b.exports=d},{"cell-orientation":86,"compare-cell":102,"compare-oriented-cell":103}],508:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.createREGL=e()}(this,function(){"use strict";function a(a){return"undefined"!=typeof btoa?btoa(a):"base64:"+a}function b(a){var b=new Error("(regl) "+a);throw console.error(b),b}function c(a,c){a||b(c)}function d(a){return a?": "+a:""}function e(a,c,e){a in c||b("unknown parameter ("+a+")"+d(e)+". possible values: "+Object.keys(c).join())}function f(a,c){$a(a)||b("invalid parameter type"+d(c)+". must be a typed array")}function g(a,c,e){typeof a!==c&&b("invalid parameter type"+d(e)+". expected "+c+", got "+typeof a)}function h(a,c){a>=0&&(0|a)===a||b("invalid parameter type, ("+a+")"+d(c)+". must be a nonnegative integer")}function i(a,c,e){c.indexOf(a)<0&&b("invalid value"+d(e)+". must be one of: "+c)}function j(a){Object.keys(a).forEach(function(a){ab.indexOf(a)<0&&b('invalid regl constructor argument "'+a+'". must be one of '+ab)})}function k(a,b){for(a+="";a.length<b;)a=" "+a;return a}function l(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function m(a,b){this.number=a,this.line=b,this.errors=[]}function n(a,b,c){this.file=a,this.line=b,this.message=c}function o(){var a=new Error,b=(a.stack||a).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);if(c)return c[1];var d=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b);return d?d[1]:"unknown"}function p(){var a=new Error,b=(a.stack||a).toString(),c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);if(c)return c[1];var d=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b);return d?d[1]:"unknown"}function q(b,c){var d=b.split("\n"),e=1,f=0,g={unknown:new l,0:new l};g.unknown.name=g[0].name=c||o(),g.unknown.lines.push(new m(0,""));for(var h=0;h<d.length;++h){var i=d[h],j=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(i);if(j)switch(j[1]){case"line":var k=/(\d+)(\s+\d+)?/.exec(j[2]);k&&(e=0|k[1],k[2]&&(f=0|k[2],f in g||(g[f]=new l)));break;case"define":var n=/SHADER_NAME(_B64)?\s+(.*)$/.exec(j[2]);n&&(g[f].name=n[1]?a(n[2]):n[2])}g[f].lines.push(new m(e++,i))}return Object.keys(g).forEach(function(a){var b=g[a];b.lines.forEach(function(a){b.index[a.number]=a})}),g}function r(a){var b=[];return a.split("\n").forEach(function(a){if(!(a.length<5)){var c=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(a);c?b.push(new n(0|c[1],0|c[2],c[3].trim())):a.length>0&&b.push(new n("unknown",0,a))}}),b}function s(a,b){b.forEach(function(b){var c=a[b.file];if(c){var d=c.index[b.line];if(d)return d.errors.push(b),void(c.hasErrors=!0)}a.unknown.hasErrors=!0,a.unknown.lines[0].errors.push(b)})}function t(a,b,d,e,f){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){var g=a.getShaderInfoLog(b),h=e===a.FRAGMENT_SHADER?"fragment":"vertex";A(d,"string",h+" shader source must be a string",f);var i=q(d,f),j=r(g);s(i,j),Object.keys(i).forEach(function(a){function b(a,b){d.push(a),e.push(b||"")}var c=i[a];if(c.hasErrors){var d=[""],e=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold"),c.lines.forEach(function(a){if(a.errors.length>0){b(k(a.number,4)+"|  ","background-color:yellow; font-weight:bold"),b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var c=0;a.errors.forEach(function(d){var e=d.message,f=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(e);if(f){var g=f[1];switch(e=f[2],g){case"assign":g="="}c=Math.max(a.line.indexOf(g,c),0)}else c=0;b(k("| ",6)),b(k("^^^",c+3)+"\n","font-weight:bold"),b(k("| ",6)),b(e+"\n","font-weight:bold")}),b(k("| ",6)+"\n")}else b(k(a.number,4)+"|  "),b(a.line+"\n","color:red")}),"undefined"!=typeof document?(e[0]=d.join("%c"),console.log.apply(console,e)):console.log(d.join(""))}}),c.raise("Error compiling "+h+" shader, "+i[0].name)}}function u(a,b,d,e,f){if(!a.getProgramParameter(b,a.LINK_STATUS)){var g=a.getProgramInfoLog(b),h=q(d,f),i=q(e,f),j='Error linking program with vertex shader, "'+i[0].name+'", and fragment shader "'+h[0].name+'"';"undefined"!=typeof document?console.log("%c"+j+"\n%c"+g,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(j+"\n"+g),c.raise(j)}}function v(a){a._commandRef=o()}function w(a,b,c,d){function e(a){return a?d.id(a):0}function f(a,b){Object.keys(b).forEach(function(b){a[d.id(b)]=!0})}v(a),a._fragId=e(a["static"].frag),a._vertId=e(a["static"].vert);var g=a._uniformSet={};f(g,b["static"]),f(g,b.dynamic);var h=a._attributeSet={};f(h,c["static"]),f(h,c.dynamic),a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic}function x(a,c){var d=p();b(a+" in command "+(c||o())+("unknown"===d?"":" called from "+d))}function y(a,b,c){a||x(b,c||o())}function z(a,b,c,e){a in b||x("unknown parameter ("+a+")"+d(c)+". possible values: "+Object.keys(b).join(),e||o())}function A(a,b,c,e){typeof a!==b&&x("invalid parameter type"+d(c)+". expected "+b+", got "+typeof a,e||o())}function B(a){a()}function C(a,b,c){a.texture?i(a.texture._texture.internalformat,b,"unsupported texture format for attachment"):i(a.renderbuffer._renderbuffer.format,c,"unsupported renderbuffer format for attachment")}function D(a,b){return a===pb||a===ob||a===qb?2:a===rb?4:tb[a]*b}function E(a){return!(a&a-1||!a)}function F(a,b,d){var e,f=b.width,g=b.height,h=b.channels;c(f>0&&f<=d.maxTextureSize&&g>0&&g<=d.maxTextureSize,"invalid texture shape"),(a.wrapS!==bb||a.wrapT!==bb)&&c(E(f)&&E(g),"incompatible wrap mode for texture, both width and height must be power of 2"),1===b.mipmask?1!==f&&1!==g&&c(a.minFilter!==db&&a.minFilter!==fb&&a.minFilter!==eb&&a.minFilter!==gb,"min filter requires mipmap"):(c(E(f)&&E(g),"texture must be a square power of 2 to support mipmapping"),c(b.mipmask===(f<<1)-1,"missing or incomplete mipmap data")),b.type===nb&&(d.extensions.indexOf("oes_texture_float_linear")<0&&c(a.minFilter===cb&&a.magFilter===cb,"filter not supported, must enable oes_texture_float_linear"),c(!a.genMipmaps,"mipmap generation not supported with float textures"));var i=b.images;for(e=0;16>e;++e)if(i[e]){var j=f>>e,k=g>>e;c(b.mipmask&1<<e,"missing mipmap data");var l=i[e];if(c(l.width===j&&l.height===k,"invalid shape for mip images"),c(l.format===b.format&&l.internalformat===b.internalformat&&l.type===b.type,"incompatible type for mip image"),l.compressed);else if(l.data){var m=Math.ceil(D(l.type,h)*j/l.unpackAlignment)*l.unpackAlignment;c(l.data.byteLength===m*k,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else a.genMipmaps||c(0===(b.mipmask&1<<e),"extra mipmap data");b.compressed&&c(!a.genMipmaps,"mipmap generation for compressed images not supported")}function G(a,b,d,e){var f=a.width,g=a.height,h=a.channels;c(f>0&&f<=e.maxTextureSize&&g>0&&g<=e.maxTextureSize,"invalid texture shape"),c(f===g,"cube map must be square"),c(b.wrapS===bb&&b.wrapT===bb,"wrap mode not supported by cube map");for(var i=0;i<d.length;++i){var j=d[i];c(j.width===f&&j.height===g,"inconsistent cube map face shape"),b.genMipmaps&&(c(!j.compressed,"can not generate mipmap for compressed textures"),c(1===j.mipmask,"can not specify mipmaps and generate mipmaps"));for(var k=j.images,l=0;16>l;++l){var m=k[l];if(m){var n=f>>l,o=g>>l;c(j.mipmask&1<<l,"missing mipmap data"),c(m.width===n&&m.height===o,"invalid shape for mip images"),c(m.format===a.format&&m.internalformat===a.internalformat&&m.type===a.type,"incompatible type for mip image"),m.compressed||(m.data?c(m.data.byteLength===n*o*Math.max(D(m.type,h),m.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):m.element||m.copy)}}}}function H(a,b){this.id=vb++,this.type=a,this.data=b}function I(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function J(a){if(0===a.length)return[];var b=a.charAt(0),c=a.charAt(a.length-1);if(a.length>1&&b===c&&('"'===b||"'"===b))return['"'+I(a.substr(1,a.length-2))+'"'];var d=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a);if(d)return J(a.substr(0,d.index)).concat(J(d[1])).concat(J(a.substr(d.index+d[0].length)));var e=a.split(".");if(1===e.length)return['"'+I(a)+'"'];for(var f=[],g=0;g<e.length;++g)f=f.concat(J(e[g]));return f}function K(a){return"["+J(a).join("][")+"]"}function L(a,b){return new H(a,K(b+""))}function M(a){return"function"==typeof a&&!a._reglType||a instanceof H}function N(a,b){return"function"==typeof a?new H(wb,a):a}function O(){var a={"":0},b=[""];return{id:function(c){var d=a[c];return d?d:(d=a[c]=b.length,b.push(c),d)},str:function(a){return b[a]}}}function P(a,b,c){function d(){var b=window.innerWidth,d=window.innerHeight;if(a!==document.body){var e=a.getBoundingClientRect();b=e.right-e.left,d=e.bottom-e.top}f.width=c*b,f.height=c*d,_a(f.style,{width:b+"px",height:d+"px"})}function e(){window.removeEventListener("resize",d),a.removeChild(f)}var f=document.createElement("canvas");return _a(f.style,{border:0,margin:0,padding:0,top:0,left:0}),a.appendChild(f),a===document.body&&(f.style.position="absolute",_a(a.style,{margin:0,padding:0})),window.addEventListener("resize",d,!1),d(),{canvas:f,onDestroy:e}}function Q(a,b){function c(c){try{return a.getContext(c,b)}catch(d){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function R(a){return"string"==typeof a.nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect}function S(a){return"function"==typeof a.drawArrays||"function"==typeof a.drawElements}function T(a){return"string"==typeof a?a.split():(ub(Array.isArray(a),"invalid extension array"),a)}function U(a){return"string"==typeof a?(ub("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(a)):a}function V(a){var b,c,d,e,f=a||{},g={},h=[],i=[],j="undefined"==typeof window?1:window.devicePixelRatio,k=!1,l=function(a){a&&ub.raise(a)},m=function(){};if("string"==typeof f?(ub("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),b=document.querySelector(f),ub(b,"invalid query string for element")):"object"==typeof f?R(f)?b=f:S(f)?(e=f,d=e.canvas):(ub.constructor(f),"gl"in f?e=f.gl:"canvas"in f?d=U(f.canvas):"container"in f&&(c=U(f.container)),"attributes"in f&&(g=f.attributes,ub.type(g,"object","invalid context attributes")),"extensions"in f&&(h=T(f.extensions)),"optionalExtensions"in f&&(i=T(f.optionalExtensions)),"onDone"in f&&(ub.type(f.onDone,"function","invalid or missing onDone callback"),l=f.onDone),"profile"in f&&(k=!!f.profile),"pixelRatio"in f&&(j=+f.pixelRatio,ub(j>0,"invalid pixel ratio"))):ub.raise("invalid arguments to regl"),b&&("canvas"===b.nodeName.toLowerCase()?d=b:c=b),!e){if(!d){ub("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var n=P(c||document.body,l,j);if(!n)return null;d=n.canvas,m=n.onDestroy}e=Q(d,g)}return e?{gl:e,canvas:d,container:c,extensions:h,optionalExtensions:i,pixelRatio:j,profile:k,onDone:l,onDestroy:m}:(m(),l("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function W(a,b){function c(b){ub.type(b,"string","extension name must be string");var c,e=b.toLowerCase();try{c=d[e]=a.getExtension(e)}catch(f){}return!!c}for(var d={},e=0;e<b.extensions.length;++e){var f=b.extensions[e];if(!c(f))return b.onDestroy(),b.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return b.optionalExtensions.forEach(c),{extensions:d,restore:function(){Object.keys(d).forEach(function(a){if(!c(a))throw new Error("(regl): error restoring extension "+a)})}}}function X(a){return!!a&&"object"==typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"==typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||$a(a.data))}function Y(a,b){for(var c=Array(a),d=0;a>d;++d)c[d]=b(d);return c}function Z(a){for(var b=16;1<<28>=b;b*=16)if(b>=a)return b;return 0}function $(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1}function _(a){var b=Z(a),c=ic[$(b)>>2];return c.length>0?c.pop():new ArrayBuffer(b)}function aa(a){ic[$(a.byteLength)>>2].push(a)}function ba(a,b){var c=null;switch(a){case bc:c=new Int8Array(_(b),0,b);break;case cc:c=new Uint8Array(_(b),0,b);break;case dc:c=new Int16Array(_(2*b),0,b);break;case ec:c=new Uint16Array(_(2*b),0,b);break;case fc:c=new Int32Array(_(4*b),0,b);break;case gc:c=new Uint32Array(_(4*b),0,b);break;case hc:c=new Float32Array(_(4*b),0,b);break;default:return null}return c.length!==b?c.subarray(0,b):c}function ca(a){aa(a.buffer)}function da(a,b,c){for(var d=0;b>d;++d)c[d]=a[d]}function ea(a,b,c,d){for(var e=0,f=0;b>f;++f)for(var g=a[f],h=0;c>h;++h)d[e++]=g[h]}function fa(a,b,c,d,e,f){for(var g=f,h=0;b>h;++h)for(var i=a[h],j=0;c>j;++j)for(var k=i[j],l=0;d>l;++l)e[g++]=k[l]}function ga(a,b,c,d,e){for(var f=1,g=c+1;g<b.length;++g)f*=b[g];var h=b[c];if(b.length-c===4){var i=b[c+1],j=b[c+2],k=b[c+3];for(g=0;h>g;++g)fa(a[g],i,j,k,d,e),e+=f}else for(g=0;h>g;++g)ga(a[g],b,c+1,d,e),e+=f}function ha(a,b,c,d){var e=1;if(b.length)for(var f=0;f<b.length;++f)e*=b[f];else e=0;var g=d||jc.allocType(c,e);switch(b.length){case 0:break;case 1:da(a,b[0],g);break;case 2:ea(a,b[0],b[1],g);break;case 3:fa(a,b[0],b[1],b[2],g,0);break;default:ga(a,b,0,g,0)}return g}function ia(a){for(var b=[],c=a;c.length;c=c[0])b.push(c.length);return b}function ja(a){return 0|Za[Object.prototype.toString.call(a)]}function ka(a,b){for(var c=0;c<b.length;++c)a[c]=b[c]}function la(a,b,c,d,e,f,g){for(var h=0,i=0;c>i;++i)for(var j=0;d>j;++j)a[h++]=b[e*i+f*j+g]}function ma(a,b,c){function d(b){this.id=l++,this.buffer=a.createBuffer(),this.type=b,this.usage=zc,this.byteLength=0,this.dimension=1,this.dtype=Bc,this.persistentData=null,c.profile&&(this.stats={size:0})}function e(a,b){var c=n.pop();return c||(c=new d(a)),c.bind(),h(c,b,Ac,0,1,!1),c}function f(a){n.push(a)}function g(b,c,d){b.byteLength=c.byteLength,a.bufferData(b.type,c,d)}function h(a,b,c,d,e,f){var h;if(a.usage=c,Array.isArray(b)){if(a.dtype=d||Cc,b.length>0){var i;if(Array.isArray(b[0])){h=yc(b);for(var j=1,k=1;k<h.length;++k)j*=h[k];a.dimension=j,i=xc(b,h,a.dtype),g(a,i,c),f?a.persistentData=i:jc.freeType(i)}else if("number"==typeof b[0]){a.dimension=e;var l=jc.allocType(a.dtype,b.length);ka(l,b),g(a,l,c),f?a.persistentData=l:jc.freeType(l)}else $a(b[0])?(a.dimension=b[0].length,a.dtype=d||ja(b[0])||Cc,i=xc(b,[b.length,b[0].length],a.dtype),g(a,i,c),f?a.persistentData=i:jc.freeType(i)):ub.raise("invalid buffer data")}}else if($a(b))a.dtype=d||ja(b),a.dimension=e,g(a,b,c),f&&(a.persistentData=new Uint8Array(new Uint8Array(b.buffer)));else if(X(b)){h=b.shape;var m=b.stride,n=b.offset,o=0,p=0,q=0,r=0;1===h.length?(o=h[0],p=1,q=m[0],r=0):2===h.length?(o=h[0],p=h[1],q=m[0],r=m[1]):ub.raise("invalid shape"),a.dtype=d||ja(b.data)||Cc,a.dimension=p;var s=jc.allocType(a.dtype,o*p);la(s,b.data,o,p,q,r,n),g(a,s,c),f?a.persistentData=s:jc.freeType(s)}else ub.raise("invalid buffer data")}function i(c){b.bufferCount--;var d=c.buffer;ub(d,"buffer must not be deleted already"),a.deleteBuffer(d),c.buffer=null,delete m[c.id]}function j(e,f,g,j){function k(b){var d=zc,e=null,f=0,g=0,i=1;return Array.isArray(b)||$a(b)||X(b)?e=b:"number"==typeof b?f=0|b:b&&(ub.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(ub(null===e||Array.isArray(e)||$a(e)||X(e),"invalid data for buffer"),e=b.data),"usage"in b&&(ub.parameter(b.usage,wc,"invalid buffer usage"),d=wc[b.usage]),"type"in b&&(ub.parameter(b.type,tc,"invalid buffer type"),g=tc[b.type]),"dimension"in b&&(ub.type(b.dimension,"number","invalid dimension"),i=0|b.dimension),"length"in b&&(ub.nni(f,"buffer length must be a nonnegative integer"),f=0|b.length)),o.bind(),e?h(o,e,d,g,i,j):(a.bufferData(o.type,f,d),o.dtype=g||Bc,o.usage=d,o.dimension=i,o.byteLength=f),c.profile&&(o.stats.size=o.byteLength*Dc[o.dtype]),k}function l(b,c){ub(c+b.byteLength<=o.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+c+" to a buffer of size "+o.byteLength),a.bufferSubData(o.type,c,b)}function n(a,b){var c,d=0|(b||0);if(o.bind(),Array.isArray(a)){if(a.length>0)if("number"==typeof a[0]){var e=jc.allocType(o.dtype,a.length);ka(e,a),l(e,d),jc.freeType(e)}else if(Array.isArray(a[0])||$a(a[0])){c=yc(a);var f=xc(a,c,o.dtype);l(f,d),jc.freeType(f)}else ub.raise("invalid buffer data")}else if($a(a))l(a,d);else if(X(a)){c=a.shape;var g=a.stride,h=0,i=0,j=0,m=0;1===c.length?(h=c[0],i=1,j=g[0],m=0):2===c.length?(h=c[0],i=c[1],j=g[0],m=g[1]):ub.raise("invalid shape");var n=Array.isArray(a.data)?o.dtype:ja(a.data),p=jc.allocType(n,h*i);la(p,a.data,h,i,j,m,a.offset),l(p,d),jc.freeType(p)}else ub.raise("invalid data for buffer subdata");return k}b.bufferCount++;var o=new d(f);return m[o.id]=o,g||k(e),k._reglType="buffer",k._buffer=o,k.subdata=n,c.profile&&(k.stats=o.stats),k.destroy=function(){i(o)},k}function k(){ac(m).forEach(function(b){b.buffer=a.createBuffer(),a.bindBuffer(b.type,b.buffer),a.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})}var l=0,m={};d.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)},d.prototype.destroy=function(){i(this)};var n=[];return c.profile&&(b.getTotalBufferSize=function(){var a=0;return Object.keys(m).forEach(function(b){a+=m[b].stats.size}),a}),{create:j,createStream:e,
destroyStream:f,clear:function(){ac(m).forEach(i),n.forEach(i)},getBuffer:function(a){return a&&a._buffer instanceof d?a._buffer:null},restore:k,_initBuffer:h}}function na(a,b,c,d){function e(a){this.id=l++,k[this.id]=this,this.buffer=a,this.primType=Nc,this.vertCount=0,this.type=0}function f(a){var b=n.pop();return b||(b=new e(c.create(null,Uc,!0,!1)._buffer)),h(b,a,Vc,-1,-1,0,0),b}function g(a){n.push(a)}function h(d,e,f,g,h,i,j){if(d.buffer.bind(),e){var k=j;j||$a(e)&&(!X(e)||$a(e.data))||(k=b.oes_element_index_uint?Tc:Rc),c._initBuffer(d.buffer,e,f,k,3)}else a.bufferData(Uc,i,f),d.buffer.dtype=l||Pc,d.buffer.usage=f,d.buffer.dimension=3,d.buffer.byteLength=i;var l=j;if(!j){switch(d.buffer.dtype){case Pc:case Oc:l=Pc;break;case Rc:case Qc:l=Rc;break;case Tc:case Sc:l=Tc;break;default:ub.raise("unsupported type for element array")}d.buffer.dtype=l}d.type=l,ub(l!==Tc||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var m=h;0>m&&(m=d.buffer.byteLength,l===Rc?m>>=1:l===Tc&&(m>>=2)),d.vertCount=m;var n=g;if(0>g){n=Nc;var o=d.buffer.dimension;1===o&&(n=Lc),2===o&&(n=Mc),3===o&&(n=Nc)}d.primType=n}function i(a){d.elementsCount--,ub(null!==a.buffer,"must not double destroy elements"),delete k[a.id],a.buffer.destroy(),a.buffer=null}function j(a,b){function f(a){if(a)if("number"==typeof a)g(a),j.primType=Nc,j.vertCount=0|a,j.type=Pc;else{var b=null,c=Wc,d=-1,e=-1,i=0,k=0;Array.isArray(a)||$a(a)||X(a)?b=a:(ub.type(a,"object","invalid arguments for elements"),"data"in a&&(b=a.data,ub(Array.isArray(b)||$a(b)||X(b),"invalid data for element buffer")),"usage"in a&&(ub.parameter(a.usage,wc,"invalid element buffer usage"),c=wc[a.usage]),"primitive"in a&&(ub.parameter(a.primitive,Kc,"invalid element buffer primitive"),d=Kc[a.primitive]),"count"in a&&(ub("number"==typeof a.count&&a.count>=0,"invalid vertex count for elements"),e=0|a.count),"type"in a&&(ub.parameter(a.type,m,"invalid buffer type"),k=m[a.type]),"length"in a?i=0|a.length:(i=e,k===Rc||k===Qc?i*=2:(k===Tc||k===Sc)&&(i*=4))),h(j,b,c,d,e,i,k)}else g(),j.primType=Nc,j.vertCount=0,j.type=Pc;return f}var g=c.create(null,Uc,!0),j=new e(g._buffer);return d.elementsCount++,f(a),f._reglType="elements",f._elements=j,f.subdata=function(a,b){return g.subdata(a,b),f},f.destroy=function(){i(j)},f}var k={},l=0,m={uint8:Pc,uint16:Rc};b.oes_element_index_uint&&(m.uint32=Tc),e.prototype.bind=function(){this.buffer.bind()};var n=[];return{create:j,createStream:f,destroyStream:g,getElements:function(a){return"function"==typeof a&&a._elements instanceof e?a._elements:null},clear:function(){ac(k).forEach(i)}}}function oa(a){for(var b=jc.allocType(Zc,a.length),c=0;c<a.length;++c)if(isNaN(a[c]))b[c]=65535;else if(a[c]===1/0)b[c]=31744;else if(a[c]===-(1/0))b[c]=64512;else{Xc[0]=a[c];var d=Yc[0],e=d>>>31<<15,f=(d<<1>>>24)-127,g=d>>13&1023;if(-24>f)b[c]=e;else if(-14>f){var h=-14-f;b[c]=e+(g+1024>>h)}else f>15?b[c]=e+31744:b[c]=e+(f+15<<10)+g}return b}function pa(a){return Array.isArray(a)||$a(a)}function qa(a){return"[object "+a+"]"}function ra(a){return Array.isArray(a)&&(0===a.length||"number"==typeof a[0])}function sa(a){if(!Array.isArray(a))return!1;var b=a.length;return 0!==b&&pa(a[0])?!0:!1}function ta(a){return Object.prototype.toString.call(a)}function ua(a){return ta(a)===ie}function va(a){return ta(a)===je}function wa(a){return ta(a)===ke}function xa(a){return ta(a)===le}function ya(a){if(!a)return!1;var b=ta(a);return me.indexOf(b)>=0?!0:ra(a)||sa(a)||X(a)}function za(a){return 0|Za[Object.prototype.toString.call(a)]}function Aa(a,b){var c=b.length;switch(a.type){case Fd:case Gd:case Hd:case Id:var d=jc.allocType(a.type,c);d.set(b),a.data=d;break;case sd:a.data=oa(b);break;default:ub.raise("unsupported texture type, must specify a typed array")}}function Ba(a,b){return jc.allocType(a.type===sd?Id:a.type,b)}function Ca(a,b){a.type===sd?(a.data=oa(b),jc.freeType(b)):a.data=b}function Da(a,b,c,d,e,f){for(var g=a.width,h=a.height,i=a.channels,j=g*h*i,k=Ba(a,j),l=0,m=0;h>m;++m)for(var n=0;g>n;++n)for(var o=0;i>o;++o)k[l++]=b[c*n+d*m+e*o+f];Ca(a,k)}function Ea(a,b,c,d,e,f){var g;if(g="undefined"!=typeof oe[a]?oe[a]:he[a]*ne[b],f&&(g*=6),e){for(var h=0,i=c;i>=1;)h+=g*i*i,i/=2;return h}return g*c*d}function Fa(a,b,c,d,e,f,g){function h(){this.internalformat=cd,this.format=cd,this.type=Fd,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function i(a,b){a.internalformat=b.internalformat,a.format=b.format,a.type=b.type,a.compressed=b.compressed,a.premultiplyAlpha=b.premultiplyAlpha,a.flipY=b.flipY,a.unpackAlignment=b.unpackAlignment,a.colorSpace=b.colorSpace,a.width=b.width,a.height=b.height,a.channels=b.channels}function j(a,d){if("object"==typeof d&&d){if("premultiplyAlpha"in d&&(ub.type(d.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=d.premultiplyAlpha),"flipY"in d&&(ub.type(d.flipY,"boolean","invalid texture flip"),a.flipY=d.flipY),"alignment"in d&&(ub.oneOf(d.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=d.alignment),"colorSpace"in d&&(ub.parameter(d.colorSpace,M,"invalid colorSpace"),a.colorSpace=M[d.colorSpace]),"type"in d){var e=d.type;ub(b.oes_texture_float||!("float"===e||"float32"===e),"you must enable the OES_texture_float extension in order to use floating point textures."),ub(b.oes_texture_half_float||!("half float"===e||"float16"===e),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ub(b.webgl_depth_texture||!("uint16"===e||"uint32"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ub.parameter(e,N,"invalid texture type"),a.type=N[e]}var f=a.width,g=a.height,h=a.channels,i=!1;"shape"in d?(ub(Array.isArray(d.shape)&&d.shape.length>=2,"shape must be an array"),f=d.shape[0],g=d.shape[1],3===d.shape.length&&(h=d.shape[2],ub(h>0&&4>=h,"invalid number of channels"),i=!0),ub(f>=0&&f<=c.maxTextureSize,"invalid width"),ub(g>=0&&g<=c.maxTextureSize,"invalid height")):("radius"in d&&(f=g=d.radius,ub(f>=0&&f<=c.maxTextureSize,"invalid radius")),"width"in d&&(f=d.width,ub(f>=0&&f<=c.maxTextureSize,"invalid width")),"height"in d&&(g=d.height,ub(g>=0&&g<=c.maxTextureSize,"invalid height")),"channels"in d&&(h=d.channels,ub(h>0&&4>=h,"invalid number of channels"),i=!0)),a.width=0|f,a.height=0|g,a.channels=0|h;var j=!1;if("format"in d){var k=d.format;ub(b.webgl_depth_texture||!("depth"===k||"depth stencil"===k),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ub.parameter(k,O,"invalid texture format");var l=a.internalformat=O[k];a.format=Y[l],k in N&&("type"in d||(a.type=N[k])),k in P&&(a.compressed=!0),j=!0}!i&&j?a.channels=he[a.format]:i&&!j?a.channels!==ge[a.format]&&(a.format=a.internalformat=ge[a.channels]):j&&i&&ub(a.channels===he[a.format],"number of channels inconsistent with specified format")}}function k(b){a.pixelStorei(ae,b.flipY),a.pixelStorei(be,b.premultiplyAlpha),a.pixelStorei(ce,b.colorSpace),a.pixelStorei(_d,b.unpackAlignment)}function l(){h.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function m(a,b){var d=null;if(ya(b)?d=b:b&&(ub.type(b,"object","invalid pixel data type"),j(a,b),"x"in b&&(a.xOffset=0|b.x),"y"in b&&(a.yOffset=0|b.y),ya(b.data)&&(d=b.data)),ub(!a.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),b.copy){ub(!d,"can not specify copy and data field for the same texture");var f=e.viewportWidth,g=e.viewportHeight;a.width=a.width||f-a.xOffset,a.height=a.height||g-a.yOffset,a.needsCopy=!0,ub(a.xOffset>=0&&a.xOffset<f&&a.yOffset>=0&&a.yOffset<g&&a.width>0&&a.width<=f&&a.height>0&&a.height<=g,"copy texture read out of bounds")}else if(d){if($a(d))a.channels=a.channels||4,a.data=d,"type"in b||a.type!==Fd||(a.type=za(d));else if(ra(d))a.channels=a.channels||4,Aa(a,d),a.alignment=1,a.needsFree=!0;else if(X(d)){var h=d.data;Array.isArray(h)||a.type!==Fd||(a.type=za(h));var i,k,l,m,n,o,p=d.shape,q=d.stride;3===p.length?(l=p[2],o=q[2]):(ub(2===p.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,o=1),i=p[0],k=p[1],m=q[0],n=q[1],a.alignment=1,a.width=i,a.height=k,a.channels=l,a.format=a.internalformat=ge[l],a.needsFree=!0,Da(a,h,m,n,o,d.offset)}else if(ua(d)||va(d))ua(d)?a.element=d:a.element=d.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(wa(d))a.element=d,a.width=d.naturalWidth,a.height=d.naturalHeight,a.channels=4;else if(xa(d))a.element=d,a.width=d.videoWidth,a.height=d.videoHeight,a.channels=4;else if(sa(d)){var r=a.width||d[0].length,s=a.height||d.length,t=a.channels;t=pa(d[0][0])?t||d[0][0].length:t||1;for(var u=kc.shape(d),v=1,w=0;w<u.length;++w)v*=u[w];var x=Ba(a,v);kc.flatten(d,u,"",x),Ca(a,x),a.alignment=1,a.width=r,a.height=s,a.channels=t,a.format=a.internalformat=ge[t],a.needsFree=!0}}else a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;a.type===Id?ub(c.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):a.type===sd&&ub(c.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function n(b,c,e){var f=b.element,g=b.data,h=b.internalformat,i=b.format,j=b.type,l=b.width,m=b.height;k(b),f?a.texImage2D(c,e,i,i,j,f):b.compressed?a.compressedTexImage2D(c,e,h,l,m,0,g):b.needsCopy?(d(),a.copyTexImage2D(c,e,i,b.xOffset,b.yOffset,l,m,0)):a.texImage2D(c,e,i,l,m,0,i,j,g)}function o(b,c,e,f,g){var h=b.element,i=b.data,j=b.internalformat,l=b.format,m=b.type,n=b.width,o=b.height;k(b),h?a.texSubImage2D(c,g,e,f,l,m,h):b.compressed?a.compressedTexSubImage2D(c,g,e,f,j,n,o,i):b.needsCopy?(d(),a.copyTexSubImage2D(c,g,e,f,b.xOffset,b.yOffset,n,o)):a.texSubImage2D(c,g,e,f,n,o,l,m,i)}function p(){return Z.pop()||new l}function q(a){a.needsFree&&jc.freeType(a.data),l.call(a),Z.push(a)}function r(){h.call(this),this.genMipmaps=!1,this.mipmapHint=Xd,this.mipmask=0,this.images=Array(16)}function s(a,b,c){var d=a.images[0]=p();a.mipmask=1,d.width=a.width=b,d.height=a.height=c,d.channels=a.channels=4}function t(a,b){var c=null;if(ya(b))c=a.images[0]=p(),i(c,a),m(c,b),a.mipmask=1;else if(j(a,b),Array.isArray(b.mipmap))for(var d=b.mipmap,e=0;e<d.length;++e)c=a.images[e]=p(),i(c,a),c.width>>=e,c.height>>=e,m(c,d[e]),a.mipmask|=1<<e;else c=a.images[0]=p(),i(c,a),m(c,b),a.mipmask=1;i(a,a.images[0]),(a.compressed&&a.internalformat===td||a.internalformat===ud||a.internalformat===vd||a.internalformat===wd)&&ub(a.width%4===0&&a.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function u(a,b){for(var c=a.images,d=0;d<c.length;++d){if(!c[d])return;n(c[d],b,d)}}function v(){var a=$.pop()||new r;h.call(a),a.mipmask=0;for(var b=0;16>b;++b)a.images[b]=null;return a}function w(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&q(b[c]),b[c]=null;$.push(a)}function x(){this.minFilter=Qd,this.magFilter=Qd,this.wrapS=Md,this.wrapT=Md,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Xd}function y(a,b){if("min"in b){var d=b.min;ub.parameter(d,L),a.minFilter=L[d],fe.indexOf(a.minFilter)>=0&&(a.genMipmaps=!0)}if("mag"in b){var e=b.mag;ub.parameter(e,K),a.magFilter=K[e]}var f=a.wrapS,g=a.wrapT;if("wrap"in b){var h=b.wrap;"string"==typeof h?(ub.parameter(h,J),f=g=J[h]):Array.isArray(h)&&(ub.parameter(h[0],J),ub.parameter(h[1],J),f=J[h[0]],g=J[h[1]])}else{if("wrapS"in b){var i=b.wrapS;ub.parameter(i,J),f=J[i]}if("wrapT"in b){var j=b.wrapT;ub.parameter(j,J),g=J[j]}}if(a.wrapS=f,a.wrapT=g,"anisotropic"in b){var k=b.anisotropic;ub("number"==typeof k&&k>=1&&k<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic}if("mipmap"in b){var l=!1;switch(typeof b.mipmap){case"string":ub.parameter(b.mipmap,I,"invalid mipmap hint"),a.mipmapHint=I[b.mipmap],a.genMipmaps=!0,l=!0;break;case"boolean":l=a.genMipmaps=b.mipmap;break;case"object":ub(Array.isArray(b.mipmap),"invalid mipmap type"),a.genMipmaps=!1,l=!0;break;default:ub.raise("invalid mipmap type")}!l||"min"in b||(a.minFilter=Sd)}}function z(c,d){a.texParameteri(d,Pd,c.minFilter),a.texParameteri(d,Od,c.magFilter),a.texParameteri(d,Jd,c.wrapS),a.texParameteri(d,Kd,c.wrapT),b.ext_texture_filter_anisotropic&&a.texParameteri(d,$d,c.anisotropic),c.genMipmaps&&(a.hint(Wd,c.mipmapHint),a.generateMipmap(d))}function A(b){h.call(this),this.mipmask=0,this.internalformat=cd,this.id=_++,this.refCount=1,this.target=b,this.texture=a.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new x,g.profile&&(this.stats={size:0})}function B(b){a.activeTexture(ee),a.bindTexture(b.target,b.texture)}function C(){var b=ca[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(_c,null)}function D(b){var c=b.texture;ub(c,"must not double destroy texture");var d=b.unit,e=b.target;d>=0&&(a.activeTexture(ee+d),a.bindTexture(e,null),ca[d]=null),a.deleteTexture(c),b.texture=null,b.params=null,b.pixels=null,b.refCount=0,delete aa[b.id],f.textureCount--}function E(b,d){function e(a,b){var d=k.texInfo;x.call(d);var f=v();return"number"==typeof a?"number"==typeof b?s(f,0|a,0|b):s(f,0|a,0|a):a?(ub.type(a,"object","invalid arguments to regl.texture"),y(d,a),t(f,a)):s(f,1,1),d.genMipmaps&&(f.mipmask=(f.width<<1)-1),k.mipmask=f.mipmask,i(k,f),ub.texture2D(d,f,c),k.internalformat=f.internalformat,e.width=f.width,e.height=f.height,B(k),u(f,_c),z(d,_c),C(),w(f),g.profile&&(k.stats.size=Ea(k.internalformat,k.type,f.width,f.height,d.genMipmaps,!1)),e.format=S[k.internalformat],e.type=T[k.type],e.mag=U[d.magFilter],e.min=V[d.minFilter],e.wrapS=W[d.wrapS],e.wrapT=W[d.wrapT],e}function h(a,b,c,d){ub(!!a,"must specify image data");var f=0|b,g=0|c,h=0|d,j=p();return i(j,k),j.width=0,j.height=0,m(j,a),j.width=j.width||(k.width>>h)-f,j.height=j.height||(k.height>>h)-g,ub(k.type===j.type&&k.format===j.format&&k.internalformat===j.internalformat,"incompatible format for texture.subimage"),ub(f>=0&&g>=0&&f+j.width<=k.width&&g+j.height<=k.height,"texture.subimage write out of bounds"),ub(k.mipmask&1<<h,"missing mipmap data"),ub(j.data||j.element||j.needsCopy,"missing image data"),B(k),o(j,_c,f,g,h),C(),q(j),e}function j(b,c){var d=0|b,f=0|c||d;if(d===k.width&&f===k.height)return e;e.width=k.width=d,e.height=k.height=f,B(k);for(var h=0;k.mipmask>>h;++h)a.texImage2D(_c,h,k.format,d>>h,f>>h,0,k.format,k.type,null);return C(),g.profile&&(k.stats.size=Ea(k.internalformat,k.type,d,f,!1,!1)),e}var k=new A(_c);return aa[k.id]=k,f.textureCount++,e(b,d),e.subimage=h,e.resize=j,e._reglType="texture2d",e._texture=k,g.profile&&(e.stats=k.stats),e.destroy=function(){k.decRef()},e}function F(b,d,e,h,k,l){function n(a,b,d,e,f,h){var k,l=E.texInfo;for(x.call(l),k=0;6>k;++k)F[k]=v();if("number"!=typeof a&&a)if("object"==typeof a)if(b)t(F[0],a),t(F[1],b),t(F[2],d),t(F[3],e),t(F[4],f),t(F[5],h);else if(y(l,a),j(E,a),"faces"in a){var m=a.faces;for(ub(Array.isArray(m)&&6===m.length,"cube faces must be a length 6 array"),k=0;6>k;++k)ub("object"==typeof m[k]&&!!m[k],"invalid input for cube map face"),i(F[k],E),t(F[k],m[k])}else for(k=0;6>k;++k)t(F[k],a);else ub.raise("invalid arguments to cube map");else{var o=0|a||1;for(k=0;6>k;++k)s(F[k],o,o)}for(i(E,F[0]),l.genMipmaps?E.mipmask=(F[0].width<<1)-1:E.mipmask=F[0].mipmask,ub.textureCube(E,l,F,c),E.internalformat=F[0].internalformat,n.width=F[0].width,n.height=F[0].height,B(E),k=0;6>k;++k)u(F[k],bd+k);for(z(l,ad),C(),g.profile&&(E.stats.size=Ea(E.internalformat,E.type,n.width,n.height,l.genMipmaps,!0)),n.format=S[E.internalformat],n.type=T[E.type],n.mag=U[l.magFilter],n.min=V[l.minFilter],n.wrapS=W[l.wrapS],n.wrapT=W[l.wrapT],k=0;6>k;++k)w(F[k]);return n}function r(a,b,c,d,e){ub(!!b,"must specify image data"),ub("number"==typeof a&&a===(0|a)&&a>=0&&6>a,"invalid face");var f=0|c,g=0|d,h=0|e,j=p();return i(j,E),j.width=0,j.height=0,m(j,b),j.width=j.width||(E.width>>h)-f,j.height=j.height||(E.height>>h)-g,ub(E.type===j.type&&E.format===j.format&&E.internalformat===j.internalformat,"incompatible format for texture.subimage"),ub(f>=0&&g>=0&&f+j.width<=E.width&&g+j.height<=E.height,"texture.subimage write out of bounds"),ub(E.mipmask&1<<h,"missing mipmap data"),ub(j.data||j.element||j.needsCopy,"missing image data"),B(E),o(j,bd+a,f,g,h),C(),q(j),n}function D(b){var c=0|b;if(c!==E.width){n.width=E.width=c,n.height=E.height=c,B(E);for(var d=0;6>d;++d)for(var e=0;E.mipmask>>e;++e)a.texImage2D(bd+d,e,E.format,c>>e,c>>e,0,E.format,E.type,null);return C(),g.profile&&(E.stats.size=Ea(E.internalformat,E.type,n.width,n.height,!1,!0)),n}}var E=new A(ad);aa[E.id]=E,f.cubeCount++;var F=new Array(6);return n(b,d,e,h,k,l),n.subimage=r,n.resize=D,n._reglType="textureCube",n._texture=E,g.profile&&(n.stats=E.stats),n.destroy=function(){E.decRef()},n}function G(){for(var b=0;ba>b;++b)a.activeTexture(ee+b),a.bindTexture(_c,null),ca[b]=null;ac(aa).forEach(D),f.cubeCount=0,f.textureCount=0}function H(){ac(aa).forEach(function(b){b.texture=a.createTexture(),a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(b.target===_c)a.texImage2D(_c,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(bd+d,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);z(b.texInfo,b.target)})}var I={"don't care":Xd,"dont care":Xd,nice:Zd,fast:Yd},J={repeat:Ld,clamp:Md,mirror:Nd},K={nearest:Qd,linear:Rd},L=_a({mipmap:Vd,"nearest mipmap nearest":Sd,"linear mipmap nearest":Td,"nearest mipmap linear":Ud,"linear mipmap linear":Vd},K),M={none:0,browser:de},N={uint8:Fd,rgba4:kd,rgb565:md,"rgb5 a1":ld},O={alpha:dd,luminance:fd,"luminance alpha":gd,rgb:ed,rgba:cd,rgba4:hd,"rgb5 a1":id,rgb565:jd},P={};b.ext_srgb&&(O.srgb=qd,O.srgba=rd),b.oes_texture_float&&(N.float32=N["float"]=Id),b.oes_texture_half_float&&(N.float16=N["half float"]=sd),b.webgl_depth_texture&&(_a(O,{depth:od,"depth stencil":pd}),_a(N,{uint16:Gd,uint32:Hd,"depth stencil":nd})),b.webgl_compressed_texture_s3tc&&_a(P,{"rgb s3tc dxt1":td,"rgba s3tc dxt1":ud,"rgba s3tc dxt3":vd,"rgba s3tc dxt5":wd}),b.webgl_compressed_texture_atc&&_a(P,{"rgb atc":xd,"rgba atc explicit alpha":yd,"rgba atc interpolated alpha":zd}),b.webgl_compressed_texture_pvrtc&&_a(P,{"rgb pvrtc 4bppv1":Ad,"rgb pvrtc 2bppv1":Bd,"rgba pvrtc 4bppv1":Cd,"rgba pvrtc 2bppv1":Dd}),b.webgl_compressed_texture_etc1&&(P["rgb etc1"]=Ed);var Q=Array.prototype.slice.call(a.getParameter($c));Object.keys(P).forEach(function(a){var b=P[a];Q.indexOf(b)>=0&&(O[a]=b)});var R=Object.keys(O);c.textureFormats=R;var S=[];Object.keys(O).forEach(function(a){var b=O[a];S[b]=a});var T=[];Object.keys(N).forEach(function(a){var b=N[a];T[b]=a});var U=[];Object.keys(K).forEach(function(a){var b=K[a];U[b]=a});var V=[];Object.keys(L).forEach(function(a){var b=L[a];V[b]=a});var W=[];Object.keys(J).forEach(function(a){var b=J[a];W[b]=a});var Y=R.reduce(function(a,b){var c=O[b];return c===fd||c===dd||c===fd||c===gd||c===od||c===pd?a[c]=c:c===id||b.indexOf("rgba")>=0?a[c]=cd:a[c]=ed,a},{}),Z=[],$=[],_=0,aa={},ba=c.maxTextureUnits,ca=Array(ba).map(function(){return null});return _a(A.prototype,{bind:function(){var b=this;b.bindCount+=1;var c=b.unit;if(0>c){for(var d=0;ba>d;++d){var e=ca[d];if(e){if(e.bindCount>0)continue;e.unit=-1}ca[d]=b,c=d;break}c>=ba&&ub.raise("insufficient number of texture units"),g.profile&&f.maxTextureUnits<c+1&&(f.maxTextureUnits=c+1),b.unit=c,a.activeTexture(ee+c),a.bindTexture(b.target,b.texture)}return c},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&D(this)}}),g.profile&&(f.getTotalTextureSize=function(){var a=0;return Object.keys(aa).forEach(function(b){a+=aa[b].stats.size}),a}),{create2D:E,createCube:F,clear:G,getTexture:function(a){return null},restore:H}}function Ga(a,b,c){return Ae[a]*b*c}function Ha(a,b,c,d,e,f){function g(a,b,c){this.target=a,this.texture=b,this.renderbuffer=c;var d=0,e=0;b?(d=b.width,e=b.height):c&&(d=c.width,e=c.height),this.width=d,this.height=e}function h(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function i(a,b,c){if(a)if(a.texture){var d=a.texture._texture,e=Math.max(1,d.width),f=Math.max(1,d.height);ub(e===b&&f===c,"inconsistent width/height for supplied texture"),d.refCount+=1}else{var g=a.renderbuffer._renderbuffer;ub(g.width===b&&g.height===c,"inconsistent width/height for renderbuffer"),g.refCount+=1}}function j(b,c){c&&(c.texture?a.framebufferTexture2D(Ce,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(Ce,b,De,c.renderbuffer._renderbuffer.renderbuffer))}function k(a){var b=Ee,c=null,d=null,e=a;"object"==typeof a&&(e=a.data,"target"in a&&(b=0|a.target)),ub.type(e,"function","invalid attachment data");var f=e._reglType;return"texture2d"===f?(c=e,ub(b===Ee)):"textureCube"===f?(c=e,ub(b>=Fe&&Fe+6>b,"invalid cube map target")):"renderbuffer"===f?(d=e,b=De):ub.raise("invalid regl object for attachment"),new g(b,c,d)}function l(a,b,c,f,h){if(c){var i=d.create2D({width:a,height:b,format:f,type:h});return i._texture.refCount=0,new g(Ee,i,null)}var j=e.create({width:a,height:b,format:f});return j._renderbuffer.refCount=0,new g(De,null,j)}function m(a){return a&&(a.texture||a.renderbuffer)}function n(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c))}function o(){this.id=z++,A[this.id]=this,this.framebuffer=a.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function p(a){a.colorAttachments.forEach(h),h(a.depthAttachment),h(a.stencilAttachment),h(a.depthStencilAttachment)}function q(b){var c=b.framebuffer;ub(c,"must not double destroy framebuffer"),a.deleteFramebuffer(c),b.framebuffer=null,f.framebufferCount--,delete A[b.id]}function r(b){var d;a.bindFramebuffer(Ce,b.framebuffer);var e=b.colorAttachments;for(d=0;d<e.length;++d)j(Ge+d,e[d]);for(d=e.length;d<c.maxColorAttachments;++d)a.framebufferTexture2D(Ce,Ge+d,Ee,null,0);a.framebufferTexture2D(Ce,Je,Ee,null,0),a.framebufferTexture2D(Ce,He,Ee,null,0),a.framebufferTexture2D(Ce,Ie,Ee,null,0),j(He,b.depthAttachment),j(Ie,b.stencilAttachment),j(Je,b.depthStencilAttachment);var f=a.checkFramebufferStatus(Ce);f!==Ke&&ub.raise("framebuffer configuration not supported, status = "+gf[f]),a.bindFramebuffer(Ce,v.next),v.cur=v.next,a.getError()}function s(a,d){function e(a,d){var f;ub(v.next!==h,"can not update framebuffer which is currently in use");var g=b.webgl_draw_buffers,j=0,n=0,o=!0,q=!0,s=null,t=!0,u="rgba",z="uint8",A=1,B=null,C=null,D=null,E=!1;if("number"==typeof a)j=0|a,n=0|d||j;else if(a){ub.type(a,"object","invalid arguments for framebuffer");var F=a;if("shape"in F){var G=F.shape;ub(Array.isArray(G)&&G.length>=2,"invalid shape for framebuffer"),j=G[0],n=G[1]}else"radius"in F&&(j=n=F.radius),"width"in F&&(j=F.width),"height"in F&&(n=F.height);("color"in F||"colors"in F)&&(s=F.color||F.colors,Array.isArray(s)&&ub(1===s.length||g,"multiple render targets not supported")),s||("colorCount"in F&&(A=0|F.colorCount,ub(A>0,"invalid color buffer count")),"colorTexture"in F&&(t=!!F.colorTexture,u="rgba4"),"colorType"in F&&(z=F.colorType,t?(ub(b.oes_texture_float||!("float"===z||"float32"===z),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ub(b.oes_texture_half_float||!("half float"===z||"float16"===z),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===z||"float16"===z?(ub(b.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),u="rgba16f"):("float"===z||"float32"===z)&&(ub(b.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),u="rgba32f"),ub.oneOf(z,y,"invalid color type")),"colorFormat"in F&&(u=F.colorFormat,w.indexOf(u)>=0?t=!0:x.indexOf(u)>=0?t=!1:t?ub.oneOf(F.colorFormat,w,"invalid color format for texture"):ub.oneOf(F.colorFormat,x,"invalid color format for renderbuffer"))),("depthTexture"in F||"depthStencilTexture"in F)&&(E=!(!F.depthTexture&&!F.depthStencilTexture),ub(!E||b.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in F&&("boolean"==typeof F.depth?o=F.depth:(B=F.depth,q=!1)),"stencil"in F&&("boolean"==typeof F.stencil?q=F.stencil:(C=F.stencil,o=!1)),"depthStencil"in F&&("boolean"==typeof F.depthStencil?o=q=F.depthStencil:(D=F.depthStencil,o=!1,q=!1))}else j=n=1;var H=null,I=null,J=null,K=null;if(Array.isArray(s))H=s.map(k);else if(s)H=[k(s)];else for(H=new Array(A),f=0;A>f;++f)H[f]=l(j,n,t,u,z);ub(b.webgl_draw_buffers||H.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ub(H.length<=c.maxColorAttachments,"too many color attachments, not supported"),j=j||H[0].width,n=n||H[0].height,B?I=k(B):o&&!q&&(I=l(j,n,E,"depth","uint32")),C?J=k(C):q&&!o&&(J=l(j,n,!1,"stencil","uint8")),D?K=k(D):!B&&!C&&q&&o&&(K=l(j,n,E,"depth stencil","depth stencil")),ub(1>=!!B+!!C+!!D,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var L=null;for(f=0;f<H.length;++f)if(i(H[f],j,n),ub(!H[f]||H[f].texture&&Ue.indexOf(H[f].texture._texture.format)>=0||H[f].renderbuffer&&ff.indexOf(H[f].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+f+" is invalid"),H[f]&&H[f].texture){var M=Ve[H[f].texture._texture.format]*We[H[f].texture._texture.type];null===L?L=M:ub(L===M,"all color attachments much have the same number of bits per pixel.")}return i(I,j,n),ub(!I||I.texture&&I.texture._texture.format===Te||I.renderbuffer&&I.renderbuffer._renderbuffer.format===$e,"invalid depth attachment for framebuffer object"),i(J,j,n),ub(!J||J.renderbuffer&&J.renderbuffer._renderbuffer.format===_e,"invalid stencil attachment for framebuffer object"),i(K,j,n),ub(!K||K.texture&&K.texture._texture.format===af||K.renderbuffer&&K.renderbuffer._renderbuffer.format===af,"invalid depth-stencil attachment for framebuffer object"),p(h),h.width=j,h.height=n,h.colorAttachments=H,h.depthAttachment=I,h.stencilAttachment=J,h.depthStencilAttachment=K,e.color=H.map(m),e.depth=m(I),e.stencil=m(J),e.depthStencil=m(K),e.width=h.width,e.height=h.height,r(h),e}function g(a,b){ub(v.next!==h,"can not resize a framebuffer which is currently in use");var c=0|a,d=0|b||c;if(c===h.width&&d===h.height)return e;for(var f=h.colorAttachments,g=0;g<f.length;++g)n(f[g],c,d);return n(h.depthAttachment,c,d),n(h.stencilAttachment,c,d),n(h.depthStencilAttachment,c,d),h.width=e.width=c,h.height=e.height=d,r(h),e}var h=new o;return f.framebufferCount++,e(a,d),_a(e,{resize:g,_reglType:"framebuffer",_framebuffer:h,destroy:function(){q(h),p(h)},use:function(a){v.setFBO({framebuffer:e},a)}})}function t(a){function e(a){var c;ub(g.indexOf(v.next)<0,"can not update framebuffer which is currently in use");var f=b.webgl_draw_buffers,h={color:null},i=0,j=null,k="rgba",l="uint8",m=1;if("number"==typeof a)i=0|a;else if(a){ub.type(a,"object","invalid arguments for framebuffer");var n=a;if("shape"in n){var o=n.shape;ub(Array.isArray(o)&&o.length>=2,"invalid shape for framebuffer"),ub(o[0]===o[1],"cube framebuffer must be square"),i=o[0]}else"radius"in n&&(i=0|n.radius),"width"in n?(i=0|n.width,"height"in n&&ub(n.height===i,"must be square")):"height"in n&&(i=0|n.height);("color"in n||"colors"in n)&&(j=n.color||n.colors,Array.isArray(j)&&ub(1===j.length||f,"multiple render targets not supported")),j||("colorCount"in n&&(m=0|n.colorCount,ub(m>0,"invalid color buffer count")),"colorType"in n&&(ub.oneOf(n.colorType,y,"invalid color type"),l=n.colorType),"colorFormat"in n&&(k=n.colorFormat,ub.oneOf(n.colorFormat,w,"invalid color format for texture"))),"depth"in n&&(h.depth=n.depth),"stencil"in n&&(h.stencil=n.stencil),"depthStencil"in n&&(h.depthStencil=n.depthStencil)}else i=1;var p;if(j)if(Array.isArray(j))for(p=[],c=0;c<j.length;++c)p[c]=j[c];else p=[j];else{p=Array(m);var q={radius:i,format:k,type:l};for(c=0;m>c;++c)p[c]=d.createCube(q)}for(h.color=Array(p.length),c=0;c<p.length;++c){var r=p[c];ub("function"==typeof r&&"textureCube"===r._reglType,"invalid cube map"),i=i||r.width,ub(r.width===i&&r.height===i,"invalid cube map shape"),h.color[c]={target:Fe,data:p[c]}}for(c=0;6>c;++c){for(var t=0;t<p.length;++t)h.color[t].target=Fe+c;c>0&&(h.depth=g[0].depth,h.stencil=g[0].stencil,h.depthStencil=g[0].depthStencil),g[c]?g[c](h):g[c]=s(h)}return _a(e,{width:i,height:i,color:p})}function f(a){var b,d=0|a;if(ub(d>0&&d<=c.maxCubeMapSize,"invalid radius for cube fbo"),d===e.width)return e;var f=e.color;for(b=0;b<f.length;++b)f[b].resize(d);for(b=0;6>b;++b)g[b].resize(d);return e.width=e.height=d,e}var g=Array(6);return e(a),_a(e,{faces:g,resize:f,_reglType:"framebufferCube",destroy:function(){g.forEach(function(a){a.destroy()})}})}function u(){ac(A).forEach(function(b){b.framebuffer=a.createFramebuffer(),r(b)})}var v={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],x=["rgba4","rgb565","rgb5 a1"];b.ext_srgb&&x.push("srgba"),b.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),b.webgl_color_buffer_float&&x.push("rgba32f");var y=["uint8"];b.oes_texture_half_float&&y.push("half float","float16"),b.oes_texture_float&&y.push("float","float32");var z=0,A={};return _a(v,{getFramebuffer:function(a){if("function"==typeof a&&"framebuffer"===a._reglType){var b=a._framebuffer;if(b instanceof o)return b}return null},create:s,createCube:t,clear:function(){ac(A).forEach(q)},restore:u})}function Ia(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=hf,this.offset=0,this.stride=0,this.divisor=0}function Ja(a,b,c,d,e){for(var f=c.maxAttributes,g=new Array(f),h=0;f>h;++h)g[h]=new Ia;return{Record:Ia,scope:{},state:g}}function Ka(a,b,c,d){function e(a,b,c,d){this.name=a,this.id=b,this.location=c,this.info=d}function f(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id)return void(a[c].location=b.location);a.push(b)}function g(c,d,e){var f=c===jf?k:l,g=f[d];if(!g){var h=b.str(d);g=a.createShader(c),a.shaderSource(g,h),a.compileShader(g),ub.shaderError(a,g,h,c,e),f[d]=g}return g}function h(a,b){this.id=o++,this.fragId=a,this.vertId=b,this.program=null,this.uniforms=[],this.attributes=[],d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function i(c,h){var i,j,k=g(jf,c.fragId),l=g(kf,c.vertId),m=c.program=a.createProgram();a.attachShader(m,k),a.attachShader(m,l),a.linkProgram(m),ub.linkError(a,m,b.str(c.fragId),b.str(c.vertId),h);var n=a.getProgramParameter(m,lf);d.profile&&(c.stats.uniformsCount=n);var o=c.uniforms;for(i=0;n>i;++i)if(j=a.getActiveUniform(m,i))if(j.size>1)for(var p=0;p<j.size;++p){var q=j.name.replace("[0]","["+p+"]");f(o,new e(q,b.id(q),a.getUniformLocation(m,q),j))}else f(o,new e(j.name,b.id(j.name),a.getUniformLocation(m,j.name),j));var r=a.getProgramParameter(m,mf);d.profile&&(c.stats.attributesCount=r);var s=c.attributes;for(i=0;r>i;++i)j=a.getActiveAttrib(m,i),j&&f(s,new e(j.name,b.id(j.name),a.getAttribLocation(m,j.name),j))}function j(){k={},l={};for(var a=0;a<n.length;++a)i(n[a])}var k={},l={},m={},n=[],o=0;return d.profile&&(c.getMaxUniformsCount=function(){var a=0;return n.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)}),a},c.getMaxAttributesCount=function(){var a=0;return n.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)}),a}),{clear:function(){var b=a.deleteShader.bind(a);ac(k).forEach(b),k={},ac(l).forEach(b),l={},n.forEach(function(b){a.deleteProgram(b.program)}),n.length=0,m={},c.shaderCount=0},program:function(a,b,d){ub.command(a>=0,"missing vertex shader",d),ub.command(b>=0,"missing fragment shader",d);var e=m[b];e||(e=m[b]={});var f=e[a];return f||(f=new h(b,a),c.shaderCount++,i(f,d),e[a]=f,n.push(f)),f},restore:j,shader:g,frag:-1,vert:-1}}function La(a,b,c,d,e,f){function g(g){var h;null===b.next?(ub(e.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
h=of):(ub(null!==b.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),h=b.next.colorAttachments[0].texture._texture.type,f.oes_texture_float?ub(h===of||h===qf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):ub(h===of,"Reading from a framebuffer is only allowed for the type 'uint8'"));var i=0,j=0,k=d.framebufferWidth,l=d.framebufferHeight,m=null;$a(g)?m=g:g&&(ub.type(g,"object","invalid arguments to regl.read()"),i=0|g.x,j=0|g.y,ub(i>=0&&i<d.framebufferWidth,"invalid x offset for regl.read"),ub(j>=0&&j<d.framebufferHeight,"invalid y offset for regl.read"),k=0|(g.width||d.framebufferWidth-i),l=0|(g.height||d.framebufferHeight-j),m=g.data||null),m&&(h===of?ub(m instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):h===qf&&ub(m instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ub(k>0&&k+i<=d.framebufferWidth,"invalid width for read pixels"),ub(l>0&&l+j<=d.framebufferHeight,"invalid height for read pixels"),c();var n=k*l*4;return m||(h===of?m=new Uint8Array(n):h===qf&&(m=m||new Float32Array(n))),ub.isTypedArray(m,"data buffer for regl.read() must be a typedarray"),ub(m.byteLength>=n,"data buffer for regl.read() too small"),a.pixelStorei(pf,4),a.readPixels(i,j,k,l,nf,h,m),m}function h(a){var c;return b.setFBO({framebuffer:a.framebuffer},function(){c=g(a)}),c}function i(a){return a&&"framebuffer"in a?h(a):g(a)}return i}function Ma(a){return Array.prototype.slice.call(a)}function Na(a){return Ma(a).join("")}function Oa(){function a(a){for(var b=0;b<i.length;++b)if(i[b]===a)return h[b];var c="g"+g++;return h.push(c),i.push(a),c}function b(){function a(){c.push.apply(c,Ma(arguments))}function b(){var a="v"+g++;return d.push(a),arguments.length>0&&(c.push(a,"="),c.push.apply(c,Ma(arguments)),c.push(";")),a}var c=[],d=[];return _a(a,{def:b,toString:function(){return Na([d.length>0?"var "+d+";":"",Na(c)])}})}function c(){function a(a,b){d(a,b,"=",c.def(a,b),";")}var c=b(),d=b(),e=c.toString,f=d.toString;return _a(function(){c.apply(c,Ma(arguments))},{def:c.def,entry:c,exit:d,save:a,set:function(b,d,e){a(b,d),c(b,d,"=",e,";")},toString:function(){return e()+f()}})}function d(){var a=Na(arguments),b=c(),d=c(),e=b.toString,f=d.toString;return _a(b,{then:function(){return b.apply(b,Ma(arguments)),this},"else":function(){return d.apply(d,Ma(arguments)),this},toString:function(){var b=f();return b&&(b="else{"+b+"}"),Na(["if(",a,"){",e(),"}",b])}})}function e(a,b){function d(){var a="a"+e.length;return e.push(a),a}var e=[];b=b||0;for(var f=0;b>f;++f)d();var g=c(),h=g.toString,i=k[a]=_a(g,{arg:d,toString:function(){return Na(["function(",e.join(),"){",h(),"}"])}});return i}function f(){var a=['"use strict";',j,"return {"];Object.keys(k).forEach(function(b){a.push('"',b,'":',k[b].toString(),",")}),a.push("}");var b=Na(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),c=Function.apply(null,h.concat(b));return c.apply(null,i)}var g=0,h=[],i=[],j=b(),k={};return{global:j,link:a,block:b,proc:e,scope:c,cond:d,compile:f}}function Pa(a){return Array.isArray(a)||$a(a)||X(a)}function Qa(a){return a.sort(function(a,b){return a===$f?-1:b===$f?1:b>a?-1:1})}function Ra(a,b,c,d){this.thisDep=a,this.contextDep=b,this.propDep=c,this.append=d}function Sa(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function Ta(a){return new Ra(!1,!1,!1,a)}function Ua(a,b){var c=a.type;if(c===vf){var d=a.data.length;return new Ra(!0,d>=1,d>=2,b)}if(c===zf){var e=a.data;return new Ra(e.thisDep,e.contextDep,e.propDep,b)}return new Ra(c===yf,c===xf,c===wf,b)}function Va(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){return a.replace(".","_")}function q(a,b,c){var d=p(a);ba.push(a),aa[d]=_[d]=!!c,ca[d]=b}function r(a,b,c){var d=p(a);ba.push(a),Array.isArray(c)?(_[d]=c.slice(),aa[d]=c.slice()):_[d]=aa[d]=c,da[d]=b}function s(){var a=Oa(),c=a.link,d=a.global;a.id=ga++,a.batchId="0";var e=c(ea),f=a.shared={props:"a0"};Object.keys(ea).forEach(function(a){f[a]=d.def(e,".",a)}),ub.optional(function(){a.CHECK=c(ub),a.commandStr=ub.guessCommand(),a.command=c(a.commandStr),a.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",c(d),",",this.command,");")},fa.invalidBlendCombinations=mh});var g=a.next={},h=a.current={};Object.keys(da).forEach(function(a){Array.isArray(_[a])&&(g[a]=d.def(f.next,".",a),h[a]=d.def(f.current,".",a))});var i=a.constants={};Object.keys(fa).forEach(function(a){i[a]=d.def(JSON.stringify(fa[a]))}),a.invoke=function(b,d){switch(d.type){case vf:var e=["this",f.context,f.props,a.batchId];return b.def(c(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case wf:return b.def(f.props,d.data);case xf:return b.def(f.context,d.data);case yf:return b.def("this",d.data);case zf:return d.data.append(a,b),d.data.ref}},a.attribCache={};var k={};return a.scopeAttrib=function(a){var d=b.id(a);if(d in k)return k[d];var e=j.scope[d];e||(e=j.scope[d]=new W);var f=k[d]=c(e);return f},a}function t(a){var b,c=a["static"],d=a.dynamic;if(_f in c){var e=!!c[_f];b=Ta(function(a,b){return e}),b.enable=e}else if(_f in d){var f=d[_f];b=Ua(f,function(a,b){return a.invoke(b,f)})}return b}function u(a,b){var c=a["static"],d=a.dynamic;if(ag in c){var e=c[ag];return e?(e=h.getFramebuffer(e),ub.command(e,"invalid framebuffer object"),Ta(function(a,b){var c=a.link(e),d=a.shared;b.set(d.framebuffer,".next",c);var f=d.context;return b.set(f,"."+kg,c+".width"),b.set(f,"."+lg,c+".height"),c})):Ta(function(a,b){var c=a.shared;b.set(c.framebuffer,".next","null");var d=c.context;return b.set(d,"."+kg,d+"."+pg),b.set(d,"."+lg,d+"."+qg),"null"})}if(ag in d){var f=d[ag];return Ua(f,function(a,b){var c=a.invoke(b,f),d=a.shared,e=d.framebuffer,g=b.def(e,".getFramebuffer(",c,")");ub.optional(function(){a.assert(b,"!"+c+"||"+g,"invalid framebuffer object")}),b.set(e,".next",g);var h=d.context;return b.set(h,"."+kg,g+"?"+g+".width:"+h+"."+pg),b.set(h,"."+lg,g+"?"+g+".height:"+h+"."+qg),g})}return null}function v(a,b,c){function d(a){if(a in e){var d=e[a];ub.commandType(d,"object","invalid "+a,c.commandStr);var g,h,i=!0,j=0|d.x,k=0|d.y;return"width"in d?(g=0|d.width,ub.command(g>=0,"invalid "+a,c.commandStr)):i=!1,"height"in d?(h=0|d.height,ub.command(h>=0,"invalid "+a,c.commandStr)):i=!1,new Ra(!i&&b&&b.thisDep,!i&&b&&b.contextDep,!i&&b&&b.propDep,function(a,b){var c=a.shared.context,e=g;"width"in d||(e=b.def(c,".",kg,"-",j));var f=h;return"height"in d||(f=b.def(c,".",lg,"-",k)),[j,k,e,f]})}if(a in f){var l=f[a],m=Ua(l,function(b,c){var d=b.invoke(c,l);ub.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var e=b.shared.context,f=c.def(d,".x|0"),g=c.def(d,".y|0"),h=c.def('"width" in ',d,"?",d,".width|0:","(",e,".",kg,"-",f,")"),i=c.def('"height" in ',d,"?",d,".height|0:","(",e,".",lg,"-",g,")");return ub.optional(function(){b.assert(c,h+">=0&&"+i+">=0","invalid "+a)}),[f,g,h,i]});return b&&(m.thisDep=m.thisDep||b.thisDep,m.contextDep=m.contextDep||b.contextDep,m.propDep=m.propDep||b.propDep),m}return b?new Ra(b.thisDep,b.contextDep,b.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".",kg),b.def(c,".",lg)]}):null}var e=a["static"],f=a.dynamic,g=d($f);if(g){var h=g;g=new Ra(g.thisDep,g.contextDep,g.propDep,function(a,b){var c=h.append(a,b),d=a.shared.context;return b.set(d,"."+mg,c[2]),b.set(d,"."+ng,c[3]),c})}return{viewport:g,scissor_box:d(Zf)}}function w(a){function c(a){if(a in e){var c=b.id(e[a]);ub.optional(function(){k.shader(ph[a],c,ub.guessCommand())});var d=Ta(function(){return c});return d.id=c,d}if(a in f){var g=f[a];return Ua(g,function(b,c){var d=b.invoke(c,g),e=c.def(b.shared.strings,".id(",d,")");return ub.optional(function(){c(b.shared.shader,".shader(",ph[a],",",e,",",b.command,");")}),e})}return null}var d,e=a["static"],f=a.dynamic,g=c(cg),h=c(bg),i=null;return Sa(g)&&Sa(h)?(i=k.program(h.id,g.id),d=Ta(function(a,b){return a.link(i)})):d=new Ra(g&&g.thisDep||h&&h.thisDep,g&&g.contextDep||h&&h.contextDep,g&&g.propDep||h&&h.propDep,function(a,b){var c,d=a.shared.shader;c=g?g.append(a,b):b.def(d,".",cg);var e;e=h?h.append(a,b):b.def(d,".",bg);var f=d+".program("+e+","+c;return ub.optional(function(){f+=","+a.command}),b.def(f+")")}),{frag:g,vert:h,progVar:d,program:i}}function x(a,b){function c(){if(dg in h){var a=h[dg];Pa(a)?a=f.getElements(f.create(a,!0)):a&&(a=f.getElements(a),ub.command(a,"invalid elements",b.commandStr));var c=Ta(function(b,c){if(a){var d=b.link(a);return b.ELEMENTS=d,d}return b.ELEMENTS=null,null});return c.value=a,c}if(dg in i){var d=i[dg];return Ua(d,function(a,b){var c=a.shared,e=c.isBufferArgs,f=c.elements,g=a.invoke(b,d),h=b.def("null"),i=b.def(e,"(",g,")"),j=a.cond(i).then(h,"=",f,".createStream(",g,");")["else"](h,"=",f,".getElements(",g,");");return ub.optional(function(){a.assert(j["else"],"!"+g+"||"+h,"invalid elements")}),b.entry(j),b.exit(a.cond(i).then(f,".destroyStream(",h,");")),a.ELEMENTS=h,h})}return null}function d(){if(eg in h){var a=h[eg];return ub.commandParameter(a,Kc,"invalid primitve",b.commandStr),Ta(function(b,c){return Kc[a]})}if(eg in i){var c=i[eg];return Ua(c,function(a,b){var d=a.constants.primTypes,e=a.invoke(b,c);return ub.optional(function(){a.assert(b,e+" in "+d,"invalid primitive, must be one of "+Object.keys(Kc))}),b.def(d,"[",e,"]")})}return j?Sa(j)?Ta(j.value?function(a,b){return b.def(a.ELEMENTS,".primType")}:function(){return Yg}):new Ra(j.thisDep,j.contextDep,j.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",Yg)}):null}function e(a,c){if(a in h){var d=0|h[a];return ub.command(!c||d>=0,"invalid "+a,b.commandStr),Ta(function(a,b){return c&&(a.OFFSET=d),d})}if(a in i){var e=i[a];return Ua(e,function(b,d){var f=b.invoke(d,e);return c&&(b.OFFSET=f,ub.optional(function(){b.assert(d,f+">=0","invalid "+a)})),f})}return c&&j?Ta(function(a,b){return a.OFFSET="0",0}):null}function g(){if(fg in h){var a=0|h[fg];return ub.command("number"==typeof a&&a>=0,"invalid vertex count",b.commandStr),Ta(function(){return a})}if(fg in i){var c=i[fg];return Ua(c,function(a,b){var d=a.invoke(b,c);return ub.optional(function(){a.assert(b,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")}),d})}if(j){if(Sa(j)){if(j)return k?new Ra(k.thisDep,k.contextDep,k.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);return ub.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")}),c}):Ta(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var d=Ta(function(){return-1});return ub.optional(function(){d.MISSING=!0}),d}var e=new Ra(j.thisDep||k.thisDep,j.contextDep||k.contextDep,j.propDep||k.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")});return ub.optional(function(){e.DYNAMIC=!0}),e}return null}var h=a["static"],i=a.dynamic,j=c(),k=e(gg,!0);return{elements:j,primitive:d(),count:g(),instances:e(hg,!1),offset:k}}function y(a,b){var c=a["static"],e=a.dynamic,f={};return ba.forEach(function(a){function g(b,d){if(a in c){var g=b(c[a]);f[h]=Ta(function(){return g})}else if(a in e){var i=e[a];f[h]=Ua(i,function(a,b){return d(a,b,a.invoke(b,i))})}}var h=p(a);switch(a){case Kf:case Bf:case Af:case Tf:case Ff:case Yf:case Of:case Qf:case Rf:case If:return g(function(c){return ub.commandType(c,"boolean",a,b.commandStr),c},function(b,c,d){return ub.optional(function(){b.assert(c,"typeof "+d+'==="boolean"',"invalid flag "+a,b.commandStr)}),d});case Gf:return g(function(c){return ub.commandParameter(c,nh,"invalid "+a,b.commandStr),nh[c]},function(b,c,d){var e=b.constants.compareFuncs;return ub.optional(function(){b.assert(c,d+" in "+e,"invalid "+a+", must be one of "+Object.keys(nh))}),c.def(e,"[",d,"]")});case Hf:return g(function(a){return ub.command(pa(a)&&2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]&&a[0]<=a[1],"depth range is 2d array",b.commandStr),a},function(a,b,c){ub.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var d=b.def("+",c,"[0]"),e=b.def("+",c,"[1]");return[d,e]});case Ef:return g(function(a){ub.commandType(a,"object","blend.func",b.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in a?a.srcAlpha:a.src,e="dstRGB"in a?a.dstRGB:a.dst,f="dstAlpha"in a?a.dstAlpha:a.dst;return ub.commandParameter(c,lh,h+".srcRGB",b.commandStr),ub.commandParameter(d,lh,h+".srcAlpha",b.commandStr),ub.commandParameter(e,lh,h+".dstRGB",b.commandStr),ub.commandParameter(f,lh,h+".dstAlpha",b.commandStr),ub.command(-1===mh.indexOf(c+", "+e),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+e+")",b.commandStr),[lh[c],lh[e],lh[d],lh[f]]},function(b,c,d){function e(e,g){var h=c.def('"',e,g,'" in ',d,"?",d,".",e,g,":",d,".",e);return ub.optional(function(){b.assert(c,h+" in "+f,"invalid "+a+"."+e+g+", must be one of "+Object.keys(lh))}),h}var f=b.constants.blendFuncs;ub.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=e("src","RGB"),h=e("dst","RGB");ub.optional(function(){var a=b.constants.invalidBlendCombinations;b.assert(c,a+".indexOf("+g+'+", "+'+h+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var i=c.def(f,"[",g,"]"),j=c.def(f,"[",e("src","Alpha"),"]"),k=c.def(f,"[",h,"]"),l=c.def(f,"[",e("dst","Alpha"),"]");return[i,k,j,l]});case Df:return g(function(c){return"string"==typeof c?(ub.commandParameter(c,X,"invalid "+a,b.commandStr),[X[c],X[c]]):"object"==typeof c?(ub.commandParameter(c.rgb,X,a+".rgb",b.commandStr),ub.commandParameter(c.alpha,X,a+".alpha",b.commandStr),[X[c.rgb],X[c.alpha]]):void ub.commandRaise("invalid blend.equation",b.commandStr)},function(b,c,d){var e=b.constants.blendEquations,f=c.def(),g=c.def(),h=b.cond("typeof ",d,'==="string"');return ub.optional(function(){function c(a,c,d){b.assert(a,d+" in "+e,"invalid "+c+", must be one of "+Object.keys(X))}c(h.then,a,d),b.assert(h["else"],d+"&&typeof "+d+'==="object"',"invalid "+a),c(h["else"],a+".rgb",d+".rgb"),c(h["else"],a+".alpha",d+".alpha")}),h.then(f,"=",g,"=",e,"[",d,"];"),h["else"](f,"=",e,"[",d,".rgb];",g,"=",e,"[",d,".alpha];"),c(h),[f,g]});case Cf:return g(function(a){return ub.command(pa(a)&&4===a.length,"blend.color must be a 4d array",b.commandStr),Y(4,function(b){return+a[b]})},function(a,b,c){return ub.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")}),Y(4,function(a){return b.def("+",c,"[",a,"]")})});case Uf:return g(function(a){return ub.commandType(a,"number",h,b.commandStr),0|a},function(a,b,c){return ub.optional(function(){a.assert(b,"typeof "+c+'==="number"',"invalid stencil.mask")}),b.def(c,"|0")});case Vf:return g(function(c){ub.commandType(c,"object",h,b.commandStr);var d=c.cmp||"keep",e=c.ref||0,f="mask"in c?c.mask:-1;return ub.commandParameter(d,nh,a+".cmp",b.commandStr),ub.commandType(e,"number",a+".ref",b.commandStr),ub.commandType(f,"number",a+".mask",b.commandStr),[nh[d],e,f]},function(a,b,c){var d=a.constants.compareFuncs;ub.optional(function(){function e(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(c+"&&typeof ",c,'==="object"'),e('!("cmp" in ',c,")||(",c,".cmp in ",d,")")});var e=b.def('"cmp" in ',c,"?",d,"[",c,".cmp]",":",eh),f=b.def(c,".ref|0"),g=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[e,f,g]});case Wf:case Xf:return g(function(c){ub.commandType(c,"object",h,b.commandStr);var d=c.fail||"keep",e=c.zfail||"keep",f=c.zpass||"keep";return ub.commandParameter(d,oh,a+".fail",b.commandStr),ub.commandParameter(e,oh,a+".zfail",b.commandStr),ub.commandParameter(f,oh,a+".zpass",b.commandStr),[a===Xf?$g:Zg,oh[d],oh[e],oh[f]]},function(b,c,d){function e(e){return ub.optional(function(){b.assert(c,'!("'+e+'" in '+d+")||("+d+"."+e+" in "+f+")","invalid "+a+"."+e+", must be one of "+Object.keys(oh))}),c.def('"',e,'" in ',d,"?",f,"[",d,".",e,"]:",eh)}var f=b.constants.stencilOps;return ub.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)}),[a===Xf?$g:Zg,e("fail"),e("zfail"),e("zpass")]});case Pf:return g(function(a){ub.commandType(a,"object",h,b.commandStr);var c=0|a.factor,d=0|a.units;return ub.commandType(c,"number",h+".factor",b.commandStr),ub.commandType(d,"number",h+".units",b.commandStr),[c,d]},function(b,c,d){ub.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var e=c.def(d,".factor|0"),f=c.def(d,".units|0");return[e,f]});case Lf:return g(function(a){var c=0;return"front"===a?c=Zg:"back"===a&&(c=$g),ub.command(!!c,h,b.commandStr),c},function(a,b,c){return ub.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")}),b.def(c,'==="front"?',Zg,":",$g)});case Nf:return g(function(a){return ub.command("number"==typeof a&&a>=d.lineWidthDims[0]&&a<=d.lineWidthDims[1],"invalid line width, must positive number between "+d.lineWidthDims[0]+" and "+d.lineWidthDims[1],b.commandStr),a},function(a,b,c){return ub.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+d.lineWidthDims[0]+"&&"+c+"<="+d.lineWidthDims[1],"invalid line width")}),c});case Mf:return g(function(a){return ub.commandParameter(a,qh,h,b.commandStr),qh[a]},function(a,b,c){return ub.optional(function(){a.assert(b,c+'==="cw"||'+c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),b.def(c+'==="cw"?'+_g+":"+ah)});case Jf:return g(function(a){return ub.command(pa(a)&&4===a.length,"color.mask must be length 4 array",b.commandStr),a.map(function(a){return!!a})},function(a,b,c){return ub.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")}),Y(4,function(a){return"!!"+c+"["+a+"]"})});case Sf:return g(function(a){ub.command("object"==typeof a&&a,h,b.commandStr);var c="value"in a?a.value:1,d=!!a.invert;return ub.command("number"==typeof c&&c>=0&&1>=c,"sample.coverage.value must be a number between 0 and 1",b.commandStr),[c,d]},function(a,b,c){ub.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var d=b.def('"value" in ',c,"?+",c,".value:1"),e=b.def("!!",c,".invert");return[d,e]})}}),f}function z(a,b){var c=a["static"],d=a.dynamic,e={};return Object.keys(c).forEach(function(a){var d,f=c[a];if("number"==typeof f||"boolean"==typeof f)d=Ta(function(){return f});else if("function"==typeof f){var g=f._reglType;"texture2d"===g||"textureCube"===g?d=Ta(function(a){return a.link(f)}):"framebuffer"===g||"framebufferCube"===g?(ub.command(f.color.length>0,'missing color attachment for framebuffer sent to uniform "'+a+'"',b.commandStr),d=Ta(function(a){return a.link(f.color[0])})):ub.commandRaise('invalid data for uniform "'+a+'"',b.commandStr)}else pa(f)?d=Ta(function(b){var c=b.global.def("[",Y(f.length,function(c){return ub.command("number"==typeof f[c]||"boolean"==typeof f[c],"invalid uniform "+a,b.commandStr),f[c]}),"]");return c}):ub.commandRaise('invalid or missing data for uniform "'+a+'"',b.commandStr);d.value=f,e[a]=d}),Object.keys(d).forEach(function(a){var b=d[a];e[a]=Ua(b,function(a,c){return a.invoke(c,b)})}),e}function A(a,c){var d=a["static"],f=a.dynamic,g={};return Object.keys(d).forEach(function(a){var f=d[a],h=b.id(a),i=new W;if(Pa(f))i.state=tf,i.buffer=e.getBuffer(e.create(f,sg,!1,!0)),i.type=0;else{var j=e.getBuffer(f);if(j)i.state=tf,i.buffer=j,i.type=0;else if(ub.command("object"==typeof f&&f,"invalid data for attribute "+a,c.commandStr),f.constant){var k=f.constant;i.buffer="null",i.state=uf,"number"==typeof k?i.x=k:(ub.command(pa(k)&&k.length>0&&k.length<=4,"invalid constant for attribute "+a,c.commandStr),rf.forEach(function(a,b){b<k.length&&(i[a]=k[b])}))}else{j=Pa(f.buffer)?e.getBuffer(e.create(f.buffer,sg,!1,!0)):e.getBuffer(f.buffer),ub.command(!!j,'missing buffer for attribute "'+a+'"',c.commandStr);var l=0|f.offset;ub.command(l>=0,'invalid offset for attribute "'+a+'"',c.commandStr);var m=0|f.stride;ub.command(m>=0&&256>m,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var n=0|f.size;ub.command(!("size"in f)||n>0&&4>=n,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var o=!!f.normalized,p=0;"type"in f&&(ub.commandParameter(f.type,tc,"invalid type for attribute "+a,c.commandStr),p=tc[f.type]);var q=0|f.divisor;"divisor"in f&&(ub.command(0===q||Z,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),ub.command(q>=0,'invalid divisor for attribute "'+a+'"',c.commandStr)),ub.optional(function(){var b=c.commandStr,d=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(f).forEach(function(c){ub.command(d.indexOf(c)>=0,'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+d+")",b)})}),i.buffer=j,i.state=tf,i.size=n,i.normalized=o,i.type=p||j.dtype,i.offset=l,i.stride=m,i.divisor=q}}g[a]=Ta(function(a,b){var c=a.attribCache;if(h in c)return c[h];var d={isStream:!1};return Object.keys(i).forEach(function(a){d[a]=i[a]}),i.buffer&&(d.buffer=a.link(i.buffer),d.type=d.type||d.buffer+".dtype"),c[h]=d,d})}),Object.keys(f).forEach(function(a){function b(b,d){function e(a){d(j[a],"=",f,".",a,"|0;")}var f=b.invoke(d,c),g=b.shared,h=g.isBufferArgs,i=g.buffer;ub.optional(function(){b.assert(d,f+"&&(typeof "+f+'==="object"||typeof '+f+'==="function")&&('+h+"("+f+")||"+i+".getBuffer("+f+")||"+i+".getBuffer("+f+".buffer)||"+h+"("+f+'.buffer)||("constant" in '+f+"&&(typeof "+f+'.constant==="number"||'+g.isArrayLike+"("+f+".constant))))",'invalid dynamic attribute "'+a+'"')});var j={isStream:d.def(!1)},k=new W;k.state=tf,Object.keys(k).forEach(function(a){j[a]=d.def(""+k[a])});var l=j.buffer,m=j.type;return d("if(",h,"(",f,")){",j.isStream,"=true;",l,"=",i,".createStream(",sg,",",f,");",m,"=",l,".dtype;","}else{",l,"=",i,".getBuffer(",f,");","if(",l,"){",m,"=",l,".dtype;",'}else if("constant" in ',f,"){",j.state,"=",uf,";","if(typeof "+f+'.constant === "number"){',j[rf[0]],"=",f,".constant;",rf.slice(1).map(function(a){return j[a]}).join("="),"=0;","}else{",rf.map(function(a,b){return j[a]+"="+f+".constant.length>="+b+"?"+f+".constant["+b+"]:0;"}).join(""),"}}else{","if(",h,"(",f,".buffer)){",l,"=",i,".createStream(",sg,",",f,".buffer);","}else{",l,"=",i,".getBuffer(",f,".buffer);","}",m,'="type" in ',f,"?",g.glTypes,"[",f,".type]:",l,".dtype;",j.normalized,"=!!",f,".normalized;"),e("size"),e("offset"),e("stride"),e("divisor"),d("}}"),d.exit("if(",j.isStream,"){",i,".destroyStream(",l,");","}"),j}var c=f[a];g[a]=Ua(c,b)}),g}function B(a){var b=a["static"],c=a.dynamic,d={};return Object.keys(b).forEach(function(a){var c=b[a];d[a]=Ta(function(a,b){return"number"==typeof c||"boolean"==typeof c?""+c:a.link(c)})}),Object.keys(c).forEach(function(a){var b=c[a];d[a]=Ua(b,function(a,c){return a.invoke(c,b)})}),d}function C(a,b,c,d,e){function f(a){var b=j[a];b&&(l[a]=b)}var g=a["static"],h=a.dynamic;ub.optional(function(){function a(a){Object.keys(a).forEach(function(a){ub.command(b.indexOf(a)>=0,'unknown parameter "'+a+'"',e.commandStr)})}var b=[ag,bg,cg,dg,eg,gg,fg,hg,_f].concat(ba);a(g),a(h)});var i=u(a,e),j=v(a,i,e),k=x(a,e),l=y(a,e),m=w(a,e);f($f),f(p(Zf));var n=Object.keys(l).length>0,o={framebuffer:i,draw:k,shader:m,state:l,dirty:n};return o.profile=t(a,e),o.uniforms=z(c,e),o.attributes=A(b,e),o.context=B(d,e),o}function D(a,b,c){var d=a.shared,e=d.context,f=a.scope();Object.keys(c).forEach(function(d){b.save(e,"."+d);var g=c[d];f(e,".",d,"=",g.append(a,b),";")}),b(f)}function E(a,b,c,d){var e,f=a.shared,g=f.gl,h=f.framebuffer;$&&(e=b.def(f.extensions,".webgl_draw_buffers"));var i,j=a.constants,k=j.drawBuffer,l=j.backBuffer;i=c?c.append(a,b):b.def(h,".next"),d||b("if(",i,"!==",h,".cur){"),b("if(",i,"){",g,".bindFramebuffer(",jh,",",i,".framebuffer);"),$&&b(e,".drawBuffersWEBGL(",k,"[",i,".colorAttachments.length]);"),b("}else{",g,".bindFramebuffer(",jh,",null);"),$&&b(e,".drawBuffersWEBGL(",l,");"),b("}",h,".cur=",i,";"),d||b("}")}function F(a,b,c){var d=a.shared,e=d.gl,f=a.current,g=a.next,h=d.current,i=d.next,j=a.cond(h,".dirty");ba.forEach(function(b){var d=p(b);if(!(d in c.state)){var k,l;if(d in g){k=g[d],l=f[d];var m=Y(_[d].length,function(a){return j.def(k,"[",a,"]")});j(a.cond(m.map(function(a,b){return a+"!=="+l+"["+b+"]"}).join("||")).then(e,".",da[d],"(",m,");",m.map(function(a,b){return l+"["+b+"]="+a}).join(";"),";"))}else{k=j.def(i,".",d);var n=a.cond(k,"!==",h,".",d);j(n),d in ca?n(a.cond(k).then(e,".enable(",ca[d],");")["else"](e,".disable(",ca[d],");"),h,".",d,"=",k,";"):n(e,".",da[d],"(",k,");",h,".",d,"=",k,";")}}}),0===Object.keys(c.state).length&&j(h,".dirty=false;"),b(j)}function G(a,b,c,d){var e=a.shared,f=a.current,g=e.current,h=e.gl;Qa(Object.keys(c)).forEach(function(e){var i=c[e];if(!d||d(i)){var j=i.append(a,b);if(ca[e]){var k=ca[e];Sa(i)?j?b(h,".enable(",k,");"):b(h,".disable(",k,");"):b(a.cond(j).then(h,".enable(",k,");")["else"](h,".disable(",k,");")),b(g,".",e,"=",j,";")}else if(pa(j)){var l=f[e];b(h,".",da[e],"(",j,");",j.map(function(a,b){return l+"["+b+"]="+a}).join(";"),";")}else b(h,".",da[e],"(",j,");",g,".",e,"=",j,";")}})}function H(a,b){Z&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function I(a,b,c,d,e){function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function g(a){j=b.def(),a(j,"=",f(),";"),"string"==typeof e?a(o,".count+=",e,";"):a(o,".count++;"),n&&(d?(k=b.def(),a(k,"=",q,".getNumPendingQueries();")):a(q,".beginQuery(",o,");"))}function h(a){a(o,".cpuTime+=",f(),"-",j,";"),n&&(d?a(q,".pushScopeStats(",k,",",q,".getNumPendingQueries(),",o,");"):a(q,".endQuery();"))}function i(a){var c=b.def(p,".profile");b(p,".profile=",a,";"),b.exit(p,".profile=",c,";")}var j,k,l,m=a.shared,o=a.stats,p=m.current,q=m.timer,r=c.profile;if(r){if(Sa(r))return void(r.enable?(g(b),h(b.exit),i("true")):i("false"));l=r.append(a,b),i(l)}else l=b.def(p,".profile");var s=a.block();g(s),b("if(",l,"){",s,"}");var t=a.block();h(t),b.exit("if(",l,"){",t,"}")}function J(a,b,c,d,e){function f(a){switch(a){case Ig:case Mg:case Qg:return 2;case Jg:case Ng:case Rg:return 3;case Kg:case Og:case Sg:return 4;default:return 1}}function g(c,d,e){function f(){b("if(!",k,".buffer){",i,".enableVertexAttribArray(",j,");}");var c,f=e.type;if(c=e.size?b.def(e.size,"||",d):d,b("if(",k,".type!==",f,"||",k,".size!==",c,"||",o.map(function(a){return k+"."+a+"!=="+e[a]}).join("||"),"){",i,".bindBuffer(",sg,",",m,".buffer);",i,".vertexAttribPointer(",[j,c,f,e.normalized,e.stride,e.offset],");",k,".type=",f,";",k,".size=",c,";",o.map(function(a){return k+"."+a+"="+e[a]+";"}).join(""),"}"),Z){var g=e.divisor;b("if(",k,".divisor!==",g,"){",a.instancing,".vertexAttribDivisorANGLE(",[j,g],");",k,".divisor=",g,";}")}}function g(){b("if(",k,".buffer){",i,".disableVertexAttribArray(",j,");","}if(",rf.map(function(a,b){return k+"."+a+"!=="+n[b]}).join("||"),"){",i,".vertexAttrib4f(",j,",",n,");",rf.map(function(a,b){return k+"."+a+"="+n[b]+";"}).join(""),"}")}var i=h.gl,j=b.def(c,".location"),k=b.def(h.attributes,"[",j,"]"),l=e.state,m=e.buffer,n=[e.x,e.y,e.z,e.w],o=["buffer","normalized","offset","stride"];l===tf?f():l===uf?g():(b("if(",l,"===",tf,"){"),f(),b("}else{"),g(),b("}"))}var h=a.shared;d.forEach(function(d){var h,i=d.name,j=c.attributes[i];if(j){if(!e(j))return;h=j.append(a,b)}else{if(!e(rh))return;var k=a.scopeAttrib(i);ub.optional(function(){a.assert(b,k+".state","missing attribute "+i)}),h={},Object.keys(new W).forEach(function(a){h[a]=b.def(k,".",a)})}g(a.link(d),f(d.info.type),h)})}function K(a,c,d,e,f){for(var g,h=a.shared,i=h.gl,j=0;j<e.length;++j){var k,l=e[j],m=l.name,n=l.info.type,o=d.uniforms[m],p=a.link(l),q=p+".location";if(o){if(!f(o))continue;if(Sa(o)){var r=o.value;if(ub.command(null!==r&&"undefined"!=typeof r,'missing uniform "'+m+'"',a.commandStr),n===Wg||n===Xg){ub.command("function"==typeof r&&(n===Wg&&("texture2d"===r._reglType||"framebuffer"===r._reglType)||n===Xg&&("textureCube"===r._reglType||"framebufferCube"===r._reglType)),"invalid texture for uniform "+m,a.commandStr);var s=a.link(r._texture||r.color[0]._texture);c(i,".uniform1i(",q,",",s+".bind());"),c.exit(s,".unbind();")}else if(n===Tg||n===Ug||n===Vg){ub.optional(function(){ub.command(pa(r),"invalid matrix for uniform "+m,a.commandStr),ub.command(n===Tg&&4===r.length||n===Ug&&9===r.length||n===Vg&&16===r.length,"invalid length for matrix uniform "+m,a.commandStr)});var t=a.global.def("new Float32Array(["+Array.prototype.slice.call(r)+"])"),u=2;n===Ug?u=3:n===Vg&&(u=4),c(i,".uniformMatrix",u,"fv(",q,",false,",t,");")}else{switch(n){case Hg:ub.commandType(r,"number","uniform "+m,a.commandStr),g="1f";break;case Ig:ub.command(pa(r)&&2===r.length,"uniform "+m,a.commandStr),g="2f";break;case Jg:ub.command(pa(r)&&3===r.length,"uniform "+m,a.commandStr),g="3f";break;case Kg:ub.command(pa(r)&&4===r.length,"uniform "+m,a.commandStr),g="4f";break;case Pg:ub.commandType(r,"boolean","uniform "+m,a.commandStr),g="1i";break;case Lg:ub.commandType(r,"number","uniform "+m,a.commandStr),g="1i";break;case Qg:ub.command(pa(r)&&2===r.length,"uniform "+m,a.commandStr),g="2i";break;case Mg:ub.command(pa(r)&&2===r.length,"uniform "+m,a.commandStr),g="2i";break;case Rg:ub.command(pa(r)&&3===r.length,"uniform "+m,a.commandStr),g="3i";break;case Ng:ub.command(pa(r)&&3===r.length,"uniform "+m,a.commandStr),g="3i";break;case Sg:ub.command(pa(r)&&4===r.length,"uniform "+m,a.commandStr),g="4i";break;case Og:ub.command(pa(r)&&4===r.length,"uniform "+m,a.commandStr),g="4i"}c(i,".uniform",g,"(",q,",",pa(r)?Array.prototype.slice.call(r):r,");")}continue}k=o.append(a,c)}else{if(!f(rh))continue;k=c.def(h.uniforms,"[",b.id(m),"]")}n===Wg?c("if(",k,"&&",k,'._reglType==="framebuffer"){',k,"=",k,".color[0];","}"):n===Xg&&c("if(",k,"&&",k,'._reglType==="framebufferCube"){',k,"=",k,".color[0];","}"),ub.optional(function(){function b(b,d){a.assert(c,b,'bad data or missing for uniform "'+m+'".  '+d)}function d(a){b("typeof "+k+'==="'+a+'"',"invalid type, expected "+a)}function e(c,d){b(h.isArrayLike+"("+k+")&&"+k+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function f(c){b("typeof "+k+'==="function"&&'+k+'._reglType==="texture'+(c===wg?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(n){case Lg:d("number");break;case Mg:e(2,"number");break;case Ng:e(3,"number");break;case Og:e(4,"number");break;case Hg:d("number");break;case Ig:e(2,"number");break;case Jg:e(3,"number");break;case Kg:e(4,"number");break;case Pg:d("boolean");break;case Qg:e(2,"boolean");break;case Rg:e(3,"boolean");break;case Sg:e(4,"boolean");break;case Tg:e(4,"number");break;case Ug:e(9,"number");break;case Vg:e(16,"number");break;case Wg:f(wg);break;case Xg:f(xg)}});var v=1;switch(n){case Wg:case Xg:var w=c.def(k,"._texture");c(i,".uniform1i(",q,",",w,".bind());"),c.exit(w,".unbind();");continue;case Lg:case Pg:g="1i";break;case Mg:case Qg:g="2i",v=2;break;case Ng:case Rg:g="3i",v=3;break;case Og:case Sg:g="4i",v=4;break;case Hg:g="1f";break;case Ig:g="2f",v=2;break;case Jg:g="3f",v=3;break;case Kg:g="4f",v=4;break;case Tg:g="Matrix2fv";break;case Ug:g="Matrix3fv";break;case Vg:g="Matrix4fv"}if(c(i,".uniform",g,"(",q,","),"M"===g.charAt(0)){var x=Math.pow(n-Tg+2,2),y=a.global.def("new Float32Array(",x,")");c("false,(Array.isArray(",k,")||",k," instanceof Float32Array)?",k,":(",Y(x,function(a){return y+"["+a+"]="+k+"["+a+"]"}),",",y,")")}else c(v>1?Y(v,function(a){return k+"["+a+"]"}):k);c(");")}}function L(a,b,c,d){function e(){var e,f=m.elements,g=b;return f?((f.contextDep&&d.contextDynamic||f.propDep)&&(g=c),e=f.append(a,g)):e=g.def(l,".",dg),e&&g("if("+e+")"+k+".bindBuffer("+tg+","+e+".buffer.buffer);"),e}function f(){var e,f=m.count,g=b;return f?((f.contextDep&&d.contextDynamic||f.propDep)&&(g=c),e=f.append(a,g),ub.optional(function(){f.MISSING&&a.assert(b,"false","missing vertex count"),f.DYNAMIC&&a.assert(g,e+">=0","missing vertex count");
})):(e=g.def(l,".",fg),ub.optional(function(){a.assert(g,e+">=0","missing vertex count")})),e}function g(e){var f=m[e];return f?f.contextDep&&d.contextDynamic||f.propDep?f.append(a,c):f.append(a,b):b.def(l,".",e)}function h(){function a(){c(s,".drawElementsInstancedANGLE(",[o,q,t,p+"<<(("+t+"-"+sf+")>>1)",r],");")}function b(){c(s,".drawArraysInstancedANGLE(",[o,p,q,r],");")}n?u?a():(c("if(",n,"){"),a(),c("}else{"),b(),c("}")):b()}function i(){function a(){c(k+".drawElements("+[o,q,t,p+"<<(("+t+"-"+sf+")>>1)"]+");")}function b(){c(k+".drawArrays("+[o,p,q]+");")}n?u?a():(c("if(",n,"){"),a(),c("}else{"),b(),c("}")):b()}var j=a.shared,k=j.gl,l=j.draw,m=d.draw,n=e(),o=g(eg),p=g(gg),q=f();if("number"==typeof q){if(0===q)return}else c("if(",q,"){"),c.exit("}");var r,s;Z&&(r=g(hg),s=a.instancing);var t=n+".type",u=m.elements&&Sa(m.elements);Z&&("number"!=typeof r||r>=0)?"string"==typeof r?(c("if(",r,">0){"),h(),c("}else if(",r,"<0){"),i(),c("}")):h():i()}function M(a,b,c,d,e){var f=s(),g=f.proc("body",e);return ub.optional(function(){f.commandStr=b.commandStr,f.command=f.link(b.commandStr)}),Z&&(f.instancing=g.def(f.shared.extensions,".angle_instanced_arrays")),a(f,g,c,d),f.compile().body}function N(a,b,c,d){H(a,b),J(a,b,c,d.attributes,function(){return!0}),K(a,b,c,d.uniforms,function(){return!0}),L(a,b,b,c)}function O(a,b){var c=a.proc("draw",1);H(a,c),D(a,c,b.context),E(a,c,b.framebuffer),F(a,c,b),G(a,c,b.state),I(a,c,b,!1,!0);var d=b.shader.progVar.append(a,c);if(c(a.shared.gl,".useProgram(",d,".program);"),b.shader.program)N(a,c,b,b.shader.program);else{var e=a.global.def("{}"),f=c.def(d,".id"),g=c.def(e,"[",f,"]");c(a.cond(g).then(g,".call(this,a0);")["else"](g,"=",e,"[",f,"]=",a.link(function(c){return M(N,a,b,c,1)}),"(",d,");",g,".call(this,a0);"))}Object.keys(b.state).length>0&&c(a.shared.current,".dirty=true;")}function P(a,b,c,d){function e(){return!0}a.batchId="a1",H(a,b),J(a,b,c,d.attributes,e),K(a,b,c,d.uniforms,e),L(a,b,b,c)}function Q(a,b,c,d){function e(a){return a.contextDep&&g||a.propDep}function f(a){return!e(a)}H(a,b);var g=c.contextDep,h=b.def(),i="a0",j="a1",k=b.def();a.shared.props=k,a.batchId=h;var l=a.scope(),m=a.scope();if(b(l.entry,"for(",h,"=0;",h,"<",j,";++",h,"){",k,"=",i,"[",h,"];",m,"}",l.exit),c.needsContext&&D(a,m,c.context),c.needsFramebuffer&&E(a,m,c.framebuffer),G(a,m,c.state,e),c.profile&&e(c.profile)&&I(a,m,c,!1,!0),d)J(a,l,c,d.attributes,f),J(a,m,c,d.attributes,e),K(a,l,c,d.uniforms,f),K(a,m,c,d.uniforms,e),L(a,l,m,c);else{var n=a.global.def("{}"),o=c.shader.progVar.append(a,m),p=m.def(o,".id"),q=m.def(n,"[",p,"]");m(a.shared.gl,".useProgram(",o,".program);","if(!",q,"){",q,"=",n,"[",p,"]=",a.link(function(b){return M(P,a,c,b,2)}),"(",o,");}",q,".call(this,a0[",h,"],",h,");")}}function R(a,b){function c(a){return a.contextDep&&e||a.propDep}var d=a.proc("batch",2);a.batchId="0",H(a,d);var e=!1,f=!0;Object.keys(b.context).forEach(function(a){e=e||b.context[a].propDep}),e||(D(a,d,b.context),f=!1);var g=b.framebuffer,h=!1;g?(g.propDep?e=h=!0:g.contextDep&&e&&(h=!0),h||E(a,d,g)):E(a,d,null),b.state.viewport&&b.state.viewport.propDep&&(e=!0),F(a,d,b),G(a,d,b.state,function(a){return!c(a)}),b.profile&&c(b.profile)||I(a,d,b,!1,"a1"),b.contextDep=e,b.needsContext=f,b.needsFramebuffer=h;var i=b.shader.progVar;if(i.contextDep&&e||i.propDep)Q(a,d,b,null);else{var j=i.append(a,d);if(d(a.shared.gl,".useProgram(",j,".program);"),b.shader.program)Q(a,d,b,b.shader.program);else{var k=a.global.def("{}"),l=d.def(j,".id"),m=d.def(k,"[",l,"]");d(a.cond(m).then(m,".call(this,a0,a1);")["else"](m,"=",k,"[",l,"]=",a.link(function(c){return M(Q,a,b,c,2)}),"(",j,");",m,".call(this,a0,a1);"))}}Object.keys(b.state).length>0&&d(a.shared.current,".dirty=true;")}function S(a,c){function d(b){var d=c.shader[b];d&&e.set(f.shader,"."+b,d.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var f=a.shared,g=f.current;D(a,e,c.context),c.framebuffer&&c.framebuffer.append(a,e),Qa(Object.keys(c.state)).forEach(function(b){var d=c.state[b],g=d.append(a,e);pa(g)?g.forEach(function(c,d){e.set(a.next[b],"["+d+"]",c)}):e.set(f.next,"."+b,g)}),I(a,e,c,!0,!0),[dg,gg,fg,hg,eg].forEach(function(b){var d=c.draw[b];d&&e.set(f.draw,"."+b,""+d.append(a,e))}),Object.keys(c.uniforms).forEach(function(d){e.set(f.uniforms,"["+b.id(d)+"]",c.uniforms[d].append(a,e))}),Object.keys(c.attributes).forEach(function(b){var d=c.attributes[b].append(a,e),f=a.scopeAttrib(b);Object.keys(new W).forEach(function(a){e.set(f,"."+a,d[a])})}),d(bg),d(cg),Object.keys(c.state).length>0&&(e(g,".dirty=true;"),e.exit(g,".dirty=true;")),e("a1(",a.shared.context,",a0,",a.batchId,");")}function T(a){if("object"==typeof a&&!pa(a)){for(var b=Object.keys(a),c=0;c<b.length;++c)if(xb.isDynamic(a[b[c]]))return!0;return!1}}function U(a,b,c){function d(a,b){g.forEach(function(c){var d=e[c];if(xb.isDynamic(d)){var f=a.invoke(b,d);b(k,".",c,"=",f,";")}})}var e=b["static"][c];if(e&&T(e)){var f=a.global,g=Object.keys(e),h=!1,i=!1,j=!1,k=a.global.def("{}");g.forEach(function(b){var c=e[b];if(xb.isDynamic(c)){"function"==typeof c&&(c=e[b]=xb.unbox(c));var d=Ua(c,null);h=h||d.thisDep,j=j||d.propDep,i=i||d.contextDep}else{switch(f(k,".",b,"="),typeof c){case"number":f(c);break;case"string":f('"',c,'"');break;case"object":Array.isArray(c)&&f("[",c.join(),"]");break;default:f(a.link(c))}f(";")}}),b.dynamic[c]=new xb.DynamicVariable(zf,{thisDep:h,contextDep:i,propDep:j,ref:k,append:d}),delete b["static"][c]}}function V(a,b,c,d,e){var f=s();f.stats=f.link(e),Object.keys(b["static"]).forEach(function(a){U(f,b,a)}),rg.forEach(function(b){U(f,a,b)});var g=C(a,b,c,d,f);return O(f,g),S(f,g),R(f,g),f.compile()}var W=j.Record,X={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(X.min=bh,X.max=ch);var Z=c.angle_instanced_arrays,$=c.webgl_draw_buffers,_={dirty:!0,profile:o.profile},aa={},ba=[],ca={},da={};q(Af,Ag),q(Bf,zg),r(Cf,"blendColor",[0,0,0,0]),r(Df,"blendEquationSeparate",[hh,hh]),r(Ef,"blendFuncSeparate",[gh,fh,gh,fh]),q(Ff,Cg,!0),r(Gf,"depthFunc",ih),r(Hf,"depthRange",[0,1]),r(If,"depthMask",!0),r(Jf,Jf,[!0,!0,!0,!0]),q(Kf,yg),r(Lf,"cullFace",$g),r(Mf,Mf,ah),r(Nf,Nf,1),q(Of,Eg),r(Pf,"polygonOffset",[0,0]),q(Qf,Fg),q(Rf,Gg),r(Sf,"sampleCoverage",[1,!1]),q(Tf,Bg),r(Uf,"stencilMask",-1),r(Vf,"stencilFunc",[dh,0,-1]),r(Wf,"stencilOpSeparate",[Zg,eh,eh,eh]),r(Xf,"stencilOpSeparate",[$g,eh,eh,eh]),q(Yf,Dg),r(Zf,"scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]),r($f,$f,[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var ea={gl:a,context:m,strings:b,next:aa,current:_,draw:l,elements:f,buffer:e,shader:k,attributes:j.state,uniforms:i,framebuffer:h,extensions:c,timer:n,isBufferArgs:Pa},fa={primTypes:Kc,compareFuncs:nh,blendFuncs:lh,blendEquations:X,stencilOps:oh,glTypes:tc,orientationType:qh};ub.optional(function(){ea.isArrayLike=pa}),$&&(fa.backBuffer=[$g],fa.drawBuffer=Y(d.maxDrawbuffers,function(a){return 0===a?[0]:Y(a,function(a){return kh+a})}));var ga=0;return{next:aa,current:_,procs:function(){var b=s(),c=b.proc("poll"),e=b.proc("refresh"),f=b.block();c(f),e(f);var g=b.shared,h=g.gl,i=g.next,j=g.current;f(j,".dirty=false;"),E(b,c),E(b,e,null,!0);var k,l=a.getExtension("angle_instanced_arrays");l&&(k=b.link(l));for(var m=0;m<d.maxAttributes;++m){var n=e.def(g.attributes,"[",m,"]"),o=b.cond(n,".buffer");o.then(h,".enableVertexAttribArray(",m,");",h,".bindBuffer(",sg,",",n,".buffer.buffer);",h,".vertexAttribPointer(",m,",",n,".size,",n,".type,",n,".normalized,",n,".stride,",n,".offset);")["else"](h,".disableVertexAttribArray(",m,");",h,".vertexAttrib4f(",m,",",n,".x,",n,".y,",n,".z,",n,".w);",n,".buffer=null;"),e(o),l&&e(k,".vertexAttribDivisorANGLE(",m,",",n,".divisor);")}return Object.keys(ca).forEach(function(a){var d=ca[a],g=f.def(i,".",a),k=b.block();k("if(",g,"){",h,".enable(",d,")}else{",h,".disable(",d,")}",j,".",a,"=",g,";"),e(k),c("if(",g,"!==",j,".",a,"){",k,"}")}),Object.keys(da).forEach(function(a){var d,g,k=da[a],l=_[a],m=b.block();if(m(h,".",k,"("),pa(l)){var n=l.length;d=b.global.def(i,".",a),g=b.global.def(j,".",a),m(Y(n,function(a){return d+"["+a+"]"}),");",Y(n,function(a){return g+"["+a+"]="+d+"["+a+"];"}).join("")),c("if(",Y(n,function(a){return d+"["+a+"]!=="+g+"["+a+"]"}).join("||"),"){",m,"}")}else d=f.def(i,".",a),g=f.def(j,".",a),m(d,");",j,".",a,"=",d,";"),c("if(",d,"!==",g,"){",m,"}");e(m)}),b.compile()}(),compile:V}}function Wa(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Xa(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function Ya(a){function b(){if(0===S.length)return y&&y.update(),void(Y=null);Y=yb.next(b),m();for(var a=S.length-1;a>=0;--a){var c=S[a];c&&c(C,null,0)}r.flush(),y&&y.update()}function c(){!Y&&S.length>0&&(Y=yb.next(b))}function d(){Y&&(yb.cancel(b),Y=null)}function e(a){a.preventDefault(),t=!0,d(),T.forEach(function(a){a()})}function f(a){r.getError(),t=!1,u.restore(),J.restore(),G.restore(),K.restore(),L.restore(),M.restore(),y&&y.restore(),N.procs.refresh(),c(),U.forEach(function(a){a()})}function g(){S.length=0,d(),R&&(R.removeEventListener(Ah,e),R.removeEventListener(Bh,f)),J.clear(),M.clear(),L.clear(),K.clear(),H.clear(),G.clear(),y&&y.clear(),X.forEach(function(a){a()})}function h(a){function b(a){function b(a){if(a in c){var b=c[a];delete c[a],Object.keys(b).forEach(function(d){c[a+"."+d]=b[d]})}}var c=_a({},a);return delete c.uniforms,delete c.attributes,delete c.context,"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op),b("blend"),b("depth"),b("cull"),b("stencil"),b("polygonOffset"),b("scissor"),b("sample"),c}function c(a){var b={},c={};return Object.keys(a).forEach(function(d){var e=a[d];xb.isDynamic(e)?c[d]=xb.unbox(e,d):b[d]=e}),{dynamic:c,"static":b}}function d(a){for(;o.length<a;)o.push(null);return o}function e(a,b){var c;if(t&&ub.raise("context lost"),"function"==typeof a)return n.call(this,null,a,0);if("function"==typeof b){if("number"==typeof a){for(c=0;a>c;++c)n.call(this,null,b,c);return}if(Array.isArray(a)){for(c=0;c<a.length;++c)n.call(this,a[c],b,c);return}return n.call(this,a,b,0)}if("number"==typeof a){if(a>0)return m.call(this,d(0|a),0|a)}else{if(!Array.isArray(a))return l.call(this,a);if(a.length)return m.call(this,a,a.length)}}ub(!!a,"invalid args to regl({...})"),ub.type(a,"object","invalid args to regl({...})");var f=c(a.context||{}),g=c(a.uniforms||{}),h=c(a.attributes||{}),i=c(b(a)),j={gpuTime:0,cpuTime:0,count:0},k=N.compile(i,h,g,f,j),l=k.draw,m=k.batch,n=k.scope,o=[];return _a(e,{stats:j})}function i(a,b){var c=0;N.procs.poll();var d=b.color;d&&(r.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=wh),"depth"in b&&(r.clearDepth(+b.depth),c|=xh),"stencil"in b&&(r.clearStencil(0|b.stencil),c|=yh),ub(!!c,"called regl.clear with no buffer specified"),r.clear(c)}function j(a){if(ub("object"==typeof a&&a,"regl.clear() takes an object as input"),"framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)Z(_a({framebuffer:a.framebuffer.faces[b]},a),i);else Z(a,i);else i(null,a)}function k(a){function b(){function b(){var a=Xa(S,b);S[a]=S[S.length-1],S.length-=1,S.length<=0&&d()}var c=Xa(S,a);ub(c>=0,"cannot cancel a frame twice"),S[c]=b}return ub.type(a,"function","regl.frame() callback must be a function"),S.push(a),c(),{cancel:b}}function l(){var a=Q.viewport,b=Q.scissor_box;a[0]=a[1]=b[0]=b[1]=0,C.viewportWidth=C.framebufferWidth=C.drawingBufferWidth=a[2]=b[2]=r.drawingBufferWidth,C.viewportHeight=C.framebufferHeight=C.drawingBufferHeight=a[3]=b[3]=r.drawingBufferHeight}function m(){C.tick+=1,C.time=o(),l(),N.procs.poll()}function n(){l(),N.procs.refresh(),y&&y.update()}function o(){return(zb()-z)/1e3}function p(a,b){ub.type(b,"function","listener callback must be a function");var c;switch(a){case"frame":return k(b);case"lost":c=T;break;case"restore":c=U;break;case"destroy":c=X;break;default:ub.raise("invalid event, must be one of frame,lost,restore,destroy")}return c.push(b),{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b)return c[a]=c[c.length-1],void c.pop()}}}var q=V(a);if(!q)return null;var r=q.gl,s=r.getContextAttributes(),t=r.isContextLost(),u=W(r,q);if(!u)return null;var v=O(),w=Wa(),x=u.extensions,y=vh(r,x),z=zb(),A=r.drawingBufferWidth,B=r.drawingBufferHeight,C={tick:0,time:0,viewportWidth:A,viewportHeight:B,framebufferWidth:A,framebufferHeight:B,drawingBufferWidth:A,drawingBufferHeight:B,pixelRatio:q.pixelRatio},D={},E={elements:null,primitive:4,count:-1,offset:0,instances:-1},F=_b(r,x),G=ma(r,w,q),H=na(r,x,G,w),I=Ja(r,x,F,G,v),J=Ka(r,v,w,q),K=Fa(r,x,F,function(){N.procs.poll()},C,w,q),L=Be(r,x,F,w,q),M=Ha(r,x,F,K,L,w),N=Va(r,v,x,F,G,H,K,M,D,I,J,E,C,y,q),P=La(r,M,N.procs.poll,C,s,x),Q=N.next,R=r.canvas,S=[],T=[],U=[],X=[q.onDestroy],Y=null;R&&(R.addEventListener(Ah,e,!1),R.addEventListener(Bh,f,!1));var Z=M.setFBO=h({framebuffer:xb.define.call(null,Ch,"framebuffer")});n();var $=_a(h,{clear:j,prop:xb.define.bind(null,Ch),context:xb.define.bind(null,Dh),"this":xb.define.bind(null,Eh),draw:h({}),buffer:function(a){return G.create(a,zh,!1,!1)},elements:function(a){return H.create(a,!1)},texture:K.create2D,cube:K.createCube,renderbuffer:L.create,framebuffer:M.create,framebufferCube:M.createCube,attributes:s,frame:k,on:p,limits:F,hasExtension:function(a){return F.extensions.indexOf(a.toLowerCase())>=0},read:P,destroy:g,_gl:r,_refresh:n,poll:function(){m(),y&&y.update()},now:o,stats:w});return q.onDone(null,$),$}var Za={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},$a=function(a){return Object.prototype.toString.call(a)in Za},_a=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];return a},ab=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],bb=33071,cb=9728,db=9984,eb=9985,fb=9986,gb=9987,hb=5120,ib=5121,jb=5122,kb=5123,lb=5124,mb=5125,nb=5126,ob=32819,pb=32820,qb=33635,rb=34042,sb=36193,tb={};tb[hb]=tb[ib]=1,tb[jb]=tb[kb]=tb[sb]=tb[qb]=tb[ob]=tb[pb]=2,tb[lb]=tb[mb]=tb[nb]=tb[rb]=4;var ub=_a(c,{optional:B,raise:b,commandRaise:x,command:y,parameter:e,commandParameter:z,constructor:j,type:g,commandType:A,isTypedArray:f,nni:h,oneOf:i,shaderError:t,linkError:u,callSite:p,saveCommandRef:v,saveDrawInfo:w,framebufferFormat:C,guessCommand:o,texture2D:F,textureCube:G}),vb=0,wb=0,xb={DynamicVariable:H,define:L,isDynamic:M,unbox:N,accessor:K},yb={next:"function"==typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"==typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout},zb="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Ab=3408,Bb=3410,Cb=3411,Db=3412,Eb=3413,Fb=3414,Gb=3415,Hb=33901,Ib=33902,Jb=3379,Kb=3386,Lb=34921,Mb=36347,Nb=36348,Ob=35661,Pb=35660,Qb=34930,Rb=36349,Sb=34076,Tb=34024,Ub=7936,Vb=7937,Wb=7938,Xb=35724,Yb=34047,Zb=36063,$b=34852,_b=function(a,b){var c=1;b.ext_texture_filter_anisotropic&&(c=a.getParameter(Yb));var d=1,e=1;return b.webgl_draw_buffers&&(d=a.getParameter($b),e=a.getParameter(Zb)),{colorBits:[a.getParameter(Bb),a.getParameter(Cb),a.getParameter(Db),a.getParameter(Eb)],depthBits:a.getParameter(Fb),stencilBits:a.getParameter(Gb),subpixelBits:a.getParameter(Ab),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:e,pointSizeDims:a.getParameter(Hb),lineWidthDims:a.getParameter(Ib),maxViewportDims:a.getParameter(Kb),maxCombinedTextureUnits:a.getParameter(Ob),maxCubeMapSize:a.getParameter(Sb),maxRenderbufferSize:a.getParameter(Tb),maxTextureUnits:a.getParameter(Qb),maxTextureSize:a.getParameter(Jb),maxAttributes:a.getParameter(Lb),maxVertexUniforms:a.getParameter(Mb),maxVertexTextureUnits:a.getParameter(Pb),maxVaryingVectors:a.getParameter(Nb),maxFragmentUniforms:a.getParameter(Rb),glsl:a.getParameter(Xb),renderer:a.getParameter(Vb),vendor:a.getParameter(Ub),version:a.getParameter(Wb)}},ac=function(a){return Object.keys(a).map(function(b){return a[b]})},bc=5120,cc=5121,dc=5122,ec=5123,fc=5124,gc=5125,hc=5126,ic=Y(8,function(){return[]}),jc={alloc:_,free:aa,allocType:ba,freeType:ca},kc={shape:ia,flatten:ha},lc=5120,mc=5122,nc=5124,oc=5121,pc=5123,qc=5125,rc=5126,sc=5126,tc={int8:lc,int16:mc,int32:nc,uint8:oc,uint16:pc,uint32:qc,"float":rc,float32:sc},uc=35048,vc=35040,wc={dynamic:uc,stream:vc,"static":35044},xc=kc.flatten,yc=kc.shape,zc=35044,Ac=35040,Bc=5121,Cc=5126,Dc=[];Dc[5120]=1,Dc[5122]=2,Dc[5124]=4,Dc[5121]=1,Dc[5123]=2,Dc[5125]=4,Dc[5126]=4;var Ec=0,Fc=0,Gc=1,Hc=1,Ic=4,Jc=4,Kc={points:Ec,point:Fc,lines:Gc,line:Hc,triangles:Ic,triangle:Jc,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Lc=0,Mc=1,Nc=4,Oc=5120,Pc=5121,Qc=5122,Rc=5123,Sc=5124,Tc=5125,Uc=34963,Vc=35040,Wc=35044,Xc=new Float32Array(1),Yc=new Uint32Array(Xc.buffer),Zc=5123,$c=34467,_c=3553,ad=34067,bd=34069,cd=6408,dd=6406,ed=6407,fd=6409,gd=6410,hd=32854,id=32855,jd=36194,kd=32819,ld=32820,md=33635,nd=34042,od=6402,pd=34041,qd=35904,rd=35906,sd=36193,td=33776,ud=33777,vd=33778,wd=33779,xd=35986,yd=35987,zd=34798,Ad=35840,Bd=35841,Cd=35842,Dd=35843,Ed=36196,Fd=5121,Gd=5123,Hd=5125,Id=5126,Jd=10242,Kd=10243,Ld=10497,Md=33071,Nd=33648,Od=10240,Pd=10241,Qd=9728,Rd=9729,Sd=9984,Td=9985,Ud=9986,Vd=9987,Wd=33170,Xd=4352,Yd=4353,Zd=4354,$d=34046,_d=3317,ae=37440,be=37441,ce=37443,de=37444,ee=33984,fe=[Sd,Ud,Td,Vd],ge=[0,fd,gd,ed,cd],he={};he[fd]=he[dd]=he[od]=1,he[pd]=he[gd]=2,he[ed]=he[qd]=3,he[cd]=he[rd]=4;var ie=qa("HTMLCanvasElement"),je=qa("CanvasRenderingContext2D"),ke=qa("HTMLImageElement"),le=qa("HTMLVideoElement"),me=Object.keys(Za).concat([ie,je,ke,le]),ne=[];ne[Fd]=1,ne[Id]=4,ne[sd]=2,ne[Gd]=2,ne[Hd]=4;var oe=[];oe[hd]=2,oe[id]=2,oe[jd]=2,oe[pd]=4,oe[td]=.5,oe[ud]=.5,oe[vd]=1,oe[wd]=1,oe[xd]=.5,oe[yd]=1,oe[zd]=1,oe[Ad]=.5,oe[Bd]=.25,oe[Cd]=.5,oe[Dd]=.25,oe[Ed]=.5;var pe=36161,qe=32854,re=32855,se=36194,te=33189,ue=36168,ve=34041,we=35907,xe=34836,ye=34842,ze=34843,Ae=[];Ae[qe]=2,Ae[re]=2,Ae[se]=2,Ae[te]=2,Ae[ue]=1,Ae[ve]=4,Ae[we]=4,Ae[xe]=16,Ae[ye]=8,Ae[ze]=6;var Be=function(a,b,c,d,e){function f(a){this.id=l++,this.refCount=1,this.renderbuffer=a,this.format=qe,this.width=0,this.height=0,e.profile&&(this.stats={size:0})}function g(b){var c=b.renderbuffer;ub(c,"must not double destroy renderbuffer"),a.bindRenderbuffer(pe,null),a.deleteRenderbuffer(c),b.renderbuffer=null,b.refCount=0,delete m[b.id],d.renderbufferCount--}function h(b,g){function h(b,d){var f=0,g=0,i=qe;if("object"==typeof b&&b){var m=b;if("shape"in m){var n=m.shape;ub(Array.isArray(n)&&n.length>=2,"invalid renderbuffer shape"),f=0|n[0],g=0|n[1]}else"radius"in m&&(f=g=0|m.radius),"width"in m&&(f=0|m.width),"height"in m&&(g=0|m.height);"format"in m&&(ub.parameter(m.format,j,"invalid renderbuffer format"),i=j[m.format])}else"number"==typeof b?(f=0|b,g="number"==typeof d?0|d:f):b?ub.raise("invalid arguments to renderbuffer constructor"):f=g=1;return ub(f>0&&g>0&&f<=c.maxRenderbufferSize&&g<=c.maxRenderbufferSize,"invalid renderbuffer size"),f!==l.width||g!==l.height||i!==l.format?(h.width=l.width=f,h.height=l.height=g,l.format=i,a.bindRenderbuffer(pe,l.renderbuffer),a.renderbufferStorage(pe,i,f,g),e.profile&&(l.stats.size=Ga(l.format,l.width,l.height)),h.format=k[l.format],h):void 0}function i(b,d){var f=0|b,g=0|d||f;return f===l.width&&g===l.height?h:(ub(f>0&&g>0&&f<=c.maxRenderbufferSize&&g<=c.maxRenderbufferSize,"invalid renderbuffer size"),h.width=l.width=f,h.height=l.height=g,a.bindRenderbuffer(pe,l.renderbuffer),a.renderbufferStorage(pe,l.format,f,g),e.profile&&(l.stats.size=Ga(l.format,l.width,l.height)),h)}var l=new f(a.createRenderbuffer());return m[l.id]=l,d.renderbufferCount++,h(b,g),h.resize=i,h._reglType="renderbuffer",h._renderbuffer=l,e.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h}function i(){ac(m).forEach(function(b){b.renderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(pe,b.renderbuffer),a.renderbufferStorage(pe,b.format,b.width,b.height)}),a.bindRenderbuffer(pe,null)}var j={rgba4:qe,rgb565:se,"rgb5 a1":re,depth:te,stencil:ue,"depth stencil":ve};b.ext_srgb&&(j.srgba=we),b.ext_color_buffer_half_float&&(j.rgba16f=ye,j.rgb16f=ze),b.webgl_color_buffer_float&&(j.rgba32f=xe);var k=[];Object.keys(j).forEach(function(a){var b=j[a];k[b]=a});var l=0,m={};return f.prototype.decRef=function(){--this.refCount<=0&&g(this)},e.profile&&(d.getTotalRenderbufferSize=function(){var a=0;return Object.keys(m).forEach(function(b){a+=m[b].stats.size}),a}),{create:h,clear:function(){ac(m).forEach(g)},restore:i}},Ce=36160,De=36161,Ee=3553,Fe=34069,Ge=36064,He=36096,Ie=36128,Je=33306,Ke=36053,Le=36054,Me=36055,Ne=36057,Oe=36061,Pe=36193,Qe=5121,Re=5126,Se=6408,Te=6402,Ue=[Se],Ve=[];Ve[Se]=4;var We=[];We[Qe]=1,We[Re]=4,We[Pe]=2;var Xe=32854,Ye=32855,Ze=36194,$e=33189,_e=36168,af=34041,bf=35907,cf=34836,df=34842,ef=34843,ff=[Xe,Ye,Ze,bf,df,ef,cf],gf={};gf[Ke]="complete",gf[Le]="incomplete attachment",gf[Ne]="incomplete dimensions",gf[Me]="incomplete, missing attachment",gf[Oe]="unsupported";var hf=5126,jf=35632,kf=35633,lf=35718,mf=35721,nf=6408,of=5121,pf=3333,qf=5126,rf="xyzw".split(""),sf=5121,tf=1,uf=2,vf=0,wf=1,xf=2,yf=3,zf=4,Af="dither",Bf="blend.enable",Cf="blend.color",Df="blend.equation",Ef="blend.func",Ff="depth.enable",Gf="depth.func",Hf="depth.range",If="depth.mask",Jf="colorMask",Kf="cull.enable",Lf="cull.face",Mf="frontFace",Nf="lineWidth",Of="polygonOffset.enable",Pf="polygonOffset.offset",Qf="sample.alpha",Rf="sample.enable",Sf="sample.coverage",Tf="stencil.enable",Uf="stencil.mask",Vf="stencil.func",Wf="stencil.opFront",Xf="stencil.opBack",Yf="scissor.enable",Zf="scissor.box",$f="viewport",_f="profile",ag="framebuffer",bg="vert",cg="frag",dg="elements",eg="primitive",fg="count",gg="offset",hg="instances",ig="Width",jg="Height",kg=ag+ig,lg=ag+jg,mg=$f+ig,ng=$f+jg,og="drawingBuffer",pg=og+ig,qg=og+jg,rg=[Ef,Df,Vf,Wf,Xf,Sf,$f,Zf,Pf],sg=34962,tg=34963,ug=35632,vg=35633,wg=3553,xg=34067,yg=2884,zg=3042,Ag=3024,Bg=2960,Cg=2929,Dg=3089,Eg=32823,Fg=32926,Gg=32928,Hg=5126,Ig=35664,Jg=35665,Kg=35666,Lg=5124,Mg=35667,Ng=35668,Og=35669,Pg=35670,Qg=35671,Rg=35672,Sg=35673,Tg=35674,Ug=35675,Vg=35676,Wg=35678,Xg=35680,Yg=4,Zg=1028,$g=1029,_g=2304,ah=2305,bh=32775,ch=32776,dh=519,eh=7680,fh=0,gh=1,hh=32774,ih=513,jh=36160,kh=36064,lh={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},mh=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],nh={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},oh={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ph={frag:ug,vert:vg},qh={cw:_g,ccw:ah},rh=new Ra(!1,!1,!1,function(){}),sh=34918,th=34919,uh=35007,vh=function(a,b){function c(){return m.pop()||l.createQueryEXT()}function d(a){m.push(a)}function e(a){var b=c();l.beginQueryEXT(uh,b),n.push(b),j(n.length-1,n.length,a)}function f(){l.endQueryEXT(uh)}function g(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function h(){return o.pop()||new g}function i(a){o.push(a)}function j(a,b,c){var d=h();d.startQueryIndex=a,d.endQueryIndex=b,d.sum=0,d.stats=c,p.push(d)}function k(){var a,b,c=n.length;if(0!==c){r.length=Math.max(r.length,c+1),q.length=Math.max(q.length,c+1),q[0]=0,r[0]=0;var e=0;for(a=0,b=0;b<n.length;++b){var f=n[b];l.getQueryObjectEXT(f,th)?(e+=l.getQueryObjectEXT(f,sh),d(f)):n[a++]=f,q[b+1]=e,r[b+1]=a}for(n.length=a,a=0,b=0;b<p.length;++b){var g=p[b],h=g.startQueryIndex,j=g.endQueryIndex;g.sum+=q[j]-q[h];var k=r[h],m=r[j];m===k?(g.stats.gpuTime+=g.sum/1e6,i(g)):(g.startQueryIndex=k,g.endQueryIndex=m,p[a++]=g)}p.length=a}}var l=b.ext_disjoint_timer_query;if(!l)return null;var m=[],n=[],o=[],p=[],q=[],r=[];return{beginQuery:e,endQuery:f,pushScopeStats:j,update:k,getNumPendingQueries:function(){return n.length},clear:function(){m.push.apply(m,n);for(var a=0;a<m.length;a++)l.deleteQueryEXT(m[a]);n.length=0,m.length=0},restore:function(){n.length=0,m.length=0}}},wh=16384,xh=256,yh=1024,zh=34962,Ah="webglcontextlost",Bh="webglcontextrestored",Ch=1,Dh=2,Eh=3;return Ya})},{}],509:[function(a,b,c){"use strict";function d(a,b){if("string"!=typeof a)throw new TypeError("expected a string");if(1===b)return a;if(2===b)return a+a;var c=a.length*b;if(e!==a||"undefined"==typeof e)e=a,f="";else if(f.length>=c)return f.substr(0,c);for(;c>f.length&&b>1;)1&b&&(f+=a),b>>=1,a+=a;return f+=a,f=f.substr(0,c)}var e,f="";b.exports=d},{}],510:[function(b,c,d){void function(b,e){"function"==typeof a&&a.amd?a(e):"object"==typeof d?c.exports=e():b.resolveUrl=e()}(this,function(){function a(){var a=arguments.length;if(0===a)throw new Error("resolveUrl requires at least one argument; got none.");var b=document.createElement("base");if(b.href=arguments[0],1===a)return b.href;var c=document.getElementsByTagName("head")[0];c.insertBefore(b,c.firstChild);for(var d,e=document.createElement("a"),f=1;a>f;f++)e.href=arguments[f],d=e.href,b.href=d;return c.removeChild(b),d}return a})},{}],511:[function(a,b,c){(function(a){b.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],512:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=a[a.length-1],d=b,e=b-2;e>=0;--e){var f=c,g=a[e];c=f+g;var h=c-f,i=g-h;i&&(a[--d]=c,c=i)}for(var j=0,e=d;b>e;++e){var f=a[e],g=c;c=f+g;var h=c-f,i=g-h;i&&(a[j++]=i)}return a[j++]=c,a.length=j,a}b.exports=d},{}],513:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;a>c;++c){b[c]=new Array(a);for(var d=0;a>d;++d)b[c][d]=["m[",c,"][",d,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("");for(var b=[],c=0;c<a.length;++c)b.push(["scale(",h(d(a,c)),",",f(c),a[0][c],")"].join(""));return g(b)}function i(a){var b=new Function("sum","scale","prod","compress",["function robustDeterminant",a,"(m){return compress(",h(e(a)),")};return robustDeterminant",a].join(""));return b(l,m,k,n)}function j(){for(;p.length<o;)p.push(i(p.length));for(var a=[],c=["function robustDeterminant(m){switch(m.length){"],d=0;o>d;++d)a.push("det"+d),c.push("case ",d,":return det",d,"(m);");c.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),a.push("CACHE","gen",c.join(""));var e=Function.apply(void 0,a);b.exports=e.apply(void 0,p.concat([p,i]));for(var d=0;d<p.length;++d)b.exports[d]=p[d]}var k=a("two-product"),l=a("robust-sum"),m=a("robust-scale"),n=a("robust-compress"),o=6,p=[function(){return[0]},function(a){return[a[0][0]]}];j()},{"robust-compress":512,"robust-scale":519,"robust-sum":522,"two-product":548}],514:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a[0],b[0]),d=1;d<a.length;++d)c=f(c,e(a[d],b[d]));return c}var e=a("two-product"),f=a("robust-sum");b.exports=d},{"robust-sum":522,"two-product":548}],515:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;a>c;++c){b[c]=new Array(a);for(var d=0;a>d;++d)b[c][d]=["m",d,"[",a-c-2,"]"].join("")}return b}function f(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",f(a.slice(0,b)),",",f(a.slice(b)),")"].join("")}function g(a,b){if("m"===a.charAt(0)){if("w"===b.charAt(0)){var c=a.split("[");return["w",b.substr(1),"m",c[0].substr(1)].join("")}return["prod(",a,",",b,")"].join("")}return g(b,a)}function h(a){return a&!0?"-":""}function i(a){if(2===a.length)return[["diff(",g(a[0][0],a[1][1]),",",g(a[1][0],a[0][1]),")"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",f(i(d(a,c))),",",h(c),a[0][c],")"].join(""));return b}function j(a,b){for(var c=[],d=0;b-2>d;++d)c.push(["prod(m",a,"[",d,"],m",a,"[",d,"])"].join(""));return f(c)}function k(a){for(var b=[],c=[],g=e(a),h=0;a>h;++h)g[0][h]="1",g[a-1][h]="w"+h;for(var h=0;a>h;++h)0===(1&h)?b.push.apply(b,i(d(g,h))):c.push.apply(c,i(d(g,h)));for(var k=f(b),l=f(c),m="exactInSphere"+a,n=[],h=0;a>h;++h)n.push("m"+h);for(var o=["function ",m,"(",n.join(),"){"],h=0;a>h;++h){o.push("var w",h,"=",j(h,a),";");for(var p=0;a>p;++p)p!==h&&o.push("var w",h,"m",p,"=scale(w",h,",m",p,"[0]);")}o.push("var p=",k,",n=",l,",d=diff(p,n);return d[d.length-1];}return ",m);var u=new Function("sum","diff","prod","scale",o.join(""));return u(r,s,q,t)}function l(){return 0}function m(){return 0}function n(){return 0}function o(a){var b=v[a.length];return b||(b=v[a.length]=k(a.length)),b.apply(void 0,a)}function p(){for(;v.length<=u;)v.push(k(v.length));for(var a=[],c=["slow"],d=0;u>=d;++d)a.push("a"+d),c.push("o"+d);for(var e=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;u>=d;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[o].concat(v));for(var d=0;u>=d;++d)b.exports[d]=v[d]}var q=a("two-product"),r=a("robust-sum"),s=a("robust-subtract"),t=a("robust-scale"),u=6,v=[l,m,n];p()},{"robust-scale":519,"robust-subtract":521,"robust-sum":522,"two-product":548}],516:[function(a,b,c){"use strict";function d(a){for(var b="robustLinearSolve"+a+"d",c=["function ",b,"(A,b){return ["],d=0;a>d;++d){c.push("det([");for(var e=0;a>e;++e){e>0&&c.push(","),c.push("[");for(var f=0;a>f;++f)f>0&&c.push(","),f===d?c.push("+b[",e,"]"):c.push("+A[",e,"][",f,"]");c.push("]")}c.push("]),")}c.push("det(A)]}return ",b);var g=new Function("det",c.join(""));return g(6>a?h[a]:h)}function e(){return[0]}function f(a,b){return[[b[0]],[a[0][0]]]}function g(){for(;j.length<i;)j.push(d(j.length));for(var a=[],c=["function dispatchLinearSolve(A,b){switch(A.length){"],e=0;i>e;++e)a.push("s"+e),c.push("case ",e,":return s",e,"(A,b);");c.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),a.push("CACHE","g",c.join(""));var f=Function.apply(void 0,a);b.exports=f.apply(void 0,j.concat([j,d]));for(var e=0;i>e;++e)b.exports[e]=j[e]}var h=a("robust-determinant"),i=6,j=[e,f];g()},{"robust-determinant":513}],517:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);
return c}function e(a){for(var b=new Array(a),c=0;a>c;++c){b[c]=new Array(a);for(var d=0;a>d;++d)b[c][d]=["m",d,"[",a-c-1,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",g(h(d(a,c))),",",f(c),a[0][c],")"].join(""));return b}function i(a){for(var b=[],c=[],f=e(a),i=[],j=0;a>j;++j)0===(1&j)?b.push.apply(b,h(d(f,j))):c.push.apply(c,h(d(f,j))),i.push("m"+j);var k=g(b),p=g(c),q="orientation"+a+"Exact",r=["function ",q,"(",i.join(),"){var p=",k,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",q].join(""),s=new Function("sum","prod","scale","sub",r);return s(m,l,n,o)}function j(a){var b=v[a.length];return b||(b=v[a.length]=i(a.length)),b.apply(void 0,a)}function k(){for(;v.length<=p;)v.push(i(v.length));for(var a=[],c=["slow"],d=0;p>=d;++d)a.push("a"+d),c.push("o"+d);for(var e=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;p>=d;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[j].concat(v));for(var d=0;p>=d;++d)b.exports[d]=v[d]}var l=a("two-product"),m=a("robust-sum"),n=a("robust-scale"),o=a("robust-subtract"),p=5,q=1.1102230246251565e-16,r=(3+16*q)*q,s=(7+56*q)*q,t=i(3),u=i(4),v=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,c){var d,e=(a[1]-c[1])*(b[0]-c[0]),f=(a[0]-c[0])*(b[1]-c[1]),g=e-f;if(e>0){if(0>=f)return g;d=e+f}else{if(!(0>e))return g;if(f>=0)return g;d=-(e+f)}var h=r*d;return g>=h||-h>=g?g:t(a,b,c)},function(a,b,c,d){var e=a[0]-d[0],f=b[0]-d[0],g=c[0]-d[0],h=a[1]-d[1],i=b[1]-d[1],j=c[1]-d[1],k=a[2]-d[2],l=b[2]-d[2],m=c[2]-d[2],n=f*j,o=g*i,p=g*h,q=e*j,r=e*i,t=f*h,v=k*(n-o)+l*(p-q)+m*(r-t),w=(Math.abs(n)+Math.abs(o))*Math.abs(k)+(Math.abs(p)+Math.abs(q))*Math.abs(l)+(Math.abs(r)+Math.abs(t))*Math.abs(m),x=s*w;return v>x||-v>x?v:u(a,b,c,d)}];k()},{"robust-scale":519,"robust-subtract":521,"robust-sum":522,"two-product":548}],518:[function(a,b,c){"use strict";function d(a,b){if(1===a.length)return f(b,a[0]);if(1===b.length)return f(a,b[0]);if(0===a.length||0===b.length)return[0];var c=[0];if(a.length<b.length)for(var d=0;d<a.length;++d)c=e(c,f(b,a[d]));else for(var d=0;d<b.length;++d)c=e(c,f(a,b[d]));return c}var e=a("robust-sum"),f=a("robust-scale");b.exports=d},{"robust-scale":519,"robust-sum":522}],519:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if(1===c){var d=e(a[0],b);return d[0]?d:[d[1]]}var g=new Array(2*c),h=[.1,.1],i=[.1,.1],j=0;e(a[0],b,h),h[0]&&(g[j++]=h[0]);for(var k=1;c>k;++k){e(a[k],b,i);var l=h[1];f(l,i[0],h),h[0]&&(g[j++]=h[0]);var m=i[1],n=h[1],o=m+n,p=o-m,q=n-p;h[1]=o,q&&(g[j++]=q)}return h[1]&&(g[j++]=h[1]),0===j&&(g[j++]=0),g.length=j,g}var e=a("two-product"),f=a("two-sum");b.exports=d},{"two-product":548,"two-sum":549}],520:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=0;2>e;++e){var f=a[e],g=b[e],h=Math.min(f,g),i=Math.max(f,g),j=c[e],k=d[e],l=Math.min(j,k),m=Math.max(j,k);if(h>m||l>i)return!1}return!0}function e(a,b,c,e){var g=f(a,c,e),h=f(b,c,e);if(g>0&&h>0||0>g&&0>h)return!1;var i=f(c,a,b),j=f(e,a,b);return i>0&&j>0||0>i&&0>j?!1:0===g&&0===h&&0===i&&0===j?d(a,b,c,e):!0}b.exports=e;var f=a("robust-orientation")[3]},{"robust-orientation":517}],521:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],-b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=-b[l],q=m(p);q>o?(g=n,k+=1,c>k&&(n=a[k],o=m(n))):(g=p,l+=1,e>l&&(p=-b[l],q=m(p))),c>k&&q>o||l>=e?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=-b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;c>k&&e>l;)q>o?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=-b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;c>k;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,c>k&&(n=a[k]);for(;e>l;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,e>l&&(p=-b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],522:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=b[l],q=m(p);q>o?(g=n,k+=1,c>k&&(n=a[k],o=m(n))):(g=p,l+=1,e>l&&(p=b[l],q=m(p))),c>k&&q>o||l>=e?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;c>k&&e>l;)q>o?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;c>k;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,c>k&&(n=a[k]);for(;e>l;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,e>l&&(p=b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],523:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ShelfPack=e()}(this,function(){function a(a,b,c){c=c||{},this.w=a||64,this.h=b||64,this.autoResize=!!c.autoResize,this.shelves=[],this.stats={},this.count=function(a){this.stats[a]=(0|this.stats[a])+1}}function b(a,b,c){this.x=0,this.y=a,this.w=this.free=b,this.h=c}return a.prototype.pack=function(a,b){a=[].concat(a),b=b||{};for(var c,d,e,f=[],g=0;g<a.length;g++)if(c=a[g].w||a[g].width,d=a[g].h||a[g].height,c&&d){if(e=this.packOne(c,d),!e)continue;b.inPlace&&(a[g].x=e.x,a[g].y=e.y),f.push(e)}if(this.shelves.length>0){for(var h=0,i=0,j=0;j<this.shelves.length;j++){var k=this.shelves[j];i+=k.h,h=Math.max(k.w-k.free,h)}this.resize(h,i)}return f},a.prototype.packOne=function(a,c){for(var d,e,f=0,g={shelf:-1,waste:1/0},h=0;h<this.shelves.length;h++){if(d=this.shelves[h],f+=d.h,c===d.h&&a<=d.free)return this.count(c),d.alloc(a,c);c>d.h||a>d.free||c<d.h&&a<=d.free&&(e=d.h-c,e<g.waste&&(g.waste=e,g.shelf=h))}if(-1!==g.shelf)return d=this.shelves[g.shelf],this.count(c),d.alloc(a,c);if(c<=this.h-f&&a<=this.w)return d=new b(f,this.w,c),this.shelves.push(d),this.count(c),d.alloc(a,c);if(this.autoResize){var i,j,k,l;return i=j=this.h,k=l=this.w,(i>=k||a>k)&&(l=2*Math.max(a,k)),(k>i||c>i)&&(j=2*Math.max(c,i)),this.resize(l,j),this.packOne(a,c)}return null},a.prototype.clear=function(){this.shelves=[],this.stats={}},a.prototype.resize=function(a,b){this.w=a,this.h=b;for(var c=0;c<this.shelves.length;c++)this.shelves[c].resize(a);return!0},b.prototype.alloc=function(a,b){if(a>this.free||b>this.h)return null;var c=this.x;return this.x+=a,this.free-=a,{x:c,y:this.y,w:a,h:b,width:a,height:b}},b.prototype.resize=function(a){return this.free+=a-this.w,this.w=a,!0},a})},{}],524:[function(a,b,c){"use strict";b.exports=function(a){return 0>a?-1:a>0?1:0}},{}],525:[function(a,b,c){"use strict";function d(a){return f(e(a))}b.exports=d;var e=a("boundary-cells"),f=a("reduce-simplicial-complex")},{"boundary-cells":70,"reduce-simplicial-complex":507}],526:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=0,d=0;b>d;++d)c=0|Math.max(c,a[d].length);return c-1}function e(a,b){for(var c=a.length,d=l.mallocUint8(c),e=0;c>e;++e)d[e]=a[e]<b|0;return d}function f(a,b){for(var c=a.length,d=b*(b+1)/2*c|0,e=l.mallocUint32(2*d),f=0,g=0;c>g;++g)for(var h=a[g],b=h.length,i=0;b>i;++i)for(var j=0;i>j;++j){var n=h[j],o=h[i];e[f++]=0|Math.min(n,o),e[f++]=0|Math.max(n,o)}var p=f/2|0;m(k(e,[p,2]));for(var q=2,g=2;f>g;g+=2)(e[g-2]!==e[g]||e[g-1]!==e[g+1])&&(e[q++]=e[g],e[q++]=e[g+1]);return k(e,[q/2|0,2])}function g(a,b,c,d){for(var e=a.data,f=a.shape[0],g=l.mallocDouble(f),h=0,i=0;f>i;++i){var j=e[2*i],m=e[2*i+1];if(c[j]!==c[m]){var n=b[j],o=b[m];e[2*h]=j,e[2*h+1]=m,g[h++]=(o-d)/(o-n)}}return a.shape[0]=h,k(g,[h])}function h(a,b){var c=l.mallocInt32(2*b),d=a.shape[0],e=a.data;c[0]=0;for(var f=0,g=0;d>g;++g){var h=e[2*g];if(h!==f){for(c[2*f+1]=g;++f<h;)c[2*f]=g,c[2*f+1]=g;c[2*f]=g}}for(c[2*f+1]=d;++f<b;)c[2*f]=c[2*f+1]=d;return c}function i(a){for(var b=0|a.shape[0],c=a.data,d=new Array(b),e=0;b>e;++e)d[e]=[c[2*e],c[2*e+1]];return d}function j(a,b,c,j){c=c||0,"undefined"==typeof j&&(j=d(a));var k=a.length;if(0===k||1>j)return{cells:[],vertexIds:[],vertexWeights:[]};var m=e(b,+c),o=f(a,j),p=g(o,b,m,+c),q=h(o,0|b.length),r=n(j)(a,o.data,q,m),s=i(o),t=[].slice.call(p.data,0,p.shape[0]);return l.free(m),l.free(o.data),l.free(p.data),l.free(q),{cells:r,vertexIds:s,vertexWeights:t}}b.exports=j;var k=a("ndarray"),l=a("typedarray-pool"),m=a("ndarray-sort"),n=a("./lib/codegen")},{"./lib/codegen":527,ndarray:468,"ndarray-sort":466,"typedarray-pool":550}],527:[function(a,b,c){"use strict";function d(a){function b(a){if(!(a.length<=0)){j.push("R.push(");for(var b=0;b<a.length;++b){var c=a[b];b>0&&j.push(","),j.push("[");for(var d=0;d<c.length;++d){var e=c[d];d>0&&j.push(","),j.push("B(C,E,c[",e[0],"],c[",e[1],"])")}j.push("]")}j.push(");")}}var c=0,d=new Array(a+1);d[0]=[[]];for(var e=1;a>=e;++e)for(var h=d[e]=g(e),i=0;i<h.length;++i)c=Math.max(c,h[e].length);for(var j=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",a,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],e=a+1;e>1;--e){a+1>e&&j.push("else "),j.push("if(l===",e,"){");for(var k=[],i=0;e>i;++i)k.push("(S[c["+i+"]]<<"+i+")");j.push("var M=",k.join("+"),";if(M===0||M===",(1<<e)-1,"){continue}switch(M){");for(var h=d[e-1],i=0;i<h.length;++i)j.push("case ",i,":"),b(h[i]),j.push("break;");j.push("}}")}j.push("}return R;};return getContour",a,"d");var l=new Function("pool",j.join(""));return l(f)}function e(a){var b=h[a];return b||(b=h[a]=d(a)),b}b.exports=e;var f=a("typedarray-pool"),g=a("marching-simplex-table"),h={}},{"marching-simplex-table":446,"typedarray-pool":550}],528:[function(a,b,c){"use strict";"use restrict";function d(a){for(var b=0,c=Math.max,d=0,e=a.length;e>d;++d)b=c(b,a[d].length);return b-1}function e(a){for(var b=-1,c=Math.max,d=0,e=a.length;e>d;++d)for(var f=a[d],g=0,h=f.length;h>g;++g)b=c(b,f[g]);return b+1}function f(a){for(var b=new Array(a.length),c=0,d=a.length;d>c;++c)b[c]=a[c].slice(0);return b}function g(a,b){var c=a.length,d=a.length-b.length,e=Math.min;if(d)return d;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:var f=a[0]+a[1]-b[0]-b[1];return f?f:e(a[0],a[1])-e(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(f=g+a[2]-(h+b[2]))return f;var i=e(a[0],a[1]),j=e(b[0],b[1]),f=e(i,a[2])-e(j,b[2]);return f?f:e(i+a[2],g)-e(j+b[2],h);default:var k=a.slice(0);k.sort();var l=b.slice(0);l.sort();for(var m=0;c>m;++m)if(d=k[m]-l[m])return d;return 0}}function h(a,b){return g(a[0],b[0])}function i(a,b){if(b){for(var c=a.length,d=new Array(c),e=0;c>e;++e)d[e]=[a[e],b[e]];d.sort(h);for(var e=0;c>e;++e)a[e]=d[e][0],b[e]=d[e][1];return a}return a.sort(g),a}function j(a){if(0===a.length)return[];for(var b=1,c=a.length,d=1;c>d;++d){var e=a[d];if(g(e,a[d-1])){if(d===b){b++;continue}a[b++]=e}}return a.length=b,a}function k(a,b){for(var c=0,d=a.length-1,e=-1;d>=c;){var f=c+d>>1,h=g(a[f],b);0>=h?(0===h&&(e=f),c=f+1):h>0&&(d=f-1)}return e}function l(a,b){for(var c=new Array(a.length),d=0,e=c.length;e>d;++d)c[d]=[];for(var f=[],d=0,h=b.length;h>d;++d)for(var i=b[d],j=i.length,l=1,m=1<<j;m>l;++l){f.length=t.popCount(l);for(var n=0,o=0;j>o;++o)l&1<<o&&(f[n++]=i[o]);var p=k(a,f);if(!(0>p))for(;;)if(c[p++].push(d),p>=a.length||0!==g(a[p],f))break}return c}function m(a,b){if(!b)return l(j(o(a,0)),a,0);for(var c=new Array(b),d=0;b>d;++d)c[d]=[];for(var d=0,e=a.length;e>d;++d)for(var f=a[d],g=0,h=f.length;h>g;++g)c[f[g]].push(d);return c}function n(a){for(var b=[],c=0,d=a.length;d>c;++c)for(var e=a[c],f=0|e.length,g=1,h=1<<f;h>g;++g){for(var j=[],k=0;f>k;++k)g>>>k&1&&j.push(e[k]);b.push(j)}return i(b)}function o(a,b){if(0>b)return[];for(var c=[],d=(1<<b+1)-1,e=0;e<a.length;++e)for(var f=a[e],g=d;g<1<<f.length;g=t.nextCombination(g)){for(var h=new Array(b+1),j=0,k=0;k<f.length;++k)g&1<<k&&(h[j++]=f[k]);c.push(h)}return i(c)}function p(a){for(var b=[],c=0,d=a.length;d>c;++c)for(var e=a[c],f=0,g=e.length;g>f;++f){for(var h=new Array(e.length-1),j=0,k=0;g>j;++j)j!==f&&(h[k++]=e[j]);b.push(h)}return i(b)}function q(a,b){for(var c=new u(b),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=f+1;g<e.length;++g)c.link(e[f],e[g]);for(var h=[],i=c.ranks,d=0;d<i.length;++d)i[d]=-1;for(var d=0;d<a.length;++d){var j=c.find(a[d][0]);i[j]<0?(i[j]=h.length,h.push([a[d].slice(0)])):h[i[j]].push(a[d].slice(0))}return h}function r(a){for(var b=j(i(o(a,0))),c=new u(b.length),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=k(b,[e[f]]),h=f+1;h<e.length;++h)c.link(g,k(b,[e[h]]));for(var l=[],m=c.ranks,d=0;d<m.length;++d)m[d]=-1;for(var d=0;d<a.length;++d){var n=c.find(k(b,[a[d][0]]));m[n]<0?(m[n]=l.length,l.push([a[d].slice(0)])):l[m[n]].push(a[d].slice(0))}return l}function s(a,b){return b?q(a,b):r(a)}var t=a("bit-twiddle"),u=a("union-find");c.dimension=d,c.countVertices=e,c.cloneCells=f,c.compareCells=g,c.normalize=i,c.unique=j,c.findCell=k,c.incidence=l,c.dual=m,c.explode=n,c.skeleton=o,c.boundary=p,c.connectedComponents=s},{"bit-twiddle":68,"union-find":551}],529:[function(a,b,c){arguments[4][68][0].apply(c,arguments)},{dup:68}],530:[function(a,b,c){arguments[4][528][0].apply(c,arguments)},{"bit-twiddle":529,dup:528,"union-find":531}],531:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;a>b;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d,d.prototype.length=function(){return this.roots.length},d.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},d.prototype.find=function(a){for(var b=this.roots;b[a]!==a;){var c=b[a];b[a]=b[c],a=c}return a},d.prototype.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];h>g?f[c]=d:g>h?f[d]=c:(f[d]=c,++e[c])}}},{}],532:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.abs(f(a,b,c)),e=Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2));return d/e}function e(a,b,c){function e(a){if(u[a])return 1/0;var c=r[a],e=s[a];return 0>c||0>e?1/0:d(b[a],b[c],b[e])}function f(a,b){var c=z[a],d=z[b];z[a]=d,z[b]=c,A[c]=b,A[d]=a}function h(a){return t[z[a]]}function i(a){return 1&a?a-1>>1:(a>>1)-1}function j(a){for(var b=h(a);;){var c=b,d=2*a+1,e=2*(a+1),g=a;if(C>d){var i=h(d);c>i&&(g=d,c=i)}if(C>e){var j=h(e);c>j&&(g=e)}if(g===a)return a;f(a,g),a=g}}function k(a){for(var b=h(a);a>0;){var c=i(a);if(c>=0){var d=h(c);if(d>b){f(a,c),a=c;continue}}return a}}function l(){if(C>0){var a=z[0];return f(0,C-1),C-=1,j(0),a}return-1}function m(a,b){var c=z[a];return t[c]===b?a:(t[c]=-(1/0),k(a),l(),t[c]=b,C+=1,k(C-1))}function n(a){if(!u[a]){u[a]=!0;var b=r[a],c=s[a];r[c]>=0&&(r[c]=b),s[b]>=0&&(s[b]=c),A[b]>=0&&m(A[b],e(b)),A[c]>=0&&m(A[c],e(c))}}function o(a,b){if(a[b]<0)return b;var c=b,d=b;do{var e=a[d];if(!u[d]||0>e||e===d)break;if(d=e,e=a[d],!u[d]||0>e||e===d)break;d=e,c=a[c]}while(c!==d);for(var f=b;f!==d;f=a[f])a[f]=d;return d}for(var p=b.length,q=a.length,r=new Array(p),s=new Array(p),t=new Array(p),u=new Array(p),v=0;p>v;++v)r[v]=s[v]=-1,t[v]=1/0,u[v]=!1;for(var v=0;q>v;++v){var w=a[v];if(2!==w.length)throw new Error("Input must be a graph");var x=w[1],y=w[0];-1!==s[y]?s[y]=-2:s[y]=x,-1!==r[x]?r[x]=-2:r[x]=y}for(var z=[],A=new Array(p),v=0;p>v;++v){var B=t[v]=e(v);1/0>B?(A[v]=z.length,z.push(v)):A[v]=-1}for(var C=z.length,v=C>>1;v>=0;--v)j(v);for(;;){var D=l();if(0>D||t[D]>c)break;n(D)}for(var E=[],v=0;p>v;++v)u[v]||(A[v]=E.length,E.push(b[v].slice()));var F=(E.length,[]);return a.forEach(function(a){var b=o(r,a[0]),c=o(s,a[1]);if(b>=0&&c>=0&&b!==c){var d=A[b],e=A[c];d!==e&&F.push([d,e])}}),g.unique(g.normalize(F)),{positions:E,edges:F}}b.exports=e;var f=a("robust-orientation"),g=a("simplicial-complex")},{"robust-orientation":517,"simplicial-complex":530}],533:[function(a,b,c){"use strict";function d(a,b){var c,d;if(b[0][0]<b[1][0])c=b[0],d=b[1];else{if(!(b[0][0]>b[1][0])){var e=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]),h=Math.min(b[0][1],b[1][1]),i=Math.max(b[0][1],b[1][1]);return h>g?g-h:e>i?e-i:g-i}c=b[1],d=b[0]}var j,k;a[0][1]<a[1][1]?(j=a[0],k=a[1]):(j=a[1],k=a[0]);var l=f(d,c,j);return l?l:(l=f(d,c,k),l?l:k-d)}function e(a,b){var c,e;if(b[0][0]<b[1][0])c=b[0],e=b[1];else{if(!(b[0][0]>b[1][0]))return d(b,a);c=b[1],e=b[0]}var g,h;if(a[0][0]<a[1][0])g=a[0],h=a[1];else{if(!(a[0][0]>a[1][0]))return-d(a,b);g=a[1],h=a[0]}var i=f(c,e,h),j=f(c,e,g);if(0>i){if(0>=j)return i}else if(i>0){if(j>=0)return i}else if(j)return j;if(i=f(h,g,e),j=f(h,g,c),0>i){if(0>=j)return i}else if(i>0){if(j>=0)return i}else if(j)return j;return e[0]-h[0]}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":517}],534:[function(a,b,c){"use strict";function d(a,b,c){this.slabs=a,this.coordinates=b,this.horizontal=c}function e(a,b){return a.y-b}function f(a,b){for(var c=null;a;){var d,e,g=a.key;g[0][0]<g[1][0]?(d=g[0],e=g[1]):(d=g[1],e=g[0]);var h=l(d,e,b);if(0>h)a=a.left;else if(h>0)if(b[0]!==g[1][0])c=a,a=a.right;else{var i=f(a.right,b);if(i)return i;a=a.left}else{if(b[0]!==g[1][0])return a;var i=f(a.right,b);if(i)return i;a=a.left}}return c}function g(a,b,c,d){this.y=a,this.index=b,this.start=c,this.closed=d}function h(a,b,c,d){this.x=a,this.segment=b,this.create=c,this.index=d}function i(a){for(var b=a.length,c=2*b,e=new Array(c),f=0;b>f;++f){var i=a[f],j=i[0][0]<i[1][0];e[2*f]=new h(i[0][0],i,j,f),e[2*f+1]=new h(i[1][0],i,!j,f)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create,c?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1]))});for(var l=k(m),n=[],o=[],p=[],f=0;c>f;){for(var q=e[f].x,r=[];c>f;){var s=e[f];if(s.x!==q)break;f+=1,s.segment[0][0]===s.x&&s.segment[1][0]===s.x?s.create&&(s.segment[0][1]<s.segment[1][1]?(r.push(new g(s.segment[0][1],s.index,!0,!0)),r.push(new g(s.segment[1][1],s.index,!1,!1))):(r.push(new g(s.segment[1][1],s.index,!0,!1)),r.push(new g(s.segment[0][1],s.index,!1,!0)))):l=s.create?l.insert(s.segment,s.index):l.remove(s.segment)}n.push(l.root),o.push(q),p.push(r)}return new d(n,o,p)}b.exports=i;var j=a("binary-search-bounds"),k=a("functional-red-black-tree"),l=a("robust-orientation"),m=a("./lib/order-segments"),n=d.prototype;n.castUp=function(a){var b=j.le(this.coordinates,a[0]);if(0>b)return-1;var c=(this.slabs[b],f(this.slabs[b],a)),d=-1;if(c&&(d=c.value),this.coordinates[b]===a[0]){var g=null;if(c&&(g=c.key),b>0){var h=f(this.slabs[b-1],a);h&&(g?m(h.key,g)>0&&(g=h.key,d=h.value):(d=h.value,g=h.key))}var i=this.horizontal[b];if(i.length>0){var k=j.ge(i,a[1],e);if(k<i.length){var n=i[k];if(a[1]===n.y){if(n.closed)return n.index;for(;k<i.length-1&&i[k+1].y===a[1];)if(k+=1,n=i[k],n.closed)return n.index;if(n.y===a[1]&&!n.start){if(k+=1,k>=i.length)return d;n=i[k]}}if(n.start)if(g){var o=l(g[0],g[1],[a[0],n.y]);g[0][0]>g[1][0]&&(o=-o),o>0&&(d=n.index)}else d=n.index;else n.y!==a[1]&&(d=n.index)}}}return d}},{"./lib/order-segments":533,"binary-search-bounds":67,"functional-red-black-tree":136,"robust-orientation":517}],535:[function(a,b,c){"use strict";function d(a,b){var c=j(i(a,b),[b[b.length-1]]);return c[c.length-1]}function e(a,b,c,d){var e=d-b,f=-b/e;0>f?f=0:f>1&&(f=1);for(var g=1-f,h=a.length,i=new Array(h),j=0;h>j;++j)i[j]=f*a[j]+g*c[j];return i}function f(a,b){for(var c=[],f=[],g=d(a[a.length-1],b),h=a[a.length-1],i=a[0],j=0;j<a.length;++j,h=i){i=a[j];var k=d(i,b);if(0>g&&k>0||g>0&&0>k){var l=e(h,k,i,g);c.push(l),f.push(l.slice())}0>k?f.push(i.slice()):k>0?c.push(i.slice()):(c.push(i.slice()),f.push(i.slice())),g=k}return{positive:c,negative:f}}function g(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(0>f&&j>0||f>0&&0>j)&&c.push(e(g,j,h,f)),j>=0&&c.push(h.slice()),f=j}return c}function h(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(0>f&&j>0||f>0&&0>j)&&c.push(e(g,j,h,f)),0>=j&&c.push(h.slice()),f=j}return c}var i=a("robust-dot-product"),j=a("robust-sum");b.exports=f,b.exports.positive=g,b.exports.negative=h},{"robust-dot-product":514,"robust-sum":522}],536:[function(b,c,d){!function(){"use strict";function b(a){return e(f(a),arguments)}function c(a,c){return b.apply(null,[a].concat(c||[]))}function e(a,c){var d,e,f,h,i,j,k,l,m,n=1,o=a.length,p="";for(e=0;o>e;e++)if("string"==typeof a[e])p+=a[e];else if(Array.isArray(a[e])){if(h=a[e],h[2])for(d=c[n],f=0;f<h[2].length;f++){if(!d.hasOwnProperty(h[2][f]))throw new Error(b('[sprintf] property "%s" does not exist',h[2][f]));d=d[h[2][f]]}else d=h[1]?c[h[1]]:c[n++];if(g.not_type.test(h[8])&&g.not_primitive.test(h[8])&&d instanceof Function&&(d=d()),g.numeric_arg.test(h[8])&&"number"!=typeof d&&isNaN(d))throw new TypeError(b("[sprintf] expecting number but found %T",d));switch(g.number.test(h[8])&&(l=d>=0),h[8]){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,h[6]?parseInt(h[6]):0);break;case"e":d=h[7]?parseFloat(d).toExponential(h[7]):parseFloat(d).toExponential();break;case"f":d=h[7]?parseFloat(d).toFixed(h[7]):parseFloat(d);break;case"g":d=h[7]?String(Number(d.toPrecision(h[7]))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=h[7]?d.substring(0,h[7]):d;break;case"t":d=String(!!d),d=h[7]?d.substring(0,h[7]):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=h[7]?d.substring(0,h[7]):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=h[7]?d.substring(0,h[7]):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}g.json.test(h[8])?p+=d:(!g.number.test(h[8])||l&&!h[3]?m="":(m=l?"+":"-",d=d.toString().replace(g.sign,"")),j=h[4]?"0"===h[4]?"0":h[4].charAt(1):" ",k=h[6]-(m+d).length,i=h[6]&&k>0?j.repeat(k):"",p+=h[5]?m+d+i:"0"===j?m+i+d:i+m+d)}return p}function f(a){if(h[a])return h[a];for(var b,c=a,d=[],e=0;c;){if(null!==(b=g.text.exec(c)))d.push(b[0]);else if(null!==(b=g.modulo.exec(c)))d.push("%");else{if(null===(b=g.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(b[2]){e|=1;var f=[],i=b[2],j=[];if(null===(j=g.key.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(f.push(j[1]);""!==(i=i.substring(j[0].length));)if(null!==(j=g.key_access.exec(i)))f.push(j[1]);else{if(null===(j=g.index_access.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");f.push(j[1])}b[2]=f}else e|=2;if(3===e)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push(b)}c=c.substring(b[0].length)}return h[a]=d}var g={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},h=Object.create(null);"undefined"!=typeof d&&(d.sprintf=b,d.vsprintf=c),"undefined"!=typeof window&&(window.sprintf=b,window.vsprintf=c,"function"==typeof a&&a.amd&&a(function(){return{sprintf:b,vsprintf:c}}))}()},{}],537:[function(a,b,c){"use strict";function d(a){function b(b){var c=[b],j=[b];for(d[b]=e[b]=k,f[b]=!0,k+=1;j.length>0;){b=j[j.length-1];var n=a[b];if(g[b]<n.length){for(var o=g[b];o<n.length;++o){var p=n[o];if(d[p]<0){d[p]=e[p]=k,f[p]=!0,k+=1,c.push(p),j.push(p);break}f[p]&&(e[b]=0|Math.min(e[b],e[p])),h[p]>=0&&i[b].push(h[p])}g[b]=o}else{if(e[b]===d[b]){for(var q=[],r=[],s=0,o=c.length-1;o>=0;--o){var t=c[o];if(f[t]=!1,q.push(t),r.push(i[t]),s+=i[t].length,h[t]=l.length,t===b){c.length=o;break}}l.push(q);for(var u=new Array(s),o=0;o<r.length;o++)for(var v=0;v<r[o].length;v++)u[--s]=r[o][v];m.push(u)}j.pop()}}}for(var c=a.length,d=new Array(c),e=new Array(c),f=new Array(c),g=new Array(c),h=new Array(c),i=new Array(c),j=0;c>j;++j)d[j]=-1,e[j]=0,f[j]=!1,g[j]=0,h[j]=-1,i[j]=[];for(var k=0,l=[],m=[],j=0;c>j;++j)d[j]<0&&b(j);for(var n,j=0;j<m.length;j++){var o=m[j];if(0!==o.length){o.sort(function(a,b){return a-b}),n=[o[0]];for(var p=1;p<o.length;p++)o[p]!==o[p-1]&&n.push(o[p]);m[j]=n}}return{components:l,adjacencyList:m}}b.exports=d},{}],538:[function(a,b,c){"use strict";function d(a){return new e(a)}function e(a){this.options=n(Object.create(this.options),a),this.trees=new Array(this.options.maxZoom+1)}function f(a,b,c,d,e){return{x:a,y:b,zoom:1/0,id:d,properties:e,parentId:-1,numPoints:c}}function g(a,b){var c=a.geometry.coordinates;return{x:j(c[0]),y:k(c[1]),zoom:1/0,id:b,parentId:-1}}function h(a){return{type:"Feature",properties:i(a),geometry:{type:"Point",coordinates:[l(a.x),m(a.y)]}}}function i(a){var b=a.numPoints,c=b>=1e4?Math.round(b/1e3)+"k":b>=1e3?Math.round(b/100)/10+"k":b;return n(n({},a.properties),{cluster:!0,cluster_id:a.id,point_count:b,point_count_abbreviated:c})}function j(a){return a/360+.5}function k(a){var b=Math.sin(a*Math.PI/180),c=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return 0>c?0:c>1?1:c}function l(a){return 360*(a-.5)}function m(a){var b=(180-360*a)*Math.PI/180;return 360*Math.atan(Math.exp(b))/Math.PI-90}function n(a,b){for(var c in b)a[c]=b[c];return a}function o(a){return a.x}function p(a){return a.y}var q=a("kdbush");b.exports=d,e.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(a){return a}},load:function(a){var b=this.options.log;b&&console.time("total time");var c="prepare "+a.length+" points";b&&console.time(c),this.points=a;var d=a.map(g);b&&console.timeEnd(c);for(var e=this.options.maxZoom;e>=this.options.minZoom;e--){var f=+Date.now();this.trees[e+1]=q(d,o,p,this.options.nodeSize,Float32Array),d=this._cluster(d,e),b&&console.log("z%d: %d clusters in %dms",e,d.length,+Date.now()-f)}return this.trees[this.options.minZoom]=q(d,o,p,this.options.nodeSize,Float32Array),b&&console.timeEnd("total time"),this},getClusters:function(a,b){for(var c=this.trees[this._limitZoom(b)],d=c.range(j(a[0]),k(a[3]),j(a[2]),k(a[1])),e=[],f=0;f<d.length;f++){var g=c.points[d[f]];e.push(g.numPoints?h(g):this.points[g.id])}return e},getChildren:function(a,b){for(var c=this.trees[b+1].points[a],d=this.options.radius/(this.options.extent*Math.pow(2,b)),e=this.trees[b+1].within(c.x,c.y,d),f=[],g=0;g<e.length;g++){var i=this.trees[b+1].points[e[g]];i.parentId===a&&f.push(i.numPoints?h(i):this.points[i.id])}return f},getLeaves:function(a,b,c,d){c=c||10,d=d||0;var e=[];return this._appendLeaves(e,a,b,c,d,0),e},getTile:function(a,b,c){var d=this.trees[this._limitZoom(a)],e=Math.pow(2,a),f=this.options.extent,g=this.options.radius,h=g/f,i=(c-h)/e,j=(c+1+h)/e,k={features:[]};return this._addTileFeatures(d.range((b-h)/e,i,(b+1+h)/e,j),d.points,b,c,e,k),0===b&&this._addTileFeatures(d.range(1-h/e,i,1,j),d.points,e,c,e,k),b===e-1&&this._addTileFeatures(d.range(0,i,h/e,j),d.points,-1,c,e,k),k.features.length?k:null},getClusterExpansionZoom:function(a,b){for(;b<this.options.maxZoom;){var c=this.getChildren(a,b);if(b++,1!==c.length)break;a=c[0].properties.cluster_id}return b},_appendLeaves:function(a,b,c,d,e,f){for(var g=this.getChildren(b,c),h=0;h<g.length;h++){var i=g[h].properties;if(i.cluster?f+i.point_count<=e?f+=i.point_count:f=this._appendLeaves(a,i.cluster_id,c+1,d,e,f):e>f?f++:a.push(g[h]),a.length===d)break}return f},_addTileFeatures:function(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var h=b[a[g]];f.features.push({type:1,geometry:[[Math.round(this.options.extent*(h.x*e-c)),Math.round(this.options.extent*(h.y*e-d))]],tags:h.numPoints?i(h):this.points[h.id].properties})}},_limitZoom:function(a){return Math.max(this.options.minZoom,Math.min(a,this.options.maxZoom+1))},_cluster:function(a,b){for(var c=[],d=this.options.radius/(this.options.extent*Math.pow(2,b)),e=0;e<a.length;e++){var g=a[e];if(!(g.zoom<=b)){g.zoom=b;var h=this.trees[b+1],i=h.within(g.x,g.y,d),j=g.numPoints||1,k=g.x*j,l=g.y*j,m=null;this.options.reduce&&(m=this.options.initial(),this._accumulate(m,g));for(var n=0;n<i.length;n++){var o=h.points[i[n]];if(b<o.zoom){var p=o.numPoints||1;o.zoom=b,k+=o.x*p,l+=o.y*p,j+=p,o.parentId=e,this.options.reduce&&this._accumulate(m,o)}}1===j?c.push(g):(g.parentId=e,c.push(f(k/j,l/j,j,e,m)))}}return c},_accumulate:function(a,b){var c=b.numPoints?b.properties:this.options.map(this.points[b.id].properties);this.options.reduce(a,c)}}},{kdbush:299}],539:[function(a,b,c){"use strict";function d(a){return a.split("").map(function(a){return a in e?e[a]:""}).join("")}b.exports=d;var e={" ":" ",0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻",a:"ᵃ",b:"ᵇ",c:"ᶜ",d:"ᵈ",e:"ᵉ",f:"ᶠ",g:"ᵍ",h:"ʰ",i:"ⁱ",j:"ʲ",k:"ᵏ",l:"ˡ",m:"ᵐ",n:"ⁿ",o:"ᵒ",p:"ᵖ",r:"ʳ",s:"ˢ",t:"ᵗ",u:"ᵘ",v:"ᵛ",w:"ʷ",x:"ˣ",y:"ʸ",z:"ᶻ"}},{}],540:[function(a,b,c){"use strict";function d(a,b){var c=a.length,d=["'use strict';"],e="surfaceNets"+a.join("_")+"d"+b;d.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===b&&d.push("getters:[0],");for(var f=[],i=[],j=0;c>j;++j)f.push("d"+j),i.push("d"+j);for(var j=0;1<<c>j;++j)f.push("v"+j),i.push("v"+j);for(var j=0;1<<c>j;++j)f.push("p"+j),i.push("p"+j);f.push("a","b","c"),i.push("a","c"),d.push("vertex:function vertexFunc(",f.join(),"){");for(var k=[],j=0;1<<c>j;++j)k.push("(p"+j+"<<"+j+")");d.push("var m=(",k.join("+"),")|0;if(m===0||m===",(1<<(1<<c))-1,"){return}");var l=[],m=[];128>=1<<(1<<c)?(d.push("switch(m){"),m=d):d.push("switch(m>>>7){");for(var j=0;1<<(1<<c)>j;++j){if(1<<(1<<c)>128&&j%128===0){l.length>0&&m.push("}}");var n="vExtra"+l.length;d.push("case ",j>>>7,":",n,"(m&0x7f,",i.join(),");break;"),m=["function ",n,"(m,",i.join(),"){switch(m){"],l.push(m)}m.push("case ",127&j,":");for(var o=new Array(c),p=new Array(c),q=new Array(c),r=new Array(c),s=0,t=0;c>t;++t)o[t]=[],p[t]=[],q[t]=0,r[t]=0;for(var t=0;1<<c>t;++t)for(var u=0;c>u;++u){var v=t^1<<u;if(!(v>t)&&!(j&1<<v)!=!(j&1<<t)){var w=1;j&1<<v?p[u].push("v"+v+"-v"+t):(p[u].push("v"+t+"-v"+v),w=-w),0>w?(o[u].push("-v"+t+"-v"+v),q[u]+=2):(o[u].push("v"+t+"+v"+v),q[u]-=2),s+=1;for(var x=0;c>x;++x)x!==u&&(v&1<<x?r[x]+=1:r[x]-=1)}}for(var y=[],u=0;c>u;++u)if(0===o[u].length)y.push("d"+u+"-0.5");else{var z="";q[u]<0?z=q[u]+"*c":q[u]>0&&(z="+"+q[u]+"*c");var A=.5*(o[u].length/s),B=.5+.5*(r[u]/s);y.push("d"+u+"-"+B+"-"+A+"*("+o[u].join("+")+z+")/("+p[u].join("+")+")")}m.push("a.push([",y.join(),"]);","break;")}d.push("}},"),l.length>0&&m.push("}}");for(var C=[],j=0;1<<c-1>j;++j)C.push("v"+j);C.push("c0","c1","p0","p1","a","b","c"),d.push("cell:function cellFunc(",C.join(),"){");var D=h(c-1);d.push("if(p0){b.push(",D.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",D.map(function(a){var b=a.slice();return b.reverse(),"["+b.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",e,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",e,";");
for(var j=0;j<l.length;++j)d.push(l[j].join(""));var E=new Function("genContour",d.join(""));return E(g)}function e(a,b){for(var c=i(a,b),d=c.length,e=new Array(d),f=new Array(d),g=0;d>g;++g)e[g]=[c[g]],f[g]=[g];return{positions:e,cells:f}}function f(a,b){if(a.dimension<=0)return{positions:[],cells:[]};if(1===a.dimension)return e(a,b);var c=a.order.join()+"-"+a.dtype,f=j[c],b=+b||0;return f||(f=j[c]=d(a.order,a.dtype)),f(a,b)}b.exports=f;var g=a("ndarray-extract-contour"),h=a("triangulate-hypercube"),i=a("zero-crossings"),j={}},{"ndarray-extract-contour":457,"triangulate-hypercube":546,"zero-crossings":593}],541:[function(a,b,c){(function(c){"use strict";function d(a){for(var b=a.cells,c=a.positions,d=new Float32Array(6*b.length),e=0,f=0,g=0;g<b.length;++g)for(var h=b[g],i=0;3>i;++i){var j=c[h[i]];d[e++]=j[0],d[e++]=j[1]+1.4,f=Math.max(j[0],f)}return{data:d,shape:f}}function e(a,b,c){var c=c||{},g=h[a];g||(g=h[a]={" ":{data:new Float32Array(0),shape:.2}});var i=g[b];if(!i)if(b.length<=1||!/\d/.test(b))i=g[b]=d(f(b,{triangles:!0,font:a,textAlign:c.textAlign||"left",textBaseline:"alphabetic"}));else{for(var j=b.split(/(\d|\s)/),k=new Array(j.length),l=0,m=0,n=0;n<j.length;++n)k[n]=e(a,j[n]),l+=k[n].data.length,m+=k[n].shape,n>0&&(m+=.02);for(var o=new Float32Array(l),p=0,q=-.5*m,n=0;n<k.length;++n){for(var r=k[n].data,s=0;s<r.length;s+=2)o[p++]=r[s]+q,o[p++]=r[s+1];q+=k[n].shape+.02}i=g[b]={data:o,shape:m}}return i}b.exports=e;var f=a("vectorize-text"),g=window||c.global||{},h=g.__TEXT_CACHE||{};g.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:496,"vectorize-text":563}],542:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.fontSize=a||24,this.buffer=void 0===b?3:b,this.cutoff=d||.25,this.fontFamily=e||"sans-serif",this.radius=c||8;var f=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=f,this.ctx=this.canvas.getContext("2d"),this.ctx.font=a+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(f*f),this.gridInner=new Float64Array(f*f),this.f=new Float64Array(f),this.d=new Float64Array(f),this.z=new Float64Array(f+1),this.v=new Int16Array(f),this.middle=Math.round(f/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function e(a,b,c,d,e,g,h){for(var i=0;b>i;i++){for(var j=0;c>j;j++)d[j]=a[j*b+i];for(f(d,e,g,h,c),j=0;c>j;j++)a[j*b+i]=e[j]}for(j=0;c>j;j++){for(i=0;b>i;i++)d[i]=a[j*b+i];for(f(d,e,g,h,b),i=0;b>i;i++)a[j*b+i]=Math.sqrt(e[i])}}function f(a,b,c,d,e){c[0]=0,d[0]=-g,d[1]=+g;for(var f=1,h=0;e>f;f++){for(var i=(a[f]+f*f-(a[c[h]]+c[h]*c[h]))/(2*f-2*c[h]);i<=d[h];)h--,i=(a[f]+f*f-(a[c[h]]+c[h]*c[h]))/(2*f-2*c[h]);h++,c[h]=f,d[h]=i,d[h+1]=+g}for(f=0,h=0;e>f;f++){for(;d[h+1]<f;)h++;b[f]=(f-c[h])*(f-c[h])+a[c[h]]}}b.exports=d;var g=1e20;d.prototype.draw=function(a){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(a,this.buffer,this.middle);for(var b=this.ctx.getImageData(0,0,this.size,this.size),c=b.data,d=0;d<this.size*this.size;d++){var f=c[4*d+3]/255;this.gridOuter[d]=1===f?0:0===f?g:Math.pow(Math.max(0,.5-f),2),this.gridInner[d]=1===f?g:0===f?0:Math.pow(Math.max(0,f-.5),2)}for(e(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),e(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++){var h=this.gridOuter[d]-this.gridInner[d],i=Math.max(0,Math.min(255,Math.round(255-255*(h/this.radius+this.cutoff))));c[4*d+0]=i,c[4*d+1]=i,c[4*d+2]=i,c[4*d+3]=255}return b}},{}],543:[function(b,c,d){!function(b){function d(a,b){if(a=a?a:"",b=b||{},a instanceof d)return a;if(!(this instanceof d))return new d(a,b);var c=e(a);this._originalInput=a,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=R(100*this._a)/100,this._format=b.format||c.format,this._gradientType=b.gradientType,this._r<1&&(this._r=R(this._r)),this._g<1&&(this._g=R(this._g)),this._b<1&&(this._b=R(this._b)),this._ok=c.ok,this._tc_id=Q++}function e(a){var b={r:0,g:0,b:0},c=1,d=null,e=null,g=null,i=!1,k=!1;return"string"==typeof a&&(a=M(a)),"object"==typeof a&&(L(a.r)&&L(a.g)&&L(a.b)?(b=f(a.r,a.g,a.b),i=!0,k="%"===String(a.r).substr(-1)?"prgb":"rgb"):L(a.h)&&L(a.s)&&L(a.v)?(d=I(a.s),e=I(a.v),b=j(a.h,d,e),i=!0,k="hsv"):L(a.h)&&L(a.s)&&L(a.l)&&(d=I(a.s),g=I(a.l),b=h(a.h,d,g),i=!0,k="hsl"),a.hasOwnProperty("a")&&(c=a.a)),c=B(c),{ok:i,format:a.format||k,r:S(255,T(b.r,0)),g:S(255,T(b.g,0)),b:S(255,T(b.b,0)),a:c}}function f(a,b,c){return{r:255*C(a,255),g:255*C(b,255),b:255*C(c,255)}}function g(a,b,c){a=C(a,255),b=C(b,255),c=C(c,255);var d,e,f=T(a,b,c),g=S(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function h(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=C(a,360),b=C(b,100),c=C(c,100),0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function i(a,b,c){a=C(a,255),b=C(b,255),c=C(c,255);var d,e,f=T(a,b,c),g=S(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function j(a,c,d){a=6*C(a,360),c=C(c,100),d=C(d,100);var e=b.floor(a),f=a-e,g=d*(1-c),h=d*(1-f*c),i=d*(1-(1-f)*c),j=e%6,k=[d,h,g,g,i,d][j],l=[i,d,d,h,g,g][j],m=[g,g,i,d,d,h][j];return{r:255*k,g:255*l,b:255*m}}function k(a,b,c,d){var e=[H(R(a).toString(16)),H(R(b).toString(16)),H(R(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function l(a,b,c,d,e){var f=[H(R(a).toString(16)),H(R(b).toString(16)),H(R(c).toString(16)),H(J(d))];return e&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1)&&f[3].charAt(0)==f[3].charAt(1)?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function m(a,b,c,d){var e=[H(J(d)),H(R(a).toString(16)),H(R(b).toString(16)),H(R(c).toString(16))];return e.join("")}function n(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.s-=b/100,c.s=D(c.s),d(c)}function o(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.s+=b/100,c.s=D(c.s),d(c)}function p(a){return d(a).desaturate(100)}function q(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.l+=b/100,c.l=D(c.l),d(c)}function r(a,b){b=0===b?0:b||10;var c=d(a).toRgb();return c.r=T(0,S(255,c.r-R(255*-(b/100)))),c.g=T(0,S(255,c.g-R(255*-(b/100)))),c.b=T(0,S(255,c.b-R(255*-(b/100)))),d(c)}function s(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.l-=b/100,c.l=D(c.l),d(c)}function t(a,b){var c=d(a).toHsl(),e=(c.h+b)%360;return c.h=0>e?360+e:e,d(c)}function u(a){var b=d(a).toHsl();return b.h=(b.h+180)%360,d(b)}function v(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+120)%360,s:b.s,l:b.l}),d({h:(c+240)%360,s:b.s,l:b.l})]}function w(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+90)%360,s:b.s,l:b.l}),d({h:(c+180)%360,s:b.s,l:b.l}),d({h:(c+270)%360,s:b.s,l:b.l})]}function x(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+72)%360,s:b.s,l:b.l}),d({h:(c+216)%360,s:b.s,l:b.l})]}function y(a,b,c){b=b||6,c=c||30;var e=d(a).toHsl(),f=360/c,g=[d(a)];for(e.h=(e.h-(f*b>>1)+720)%360;--b;)e.h=(e.h+f)%360,g.push(d(e));return g}function z(a,b){b=b||6;for(var c=d(a).toHsv(),e=c.h,f=c.s,g=c.v,h=[],i=1/b;b--;)h.push(d({h:e,s:f,v:g})),g=(g+i)%1;return h}function A(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function B(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function C(a,c){F(a)&&(a="100%");var d=G(a);return a=S(c,T(0,parseFloat(a))),d&&(a=parseInt(a*c,10)/100),b.abs(a-c)<1e-6?1:a%c/parseFloat(c)}function D(a){return S(1,T(0,a))}function E(a){return parseInt(a,16)}function F(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)}function G(a){return"string"==typeof a&&-1!=a.indexOf("%")}function H(a){return 1==a.length?"0"+a:""+a}function I(a){return 1>=a&&(a=100*a+"%"),a}function J(a){return b.round(255*parseFloat(a)).toString(16)}function K(a){return E(a)/255}function L(a){return!!X.CSS_UNIT.exec(a)}function M(a){a=a.replace(O,"").replace(P,"").toLowerCase();var b=!1;if(V[a])a=V[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=X.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=X.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=X.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=X.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=X.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=X.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=X.hex8.exec(a))?{r:E(c[1]),g:E(c[2]),b:E(c[3]),a:K(c[4]),format:b?"name":"hex8"}:(c=X.hex6.exec(a))?{r:E(c[1]),g:E(c[2]),b:E(c[3]),format:b?"name":"hex"}:(c=X.hex4.exec(a))?{r:E(c[1]+""+c[1]),g:E(c[2]+""+c[2]),b:E(c[3]+""+c[3]),a:K(c[4]+""+c[4]),format:b?"name":"hex8"}:(c=X.hex3.exec(a))?{r:E(c[1]+""+c[1]),g:E(c[2]+""+c[2]),b:E(c[3]+""+c[3]),format:b?"name":"hex"}:!1}function N(a){var b,c;return a=a||{level:"AA",size:"small"},b=(a.level||"AA").toUpperCase(),c=(a.size||"small").toLowerCase(),"AA"!==b&&"AAA"!==b&&(b="AA"),"small"!==c&&"large"!==c&&(c="small"),{level:b,size:c}}var O=/^\s+/,P=/\s+$/,Q=0,R=b.round,S=b.min,T=b.max,U=b.random;d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},getLuminance:function(){var a,c,d,e,f,g,h=this.toRgb();return a=h.r/255,c=h.g/255,d=h.b/255,e=.03928>=a?a/12.92:b.pow((a+.055)/1.055,2.4),f=.03928>=c?c/12.92:b.pow((c+.055)/1.055,2.4),g=.03928>=d?d/12.92:b.pow((d+.055)/1.055,2.4),.2126*e+.7152*f+.0722*g},setAlpha:function(a){return this._a=B(a),this._roundA=R(100*this._a)/100,this},toHsv:function(){var a=i(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=i(this._r,this._g,this._b),b=R(360*a.h),c=R(100*a.s),d=R(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=g(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=g(this._r,this._g,this._b),b=R(360*a.h),c=R(100*a.s),d=R(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return k(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(a){return l(this._r,this._g,this._b,this._a,a)},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:R(this._r),g:R(this._g),b:R(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+R(this._r)+", "+R(this._g)+", "+R(this._b)+")":"rgba("+R(this._r)+", "+R(this._g)+", "+R(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:R(100*C(this._r,255))+"%",g:R(100*C(this._g,255))+"%",b:R(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+R(100*C(this._r,255))+"%, "+R(100*C(this._g,255))+"%, "+R(100*C(this._b,255))+"%)":"rgba("+R(100*C(this._r,255))+"%, "+R(100*C(this._g,255))+"%, "+R(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:W[k(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var b="#"+m(this._r,this._g,this._b,this._a),c=b,e=this._gradientType?"GradientType = 1, ":"";if(a){var f=d(a);c="#"+m(f._r,f._g,f._b,f._a)}return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"hex4"===a||"hex8"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex4"===a&&(c=this.toHex8String(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())},clone:function(){return d(this.toString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(q,arguments)},brighten:function(){return this._applyModification(r,arguments)},darken:function(){return this._applyModification(s,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(o,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(t,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},d.fromRatio=function(a,b){if("object"==typeof a){var c={};for(var e in a)a.hasOwnProperty(e)&&("a"===e?c[e]=a[e]:c[e]=I(a[e]));a=c}return d(a,b)},d.equals=function(a,b){return a&&b?d(a).toRgbString()==d(b).toRgbString():!1},d.random=function(){return d.fromRatio({r:U(),g:U(),b:U()})},d.mix=function(a,b,c){c=0===c?0:c||50;var e=d(a).toRgb(),f=d(b).toRgb(),g=c/100,h={r:(f.r-e.r)*g+e.r,g:(f.g-e.g)*g+e.g,b:(f.b-e.b)*g+e.b,a:(f.a-e.a)*g+e.a};return d(h)},d.readability=function(a,c){var e=d(a),f=d(c);return(b.max(e.getLuminance(),f.getLuminance())+.05)/(b.min(e.getLuminance(),f.getLuminance())+.05)},d.isReadable=function(a,b,c){var e,f,g=d.readability(a,b);switch(f=!1,e=N(c),e.level+e.size){case"AAsmall":case"AAAlarge":f=g>=4.5;break;case"AAlarge":f=g>=3;break;case"AAAsmall":f=g>=7}return f},d.mostReadable=function(a,b,c){var e,f,g,h,i=null,j=0;c=c||{},f=c.includeFallbackColors,g=c.level,h=c.size;for(var k=0;k<b.length;k++)e=d.readability(a,b[k]),e>j&&(j=e,i=d(b[k]));return d.isReadable(a,i,{level:g,size:h})||!f?i:(c.includeFallbackColors=!1,d.mostReadable(a,["#fff","#000"],c))};var V=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},W=d.hexNames=A(V),X=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{CSS_UNIT:new RegExp(c),rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof c&&c.exports?c.exports=d:"function"==typeof a&&a.amd?a(function(){return d}):window.tinycolor=d}(Math)},{}],544:[function(a,b,c){"use strict";function d(a,b){var c=g(getComputedStyle(a).getPropertyValue(b));return c[0]*f(c[1],a)}function e(a,b){var c=document.createElement("div");c.style["font-size"]="128"+a,b.appendChild(c);var e=d(c,"font-size")/128;return b.removeChild(c),e}function f(a,b){switch(b=b||document.body,a=(a||"px").trim().toLowerCase(),(b===window||b===document)&&(b=document.body),a){case"%":return b.clientHeight/100;case"ch":case"ex":return e(a,b);case"em":return d(b,"font-size");case"rem":return d(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return h;case"cm":return h/2.54;case"mm":return h/25.4;case"pt":return h/72;case"pc":return h/6}return 1}var g=a("parse-unit");b.exports=f;var h=96},{"parse-unit":476}],545:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.topojson=b.topojson||{})}(this,function(a){"use strict";function b(a,b){var d=b.id,e=b.bbox,f=null==b.properties?{}:b.properties,g=c(a,b);return null==d&&null==e?{type:"Feature",properties:f,geometry:g}:null==e?{type:"Feature",id:d,properties:f,geometry:g}:{type:"Feature",id:d,bbox:e,properties:f,geometry:g}}function c(a,b){function c(a,b){b.length&&b.pop();for(var c=l[0>a?~a:a],d=0,e=c.length;e>d;++d)b.push(j(c[d].slice(),d));0>a&&k(b,e)}function d(a){return j(a.slice())}function e(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function h(a){var b,c=a.type;switch(c){case"GeometryCollection":return{type:c,geometries:a.geometries.map(h)};case"Point":b=d(a.coordinates);break;case"MultiPoint":b=a.coordinates.map(d);break;case"LineString":b=e(a.arcs);break;case"MultiLineString":b=a.arcs.map(e);break;case"Polygon":b=g(a.arcs);break;case"MultiPolygon":b=a.arcs.map(g);break;default:return null}return{type:c,coordinates:b}}var j=i(a),l=a.arcs;return h(b)}function d(a,b,c){var d,f,g;if(arguments.length>1)d=e(a,b,c);else for(f=0,d=new Array(g=a.arcs.length);g>f;++f)d[f]=f;return{type:"MultiLineString",arcs:m(a,d)}}function e(a,b,c){function d(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){switch(i=a,a.type){case"GeometryCollection":a.geometries.forEach(h);break;case"LineString":e(a.arcs);break;case"MultiLineString":case"Polygon":f(a.arcs);break;case"MultiPolygon":g(a.arcs)}}var i,j=[],k=[];return h(b),k.forEach(null==c?function(a){j.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&j.push(a[0].i)}),j}function f(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return Math.abs(f)}function g(a,b){function d(a){switch(a.type){case"GeometryCollection":a.geometries.forEach(d);break;case"Polygon":e(a.arcs);break;case"MultiPolygon":a.arcs.forEach(e)}}function e(a){a.forEach(function(b){b.forEach(function(b){(h[b=0>b?~b:b]||(h[b]=[])).push(a)})}),i.push(a)}function g(b){return f(c(a,{type:"Polygon",arcs:[b]}).coordinates[0])}var h={},i=[],j=[];return b.forEach(d),i.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,j.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){h[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),i.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:j.map(function(b){var c,d=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){h[0>a?~a:a].length<2&&d.push(a)})})}),d=m(a,d),(c=d.length)>1)for(var e,f,i=1,j=g(d[0]);c>i;++i)(e=g(d[i]))>j&&(f=d[0],d[0]=d[i],d[i]=f,j=e);return d})}}var h=function(a){return a},i=function(a){if(null==(b=a.transform))return h;var b,c,d,e=b.scale[0],f=b.scale[1],g=b.translate[0],i=b.translate[1];return function(a,b){return b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+i,a}},j=function(a){function b(a){h[0]=a[0],h[1]=a[1],g(h),h[0]<j&&(j=h[0]),h[0]>l&&(l=h[0]),h[1]<k&&(k=h[1]),h[1]>m&&(m=h[1])}function c(a){switch(a.type){case"GeometryCollection":a.geometries.forEach(c);break;case"Point":b(a.coordinates);break;case"MultiPoint":a.coordinates.forEach(b)}}var d=a.bbox;if(!d){var e,f,g=i(a),h=new Array(2),j=1/0,k=j,l=-j,m=-j;a.arcs.forEach(function(a){for(var b=-1,c=a.length;++b<c;)e=a[b],h[0]=e[0],h[1]=e[1],g(h,b),h[0]<j&&(j=h[0]),h[0]>l&&(l=h[0]),h[1]<k&&(k=h[1]),h[1]>m&&(m=h[1])});for(f in a.objects)c(a.objects[f]);d=a.bbox=[j,k,l,m]}return d},k=function(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c},l=function(a,c){return"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(c){return b(a,c)})}:b(a,c)},m=function(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h},n=function(a){return c(a,d.apply(this,arguments))},o=function(a){return c(a,g.apply(this,arguments))},p=function(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c},q=function(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var i=e[h],j=i.length,k=0;j>k;++k)for(var l=k+1;j>l;++l){var m,n=i[k],o=i[l];(m=f[n])[h=p(m,o)]!==o&&m.splice(h,0,o),(m=f[o])[h=p(m,n)]!==n&&m.splice(h,0,n)}return f},r=function(a,b){function c(a){a[0]=Math.round((a[0]-g)/h),a[1]=Math.round((a[1]-i)/k)}function d(a){switch(a.type){case"GeometryCollection":a.geometries.forEach(d);break;case"Point":c(a.coordinates);break;case"MultiPoint":a.coordinates.forEach(c)}}if(!((b=Math.floor(b))>=2))throw new Error("n must be ≥2");if(a.transform)throw new Error("already quantized");var e,f=j(a),g=f[0],h=(f[2]-g)/(b-1)||1,i=f[1],k=(f[3]-i)/(b-1)||1;a.arcs.forEach(function(a){for(var b,c,d,e=1,f=1,j=a.length,l=a[0],m=l[0]=Math.round((l[0]-g)/h),n=l[1]=Math.round((l[1]-i)/k);j>e;++e)l=a[e],c=Math.round((l[0]-g)/h),d=Math.round((l[1]-i)/k),(c!==m||d!==n)&&(b=a[f++],b[0]=c-m,m=c,b[1]=d-n,n=d);2>f&&(b=a[f++],b[0]=0,b[1]=0),a.length=f});for(e in a.objects)d(a.objects[e]);return a.transform={scale:[h,k],translate:[g,i]},a},s=function(a){if(null==(b=a.transform))return h;var b,c,d,e=b.scale[0],f=b.scale[1],g=b.translate[0],i=b.translate[1];return function(a,b){b||(c=d=0);var h=Math.round((a[0]-g)/e),j=Math.round((a[1]-i)/f);return a[0]=h-c,c=h,a[1]=j-d,d=j,a}};a.bbox=j,a.feature=l,a.mesh=n,a.meshArcs=d,a.merge=o,a.mergeArcs=g,a.neighbors=q,a.quantize=r,a.transform=i,a.untransform=s,Object.defineProperty(a,"__esModule",{value:!0})})},{}],546:[function(a,b,c){"use strict";function d(a){if(0>a)return[];if(0===a)return[[0]];for(var b=0|Math.round(g(a+1)),c=[],d=0;b>d;++d){for(var h=e.unrank(a,d),i=[0],j=0,k=0;k<h.length;++k)j+=1<<h[k],i.push(j);f(h)<1&&(i[0]=j,i[a]=0),c.push(i)}return c}b.exports=d;var e=a("permutation-rank"),f=a("permutation-parity"),g=a("gamma")},{gamma:137,"permutation-parity":480,"permutation-rank":481}],547:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a){return Math.min(1,Math.max(-1,a))}function f(a){var b=Math.abs(a[0]),c=Math.abs(a[1]),d=Math.abs(a[2]),e=[0,0,0];b>Math.max(c,d)?e[2]=1:c>Math.max(b,d)?e[0]=1:e[1]=1;for(var f=0,g=0,h=0;3>h;++h)f+=a[h]*a[h],g+=e[h]*a[h];for(var h=0;3>h;++h)e[h]-=g/f*a[h];return m(e,e),e}function g(a,b,c,d,e,f,g,h){this.center=i(c),this.up=i(d),this.right=i(e),this.radius=i([f]),this.angle=i([g,h]),this.angle.bounds=[[-(1/0),-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(a,b),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var j=0;16>j;++j)this.computedMatrix[j]=.5;this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.up||[0,1,0],e=a.right||f(c),h=a.radius||1,i=a.theta||0,j=a.phi||0;if(b=[].slice.call(b,0,3),c=[].slice.call(c,0,3),m(c,c),e=[].slice.call(e,0,3),m(e,e),"eye"in a){var k=a.eye,o=[k[0]-b[0],k[1]-b[1],k[2]-b[2]];l(e,o,c),d(e[0],e[1],e[2])<1e-6?e=f(c):m(e,e),h=d(o[0],o[1],o[2]);var p=n(c,o)/h,q=n(e,o)/h;j=Math.acos(p),i=Math.acos(q)}return h=Math.log(h),new g(a.zoomMin,a.zoomMax,b,c,e,h,i,j)}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/invert"),k=a("gl-mat4/rotate"),l=a("gl-vec3/cross"),m=a("gl-vec3/normalize"),n=a("gl-vec3/dot"),o=g.prototype;o.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-(1/0),b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},o.getDistanceLimits=function(a){var b=this.radius.bounds[0];return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},o.recalcMatrix=function(a){this.center.curve(a),this.up.curve(a),this.right.curve(a),this.radius.curve(a),this.angle.curve(a);for(var b=this.computedUp,c=this.computedRight,e=0,f=0,g=0;3>g;++g)f+=b[g]*c[g],e+=b[g]*b[g];for(var h=Math.sqrt(e),i=0,g=0;3>g;++g)c[g]-=b[g]*f/e,i+=c[g]*c[g],b[g]/=h;for(var j=Math.sqrt(i),g=0;3>g;++g)c[g]/=j;var k=this.computedToward;l(k,b,c),m(k,k);for(var n=Math.exp(this.computedRadius[0]),o=this.computedAngle[0],p=this.computedAngle[1],q=Math.cos(o),r=Math.sin(o),s=Math.cos(p),t=Math.sin(p),u=this.computedCenter,v=q*s,w=r*s,x=t,y=-q*t,z=-r*t,A=s,B=this.computedEye,C=this.computedMatrix,g=0;3>g;++g){var D=v*c[g]+w*k[g]+x*b[g];C[4*g+1]=y*c[g]+z*k[g]+A*b[g],C[4*g+2]=D,C[4*g+3]=0}var E=C[1],F=C[5],G=C[9],H=C[2],I=C[6],J=C[10],K=F*J-G*I,L=G*H-E*J,M=E*I-F*H,N=d(K,L,M);K/=N,L/=N,M/=N,C[0]=K,C[4]=L,C[8]=M;for(var g=0;3>g;++g)B[g]=u[g]+C[2+4*g]*n;for(var g=0;3>g;++g){for(var i=0,O=0;3>O;++O)i+=C[g+4*O]*B[O];C[12+g]=-i}C[15]=1},o.getMatrix=function(a,b){this.recalcMatrix(a);var c=this.computedMatrix;if(b){for(var d=0;16>d;++d)b[d]=c[d];return b}return c};var p=[0,0,0];o.rotate=function(a,b,c,d){if(this.angle.move(a,b,c),d){this.recalcMatrix(a);var e=this.computedMatrix;p[0]=e[2],p[1]=e[6],p[2]=e[10];for(var f=this.computedUp,g=this.computedRight,h=this.computedToward,i=0;3>i;++i)e[4*i]=f[i],e[4*i+1]=g[i],e[4*i+2]=h[i];k(e,e,d,p);for(var i=0;3>i;++i)f[i]=e[4*i],g[i]=e[4*i+1];this.up.set(a,f[0],f[1],f[2]),this.right.set(a,g[0],g[1],g[2])}},o.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=(Math.exp(this.computedRadius[0]),f[1]),h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);k/=o,l/=o,m/=o;var p=k*b+g*c,q=l*b+h*c,r=m*b+i*c;this.center.move(a,p,q,r);var s=Math.exp(this.computedRadius[0]);s=Math.max(1e-4,s+e),this.radius.set(a,Math.log(s))},o.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},o.setMatrix=function(a,b,c,f){var g=1;"number"==typeof c&&(g=0|c),(0>g||g>3)&&(g=1);var h=(g+2)%3;b||(this.recalcMatrix(a),b=this.computedMatrix);var i=b[g],k=b[g+4],l=b[g+8];if(f){var m=Math.abs(i),n=Math.abs(k),o=Math.abs(l),p=Math.max(m,n,o);m===p?(i=0>i?-1:1,k=l=0):o===p?(l=0>l?-1:1,i=k=0):(k=0>k?-1:1,i=l=0)}else{var q=d(i,k,l);i/=q,k/=q,l/=q}var r=b[h],s=b[h+4],t=b[h+8],u=r*i+s*k+t*l;r-=i*u,s-=k*u,t-=l*u;var v=d(r,s,t);r/=v,s/=v,t/=v;var w=k*t-l*s,x=l*r-i*t,y=i*s-k*r,z=d(w,x,y);w/=z,x/=z,y/=z,this.center.jump(a,S,T,U),this.radius.idle(a),this.up.jump(a,i,k,l),this.right.jump(a,r,s,t);var A,B;if(2===g){var C=b[1],D=b[5],E=b[9],F=C*r+D*s+E*t,G=C*w+D*x+E*y;A=0>K?-Math.PI/2:Math.PI/2,B=Math.atan2(G,F)}else{var H=b[2],I=b[6],J=b[10],K=H*i+I*k+J*l,L=H*r+I*s+J*t,M=H*w+I*x+J*y;A=Math.asin(e(K)),B=Math.atan2(M,L)}this.angle.jump(a,B,A),this.recalcMatrix(a);var N=b[2],O=b[6],P=b[10],Q=this.computedMatrix;j(Q,b);var R=Q[15],S=Q[12]/R,T=Q[13]/R,U=Q[14]/R,V=Math.exp(this.computedRadius[0]);this.center.jump(a,S-N*V,T-O*V,U-P*V)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(a){this.center.idle(a),this.up.idle(a),this.right.idle(a),this.radius.idle(a),this.angle.idle(a)},o.flush=function(a){this.center.flush(a),this.up.flush(a),this.right.flush(a),this.radius.flush(a),this.angle.flush(a)},o.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},o.lookAt=function(a,b,c,f){this.recalcMatrix(a),b=b||this.computedEye,c=c||this.computedCenter,f=f||this.computedUp;var g=f[0],h=f[1],i=f[2],j=d(g,h,i);if(!(1e-6>j)){g/=j,h/=j,i/=j;var k=b[0]-c[0],l=b[1]-c[1],m=b[2]-c[2],n=d(k,l,m);if(!(1e-6>n)){k/=n,l/=n,m/=n;var o=this.computedRight,p=o[0],q=o[1],r=o[2],s=g*p+h*q+i*r;
p-=s*g,q-=s*h,r-=s*i;var t=d(p,q,r);if(!(.01>t&&(p=h*m-i*l,q=i*k-g*m,r=g*l-h*k,t=d(p,q,r),1e-6>t))){p/=t,q/=t,r/=t,this.up.set(a,g,h,i),this.right.set(a,p,q,r),this.center.set(a,c[0],c[1],c[2]),this.radius.set(a,Math.log(n));var u=h*r-i*q,v=i*p-g*r,w=g*q-h*p,x=d(u,v,w);u/=x,v/=x,w/=x;var y=g*k+h*l+i*m,z=p*k+q*l+r*m,A=u*k+v*l+w*m,B=Math.asin(e(y)),C=Math.atan2(A,z),D=this.angle._state,E=D[D.length-1],F=D[D.length-2];E%=2*Math.PI;var G=Math.abs(E+2*Math.PI-C),H=Math.abs(E-C),I=Math.abs(E-2*Math.PI-C);H>G&&(E+=2*Math.PI),H>I&&(E-=2*Math.PI),this.angle.jump(this.angle.lastT(),E,F),this.angle.set(a,C,B)}}}}},{"filtered-vector":134,"gl-mat4/invert":182,"gl-mat4/rotate":186,"gl-vec3/cross":273,"gl-vec3/dot":274,"gl-vec3/normalize":277}],548:[function(a,b,c){"use strict";function d(a,b,c){var d=a*b,f=e*a,g=f-a,h=f-g,i=a-h,j=e*b,k=j-b,l=j-k,m=b-l,n=d-h*l,o=n-i*l,p=o-h*m,q=i*m-p;return c?(c[0]=q,c[1]=d,c):[q,d]}b.exports=d;var e=+(Math.pow(2,27)+1)},{}],549:[function(a,b,c){"use strict";function d(a,b,c){var d=a+b,e=d-a,f=d-e,g=b-e,h=a-f;return c?(c[0]=h+g,c[1]=d,c):[h+g,d]}b.exports=d},{}],550:[function(a,b,c){(function(b,d){"use strict";function e(a){if(a){var b=a.length||a.byteLength,c=s.log2(b);w[c].push(a)}}function f(a){e(a.buffer)}function g(a){var a=s.nextPow2(a),b=s.log2(a),c=w[b];return c.length>0?c.pop():new ArrayBuffer(a)}function h(a){return new Uint8Array(g(a),0,a)}function i(a){return new Uint16Array(g(2*a),0,a)}function j(a){return new Uint32Array(g(4*a),0,a)}function k(a){return new Int8Array(g(a),0,a)}function l(a){return new Int16Array(g(2*a),0,a)}function m(a){return new Int32Array(g(4*a),0,a)}function n(a){return new Float32Array(g(4*a),0,a)}function o(a){return new Float64Array(g(8*a),0,a)}function p(a){return u?new Uint8ClampedArray(g(a),0,a):h(a)}function q(a){return new DataView(g(a),0,a)}function r(a){a=s.nextPow2(a);var b=s.log2(a),c=x[b];return c.length>0?c.pop():new d(a)}var s=a("bit-twiddle"),t=a("dup");b.__TYPEDARRAY_POOL||(b.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var u="undefined"!=typeof Uint8ClampedArray,v=b.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=t([32,0])),v.BUFFER||(v.BUFFER=t([32,0]));var w=v.DATA,x=v.BUFFER;c.free=function(a){if(d.isBuffer(a))x[s.log2(a.length)].push(a);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),!a)return;var b=a.length||a.byteLength,c=0|s.log2(b);w[c].push(a)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeInt8=c.freeInt16=c.freeInt32=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=f,c.freeArrayBuffer=e,c.freeBuffer=function(a){x[s.log2(a.length)].push(a)},c.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case"uint8":return h(a);case"uint16":return i(a);case"uint32":return j(a);case"int8":return k(a);case"int16":return l(a);case"int32":return m(a);case"float":case"float32":return n(a);case"double":case"float64":return o(a);case"uint8_clamped":return p(a);case"buffer":return r(a);case"data":case"dataview":return q(a);default:return null}return null},c.mallocArrayBuffer=g,c.mallocUint8=h,c.mallocUint16=i,c.mallocUint32=j,c.mallocInt8=k,c.mallocInt16=l,c.mallocInt32=m,c.mallocFloat32=c.mallocFloat=n,c.mallocFloat64=c.mallocDouble=o,c.mallocUint8Clamped=p,c.mallocDataView=q,c.mallocBuffer=r,c.clearCache=function(){for(var a=0;32>a;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.UINT8C[a].length=0,w[a].length=0,x[a].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":68,buffer:78,dup:126}],551:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;a>b;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d;var e=d.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.find=function(a){for(var b=a,c=this.roots;c[a]!==a;)a=c[a];for(;c[b]!==a;){var d=c[b];c[b]=a,b=d}return a},e.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];h>g?f[c]=d:g>h?f[d]=c:(f[d]=c,++e[c])}}},{}],552:[function(a,b,c){"use strict";function d(a,b){for(var c=1,d=a.length,e=a[0],f=a[0],g=1;d>g;++g)if(f=e,e=a[g],b(e,f)){if(g===c){c++;continue}a[c++]=e}return a.length=c,a}function e(a){for(var b=1,c=a.length,d=a[0],e=a[0],f=1;c>f;++f,e=d)if(e=d,d=a[f],d!==e){if(f===b){b++;continue}a[b++]=d}return a.length=b,a}function f(a,b,c){return 0===a.length?a:b?(c||a.sort(b),d(a,b)):(c||a.sort(),e(a))}b.exports=f},{}],553:[function(a,b,c){function d(a,b,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(d-b)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=d,this.p2x=c,this.p2y=d}b.exports=d,d.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},d.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},d.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},d.prototype.solveCurveX=function(a,b){"undefined"==typeof b&&(b=1e-6);var c,d,e,f,g;for(e=a,g=0;8>g;g++){if(f=this.sampleCurveX(e)-a,Math.abs(f)<b)return e;var h=this.sampleCurveDerivativeX(e);if(Math.abs(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=this.sampleCurveX(e),Math.abs(f-a)<b)return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e},d.prototype.solve=function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))}},{}],554:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","	"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);-1!==C&&(-1===A||A>C)&&(A=C)}var D,E;E=-1===A?h.lastIndexOf("@"):h.lastIndexOf("@",A),-1!==E&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);-1!==C&&(-1===A||A>C)&&(A=C)}-1===A&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;H>B;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;L>K;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;H>B;B++){var R=p[B];if(-1!==h.indexOf(R)){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");-1!==T&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(-1!==U?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":555,punycode:497,querystring:501}],555:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],556:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],557:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],558:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":557,_process:496,inherits:556}],559:[function(a,b,c){b.exports.VectorTile=a("./lib/vectortile.js"),b.exports.VectorTileFeature=a("./lib/vectortilefeature.js"),b.exports.VectorTileLayer=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":560,"./lib/vectortilefeature.js":561,"./lib/vectortilelayer.js":562}],560:[function(a,b,c){"use strict";function d(a,b){this.layers=a.readFields(e,{},b)}function e(a,b,c){if(3===a){var d=new f(c,c.readVarint()+c.pos);d.length&&(b[d.name]=d)}}var f=a("./vectortilelayer");b.exports=d},{"./vectortilelayer":562}],561:[function(a,b,c){"use strict";function d(a,b,c,d,f){this.properties={},this.extent=c,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=f,a.readFields(e,this,b)}function e(a,b,c){1==a?b.id=c.readVarint():2==a?f(c,b):3==a?b.type=c.readVarint():4==a&&(b._geometry=c.pos)}function f(a,b){for(var c=a.readVarint()+a.pos;a.pos<c;){var d=b._keys[a.readVarint()],e=b._values[a.readVarint()];b.properties[d]=e}}function g(a){var b=a.length;if(1>=b)return[a];for(var c,d,e=[],f=0;b>f;f++){var g=h(a[f]);0!==g&&(void 0===d&&(d=0>g),d===0>g?(c&&e.push(c),c=[a[f]]):c.push(a[f]))}return c&&e.push(c),e}function h(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;f>e;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var i=a("point-geometry");b.exports=d,d.types=["Unknown","Point","LineString","Polygon"],d.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var b,c=a.readVarint()+a.pos,d=1,e=0,f=0,g=0,h=[];a.pos<c;){if(!e){var j=a.readVarint();d=7&j,e=j>>3}if(e--,1===d||2===d)f+=a.readSVarint(),g+=a.readSVarint(),1===d&&(b&&h.push(b),b=[]),b.push(new i(f,g));else{if(7!==d)throw new Error("unknown command "+d);b&&b.push(b[0].clone())}}return b&&h.push(b),h},d.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var b=a.readVarint()+a.pos,c=1,d=0,e=0,f=0,g=1/0,h=-(1/0),i=1/0,j=-(1/0);a.pos<b;){if(!d){var k=a.readVarint();c=7&k,d=k>>3}if(d--,1===c||2===c)e+=a.readSVarint(),f+=a.readSVarint(),g>e&&(g=e),e>h&&(h=e),i>f&&(i=f),f>j&&(j=f);else if(7!==c)throw new Error("unknown command "+c)}return[g,i,h,j]},d.prototype.toGeoJSON=function(a,b,c){function e(a){for(var b=0;b<a.length;b++){var c=a[b],d=180-360*(c.y+k)/i;a[b]=[360*(c.x+j)/i-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}}var f,h,i=this.extent*Math.pow(2,c),j=this.extent*a,k=this.extent*b,l=this.loadGeometry(),m=d.types[this.type];switch(this.type){case 1:var n=[];for(f=0;f<l.length;f++)n[f]=l[f][0];l=n,e(l);break;case 2:for(f=0;f<l.length;f++)e(l[f]);break;case 3:for(l=g(l),f=0;f<l.length;f++)for(h=0;h<l[f].length;h++)e(l[f][h])}1===l.length?l=l[0]:m="Multi"+m;var o={type:"Feature",geometry:{type:m,coordinates:l},properties:this.properties};return"id"in this&&(o.id=this.id),o}},{"point-geometry":485}],562:[function(a,b,c){"use strict";function d(a,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(e,this,b),this.length=this._features.length}function e(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():5===a?b.extent=c.readVarint():2===a?b._features.push(c.pos):3===a?b._keys.push(c.readString()):4===a&&b._values.push(f(c))}function f(a){for(var b=null,c=a.readVarint()+a.pos;a.pos<c;){var d=a.readVarint()>>3;b=1===d?a.readString():2===d?a.readFloat():3===d?a.readDouble():4===d?a.readVarint64():5===d?a.readVarint():6===d?a.readSVarint():7===d?a.readBoolean():null}return b}var g=a("./vectortilefeature.js");b.exports=d,d.prototype.feature=function(a){if(0>a||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var b=this._pbf.readVarint()+this._pbf.pos;return new g(this._pbf,b,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":561}],563:[function(a,b,c){"use strict";function d(a,b){return("object"!=typeof b||null===b)&&(b={}),e(a,b.canvas||f,b.context||g,b)}b.exports=d;var e=a("./lib/vtext"),f=null,g=null;"undefined"!=typeof document&&(f=document.createElement("canvas"),f.width=8192,f.height=1024,g=f.getContext("2d"))},{"./lib/vtext":564}],564:[function(a,b,c){"use strict";function d(a,b,c){for(var d=b.textAlign||"start",e=b.textBaseline||"alphabetic",f=[1<<30,1<<30],g=[0,0],h=a.length,i=0;h>i;++i)for(var j=a[i],k=0;2>k;++k)f[k]=0|Math.min(f[k],j[k]),g[k]=0|Math.max(g[k],j[k]);var l=0;switch(d){case"center":l=-.5*(f[0]+g[0]);break;case"right":case"end":l=-g[0];break;case"left":case"start":l=-f[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+d+"'")}var m=0;switch(e){case"hanging":case"top":m=-f[1];break;case"middle":m=-.5*(f[1]+g[1]);break;case"alphabetic":case"ideographic":m=-3*c;break;case"bottom":m=-g[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'")}var n=1/c;return"lineHeight"in b?n*=+b.lineHeight:"width"in b?n=b.width/(g[0]-f[0]):"height"in b&&(n=b.height/(g[1]-f[1])),a.map(function(a){return[n*(a[0]+l),n*(a[1]+m)]})}function e(a,b,c,d){var e=0|Math.ceil(b.measureText(c).width+2*d);if(e>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var f=3*d;a.height<f&&(a.height=f),b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.fillStyle="#fff",b.fillText(c,d,2*d);var g=b.getImageData(0,0,e,f),h=k(g.data,[f,e,4]);return h.pick(-1,-1,0).transpose(1,0)}function f(a,b){var c=j(a,128);return b?l(c.cells,c.positions,.25):{edges:c.cells,positions:c.positions}}function g(a,b,c,e){var g=f(a,e),h=d(g.positions,b,c),i=g.edges,j="ccw"===b.orientation;if(m(h,i),b.polygons||b.polygon||b.polyline){for(var k=o(i,h),l=new Array(k.length),p=0;p<k.length;++p){for(var q=k[p],r=new Array(q.length),s=0;s<q.length;++s){for(var t=q[s],u=new Array(t.length),v=0;v<t.length;++v)u[v]=h[t[v]].slice();j&&u.reverse(),r[s]=u}l[p]=r}return l}return b.triangles||b.triangulate||b.triangle?{cells:n(h,i,{delaunay:!1,exterior:!1,interior:!0}),positions:h}:{edges:i,positions:h}}function h(a,b,c){try{return g(a,b,c,!0)}catch(d){}try{return g(a,b,c,!1)}catch(d){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function i(a,b,c,d){var f=d.size||64,g=d.font||"normal";c.font=f+"px "+g,c.textAlign="start",c.textBaseline="alphabetic",c.direction="ltr";var i=e(b,c,a,f);return h(i,d,f)}b.exports=i,b.exports.processPixels=h;var j=a("surface-nets"),k=a("ndarray"),l=a("simplify-planar-graph"),m=a("clean-pslg"),n=a("cdt2d"),o=a("planar-graph-to-polyline")},{cdt2d:80,"clean-pslg":90,ndarray:468,"planar-graph-to-polyline":484,"simplify-planar-graph":532,"surface-nets":540}],565:[function(a,b,c){function d(a){var b=[];for(var c in a.layers)b.push(f(a.layers[c]));var d=new k;return l.tile.write({layers:b},d),d.finish()}function e(a){var b={};for(var c in a)b[c]=new m(a[c].features),b[c].name=c;return d({layers:b})}function f(a){for(var b={name:a.name||"",version:a.version||1,extent:a.extent||4096,keys:[],values:[],features:[]},c={},d={},e=0;e<a.length;e++){var f=a.feature(e);f.geometry=i(f.loadGeometry());var g=[];for(var h in f.properties){var k=c[h];"undefined"==typeof k&&(b.keys.push(h),k=b.keys.length-1,c[h]=k);var l=j(f.properties[h]),m=d[l.key];"undefined"==typeof m&&(b.values.push(l),m=b.values.length-1,d[l.key]=m),g.push(k),g.push(m)}f.tags=g,b.features.push(f)}return b}function g(a,b){return(b<<3)+(7&a)}function h(a){return a<<1^a>>31}function i(a){for(var b=[],c=0,d=0,e=a.length,f=0;e>f;f++){var i=a[f];b.push(g(1,1));for(var j=0;j<i.length;j++){1===j&&b.push(g(2,i.length-1));var k=i[j].x-c,l=i[j].y-d;b.push(h(k),h(l)),c+=k,d+=l}}return b}function j(a){var b,c=typeof a;return"string"===c?b={string_value:a}:"boolean"===c?b={bool_value:a}:"number"===c?b=a%1!==0?{double_value:a}:0>a?{sint_value:a}:{uint_value:a}:(a=JSON.stringify(a),b={string_value:a}),b.key=c+":"+a,b}var k=a("pbf"),l=a("./vector-tile-pb"),m=a("./lib/geojson_wrapper");b.exports=d,b.exports.fromVectorTileJs=d,b.exports.fromGeojsonVt=e,b.exports.GeoJSONWrapper=m},{"./lib/geojson_wrapper":566,"./vector-tile-pb":567,pbf:479}],566:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length}function e(a){this.id="number"==typeof a.id?a.id:void 0,this.type=a.type,this.rawGeometry=1===a.type?[a.geometry]:a.geometry,this.properties=a.tags,this.extent=4096}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-(1/0),d=1/0,e=-(1/0),f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"point-geometry":485,"vector-tile":559}],567:[function(a,b,c){"use strict";function d(a,b){return a.readFields(e,{layers:[]},b)}function e(a,b,c){3===a&&b.layers.push(m(c,c.readVarint()+c.pos))}function f(a,b){var c;if(void 0!==a.layers)for(c=0;c<a.layers.length;c++)b.writeMessage(3,o,a.layers[c])}function g(a,b){return a.readFields(h,{},b)}function h(a,b,c){1===a?b.string_value=c.readString():2===a?b.float_value=c.readFloat():3===a?b.double_value=c.readDouble():4===a?b.int_value=c.readVarint():5===a?b.uint_value=c.readVarint():6===a?b.sint_value=c.readSVarint():7===a&&(b.bool_value=c.readBoolean())}function i(a,b){void 0!==a.string_value&&b.writeStringField(1,a.string_value),void 0!==a.float_value&&b.writeFloatField(2,a.float_value),void 0!==a.double_value&&b.writeDoubleField(3,a.double_value),void 0!==a.int_value&&b.writeVarintField(4,a.int_value),void 0!==a.uint_value&&b.writeVarintField(5,a.uint_value),void 0!==a.sint_value&&b.writeSVarintField(6,a.sint_value),void 0!==a.bool_value&&b.writeBooleanField(7,a.bool_value)}function j(a,b){var c=a.readFields(k,{},b);return void 0===c.type&&(c.type="Unknown"),c}function k(a,b,c){1===a?b.id=c.readVarint():2===a?b.tags=c.readPackedVarint():3===a?b.type=c.readVarint():4===a&&(b.geometry=c.readPackedVarint())}function l(a,b){void 0!==a.id&&b.writeVarintField(1,a.id),void 0!==a.tags&&b.writePackedVarint(2,a.tags),void 0!==a.type&&b.writeVarintField(3,a.type),void 0!==a.geometry&&b.writePackedVarint(4,a.geometry)}function m(a,b){return a.readFields(n,{features:[],keys:[],values:[]},b)}function n(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():2===a?b.features.push(j(c,c.readVarint()+c.pos)):3===a?b.keys.push(c.readString()):4===a?b.values.push(g(c,c.readVarint()+c.pos)):5===a&&(b.extent=c.readVarint())}function o(a,b){void 0!==a.version&&b.writeVarintField(15,a.version),void 0!==a.name&&b.writeStringField(1,a.name);var c;if(void 0!==a.features)for(c=0;c<a.features.length;c++)b.writeMessage(2,l,a.features[c]);if(void 0!==a.keys)for(c=0;c<a.keys.length;c++)b.writeStringField(3,a.keys[c]);if(void 0!==a.values)for(c=0;c<a.values.length;c++)b.writeMessage(4,i,a.values[c]);void 0!==a.extent&&b.writeVarintField(5,a.extent)}var p=c.tile={read:d,write:f};p.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},p.value={read:g,write:i},p.feature={read:j,write:l},p.layer={read:m,write:o}},{}],568:[function(a,b,c){!function(){"use strict";function a(b){b.permitHostObjects___&&b.permitHostObjects___(a)}function c(a){return!(a.substr(0,n.length)==n&&"___"===a.substr(a.length-3))}function d(a){if(a!==Object(a))throw new TypeError("Not an object: "+a);
var b=a[o];if(b&&b.key===a)return b;if(!m(a))return void 0;b={key:a};try{return l(a,o,{value:b,writable:!1,enumerable:!1,configurable:!1}),b}catch(c){return void 0}}function e(a){return a.prototype=null,Object.freeze(a)}function f(){s||"undefined"==typeof console||(s=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=a);var g=!1;if("function"==typeof WeakMap){var h=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var i=new h,j=Object.freeze({});if(i.set(j,1),1===i.get(j))return void(b.exports=WeakMap);g=!0}}var k=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),l=Object.defineProperty,m=Object.isExtensible,n="weakmap:",o=n+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var p=new ArrayBuffer(25),q=new Uint8Array(p);crypto.getRandomValues(q),o=n+"rand:"+Array.prototype.map.call(q,function(a){return(a%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(a){return k(a).filter(c)}}),"getPropertyNames"in Object){var r=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(a){return r(a).filter(c)}})}!function(){var a=Object.freeze;l(Object,"freeze",{value:function(b){return d(b),a(b)}});var b=Object.seal;l(Object,"seal",{value:function(a){return d(a),b(a)}});var c=Object.preventExtensions;l(Object,"preventExtensions",{value:function(a){return d(a),c(a)}})}();var s=!1,t=0,u=function(){function a(a,b){var c,e=d(a);return e?j in e?e[j]:b:(c=h.indexOf(a),c>=0?i[c]:b)}function b(a){var b=d(a);return b?j in b:h.indexOf(a)>=0}function c(a,b){var c,e=d(a);return e?e[j]=b:(c=h.indexOf(a),c>=0?i[c]=b:(c=h.length,i[c]=b,h[c]=a)),this}function g(a){var b,c,e=d(a);return e?j in e&&delete e[j]:(b=h.indexOf(a),0>b?!1:(c=h.length-1,h[b]=void 0,i[b]=i[c],h[b]=h[c],h.length=c,i.length=c,!0))}this instanceof u||f();var h=[],i=[],j=t++;return Object.create(u.prototype,{get___:{value:e(a)},has___:{value:e(b)},set___:{value:e(c)},delete___:{value:e(g)}})};u.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){return this.set___(a,b)},writable:!0,configurable:!0},"delete":{value:function(a){return this.delete___(a)},writable:!0,configurable:!0}}),"function"==typeof h?!function(){function c(){function b(a,b){return k?j.has(a)?j.get(a):k.get___(a,b):j.get(a,b)}function c(a){return j.has(a)||(k?k.has___(a):!1)}function d(a){var b=!!j["delete"](a);return k?k.delete___(a)||b:b}this instanceof u||f();var i,j=new h,k=void 0,l=!1;return i=g?function(a,b){return j.set(a,b),j.has(a)||(k||(k=new u),k.set(a,b)),this}:function(a,b){if(l)try{j.set(a,b)}catch(c){k||(k=new u),k.set___(a,b)}else j.set(a,b);return this},Object.create(u.prototype,{get___:{value:e(b)},has___:{value:e(c)},set___:{value:e(i)},delete___:{value:e(d)},permitHostObjects___:{value:e(function(b){if(b!==a)throw new Error("bogus call to permitHostObjects___");l=!0})}})}g&&"undefined"!=typeof Proxy&&(Proxy=void 0),c.prototype=u.prototype,b.exports=c,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=u)}}()},{}],569:[function(a,b,c){function d(){var a={};return function(b){if(("object"!=typeof b||null===b)&&"function"!=typeof b)throw new Error("Weakmap-shim: Key must be object");var c=b.valueOf(a);return c&&c.identity===a?c:e(b,a)}}var e=a("./hidden-store.js");b.exports=d},{"./hidden-store.js":570}],570:[function(a,b,c){function d(a,b){var c={identity:b},d=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(a){return a!==b?d.apply(this,arguments):c},writable:!0}),c}b.exports=d},{}],571:[function(a,b,c){function d(){var a=e();return{get:function(b,c){var d=a(b);return d.hasOwnProperty("value")?d.value:c},set:function(b,c){return a(b).value=c,this},has:function(b){return"value"in a(b)},"delete":function(b){return delete a(b).value}}}var e=a("./create-store.js");b.exports=d},{"./create-store.js":569}],572:[function(a,b,c){var d=a("get-canvas-context");b.exports=function(a){return d("webgl",a)}},{"get-canvas-context":148}],573:[function(a,b,c){var d=arguments[3],e=arguments[4],f=arguments[5],g=JSON.stringify;b.exports=function(a,b){function c(a){q[a]=!0;for(var b in e[a][1]){var d=e[a][1][b];q[d]||c(d)}}for(var h,i=Object.keys(f),j=0,k=i.length;k>j;j++){var l=i[j],m=f[l].exports;if(m===a||m&&m["default"]===a){h=l;break}}if(!h){h=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var n={},j=0,k=i.length;k>j;j++){var l=i[j];n[l]=l}e[h]=[Function(["require","module","exports"],"("+a+")(self)"),n]}var o=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[h]=h,e[o]=[Function(["require"],"var f = require("+g(h)+");(f.default ? f.default : f)(self);"),p];var q={};c(o);var r="("+d+")({"+Object.keys(q).map(function(a){return g(a)+":["+e[a][0]+","+g(e[a][1])+"]"}).join(",")+"},{},["+g(o)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL,t=new Blob([r],{type:"text/javascript"});if(b&&b.bare)return t;var u=s.createObjectURL(t),v=new Worker(u);return v.objectURL=u,v}},{}],574:[function(a,b,c){b.exports.RADIUS=6378137,b.exports.FLATTENING=1/298.257223563,b.exports.POLAR_RADIUS=6356752.3142},{}],575:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.WhooTS=b.WhooTS||{})}(this,function(a){function b(a,b,d,e,f,g){g=g||{};var h=a+"?"+["bbox="+c(d,e,f),"format="+(g.format||"image/png"),"service="+(g.service||"WMS"),"version="+(g.version||"1.1.1"),"request="+(g.request||"GetMap"),"srs="+(g.srs||"EPSG:3857"),"width="+(g.width||256),"height="+(g.height||256),"layers="+b].join("&");return h}function c(a,b,c){b=Math.pow(2,c)-b-1;var e=d(256*a,256*b,c),f=d(256*(a+1),256*(b+1),c);return e[0]+","+e[1]+","+f[0]+","+f[1]}function d(a,b,c){var d=2*Math.PI*6378137/256/Math.pow(2,c),e=a*d-2*Math.PI*6378137/2,f=b*d-2*Math.PI*6378137/2;return[e,f]}a.getURL=b,a.getTileBBox=c,a.getMercCoords=d,Object.defineProperty(a,"__esModule",{value:!0})})},{}],576:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b,c,d){var e,f;if("object"==typeof a)e=a,f=b||{};else{var g="number"==typeof a&&a>=1888&&2111>=a;if(!g)throw new Error("Solar year outside range 1888-2111");var h="number"==typeof b&&b>=1&&12>=b;if(!h)throw new Error("Solar month outside range 1 - 12");var i="number"==typeof c&&c>=1&&31>=c;if(!i)throw new Error("Solar day outside range 1 - 31");e={year:a,month:b,day:c},f=d||{}}var j=o[e.year-o[0]],k=e.year<<9|e.month<<5|e.day;f.year=k>=j?e.year:e.year-1,j=o[f.year-o[0]];var l,m=j>>9&4095,p=j>>5&15,q=31&j,r=new Date(m,p-1,q),s=new Date(e.year,e.month-1,e.day);l=Math.round((s-r)/864e5);var t,u=n[f.year-n[0]];for(t=0;13>t;t++){var v=u&1<<12-t?30:29;if(v>l)break;l-=v}var w=u>>13;return!w||w>t?(f.isIntercalary=!1,f.month=1+t):t===w?(f.isIntercalary=!0,f.month=t):(f.isIntercalary=!1,f.month=t),f.day=1+l,f}function f(a,b,c,d,e){var f,g;if("object"==typeof a)g=a,f=b||{};else{var h="number"==typeof a&&a>=1888&&2111>=a;if(!h)throw new Error("Lunar year outside range 1888-2111");var i="number"==typeof b&&b>=1&&12>=b;if(!i)throw new Error("Lunar month outside range 1 - 12");var j="number"==typeof c&&c>=1&&30>=c;if(!j)throw new Error("Lunar day outside range 1 - 30");var k;"object"==typeof d?(k=!1,f=d):(k=!!d,f=e||{}),g={year:a,month:b,day:c,isIntercalary:k}}var l;l=g.day-1;var m,p=n[g.year-n[0]],q=p>>13;m=q?g.month>q?g.month:g.isIntercalary?g.month:g.month-1:g.month-1;for(var r=0;m>r;r++){var s=p&1<<12-r?30:29;l+=s}var t=o[g.year-o[0]],u=t>>9&4095,v=t>>5&15,w=31&t,x=new Date(u,v-1,w+l);return f.year=x.getFullYear(),f.month=1+x.getMonth(),f.day=x.getDate(),f}var g=a("../main"),h=a("object-assign"),i=g.instance();d.prototype=new g.baseCalendar,h(d.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(a,b){if("string"==typeof a){var c=a.match(k);return c?c[0]:""}var d=this._validateYear(a),e=a.month(),f=""+this.toChineseMonth(d,e);return b&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(d,e)&&(f+="i"),f},monthNames:function(a){if("string"==typeof a){var b=a.match(l);return b?b[0]:""}var c=this._validateYear(a),d=a.month(),e=this.toChineseMonth(c,d),f=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][e-1];return this.isIntercalaryMonth(c,d)&&(f="闰"+f),f},monthNamesShort:function(a){if("string"==typeof a){var b=a.match(m);return b?b[0]:""}var c=this._validateYear(a),d=a.month(),e=this.toChineseMonth(c,d),f=["一","二","三","四","五","六","七","八","九","十","十一","十二"][e-1];return this.isIntercalaryMonth(c,d)&&(f="闰"+f),f},parseMonth:function(a,b){a=this._validateYear(a);var c,d=parseInt(b);if(isNaN(d))"闰"===b[0]&&(c=!0,b=b.substring(1)),"月"===b[b.length-1]&&(b=b.substring(0,b.length-1)),d=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(b);else{var e=b[b.length-1];c="i"===e||"I"===e}var f=this.toMonthIndex(a,d,c);return f},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(a,b){if(a.year&&(a=a.year()),"number"!=typeof a||1888>a||a>2111)throw b.replace(/\{0\}/,this.local.name);return a},toMonthIndex:function(a,b,c){var d=this.intercalaryMonth(a),e=c&&b!==d;if(e||1>b||b>12)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);var f;return f=d?!c&&d>=b?b-1:b:b-1},toChineseMonth:function(a,b){a.year&&(a=a.year(),b=a.month());var c=this.intercalaryMonth(a),d=c?12:11;if(0>b||b>d)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);var e;return e=c?c>b?b+1:b:b+1},intercalaryMonth:function(a){a=this._validateYear(a);var b=n[a-n[0]],c=b>>13;return c},isIntercalaryMonth:function(a,b){a.year&&(a=a.year(),b=a.month());var c=this.intercalaryMonth(a);return!!c&&c===b},leapYear:function(a){return 0!==this.intercalaryMonth(a)},weekOfYear:function(a,b,c){var d,e=this._validateYear(a,g.local.invalidyear),f=o[e-o[0]],h=f>>9&4095,j=f>>5&15,k=31&f;d=i.newDate(h,j,k),d.add(4-(d.dayOfWeek()||7),"d");var l=this.toJD(a,b,c)-d.toJD();return 1+Math.floor(l/7)},monthsInYear:function(a){return this.leapYear(a)?13:12},daysInMonth:function(a,b){a.year&&(b=a.month(),a=a.year()),a=this._validateYear(a);var c=n[a-n[0]],d=c>>13,e=d?12:11;if(b>e)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);var f=c&1<<12-b?30:29;return f},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,h,c,g.local.invalidDate);a=this._validateYear(d.year()),b=d.month(),c=d.day();var e=this.isIntercalaryMonth(a,b),h=this.toChineseMonth(a,b),j=f(a,h,c,e);return i.toJD(j.year,j.month,j.day)},fromJD:function(a){var b=i.fromJD(a),c=e(b.year(),b.month(),b.day()),d=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,d,c.day)},fromString:function(a){var b=a.match(j),c=this._validateYear(+b[1]),d=+b[2],e=!!b[3],f=this.toMonthIndex(c,d,e),g=+b[4];return this.newDate(c,f,g)},add:function(a,b,c){var e=a.year(),f=a.month(),g=this.isIntercalaryMonth(e,f),h=this.toChineseMonth(e,f),i=Object.getPrototypeOf(d.prototype).add.call(this,a,b,c);if("y"===c){var j=i.year(),k=i.month(),l=this.isIntercalaryMonth(j,h),m=g&&l?this.toMonthIndex(j,h,!0):this.toMonthIndex(j,h,!1);m!==k&&i.month(m)}return i}});var j=/^\s*(-?\d\d\d\d|\d\d)[-\/](\d?\d)([iI]?)[-\/](\d?\d)/m,k=/^\d?\d[iI]?/m,l=/^闰?十?[一二三四五六七八九]?月/m,m=/^闰?十?[一二三四五六七八九]?/m;g.calendars.chinese=d;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],o=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":590,"object-assign":471}],577:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=b.year()+(b.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear),13},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(13===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),0>a&&a++,d.day()+30*(d.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-1},fromJD:function(a){var b=Math.floor(a)+.5-this.jdEpoch,c=Math.floor((b-Math.floor((b+366)/1461))/365)+1;0>=c&&c--,b=Math.floor(a)+.5-this.newDate(c,1,1).toJD();var d=Math.floor(b/30)+1,e=b-30*(d-1)+1;return this.newDate(c,d,e)}}),e.calendars.coptic=d},{"../main":590,"object-assign":471}],578:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),!1},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),13},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),400},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/8)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return(d.day()+1)%8},weekDay:function(a,b,c){var d=this.dayOfWeek(a,b,c);return d>=2&&6>=d},extraInfo:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return{century:g[Math.floor((d.year()-1)/100)+1]||""}},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year()+(d.year()<0?1:0),b=d.month(),c=d.day(),c+(b>1?16:0)+(b>2?32*(b-2):0)+400*(a-1)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a+.5)-Math.floor(this.jdEpoch)-1;var b=Math.floor(a/400)+1;a-=400*(b-1),a+=a>15?16:0;var c=Math.floor(a/32)+1,d=a-32*(c-1)+1;return this.newDate(0>=b?b-1:b,c,d)}});var g={20:"Fruitbat",21:"Anchovy"};e.calendars.discworld=d},{"../main":590,"object-assign":471}],579:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=b.year()+(b.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear),13},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(13===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),0>a&&a++,d.day()+30*(d.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-1},fromJD:function(a){var b=Math.floor(a)+.5-this.jdEpoch,c=Math.floor((b-Math.floor((b+366)/1461))/365)+1;0>=c&&c--,b=Math.floor(a)+.5-this.newDate(c,1,1).toJD();var d=Math.floor(b/30)+1,e=b-30*(d-1)+1;return this.newDate(c,d,e)}}),e.calendars.ethiopian=d},{"../main":590,"object-assign":471}],580:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b){return a-b*Math.floor(a/b)}var f=a("../main"),g=a("object-assign");d.prototype=new f.baseCalendar,g(d.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear);return this._leapYear(b.year())},_leapYear:function(a){return a=0>a?a+1:a,e(7*a+1,19)<7},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),this._leapYear(a.year?a.year():a)?13:12},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear);return a=b.year(),this.toJD(-1===a?1:a+1,7,1)-this.toJD(a,7,1)},daysInMonth:function(a,b){return a.year&&(b=a.month(),a=a.year()),this._validate(a,b,this.minDay,f.local.invalidMonth),12===b&&this.leapYear(a)?30:8===b&&5===e(this.daysInYear(a),10)?30:9===b&&3===e(this.daysInYear(a),10)?29:this.daysPerMonth[b-1]},weekDay:function(a,b,c){return 6!==this.dayOfWeek(a,b,c)},extraInfo:function(a,b,c){var d=this._validate(a,b,c,f.local.invalidDate);return{yearType:(this.leapYear(d)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(d)%10-3]}},toJD:function(a,b,c){var d=this._validate(a,b,c,f.local.invalidDate);a=d.year(),b=d.month(),c=d.day();var e=0>=a?a+1:a,g=this.jdEpoch+this._delay1(e)+this._delay2(e)+c+1;if(7>b){for(var h=7;h<=this.monthsInYear(a);h++)g+=this.daysInMonth(a,h);for(var h=1;b>h;h++)g+=this.daysInMonth(a,h)}else for(var h=7;b>h;h++)g+=this.daysInMonth(a,h);return g},_delay1:function(a){var b=Math.floor((235*a-234)/19),c=12084+13753*b,d=29*b+Math.floor(c/25920);return e(3*(d+1),7)<3&&d++,d},_delay2:function(a){var b=this._delay1(a-1),c=this._delay1(a),d=this._delay1(a+1);return d-c===356?2:c-b===382?1:0},fromJD:function(a){a=Math.floor(a)+.5;for(var b=Math.floor(98496*(a-this.jdEpoch)/35975351)-1;a>=this.toJD(-1===b?1:b+1,7,1);)b++;for(var c=a<this.toJD(b,1,1)?7:1;a>this.toJD(b,c,this.daysInMonth(b,c));)c++;var d=a-this.toJD(b,c,1)+1;return this.newDate(b,c,d)}}),f.calendars.hebrew=d},{"../main":590,"object-assign":471}],581:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear);return(11*b.year()+14)%30<11},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){return this.leapYear(a)?355:354},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return 5!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),b=d.month(),c=d.day(),a=0>=a?a+1:a,c+Math.ceil(29.5*(b-1))+354*(a-1)+Math.floor((3+11*a)/30)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var b=Math.floor((30*(a-this.jdEpoch)+10646)/10631);b=0>=b?b-1:b;var c=Math.min(12,Math.ceil((a-29-this.toJD(b,1,1))/29.5)+1),d=a-this.toJD(b,c,1)+1;return this.newDate(b,c,d)}}),e.calendars.islamic=d},{"../main":590,"object-assign":471}],582:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=b.year()<0?b.year()+1:b.year();return a%4===0},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(4-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),b=d.month(),c=d.day(),0>a&&a++,2>=b&&(a--,b+=12),Math.floor(365.25*(a+4716))+Math.floor(30.6001*(b+1))+c-1524.5},fromJD:function(a){var b=Math.floor(a+.5),c=b+1524,d=Math.floor((c-122.1)/365.25),e=Math.floor(365.25*d),f=Math.floor((c-e)/30.6001),g=f-Math.floor(14>f?1:13),h=d-Math.floor(g>2?4716:4715),i=c-e-Math.floor(30.6001*f);return 0>=h&&h--,this.newDate(h,g,i)}}),e.calendars.julian=d},{"../main":590,"object-assign":471}],583:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b){return a-b*Math.floor(a/b)}function f(a,b){return e(a-1,b)+1}var g=a("../main"),h=a("object-assign");d.prototype=new g.baseCalendar,h(d.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,g.local.invalidYear),!1},formatYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);a=b.year();var c=Math.floor(a/400);a%=400,a+=0>a?400:0;var d=Math.floor(a/20);return c+"."+d+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var b=0,c=0;c<a.length;c++){var d=parseInt(a[c],10);if(Math.abs(d)>19||c>0&&0>d)throw"Invalid Mayan year";b=20*b+d}return b},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,g.local.invalidYear),18},weekOfYear:function(a,b,c){return this._validate(a,b,c,g.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,g.local.invalidYear),360},daysInMonth:function(a,b){return this._validate(a,b,this.minDay,g.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,b,c){var d=this._validate(a,b,c,g.local.invalidDate);return d.day()},weekDay:function(a,b,c){return this._validate(a,b,c,g.local.invalidDate),!0},extraInfo:function(a,b,c){var d=this._validate(a,b,c,g.local.invalidDate),e=d.toJD(),f=this._toHaab(e),h=this._toTzolkin(e);return{haabMonthName:this.local.haabMonths[f[0]-1],haabMonth:f[0],haabDay:f[1],tzolkinDayName:this.local.tzolkinMonths[h[0]-1],tzolkinDay:h[0],tzolkinTrecena:h[1]}},_toHaab:function(a){a-=this.jdEpoch;var b=e(a+8+340,365);return[Math.floor(b/20)+1,e(b,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[f(a+20,20),f(a+4,13)]},toJD:function(a,b,c){var d=this._validate(a,b,c,g.local.invalidDate);return d.day()+20*d.month()+360*d.year()+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var b=Math.floor(a/360);a%=360,a+=0>a?360:0;var c=Math.floor(a/20),d=a%20;return this.newDate(b,c,d)}}),g.calendars.mayan=d},{"../main":590,"object-assign":471}],584:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar;var g=e.instance("gregorian");f(d.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return g.leapYear(b.year()+(b.year()<1?1:0)+1469)},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);
return d.add(1-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidMonth),a=d.year();0>a&&a++;for(var f=d.day(),h=1;h<d.month();h++)f+=this.daysPerMonth[h-1];return f+g.toJD(a+1468,3,13)},fromJD:function(a){a=Math.floor(a+.5);for(var b=Math.floor((a-(this.jdEpoch-1))/366);a>=this.toJD(b+1,1,1);)b++;for(var c=a-Math.floor(this.toJD(b,1,1)+.5)+1,d=1;c>this.daysInMonth(b,d);)c-=this.daysInMonth(b,d),d++;return this.newDate(b,d,c)}}),e.calendars.nanakshahi=d},{"../main":590,"object-assign":471}],585:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(a){return this.daysInYear(a)!==this.daysPerYear},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear);if(a=b.year(),"undefined"==typeof this.NEPALI_CALENDAR_DATA[a])return this.daysPerYear;for(var c=0,d=this.minMonth;12>=d;d++)c+=this.NEPALI_CALENDAR_DATA[a][d];return c},daysInMonth:function(a,b){return a.year&&(b=a.month(),a=a.year()),this._validate(a,b,this.minDay,e.local.invalidMonth),"undefined"==typeof this.NEPALI_CALENDAR_DATA[a]?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[a][b]},weekDay:function(a,b,c){return 6!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);a=d.year(),b=d.month(),c=d.day();var f=e.instance(),g=0,h=b,i=a;this._createMissingCalendarData(a);var j=a-(h>9||9===h&&c>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(9!==b&&(g=c,h--);9!==h;)0>=h&&(h=12,i--),g+=this.NEPALI_CALENDAR_DATA[i][h],h--;return 9===b?(g+=c-this.NEPALI_CALENDAR_DATA[i][0],0>g&&(g+=f.daysInYear(j))):g+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],f.newDate(j,1,1).add(g,"d").toJD()},fromJD:function(a){var b=e.instance(),c=b.fromJD(a),d=c.year(),f=c.dayOfYear(),g=d+56;this._createMissingCalendarData(g);for(var h=9,i=this.NEPALI_CALENDAR_DATA[g][0],j=this.NEPALI_CALENDAR_DATA[g][h]-i+1;f>j;)h++,h>12&&(h=1,g++),j+=this.NEPALI_CALENDAR_DATA[g][h];var k=this.NEPALI_CALENDAR_DATA[g][h]-(j-f);return this.newDate(g,h,k)},_createMissingCalendarData:function(a){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var c=a-1;a+2>c;c++)"undefined"==typeof this.NEPALI_CALENDAR_DATA[c]&&(this.NEPALI_CALENDAR_DATA[c]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),e.calendars.nepali=d},{"../main":590,"object-assign":471}],586:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b){return a-b*Math.floor(a/b)}var f=a("../main"),g=a("object-assign");d.prototype=new f.baseCalendar,g(d.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear);return 682*((b.year()-(b.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-((d.dayOfWeek()+1)%7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,f.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return 5!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,f.local.invalidDate);a=d.year(),b=d.month(),c=d.day();var g=a-(a>=0?474:473),h=474+e(g,2820);return c+(7>=b?31*(b-1):30*(b-1)+6)+Math.floor((682*h-110)/2816)+365*(h-1)+1029983*Math.floor(g/2820)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var b=a-this.toJD(475,1,1),c=Math.floor(b/1029983),d=e(b,1029983),f=2820;if(1029982!==d){var g=Math.floor(d/366),h=e(d,366);f=Math.floor((2134*g+2816*h+2815)/1028522)+g+1}var i=f+2820*c+474;i=0>=i?i-1:i;var j=a-this.toJD(i,1,1)+1,k=186>=j?Math.ceil(j/31):Math.ceil((j-6)/30),l=a-this.toJD(i,k,1)+1;return this.newDate(i,k,l)}}),f.calendars.persian=d,f.calendars.jalali=d},{"../main":590,"object-assign":471}],587:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign"),g=e.instance();d.prototype=new e.baseCalendar,f(d.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(b.year());return g.leapYear(a)},weekOfYear:function(a,b,c){var d=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(d.year());return g.weekOfYear(a,d.month(),d.day())},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate),a=this._t2gYear(d.year());return g.toJD(a,d.month(),d.day())},fromJD:function(a){var b=g.fromJD(a),c=this._g2tYear(b.year());return this.newDate(c,b.month(),b.day())},_t2gYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)},_g2tYear:function(a){return a-this.yearsOffset-(a>=1&&a<=this.yearsOffset?1:0)}}),e.calendars.taiwan=d},{"../main":590,"object-assign":471}],588:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign"),g=e.instance();d.prototype=new e.baseCalendar,f(d.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(b.year());return g.leapYear(a)},weekOfYear:function(a,b,c){var d=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(d.year());return g.weekOfYear(a,d.month(),d.day())},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate),a=this._t2gYear(d.year());return g.toJD(a,d.month(),d.day())},fromJD:function(a){var b=g.fromJD(a),c=this._g2tYear(b.year());return this.newDate(c,b.month(),b.day())},_t2gYear:function(a){return a-this.yearsOffset-(a>=1&&a<=this.yearsOffset?1:0)},_g2tYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)}}),e.calendars.thai=d},{"../main":590,"object-assign":471}],589:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear);return 355===this.daysInYear(b.year())},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){for(var b=0,c=1;12>=c;c++)b+=this.daysInMonth(a,c);return b},daysInMonth:function(a,b){for(var c=this._validate(a,b,this.minDay,e.local.invalidMonth),d=c.toJD()-24e5+.5,f=0,h=0;h<g.length;h++){if(g[h]>d)return g[f]-g[f-1];f++}return 30},weekDay:function(a,b,c){return 5!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate),f=12*(d.year()-1)+d.month()-15292,h=d.day()+g[f-1]-1;return h+24e5-.5},fromJD:function(a){for(var b=a-24e5+.5,c=0,d=0;d<g.length&&!(g[d]>b);d++)c++;var e=c+15292,f=Math.floor((e-1)/12),h=f+1,i=e-12*f,j=b-g[c-1]+1;return this.newDate(h,i,j)},isValid:function(a,b,c){var d=e.baseCalendar.prototype.isValid.apply(this,arguments);return d&&(a=null!=a.year?a.year:a,d=a>=1276&&1500>=a),d},_validate:function(a,b,c,d){var f=e.baseCalendar.prototype._validate.apply(this,arguments);if(f.year<1276||f.year>1500)throw d.replace(/\{0\}/,this.local.name);return f}}),e.calendars.ummalqura=d;var g=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];
},{"../main":590,"object-assign":471}],590:[function(a,b,c){function d(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function e(a,b,c,d){if(this._calendar=a,this._year=b,this._month=c,this._day=d,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(j.local.invalidDate||j.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function f(a,b){return a=""+a,"000000".substring(0,b-a.length)+a}function g(){this.shortYearCutoff="+10"}function h(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}var i=a("object-assign");i(d.prototype,{instance:function(a,b){a=(a||"gregorian").toLowerCase(),b=b||"";var c=this._localCals[a+"-"+b];if(!c&&this.calendars[a]&&(c=new this.calendars[a](b),this._localCals[a+"-"+b]=c),!c)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return c},newDate:function(a,b,c,d,e){return d=(null!=a&&a.year?a.calendar():"string"==typeof d?this.instance(d,e):d)||this.instance(),d.newDate(a,b,c)},substituteDigits:function(a){return function(b){return(b+"").replace(/[0-9]/g,function(b){return a[b]})}},substituteChineseDigits:function(a,b){return function(c){for(var d="",e=0;c>0;){var f=c%10;d=(0===f?"":a[f]+b[e])+d,e++,c=Math.floor(c/10)}return 0===d.indexOf(a[1]+b[1])&&(d=d.substr(1)),d||a[0]}}}),i(e.prototype,{newDate:function(a,b,c){return this._calendar.newDate(null==a?this:a,b,c)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,b,c){if(!this._calendar.isValid(a,b,c))throw(j.local.invalidDate||j.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=b,this._day=c,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,b){return this._calendar.add(this,a,b)},set:function(a,b){return this._calendar.set(this,a,b)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(j.local.differentCalendars||j.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var b=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===b?0:0>b?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+f(Math.abs(this.year()),4)+"-"+f(this.month(),2)+"-"+f(this.day(),2)}}),i(g.prototype,{_validateLevel:0,newDate:function(a,b,c){return null==a?this.today():(a.year&&(this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate),c=a.day(),b=a.month(),a=a.year()),new e(this,a,b,c))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){var b=this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear);return b.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear);return(b.year()<0?"-":"")+f(Math.abs(b.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear),12},monthOfYear:function(a,b){var c=this._validate(a,b,this.minDay,j.local.invalidMonth||j.regionalOptions[""].invalidMonth);return(c.month()+this.monthsInYear(c)-this.firstMonth)%this.monthsInYear(c)+this.minMonth},fromMonthOfYear:function(a,b){var c=(b+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,c,this.minDay,j.local.invalidMonth||j.regionalOptions[""].invalidMonth),c},daysInYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear);return this.leapYear(b)?366:365},dayOfYear:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);return d.toJD()-this.newDate(d.year(),this.fromMonthOfYear(d.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(d))+2)%this.daysInWeek()},extraInfo:function(a,b,c){return this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate),{}},add:function(a,b,c){return this._validate(a,this.minMonth,this.minDay,j.local.invalidDate||j.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,b,c),b,c)},_add:function(a,b,c){if(this._validateLevel++,"d"===c||"w"===c){var d=a.toJD()+b*("w"===c?this.daysInWeek():1),e=a.calendar().fromJD(d);return this._validateLevel--,[e.year(),e.month(),e.day()]}try{var f=a.year()+("y"===c?b:0),g=a.monthOfYear()+("m"===c?b:0),e=a.day(),h=function(a){for(;g<a.minMonth;)f--,g+=a.monthsInYear(f);for(var b=a.monthsInYear(f);g>b-1+a.minMonth;)f++,g-=b,b=a.monthsInYear(f)};"y"===c?(a.month()!==this.fromMonthOfYear(f,g)&&(g=this.newDate(f,a.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(f)),e=Math.min(e,this.daysInMonth(f,this.fromMonthOfYear(f,g)))):"m"===c&&(h(this),e=Math.min(e,this.daysInMonth(f,this.fromMonthOfYear(f,g))));var i=[f,this.fromMonthOfYear(f,g),e];return this._validateLevel--,i}catch(j){throw this._validateLevel--,j}},_correctAdd:function(a,b,c,d){if(!(this.hasYearZero||"y"!==d&&"m"!==d||0!==b[0]&&a.year()>0==b[0]>0)){var e={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[d],f=0>c?-1:1;b=this._add(a,c*e[0]+f*e[1],e[2])}return a.date(b[0],b[1],b[2])},set:function(a,b,c){this._validate(a,this.minMonth,this.minDay,j.local.invalidDate||j.regionalOptions[""].invalidDate);var d="y"===c?b:a.year(),e="m"===c?b:a.month(),f="d"===c?b:a.day();return("y"===c||"m"===c)&&(f=Math.min(f,this.daysInMonth(d,e))),a.date(d,e,f)},isValid:function(a,b,c){this._validateLevel++;var d=this.hasYearZero||0!==a;if(d){var e=this.newDate(a,b,this.minDay);d=b>=this.minMonth&&b-this.minMonth<this.monthsInYear(e)&&c>=this.minDay&&c-this.minDay<this.daysInMonth(e)}return this._validateLevel--,d},toJSDate:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);return j.instance().fromJD(this.toJD(d)).toJSDate()},fromJSDate:function(a){return this.fromJD(j.instance().fromJSDate(a).toJD())},_validate:function(a,b,c,d){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(j.local.differentCalendars||j.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(a,b,c))throw d.replace(/\{0\}/,this.local.name);var e=this.newDate(a,b,c);return this._validateLevel--,e}catch(f){throw this._validateLevel--,f}}}),h.prototype=new g,i(h.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear),a=b.year()+(b.year()<0?1:0);return a%4===0&&(a%100!==0||a%400===0)},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(4-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,j.local.invalidMonth||j.regionalOptions[""].invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);a=d.year(),b=d.month(),c=d.day(),0>a&&a++,3>b&&(b+=12,a--);var e=Math.floor(a/100),f=2-e+Math.floor(e/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(b+1))+c+f-1524.5},fromJD:function(a){var b=Math.floor(a+.5),c=Math.floor((b-1867216.25)/36524.25);c=b+1+c-Math.floor(c/4);var d=c+1524,e=Math.floor((d-122.1)/365.25),f=Math.floor(365.25*e),g=Math.floor((d-f)/30.6001),h=d-f-Math.floor(30.6001*g),i=g-(g>13.5?13:1),j=e-(i>2.5?4716:4715);return 0>=j&&j--,this.newDate(j,i,h)},toJSDate:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate),e=new Date(d.year(),d.month()-1,d.day());return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.setHours(e.getHours()>12?e.getHours()+2:0),e},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var j=b.exports=new d;j.cdate=e,j.baseCalendar=g,j.calendars.gregorian=h},{"object-assign":471}],591:[function(a,b,c){var d=a("object-assign"),e=a("./main");d(e.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),e.local=e.regionalOptions[""],d(e.cdate.prototype,{formatDate:function(a,b){return"string"!=typeof a&&(b=a,a=""),this._calendar.formatDate(a||"",this,b)}}),d(e.baseCalendar.prototype,{UNIX_EPOCH:e.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:e.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,b,c){if("string"!=typeof a&&(c=b,b=a,a=""),!b)return"";if(b.calendar()!==this)throw e.local.invalidFormat||e.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat,c=c||{};for(var d=c.dayNamesShort||this.local.dayNamesShort,f=c.dayNames||this.local.dayNames,g=c.monthNumbers||this.local.monthNumbers,h=c.monthNamesShort||this.local.monthNamesShort,i=c.monthNames||this.local.monthNames,j=(c.calculateWeek||this.local.calculateWeek,function(b,c){for(var d=1;t+d<a.length&&a.charAt(t+d)===b;)d++;return t+=d-1,Math.floor(d/(c||1))>1}),k=function(a,b,c,d){var e=""+b;if(j(a,d))for(;e.length<c;)e="0"+e;return e},l=function(a,b,c,d){return j(a)?d[b]:c[b]},m=this,n=function(a){return"function"==typeof g?g.call(m,a,j("m")):q(k("m",a.month(),2))},o=function(a,b){return b?"function"==typeof i?i.call(m,a):i[a.month()-m.minMonth]:"function"==typeof h?h.call(m,a):h[a.month()-m.minMonth]},p=this.local.digits,q=function(a){return c.localNumbers&&p?p(a):a},r="",s=!1,t=0;t<a.length;t++)if(s)"'"!==a.charAt(t)||j("'")?r+=a.charAt(t):s=!1;else switch(a.charAt(t)){case"d":r+=q(k("d",b.day(),2));break;case"D":r+=l("D",b.dayOfWeek(),d,f);break;case"o":r+=k("o",b.dayOfYear(),3);break;case"w":r+=k("w",b.weekOfYear(),2);break;case"m":r+=n(b);break;case"M":r+=o(b,j("M"));break;case"y":r+=j("y",2)?b.year():(b.year()%100<10?"0":"")+b.year()%100;break;case"Y":j("Y",2),r+=b.formatYear();break;case"J":r+=b.toJD();break;case"@":r+=(b.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":r+=(b.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":j("'")?r+="'":s=!0;break;default:r+=a.charAt(t)}return r},parseDate:function(a,b,c){if(null==b)throw e.local.invalidArguments||e.regionalOptions[""].invalidArguments;if(b="object"==typeof b?b.toString():b+"",""===b)return null;a=a||this.local.dateFormat,c=c||{};var d=c.shortYearCutoff||this.shortYearCutoff;d="string"!=typeof d?d:this.today().year()%100+parseInt(d,10);for(var f=c.dayNamesShort||this.local.dayNamesShort,g=c.dayNames||this.local.dayNames,h=c.parseMonth||this.local.parseMonth,i=c.monthNumbers||this.local.monthNumbers,j=c.monthNamesShort||this.local.monthNamesShort,k=c.monthNames||this.local.monthNames,l=-1,m=-1,n=-1,o=-1,p=-1,q=!1,r=!1,s=function(b,c){for(var d=1;A+d<a.length&&a.charAt(A+d)===b;)d++;return A+=d-1,Math.floor(d/(c||1))>1},t=function(a,c){var d=s(a,c),f=[2,3,d?4:2,d?4:2,10,11,20]["oyYJ@!".indexOf(a)+1],g=new RegExp("^-?\\d{1,"+f+"}"),h=b.substring(z).match(g);if(!h)throw(e.local.missingNumberAt||e.regionalOptions[""].missingNumberAt).replace(/\{0\}/,z);return z+=h[0].length,parseInt(h[0],10)},u=this,v=function(){if("function"==typeof i){s("m");var a=i.call(u,b.substring(z));return z+=a.length,a}return t("m")},w=function(a,c,d,f){for(var g=s(a,f)?d:c,h=0;h<g.length;h++)if(b.substr(z,g[h].length).toLowerCase()===g[h].toLowerCase())return z+=g[h].length,h+u.minMonth;throw(e.local.unknownNameAt||e.regionalOptions[""].unknownNameAt).replace(/\{0\}/,z)},x=function(){if("function"==typeof k){var a=s("M")?k.call(u,b.substring(z)):j.call(u,b.substring(z));return z+=a.length,a}return w("M",j,k)},y=function(){if(b.charAt(z)!==a.charAt(A))throw(e.local.unexpectedLiteralAt||e.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,z);z++},z=0,A=0;A<a.length;A++)if(r)"'"!==a.charAt(A)||s("'")?y():r=!1;else switch(a.charAt(A)){case"d":o=t("d");break;case"D":w("D",f,g);break;case"o":p=t("o");break;case"w":t("w");break;case"m":n=v();break;case"M":n=x();break;case"y":var B=A;q=!s("y",2),A=B,m=t("y",2);break;case"Y":m=t("Y",2);break;case"J":l=t("J")+.5,"."===b.charAt(z)&&(z++,t("J"));break;case"@":l=t("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=t("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":z=b.length;break;case"'":s("'")?y():r=!0;break;default:y()}if(z<b.length)throw e.local.unexpectedText||e.regionalOptions[""].unexpectedText;if(-1===m?m=this.today().year():100>m&&q&&(m+=-1===d?1900:this.today().year()-this.today().year()%100-(d>=m?0:100)),"string"==typeof n&&(n=h.call(this,m,n)),p>-1){n=1,o=p;for(var C=this.daysInMonth(m,n);o>C;C=this.daysInMonth(m,n))n++,o-=C}return l>-1?this.fromJD(l):this.newDate(m,n,o)},determineDate:function(a,b,c,d,e){c&&"object"!=typeof c&&(e=d,d=c,c=null),"string"!=typeof d&&(e=d,d="");var f=this,g=function(a){try{return f.parseDate(d,a,e)}catch(b){}a=a.toLowerCase();for(var g=(a.match(/^c/)&&c?c.newDate():null)||f.today(),h=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=h.exec(a);i;)g.add(parseInt(i[1],10),i[2]||"d"),i=h.exec(a);return g};return b=b?b.newDate():null,a=null==a?b:"string"==typeof a?g(a):"number"==typeof a?isNaN(a)||a===1/0||a===-(1/0)?b:f.today().add(a,"d"):f.newDate(a)}})},{"./main":590,"object-assign":471}],592:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":111}],593:[function(a,b,c){"use strict";function d(a,b){var c=[];return b=+b||0,e(a.hi(a.shape[0]-1),c,b),c}b.exports=d;var e=a("./lib/zc-core")},{"./lib/zc-core":592}],594:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("./common_defaults"),g=a("./attributes");b.exports=function(a,b,c,h,i){function j(c,e){return d.coerce(a,b,g,c,e)}h=h||{},i=i||{};var k=j("visible",!i.itemIsNotPlainObject),l=j("clicktoshow");if(!k&&!l)return b;f(a,b,c,j);for(var m=b.showarrow,n=["x","y"],o=[-10,-30],p={_fullLayout:c},q=0;2>q;q++){var r=n[q],s=e.coerceRef(a,b,p,r,"","paper");if(e.coercePosition(b,p,j,s,r,.5),m){var t="a"+r,u=e.coerceRef(a,b,p,t,"pixel");"pixel"!==u&&u!==s&&(u=b[t]="pixel");var v="pixel"===u?o[q]:.4;e.coercePosition(b,p,j,u,t,v)}j(r+"anchor"),j(r+"shift")}if(d.noneOrAll(a,b,["x","y"]),m&&d.noneOrAll(a,b,["ax","ay"]),l){var w=j("xclick"),x=j("yclick");b._xclick=void 0===w?b.x:e.cleanPosition(w,p,b.xref),b._yclick=void 0===x?b.y:e.cleanPosition(x,p,b.yref)}return b}},{"../../lib":738,"../../plots/cartesian/axes":785,"./attributes":596,"./common_defaults":599}],595:[function(a,b,c){"use strict";b.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],596:[function(a,b,c){"use strict";var d=a("./arrow_paths"),e=a("../../plots/font_attributes"),f=a("../../plots/cartesian/constants");b.exports={_isLinkedToArray:"annotation",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange"},text:{valType:"string",editType:"calcIfAutorange"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange"},font:e({editType:"calcIfAutorange",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange"},showarrow:{valType:"boolean",dflt:!0,editType:"calcIfAutorange"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange"},ax:{valType:"any",editType:"calcIfAutorange"},ay:{valType:"any",editType:"calcIfAutorange"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",f.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange"},yref:{valType:"enumerated",values:["paper",f.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:e({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}}},{"../../plots/cartesian/constants":790,"../../plots/font_attributes":810,"./arrow_paths":595}],597:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;e.filterVisible(b.annotations).forEach(function(b){var c,d,e,g,h=f.getFromId(a,b.xref),i=f.getFromId(a,b.yref),j=3*b.arrowsize*b.arrowwidth||0,k=3*b.startarrowsize*b.arrowwidth||0;h&&h.autorange&&(c=j+b.xshift,d=j-b.xshift,e=k+b.xshift,g=k-b.xshift,b.axref===b.xref?(f.expand(h,[h.r2c(b.x)],{ppadplus:c,ppadminus:d}),f.expand(h,[h.r2c(b.ax)],{ppadplus:Math.max(b._xpadplus,e),ppadminus:Math.max(b._xpadminus,g)})):(e=b.ax?e+b.ax:e,g=b.ax?g-b.ax:g,f.expand(h,[h.r2c(b.x)],{ppadplus:Math.max(b._xpadplus,c,e),ppadminus:Math.max(b._xpadminus,d,g)}))),i&&i.autorange&&(c=j-b.yshift,d=j+b.yshift,e=k-b.yshift,g=k+b.yshift,b.ayref===b.yref?(f.expand(i,[i.r2c(b.y)],{ppadplus:c,ppadminus:d}),f.expand(i,[i.r2c(b.ay)],{ppadplus:Math.max(b._ypadplus,e),ppadminus:Math.max(b._ypadminus,g)})):(e=b.ay?e+b.ay:e,g=b.ay?g-b.ay:g,f.expand(i,[i.r2c(b.y)],{ppadplus:Math.max(b._ypadplus,c,e),ppadminus:Math.max(b._ypadminus,d,g)})))})}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("./draw").draw;b.exports=function(a){var b=a._fullLayout,c=e.filterVisible(b.annotations);if(c.length&&a._fullData.length){var h={};c.forEach(function(a){h[a.xref]=1,h[a.yref]=1});for(var i in h){var j=f.getFromId(a,i);if(j&&j.autorange)return e.syncOrAsync([g,d],a)}}}},{"../../lib":738,"../../plots/cartesian/axes":785,"./draw":602}],598:[function(a,b,c){"use strict";function d(a,b){var c=f(a,b);return c.on.length>0||c.explicitOff.length>0}function e(a,b){var c,d=f(a,b),e=d.on,g=d.off.concat(d.explicitOff),i={};if(e.length||g.length){for(c=0;c<e.length;c++)i["annotations["+e[c]+"].visible"]=!0;for(c=0;c<g.length;c++)i["annotations["+g[c]+"].visible"]=!1;return h.update(a,{},i)}}function f(a,b){var c,d,e,f,h,i,j,k,l=a._fullLayout.annotations,m=[],n=[],o=[],p=(b||[]).length;for(c=0;c<l.length;c++)if(e=l[c],f=e.clicktoshow){for(d=0;p>d;d++)if(h=b[d],i=h.xaxis,j=h.yaxis,i._id===e.xref&&j._id===e.yref&&i.d2r(h.x)===g(e._xclick,i)&&j.d2r(h.y)===g(e._yclick,j)){k=e.visible?"onout"===f?n:o:m,k.push(c);break}d===p&&e.visible&&"onout"===f&&n.push(c)}return{on:m,off:n,explicitOff:o}}function g(a,b){return"log"===b.type?b.l2r(a):b.d2r(a)}var h=a("../../plotly");b.exports={hasClickToShow:d,onClick:e}},{"../../plotly":780}],599:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../color");b.exports=function(a,b,c,f){f("opacity");var g=f("bgcolor"),h=f("bordercolor"),i=e.opacity(h);f("borderpad");var j=f("borderwidth"),k=f("showarrow");f("text",k?" ":"new text"),f("textangle"),d.coerceFont(f,"font",c.font),f("width"),f("align");var l=f("height");if(l&&f("valign"),k){var m,n,o=f("arrowside");-1!==o.indexOf("end")&&(m=f("arrowhead"),n=f("arrowsize")),-1!==o.indexOf("start")&&(f("startarrowhead",m),f("startarrowsize",n)),f("arrowcolor",i?b.bordercolor:e.defaultLine),f("arrowwidth",2*(i&&j||1)),f("standoff"),f("startstandoff")}var p=f("hovertext"),q=c.hoverlabel||{};if(p){var r=f("hoverlabel.bgcolor",q.bgcolor||(e.opacity(g)?e.rgb(g):e.defaultLine)),s=f("hoverlabel.bordercolor",q.bordercolor||e.contrast(r));d.coerceFont(f,"hoverlabel.font",{family:q.font.family,size:q.font.size,color:q.font.color||s})}f("captureevents",!!p)}},{"../../lib":738,"../color":613}],600:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib/to_log_range");b.exports=function(a,b,c,f){function g(a){var c=j[a],g=null;g=h?e(c,b.range):Math.pow(10,c),d(g)||(g=null),f(k+a,g)}b=b||{};var h="log"===c&&"linear"===b.type,i="linear"===c&&"log"===b.type;if(h||i)for(var j,k,l=a._fullLayout.annotations,m=b._id.charAt(0),n=0;n<l.length;n++)j=l[n],k="annotations["+n+"].",j[m+"ref"]===b._id&&g(m),j["a"+m+"ref"]===b._id&&g("a"+m)}},{"../../lib/to_log_range":763,"fast-isnumeric":132}],601:[function(a,b,c){"use strict";var d=a("../../plots/array_container_defaults"),e=a("./annotation_defaults");b.exports=function(a,b){var c={name:"annotations",handleItemDefaults:e};d(a,b,c)}},{"../../plots/array_container_defaults":782,"./annotation_defaults":594}],602:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var c=0;c<b.annotations.length;c++)b.annotations[c].visible&&e(a,c);return i.previousPromises(a)}function e(a,b){var c=a._fullLayout,d=c.annotations[b]||{},e=k.getFromId(a,d.xref),g=k.getFromId(a,d.yref);f(a,d,b,!1,e,g)}function f(a,b,c,d,e,f){function i(c){return c.call(m.font,L).attr({"text-anchor":{left:"start",right:"end"}[b.align]||"middle"}),o.convertToTspans(c,a,k),c}function k(){function c(a,b){return"auto"===b&&(b=1/3>a?"left":a>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[b]}var g=M.selectAll("a");if(1===g.size()&&g.text()===M.text()){var i=E.insert("a",":first-child").attr({"xlink:xlink:href":g.attr("xlink:href"),"xlink:xlink:show":g.attr("xlink:show")}).style({cursor:"pointer"});i.node().appendChild(I.node())}var k=E.select(".annotation-text-math-group"),n=!k.empty(),s=m.bBox((n?k:M).node()),D=s.width,G=s.height,L=b.width||D,N=b.height||G,O=Math.round(L+2*H),P=Math.round(N+2*H);b._w=L,b._h=N;for(var Q=!1,R=["x","y"],S=0;S<R.length;S++){var T,U,V,W,X,Y=R[S],Z=b[Y+"ref"]||Y,$=b["a"+Y+"ref"],_={x:e,y:f}[Y],aa=(z+("x"===Y?0:-90))*Math.PI/180,ba=O*Math.cos(aa),ca=P*Math.sin(aa),da=Math.abs(ba)+Math.abs(ca),ea=b[Y+"anchor"],fa=b[Y+"shift"]*("x"===Y?1:-1),ga=y[Y];if(_){var ha=_.r2fraction(b[Y]);if((a._dragging||!_.autorange)&&(0>ha||ha>1)&&($===Z?(ha=_.r2fraction(b["a"+Y]),(0>ha||ha>1)&&(Q=!0)):Q=!0,Q))continue;T=_._offset+_.r2p(b[Y]),W=.5}else"x"===Y?(V=b[Y],T=v.l+v.w*V):(V=1-b[Y],T=v.t+v.h*V),W=b.showarrow?.5:V;if(b.showarrow){ga.head=T;var ia=b["a"+Y];X=ba*c(.5,b.xanchor)-ca*c(.5,b.yanchor),$===Z?(ga.tail=_._offset+_.r2p(ia),U=X):(ga.tail=T+ia,U=X+ia),ga.text=ga.tail+X;var ja=u["x"===Y?"width":"height"];if("paper"===Z&&(ga.head=j.constrain(ga.head,1,ja-1)),"pixel"===$){var ka=-Math.max(ga.tail-3,ga.text),la=Math.min(ga.tail+3,ga.text)-ja;ka>0?(ga.tail+=ka,ga.text+=ka):la>0&&(ga.tail-=la,ga.text-=la)}ga.tail+=fa,ga.head+=fa}else X=da*c(W,ea),U=X,ga.text=T+X;ga.text+=fa,X+=fa,U+=fa,b["_"+Y+"padplus"]=da/2+U,b["_"+Y+"padminus"]=da/2-U,b["_"+Y+"size"]=da,b["_"+Y+"shift"]=X}if(Q)return void E.remove();var ma=0,na=0;if("left"!==b.align&&(ma=(L-D)*("center"===b.align?.5:1)),"top"!==b.valign&&(na=(N-G)*("middle"===b.valign?.5:1)),n)k.select("svg").attr({x:H+ma-1,y:H+na}).call(m.setClipUrl,J?x:null);else{var oa=H+na-s.top,pa=H+ma-s.left;M.call(o.positionText,pa,oa).call(m.setClipUrl,J?x:null)}K.select("rect").call(m.setRect,H,H,L,N),I.call(m.setRect,F/2,F/2,O-F,P-F),E.call(m.setTranslate,Math.round(y.x.text-O/2),Math.round(y.y.text-P/2)),B.attr({transform:"rotate("+z+","+y.x.text+","+y.y.text+")"});var qa=function(c,g){A.selectAll(".annotation-arrow-g").remove();var i=y.x.head,k=y.y.head,n=y.x.tail+c,o=y.y.tail+g,p=y.x.text+c,s=y.y.text+g,u=j.rotationXYMatrix(z,p,s),x=j.apply2DTransform(u),C=j.apply2DTransform2(u),D=+I.attr("width"),F=+I.attr("height"),G=p-.5*D,H=G+D,J=s-.5*F,K=J+F,L=[[G,J,G,K],[G,K,H,K],[H,K,H,J],[H,J,G,J]].map(C);if(!L.reduce(function(a,b){return a^!!j.segmentsIntersect(i,k,i+1e6,k+1e6,b[0],b[1],b[2],b[3])},!1)){L.forEach(function(a){var b=j.segmentsIntersect(n,o,i,k,a[0],a[1],a[2],a[3]);b&&(n=b.x,o=b.y)});var M=b.arrowwidth,N=b.arrowcolor,O=b.arrowside,P=A.append("g").style({opacity:l.opacity(N)}).classed("annotation-arrow-g",!0),Q=P.append("path").attr("d","M"+n+","+o+"L"+i+","+k).style("stroke-width",M+"px").call(l.stroke,l.rgb(N));if(r(Q,O,b),w.annotationPosition&&Q.node().parentNode&&!d){var R=i,S=k;if(b.standoff){var T=Math.sqrt(Math.pow(i-n,2)+Math.pow(k-o,2));R+=b.standoff*(n-i)/T,S+=b.standoff*(o-k)/T}var U,V,W,X=P.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(n-R)+","+(o-S),transform:"translate("+R+","+S+")"}).style("stroke-width",M+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");q.init({element:X.node(),gd:a,prepFn:function(){var a=m.getTranslate(E);V=a.x,W=a.y,U={},e&&e.autorange&&(U[e._name+".autorange"]=!0),f&&f.autorange&&(U[f._name+".autorange"]=!0)},moveFn:function(a,c){var d=x(V,W),g=d[0]+a,h=d[1]+c;E.call(m.setTranslate,g,h),U[t+".x"]=e?e.p2r(e.r2p(b.x)+a):b.x+a/v.w,U[t+".y"]=f?f.p2r(f.r2p(b.y)+c):b.y-c/v.h,b.axref===b.xref&&(U[t+".ax"]=e.p2r(e.r2p(b.ax)+a)),b.ayref===b.yref&&(U[t+".ay"]=f.p2r(f.r2p(b.ay)+c)),P.attr("transform","translate("+a+","+c+")"),B.attr({transform:"rotate("+z+","+g+","+h+")"})},doneFn:function(){h.relayout(a,U);var b=document.querySelector(".js-notes-box-panel");b&&b.redraw(b.selectedObj)}})}}};if(b.showarrow&&qa(0,0),C){var ra,sa;q.init({element:E.node(),gd:a,prepFn:function(){sa=B.attr("transform"),ra={}},moveFn:function(a,c){var g="pointer";if(b.showarrow)b.axref===b.xref?ra[t+".ax"]=e.p2r(e.r2p(b.ax)+a):ra[t+".ax"]=b.ax+a,b.ayref===b.yref?ra[t+".ay"]=f.p2r(f.r2p(b.ay)+c):ra[t+".ay"]=b.ay+c,qa(a,c);else{if(d)return;if(e)ra[t+".x"]=b.x+a/e._m;else{var h=b._xsize/v.w,i=b.x+(b._xshift-b.xshift)/v.w-h/2;ra[t+".x"]=q.align(i+a/v.w,h,0,1,b.xanchor)}if(f)ra[t+".y"]=b.y+c/f._m;else{var j=b._ysize/v.h,k=b.y-(b._yshift+b.yshift)/v.h-j/2;ra[t+".y"]=q.align(k-c/v.h,j,0,1,b.yanchor)}e&&f||(g=q.getCursor(e?.5:ra[t+".x"],f?.5:ra[t+".y"],b.xanchor,b.yanchor))}B.attr({transform:"translate("+a+","+c+")"+sa}),p(E,g)},doneFn:function(){p(E),h.relayout(a,ra);var b=document.querySelector(".js-notes-box-panel");b&&b.redraw(b.selectedObj)}})}}var s,t,u=a._fullLayout,v=a._fullLayout._size,w=a._context.edits;d?(s="annotation-"+d,t=d+".annotations["+c+"]"):(s="annotation",t="annotations["+c+"]"),u._infolayer.selectAll("."+s+'[data-index="'+c+'"]').remove();var x="clip"+u._uid+"_ann"+c;if(!b._input||b.visible===!1)return void g.selectAll("#"+x).remove();var y={x:{},y:{}},z=+b.textangle||0,A=u._infolayer.append("g").classed(s,!0).attr("data-index",String(c)).style("opacity",b.opacity),B=A.append("g").classed("annotation-text-g",!0),C=w[b.showarrow?"annotationTail":"annotationPosition"],D=b.captureevents||w.annotationText||C,E=B.append("g").style("pointer-events",D?"all":null).call(p,"default").on("click",function(){a._dragging=!1;var e={index:c,annotation:b._input,fullAnnotation:b,event:g.event};d&&(e.subplotId=d),
a.emit("plotly_clickannotation",e)});b.hovertext&&E.on("mouseover",function(){var c=b.hoverlabel,d=c.font,e=this.getBoundingClientRect(),f=a.getBoundingClientRect();n.loneHover({x0:e.left-f.left,x1:e.right-f.left,y:(e.top+e.bottom)/2-f.top,text:b.hovertext,color:c.bgcolor,borderColor:c.bordercolor,fontFamily:d.family,fontSize:d.size,fontColor:d.color},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:a})}).on("mouseout",function(){n.loneUnhover(u._hoverlayer.node())});var F=b.borderwidth,G=b.borderpad,H=F+G,I=E.append("rect").attr("class","bg").style("stroke-width",F+"px").call(l.stroke,b.bordercolor).call(l.fill,b.bgcolor),J=b.width||b.height,K=u._topclips.selectAll("#"+x).data(J?[0]:[]);K.enter().append("clipPath").classed("annclip",!0).attr("id",x).append("rect"),K.exit().remove();var L=b.font,M=E.append("text").classed("annotation-text",!0).text(b.text);w.annotationText?M.call(o.makeEditable,{delegate:E,gd:a}).call(i).on("edit",function(c){b.text=c,this.call(i);var d={};d[t+".text"]=b.text,e&&e.autorange&&(d[e._name+".autorange"]=!0),f&&f.autorange&&(d[f._name+".autorange"]=!0),h.relayout(a,d)}):M.call(i)}var g=a("d3"),h=a("../../plotly"),i=a("../../plots/plots"),j=a("../../lib"),k=a("../../plots/cartesian/axes"),l=a("../color"),m=a("../drawing"),n=a("../fx"),o=a("../../lib/svg_text_utils"),p=a("../../lib/setcursor"),q=a("../dragelement"),r=a("./draw_arrow_head");b.exports={draw:d,drawOne:e,drawRaw:f}},{"../../lib":738,"../../lib/setcursor":757,"../../lib/svg_text_utils":761,"../../plotly":780,"../../plots/cartesian/axes":785,"../../plots/plots":846,"../color":613,"../dragelement":635,"../drawing":638,"../fx":655,"./draw_arrow_head":603,d3:123}],603:[function(a,b,c){"use strict";var d=a("d3"),e=a("../color"),f=a("./arrow_paths");b.exports=function(a,b,c){function g(){a.style("stroke-dasharray","0px,100px")}function h(b,f,g,h){b.path&&(b.noRotate&&(g=0),d.select(m.parentNode).append("path").attr({"class":a.attr("class"),d:b.path,transform:"translate("+f.x+","+f.y+")"+(g?"rotate("+180*g/Math.PI+")":"")+"scale("+h+")"}).style({fill:e.rgb(c.arrowcolor),"stroke-width":0}))}var i,j,k,l,m=a.node(),n=f[c.arrowhead||0],o=f[c.startarrowhead||0],p=(c.arrowwidth||1)*(c.arrowsize||1),q=(c.arrowwidth||1)*(c.startarrowsize||1),r=b.indexOf("start")>=0,s=b.indexOf("end")>=0,t=n.backoff*p+c.standoff,u=o.backoff*q+c.startstandoff;if("line"===m.nodeName){i={x:+a.attr("x1"),y:+a.attr("y1")},j={x:+a.attr("x2"),y:+a.attr("y2")};var v=i.x-j.x,w=i.y-j.y;if(k=Math.atan2(w,v),l=k+Math.PI,t&&u&&t+u>Math.sqrt(v*v+w*w))return void g();if(t){if(t*t>v*v+w*w)return void g();var x=t*Math.cos(k),y=t*Math.sin(k);j.x+=x,j.y+=y,a.attr({x2:j.x,y2:j.y})}if(u){if(u*u>v*v+w*w)return void g();var z=u*Math.cos(k),A=u*Math.sin(k);i.x-=z,i.y-=A,a.attr({x1:i.x,y1:i.y})}}else if("path"===m.nodeName){var B=m.getTotalLength(),C="";if(t+u>B)return void g();var D=m.getPointAtLength(0),E=m.getPointAtLength(.1);k=Math.atan2(D.y-E.y,D.x-E.x),i=m.getPointAtLength(Math.min(u,B)),C="0px,"+u+"px,";var F=m.getPointAtLength(B),G=m.getPointAtLength(B-.1);l=Math.atan2(F.y-G.y,F.x-G.x),j=m.getPointAtLength(Math.max(0,B-t));var H=C?u+t:t;C+=B-H+"px,"+B+"px",a.style("stroke-dasharray",C)}r&&h(o,i,k,q),s&&h(n,j,l,p)}},{"../color":613,"./arrow_paths":595,d3:123}],604:[function(a,b,c){"use strict";var d=a("./draw"),e=a("./click");b.exports={moduleType:"component",name:"annotations",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("annotations"),calcAutorange:a("./calc_autorange"),draw:d.draw,drawOne:d.drawOne,drawRaw:d.drawRaw,hasClickToShow:e.hasClickToShow,onClick:e.onClick,convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":795,"./attributes":596,"./calc_autorange":597,"./click":598,"./convert_coords":600,"./defaults":601,"./draw":602}],605:[function(a,b,c){"use strict";var d=a("../annotations/attributes"),e=a("../../plot_api/edit_types").overrideAll;b.exports=e({_isLinkedToArray:"annotation",visible:d.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:d.xanchor,xshift:d.xshift,yanchor:d.yanchor,yshift:d.yshift,text:d.text,textangle:d.textangle,font:d.font,width:d.width,height:d.height,opacity:d.opacity,align:d.align,valign:d.valign,bgcolor:d.bgcolor,bordercolor:d.bordercolor,borderpad:d.borderpad,borderwidth:d.borderwidth,showarrow:d.showarrow,arrowcolor:d.arrowcolor,arrowhead:d.arrowhead,startarrowhead:d.startarrowhead,arrowside:d.arrowside,arrowsize:d.arrowsize,startarrowsize:d.startarrowsize,arrowwidth:d.arrowwidth,standoff:d.standoff,startstandoff:d.startstandoff,hovertext:d.hovertext,hoverlabel:d.hoverlabel,captureevents:d.captureevents},"calc","from-root")},{"../../plot_api/edit_types":769,"../annotations/attributes":596}],606:[function(a,b,c){"use strict";function d(a,b){var c=b.fullSceneLayout,d=c.domain,g=b.fullLayout._size,h={pdata:null,type:"linear",autorange:!1,range:[-(1/0),1/0]};a._xa={},e.extendFlat(a._xa,h),f.setConvert(a._xa),a._xa._offset=g.l+d.x[0]*g.w,a._xa.l2p=function(){return.5*(1+a.pdata[0]/a.pdata[3])*g.w*(d.x[1]-d.x[0])},a._ya={},e.extendFlat(a._ya,h),f.setConvert(a._ya),a._ya._offset=g.t+(1-d.y[1])*g.h,a._ya.l2p=function(){return.5*(1-a.pdata[1]/a.pdata[3])*g.h*(d.y[1]-d.y[0])}}var e=a("../../lib"),f=a("../../plots/cartesian/axes");b.exports=function(a){for(var b=a.fullSceneLayout,c=b.annotations,e=0;e<c.length;e++)d(c[e],a);a.fullLayout._infolayer.selectAll(".annotation-"+a.id).remove()}},{"../../lib":738,"../../plots/cartesian/axes":785}],607:[function(a,b,c){"use strict";function d(a,b,c,d,g){function j(c,d){return e.coerce(a,b,i,c,d)}function k(a){var d=a+"axis",e={_fullLayout:{}};return e._fullLayout[d]=c[d],f.coercePosition(b,e,j,a,a,.5)}var l=j("visible",!g.itemIsNotPlainObject);return l?(h(a,b,d.fullLayout,j),k("x"),k("y"),k("z"),e.noneOrAll(a,b,["x","y","z"]),b.xref="x",b.yref="y",b.zref="z",j("xanchor"),j("yanchor"),j("xshift"),j("yshift"),b.showarrow&&(b.axref="pixel",b.ayref="pixel",j("ax",-10),j("ay",-30),e.noneOrAll(a,b,["ax","ay"])),b):b}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("../../plots/array_container_defaults"),h=a("../annotations/common_defaults"),i=a("./attributes");b.exports=function(a,b,c){g(a,b,{name:"annotations",handleItemDefaults:d,fullLayout:c.fullLayout})}},{"../../lib":738,"../../plots/array_container_defaults":782,"../../plots/cartesian/axes":785,"../annotations/common_defaults":599,"./attributes":605}],608:[function(a,b,c){"use strict";var d=a("../annotations/draw").drawRaw,e=a("../../plots/gl3d/project"),f=["x","y","z"];b.exports=function(a){for(var b=a.fullSceneLayout,c=a.dataScale,g=b.annotations,h=0;h<g.length;h++){for(var i=g[h],j=!1,k=0;3>k;k++){var l=f[k],m=i[l],n=b[l+"axis"],o=n.r2fraction(m);if(0>o||o>1){j=!0;break}}j?a.fullLayout._infolayer.select(".annotation-"+a.id+'[data-index="'+h+'"]').remove():(i.pdata=e(a.glplot.cameraParams,[b.xaxis.r2l(i.x)*c[0],b.yaxis.r2l(i.y)*c[1],b.zaxis.r2l(i.z)*c[2]]),d(a.graphDiv,i,h,a.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":835,"../annotations/draw":602}],609:[function(a,b,c){"use strict";function d(a,b){var c=e.subplotsRegistry.gl3d;if(c)for(var d=c.attrRegex,g=Object.keys(a),h=0;h<g.length;h++){var i=g[h];d.test(i)&&(a[i].annotations||[]).length&&(f.pushUnique(b._basePlotModules,c),f.pushUnique(b._subplots.gl3d,i))}}var e=a("../../registry"),f=a("../../lib");b.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),includeBasePlot:d,convert:a("./convert"),draw:a("./draw")}},{"../../lib":738,"../../registry":861,"./attributes":605,"./convert":606,"./defaults":607,"./draw":608}],610:[function(a,b,c){"use strict";b.exports=a("world-calendars/dist/main"),a("world-calendars/dist/plus"),a("world-calendars/dist/calendars/chinese"),a("world-calendars/dist/calendars/coptic"),a("world-calendars/dist/calendars/discworld"),a("world-calendars/dist/calendars/ethiopian"),a("world-calendars/dist/calendars/hebrew"),a("world-calendars/dist/calendars/islamic"),a("world-calendars/dist/calendars/julian"),a("world-calendars/dist/calendars/mayan"),a("world-calendars/dist/calendars/nanakshahi"),a("world-calendars/dist/calendars/nepali"),a("world-calendars/dist/calendars/persian"),a("world-calendars/dist/calendars/taiwan"),a("world-calendars/dist/calendars/thai"),a("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":576,"world-calendars/dist/calendars/coptic":577,"world-calendars/dist/calendars/discworld":578,"world-calendars/dist/calendars/ethiopian":579,"world-calendars/dist/calendars/hebrew":580,"world-calendars/dist/calendars/islamic":581,"world-calendars/dist/calendars/julian":582,"world-calendars/dist/calendars/mayan":583,"world-calendars/dist/calendars/nanakshahi":584,"world-calendars/dist/calendars/nepali":585,"world-calendars/dist/calendars/persian":586,"world-calendars/dist/calendars/taiwan":587,"world-calendars/dist/calendars/thai":588,"world-calendars/dist/calendars/ummalqura":589,"world-calendars/dist/main":590,"world-calendars/dist/plus":591}],611:[function(a,b,c){"use strict";function d(a,b,c){for(var d,f,g,h,i,j=Math.floor((b+.05)/l)+k,m=e(c).fromJD(j),n=0;-1!==(n=a.indexOf("%",n));)d=a.charAt(n+1),"0"===d||"-"===d||"_"===d?(g=3,f=a.charAt(n+2),"_"===d&&(d="-")):(f=d,d="0",g=2),h=t[f],h?(i=h===s?s:m.formatDate(h[d]),a=a.substr(0,n)+i+a.substr(n+g),n+=i.length):n+=g;return a}function e(a){var b=u[a];return b?b:b=u[a]=h.instance(a)}function f(a){return i.extendFlat({},m,{description:a})}function g(a){return"Sets the calendar system to use with `"+a+"` date data."}var h=a("./calendars"),i=a("../../lib"),j=a("../../constants/numerical"),k=j.EPOCHJD,l=j.ONEDAY,m={valType:"enumerated",values:Object.keys(h.calendars),editType:"calc",dflt:"gregorian"},n=function(a,b,c,d){var e={};return e[c]=m,i.coerce(a,b,e,c,d)},o=function(a,b,c,d){for(var e=0;e<c.length;e++)n(a,b,c[e]+"calendar",d.calendar)},p={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},q={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},r={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",t={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},u={},v={xcalendar:f(g("x"))},w=i.extendFlat({},v,{ycalendar:f(g("y"))}),x=i.extendFlat({},w,{zcalendar:f(g("z"))}),y=f(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));b.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:w,bar:w,box:w,heatmap:w,contour:w,histogram:w,histogram2d:w,histogram2dcontour:w,scatter3d:x,surface:x,mesh3d:x,scattergl:w,ohlc:v,candlestick:v},layout:{calendar:f(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:y},yaxis:{calendar:y},scene:{xaxis:{calendar:y},yaxis:{calendar:y},zaxis:{calendar:y}}},transforms:{filter:{valuecalendar:f(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:f(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:m,handleDefaults:n,handleTraceDefaults:o,CANONICAL_SUNDAY:q,CANONICAL_TICK:p,DFLTRANGE:r,getCal:e,worldCalFmt:d}},{"../../constants/numerical":717,"../../lib":738,"./calendars":610}],612:[function(a,b,c){"use strict";c.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c.defaultLine="#444",c.lightLine="#eee",c.background="#fff",c.borderLine="#BEC8D9",c.lightFraction=1e3/11},{}],613:[function(a,b,c){"use strict";function d(a){if(f(a)||"string"!=typeof a)return a;var b=a.trim();if("rgb"!==b.substr(0,3))return a;var c=b.match(/^rgba?\s*\(([^()]*)\)$/);if(!c)return a;var d=c[1].trim().split(/\s*[\s,]\s*/),e="a"===b.charAt(3)&&4===d.length;if(!e&&3!==d.length)return a;for(var g=0;g<d.length;g++){if(!d[g].length)return a;if(d[g]=Number(d[g]),!(d[g]>=0))return a;if(3===g)d[g]>1&&(d[g]=1);else if(d[g]>=1)return a}var h=Math.round(255*d[0])+", "+Math.round(255*d[1])+", "+Math.round(255*d[2]);return e?"rgba("+h+", "+d[3]+")":"rgb("+h+")"}var e=a("tinycolor2"),f=a("fast-isnumeric"),g=b.exports={},h=a("./attributes");g.defaults=h.defaults;var i=g.defaultLine=h.defaultLine;g.lightLine=h.lightLine;var j=g.background=h.background;g.tinyRGB=function(a){var b=a.toRgb();return"rgb("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+")"},g.rgb=function(a){return g.tinyRGB(e(a))},g.opacity=function(a){return a?e(a).getAlpha():0},g.addOpacity=function(a,b){var c=e(a).toRgb();return"rgba("+Math.round(c.r)+", "+Math.round(c.g)+", "+Math.round(c.b)+", "+b+")"},g.combine=function(a,b){var c=e(a).toRgb();if(1===c.a)return e(a).toRgbString();var d=e(b||j).toRgb(),f=1===d.a?d:{r:255*(1-d.a)+d.r*d.a,g:255*(1-d.a)+d.g*d.a,b:255*(1-d.a)+d.b*d.a},g={r:f.r*(1-c.a)+c.r*c.a,g:f.g*(1-c.a)+c.g*c.a,b:f.b*(1-c.a)+c.b*c.a};return e(g).toRgbString()},g.contrast=function(a,b,c){var d=e(a);1!==d.getAlpha()&&(d=e(g.combine(a,j)));var f=d.isDark()?b?d.lighten(b):j:c?d.darken(c):i;return f.toString()},g.stroke=function(a,b){var c=e(b);a.style({stroke:g.tinyRGB(c),"stroke-opacity":c.getAlpha()})},g.fill=function(a,b){var c=e(b);a.style({fill:g.tinyRGB(c),"fill-opacity":c.getAlpha()})},g.clean=function(a){if(a&&"object"==typeof a){var b,c,e,f,h=Object.keys(a);for(b=0;b<h.length;b++)if(e=h[b],f=a[e],"color"===e.substr(e.length-5))if(Array.isArray(f))for(c=0;c<f.length;c++)f[c]=d(f[c]);else a[e]=d(f);else if("colorscale"===e.substr(e.length-10)&&Array.isArray(f))for(c=0;c<f.length;c++)Array.isArray(f[c])&&(f[c][1]=d(f[c][1]));else if(Array.isArray(f)){var i=f[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(c=0;c<f.length;c++)g.clean(f[c])}else f&&"object"==typeof f&&g.clean(f)}}},{"./attributes":612,"fast-isnumeric":132,tinycolor2:543}],614:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/layout_attributes"),e=a("../../plots/font_attributes"),f=a("../../lib/extend").extendFlat,g=a("../../plot_api/edit_types").overrideAll;b.exports=g({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:f({},d.ticks,{dflt:""}),ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:e({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,showexponent:d.showexponent,title:{valType:"string"},titlefont:e({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root")},{"../../lib/extend":727,"../../plot_api/edit_types":769,"../../plots/cartesian/layout_attributes":797,"../../plots/font_attributes":810}],615:[function(a,b,c){"use strict";b.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],616:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/tick_value_defaults"),f=a("../../plots/cartesian/tick_mark_defaults"),g=a("../../plots/cartesian/tick_label_defaults"),h=a("./attributes");b.exports=function(a,b,c){function i(a,b){return d.coerce(k,j,h,a,b)}var j=b.colorbar={},k=a.colorbar||{},l=i("thicknessmode");i("thickness","fraction"===l?30/(c.width-c.margin.l-c.margin.r):30);var m=i("lenmode");i("len","fraction"===m?1:c.height-c.margin.t-c.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),d.noneOrAll(k,j,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor"),e(k,j,i,"linear"),g(k,j,i,"linear",{outerTicks:!1,font:c.font,noHover:!0}),f(k,j,i,"linear",{outerTicks:!1,font:c.font,noHover:!0}),i("title",c._dfltTitle.colorbar),d.coerceFont(i,"titlefont",c.font),i("titleside")}},{"../../lib":738,"../../plots/cartesian/tick_label_defaults":804,"../../plots/cartesian/tick_mark_defaults":805,"../../plots/cartesian/tick_value_defaults":806,"./attributes":614}],617:[function(a,b,c){"use strict";var d=a("d3"),e=a("tinycolor2"),f=a("../../plotly"),g=a("../../plots/plots"),h=a("../../registry"),i=a("../../plots/cartesian/axes"),j=a("../dragelement"),k=a("../../lib"),l=a("../../lib/extend").extendFlat,m=a("../../lib/setcursor"),n=a("../drawing"),o=a("../color"),p=a("../titles"),q=a("../../lib/svg_text_utils"),r=a("../../constants/alignment").LINE_SPACING,s=a("../../plots/cartesian/axis_defaults"),t=a("../../plots/cartesian/position_defaults"),u=a("../../plots/cartesian/layout_attributes"),v=a("./attributes"),w=a("./constants").cn;b.exports=function(a,b){function c(){function v(a,b){return k.coerce(ca,da,u,a,b)}function z(){if(-1!==["top","bottom"].indexOf(y.titleside)){var b=ja.select(".cbtitle"),c=b.select("text"),f=[-y.outlinewidth/2,y.outlinewidth/2],g=b.select(".h"+da._id+"title-math-group").node(),h=15.6;if(c.node()&&(h=parseInt(c.node().style.fontSize,10)*r),g?(la=n.bBox(g).height,la>h&&(f[1]-=(la-h)/2)):c.node()&&!c.classed(w.jsPlaceholder)&&(la=n.bBox(c.node()).height),la){if(la+=5,"top"===y.titleside)da.domain[1]-=la/D.h,f[1]*=-1;else{da.domain[0]+=la/D.h;var j=q.lineCount(c);f[1]+=(1-j)*h}b.attr("transform","translate("+f+")"),da.setScale()}}ja.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(D.h*(1-da.domain[1]))+")"),da._axislayer.attr("transform","translate(0,"+Math.round(-D.t)+")");var l=ja.select(".cbfills").selectAll("rect.cbfill").data(I);l.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),l.exit().remove(),l.each(function(a,b){var c=[0===b?G[0]:(I[b]+I[b-1])/2,b===I.length-1?G[1]:(I[b]+I[b+1])/2].map(da.c2p).map(Math.round);b!==I.length-1&&(c[1]+=c[1]>c[0]?1:-1);var f=K(a).replace("e-",""),g=e(f).toHexString();d.select(this).attr({x:Z,width:Math.max(S,2),y:d.min(c),height:Math.max(d.max(c)-d.min(c),2),fill:g})});var m=ja.select(".cblines").selectAll("path.cbline").data(y.line.color&&y.line.width?H:[]);return m.enter().append("path").classed(w.cbline,!0),m.exit().remove(),m.each(function(a){d.select(this).attr("d","M"+Z+","+(Math.round(da.c2p(a))+y.line.width/2%1)+"h"+S).call(n.lineGroupStyle,y.line.width,J(a),y.line.dash)}),da._axislayer.selectAll("g."+da._id+"tick,path").remove(),da._pos=Z+S+(y.outlinewidth||0)/2-("outside"===y.ticks?1:0),da.side="right",k.syncOrAsync([function(){return i.doTicks(a,da,!0)},function(){if(-1===["top","bottom"].indexOf(y.titleside)){var b=da.titlefont.size,c=da._offset+da._length/2,e=D.l+(da.position||0)*D.w+("right"===da.side?10+b*(da.showticklabels?1:.5):-10-b*(da.showticklabels?.5:0));A("h"+da._id+"title",{avoid:{selection:d.select(a).selectAll("g."+da._id+"tick"),side:y.titleside,offsetLeft:D.l,offsetTop:0,maxShift:C.width},attributes:{x:e,y:c,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function A(b,c){var d,e=x();d=h.traceIs(e,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var f={propContainer:da,propName:d,traceIndex:e.index,placeholder:C._dfltTitle.colorbar,containerGroup:ja.select(".cbtitle")},g="h"===b.charAt(0)?b.substr(1):"h"+b;ja.selectAll("."+g+",."+g+"-math-group").remove(),p.draw(a,b,l(f,c||{}))}function B(){var c=S+y.outlinewidth/2+n.bBox(da._axislayer.node()).width;if(P=ka.select("text"),P.node()&&!P.classed(w.jsPlaceholder)){var d,e=ka.select(".h"+da._id+"title-math-group").node();d=e&&-1!==["top","bottom"].indexOf(y.titleside)?n.bBox(e).width:n.bBox(ka.node()).right-Z-D.l,c=Math.max(c,d)}var f=2*y.xpad+c+y.borderwidth+y.outlinewidth/2,h=aa-ba;ja.select(".cbbg").attr({x:Z-y.xpad-(y.borderwidth+y.outlinewidth)/2,y:ba-X,width:Math.max(f,2),height:Math.max(h+2*X,2)}).call(o.fill,y.bgcolor).call(o.stroke,y.bordercolor).style({"stroke-width":y.borderwidth}),ja.selectAll(".cboutline").attr({x:Z,y:ba+y.ypad+("top"===y.titleside?la:0),width:Math.max(S,2),height:Math.max(h-2*y.ypad-la,2)}).call(o.stroke,y.outlinecolor).style({fill:"None","stroke-width":y.outlinewidth});var i=({center:.5,right:1}[y.xanchor]||0)*f;ja.attr("transform","translate("+(D.l-i)+","+D.t+")"),g.autoMargin(a,b,{x:y.x,y:y.y,l:f*({right:1,center:.5}[y.xanchor]||0),r:f*({left:1,center:.5}[y.xanchor]||0),t:h*({bottom:1,middle:.5}[y.yanchor]||0),b:h*({top:1,middle:.5}[y.yanchor]||0)})}var C=a._fullLayout,D=C._size;if("function"!=typeof y.fillcolor&&"function"!=typeof y.line.color)return void C._infolayer.selectAll("g."+b).remove();var E,F,G=d.extent(("function"==typeof y.fillcolor?y.fillcolor:y.line.color).domain()),H=[],I=[],J="function"==typeof y.line.color?y.line.color:function(){return y.line.color},K="function"==typeof y.fillcolor?y.fillcolor:function(){return y.fillcolor},L=y.levels.end+y.levels.size/100,M=y.levels.size,N=1.001*G[0]-.001*G[1],O=1.001*G[1]-.001*G[0];for(F=0;1e5>F&&(E=y.levels.start+F*M,!(M>0?E>=L:L>=E));F++)E>N&&O>E&&H.push(E);if("function"==typeof y.fillcolor)if(y.filllevels)for(L=y.filllevels.end+y.filllevels.size/100,M=y.filllevels.size,F=0;1e5>F&&(E=y.filllevels.start+F*M,!(M>0?E>=L:L>=E));F++)E>G[0]&&E<G[1]&&I.push(E);else I=H.map(function(a){return a-y.levels.size/2}),I.push(I[I.length-1]+y.levels.size);else y.fillcolor&&"string"==typeof y.fillcolor&&(I=[0]);y.levels.size<0&&(H.reverse(),I.reverse());var P,Q=C.height-C.margin.t-C.margin.b,R=C.width-C.margin.l-C.margin.r,S=Math.round(y.thickness*("fraction"===y.thicknessmode?R:1)),T=S/D.w,U=Math.round(y.len*("fraction"===y.lenmode?Q:1)),V=U/D.h,W=y.xpad/D.w,X=(y.borderwidth+y.outlinewidth)/2,Y=y.ypad/D.h,Z=Math.round(y.x*D.w+y.xpad),$=y.x-T*({middle:.5,right:1}[y.xanchor]||0),_=y.y+V*(({top:-.5,bottom:.5}[y.yanchor]||0)-.5),aa=Math.round(D.h*(1-_)),ba=aa-U,ca={type:"linear",range:G,tickmode:y.tickmode,nticks:y.nticks,tick0:y.tick0,dtick:y.dtick,tickvals:y.tickvals,ticktext:y.ticktext,ticks:y.ticks,ticklen:y.ticklen,tickwidth:y.tickwidth,tickcolor:y.tickcolor,showticklabels:y.showticklabels,tickfont:y.tickfont,tickangle:y.tickangle,tickformat:y.tickformat,exponentformat:y.exponentformat,separatethousands:y.separatethousands,showexponent:y.showexponent,showtickprefix:y.showtickprefix,tickprefix:y.tickprefix,showticksuffix:y.showticksuffix,ticksuffix:y.ticksuffix,title:y.title,titlefont:y.titlefont,showline:!0,anchor:"free",position:1},da={type:"linear",_id:"y"+b},ea={letter:"y",font:C.font,noHover:!0,calendar:C.calendar};if(s(ca,da,v,ea,C),t(ca,da,v,ea),da.position=y.x+W+T,c.axis=da,-1!==["top","bottom"].indexOf(y.titleside)&&(da.titleside=y.titleside,da.titlex=y.x+W,da.titley=_+("top"===y.titleside?V-Y:Y)),y.line.color&&"auto"===y.tickmode){da.tickmode="linear",da.tick0=y.levels.start;var fa=y.levels.size,ga=k.constrain((aa-ba)/50,4,15)+1,ha=(G[1]-G[0])/((y.nticks||ga)*fa);if(ha>1){var ia=Math.pow(10,Math.floor(Math.log(ha)/Math.LN10));fa*=ia*k.roundUp(ha/ia,[2,5,10]),(Math.abs(y.levels.start)/y.levels.size+1e-6)%1<2e-6&&(da.tick0=0)}da.dtick=fa}da.domain=[_+Y,_+V-Y],da.setScale();var ja=C._infolayer.selectAll("g."+b).data([0]);ja.enter().append("g").classed(b,!0).classed(w.colorbar,!0).each(function(){var a=d.select(this);a.append("rect").classed(w.cbbg,!0),a.append("g").classed(w.cbfills,!0),a.append("g").classed(w.cblines,!0),a.append("g").classed(w.cbaxis,!0).classed(w.crisp,!0),a.append("g").classed(w.cbtitleunshift,!0).append("g").classed(w.cbtitle,!0),a.append("rect").classed(w.cboutline,!0),a.select(".cbtitle").datum(0)}),ja.attr("transform","translate("+Math.round(D.l)+","+Math.round(D.t)+")");var ka=ja.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(D.l)+",-"+Math.round(D.t)+")");da._axislayer=ja.select(".cbaxis");var la=0;if(-1!==["top","bottom"].indexOf(y.titleside)){var ma,na=D.l+(y.x+W)*D.w,oa=da.titlefont.size;ma="top"===y.titleside?(1-(_+V-Y))*D.h+D.t+3+.75*oa:(1-(_+Y))*D.h+D.t-3-.25*oa,A(da._id+"title",{attributes:{x:na,y:ma,"text-anchor":"start"}})}var pa=k.syncOrAsync([g.previousPromises,z,g.previousPromises,B],a);if(pa&&pa.then&&(a._promises||[]).push(pa),a._context.edits.colorbarPosition){var qa,ra,sa;j.init({element:ja.node(),gd:a,prepFn:function(){qa=ja.attr("transform"),m(ja)},moveFn:function(a,b){ja.attr("transform",qa+" translate("+a+","+b+")"),ra=j.align($+a/D.w,T,0,1,y.xanchor),sa=j.align(_-b/D.h,V,0,1,y.yanchor);var c=j.getCursor(ra,sa,y.xanchor,y.yanchor);m(ja,c)},doneFn:function(){m(ja),void 0!==ra&&void 0!==sa&&f.restyle(a,{"colorbar.x":ra,"colorbar.y":sa},x().index)}})}return pa}function x(){var c,d,e=b.substr(2);for(c=0;c<a._fullData.length;c++)if(d=a._fullData[c],d.uid===e)return d}var y={};return Object.keys(v).forEach(function(a){y[a]=null}),y.fillcolor=null,y.line={color:null,width:null,dash:null},y.levels={start:null,end:null,size:null},y.filllevels=null,Object.keys(y).forEach(function(a){c[a]=function(b){return arguments.length?(y[a]=k.isPlainObject(y[a])?k.extendFlat(y[a],b):b,c):y[a]}}),c.options=function(a){return Object.keys(a).forEach(function(b){"function"==typeof c[b]&&c[b](a[b])}),c},c._opts=y,c}},{"../../constants/alignment":711,"../../lib":738,"../../lib/extend":727,"../../lib/setcursor":757,"../../lib/svg_text_utils":761,"../../plotly":780,"../../plots/cartesian/axes":785,"../../plots/cartesian/axis_defaults":787,"../../plots/cartesian/layout_attributes":797,"../../plots/cartesian/position_defaults":800,"../../plots/plots":846,"../../registry":861,"../color":613,"../dragelement":635,"../drawing":638,"../titles":704,"./attributes":614,"./constants":615,d3:123,tinycolor2:543}],618:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a){return d.isPlainObject(a.colorbar)}},{"../../lib":738}],619:[function(a,b,c){"use strict";b.exports={zauto:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0}},zmin:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},zmax:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},colorscale:{valType:"colorscale",editType:"calc",impliedEdits:{autocolorscale:!1}},autocolorscale:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0}},reversescale:{valType:"boolean",dflt:!1,editType:"calc"},showscale:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],620:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./scales"),f=a("./flip_scale");b.exports=function(a,b,c,g){var h,i;c?(h=d.nestedProperty(a,c).get(),i=d.nestedProperty(a._input,c).get()):(h=a,i=a._input);var j=g+"auto",k=g+"min",l=g+"max",m=h[j],n=h[k],o=h[l],p=h.colorscale;(m!==!1||void 0===n)&&(n=d.aggNums(Math.min,null,b)),(m!==!1||void 0===o)&&(o=d.aggNums(Math.max,null,b)),n===o&&(n-=.5,o+=.5),h[k]=n,h[l]=o,i[k]=n,i[l]=o,i[j]=m!==!1||void 0===n&&void 0===o,h.autocolorscale&&(p=0>n*o?e.RdBu:n>=0?e.Reds:e.Blues,i.colorscale=p,h.reversescale&&(p=f(p)),h.colorscale=p)}},{"../../lib":738,"./flip_scale":625,"./scales":632}],621:[function(a,b,c){"use strict";var d=a("./attributes"),e=a("../../lib/extend").extendFlat;a("./scales.js");b.exports=function(a,b,c){return{color:{valType:"color",arrayOk:!0,editType:b||"style"},colorscale:e({},d.colorscale,{}),cauto:e({},d.zauto,{impliedEdits:{cmin:void 0,cmax:void 0}}),cmax:e({},d.zmax,{editType:b||d.zmax.editType,impliedEdits:{cauto:!1}}),cmin:e({},d.zmin,{editType:b||d.zmin.editType,impliedEdits:{cauto:!1}}),autocolorscale:e({},d.autocolorscale,{dflt:c===!1?c:d.autocolorscale.dflt}),reversescale:e({},d.reversescale,{})}}},{"../../lib/extend":727,"./attributes":619,"./scales.js":632}],622:[function(a,b,c){"use strict";var d=a("./scales");b.exports=d.RdBu},{"./scales":632}],623:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../colorbar/has_colorbar"),g=a("../colorbar/defaults"),h=a("./is_valid_scale"),i=a("./flip_scale");b.exports=function(a,b,c,j,k){var l=k.prefix,m=k.cLetter,n=l.slice(0,l.length-1),o=l?e.nestedProperty(a,n).get()||{}:a,p=l?e.nestedProperty(b,n).get()||{}:b,q=o[m+"min"],r=o[m+"max"],s=o.colorscale,t=d(q)&&d(r)&&r>q;j(l+m+"auto",!t),j(l+m+"min"),j(l+m+"max");var u;void 0!==s&&(u=!h(s)),j(l+"autocolorscale",u);var v=j(l+"colorscale"),w=j(l+"reversescale");if(w&&(p.colorscale=i(v)),"marker.line."!==l){var x;l&&(x=f(o));var y=j(l+"showscale",x);y&&g(o,p,c)}}},{"../../lib":738,"../colorbar/defaults":616,"../colorbar/has_colorbar":618,"./flip_scale":625,"./is_valid_scale":629,"fast-isnumeric":132}],624:[function(a,b,c){"use strict";b.exports=function(a,b,c){for(var d=a.length,e=new Array(d),f=new Array(d),g=0;d>g;g++){var h=a[g];e[g]=b+h[0]*(c-b),f[g]=h[1]}return{domain:e,range:f}}},{}],625:[function(a,b,c){"use strict";b.exports=function(a){for(var b,c=a.length,d=new Array(c),e=c-1,f=0;e>=0;e--,f++)b=a[e],d[f]=[1-b[0],b[1]];return d}},{}],626:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./default_scale"),f=a("./is_valid_scale_array");b.exports=function(a,b){function c(){try{a=d[a]||JSON.parse(a)}catch(c){a=b}}return b||(b=e),a?("string"==typeof a&&(c(),"string"==typeof a&&c()),f(a)?a:b):b}},{"./default_scale":622,"./is_valid_scale_array":630,"./scales":632}],627:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("./is_valid_scale");b.exports=function(a,b){var c=b?e.nestedProperty(a,b).get()||{}:a,g=c.color,h=!1;if(Array.isArray(g))for(var i=0;i<g.length;i++)if(d(g[i])){h=!0;break}return e.isPlainObject(c)&&(h||c.showscale===!0||d(c.cmin)&&d(c.cmax)||f(c.colorscale)||e.isPlainObject(c.colorbar))}},{"../../lib":738,"./is_valid_scale":629,"fast-isnumeric":132}],628:[function(a,b,c){"use strict";c.scales=a("./scales"),c.defaultScale=a("./default_scale"),c.attributes=a("./attributes"),c.handleDefaults=a("./defaults"),
c.calc=a("./calc"),c.hasColorscale=a("./has_colorscale"),c.isValidScale=a("./is_valid_scale"),c.getScale=a("./get_scale"),c.flipScale=a("./flip_scale"),c.extractScale=a("./extract_scale"),c.makeColorScaleFunc=a("./make_color_scale_func")},{"./attributes":619,"./calc":620,"./default_scale":622,"./defaults":623,"./extract_scale":624,"./flip_scale":625,"./get_scale":626,"./has_colorscale":627,"./is_valid_scale":629,"./make_color_scale_func":631,"./scales":632}],629:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./is_valid_scale_array");b.exports=function(a){return void 0!==d[a]?!0:e(a)}},{"./is_valid_scale_array":630,"./scales":632}],630:[function(a,b,c){"use strict";var d=a("tinycolor2");b.exports=function(a){var b=0;if(!Array.isArray(a)||a.length<2)return!1;if(!a[0]||!a[a.length-1])return!1;if(0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var c=0;c<a.length;c++){var e=a[c];if(2!==e.length||+e[0]<b||!d(e[1]).isValid())return!1;b=+e[0]}return!0}},{tinycolor2:543}],631:[function(a,b,c){"use strict";function d(a){var b={r:a[0],g:a[1],b:a[2],a:a[3]};return f(b).toRgbString()}var e=a("d3"),f=a("tinycolor2"),g=a("fast-isnumeric"),h=a("../color");b.exports=function(a,b){b=b||{};for(var c=a.domain,i=a.range,j=i.length,k=new Array(j),l=0;j>l;l++){var m=f(i[l]).toRgb();k[l]=[m.r,m.g,m.b,m.a]}var n,o=e.scale.linear().domain(c).range(k).clamp(!0),p=b.noNumericCheck,q=b.returnArray;return n=p&&q?o:p?function(a){return d(o(a))}:q?function(a){return g(a)?o(a):f(a).isValid()?a:h.defaultLine}:function(a){return g(a)?d(o(a)):f(a).isValid()?a:h.defaultLine},n.domain=o.domain,n.range=function(){return i},n}},{"../color":613,d3:123,"fast-isnumeric":132,tinycolor2:543}],632:[function(a,b,c){"use strict";b.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],633:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=(a-c)/(d-c),g=f+b/(d-c),h=(f+g)/2;return"left"===e||"bottom"===e?f:"center"===e||"middle"===e?h:"right"===e||"top"===e?g:2/3-h>f?f:g>4/3-h?g:h}},{}],634:[function(a,b,c){"use strict";var d=a("../../lib"),e=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];b.exports=function(a,b,c,f){return a="left"===c?0:"center"===c?1:"right"===c?2:d.constrain(Math.floor(3*a),0,2),b="bottom"===f?0:"middle"===f?1:"top"===f?2:d.constrain(Math.floor(3*b),0,2),e[b][a]}},{"../../lib":738}],635:[function(a,b,c){"use strict";function d(){var a=document.createElement("div");a.className="dragcover";var b=a.style;return b.position="fixed",b.left=0,b.right=0,b.top=0,b.bottom=0,b.zIndex=999999999,b.background="none",document.body.appendChild(a),a}function e(a){a._dragging=!1,a._replotPending&&i.plot(a)}function f(a){return g(a.changedTouches?a.changedTouches[0]:a,document.body)}var g=a("mouse-event-offset"),h=a("has-hover"),i=a("../../plotly"),j=a("../../lib"),k=a("../../plots/cartesian/constants"),l=a("../../constants/interactions"),m=b.exports={};m.align=a("./align"),m.getCursor=a("./cursor");var n=a("./unhover");m.unhover=n.wrapped,m.unhoverRaw=n.raw,m.init=function(a){function b(b){u._dragged=!1,u._dragging=!0;var e=f(b);return i=e[0],n=e[1],s=b.target,r=b,t=b.buttons&&2===b.buttons||b.ctrlKey,o=(new Date).getTime(),o-u._mouseDownTime<w?v+=1:(v=1,u._mouseDownTime=o),a.prepFn&&a.prepFn(b,i,n),h&&!t?(q=d(),q.style.cursor=window.getComputedStyle(x).cursor):h||(q=document,p=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor),document.addEventListener("mousemove",c),document.addEventListener("mouseup",g),document.addEventListener("touchmove",c),document.addEventListener("touchend",g),j.pauseEvent(b)}function c(b){var c=f(b),d=c[0]-i,e=c[1]-n,g=a.minDrag||k.MINDRAG;return Math.abs(d)<g&&(d=0),Math.abs(e)<g&&(e=0),(d||e)&&(u._dragged=!0,m.unhover(u)),u._dragged&&a.moveFn&&!t&&a.moveFn(d,e),j.pauseEvent(b)}function g(b){if(document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",g),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",g),h?j.removeElement(q):p&&(q.documentElement.style.cursor=p,p=null),!u._dragging)return void(u._dragged=!1);if(u._dragging=!1,(new Date).getTime()-u._mouseDownTime>w&&(v=Math.max(v-1,1)),u._dragged)a.doneFn&&a.doneFn(b);else if(a.clickFn&&a.clickFn(v,r),!t){var d;try{d=new MouseEvent("click",b)}catch(i){var k=f(b);d=document.createEvent("MouseEvents"),d.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,k[0],k[1],b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}s.dispatchEvent(d)}return e(u),u._dragged=!1,j.pauseEvent(b)}var i,n,o,p,q,r,s,t,u=a.gd,v=1,w=l.DBLCLICKDELAY,x=a.element;u._mouseDownTime||(u._mouseDownTime=0),x.style.pointerEvents="all",x.onmousedown=b,x.ontouchstart=b},m.coverSlip=d},{"../../constants/interactions":716,"../../lib":738,"../../plotly":780,"../../plots/cartesian/constants":790,"./align":633,"./cursor":634,"./unhover":636,"has-hover":289,"mouse-event-offset":454}],636:[function(a,b,c){"use strict";var d=a("../../lib/events"),e=a("../../lib/throttle"),f=a("../../lib/get_graph_div"),g=a("../fx/constants"),h=b.exports={};h.wrapped=function(a,b,c){a=f(a),e.clear(a._fullLayout._uid+g.HOVERID),h.raw(a,b,c)},h.raw=function(a,b){var c=a._fullLayout,e=a._hoverdata;b||(b={}),b.target&&d.triggerHandler(a,"plotly_beforehover",b)===!1||(c._hoverlayer.selectAll("g").remove(),c._hoverlayer.selectAll("line").remove(),c._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,b.target&&e&&a.emit("plotly_unhover",{event:b,points:e}))}},{"../../lib/events":726,"../../lib/get_graph_div":733,"../../lib/throttle":762,"../fx/constants":650}],637:[function(a,b,c){"use strict";c.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],638:[function(a,b,c){"use strict";function d(a,b){var c=a%100;return x.symbolFuncs[c](b)+(a>=200?A:"")}function e(a,b,c,e,f,g,h,i){if(m.traceIs(c,"symbols")){var j=w(c);b.attr("d",function(a){var b;b="various"===a.ms||"various"===g.size?3:v.isBubble(c)?j(a.ms):(g.size||6)/2,a.mrc=b;var e=x.symbolNumber(a.mx||g.symbol)||0;return a.om=e%200>=100,d(e,b)})}b.style("opacity",function(a){return(a.mo+1||g.opacity+1)-1});var k,l,o,p=!1;if(a.so?(o=h.outlierwidth,l=h.outliercolor,k=g.outliercolor):(o=(a.mlw+1||h.width+1||(a.trace?a.trace.marker.line.width:0)+1)-1,l="mlc"in a?a.mlcc=f(a.mlc):Array.isArray(h.color)?n.defaultLine:h.color,Array.isArray(g.color)&&(k=n.defaultLine,p=!0),k="mc"in a?a.mcc=e(a.mc):g.color||"rgba(0,0,0,0)"),a.om)b.call(n.stroke,k).style({"stroke-width":(o||1)+"px",fill:"none"});else{b.style("stroke-width",o+"px");var q=g.gradient,r=a.mgt;if(r?p=!0:r=q&&q.type,r&&"none"!==r){var s=a.mgc;s?p=!0:s=q.color;var t="g"+i._fullLayout._uid+"-"+c.uid;p&&(t+="-"+a.i),b.call(x.gradient,i,t,r,k,s)}else b.call(n.fill,k);o&&b.call(n.stroke,l)}}function f(a,b,c,d){var e=j.select(a.node().parentNode),f=-1!==b.indexOf("top")?"top":-1!==b.indexOf("bottom")?"bottom":"middle",g=-1!==b.indexOf("left")?"end":-1!==b.indexOf("right")?"start":"middle",h=d?d/.8+1:0,i=(q.lineCount(a)-1)*t+1,k=D[g]*h,l=.75*c+D[f]*h+(D[f]-1)*i*c/2;a.attr("text-anchor",g),e.attr("transform","translate("+k+","+l+")")}function g(a,b){var c=a.ts||b.textfont.size;return k(c)&&c>0?c:0}function h(a,b,c,d){var e=a[0]-b[0],f=a[1]-b[1],g=c[0]-b[0],h=c[1]-b[1],i=Math.pow(e*e+f*f,E/2),k=Math.pow(g*g+h*h,E/2),l=(k*k*e-i*i*g)*d,m=(k*k*f-i*i*h)*d,n=3*k*(i+k),o=3*i*(i+k);return[[j.round(b[0]+(n&&l/n),2),j.round(b[1]+(n&&m/n),2)],[j.round(b[0]-(o&&l/o),2),j.round(b[1]-(o&&m/o),2)]]}function i(a){var b=a.getAttribute("data-unformatted");if(null!==b)return b+a.getAttribute("data-math")+a.getAttribute("text-anchor")+a.getAttribute("style")}var j=a("d3"),k=a("fast-isnumeric"),l=a("tinycolor2"),m=a("../../registry"),n=a("../color"),o=a("../colorscale"),p=a("../../lib"),q=a("../../lib/svg_text_utils"),r=a("../../constants/xmlns_namespaces"),s=a("../../constants/alignment"),t=s.LINE_SPACING,u=a("../../constants/interactions").DESELECTDIM,v=a("../../traces/scatter/subtypes"),w=a("../../traces/scatter/make_bubble_size_func"),x=b.exports={};x.font=function(a,b,c,d){p.isPlainObject(b)&&(d=b.color,c=b.size,b=b.family),b&&a.style("font-family",b),c+1&&a.style("font-size",c+"px"),d&&a.call(n.fill,d)},x.setPosition=function(a,b,c){a.attr("x",b).attr("y",c)},x.setSize=function(a,b,c){a.attr("width",b).attr("height",c)},x.setRect=function(a,b,c,d,e){a.call(x.setPosition,b,c).call(x.setSize,d,e)},x.translatePoint=function(a,b,c,d){var e=c.c2p(a.x),f=d.c2p(a.y);return k(e)&&k(f)&&b.node()?("text"===b.node().nodeName?b.attr("x",e).attr("y",f):b.attr("transform","translate("+e+","+f+")"),!0):!1},x.translatePoints=function(a,b,c){a.each(function(a){var d=j.select(this);x.translatePoint(a,d,b,c)})},x.hideOutsideRangePoint=function(a,b,c,d,e,f){b.attr("display",c.isPtWithinRange(a,e)&&d.isPtWithinRange(a,f)?null:"none")},x.hideOutsideRangePoints=function(a,b){if(b._hasClipOnAxisFalse){var c=b.xaxis,d=b.yaxis;a.each(function(b){var e=b[0].trace,f=e.xcalendar,g=e.ycalendar;a.selectAll(".point,.textpoint").each(function(a){x.hideOutsideRangePoint(a,j.select(this),c,d,f,g)})})}},x.crispRound=function(a,b,c){return b&&k(b)?a._context.staticPlot?b:1>b?1:Math.round(b):c||0},x.singleLineStyle=function(a,b,c,d,e){b.style("fill","none");var f=(((a||[])[0]||{}).trace||{}).line||{},g=c||f.width||0,h=e||f.dash||"";n.stroke(b,d||f.color),x.dashLine(b,h,g)},x.lineGroupStyle=function(a,b,c,d){a.style("fill","none").each(function(a){var e=(((a||[])[0]||{}).trace||{}).line||{},f=b||e.width||0,g=d||e.dash||"";j.select(this).call(n.stroke,c||e.color).call(x.dashLine,g,f)})},x.dashLine=function(a,b,c){c=+c||0,b=x.dashStyle(b,c),a.style({"stroke-dasharray":b,"stroke-width":c+"px"})},x.dashStyle=function(a,b){b=+b||1;var c=Math.max(b,3);return"solid"===a?a="":"dot"===a?a=c+"px,"+c+"px":"dash"===a?a=3*c+"px,"+3*c+"px":"longdash"===a?a=5*c+"px,"+5*c+"px":"dashdot"===a?a=3*c+"px,"+c+"px,"+c+"px,"+c+"px":"longdashdot"===a&&(a=5*c+"px,"+2*c+"px,"+c+"px,"+2*c+"px"),a},x.singleFillStyle=function(a){var b=j.select(a.node()),c=b.data(),d=(((c[0]||[])[0]||{}).trace||{}).fillcolor;d&&a.call(n.fill,d)},x.fillGroupStyle=function(a){a.style("stroke-width",0).each(function(b){var c=j.select(this);try{c.call(n.fill,b[0].trace.fillcolor)}catch(d){p.error(d,a),c.remove()}})};var y=a("./symbol_defs");x.symbolNames=[],x.symbolFuncs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolList=[],Object.keys(y).forEach(function(a){var b=y[a];x.symbolList=x.symbolList.concat([b.n,a,b.n+100,a+"-open"]),x.symbolNames[b.n]=a,x.symbolFuncs[b.n]=b.f,b.needLine&&(x.symbolNeedLines[b.n]=!0),b.noDot?x.symbolNoDot[b.n]=!0:x.symbolList=x.symbolList.concat([b.n+200,a+"-dot",b.n+300,a+"-open-dot"])});var z=x.symbolNames.length,A="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";x.symbolNumber=function(a){if("string"==typeof a){var b=0;a.indexOf("-open")>0&&(b=100,a=a.replace("-open","")),a.indexOf("-dot")>0&&(b+=200,a=a.replace("-dot","")),a=x.symbolNames.indexOf(a),a>=0&&(a+=b)}return a%100>=z||a>=400?0:Math.floor(Math.max(a,0))};var B={x1:1,x2:0,y1:0,y2:0},C={x1:0,x2:0,y1:1,y2:0};x.gradient=function(a,b,c,d,e,f){var g=b._fullLayout._defs.select(".gradients").selectAll("#"+c).data([d+e+f],p.identity);g.exit().remove(),g.enter().append("radial"===d?"radialGradient":"linearGradient").each(function(){var a=j.select(this);"horizontal"===d?a.attr(B):"vertical"===d&&a.attr(C),a.attr("id",c);var b=l(e),g=l(f);a.append("stop").attr({offset:"0%","stop-color":n.tinyRGB(g),"stop-opacity":g.getAlpha()}),a.append("stop").attr({offset:"100%","stop-color":n.tinyRGB(b),"stop-opacity":b.getAlpha()})}),a.style({fill:"url(#"+c+")","fill-opacity":null})},x.initGradients=function(a){var b=a._fullLayout._defs.selectAll(".gradients").data([0]);b.enter().append("g").classed("gradients",!0),b.selectAll("linearGradient,radialGradient").remove()},x.singlePointStyle=function(a,b,c,d,f,g){var h=c.marker;e(a,b,c,d,f,h,h.line,g)},x.pointStyle=function(a,b,c){if(a.size()){var d=b.marker,e=x.tryColorscale(d,""),f=x.tryColorscale(d,"line");a.each(function(a){x.singlePointStyle(a,j.select(this),b,e,f,c)})}},x.selectedPointStyle=function(a,b){if(a.size()&&b.selectedpoints){var c=b.selected||{},e=b.unselected||{},f=b.marker||{},g=c.marker||{},h=e.marker||{},i=f.opacity,k=g.opacity,l=h.opacity,o=void 0!==k,p=void 0!==l;a.each(function(a){var b,c=j.select(this),d=a.mo,e=void 0!==d;(e||o||p)&&(a.selected?o&&(b=k):b=p?l:u*(e?d:i)),void 0!==b&&c.style("opacity",b)});var q=g.color,r=h.color;(q||r)&&a.each(function(a){var b,c=j.select(this);a.selected?q&&(b=q):r&&(b=r),b&&n.fill(c,b)});var s=g.size,t=h.size,v=void 0!==s,w=void 0!==t;m.traceIs(b,"symbols")&&(v||w)&&a.each(function(a){var b,c=j.select(this),e=a.mrc,g=a.mx||f.symbol||0;b=a.selected?v?s/2:e:w?t/2:e,c.attr("d",d(x.symbolNumber(g),b)),a.mrc2=b})}},x.tryColorscale=function(a,b){var c=b?p.nestedProperty(a,b).get():a,d=c.colorscale,e=c.color;return d&&Array.isArray(e)?o.makeColorScaleFunc(o.extractScale(d,c.cmin,c.cmax)):p.identity};var D={start:1,end:-1,middle:0,bottom:1,top:-1};x.textPointStyle=function(a,b,c){a.each(function(a){var d=j.select(this),e=p.extractOption(a,b,"tx","text");if(!e)return void d.remove();var h=a.tp||b.textposition,i=g(a,b);d.call(x.font,a.tf||b.textfont.family,i,a.tc||b.textfont.color).text(e).call(q.convertToTspans,c).call(f,h,i,a.mrc)})},x.selectedTextStyle=function(a,b){if(a.size()&&b.selectedpoints){var c=b.selected||{},d=b.unselected||{};a.each(function(a){var e,h=j.select(this),i=a.tc||b.textfont.color,k=a.tp||b.textposition,l=g(a,b),m=(c.textfont||{}).color,o=(d.textfont||{}).color;a.selected?m&&(e=m):o?e=o:m||(e=n.addOpacity(i,u)),e&&n.fill(h,e),f(h,k,l,a.mrc2||a.mrc)})}};var E=.5;x.smoothopen=function(a,b){if(a.length<3)return"M"+a.join("L");var c,d="M"+a[0],e=[];for(c=1;c<a.length-1;c++)e.push(h(a[c-1],a[c],a[c+1],b));for(d+="Q"+e[0][0]+" "+a[1],c=2;c<a.length-1;c++)d+="C"+e[c-2][1]+" "+e[c-1][0]+" "+a[c];return d+="Q"+e[a.length-3][1]+" "+a[a.length-1]},x.smoothclosed=function(a,b){if(a.length<3)return"M"+a.join("L")+"Z";var c,d="M"+a[0],e=a.length-1,f=[h(a[e],a[0],a[1],b)];for(c=1;e>c;c++)f.push(h(a[c-1],a[c],a[c+1],b));for(f.push(h(a[e-1],a[e],a[0],b)),c=1;e>=c;c++)d+="C"+f[c-1][1]+" "+f[c][0]+" "+a[c];return d+="C"+f[e][1]+" "+f[0][0]+" "+a[0]+"Z"};var F={hv:function(a,b){return"H"+j.round(b[0],2)+"V"+j.round(b[1],2)},vh:function(a,b){return"V"+j.round(b[1],2)+"H"+j.round(b[0],2)},hvh:function(a,b){return"H"+j.round((a[0]+b[0])/2,2)+"V"+j.round(b[1],2)+"H"+j.round(b[0],2)},vhv:function(a,b){return"V"+j.round((a[1]+b[1])/2,2)+"H"+j.round(b[0],2)+"V"+j.round(b[1],2)}},G=function(a,b){return"L"+j.round(b[0],2)+","+j.round(b[1],2)};x.steps=function(a){var b=F[a]||G;return function(a){for(var c="M"+j.round(a[0][0],2)+","+j.round(a[0][1],2),d=1;d<a.length;d++)c+=b(a[d-1],a[d]);return c}},x.makeTester=function(){var a=j.select("body").selectAll("#js-plotly-tester").data([0]);a.enter().append("svg").attr("id","js-plotly-tester").attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var b=a.selectAll(".js-reference-point").data([0]);b.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),x.tester=a,x.testref=b},x.savedBBoxes={};var H=0,I=1e4;x.bBox=function(a,b,c){c||(c=i(a));var d;if(c){if(d=x.savedBBoxes[c])return p.extendFlat({},d)}else if(1===a.childNodes.length){var e=a.childNodes[0];if(c=i(e)){var f=+e.getAttribute("x")||0,g=+e.getAttribute("y")||0,h=e.getAttribute("transform");if(!h){var k=x.bBox(e,!1,c);return f&&(k.left+=f,k.right+=f),g&&(k.top+=g,k.bottom+=g),k}if(c+="~"+f+"~"+g+"~"+h,d=x.savedBBoxes[c])return p.extendFlat({},d)}}var l,m;b?l=a:(m=x.tester.node(),l=a.cloneNode(!0),m.appendChild(l)),j.select(l).attr("transform",null).call(q.positionText,0,0);var n=l.getBoundingClientRect(),o=x.testref.node().getBoundingClientRect();b||m.removeChild(l);var r={height:n.height,width:n.width,left:n.left-o.left,top:n.top-o.top,right:n.right-o.left,bottom:n.bottom-o.top};return H>=I&&(x.savedBBoxes={},H=0),c&&(x.savedBBoxes[c]=r),H++,p.extendFlat({},r)},x.setClipUrl=function(a,b){if(!b)return void a.attr("clip-path",null);var c="#"+b,d=j.select("base");d.size()&&d.attr("href")&&(c=window.location.href.split("#")[0]+c),a.attr("clip-path","url("+c+")")},x.getTranslate=function(a){var b=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,c=a.attr?"attr":"getAttribute",d=a[c]("transform")||"",e=d.replace(b,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},x.setTranslate=function(a,b,c){var d=/(\btranslate\(.*?\);?)/,e=a.attr?"attr":"getAttribute",f=a.attr?"attr":"setAttribute",g=a[e]("transform")||"";return b=b||0,c=c||0,g=g.replace(d,"").trim(),g+=" translate("+b+", "+c+")",g=g.trim(),a[f]("transform",g),g},x.getScale=function(a){var b=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,c=a.attr?"attr":"getAttribute",d=a[c]("transform")||"",e=d.replace(b,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},x.setScale=function(a,b,c){var d=/(\bscale\(.*?\);?)/,e=a.attr?"attr":"getAttribute",f=a.attr?"attr":"setAttribute",g=a[e]("transform")||"";return b=b||1,c=c||1,g=g.replace(d,"").trim(),g+=" scale("+b+", "+c+")",g=g.trim(),a[f]("transform",g),g},x.setPointGroupScale=function(a,b,c){var d,e,f;return b=b||1,c=c||1,e=1===b&&1===c?"":" scale("+b+","+c+")",f=/\s*sc.*/,a.each(function(){d=(this.getAttribute("transform")||"").replace(f,""),d+=e,d=d.trim(),this.setAttribute("transform",d)}),e};var J=/translate\([^)]*\)\s*$/;x.setTextPointsScale=function(a,b,c){a.each(function(){var a,d=j.select(this),e=d.select("text");if(e.node()){var f=parseFloat(e.attr("x")||0),g=parseFloat(e.attr("y")||0),h=(d.attr("transform")||"").match(J);a=1===b&&1===c?[]:["translate("+f+","+g+")","scale("+b+","+c+")","translate("+-f+","+-g+")"],h&&a.push(h),d.attr("transform",a.join(" "))}})}},{"../../constants/alignment":711,"../../constants/interactions":716,"../../constants/xmlns_namespaces":719,"../../lib":738,"../../lib/svg_text_utils":761,"../../registry":861,"../../traces/scatter/make_bubble_size_func":1071,"../../traces/scatter/subtypes":1076,"../color":613,"../colorscale":628,"./symbol_defs":639,d3:123,"fast-isnumeric":132,tinycolor2:543}],639:[function(a,b,c){"use strict";var d=a("d3");b.exports={circle:{n:0,f:function(a){var b=d.round(a,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(a){var b=d.round(.4*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H"+b+"V"+c+"H-"+b+"V"+b+"H-"+c+"V-"+b+"H-"+b+"V-"+c+"H"+b+"V-"+b+"H"+c+"Z"}},x:{n:4,f:function(a){var b=d.round(.8*a/Math.sqrt(2),2),c="l"+b+","+b,e="l"+b+",-"+b,f="l-"+b+",-"+b,g="l-"+b+","+b;return"M0,"+b+c+e+f+e+f+g+f+g+c+g+c+"Z"}},"triangle-up":{n:5,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+b+","+c+"H"+b+"L0,-"+e+"Z"}},"triangle-down":{n:6,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+b+",-"+c+"H"+b+"L0,"+e+"Z"}},"triangle-left":{n:7,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M"+c+",-"+b+"V"+b+"L-"+e+",0Z"}},"triangle-right":{n:8,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+c+",-"+b+"V"+b+"L"+e+",0Z"}},"triangle-ne":{n:9,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+c+",-"+b+"H"+b+"V"+c+"Z"}},"triangle-se":{n:10,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+b+",-"+c+"V"+b+"H-"+c+"Z"}},"triangle-sw":{n:11,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H-"+b+"V-"+c+"Z"}},"triangle-nw":{n:12,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+b+","+c+"V-"+b+"H"+c+"Z"}},pentagon:{n:13,f:function(a){var b=d.round(.951*a,2),c=d.round(.588*a,2),e=d.round(-a,2),f=d.round(a*-.309,2),g=d.round(.809*a,2);return"M"+b+","+f+"L"+c+","+g+"H-"+c+"L-"+b+","+f+"L0,"+e+"Z"}},hexagon:{n:14,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M"+e+",-"+c+"V"+c+"L0,"+b+"L-"+e+","+c+"V-"+c+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M-"+c+","+e+"H"+c+"L"+b+",0L"+c+",-"+e+"H-"+c+"L-"+b+",0Z"}},octagon:{n:16,f:function(a){var b=d.round(.924*a,2),c=d.round(.383*a,2);return"M-"+c+",-"+b+"H"+c+"L"+b+",-"+c+"V"+c+"L"+c+","+b+"H-"+c+"L-"+b+","+c+"V-"+c+"Z"}},star:{n:17,f:function(a){var b=1.4*a,c=d.round(.225*b,2),e=d.round(.951*b,2),f=d.round(.363*b,2),g=d.round(.588*b,2),h=d.round(-b,2),i=d.round(b*-.309,2),j=d.round(.118*b,2),k=d.round(.809*b,2),l=d.round(.382*b,2);return"M"+c+","+i+"H"+e+"L"+f+","+j+"L"+g+","+k+"L0,"+l+"L-"+g+","+k+"L-"+f+","+j+"L-"+e+","+i+"H-"+c+"L0,"+h+"Z"}},hexagram:{n:18,f:function(a){var b=d.round(.66*a,2),c=d.round(.38*a,2),e=d.round(.76*a,2);return"M-"+e+",0l-"+c+",-"+b+"h"+e+"l"+c+",-"+b+"l"+c+","+b+"h"+e+"l-"+c+","+b+"l"+c+","+b+"h-"+e+"l-"+c+","+b+"l-"+c+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M-"+b+","+c+g+b+","+c+g+"0,-"+e+g+"-"+b+","+c+"Z"}},"star-triangle-down":{n:20,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M"+b+",-"+c+g+"-"+b+",-"+c+g+"0,"+e+g+b+",-"+c+"Z"}},"star-square":{n:21,f:function(a){var b=d.round(1.1*a,2),c=d.round(2*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(a){var b=d.round(1.4*a,2),c=d.round(1.9*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(a){var b=d.round(.7*a,2),c=d.round(1.4*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(a){var b=d.round(1.4*a,2),c=d.round(.7*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},hourglass:{n:25,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var b=d.round(a,2),c=d.round(a/Math.sqrt(2),2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var b=d.round(1.3*a,2),c=d.round(.65*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0},"x-thin":{n:34,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},asterisk:{n:35,f:function(a){var b=d.round(1.2*a,2),c=d.round(.85*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0},hash:{n:36,f:function(a){var b=d.round(a/2,2),c=d.round(a,2);return"M"+b+","+c+"V-"+c+"m-"+c+",0V"+c+"M"+c+","+b+"H-"+c+"m0,-"+c+"H"+c},needLine:!0},"y-up":{n:37,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+c+"L0,0"},needLine:!0,noDot:!0},"y-down":{n:38,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+c+"L0,0"},needLine:!0,noDot:!0},"y-left":{n:39,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+c+",0L0,0"},needLine:!0,noDot:!0},"y-right":{n:40,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+c+",0L0,0"},needLine:!0,noDot:!0},"line-ew":{n:41,f:function(a){var b=d.round(1.4*a,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0},"line-ns":{n:42,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0},"line-ne":{n:43,f:function(a){var b=d.round(a,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},"line-nw":{n:44,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0}}},{d3:123}],640:[function(a,b,c){"use strict";b.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],641:[function(a,b,c){"use strict";function d(a,b,c,d){var f=b["error_"+d]||{},i=f.visible&&-1!==["linear","log"].indexOf(c.type),j=[];if(i){for(var k=h(f),l=0;l<a.length;l++){var m=a[l],n=m[d];if(e(c.c2l(n))){var o=k(n,l);if(e(o[0])&&e(o[1])){var p=m[d+"s"]=n-o[0],q=m[d+"h"]=n+o[1];j.push(p,q)}}}g.expand(c,j,{padded:!0})}}var e=a("fast-isnumeric"),f=a("../../registry"),g=a("../../plots/cartesian/axes"),h=a("./compute_error");b.exports=function(a){for(var b=a.calcdata,c=0;c<b.length;c++){var e=b[c],h=e[0].trace;if(f.traceIs(h,"errorBarsOK")){var i=g.getFromId(a,h.xaxis),j=g.getFromId(a,h.yaxis);d(e,h,i,"x"),d(e,h,j,"y")}}}},{"../../plots/cartesian/axes":785,"../../registry":861,"./compute_error":642,"fast-isnumeric":132}],642:[function(a,b,c){"use strict";function d(a,b){return"percent"===a?function(a){return Math.abs(a*b/100)}:"constant"===a?function(){return Math.abs(b)}:"sqrt"===a?function(a){return Math.sqrt(Math.abs(a))}:void 0}b.exports=function(a){var b=a.type,c=a.symmetric;if("data"===b){var e=a.array,f=a.arrayminus;return c||void 0===f?function(a,b){var c=+e[b];return[c,c]}:function(a,b){return[+f[b],+e[b]]}}var g=d(b,a.value),h=d(b,a.valueminus);return c||void 0===a.valueminus?function(a){var b=g(a);return[b,b]}:function(a){return[h(a),g(a)]}}},{}],643:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../registry"),f=a("../../lib"),g=a("./attributes");b.exports=function(a,b,c,h){function i(a,b){return f.coerce(l,k,g,a,b)}var j="error_"+h.axis,k=b[j]={},l=a[j]||{},m=void 0!==l.array||void 0!==l.value||"sqrt"===l.type,n=i("visible",m);if(n!==!1){var o=i("type","array"in l?"data":"percent"),p=!0;if("sqrt"!==o&&(p=i("symmetric",!(("data"===o?"arrayminus":"valueminus")in l))),"data"===o){var q=i("array");if(q||(k.array=[]),i("traceref"),!p){var r=i("arrayminus");r||(k.arrayminus=[]),i("tracerefminus")}}else("percent"===o||"constant"===o)&&(i("value"),p||i("valueminus"));var s="copy_"+h.inherit+"style";if(h.inherit){var t=b["error_"+h.inherit];(t||{}).visible&&i(s,!(l.color||d(l.thickness)||d(l.width)))}h.inherit&&k[s]||(i("color",c),i("thickness"),i("width",e.traceIs(b,"gl3d")?0:4))}}},{"../../lib":738,"../../registry":861,"./attributes":640,"fast-isnumeric":132}],644:[function(a,b,c){"use strict";var d=b.exports={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.calcFromTrace=function(a,b){for(var c=a.x||[],e=a.y||[],f=c.length||e.length,g=new Array(f),h=0;f>h;h++)g[h]={x:c[h],y:e[h]};return g[0].trace=a,d.calc({calcdata:[g],
_fullLayout:b}),g},d.plot=a("./plot"),d.style=a("./style"),d.hoverInfo=function(a,b,c){(b.error_y||{}).visible&&(c.yerr=a.yh-a.y,b.error_y.symmetric||(c.yerrneg=a.y-a.ys)),(b.error_x||{}).visible&&(c.xerr=a.xh-a.x,b.error_x.symmetric||(c.xerrneg=a.x-a.xs))}},{"./attributes":640,"./calc":641,"./defaults":643,"./plot":645,"./style":646}],645:[function(a,b,c){"use strict";function d(a,b,c){var d={x:b.c2p(a.x),y:c.c2p(a.y)};return void 0!==a.yh&&(d.yh=c.c2p(a.yh),d.ys=c.c2p(a.ys),f(d.ys)||(d.noYS=!0,d.ys=c.c2p(a.ys,!0))),void 0!==a.xh&&(d.xh=b.c2p(a.xh),d.xs=b.c2p(a.xs),f(d.xs)||(d.noXS=!0,d.xs=b.c2p(a.xs,!0))),d}var e=a("d3"),f=a("fast-isnumeric"),g=a("../drawing"),h=a("../../traces/scatter/subtypes");b.exports=function(a,b,c){var i,j=b.xaxis,k=b.yaxis,l=c&&c.duration>0;a.each(function(a){var m,n=a[0].trace,o=n.error_x||{},p=n.error_y||{};n.ids&&(m=function(a){return a.id});var q=h.hasMarkers(n)&&n.marker.maxdisplayed>0;p.visible||o.visible||(a=[]);var r=e.select(this).selectAll("g.errorbar").data(a,m);if(r.exit().remove(),a.length){o.visible||r.selectAll("path.xerror").remove(),p.visible||r.selectAll("path.yerror").remove(),r.style("opacity",1);var s=r.enter().append("g").classed("errorbar",!0);l&&s.style("opacity",0).transition().duration(c.duration).style("opacity",1),g.setClipUrl(r,b.layerClipId),r.each(function(a){var b=e.select(this),g=d(a,j,k);if(!q||a.vis){var h;if(p.visible&&f(g.x)&&f(g.yh)&&f(g.ys)){var m=p.width;h="M"+(g.x-m)+","+g.yh+"h"+2*m+"m-"+m+",0V"+g.ys,g.noYS||(h+="m-"+m+",0h"+2*m);var n=b.select("path.yerror");i=!n.size(),i?n=b.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):l&&(n=n.transition().duration(c.duration).ease(c.easing)),n.attr("d",h)}if(o.visible&&f(g.y)&&f(g.xh)&&f(g.xs)){var r=(o.copy_ystyle?p:o).width;h="M"+g.xh+","+(g.y-r)+"v"+2*r+"m0,-"+r+"H"+g.xs,g.noXS||(h+="m0,-"+r+"v"+2*r);var s=b.select("path.xerror");i=!s.size(),i?s=b.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):l&&(s=s.transition().duration(c.duration).ease(c.easing)),s.attr("d",h)}}})}})}},{"../../traces/scatter/subtypes":1076,"../drawing":638,d3:123,"fast-isnumeric":132}],646:[function(a,b,c){"use strict";var d=a("d3"),e=a("../color");b.exports=function(a){a.each(function(a){var b=a[0].trace,c=b.error_y||{},f=b.error_x||{},g=d.select(this);g.selectAll("path.yerror").style("stroke-width",c.thickness+"px").call(e.stroke,c.color),f.copy_ystyle&&(f=c),g.selectAll("path.xerror").style("stroke-width",f.thickness+"px").call(e.stroke,f.color)})}},{"../color":613,d3:123}],647:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes");b.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:d({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":810}],648:[function(a,b,c){"use strict";function d(a,b,c,d){d=d||e.identity,Array.isArray(a)&&(b[0][c]=d(a))}var e=a("../../lib"),f=a("../../registry");b.exports=function(a){function b(a){return function(b){return e.coerceHoverinfo({hoverinfo:b},{_module:a._module},g)}}for(var c=a.calcdata,g=a._fullLayout,h=0;h<c.length;h++){var i=c[h],j=i[0].trace;if(!f.traceIs(j,"pie")){var k=f.traceIs(j,"2dMap")?d:e.fillArray;k(j.hoverinfo,i,"hi",b(j)),j.hoverlabel&&(k(j.hoverlabel.bgcolor,i,"hbg"),k(j.hoverlabel.bordercolor,i,"hbc"),k(j.hoverlabel.font.size,i,"hts"),k(j.hoverlabel.font.color,i,"htc"),k(j.hoverlabel.font.family,i,"htf"),k(j.hoverlabel.namelength,i,"hnl"))}}}},{"../../lib":738,"../../registry":861}],649:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("./hover").hover;b.exports=function(a,b,c){function f(){a.emit("plotly_click",{points:a._hoverdata,event:b})}var g=d.getComponentMethod("annotations","onClick")(a,a._hoverdata);void 0!==c&&e(a,b,c,!0),a._hoverdata&&b&&b.target&&(g&&g.then?g.then(f):f(),b.stopImmediatePropagation&&b.stopImmediatePropagation())}},{"../../registry":861,"./hover":653}],650:[function(a,b,c){"use strict";b.exports={MAXDIST:20,YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],651:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes"),f=a("./hoverlabel_defaults");b.exports=function(a,b,c,g){function h(c,f){return d.coerce(a,b,e,c,f)}f(a,b,h,g.hoverlabel)}},{"../../lib":738,"./attributes":647,"./hoverlabel_defaults":654}],652:[function(a,b,c){"use strict";function d(a){return h[a]||a}function e(a,b){return Array.isArray(b)?Array.isArray(a)&&Array.isArray(a[b[0]])?a[b[0]][b[1]]:void 0:a[b]}var f=a("../../lib"),g=a("./constants");c.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},c.flat=function(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=b;return c},c.p2c=function(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=a[d].p2c(b);return c},c.getDistanceFunction=function(a,b,d,e){return"closest"===a?e||c.quadrature(b,d):"x"===a?b:d},c.getClosest=function(a,b,c){if(c.index!==!1)c.index>=0&&c.index<a.length?c.distance=0:c.index=!1;else for(var d=0;d<a.length;d++){var e=b(a[d]);e<=c.distance&&(c.index=d,c.distance=e)}return c},c.inbox=function(a,b){return 0>a*b||0===a?g.MAXDIST*(.6-.3/Math.max(3,Math.abs(a-b))):1/0},c.quadrature=function(a,b){return function(c){var d=a(c),e=b(c);return Math.sqrt(d*d+e*e)}},c.makeEventData=function(a,b,d){var e="index"in a?a.index:a.pointNumber,f={data:b._input,fullData:b,curveNumber:b.index,pointNumber:e};if(b._indexToPoints){var g=b._indexToPoints[e];1===g.length?f.pointIndex=g[0]:f.pointIndices=g}else f.pointIndex=e;return b._module.eventData?f=b._module.eventData(f,a,b,d,e):("xVal"in a?f.x=a.xVal:"x"in a&&(f.x=a.x),"yVal"in a?f.y=a.yVal:"y"in a&&(f.y=a.y),a.xa&&(f.xaxis=a.xa),a.ya&&(f.yaxis=a.ya),void 0!==a.zLabelVal&&(f.z=a.zLabelVal)),c.appendArrayPointValue(f,b,e),f},c.appendArrayPointValue=function(a,b,c){var g=b._arrayAttrs;if(g)for(var h=0;h<g.length;h++){var i=g[h],j=d(i);if(void 0===a[j]){var k=f.nestedProperty(b,i).get(),l=e(k,c);void 0!==l&&(a[j]=l)}}},c.appendArrayMultiPointValues=function(a,b,c){var g=b._arrayAttrs;if(g)for(var h=0;h<g.length;h++){var i=g[h],j=d(i);if(void 0===a[j]){for(var k=f.nestedProperty(b,i).get(),l=new Array(c.length),m=0;m<c.length;m++)l[m]=e(k,c[m]);a[j]=l}}};var h={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"}},{"../../lib":738,"./constants":650}],653:[function(a,b,c){"use strict";function d(a,b,c,d){c||(c="xy");var m=Array.isArray(c)?c:[c],p=a._fullLayout,r=p._plots||[],y=r[c];if(y){var z=y.overlays.map(function(a){return a.id});m=m.concat(z)}for(var A=m.length,B=new Array(A),C=new Array(A),D=0;A>D;D++){var E=m[D],F=r[E];if(F)B[D]=u.getFromId(a,F.xaxis._id),C[D]=u.getFromId(a,F.yaxis._id);else{var G=p[E]._subplot;B[D]=G.xaxis,C[D]=G.yaxis}}var H=b.hovermode||p.hovermode;if(-1===["x","y","closest"].indexOf(H)||!a.calcdata||a.querySelector(".zoombox")||a._dragging)return t.unhoverRaw(a,b);var I,J,K,L,M,N,O,P,Q,R,S,T,U,V=[],W=[];if(Array.isArray(b))for(H="array",K=0;K<b.length;K++)M=a.calcdata[b[K].curveNumber||0],"skip"!==M[0].trace.hoverinfo&&W.push(M);else{for(L=0;L<a.calcdata.length;L++)M=a.calcdata[L],N=M[0].trace,"skip"!==N.hoverinfo&&-1!==m.indexOf(w.getSubplot(N))&&W.push(M);var X,Y,Z=!b.target;if(Z)X="xpx"in b?b.xpx:B[0]._length/2,Y="ypx"in b?b.ypx:C[0]._length/2;else{if(o.triggerHandler(a,"plotly_beforehover",b)===!1)return;var $=b.target.getBoundingClientRect();if(X=b.clientX-$.left,Y=b.clientY-$.top,0>X||X>$.width||0>Y||Y>$.height)return t.unhoverRaw(a,b)}if(I="xval"in b?w.flat(m,b.xval):w.p2c(B,X),J="yval"in b?w.flat(m,b.yval):w.p2c(C,Y),!l(I[0])||!l(J[0]))return n.warn("Fx.hover failed",b,a),t.unhoverRaw(a,b)}var _=1/0;for(L=0;L<W.length;L++)if(M=W[L],M&&M[0]&&M[0].trace&&M[0].trace.visible===!0&&(N=M[0].trace,-1===["carpet","contourcarpet"].indexOf(N._module.name))){if(O=w.getSubplot(N),P=m.indexOf(O),Q=H,T={cd:M,trace:N,xa:B[P],ya:C[P],index:!1,distance:Math.min(_,x.MAXDIST),color:s.defaultLine,name:N.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},p[O]&&(T.subplot=p[O]._subplot),U=V.length,"array"===Q){var aa=b[L];"pointNumber"in aa?(T.index=aa.pointNumber,Q="closest"):(Q="","xval"in aa&&(R=aa.xval,Q="x"),"yval"in aa&&(S=aa.yval,Q=Q?"closest":"y"))}else R=I[P],S=J[P];if(N._module&&N._module.hoverPoints){var ba=N._module.hoverPoints(T,R,S,Q,p._hoverlayer);if(ba)for(var ca,da=0;da<ba.length;da++)ca=ba[da],l(ca.x0)&&l(ca.y0)&&V.push(h(ca,H))}else n.log("Unrecognized trace type in hover:",N);"closest"===H&&V.length>U&&(V.splice(0,U),_=V[0].distance)}if(0===V.length)return t.unhoverRaw(a,b);V.sort(function(a,b){return a.distance-b.distance});var ea=a._hoverdata,fa=[];for(K=0;K<V.length;K++){var ga=V[K];fa.push(w.makeEventData(ga,ga.trace,ga.cd))}if(a._hoverdata=fa,j(a,b,ea)&&p._hasCartesian){var ha={hovermode:H,fullLayout:p,container:p._hoverlayer,outerContainer:p._paperdiv};i(V,ha)}var ia="y"===H&&W.length>1,ja=s.combine(p.plot_bgcolor||s.background,p.paper_bgcolor),ka={hovermode:H,rotateLabels:ia,bgColor:ja,container:p._hoverlayer,outerContainer:p._paperdiv,commonLabelOpts:p.hoverlabel},la=e(V,ka,a);if(f(V,ia?"xa":"ya",p),g(la,ia),b.target&&b.target.tagName){var ma=v.getComponentMethod("annotations","hasClickToShow")(a,fa);q(k.select(b.target),ma?"pointer":"")}b.target&&!d&&j(a,b,ea)&&(ea&&a.emit("plotly_unhover",{event:b,points:ea}),a.emit("plotly_hover",{event:b,points:a._hoverdata,xaxes:B,yaxes:C,xvals:I,yvals:J}))}function e(a,b,c){var d,e,f=b.hovermode,g=b.rotateLabels,h=b.bgColor,i=b.container,j=b.outerContainer,l=b.commonLabelOpts||{},m=b.fontFamily||x.HOVERFONT,n=b.fontSize||x.HOVERFONTSIZE,o=a[0],q=o.xa,t=o.ya,u="y"===f?"yLabel":"xLabel",v=o[u],w=(String(v)||"").split(" ")[0],z=j.node().getBoundingClientRect(),A=z.top,B=z.width,C=z.height,F=o.distance<=x.MAXDIST&&("x"===f||"y"===f);for(d=0;d<a.length;d++){e=a[d].hoverinfo||a[d].trace.hoverinfo;var G=e.split("+");if(-1===G.indexOf("all")&&-1===G.indexOf(f)){F=!1;break}}var H=i.selectAll("g.axistext").data(F?[0]:[]);H.enter().append("g").classed("axistext",!0),H.exit().remove(),H.each(function(){var b=k.select(this),d=b.selectAll("path").data([0]),e=b.selectAll("text").data([0]);d.enter().append("path").style({"stroke-width":"1px"}),d.style({fill:l.bgcolor||s.defaultLine,stroke:l.bordercolor||s.background}),e.enter().append("text").attr("data-notex",1),e.text(v).call(r.font,l.font.family||m,l.font.size||n,l.font.color||s.background).call(p.positionText,0,0).call(p.convertToTspans,c),b.attr("transform","");var g=e.node().getBoundingClientRect();if("x"===f){e.attr("text-anchor","middle").call(p.positionText,0,"top"===q.side?A-g.bottom-D-E:A-g.top+D+E);var h="top"===q.side?"-":"";d.attr("d","M0,0L"+D+","+h+D+"H"+(E+g.width/2)+"v"+h+(2*E+g.height)+"H-"+(E+g.width/2)+"V"+h+D+"H-"+D+"Z"),b.attr("transform","translate("+(q._offset+(o.x0+o.x1)/2)+","+(t._offset+("top"===q.side?0:t._length))+")")}else{e.attr("text-anchor","right"===t.side?"start":"end").call(p.positionText,("right"===t.side?1:-1)*(E+D),A-g.top-g.height/2);var i="right"===t.side?"":"-";d.attr("d","M0,0L"+i+D+","+D+"V"+(E+g.height/2)+"h"+i+(2*E+g.width)+"V-"+(E+g.height/2)+"H"+i+D+"V-"+D+"Z"),b.attr("transform","translate("+(q._offset+("right"===t.side?q._length:0))+","+(t._offset+(o.y0+o.y1)/2)+")")}a=a.filter(function(a){return void 0!==a.zLabelVal||(a[u]||"").split(" ")[0]===w})});var I=i.selectAll("g.hovertext").data(a,function(a){return[a.trace.index,a.index,a.x0,a.y0,a.name,a.attr,a.xa,a.ya||""].join(",")});return I.enter().append("g").classed("hovertext",!0).each(function(){var a=k.select(this);a.append("rect").call(s.fill,s.addOpacity(h,.8)),a.append("text").classed("name",!0),a.append("path").style("stroke-width","1px"),a.append("text").classed("nums",!0).call(r.font,m,n)}),I.exit().remove(),I.each(function(a){var b=k.select(this).attr("transform",""),d="",e="",i=s.opacity(a.color)?a.color:s.defaultLine,j=s.combine(i,h),l=a.borderColor||s.contrast(j);if(void 0!==a.nameOverride&&(a.name=a.nameOverride),a.name){d=p.plainText(a.name||"");var o=Math.round(a.nameLength);o>-1&&d.length>o&&(d=o>3?d.substr(0,o-3)+"...":d.substr(0,o))}void 0!==a.extraText&&(e+=a.extraText),void 0!==a.zLabel?(void 0!==a.xLabel&&(e+="x: "+a.xLabel+"<br>"),void 0!==a.yLabel&&(e+="y: "+a.yLabel+"<br>"),e+=(e?"z: ":"")+a.zLabel):F&&a[f+"Label"]===v?e=a[("x"===f?"y":"x")+"Label"]||"":void 0===a.xLabel?void 0!==a.yLabel&&(e=a.yLabel):e=void 0===a.yLabel?a.xLabel:"("+a.xLabel+", "+a.yLabel+")",a.text&&!Array.isArray(a.text)&&(e+=(e?"<br>":"")+a.text),""===e&&(""===d&&b.remove(),e=d);var q=b.select("text.nums").call(r.font,a.fontFamily||m,a.fontSize||n,a.fontColor||l).text(e).attr("data-notex",1).call(p.positionText,0,0).call(p.convertToTspans,c),t=b.select("text.name"),u=0;d&&d!==e?(t.call(r.font,a.fontFamily||m,a.fontSize||n,j).text(d).attr("data-notex",1).call(p.positionText,0,0).call(p.convertToTspans,c),u=t.node().getBoundingClientRect().width+2*E):(t.remove(),b.select("rect").remove()),b.select("path").style({fill:j,stroke:l});var w,x,z=q.node().getBoundingClientRect(),G=a.xa._offset+(a.x0+a.x1)/2,H=a.ya._offset+(a.y0+a.y1)/2,I=Math.abs(a.x1-a.x0),J=Math.abs(a.y1-a.y0),K=z.width+D+E+u;a.ty0=A-z.top,a.bx=z.width+2*E,a.by=z.height+2*E,a.anchor="start",a.txwidth=z.width,a.tx2width=u,a.offset=0,g?(a.pos=G,w=C>=H+J/2+K,x=H-J/2-K>=0,"top"!==a.idealAlign&&w||!x?w?(H+=J/2,a.anchor="start"):a.anchor="middle":(H-=J/2,a.anchor="end")):(a.pos=H,w=B>=G+I/2+K,x=G-I/2-K>=0,"left"!==a.idealAlign&&w||!x?w?(G+=I/2,a.anchor="start"):a.anchor="middle":(G-=I/2,a.anchor="end")),q.attr("text-anchor",a.anchor),u&&t.attr("text-anchor",a.anchor),b.attr("transform","translate("+G+","+H+")"+(g?"rotate("+y+")":""))}),I}function f(a,b,c){function d(a){var b=a[0],c=a[a.length-1];if(f=b.pmin-b.pos-b.dp+b.size,g=c.pos+c.dp+c.size-b.pmax,f>.01){for(i=a.length-1;i>=0;i--)a[i].dp+=f;e=!1}if(!(.01>g)){if(-.01>f){for(i=a.length-1;i>=0;i--)a[i].dp-=g;e=!1}if(e){var d=0;for(h=0;h<a.length;h++)j=a[h],j.pos+j.dp+j.size>b.pmax&&d++;for(h=a.length-1;h>=0&&!(0>=d);h--)j=a[h],j.pos>b.pmax-1&&(j.del=!0,d--);for(h=0;h<a.length&&!(0>=d);h++)if(j=a[h],j.pos<b.pmin+1)for(j.del=!0,d--,g=2*j.size,i=a.length-1;i>=0;i--)a[i].dp-=g;for(h=a.length-1;h>=0&&!(0>=d);h--)j=a[h],j.pos+j.dp+j.size>b.pmax&&(j.del=!0,d--)}}}for(var e,f,g,h,i,j,k,l=0,m=a.map(function(a,d){var e=a[b];return[{i:d,dp:0,pos:a.pos,posref:a.posref,size:a.by*("x"===e._id.charAt(0)?A:1)/2,pmin:0,pmax:"x"===e._id.charAt(0)?c.width:c.height}]}).sort(function(a,b){return a[0].posref-b[0].posref});!e&&l<=a.length;){for(l++,e=!0,h=0;h<m.length-1;){var n=m[h],o=m[h+1],p=n[n.length-1],q=o[0];if(f=p.pos+p.dp+p.size-q.pos-q.dp+q.size,f>.01&&p.pmin===q.pmin&&p.pmax===q.pmax){for(i=o.length-1;i>=0;i--)o[i].dp+=f;for(n.push.apply(n,o),m.splice(h+1,1),k=0,i=n.length-1;i>=0;i--)k+=n[i].dp;for(g=k/n.length,i=n.length-1;i>=0;i--)n[i].dp-=g;e=!1}else h++}m.forEach(d)}for(h=m.length-1;h>=0;h--){var r=m[h];for(i=r.length-1;i>=0;i--){var s=r[i],t=a[s.i];t.offset=s.dp,t.del=s.del}}}function g(a,b){a.each(function(a){var c=k.select(this);if(a.del)return void c.remove();var d="end"===a.anchor?-1:1,e=c.select("text.nums"),f={start:1,end:-1,middle:0}[a.anchor],g=f*(D+E),h=g+f*(a.txwidth+E),i=0,j=a.offset;"middle"===a.anchor&&(g-=a.tx2width/2,h-=a.tx2width/2),b&&(j*=-C,i=a.offset*B),c.select("path").attr("d","middle"===a.anchor?"M-"+a.bx/2+",-"+a.by/2+"h"+a.bx+"v"+a.by+"h-"+a.bx+"Z":"M0,0L"+(d*D+i)+","+(D+j)+"v"+(a.by/2-D)+"h"+d*a.bx+"v-"+a.by+"H"+(d*D+i)+"V"+(j-D)+"Z"),e.call(p.positionText,g+i,j+a.ty0-a.by/2+E),a.tx2width&&(c.select("text.name").call(p.positionText,h+f*E+i,j+a.ty0-a.by/2+E),c.select("rect").call(r.setRect,h+(f-1)*a.tx2width/2+i,j-a.by/2-1,a.tx2width,a.by+2))})}function h(a,b){function c(b,c,d){var e=h(c,d);e&&(a[b]=e)}var d=a.index,e=a.trace||{},f=a.cd[0],g=a.cd[d]||{},h=Array.isArray(d)?function(a,b){return n.castOption(f,d,a)||n.extractOption({},e,"",b)}:function(a,b){return n.extractOption(g,e,a,b)};if(c("hoverinfo","hi","hoverinfo"),c("color","hbg","hoverlabel.bgcolor"),c("borderColor","hbc","hoverlabel.bordercolor"),c("fontFamily","htf","hoverlabel.font.family"),c("fontSize","hts","hoverlabel.font.size"),c("fontColor","htc","hoverlabel.font.color"),c("nameLength","hnl","hoverlabel.namelength"),a.posref="y"===b?(a.x0+a.x1)/2:(a.y0+a.y1)/2,a.x0=n.constrain(a.x0,0,a.xa._length),a.x1=n.constrain(a.x1,0,a.xa._length),a.y0=n.constrain(a.y0,0,a.ya._length),a.y1=n.constrain(a.y1,0,a.ya._length),void 0!==a.xLabelVal&&(a.xLabel="xLabel"in a?a.xLabel:u.hoverLabelText(a.xa,a.xLabelVal),a.xVal=a.xa.c2d(a.xLabelVal)),void 0!==a.yLabelVal&&(a.yLabel="yLabel"in a?a.yLabel:u.hoverLabelText(a.ya,a.yLabelVal),a.yVal=a.ya.c2d(a.yLabelVal)),void 0!==a.zLabelVal&&void 0===a.zLabel&&(a.zLabel=String(a.zLabelVal)),!(isNaN(a.xerr)||"log"===a.xa.type&&a.xerr<=0)){var i=u.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;void 0!==a.xerrneg?a.xLabel+=" +"+i+" / -"+u.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text:a.xLabel+=" ± "+i,"x"===b&&(a.distance+=1)}if(!(isNaN(a.yerr)||"log"===a.ya.type&&a.yerr<=0)){var j=u.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text;void 0!==a.yerrneg?a.yLabel+=" +"+j+" / -"+u.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text:a.yLabel+=" ± "+j,"y"===b&&(a.distance+=1)}var k=a.hoverinfo||a.trace.hoverinfo;return"all"!==k&&(k=k.split("+"),-1===k.indexOf("x")&&(a.xLabel=void 0),-1===k.indexOf("y")&&(a.yLabel=void 0),-1===k.indexOf("z")&&(a.zLabel=void 0),-1===k.indexOf("text")&&(a.text=void 0),-1===k.indexOf("name")&&(a.name=void 0)),a}function i(a,b){var c=b.hovermode,d=b.container,e=a[0],f=e.xa,g=e.ya,h=f.showspikes,i=g.showspikes;if(d.selectAll(".spikeline").remove(),"closest"===c&&(h||i)){var j=b.fullLayout,k=f._offset+(e.x0+e.x1)/2,l=g._offset+(e.y0+e.y1)/2,n=s.combine(j.plot_bgcolor,j.paper_bgcolor),o=m.readability(e.color,n)<1.5?s.contrast(n):e.color;if(i){var p=g.spikemode,q=g.spikethickness,t=g.spikecolor||o,u=g._boundingBox,v=(u.left+u.right)/2<k?u.right:u.left;if(-1!==p.indexOf("toaxis")||-1!==p.indexOf("across")){var w=v,x=k;-1!==p.indexOf("across")&&(w=g._counterSpan[0],x=g._counterSpan[1]),d.append("line").attr({x1:w,x2:x,y1:l,y2:l,"stroke-width":q+2,stroke:n}).classed("spikeline",!0).classed("crisp",!0),d.append("line").attr({x1:w,x2:x,y1:l,y2:l,"stroke-width":q,stroke:t,"stroke-dasharray":r.dashStyle(g.spikedash,q)}).classed("spikeline",!0).classed("crisp",!0)}-1!==p.indexOf("marker")&&d.append("circle").attr({cx:v+("right"!==g.side?q:-q),cy:l,r:q,fill:t}).classed("spikeline",!0)}if(h){var y=f.spikemode,z=f.spikethickness,A=f.spikecolor||o,B=f._boundingBox,C=(B.top+B.bottom)/2<l?B.bottom:B.top;if(-1!==y.indexOf("toaxis")||-1!==y.indexOf("across")){var D=C,E=l;-1!==y.indexOf("across")&&(D=f._counterSpan[0],E=f._counterSpan[1]),d.append("line").attr({x1:k,x2:k,y1:D,y2:E,"stroke-width":z+2,stroke:n}).classed("spikeline",!0).classed("crisp",!0),d.append("line").attr({x1:k,x2:k,y1:D,y2:E,"stroke-width":z,stroke:A,"stroke-dasharray":r.dashStyle(f.spikedash,z)}).classed("spikeline",!0).classed("crisp",!0)}-1!==y.indexOf("marker")&&d.append("circle").attr({cx:k,cy:C-("top"!==f.side?z:-z),r:z,fill:A}).classed("spikeline",!0)}}}function j(a,b,c){if(!c||c.length!==a._hoverdata.length)return!0;for(var d=c.length-1;d>=0;d--){var e=c[d],f=a._hoverdata[d];if(e.curveNumber!==f.curveNumber||String(e.pointNumber)!==String(f.pointNumber))return!0}return!1}var k=a("d3"),l=a("fast-isnumeric"),m=a("tinycolor2"),n=a("../../lib"),o=a("../../lib/events"),p=a("../../lib/svg_text_utils"),q=a("../../lib/override_cursor"),r=a("../drawing"),s=a("../color"),t=a("../dragelement"),u=a("../../plots/cartesian/axes"),v=a("../../registry"),w=a("./helpers"),x=a("./constants"),y=x.YANGLE,z=Math.PI*y/180,A=1/Math.sin(z),B=Math.cos(z),C=Math.sin(z),D=x.HOVERARROWSIZE,E=x.HOVERTEXTPAD;c.hover=function(a,b,c,e){a=n.getGraphDiv(a),n.throttle(a._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,function(){d(a,b,c,e)})},c.loneHover=function(a,b){var c={color:a.color||s.defaultLine,x0:a.x0||a.x||0,x1:a.x1||a.x||0,y0:a.y0||a.y||0,y1:a.y1||a.y||0,xLabel:a.xLabel,yLabel:a.yLabel,zLabel:a.zLabel,text:a.text,name:a.name,idealAlign:a.idealAlign,borderColor:a.borderColor,fontFamily:a.fontFamily,fontSize:a.fontSize,fontColor:a.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},d=k.select(b.container),f=b.outerContainer?k.select(b.outerContainer):d,h={hovermode:"closest",rotateLabels:!1,bgColor:b.bgColor||s.background,container:d,outerContainer:f},i=e([c],h,b.gd);return g(i,h.rotateLabels),i.node()}},{"../../lib":738,"../../lib/events":726,"../../lib/override_cursor":749,"../../lib/svg_text_utils":761,"../../plots/cartesian/axes":785,"../../registry":861,"../color":613,"../dragelement":635,"../drawing":638,"./constants":650,"./helpers":652,d3:123,"fast-isnumeric":132,tinycolor2:543}],654:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c,e){e=e||{},c("hoverlabel.bgcolor",e.bgcolor),c("hoverlabel.bordercolor",e.bordercolor),c("hoverlabel.namelength",e.namelength),d.coerceFont(c,"hoverlabel.font",e.font)}},{"../../lib":738}],655:[function(a,b,c){"use strict";function d(a){var b=h.isD3Selection(a)?a:g.select(a);b.selectAll("g.hovertext").remove(),b.selectAll(".spikeline").remove()}function e(a,b,c){return h.castOption(a,b,"hoverlabel."+c)}function f(a,b,c){function d(c){return h.coerceHoverinfo({hoverinfo:c},{_module:a._module},b)}return h.castOption(a,c,"hoverinfo",d)}var g=a("d3"),h=a("../../lib"),i=a("../dragelement"),j=a("./helpers"),k=a("./layout_attributes");b.exports={moduleType:"component",name:"fx",constants:a("./constants"),schema:{layout:k},attributes:a("./attributes"),layoutAttributes:k,supplyLayoutGlobalDefaults:a("./layout_global_defaults"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),getDistanceFunction:j.getDistanceFunction,getClosest:j.getClosest,inbox:j.inbox,quadrature:j.quadrature,appendArrayPointValue:j.appendArrayPointValue,castHoverOption:e,castHoverinfo:f,hover:a("./hover").hover,unhover:i.unhover,loneHover:a("./hover").loneHover,loneUnhover:d,click:a("./click")}},{"../../lib":738,"../dragelement":635,"./attributes":647,"./calc":648,"./click":649,"./constants":650,"./defaults":651,"./helpers":652,"./hover":653,"./layout_attributes":656,"./layout_defaults":657,"./layout_global_defaults":658,d3:123}],656:[function(a,b,c){"use strict";var d=a("./constants"),e=a("../../plots/font_attributes")({editType:"none"});e.family.dflt=d.HOVERFONT,e.size.dflt=d.HOVERFONTSIZE,b.exports={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:e,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"}}},{"../../plots/font_attributes":810,"./constants":650}],657:[function(a,b,c){"use strict";function d(a){for(var b=!0,c=0;c<a.length;c++){var d=a[c];if("h"!==d.orientation){b=!1;break}}return b}var e=a("../../lib"),f=a("./layout_attributes");b.exports=function(a,b,c){function g(c,d){return e.coerce(a,b,f,c,d)}g("dragmode");var h;b._has("cartesian")?(b._isHoriz=d(c),h=b._isHoriz?"y":"x"):h="closest",g("hovermode",h);var i=b._has("mapbox"),j=b._has("geo"),k=b._basePlotModules.length;"zoom"===b.dragmode&&((i||j)&&1===k||i&&j&&2===k)&&(b.dragmode="pan")}},{"../../lib":738,"./layout_attributes":656}],658:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./hoverlabel_defaults"),f=a("./layout_attributes");b.exports=function(a,b){function c(c,e){return d.coerce(a,b,f,c,e)}e(a,b,c)}},{"../../lib":738,"./hoverlabel_defaults":654,"./layout_attributes":656}],659:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/constants");b.exports={_isLinkedToArray:"image",visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"}},{"../../plots/cartesian/constants":790}],660:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib/to_log_range");b.exports=function(a,b,c,f){b=b||{};var g="log"===c&&"linear"===b.type,h="linear"===c&&"log"===b.type;if(g||h)for(var i,j,k=a._fullLayout.images,l=b._id.charAt(0),m=0;m<k.length;m++)if(i=k[m],j="images["+m+"].",i[l+"ref"]===b._id){var n=i[l],o=i["size"+l],p=null,q=null;if(g){p=e(n,b.range);var r=o/Math.pow(10,p)/2;q=2*Math.log(r+Math.sqrt(1+r*r))/Math.LN10}else p=Math.pow(10,n),q=p*(Math.pow(10,o/2)-Math.pow(10,-o/2));d(p)?d(q)||(q=null):(p=null,q=null),f(j+l,p),f(j+"size"+l,q)}}},{"../../lib/to_log_range":763,"fast-isnumeric":132}],661:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return e.coerce(a,b,h,c,d)}var g=d("source"),i=d("visible",!!g);if(!i)return b;d("layer"),d("xanchor"),d("yanchor"),d("sizex"),d("sizey"),d("sizing"),d("opacity");for(var j={_fullLayout:c},k=["x","y"],l=0;2>l;l++){var m=k[l],n=f.coerceRef(a,b,j,m,"paper");f.coercePosition(b,j,d,n,m,0)}return b}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("../../plots/array_container_defaults"),h=a("./attributes"),i="images";b.exports=function(a,b){var c={name:i,handleItemDefaults:d};g(a,b,c)}},{"../../lib":738,"../../plots/array_container_defaults":782,"../../plots/cartesian/axes":785,"./attributes":659}],662:[function(a,b,c){"use strict";var d=a("d3"),e=a("../drawing"),f=a("../../plots/cartesian/axes"),g=a("../../constants/xmlns_namespaces");b.exports=function(a){function b(b){var c=d.select(this);if(!this.img||this.img.src!==b.source){c.attr("xmlns",g.svg);var e=new Promise(function(a){function d(){c.remove(),a()}var e=new Image;this.img=e,e.setAttribute("crossOrigin","anonymous"),e.onerror=d,e.onload=function(){var b=document.createElement("canvas");b.width=this.width,b.height=this.height;var d=b.getContext("2d");d.drawImage(this,0,0);var e=b.toDataURL("image/png");c.attr("xlink:href",e),a()},c.on("error",d),e.src=b.source}.bind(this));a._promises.push(e)}}function c(b){var c=d.select(this),g=f.getFromId(a,b.xref),h=f.getFromId(a,b.yref),i=j._size,k=g?Math.abs(g.l2p(b.sizex)-g.l2p(0)):b.sizex*i.w,l=h?Math.abs(h.l2p(b.sizey)-h.l2p(0)):b.sizey*i.h,m=k*p.x[b.xanchor].offset,n=l*p.y[b.yanchor].offset,o=p.x[b.xanchor].sizing+p.y[b.yanchor].sizing,q=(g?g.r2p(b.x)+g._offset:b.x*i.w+i.l)+m,r=(h?h.r2p(b.y)+h._offset:i.h-b.y*i.h+i.t)+n;switch(b.sizing){case"fill":o+=" slice";break;case"stretch":o="none"}c.attr({x:q,y:r,width:k,height:l,preserveAspectRatio:o,opacity:b.opacity});var s=g?g._id:"",t=h?h._id:"",u=s+t;c.call(e.setClipUrl,u?"clip"+j._uid+u:null)}var h,i,j=a._fullLayout,k=[],l={},m=[];for(i=0;i<j.images.length;i++){var n=j.images[i];if(n.visible)if("below"===n.layer&&"paper"!==n.xref&&"paper"!==n.yref){h=n.xref+n.yref;var o=j._plots[h];if(!o){m.push(n);continue}o.mainplot&&(h=o.mainplot.id),l[h]||(l[h]=[]),l[h].push(n)}else"above"===n.layer?k.push(n):m.push(n)}var p={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-0.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-0.5},bottom:{sizing:"YMax",offset:-1}}},q=j._imageLowerLayer.selectAll("image").data(m),r=j._imageUpperLayer.selectAll("image").data(k);q.enter().append("image"),r.enter().append("image"),q.exit().remove(),r.exit().remove(),q.each(function(a){b.bind(this)(a),c.bind(this)(a)}),r.each(function(a){b.bind(this)(a),c.bind(this)(a)});var s=Object.keys(j._plots);for(i=0;i<s.length;i++){h=s[i];var t=j._plots[h];if(t.imagelayer){var u=t.imagelayer.selectAll("image").data(l[h]||[]);u.enter().append("image"),u.exit().remove(),u.each(function(a){b.bind(this)(a),c.bind(this)(a)})}}}},{"../../constants/xmlns_namespaces":719,"../../plots/cartesian/axes":785,"../drawing":638,d3:123}],663:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"images",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("images"),draw:a("./draw"),convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":795,"./attributes":659,"./convert_coords":660,"./defaults":661,"./draw":662}],664:[function(a,b,c){"use strict";c.isRightAnchor=function(a){return"right"===a.xanchor||"auto"===a.xanchor&&a.x>=2/3},c.isCenterAnchor=function(a){return"center"===a.xanchor||"auto"===a.xanchor&&a.x>1/3&&a.x<2/3},c.isBottomAnchor=function(a){return"bottom"===a.yanchor||"auto"===a.yanchor&&a.y<=1/3},c.isMiddleAnchor=function(a){return"middle"===a.yanchor||"auto"===a.yanchor&&a.y>1/3&&a.y<2/3}},{}],665:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes");b.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":810,"../color/attributes":612}],666:[function(a,b,c){"use strict";b.exports={scrollBarWidth:4,scrollBarHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],667:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("./attributes"),g=a("../../plots/layout_attributes"),h=a("./helpers");b.exports=function(a,b,c){function i(a,b){return e.coerce(n,o,f,a,b)}for(var j,k,l,m,n=a.legend||{},o=b.legend={},p=0,q="normal",r=0;r<c.length;r++){var s=c[r];h.legendGetsTrace(s)&&(p++,d.traceIs(s,"pie")&&p++),(d.traceIs(s,"bar")&&"stack"===b.barmode||-1!==["tonextx","tonexty"].indexOf(s.fill))&&(q=h.isGrouped({traceorder:q})?"grouped+reversed":"reversed"),void 0!==s.legendgroup&&""!==s.legendgroup&&(q=h.isReversed({traceorder:q})?"reversed+grouped":"grouped")}var t=e.coerce(a,b,g,"showlegend",p>1);if(t!==!1){if(i("bgcolor",b.paper_bgcolor),i("bordercolor"),i("borderwidth"),e.coerceFont(i,"font",b.font),i("orientation"),"h"===o.orientation){var u=a.xaxis;u&&u.rangeslider&&u.rangeslider.visible?(j=0,l="left",k=1.1,m="bottom"):(j=0,l="left",k=-.1,m="top")}i("traceorder",q),h.isGrouped(b.legend)&&i("tracegroupgap"),i("x",j),i("xanchor",l),i("y",k),i("yanchor",m),e.noneOrAll(n,o,["x","y"])}}},{"../../lib":738,"../../plots/layout_attributes":837,"../../registry":861,"./attributes":665,"./helpers":671}],668:[function(a,b,c){"use strict";function d(a,b){function c(c){r.convertToTspans(c,b,function(){f(a,b)})}var d=a.data()[0][0],e=b._fullLayout,g=d.trace,h=n.traceIs(g,"pie"),i=g.index,j=h?d.label:g.name,m=a.selectAll("text.legendtext").data([0]);
m.enter().append("text").classed("legendtext",!0),m.attr("text-anchor","start").classed("user-select-none",!0).call(p.font,e.legend.font).text(j),b._context.edits.legendText&&!h?m.call(r.makeEditable,{gd:b}).call(c).on("edit",function(a){this.text(a).call(c);var e=a;this.text()||(a="    ");var f,g,h=d.trace._fullInput||{},j={};if(-1!==["ohlc","candlestick"].indexOf(h.type))f=d.trace.transforms,g=f[f.length-1].direction,j[g+".name"]=a;else if(n.hasTransform(h,"groupby")){var m=n.getTransformIndices(h,"groupby"),o=m[m.length-1],p=l.keyedContainer(h,"transforms["+o+"].styles","target","value.name");""===e?p.remove(d.trace._group):p.set(d.trace._group,a),j=p.constructUpdate()}else j.name=a;return k.restyle(b,j,i)}):m.call(c)}function e(a,b){var c,d=1,e=a.selectAll("rect").data([0]);e.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(q.fill,"rgba(0,0,0,0)"),e.on("mousedown",function(){c=(new Date).getTime(),c-b._legendMouseDownTime<A?d+=1:(d=1,b._legendMouseDownTime=c)}),e.on("mouseup",function(){if(!b._dragged&&!b._editing){var c=b._fullLayout.legend;(new Date).getTime()-b._legendMouseDownTime>A&&(d=Math.max(d-1,1)),1===d?c._clickTimeout=setTimeout(function(){s(a,b,d)},A):2===d&&(c._clickTimeout&&clearTimeout(c._clickTimeout),b._legendMouseDownTime=0,s(a,b,d))}})}function f(a,b){var c=a.data()[0][0];if(!c.trace.showlegend)return void a.remove();var d,e,f=a.select("g[class*=math-group]"),g=f.node(),h=b._fullLayout.legend,i=h.font.size*v;if(g){var j=p.bBox(g);d=j.height,e=j.width,p.setTranslate(f,0,d/4)}else{var k=a.select(".legendtext"),l=r.lineCount(k),m=k.node();d=i*l,e=m?p.bBox(m).width:0;var n=i*(.3+(1-l)/2);r.positionText(k,40,n)}d=Math.max(d,16)+3,c.height=d,c.width=e}function g(a,b,c){var d=a._fullLayout,e=d.legend,f=e.borderwidth,g=y.isGrouped(e),h=0;if(e.width=0,e.height=0,y.isVertical(e))g&&b.each(function(a,b){p.setTranslate(this,0,b*e.tracegroupgap)}),c.each(function(a){var b=a[0],c=b.height,d=b.width;p.setTranslate(this,f,5+f+e.height+c/2),e.height+=c,e.width=Math.max(e.width,d)}),e.width+=45+2*f,e.height+=10+2*f,g&&(e.height+=(e._lgroupsLength-1)*e.tracegroupgap),h=40;else if(g){for(var i=[e.width],k=b.data(),l=0,m=k.length;m>l;l++){var n=k[l].map(function(a){return a[0].width}),o=40+Math.max.apply(null,n);e.width+=e.tracegroupgap+o,i.push(e.width)}b.each(function(a,b){p.setTranslate(this,i[b],0)}),b.each(function(){var a=j.select(this),b=a.selectAll("g.traces"),c=0;b.each(function(a){var b=a[0],d=b.height;p.setTranslate(this,0,5+f+c+d/2),c+=d}),e.height=Math.max(e.height,c)}),e.height+=10+2*f,e.width+=2*f}else{var q,r=0,s=0,t=0,u=0,v=0,w=e.tracegroupgap||5;c.each(function(a){t=Math.max(40+a[0].width,t),v+=40+a[0].width+w}),q=d.width-(d.margin.r+d.margin.l)>f+v-w,c.each(function(a){var b=a[0],c=q?40+a[0].width:t;f+u+w+c>d.width-(d.margin.r+d.margin.l)&&(u=0,r+=s,e.height=e.height+s,s=0),p.setTranslate(this,f+u,5+f+b.height/2+r),e.width+=w+c,e.height=Math.max(e.height,b.height),u+=w+c,s=Math.max(b.height,s)}),e.width+=2*f,e.height+=10+2*f}e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),c.each(function(b){var c=b[0],d=j.select(this).select(".legendtoggle");d.call(p.setRect,0,-c.height/2,(a._context.edits.legendText?0:e.width)+h,c.height)})}function h(a){var b=a._fullLayout,c=b.legend,d="left";z.isRightAnchor(c)?d="right":z.isCenterAnchor(c)&&(d="center");var e="top";z.isBottomAnchor(c)?e="bottom":z.isMiddleAnchor(c)&&(e="middle"),m.autoMargin(a,"legend",{x:c.x,y:c.y,l:c.width*({right:1,center:.5}[d]||0),r:c.width*({left:1,center:.5}[d]||0),b:c.height*({top:1,middle:.5}[e]||0),t:c.height*({bottom:1,middle:.5}[e]||0)})}function i(a){var b=a._fullLayout,c=b.legend,d="left";z.isRightAnchor(c)?d="right":z.isCenterAnchor(c)&&(d="center"),m.autoMargin(a,"legend",{x:c.x,y:.5,l:c.width*({right:1,center:.5}[d]||0),r:c.width*({left:1,center:.5}[d]||0),b:0,t:0})}var j=a("d3"),k=a("../../plotly"),l=a("../../lib"),m=a("../../plots/plots"),n=a("../../registry"),o=a("../dragelement"),p=a("../drawing"),q=a("../color"),r=a("../../lib/svg_text_utils"),s=a("./handle_click"),t=a("./constants"),u=a("../../constants/interactions"),v=a("../../constants/alignment").LINE_SPACING,w=a("./get_legend_data"),x=a("./style"),y=a("./helpers"),z=a("./anchor_utils"),A=u.DBLCLICKDELAY;b.exports=function(a){function b(a,b){D.attr("data-scroll",b).call(p.setTranslate,0,b),E.call(p.setRect,P,a,t.scrollBarWidth,t.scrollBarHeight),B.select("rect").attr({y:r.borderwidth-b})}var c=a._fullLayout,f="legend"+c._uid;if(c._infolayer&&a.calcdata){a._legendMouseDownTime||(a._legendMouseDownTime=0);var r=c.legend,u=c.showlegend&&w(a.calcdata,r),v=c.hiddenlabels||[];if(!c.showlegend||!u.length)return c._infolayer.selectAll(".legend").remove(),c._topdefs.select("#"+f).remove(),void m.autoMargin(a,"legend");var y=c._infolayer.selectAll("g.legend").data([0]);y.enter().append("g").attr({"class":"legend","pointer-events":"all"});var B=c._topdefs.selectAll("#"+f).data([0]);B.enter().append("clipPath").attr("id",f).append("rect");var C=y.selectAll("rect.bg").data([0]);C.enter().append("rect").attr({"class":"bg","shape-rendering":"crispEdges"}),C.call(q.stroke,r.bordercolor),C.call(q.fill,r.bgcolor),C.style("stroke-width",r.borderwidth+"px");var D=y.selectAll("g.scrollbox").data([0]);D.enter().append("g").attr("class","scrollbox");var E=y.selectAll("rect.scrollbar").data([0]);E.enter().append("rect").attr({"class":"scrollbar",rx:20,ry:2,width:0,height:0}).call(q.fill,"#808BA4");var F=D.selectAll("g.groups").data(u);F.enter().append("g").attr("class","groups"),F.exit().remove();var G=F.selectAll("g.traces").data(l.identity);G.enter().append("g").attr("class","traces"),G.exit().remove(),G.call(x,a).style("opacity",function(a){var b=a[0].trace;return n.traceIs(b,"pie")?-1!==v.indexOf(a[0].label)?.5:1:"legendonly"===b.visible?.5:1}).each(function(){j.select(this).call(d,a).call(e,a)});var H=0!==y.enter().size();H&&(g(a,F,G),h(a));var I=0,J=c.width,K=0,L=c.height;g(a,F,G),r.height>L?i(a):h(a);var M=c._size,N=M.l+M.w*r.x,O=M.t+M.h*(1-r.y);z.isRightAnchor(r)?N-=r.width:z.isCenterAnchor(r)&&(N-=r.width/2),z.isBottomAnchor(r)?O-=r.height:z.isMiddleAnchor(r)&&(O-=r.height/2);var P=r.width,Q=M.w;P>Q?(N=M.l,P=Q):(N+P>J&&(N=J-P),I>N&&(N=I),P=Math.min(J-N,r.width));var R=r.height,S=M.h;R>S?(O=M.t,R=S):(O+R>L&&(O=L-R),K>O&&(O=K),R=Math.min(L-O,r.height)),p.setTranslate(y,N,O);var T,U,V=R-t.scrollBarHeight-2*t.scrollBarMargin,W=r.height-R;if(r.height<=R||a._context.staticPlot)C.attr({width:P-r.borderwidth,height:R-r.borderwidth,x:r.borderwidth/2,y:r.borderwidth/2}),p.setTranslate(D,0,0),B.select("rect").attr({width:P-2*r.borderwidth,height:R-2*r.borderwidth,x:r.borderwidth,y:r.borderwidth}),D.call(p.setClipUrl,f);else{T=t.scrollBarMargin,U=D.attr("data-scroll")||0,C.attr({width:P-2*r.borderwidth+t.scrollBarWidth+t.scrollBarMargin,height:R-r.borderwidth,x:r.borderwidth/2,y:r.borderwidth/2}),B.select("rect").attr({width:P-2*r.borderwidth+t.scrollBarWidth+t.scrollBarMargin,height:R-2*r.borderwidth,x:r.borderwidth,y:r.borderwidth-U}),D.call(p.setClipUrl,f),H&&b(T,U),y.on("wheel",null),y.on("wheel",function(){U=l.constrain(D.attr("data-scroll")-j.event.deltaY/V*W,-W,0),T=t.scrollBarMargin-U/W*V,b(T,U),0!==U&&U!==-W&&j.event.preventDefault()}),E.on(".drag",null),D.on(".drag",null);var X=j.behavior.drag().on("drag",function(){T=l.constrain(j.event.y-t.scrollBarHeight/2,t.scrollBarMargin,t.scrollBarMargin+V),U=-(T-t.scrollBarMargin)/V*W,b(T,U)});E.call(X),D.call(X)}if(a._context.edits.legendPosition){var Y,Z,$,_;y.classed("cursor-move",!0),o.init({element:y.node(),gd:a,prepFn:function(){var a=p.getTranslate(y);$=a.x,_=a.y},moveFn:function(a,b){var c=$+a,d=_+b;p.setTranslate(y,c,d),Y=o.align(c,0,M.l,M.l+M.w,r.xanchor),Z=o.align(d,0,M.t+M.h,M.t,r.yanchor)},doneFn:function(){void 0!==Y&&void 0!==Z&&k.relayout(a,{"legend.x":Y,"legend.y":Z})},clickFn:function(b,d){var e=c._infolayer.selectAll("g.traces").filter(function(){var a=this.getBoundingClientRect();return d.clientX>=a.left&&d.clientX<=a.right&&d.clientY>=a.top&&d.clientY<=a.bottom});e.size()>0&&(1===b?y._clickTimeout=setTimeout(function(){s(e,a,b)},A):2===b&&(y._clickTimeout&&clearTimeout(y._clickTimeout),s(e,a,b)))}})}}}},{"../../constants/alignment":711,"../../constants/interactions":716,"../../lib":738,"../../lib/svg_text_utils":761,"../../plotly":780,"../../plots/plots":846,"../../registry":861,"../color":613,"../dragelement":635,"../drawing":638,"./anchor_utils":664,"./constants":666,"./get_legend_data":669,"./handle_click":670,"./helpers":671,"./style":673,d3:123}],669:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("./helpers");b.exports=function(a,b){function c(a,c){if(""!==a&&e.isGrouped(b))-1===i.indexOf(a)?(i.push(a),j=!0,h[a]=[[c]]):h[a].push([c]);else{var d="~~i"+l;i.push(d),h[d]=[[c]],l++}}var f,g,h={},i=[],j=!1,k={},l=0;for(f=0;f<a.length;f++){var m=a[f],n=m[0],o=n.trace,p=o.legendgroup;if(e.legendGetsTrace(o)&&o.showlegend)if(d.traceIs(o,"pie"))for(k[p]||(k[p]={}),g=0;g<m.length;g++){var q=m[g].label;k[p][q]||(c(p,{label:q,color:m[g].color,i:m[g].i,trace:o}),k[p][q]=!0)}else c(p,n)}if(!i.length)return[];var r,s,t=i.length;if(j&&e.isGrouped(b))for(s=new Array(t),f=0;t>f;f++)r=h[i[f]],s[f]=e.isReversed(b)?r.reverse():r;else{for(s=[new Array(t)],f=0;t>f;f++)r=h[i[f]][0],s[0][e.isReversed(b)?t-f-1:f]=r;t=1}return b._lgroupsLength=t,s}},{"../../registry":861,"./helpers":671}],670:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../lib"),f=a("../../registry"),g=!0;b.exports=function(a,b,c){function h(a,b,c){var d=v.indexOf(a),e=u[b];return e||(e=u[b]=[]),-1===v.indexOf(a)&&(v.push(a),d=v.length-1),e[d]=c,d}function i(a,b){var c=a._fullInput;if(f.hasTransform(c,"groupby")){var d=w[c.index];if(!d){var g=f.getTransformIndices(c,"groupby"),i=g[g.length-1];d=e.keyedContainer(c,"transforms["+i+"].styles","target","value.visible"),w[c.index]=d}var j=d.get(a._group);void 0===j&&(j=!0),j!==!1&&d.set(a._group,b),x[c.index]=h(c.index,"visible",c.visible===!1?!1:!0)}else{var k=c.visible===!1?!1:b;h(c.index,"visible",k)}}if(!b._dragged&&!b._editing){var j,k,l,m,n,o,p=b._fullLayout.hiddenlabels?b._fullLayout.hiddenlabels.slice():[],q=a.data()[0][0],r=b._fullData,s=q.trace,t=s.legendgroup,u={},v=[],w=[],x=[];if(1===c&&g&&b.data&&b._context.showTips?(e.notifier(e._(b,"Double-click on legend to isolate one trace"),"long"),g=!1):g=!1,f.traceIs(s,"pie")){var y=q.label,z=p.indexOf(y);1===c?-1===z?p.push(y):p.splice(z,1):2===c&&(p=[],b.calcdata[0].forEach(function(a){y!==a.label&&p.push(a.label)}),b._fullLayout.hiddenlabels&&b._fullLayout.hiddenlabels.length===p.length&&-1===z&&(p=[])),d.relayout(b,"hiddenlabels",p)}else{var A,B=t&&t.length,C=[];if(B)for(j=0;j<r.length;j++)A=r[j],A.visible&&A.legendgroup===t&&C.push(j);if(1===c){var D;switch(s.visible){case!0:D="legendonly";break;case!1:D=!1;break;case"legendonly":D=!0}if(B)for(j=0;j<r.length;j++)r[j].visible!==!1&&r[j].legendgroup===t&&i(r[j],D);else i(s,D)}else if(2===c){var E,F,G,H=!0;for(j=0;j<r.length;j++)if(E=r[j]===s,!E&&(F=B&&r[j].legendgroup===t,!F&&r[j].visible===!0&&!f.traceIs(r[j],"notLegendIsolatable"))){H=!1;break}for(j=0;j<r.length;j++)if(r[j].visible!==!1&&!f.traceIs(r[j],"notLegendIsolatable"))switch(s.visible){case"legendonly":i(r[j],!0);break;case!0:G=H?!0:"legendonly",E=r[j]===s,F=E||B&&r[j].legendgroup===t,i(r[j],F?!0:G)}}for(j=0;j<w.length;j++)if(l=w[j]){var I=l.constructUpdate(),J=Object.keys(I);for(k=0;k<J.length;k++)m=J[k],o=u[m]=u[m]||[],o[x[j]]=I[m]}for(n=Object.keys(u),j=0;j<n.length;j++)for(m=n[j],k=0;k<v.length;k++)u[m].hasOwnProperty(k)||(u[m][k]=void 0);d.restyle(b,u,v)}}}},{"../../lib":738,"../../plotly":780,"../../registry":861}],671:[function(a,b,c){"use strict";var d=a("../../registry");c.legendGetsTrace=function(a){return a.visible&&d.traceIs(a,"showLegend")},c.isGrouped=function(a){return-1!==(a.traceorder||"").indexOf("grouped")},c.isVertical=function(a){return"h"!==a.orientation},c.isReversed=function(a){return-1!==(a.traceorder||"").indexOf("reversed")}},{"../../registry":861}],672:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"legend",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw"),style:a("./style")}},{"./attributes":665,"./defaults":667,"./draw":668,"./style":673}],673:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../registry"),f=a("../../lib"),g=a("../drawing"),h=a("../color"),i=a("../../traces/scatter/subtypes"),j=a("../../traces/pie/style_one");b.exports=function(a,b){function c(a){var b=a[0].trace,c=b.visible&&b.fill&&"none"!==b.fill,e=i.hasLines(b);b&&b._module&&"contourcarpet"===b._module.name&&(e=b.contours.showlines,c="fill"===b.contours.coloring);var f=d.select(this).select(".legendfill").selectAll("path").data(c?[a]:[]);f.enter().append("path").classed("js-fill",!0),f.exit().remove(),f.attr("d","M5,0h30v6h-30z").call(g.fillGroupStyle);var h=d.select(this).select(".legendlines").selectAll("path").data(e?[a]:[]);h.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),h.exit().remove(),h.call(g.lineGroupStyle)}function k(a){function c(a,b,c){var d=f.nestedProperty(l,a).get(),e=Array.isArray(d)&&b?b(d):d;if(c){if(e<c[0])return c[0];if(e>c[1])return c[1]}return e}function e(a){return a[0]}var h,j,k=a[0],l=k.trace,m=i.hasMarkers(l),n=i.hasText(l),o=i.hasLines(l);if(m||n||o){var p={},q={};m&&(p.mc=c("marker.color",e),p.mo=c("marker.opacity",f.mean,[.2,1]),p.ms=c("marker.size",f.mean,[2,16]),p.mlc=c("marker.line.color",e),p.mlw=c("marker.line.width",f.mean,[0,5]),q.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),o&&(q.line={width:c("line.width",e,[0,10])}),n&&(p.tx="Aa",p.tp=c("textposition",e),p.ts=10,p.tc=c("textfont.color",e),p.tf=c("textfont.family",e)),h=[f.minExtend(k,p)],j=f.minExtend(l,q)}var r=d.select(this).select("g.legendpoints"),s=r.selectAll("path.scatterpts").data(m?h:[]);s.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),s.exit().remove(),s.call(g.pointStyle,j,b),m&&(h[0].mrc=3);var t=r.selectAll("g.pointtext").data(n?h:[]);t.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),t.exit().remove(),t.selectAll("text").call(g.textPointStyle,j,b)}function l(a){var b=a[0].trace,c=b.marker||{},f=c.line||{},g=d.select(this).select("g.legendpoints").selectAll("path.legendbar").data(e.traceIs(b,"bar")?[a]:[]);g.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),g.exit().remove(),g.each(function(a){var b=d.select(this),e=a[0],g=(e.mlw+1||f.width+1)-1;b.style("stroke-width",g+"px").call(h.fill,e.mc||c.color),g&&b.call(h.stroke,e.mlc||f.color)})}function m(a){var b=a[0].trace,c=d.select(this).select("g.legendpoints").selectAll("path.legendbox").data(e.traceIs(b,"box-violin")&&b.visible?[a]:[]);c.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.each(function(){var a=b.line.width,c=d.select(this);c.style("stroke-width",a+"px").call(h.fill,b.fillcolor),a&&c.call(h.stroke,b.line.color)})}function n(a){var b=a[0].trace,c=d.select(this).select("g.legendpoints").selectAll("path.legendpie").data(e.traceIs(b,"pie")&&b.visible?[a]:[]);c.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.size()&&c.call(j,a[0],b)}a.each(function(a){var b=d.select(this),c=b.selectAll("g.layers").data([0]);c.enter().append("g").classed("layers",!0),c.style("opacity",a[0].trace.opacity);var e=c.selectAll("g.legendfill").data([a]);e.enter().append("g").classed("legendfill",!0);var f=c.selectAll("g.legendlines").data([a]);f.enter().append("g").classed("legendlines",!0);var g=c.selectAll("g.legendsymbols").data([a]);g.enter().append("g").classed("legendsymbols",!0),g.selectAll("g.legendpoints").data([a]).enter().append("g").classed("legendpoints",!0)}).each(l).each(m).each(n).each(c).each(k)}},{"../../lib":738,"../../registry":861,"../../traces/pie/style_one":1040,"../../traces/scatter/subtypes":1076,"../color":613,"../drawing":638,d3:123}],674:[function(a,b,c){"use strict";function d(a,b){var c,d,e=b.currentTarget,f=e.getAttribute("data-attr"),g=e.getAttribute("data-val")||!0,h=a._fullLayout,i={},j=n.list(a,null,!0),k="on";if("zoom"===f){var m,o="in"===g?.5:2,p=(1+o)/2,q=(1-o)/2;for(d=0;d<j.length;d++)if(c=j[d],!c.fixedrange)if(m=c._name,"auto"===g)i[m+".autorange"]=!0;else if("reset"===g){if(void 0===c._rangeInitial)i[m+".autorange"]=!0;else{var r=c._rangeInitial.slice();i[m+".range[0]"]=r[0],i[m+".range[1]"]=r[1]}void 0!==c._showSpikeInitial&&(i[m+".showspikes"]=c._showSpikeInitial,"on"!==k||c._showSpikeInitial||(k="off"))}else{var s=[c.r2l(c.range[0]),c.r2l(c.range[1])],t=[p*s[0]+q*s[1],p*s[1]+q*s[0]];i[m+".range[0]"]=c.l2r(t[0]),i[m+".range[1]"]=c.l2r(t[1])}h._cartesianSpikesEnabled=k}else{if("hovermode"!==f||"x"!==g&&"y"!==g){if("hovermode"===f&&"closest"===g){for(d=0;d<j.length;d++)c=j[d],"on"!==k||c.showspikes||(k="off");h._cartesianSpikesEnabled=k}}else g=h._isHoriz?"y":"x",e.setAttribute("data-val",g),"closest"!==g&&(h._cartesianSpikesEnabled="off");i[f]=g}l.relayout(a,i)}function e(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout._subplots.gl3d,g={},h=d.split("."),i=0;i<f.length;i++)g[f[i]+"."+h[1]]=e;l.relayout(a,g)}function f(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=a._fullLayout,f=e._subplots.gl3d,g={},h=0;h<f.length;h++){var i=f[h],j=i+".camera",k=e[i]._scene;"resetDefault"===d?g[j]=null:"resetLastSave"===d&&(g[j]=o.extendDeep({},k.cameraInitial))}l.relayout(a,g)}function g(a,b){var c=b.currentTarget,d=c._previousVal||!1,e=a.layout,f=a._fullLayout,g=f._subplots.gl3d,h=["xaxis","yaxis","zaxis"],i=["showspikes","spikesides","spikethickness","spikecolor"],j={},k={},m={};if(d)m=o.extendDeep(e,d),c._previousVal=null;else{m={"allaxes.showspikes":!1};for(var n=0;n<g.length;n++){var p=g[n],q=f[p],r=j[p]={};r.hovermode=q.hovermode,m[p+".hovermode"]=!1;for(var s=0;3>s;s++){var t=h[s];k=r[t]={};for(var u=0;u<i.length;u++){var v=i[u];k[v]=q[t][v]}}}c._previousVal=o.extendDeep({},j)}l.relayout(a,m)}function h(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout,g=f._subplots.geo,h=0;h<g.length;h++){var i=g[h],j=f[i];if("zoom"===d){var m=j.projection.scale,n="in"===e?2*m:.5*m;l.relayout(a,i+".projection.scale",n)}else"reset"===d&&k(a,"geo")}}function i(a){var b,c=a._fullLayout;b=c._has("cartesian")?c._isHoriz?"y":"x":"closest";var d=a._fullLayout.hovermode?!1:b;l.relayout(a,"hovermode",d)}function j(a){for(var b,c,d=a._fullLayout,e=n.list(a,null,!0),f={},g=0;g<e.length;g++)b=e[g],c=b._name,f[c+".showspikes"]="on"===d._cartesianSpikesEnabled?!0:!1;return f}function k(a,b){for(var c=a._fullLayout,d=c._subplots[b],e={},f=0;f<d.length;f++)for(var g=d[f],h=c[g]._subplot,i=h.viewInitial,j=Object.keys(i),k=0;k<j.length;k++){var m=j[k];e[g+"."+m]=i[m]}l.relayout(a,e)}var l=a("../../plotly"),m=a("../../plots/plots"),n=a("../../plots/cartesian/axis_ids"),o=a("../../lib"),p=a("../../snapshot/download"),q=a("../../../build/ploticon"),r=o._,s=b.exports={};s.toImage={name:"toImage",title:function(a){return r(a,"Download plot as a png")},icon:q.camera,click:function(a){var b="png";o.notifier(r(a,"Taking snapshot - this may take a few seconds"),"long"),o.isIE()&&(o.notifier(r(a,"IE only supports svg.  Changing format to svg."),"long"),b="svg"),p(a,{format:b}).then(function(b){o.notifier(r(a,"Snapshot succeeded")+" - "+b,"long")})["catch"](function(){o.notifier(r(a,"Sorry, there was a problem downloading your snapshot!"),"long")})}},s.sendDataToCloud={name:"sendDataToCloud",title:function(a){return r(a,"Edit in Chart Studio")},icon:q.disk,click:function(a){m.sendDataToCloud(a)}},s.zoom2d={name:"zoom2d",title:function(a){return r(a,"Zoom")},attr:"dragmode",val:"zoom",icon:q.zoombox,click:d},s.pan2d={name:"pan2d",title:function(a){return r(a,"Pan")},attr:"dragmode",val:"pan",icon:q.pan,click:d},s.select2d={name:"select2d",title:function(a){return r(a,"Box Select")},attr:"dragmode",val:"select",icon:q.selectbox,click:d},s.lasso2d={name:"lasso2d",title:function(a){return r(a,"Lasso Select")},attr:"dragmode",val:"lasso",icon:q.lasso,click:d},s.zoomIn2d={name:"zoomIn2d",title:function(a){return r(a,"Zoom in")},attr:"zoom",val:"in",icon:q.zoom_plus,click:d},s.zoomOut2d={name:"zoomOut2d",title:function(a){return r(a,"Zoom out")},attr:"zoom",val:"out",icon:q.zoom_minus,click:d},s.autoScale2d={name:"autoScale2d",title:function(a){return r(a,"Autoscale")},attr:"zoom",val:"auto",icon:q.autoscale,click:d},s.resetScale2d={name:"resetScale2d",title:function(a){return r(a,"Reset axes")},attr:"zoom",val:"reset",icon:q.home,click:d},s.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(a){return r(a,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:q.tooltip_basic,gravity:"ne",click:d},s.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(a){return r(a,"Compare data on hover")},attr:"hovermode",val:function(a){return a._fullLayout._isHoriz?"y":"x"},icon:q.tooltip_compare,gravity:"ne",click:d},s.zoom3d={name:"zoom3d",title:function(a){return r(a,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:q.zoombox,click:e},s.pan3d={name:"pan3d",title:function(a){return r(a,"Pan")},attr:"scene.dragmode",val:"pan",icon:q.pan,click:e},s.orbitRotation={name:"orbitRotation",title:function(a){return r(a,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:q["3d_rotate"],click:e},s.tableRotation={name:"tableRotation",title:function(a){return r(a,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:q["z-axis"],click:e},s.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(a){return r(a,"Reset camera to default")},attr:"resetDefault",icon:q.home,click:f},s.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(a){return r(a,"Reset camera to last save")},attr:"resetLastSave",icon:q.movie,click:f},s.hoverClosest3d={name:"hoverClosest3d",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:g},s.zoomInGeo={name:"zoomInGeo",title:function(a){return r(a,"Zoom in")},attr:"zoom",val:"in",icon:q.zoom_plus,click:h},s.zoomOutGeo={name:"zoomOutGeo",title:function(a){return r(a,"Zoom out")},attr:"zoom",val:"out",icon:q.zoom_minus,click:h},s.resetGeo={name:"resetGeo",title:function(a){return r(a,"Reset")},attr:"reset",val:null,icon:q.autoscale,click:h},s.hoverClosestGeo={name:"hoverClosestGeo",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:i},s.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:i},s.hoverClosestPie={name:"hoverClosestPie",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:q.tooltip_basic,gravity:"ne",click:i},s.toggleHover={name:"toggleHover",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:function(a,b){i(a),g(a,b)}},s.resetViews={name:"resetViews",title:function(a){return r(a,"Reset views")},icon:q.home,click:function(a,b){var c=b.currentTarget;c.setAttribute("data-attr","zoom"),c.setAttribute("data-val","reset"),d(a,b),c.setAttribute("data-attr","resetLastSave"),f(a,b),k(a,"geo"),k(a,"mapbox")}},s.toggleSpikelines={name:"toggleSpikelines",title:function(a){return r(a,"Toggle Spike Lines")},icon:q.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(a){var b=a._fullLayout;b._cartesianSpikesEnabled="closest"===b.hovermode&&"on"===b._cartesianSpikesEnabled?"off":"on";var c=j(a);c.hovermode="closest",l.relayout(a,c)}},s.resetViewMapbox={name:"resetViewMapbox",title:function(a){return r(a,"Reset view")},attr:"reset",icon:q.home,click:function(a){k(a,"mapbox")}}},{"../../../build/ploticon":2,"../../lib":738,"../../plotly":780,"../../plots/cartesian/axis_ids":788,"../../plots/plots":846,"../../snapshot/download":863}],675:[function(a,b,c){"use strict";c.manage=a("./manage")},{"./manage":676}],676:[function(a,b,c){"use strict";function d(a,b,c){function d(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];-1===b.indexOf(e)&&c.push(m[e])}r.push(c)}var h=a._fullLayout,i=a._fullData,j=h._has("cartesian"),k=h._has("gl3d"),l=h._has("geo"),n=h._has("pie"),o=h._has("gl2d"),p=h._has("ternary"),q=h._has("mapbox"),r=[];if(d(["toImage","sendDataToCloud"]),(j||o||n||p)+l+k>1)return d(["resetViews","toggleHover"]),g(r,c);k&&(d(["zoom3d","pan3d","orbitRotation","tableRotation"]),d(["resetCameraDefault3d","resetCameraLastSave3d"]),d(["hoverClosest3d"]));var s=e(h),t=[];return((j||o)&&!s||p)&&(t=["zoom2d","pan2d"]),(q||l)&&(t=["pan2d"]),f(i)&&(t.push("select2d"),t.push("lasso2d")),t.length&&d(t),!j&&!o||s||p||d(["zoomIn2d","zoomOut2d","autoScale2d","resetScale2d"]),j&&n?d(["toggleHover"]):o?d(["hoverClosestGl2d"]):j?d(["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]):n?d(["hoverClosestPie"]):q?d(["resetViewMapbox","toggleHover"]):l&&(d(["zoomInGeo","zoomOutGeo","resetGeo"]),d(["hoverClosestGeo"])),g(r,c)}function e(a){for(var b=i.list({_fullLayout:a},null,!0),c=0;c<b.length;c++)if(!b[c].fixedrange)return!1;return!0}function f(a){for(var b=!1,c=0;c<a.length&&!b;c++){var d=a[c];d._module&&d._module.selectPoints&&(k.traceIs(d,"scatter-like")?(j.hasMarkers(d)||j.hasText(d))&&(b=!0):k.traceIs(d,"box-violin")?("all"===d.boxpoints||"all"===d.points)&&(b=!0):b=!0)}return b}function g(a,b){if(b.length)if(Array.isArray(b[0]))for(var c=0;c<b.length;c++)a.push(b[c]);else a.push(b);return a}function h(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.length;d++){var e=c[d];if("string"==typeof e){if(void 0===m[e])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));a[b][d]=m[e]}}return a}var i=a("../../plots/cartesian/axis_ids"),j=a("../../traces/scatter/subtypes"),k=a("../../registry"),l=a("./modebar"),m=a("./buttons");b.exports=function(a){var b=a._fullLayout,c=a._context,e=b._modeBar;if(!c.displayModeBar)return void(e&&(e.destroy(),delete b._modeBar));if(!Array.isArray(c.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(c.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var f,g=c.modeBarButtons;f=Array.isArray(g)&&g.length?h(g):d(a,c.modeBarButtonsToRemove,c.modeBarButtonsToAdd),e?e.update(a,f):b._modeBar=l(a,f)}},{"../../plots/cartesian/axis_ids":788,"../../registry":861,"../../traces/scatter/subtypes":1076,"./buttons":674,"./modebar":677}],677:[function(a,b,c){"use strict";function d(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}function e(a,b){var c=a._fullLayout,e=new d({graphInfo:a,container:c._paperdiv.node(),buttons:b});return c._privateplot&&f.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),e}var f=a("d3"),g=a("../../lib"),h=a("../../../build/ploticon"),i=d.prototype;i.update=function(a,b){this.graphInfo=a;var c=this.graphInfo._context;"hover"===c.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var d=!this.hasButtons(b),e=this.hasLogo!==c.displaylogo;(d||e)&&(this.removeAllButtons(),this.updateButtons(b),c.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},i.updateButtons=function(a){var b=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(a){var c=b.createGroup();a.forEach(function(a){var d=a.name;if(!d)throw new Error("must provide button 'name' in button config");if(-1!==b.buttonsNames.indexOf(d))throw new Error("button name '"+d+"' is taken");b.buttonsNames.push(d);var e=b.createButton(a);b.buttonElements.push(e),c.appendChild(e)}),b.element.appendChild(c)})},i.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},i.createButton=function(a){var b=this,c=document.createElement("a");c.setAttribute("rel","tooltip"),c.className="modebar-btn";var d=a.title;void 0===d?d=a.name:"function"==typeof d&&(d=d(this.graphInfo)),(d||0===d)&&c.setAttribute("data-title",d),void 0!==a.attr&&c.setAttribute("data-attr",a.attr);var e=a.val;void 0!==e&&("function"==typeof e&&(e=e(this.graphInfo)),c.setAttribute("data-val",e));var g=a.click;if("function"!=typeof g)throw new Error("must provide button 'click' function in button config");return c.addEventListener("click",function(c){a.click(b.graphInfo,c),b.updateActiveButton(c.currentTarget)}),c.setAttribute("data-toggle",a.toggle||!1),a.toggle&&f.select(c).classed("active",!0),c.appendChild(this.createIcon(a.icon||h.question,a.name)),c.setAttribute("data-gravity",a.gravity||"n"),c},i.createIcon=function(a,b){var c=a.ascent-a.descent,d="http://www.w3.org/2000/svg",e=document.createElementNS(d,"svg"),f=document.createElementNS(d,"path");e.setAttribute("height","1em"),e.setAttribute("width",a.width/c+"em"),e.setAttribute("viewBox",[0,0,a.width,c].join(" "));var g="toggleSpikelines"===b?"matrix(1.5 0 0 -1.5 0 "+a.ascent+")":"matrix(1 0 0 -1 0 "+a.ascent+")";return f.setAttribute("d",a.path),f.setAttribute("transform",g),e.appendChild(f),e},i.updateActiveButton=function(a){var b=this.graphInfo._fullLayout,c=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var d=a.getAttribute("data-val")||!0,e=a.getAttribute("data-attr"),h="true"===a.getAttribute("data-toggle"),i=f.select(a);if(h)e===c&&i.classed("active",!i.classed("active"));else{var j=null===e?e:g.nestedProperty(b,e).get();i.classed("active",j===d)}})},i.hasButtons=function(a){var b=this.buttons;if(!b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;d++)if(a[c][d].name!==b[c][d].name)return!1}return!0},i.getLogo=function(){var a=this.createGroup(),b=document.createElement("a");return b.href="https://plot.ly/",b.target="_blank",b.setAttribute("data-title",g._(this.graphInfo,"Produced with Plotly")),b.className="modebar-btn plotlyjsicon modebar-btn--logo",b.appendChild(this.createIcon(h.plotlylogo)),a.appendChild(b),a},i.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},i.destroy=function(){g.removeElement(this.container.querySelector(".modebar"))},b.exports=e},{"../../../build/ploticon":2,"../../lib":738,d3:123}],678:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat,g=a("./button_attributes");g=f(g,{_isLinkedToArray:"button"}),b.exports={visible:{valType:"boolean",editType:"plot"},buttons:g,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:d({editType:"plot"}),bgcolor:{valType:"color",dflt:e.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../lib/extend":727,"../../plots/font_attributes":810,"../color/attributes":612,"./button_attributes":679}],679:[function(a,b,c){"use strict";b.exports={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],
dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"}},{}],680:[function(a,b,c){"use strict";b.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],681:[function(a,b,c){"use strict";function d(a,b,c){function d(a,b){return f.coerce(e,g,i,a,b)}for(var e,g,h=a.buttons||[],j=b.buttons=[],k=0;k<h.length;k++)if(e=h[k],g={},f.isPlainObject(e)){var l=d("step");"all"!==l&&(!c||"gregorian"===c||"month"!==l&&"year"!==l?d("stepmode"):g.stepmode="backward",d("count")),d("label"),g._index=k,j.push(g)}return j}function e(a,b,c){for(var d=c.filter(function(c){return b[c].anchor===a._id}),e=0,f=0;f<d.length;f++){var g=b[d[f]].domain;g&&(e=Math.max(g[1],e))}return[a.domain[0],e+j.yPad]}var f=a("../../lib"),g=a("../color"),h=a("./attributes"),i=a("./button_attributes"),j=a("./constants");b.exports=function(a,b,c,i,k){function l(a,b){return f.coerce(m,n,h,a,b)}var m=a.rangeselector||{},n=b.rangeselector={},o=d(m,n,k),p=l("visible",o.length>0);if(p){var q=e(b,c,i);l("x",q[0]),l("y",q[1]),f.noneOrAll(a,b,["x","y"]),l("xanchor"),l("yanchor"),f.coerceFont(l,"font",c.font);var r=l("bgcolor");l("activecolor",g.contrast(r,j.lightAmount,j.darkAmount)),l("bordercolor"),l("borderwidth")}}},{"../../lib":738,"../color":613,"./attributes":678,"./button_attributes":679,"./constants":680}],682:[function(a,b,c){"use strict";function d(a){for(var b=r.list(a,"x",!0),c=[],d=0;d<b.length;d++){var e=b[d];e.rangeselector&&e.rangeselector.visible&&c.push(e)}return c}function e(a){return a._id}function f(a,b,c){if("all"===b.step)return a.autorange===!0;var d=Object.keys(c);return a.range[0]===c[d[0]]&&a.range[1]===c[d[1]]}function g(a,b,c){var d=a.selectAll("rect").data([0]);d.enter().append("rect").classed("selector-rect",!0),d.attr("shape-rendering","crispEdges"),d.attr({rx:u.rx,ry:u.ry}),d.call(o.stroke,b.bordercolor).call(o.fill,h(b,c)).style("stroke-width",b.borderwidth+"px")}function h(a,b){return b.isActive||b.isHovered?a.activecolor:a.bgcolor}function i(a,b,c,d){function e(a){q.convertToTspans(a,d)}var f=a.selectAll("text").data([0]);f.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),f.attr("text-anchor","middle"),f.call(p.font,b.font).text(j(c)).call(e)}function j(a){return a.label?a.label:"all"===a.step?"all":a.count+a.step.charAt(0)}function k(a,b,c,d){c.width=0,c.height=0;var e=c.borderwidth;b.each(function(){var a=l.select(this),b=a.select(".selector-text"),d=c.font.size*t,e=Math.max(d*q.lineCount(b),16)+3;c.height=Math.max(c.height,e)}),b.each(function(){var a=l.select(this),b=a.select(".selector-rect"),d=a.select(".selector-text"),f=d.node()&&p.bBox(d.node()).width,g=c.font.size*t,h=q.lineCount(d),i=Math.max(f+10,u.minButtonWidth);a.attr("transform","translate("+(e+c.width)+","+e+")"),b.attr({x:0,y:0,width:i,height:c.height}),q.positionText(d,i/2,c.height/2-(h-1)*g/2+3),c.width+=i+5}),b.selectAll("rect").attr("height",c.height);var f=a._fullLayout._size;c.lx=f.l+f.w*c.x,c.ly=f.t+f.h*(1-c.y);var g="left";s.isRightAnchor(c)&&(c.lx-=c.width,g="right"),s.isCenterAnchor(c)&&(c.lx-=c.width/2,g="center");var h="top";s.isBottomAnchor(c)&&(c.ly-=c.height,h="bottom"),s.isMiddleAnchor(c)&&(c.ly-=c.height/2,h="middle"),c.width=Math.ceil(c.width),c.height=Math.ceil(c.height),c.lx=Math.round(c.lx),c.ly=Math.round(c.ly),n.autoMargin(a,d+"-range-selector",{x:c.x,y:c.y,l:c.width*({right:1,center:.5}[g]||0),r:c.width*({left:1,center:.5}[g]||0),b:c.height*({top:1,middle:.5}[h]||0),t:c.height*({bottom:1,middle:.5}[h]||0)})}var l=a("d3"),m=a("../../plotly"),n=a("../../plots/plots"),o=a("../color"),p=a("../drawing"),q=a("../../lib/svg_text_utils"),r=a("../../plots/cartesian/axis_ids"),s=a("../legend/anchor_utils"),t=a("../../constants/alignment").LINE_SPACING,u=a("./constants"),v=a("./get_update_object");b.exports=function(a){var b=a._fullLayout,c=b._infolayer.selectAll(".rangeselector").data(d(a),e);c.enter().append("g").classed("rangeselector",!0),c.exit().remove(),c.style({cursor:"pointer","pointer-events":"all"}),c.each(function(b){var c=l.select(this),d=b,e=d.rangeselector,h=c.selectAll("g.button").data(e.buttons);h.enter().append("g").classed("button",!0),h.exit().remove(),h.each(function(b){var c=l.select(this),h=v(d,b);b.isActive=f(d,b,h),c.call(g,e,b),c.call(i,e,b,a),c.on("click",function(){a._dragged||m.relayout(a,h)}),c.on("mouseover",function(){b.isHovered=!0,c.call(g,e,b)}),c.on("mouseout",function(){b.isHovered=!1,c.call(g,e,b)})}),k(a,h,e,d._name),c.attr("transform","translate("+e.lx+","+e.ly+")")})}},{"../../constants/alignment":711,"../../lib/svg_text_utils":761,"../../plotly":780,"../../plots/cartesian/axis_ids":788,"../../plots/plots":846,"../color":613,"../drawing":638,"../legend/anchor_utils":664,"./constants":680,"./get_update_object":683,d3:123}],683:[function(a,b,c){"use strict";function d(a,b){var c,d=a.range,f=new Date(a.r2l(d[1])),g=b.step,h=b.count;switch(b.stepmode){case"backward":c=a.l2r(+e.time[g].utc.offset(f,-h));break;case"todate":var i=e.time[g].utc.offset(f,-h);c=a.l2r(+e.time[g].utc.ceil(i))}var j=d[1];return[c,j]}var e=a("d3");b.exports=function(a,b){var c=a._name,e={};if("all"===b.step)e[c+".autorange"]=!0;else{var f=d(a,b);e[c+".range[0]"]=f[0],e[c+".range[1]"]=f[1]}return e}},{d3:123}],684:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":678,"./defaults":681,"./draw":682}],685:[function(a,b,c){"use strict";var d=a("../color/attributes");b.exports={bgcolor:{valType:"color",dflt:d.background,editType:"calc"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"calc"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"calc"},autorange:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":612}],686:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("./constants");b.exports=function(a){for(var b=d.list(a,"x",!0),c=0;c<b.length;c++){var f=b[c],g=f[e.name];g&&g.visible&&g.autorange&&f._min.length&&f._max.length&&(g._input.autorange=!0,g._input.range=g.range=d.getAutoRange(f))}}},{"../../plots/cartesian/axes":785,"./constants":687}],687:[function(a,b,c){"use strict";b.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskColor:"rgba(0,0,0,0.4)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],688:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c){function f(a,b){return d.coerce(g,i,e,a,b)}if(a[c].rangeslider){d.isPlainObject(a[c].rangeslider)||(a[c].rangeslider={});var g=a[c].rangeslider,h=b[c],i=h.rangeslider={},j=f("visible");if(j){if(f("bgcolor",b.plot_bgcolor),f("bordercolor"),f("borderwidth"),f("thickness"),f("autorange",!h.isValidRange(g.range)),f("range"),i.range){var k=i.range,l=h.range;k[0]=h.l2r(Math.min(h.r2l(k[0]),h.r2l(l[0]))),k[1]=h.l2r(Math.max(h.r2l(k[1]),h.r2l(l[1])))}h.cleanRange("rangeslider.range"),i._input=g}}}},{"../../lib":738,"./attributes":685}],689:[function(a,b,c){"use strict";function d(a){var b=w.list({_fullLayout:a},"x",!0),c=z.name,d=[];if(a._has("gl2d"))return d;for(var e=0;e<b.length;e++){var f=b[e];f[c]&&f[c].visible&&d.push(f)}return d}function e(a,b,c,d){var e=a.select("rect."+z.slideBoxClassName).node(),g=a.select("rect."+z.grabAreaMinClassName).node(),h=a.select("rect."+z.grabAreaMaxClassName).node();a.on("mousedown",function(){function i(i){var j,k,s,t=+i.clientX-m;switch(l){case e:s="ew-resize",j=o+t,k=q+t;break;case g:s="col-resize",j=o+t,k=q;break;case h:s="col-resize",j=o,k=q+t;break;default:s="ew-resize",j=n,k=n+t}if(j>k){var u=k;k=j,j=u}d._pixelMin=j,d._pixelMax=k,y(p.select(r),s),f(a,b,c,d)}function j(){r.removeEventListener("mousemove",i),r.removeEventListener("mouseup",j),s.removeElement(r)}var k=p.event,l=k.target,m=k.clientX,n=m-a.node().getBoundingClientRect().left,o=d.d2p(c._rl[0]),q=d.d2p(c._rl[1]),r=x.coverSlip();r.addEventListener("mousemove",i),r.addEventListener("mouseup",j)})}function f(a,b,c,d){function e(a){return c.l2r(s.constrain(a,d._rl[0],d._rl[1]))}var f=e(d.p2d(d._pixelMin)),g=e(d.p2d(d._pixelMax));window.requestAnimationFrame(function(){q.relayout(b,c._name+".range",[f,g])})}function g(a,b,c,d){function e(a){return s.constrain(a,0,d._width)}function f(a){return s.constrain(a,-g,d._width+g)}var g=z.handleWidth/2,h=e(d.d2p(c._rl[0])),i=e(d.d2p(c._rl[1]));a.select("rect."+z.slideBoxClassName).attr("x",h).attr("width",i-h),a.select("rect."+z.maskMinClassName).attr("width",h),a.select("rect."+z.maskMaxClassName).attr("x",i).attr("width",d._width-i);var j=.5,k=Math.round(f(h-g))-j,l=Math.round(f(i-g))+j;a.select("g."+z.grabberMinClassName).attr("transform","translate("+k+","+j+")"),a.select("g."+z.grabberMaxClassName).attr("transform","translate("+l+","+j+")")}function h(a,b,c,d){var e=a.selectAll("rect."+z.bgClassName).data([0]);e.enter().append("rect").classed(z.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var f=d.borderwidth%2===0?d.borderwidth:d.borderwidth-1,g=-d._offsetShift,h=t.crispRound(b,d.borderwidth);e.attr({width:d._width+f,height:d._height+f,transform:"translate("+g+","+g+")",fill:d.bgcolor,stroke:d.bordercolor,"stroke-width":h})}function i(a,b,c,d){var e=b._fullLayout,f=e._topdefs.selectAll("#"+d._clipId).data([0]);f.enter().append("clipPath").attr("id",d._clipId).append("rect").attr({x:0,y:0}),f.select("rect").attr({width:d._width,height:d._height})}function j(a,b,c,d){var e=w.getSubplots(b,c),f=b.calcdata,g=a.selectAll("g."+z.rangePlotClassName).data(e,s.identity);g.enter().append("g").attr("class",function(a){return z.rangePlotClassName+" "+a}).call(t.setClipUrl,d._clipId),g.order(),g.exit().remove();var h;g.each(function(a,e){var g=p.select(this),i=0===e,j=w.getFromId(b,a,"y"),l=j._name,m={data:[],layout:{xaxis:{type:c.type,domain:[0,1],range:d.range.slice(),calendar:c.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:b._context};m.layout[l]={type:j.type,domain:[0,1],range:j.range.slice(),calendar:j.calendar},r.supplyDefaults(m);var n=m._fullLayout.xaxis,o=m._fullLayout[l],q={id:a,plotgroup:g,xaxis:n,yaxis:o};i?h=q:(q.mainplot="xy",q.mainplotinfo=h),v.rangePlot(b,q,k(f,a))})}function k(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f.xaxis+f.yaxis===b&&c.push(e)}return c}function l(a,b,c,d){var e=a.selectAll("rect."+z.maskMinClassName).data([0]);e.enter().append("rect").classed(z.maskMinClassName,!0).attr({x:0,y:0}).attr("shape-rendering","crispEdges"),e.attr("height",d._height).call(u.fill,z.maskColor);var f=a.selectAll("rect."+z.maskMaxClassName).data([0]);f.enter().append("rect").classed(z.maskMaxClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),f.attr("height",d._height).call(u.fill,z.maskColor)}function m(a,b,c,d){if(!b._context.staticPlot){var e=a.selectAll("rect."+z.slideBoxClassName).data([0]);e.enter().append("rect").classed(z.slideBoxClassName,!0).attr("y",0).attr("cursor",z.slideBoxCursor).attr("shape-rendering","crispEdges"),e.attr({height:d._height,fill:z.slideBoxFill})}}function n(a,b,c,d){var e=a.selectAll("g."+z.grabberMinClassName).data([0]);e.enter().append("g").classed(z.grabberMinClassName,!0);var f=a.selectAll("g."+z.grabberMaxClassName).data([0]);f.enter().append("g").classed(z.grabberMaxClassName,!0);var g={x:0,width:z.handleWidth,rx:z.handleRadius,fill:u.background,stroke:u.defaultLine,"stroke-width":z.handleStrokeWidth,"shape-rendering":"crispEdges"},h={y:Math.round(d._height/4),height:Math.round(d._height/2)},i=e.selectAll("rect."+z.handleMinClassName).data([0]);i.enter().append("rect").classed(z.handleMinClassName,!0).attr(g),i.attr(h);var j=f.selectAll("rect."+z.handleMaxClassName).data([0]);if(j.enter().append("rect").classed(z.handleMaxClassName,!0).attr(g),j.attr(h),!b._context.staticPlot){var k={width:z.grabAreaWidth,x:0,y:0,fill:z.grabAreaFill,cursor:z.grabAreaCursor},l=e.selectAll("rect."+z.grabAreaMinClassName).data([0]);l.enter().append("rect").classed(z.grabAreaMinClassName,!0).attr(k),l.attr("height",d._height);var m=f.selectAll("rect."+z.grabAreaMaxClassName).data([0]);m.enter().append("rect").classed(z.grabAreaMaxClassName,!0).attr(k),m.attr("height",d._height)}}function o(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];-1!==e.indexOf(z.name)&&r.autoMargin(a,e)}}var p=a("d3"),q=a("../../plotly"),r=a("../../plots/plots"),s=a("../../lib"),t=a("../drawing"),u=a("../color"),v=a("../../plots/cartesian"),w=a("../../plots/cartesian/axes"),x=a("../dragelement"),y=a("../../lib/setcursor"),z=a("./constants");b.exports=function(a){function b(a){return a._name}var c=a._fullLayout,f=d(c),k=c._infolayer.selectAll("g."+z.containerClassName).data(f,b);k.enter().append("g").classed(z.containerClassName,!0).attr("pointer-events","all"),k.exit().each(function(a){var b=p.select(this),d=a[z.name];b.remove(),c._topdefs.select("#"+d._clipId).remove()}),k.exit().size()&&o(a),0!==f.length&&k.each(function(b){var d=p.select(this),f=b[z.name],k=c[w.id2name(b.anchor)],o=c.margin,q=c._size,s=b.domain,t=k.domain,u=(b._boundingBox||{}).height||0;f._id=z.name+b._id,f._clipId=f._id+"-"+c._uid,f._width=q.w*(s[1]-s[0]),f._height=(c.height-o.b-o.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2);var v=Math.round(o.l+q.w*s[0]),x=Math.round(o.t+q.h*(1-t[0])+u+f._offsetShift+z.extraPad);d.attr("transform","translate("+v+","+x+")");var y=b.r2l(f.range[0]),A=b.r2l(f.range[1]),B=A-y;f.p2d=function(a){return a/f._width*B+y},f.d2p=function(a){return(a-y)/B*f._width},f._rl=[y,A],d.call(h,a,b,f).call(i,a,b,f).call(j,a,b,f).call(l,a,b,f).call(m,a,b,f).call(n,a,b,f),e(d,a,b,f),g(d,a,b,f),r.autoMargin(a,f._id,{x:s[0],y:t[0],l:0,r:0,t:0,b:f._height+o.b+u,pad:z.extraPad+2*f._offsetShift})})}},{"../../lib":738,"../../lib/setcursor":757,"../../plotly":780,"../../plots/cartesian":796,"../../plots/cartesian/axes":785,"../../plots/plots":846,"../color":613,"../dragelement":635,"../drawing":638,"./constants":687,d3:123}],690:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),calcAutorange:a("./calc_autorange"),draw:a("./draw")}},{"./attributes":685,"./calc_autorange":686,"./defaults":688,"./draw":689}],691:[function(a,b,c){"use strict";var d=a("../annotations/attributes"),e=a("../../traces/scatter/attributes").line,f=a("../drawing/attributes").dash,g=a("../../lib/extend").extendFlat;b.exports={_isLinkedToArray:"shape",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:g({},d.xref,{}),x0:{valType:"any",editType:"calcIfAutorange"},x1:{valType:"any",editType:"calcIfAutorange"},yref:g({},d.yref,{}),y0:{valType:"any",editType:"calcIfAutorange"},y1:{valType:"any",editType:"calcIfAutorange"},path:{valType:"string",editType:"calcIfAutorange"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:g({},e.color,{editType:"arraydraw"}),width:g({},e.width,{editType:"calcIfAutorange"}),dash:g({},f,{editType:"arraydraw"}),editType:"calcIfAutorange"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"}},{"../../lib/extend":727,"../../traces/scatter/attributes":1054,"../annotations/attributes":596,"../drawing/attributes":637}],692:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f="category"===a.type?a.r2c:a.d2c;if(void 0!==b)return[f(b),f(c)];if(d){var i,j,k,l,m,n=1/0,o=-(1/0),p=d.match(g.segmentRE);for("date"===a.type&&(f=h.decodeDate(f)),i=0;i<p.length;i++)j=p[i],k=e[j.charAt(0)].drawn,void 0!==k&&(l=p[i].substr(1).match(g.paramRE),!l||l.length<k||(m=f(l[k]),n>m&&(n=m),m>o&&(o=m)));return o>=n?[n,o]:void 0}}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("./constants"),h=a("./helpers");b.exports=function(a){var b=a._fullLayout,c=e.filterVisible(b.shapes);if(c.length&&a._fullData.length)for(var h=0;h<c.length;h++){var i,j,k=c[h],l=k.line.width/2;"paper"!==k.xref&&(i=f.getFromId(a,k.xref),j=d(i,k.x0,k.x1,k.path,g.paramIsX),j&&f.expand(i,j,{ppad:l})),"paper"!==k.yref&&(i=f.getFromId(a,k.yref),j=d(i,k.y0,k.y1,k.path,g.paramIsY),j&&f.expand(i,j,{ppad:l}))}}},{"../../lib":738,"../../plots/cartesian/axes":785,"./constants":693,"./helpers":696}],693:[function(a,b,c){"use strict";b.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],694:[function(a,b,c){"use strict";var d=a("../../plots/array_container_defaults"),e=a("./shape_defaults");b.exports=function(a,b){var c={name:"shapes",handleItemDefaults:e};d(a,b,c)}},{"../../plots/array_container_defaults":782,"./shape_defaults":698}],695:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;b._shapeUpperLayer.selectAll("path").remove(),b._shapeLowerLayer.selectAll("path").remove(),b._shapeSubplotLayers.selectAll("path").remove();for(var c=0;c<b.shapes.length;c++)b.shapes[c].visible&&e(a,c)}function e(a,b){function c(c){var d={"data-index":b,"fill-rule":"evenodd",d:g(a,e)},h=e.line.width?e.line.color:"rgba(0,0,0,0)",i=c.append("path").attr(d).style("opacity",e.opacity).call(m.stroke,h).call(m.fill,e.fillcolor).call(n.dashLine,e.line.dash,e.line.width),j=(e.xref+e.yref).replace(/paper/g,"");i.call(n.setClipUrl,j?"clip"+a._fullLayout._uid+j:null),a._context.edits.shapePosition&&f(a,i,e,b)}a._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+b+'"]').remove();var d=(a.layout.shapes||[])[b],e=a._fullLayout.shapes[b];if(d&&e.visible!==!1)if("below"!==e.layer)c(a._fullLayout._shapeUpperLayer);else if("paper"===e.xref||"paper"===e.yref)c(a._fullLayout._shapeLowerLayer);else{var h=a._fullLayout._plots[e.xref+e.yref];if(h){var i=h.mainplotinfo||h;c(i.shapelayer)}else c(a._fullLayout._shapeLowerLayer)}}function f(a,b,c,d){function e(a){var c=X.right-X.left,d=X.bottom-X.top,e=a.clientX-X.left,f=a.clientY-X.top,g=c>U&&d>V&&!a.shiftKey?o.getCursor(e/c,1-f/d):"move";p(b,g),T=g.split("-")[0]}function f(b){N=l.getFromId(a,c.xref),O=l.getFromId(a,c.yref),P=r.getDataToPixel(a,N),Q=r.getDataToPixel(a,O,!0),R=r.getPixelToData(a,N),S=r.getPixelToData(a,O,!0);var f="shapes["+d+"]";"path"===c.type?(L=c.path,M=f+".path"):(q=P(c.x0),s=Q(c.y0),t=P(c.x1),u=Q(c.y1),v=f+".x0",w=f+".y0",x=f+".x1",y=f+".y1"),t>q?(B=q,F=f+".x0",J="x0",C=t,G=f+".x1",K="x1"):(B=t,F=f+".x1",J="x1",C=q,G=f+".x0",K="x0"),u>s?(z=s,D=f+".y0",H="y0",A=u,E=f+".y1",I="y1"):(z=u,D=f+".y1",H="y1",A=s,E=f+".y0",I="y0"),n={},e(b),W.moveFn="move"===T?k:m}function h(){p(b),j.relayout(a,n)}function k(d,e){if("path"===c.type){var f=function(a){return R(P(a)+d)};N&&"date"===N.type&&(f=r.encodeDate(f));var h=function(a){return S(Q(a)+e)};O&&"date"===O.type&&(h=r.encodeDate(h)),c.path=i(L,f,h),n[M]=c.path}else n[v]=c.x0=R(q+d),n[w]=c.y0=S(s+e),n[x]=c.x1=R(t+d),n[y]=c.y1=S(u+e);b.attr("d",g(a,c))}function m(d,e){if("path"===c.type){var f=function(a){return R(P(a)+d)};N&&"date"===N.type&&(f=r.encodeDate(f));var h=function(a){return S(Q(a)+e)};O&&"date"===O.type&&(h=r.encodeDate(h)),c.path=i(L,f,h),n[M]=c.path}else{var j=~T.indexOf("n")?z+e:z,k=~T.indexOf("s")?A+e:A,l=~T.indexOf("w")?B+d:B,m=~T.indexOf("e")?C+d:C;k-j>V&&(n[D]=c[H]=S(j),n[E]=c[I]=S(k)),m-l>U&&(n[F]=c[J]=R(l),n[G]=c[K]=R(m))}b.attr("d",g(a,c))}var n,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U=10,V=10,W={element:b.node(),gd:a,prepFn:f,doneFn:h},X=W.element.getBoundingClientRect();o.init(W),b.node().onmousemove=e}function g(a,b){var c,d,e,f,g=b.type,i=l.getFromId(a,b.xref),j=l.getFromId(a,b.yref),k=a._fullLayout._size;if(i?(c=r.shapePositionToRange(i),d=function(a){return i._offset+i.r2p(c(a,!0))}):d=function(a){return k.l+k.w*a},j?(e=r.shapePositionToRange(j),f=function(a){return j._offset+j.r2p(e(a,!0))}):f=function(a){return k.t+k.h*(1-a)},"path"===g)return i&&"date"===i.type&&(d=r.decodeDate(d)),j&&"date"===j.type&&(f=r.decodeDate(f)),h(b.path,d,f);var m=d(b.x0),n=d(b.x1),o=f(b.y0),p=f(b.y1);if("line"===g)return"M"+m+","+o+"L"+n+","+p;if("rect"===g)return"M"+m+","+o+"H"+n+"V"+p+"H"+m+"Z";var q=(m+n)/2,s=(o+p)/2,t=Math.abs(q-m),u=Math.abs(s-o),v="A"+t+","+u,w=q+t+","+s,x=q+","+(s-u);return"M"+w+v+" 0 1,1 "+x+v+" 0 0,1 "+w+"Z"}function h(a,b,c){return a.replace(q.segmentRE,function(a){var d=0,e=a.charAt(0),f=q.paramIsX[e],g=q.paramIsY[e],h=q.numParams[e],i=a.substr(1).replace(q.paramRE,function(a){return f[d]?a=b(a):g[d]&&(a=c(a)),d++,d>h&&(a="X"),a});return d>h&&(i=i.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+a)),e+i})}function i(a,b,c){return a.replace(q.segmentRE,function(a){var d=0,e=a.charAt(0),f=q.paramIsX[e],g=q.paramIsY[e],h=q.numParams[e],i=a.substr(1).replace(q.paramRE,function(a){return d>=h?a:(f[d]?a=b(a):g[d]&&(a=c(a)),d++,a)});return e+i})}var j=a("../../plotly"),k=a("../../lib"),l=a("../../plots/cartesian/axes"),m=a("../color"),n=a("../drawing"),o=a("../dragelement"),p=a("../../lib/setcursor"),q=a("./constants"),r=a("./helpers");b.exports={draw:d,drawOne:e}},{"../../lib":738,"../../lib/setcursor":757,"../../plotly":780,"../../plots/cartesian/axes":785,"../color":613,"../dragelement":635,"../drawing":638,"./constants":693,"./helpers":696}],696:[function(a,b,c){"use strict";c.rangeToShapePosition=function(a){return"log"===a.type?a.r2d:function(a){return a}},c.shapePositionToRange=function(a){return"log"===a.type?a.d2r:function(a){return a}},c.decodeDate=function(a){return function(b){return b.replace&&(b=b.replace("_"," ")),a(b)}},c.encodeDate=function(a){return function(b){return a(b).replace(" ","_")}},c.getDataToPixel=function(a,b,d){var e,f=a._fullLayout._size;if(b){var g=c.shapePositionToRange(b);e=function(a){return b._offset+b.r2p(g(a,!0))},"date"===b.type&&(e=c.decodeDate(e))}else e=d?function(a){return f.t+f.h*(1-a)}:function(a){return f.l+f.w*a};return e},c.getPixelToData=function(a,b,d){var e,f=a._fullLayout._size;if(b){var g=c.rangeToShapePosition(b);e=function(a){return g(b.p2r(a-b._offset))}}else e=d?function(a){return 1-(a-f.t)/f.h}:function(a){return(a-f.l)/f.w};return e}},{}],697:[function(a,b,c){"use strict";var d=a("./draw");b.exports={moduleType:"component",name:"shapes",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("shapes"),calcAutorange:a("./calc_autorange"),draw:d.draw,drawOne:d.drawOne}},{"../../plots/cartesian/include_components":795,"./attributes":691,"./calc_autorange":692,"./defaults":694,"./draw":695}],698:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("./attributes"),g=a("./helpers");b.exports=function(a,b,c,h,i){function j(c,e){return d.coerce(a,b,f,c,e)}h=h||{},i=i||{};var k=j("visible",!i.itemIsNotPlainObject);if(!k)return b;j("layer"),j("opacity"),j("fillcolor"),j("line.color"),j("line.width"),j("line.dash");for(var l=a.path?"path":"rect",m=j("type",l),n=["x","y"],o=0;2>o;o++){var p=n[o],q={_fullLayout:c},r=e.coerceRef(a,b,q,p,"","paper");if("path"!==m){var s,t,u,v=.25,w=.75;"paper"!==r?(s=e.getFromId(q,r),u=g.rangeToShapePosition(s),t=g.shapePositionToRange(s)):t=u=d.identity;var x=p+"0",y=p+"1",z=a[x],A=a[y];a[x]=t(a[x],!0),a[y]=t(a[y],!0),e.coercePosition(b,q,j,r,x,v),e.coercePosition(b,q,j,r,y,w),b[x]=u(b[x]),b[y]=u(b[y]),a[x]=z,a[y]=A}}return"path"===m?j("path"):d.noneOrAll(a,b,["x0","x1","y0","y1"]),b}},{"../../lib":738,"../../plots/cartesian/axes":785,"./attributes":691,"./helpers":696}],699:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../../plots/pad_attributes"),f=a("../../lib/extend").extendDeepAll,g=a("../../plot_api/edit_types").overrideAll,h=a("../../plots/animation_attributes"),i=a("./constants"),j={_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}};b.exports=g({_isLinkedToArray:"slider",visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:j,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:f({},e,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:d({})},font:d({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}},"arraydraw","from-root")},{"../../lib/extend":727,"../../plot_api/edit_types":769,"../../plots/animation_attributes":781,"../../plots/font_attributes":810,"../../plots/pad_attributes":845,"./constants":700}],700:[function(a,b,c){"use strict";b.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],701:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return f.coerce(a,b,h,c,d)}var g=e(a,b),i=d("visible",g.length>0);if(i){d("active"),d("x"),d("y"),f.noneOrAll(a,b,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),f.coerceFont(d,"font",c.font);var j=d("currentvalue.visible");j&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),f.coerceFont(d,"currentvalue.font",b.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen")}}function e(a,b){function c(a,b){return f.coerce(d,e,k,a,b)}for(var d,e,g=a.steps||[],h=b.steps=[],i=0;i<g.length;i++)d=g[i],e={},c("method"),f.isPlainObject(d)&&("skip"===e.method||Array.isArray(d.args))&&(c("args"),c("label","step-"+i),c("value",e.label),c("execute"),h.push(e));return h}var f=a("../../lib"),g=a("../../plots/array_container_defaults"),h=a("./attributes"),i=a("./constants"),j=i.name,k=h.steps;b.exports=function(a,b){var c={name:j,handleItemDefaults:d};g(a,b,c)}},{"../../lib":738,"../../plots/array_container_defaults":782,"./attributes":699,"./constants":700}],702:[function(a,b,c){"use strict";function d(a,b){for(var c=a[C.name],d=[],e=0;e<c.length;e++){var f=c[e];f.visible&&f.steps.length&&(f.gd=b,d.push(f))}return d}function e(a){return a._index}function f(a,b){var c=z.tester.selectAll("g."+C.labelGroupClass).data(b.steps);c.enter().append("g").classed(C.labelGroupClass,!0);var d=0,e=0;c.each(function(a){var c=w.select(this),f=j(c,{step:a},b),g=f.node();if(g){var h=z.bBox(g);e=Math.max(e,h.height),d=Math.max(d,h.width)}}),c.remove(),b.inputAreaWidth=Math.max(C.railWidth,C.gripHeight);var f=a._fullLayout._size;b.lx=f.l+f.w*b.x,b.ly=f.t+f.h*(1-b.y),"fraction"===b.lenmode?b.outerLength=Math.round(f.w*b.len):b.outerLength=b.len,b.lenPad=Math.round(.5*C.gripWidth),b.inputAreaStart=0,b.inputAreaLength=Math.round(b.outerLength-b.pad.l-b.pad.r);var g=b.inputAreaLength-2*C.stepInset,i=g/(b.steps.length-1),k=d+C.labelPadding;if(b.labelStride=Math.max(1,Math.ceil(k/i)),b.labelHeight=e,b.currentValueMaxWidth=0,b.currentValueHeight=0,b.currentValueTotalHeight=0,b.currentValueMaxLines=1,b.currentvalue.visible){var l=z.tester.append("g");c.each(function(a){var c=h(l,b,a.label),d=c.node()&&z.bBox(c.node())||{width:0,height:0},e=A.lineCount(c);b.currentValueMaxWidth=Math.max(b.currentValueMaxWidth,Math.ceil(d.width)),b.currentValueHeight=Math.max(b.currentValueHeight,Math.ceil(d.height)),b.currentValueMaxLines=Math.max(b.currentValueMaxLines,e)}),b.currentValueTotalHeight=b.currentValueHeight+b.currentvalue.offset,l.remove()}b.height=b.currentValueTotalHeight+C.tickOffset+b.ticklen+C.labelOffset+b.labelHeight+b.pad.t+b.pad.b;var m="left";B.isRightAnchor(b)&&(b.lx-=b.outerLength,m="right"),B.isCenterAnchor(b)&&(b.lx-=b.outerLength/2,m="center");var n="top";B.isBottomAnchor(b)&&(b.ly-=b.height,n="bottom"),B.isMiddleAnchor(b)&&(b.ly-=b.height/2,n="middle"),b.outerLength=Math.ceil(b.outerLength),b.height=Math.ceil(b.height),b.lx=Math.round(b.lx),b.ly=Math.round(b.ly),x.autoMargin(a,C.autoMarginIdRoot+b._index,{x:b.x,y:b.y,l:b.outerLength*({right:1,center:.5}[m]||0),r:b.outerLength*({left:1,center:.5}[m]||0),b:b.height*({top:1,middle:.5}[n]||0),t:b.height*({bottom:1,middle:.5}[n]||0)})}function g(a,b,c){c.active>=c.steps.length&&(c.active=0),b.call(h,c).call(u,c).call(k,c).call(o,c).call(t,a,c).call(i,a,c),z.setTranslate(b,c.lx+c.pad.l,c.ly+c.pad.t),b.call(q,c,c.active/(c.steps.length-1),!1),b.call(h,c)}function h(a,b,c){if(b.currentvalue.visible){var d,e,f=a.selectAll("text").data([0]);switch(b.currentvalue.xanchor){case"right":d=b.inputAreaLength-C.currentValueInset-b.currentValueMaxWidth,e="left";break;case"center":d=.5*b.inputAreaLength,
e="middle";break;default:d=C.currentValueInset,e="left"}f.enter().append("text").classed(C.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":e,"data-notex":1});var g=b.currentvalue.prefix?b.currentvalue.prefix:"";if("string"==typeof c)g+=c;else{var h=b.steps[b.active].label;g+=h}b.currentvalue.suffix&&(g+=b.currentvalue.suffix),f.call(z.font,b.currentvalue.font).text(g).call(A.convertToTspans,b.gd);var i=A.lineCount(f),j=(b.currentValueMaxLines+1-i)*b.currentvalue.font.size*D;return A.positionText(f,d,j),f}}function i(a,b,c){var d=a.selectAll("rect."+C.gripRectClass).data([0]);d.enter().append("rect").classed(C.gripRectClass,!0).call(n,b,a,c).style("pointer-events","all"),d.attr({width:C.gripWidth,height:C.gripHeight,rx:C.gripRadius,ry:C.gripRadius}).call(y.stroke,c.bordercolor).call(y.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px")}function j(a,b,c){var d=a.selectAll("text").data([0]);return d.enter().append("text").classed(C.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1}),d.call(z.font,c.font).text(b.step.label).call(A.convertToTspans,c.gd),d}function k(a,b){var c=a.selectAll("g."+C.labelsClass).data([0]);c.enter().append("g").classed(C.labelsClass,!0);var d=c.selectAll("g."+C.labelGroupClass).data(b.labelSteps);d.enter().append("g").classed(C.labelGroupClass,!0),d.exit().remove(),d.each(function(a){var c=w.select(this);c.call(j,a,b),z.setTranslate(c,r(b,a.fraction),C.tickOffset+b.ticklen+b.font.size*D+C.labelOffset+b.currentValueTotalHeight)})}function l(a,b,c,d,e){var f=Math.round(d*(c.steps.length-1));f!==c.active&&m(a,b,c,f,!0,e)}function m(a,b,c,d,e,f){var g=c.active;c._input.active=c.active=d;var i=c.steps[c.active];b.call(q,c,c.active/(c.steps.length-1),f),b.call(h,c),a.emit("plotly_sliderchange",{slider:c,step:c.steps[c.active],interaction:e,previousActive:g}),i&&i.method&&e&&(b._nextMethod?(b._nextMethod.step=i,b._nextMethod.doCallback=e,b._nextMethod.doTransition=f):(b._nextMethod={step:i,doCallback:e,doTransition:f},b._nextMethodRaf=window.requestAnimationFrame(function(){var c=b._nextMethod.step;c.method&&(c.execute&&x.executeAPICommand(a,c.method,c.args),b._nextMethod=null,b._nextMethodRaf=null)})))}function n(a,b,c){function d(){return c.data()[0]}var e=c.node(),f=w.select(b);a.on("mousedown",function(){var a=d();b.emit("plotly_sliderstart",{slider:a});var g=c.select("."+C.gripRectClass);w.event.stopPropagation(),w.event.preventDefault(),g.call(y.fill,a.activebgcolor);var h=s(a,w.mouse(e)[0]);l(b,c,a,h,!0),a._dragging=!0,f.on("mousemove",function(){var a=d(),f=s(a,w.mouse(e)[0]);l(b,c,a,f,!1)}),f.on("mouseup",function(){var a=d();a._dragging=!1,g.call(y.fill,a.bgcolor),f.on("mouseup",null),f.on("mousemove",null),b.emit("plotly_sliderend",{slider:a,step:a.steps[a.active]})})})}function o(a,b){var c=a.selectAll("rect."+C.tickRectClass).data(b.steps);c.enter().append("rect").classed(C.tickRectClass,!0),c.exit().remove(),c.attr({width:b.tickwidth+"px","shape-rendering":"crispEdges"}),c.each(function(a,c){var d=c%b.labelStride===0,e=w.select(this);e.attr({height:d?b.ticklen:b.minorticklen}).call(y.fill,d?b.tickcolor:b.tickcolor),z.setTranslate(e,r(b,c/(b.steps.length-1))-.5*b.tickwidth,(d?C.tickOffset:C.minorTickOffset)+b.currentValueTotalHeight)})}function p(a){a.labelSteps=[];for(var b=0,c=a.steps.length,d=b;c>d;d+=a.labelStride)a.labelSteps.push({fraction:d/(c-1),step:a.steps[d]})}function q(a,b,c,d){var e=a.select("rect."+C.gripRectClass),f=r(b,c);if(!b._invokingCommand){var g=e;d&&b.transition.duration>0&&(g=g.transition().duration(b.transition.duration).ease(b.transition.easing)),g.attr("transform","translate("+(f-.5*C.gripWidth)+","+b.currentValueTotalHeight+")")}}function r(a,b){return a.inputAreaStart+C.stepInset+(a.inputAreaLength-2*C.stepInset)*Math.min(1,Math.max(0,b))}function s(a,b){return Math.min(1,Math.max(0,(b-C.stepInset-a.inputAreaStart)/(a.inputAreaLength-2*C.stepInset-2*a.inputAreaStart)))}function t(a,b,c){var d=a.selectAll("rect."+C.railTouchRectClass).data([0]);d.enter().append("rect").classed(C.railTouchRectClass,!0).call(n,b,a,c).style("pointer-events","all"),d.attr({width:c.inputAreaLength,height:Math.max(c.inputAreaWidth,C.tickOffset+c.ticklen+c.labelHeight)}).call(y.fill,c.bgcolor).attr("opacity",0),z.setTranslate(d,0,c.currentValueTotalHeight)}function u(a,b){var c=a.selectAll("rect."+C.railRectClass).data([0]);c.enter().append("rect").classed(C.railRectClass,!0);var d=b.inputAreaLength-2*C.railInset;c.attr({width:d,height:C.railWidth,rx:C.railRadius,ry:C.railRadius,"shape-rendering":"crispEdges"}).call(y.stroke,b.bordercolor).call(y.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px"),z.setTranslate(c,C.railInset,.5*(b.inputAreaWidth-C.railWidth)+b.currentValueTotalHeight)}function v(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];-1!==e.indexOf(C.autoMarginIdRoot)&&x.autoMargin(a,e)}}var w=a("d3"),x=a("../../plots/plots"),y=a("../color"),z=a("../drawing"),A=a("../../lib/svg_text_utils"),B=a("../legend/anchor_utils"),C=a("./constants"),D=a("../../constants/alignment").LINE_SPACING;b.exports=function(a){var b=a._fullLayout,c=d(b,a),h=b._infolayer.selectAll("g."+C.containerClassName).data(c.length>0?[0]:[]);if(h.enter().append("g").classed(C.containerClassName,!0).style("cursor","ew-resize"),h.exit().remove(),h.exit().size()&&v(a),0!==c.length){var i=h.selectAll("g."+C.groupClassName).data(c,e);i.enter().append("g").classed(C.groupClassName,!0),i.exit().each(function(b){w.select(this).remove(),b._commandObserver.remove(),delete b._commandObserver,x.autoMargin(a,C.autoMarginIdRoot+b._index)});for(var j=0;j<c.length;j++){var k=c[j];f(a,k)}i.each(function(b){if(!(b.steps.length<2)){var c=w.select(this);p(b),x.manageCommandObserver(a,b,b.steps,function(b){var d=c.data()[0];d.active!==b.index&&(d._dragging||m(a,c,d,b.index,!1,!0))}),g(a,w.select(this),b)}})}}},{"../../constants/alignment":711,"../../lib/svg_text_utils":761,"../../plots/plots":846,"../color":613,"../drawing":638,"../legend/anchor_utils":664,"./constants":700,d3:123}],703:[function(a,b,c){"use strict";var d=a("./constants");b.exports={moduleType:"component",name:d.name,layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":699,"./constants":700,"./defaults":701,"./draw":702}],704:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../plotly"),g=a("../../plots/plots"),h=a("../../lib"),i=a("../drawing"),j=a("../color"),k=a("../../lib/svg_text_utils"),l=a("../../constants/interactions"),m=b.exports={},n=/ [XY][0-9]* /;m.draw=function(a,b,c){function m(a){h.syncOrAsync([o,p],a)}function o(b){return b.attr("transform",y?"rotate("+[y.rotate,x.x,x.y]+") translate(0, "+y.offset+")":null),b.style({"font-family":B,"font-size":d.round(C,2)+"px",fill:j.rgb(D),opacity:E*j.opacity(D),"font-weight":g.fontWeight}).attr(x).call(k.convertToTspans,a),g.previousPromises(a)}function p(a){var b=d.select(a.node().parentNode);if(w&&w.selection&&w.side&&G){b.attr("transform",null);var c=0,f={left:"right",right:"left",top:"bottom",bottom:"top"}[w.side],g=-1!==["left","top"].indexOf(w.side)?-1:1,j=e(w.pad)?w.pad:2,k=i.bBox(b.node()),l={left:0,top:0,right:A.width,bottom:A.height},m=w.maxShift||(l[w.side]-k[w.side])*("left"===w.side||"top"===w.side?-1:1);if(0>m)c=m;else{var n=w.offsetLeft||0,o=w.offsetTop||0;k.left-=n,k.right-=n,k.top-=o,k.bottom-=o,w.selection.each(function(){var a=i.bBox(this);h.bBoxIntersect(k,a,j)&&(c=Math.max(c,g*(a[w.side]-k[f])+j))}),c=Math.min(m,c)}if(c>0||0>m){var p={left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[w.side];b.attr("transform","translate("+p+")")}}}function q(){E=0,F=!0,J.text(u).on("mouseover.opacity",function(){d.select(this).transition().duration(l.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(l.HIDE_PLACEHOLDER).style("opacity",0)})}var r,s=c.propContainer,t=c.propName,u=c.placeholder,v=c.traceIndex,w=c.avoid||{},x=c.attributes,y=c.transform,z=c.containerGroup,A=a._fullLayout,B=s.titlefont.family,C=s.titlefont.size,D=s.titlefont.color,E=1,F=!1,G=s.title.trim();"title"===t?r="titleText":-1!==t.indexOf("axis")?r="axisTitleText":t.indexOf(!0)&&(r="colorbarTitleText");var H=a._context.edits[r];""===G?E=0:G.replace(n," % ")===u.replace(n," % ")&&(E=.2,F=!0,H||(G=""));var I=G||H;z||(z=A._infolayer.selectAll(".g-"+b).data([0]),z.enter().append("g").classed("g-"+b,!0));var J=z.selectAll("text").data(I?[0]:[]);J.enter().append("text"),J.text(G).attr("class",b),J.exit().remove(),I&&(J.call(m),H&&(G?J.on(".opacity",null):q(),J.call(k.makeEditable,{gd:a}).on("edit",function(b){void 0!==v?f.restyle(a,t,b,v):f.relayout(a,t,b)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(m)}).on("input",function(a){this.text(a||" ").call(k.positionText,x.x,x.y)})),J.classed("js-placeholder",F))}},{"../../constants/interactions":716,"../../lib":738,"../../lib/svg_text_utils":761,"../../plotly":780,"../../plots/plots":846,"../color":613,"../drawing":638,d3:123,"fast-isnumeric":132}],705:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat,g=a("../../plot_api/edit_types").overrideAll,h=a("../../plots/pad_attributes"),i={_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}};b.exports=g({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:f({},h,{}),font:d({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:e.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}},"arraydraw","from-root")},{"../../lib/extend":727,"../../plot_api/edit_types":769,"../../plots/font_attributes":810,"../../plots/pad_attributes":845,"../color/attributes":612}],706:[function(a,b,c){"use strict";b.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],707:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return f.coerce(a,b,h,c,d)}var g=e(a,b),i=d("visible",g.length>0);i&&(d("active"),d("direction"),d("type"),d("showactive"),d("x"),d("y"),f.noneOrAll(a,b,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),f.coerceFont(d,"font",c.font),d("bgcolor",c.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function e(a,b){function c(a,b){return f.coerce(d,e,k,a,b)}for(var d,e,g=a.buttons||[],h=b.buttons=[],i=0;i<g.length;i++)d=g[i],e={},c("method"),f.isPlainObject(d)&&("skip"===e.method||Array.isArray(d.args))&&(c("args"),c("label"),c("execute"),e._index=i,h.push(e));return h}var f=a("../../lib"),g=a("../../plots/array_container_defaults"),h=a("./attributes"),i=a("./constants"),j=i.name,k=h.buttons;b.exports=function(a,b){var c={name:j,handleItemDefaults:d};g(a,b,c)}},{"../../lib":738,"../../plots/array_container_defaults":782,"./attributes":705,"./constants":706}],708:[function(a,b,c){"use strict";function d(a){for(var b=a[D.name],c=[],d=0;d<b.length;d++){var e=b[d];e.visible&&c.push(e)}return c}function e(a){return a._index}function f(a){return-1===+a.attr(D.menuIndexAttrName)}function g(a,b){return+a.attr(D.menuIndexAttrName)===b._index}function h(a,b,c,d,e,f,g,h){b._input.active=b.active=g,"buttons"===b.type?j(a,d,null,null,b):"dropdown"===b.type&&(e.attr(D.menuIndexAttrName,"-1"),i(a,d,e,f,b),h||j(a,d,e,f,b))}function i(a,b,c,d,e){var f=b.selectAll("g."+D.headerClassName).data([0]);f.enter().append("g").classed(D.headerClassName,!0).style("pointer-events","all");var h=e.active,i=e.buttons[h]||D.blankHeaderOpts,k={y:e.pad.t,yPad:0,x:e.pad.l,xPad:0,index:0},l={width:e.headerWidth,height:e.headerHeight};f.call(m,e,i,a).call(t,e,k,l);var n=b.selectAll("text."+D.headerArrowClassName).data([0]);n.enter().append("text").classed(D.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(z.font,e.font).text(D.arrowSymbol[e.direction]),n.attr({x:e.headerWidth-D.arrowOffsetX+e.pad.l,y:e.headerHeight/2+D.textOffsetY+e.pad.t}),f.on("click",function(){c.call(u),c.attr(D.menuIndexAttrName,g(c,e)?-1:String(e._index)),j(a,b,c,d,e)}),f.on("mouseover",function(){f.call(q)}),f.on("mouseout",function(){f.call(r,e)}),z.setTranslate(b,e.lx,e.ly)}function j(a,b,c,d,e){c||(c=b,c.attr("pointer-events","all"));var g=f(c)&&"buttons"!==e.type?[]:e.buttons,i="dropdown"===e.type?D.dropdownButtonClassName:D.buttonClassName,j=c.selectAll("g."+i).data(g),n=j.enter().append("g").classed(i,!0),o=j.exit();"dropdown"===e.type?(n.attr("opacity","0").transition().attr("opacity","1"),o.transition().attr("opacity","0").remove()):o.remove();var s=0,u=0,v=-1!==["up","down"].indexOf(e.direction);"dropdown"===e.type&&(v?u=e.headerHeight+D.gapButtonHeader:s=e.headerWidth+D.gapButtonHeader),"dropdown"===e.type&&"up"===e.direction&&(u=-D.gapButtonHeader+D.gapButton-e.openHeight),"dropdown"===e.type&&"left"===e.direction&&(s=-D.gapButtonHeader+D.gapButton-e.openWidth);var y={x:e.lx+s+e.pad.l,y:e.ly+u+e.pad.t,yPad:D.gapButton,xPad:D.gapButton,index:0},z={l:y.x+e.borderwidth,t:y.y+e.borderwidth};j.each(function(f,g){var i=w.select(this);i.call(m,e,f,a).call(t,e,y),i.on("click",function(){w.event.defaultPrevented||(h(a,e,f,b,c,d,g),f.execute&&x.executeAPICommand(a,f.method,f.args),a.emit("plotly_buttonclicked",{menu:e,button:f,active:e.active}))}),i.on("mouseover",function(){i.call(q)}),i.on("mouseout",function(){i.call(r,e),j.call(p,e)})}),j.call(p,e),v?(z.w=Math.max(e.openWidth,e.headerWidth),z.h=y.y-z.t):(z.w=y.x-z.l,z.h=Math.max(e.openHeight,e.headerHeight)),z.direction=e.direction,d&&(j.size()?k(a,b,c,d,e,z):l(d))}function k(a,b,c,d,e,f){var g,h,i,j=e.direction,k="up"===j||"down"===j,l=e.active;if(k)for(h=0,i=0;l>i;i++)h+=e.heights[i]+D.gapButton;else for(g=0,i=0;l>i;i++)g+=e.widths[i]+D.gapButton;d.enable(f,g,h),d.hbar&&d.hbar.attr("opacity","0").transition().attr("opacity","1"),d.vbar&&d.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(a){var b=!!a.hbar,c=!!a.vbar;b&&a.hbar.transition().attr("opacity","0").each("end",function(){b=!1,c||a.disable()}),c&&a.vbar.transition().attr("opacity","0").each("end",function(){c=!1,b||a.disable()})}function m(a,b,c,d){a.call(n,b).call(o,b,c,d)}function n(a,b){var c=a.selectAll("rect").data([0]);c.enter().append("rect").classed(D.itemRectClassName,!0).attr({rx:D.rx,ry:D.ry,"shape-rendering":"crispEdges"}),c.call(y.stroke,b.bordercolor).call(y.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px")}function o(a,b,c,d){var e=a.selectAll("text").data([0]);e.enter().append("text").classed(D.itemTextClassName,!0).classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1}),e.call(z.font,b.font).text(c.label).call(A.convertToTspans,d)}function p(a,b){var c=b.active;a.each(function(a,d){var e=w.select(this);d===c&&b.showactive&&e.select("rect."+D.itemRectClassName).call(y.fill,D.activeColor)})}function q(a){a.select("rect."+D.itemRectClassName).call(y.fill,D.hoverColor)}function r(a,b){a.select("rect."+D.itemRectClassName).call(y.fill,b.bgcolor)}function s(a,b){b.width1=0,b.height1=0,b.heights=[],b.widths=[],b.totalWidth=0,b.totalHeight=0,b.openWidth=0,b.openHeight=0,b.lx=0,b.ly=0;var c=z.tester.selectAll("g."+D.dropdownButtonClassName).data(b.buttons);c.enter().append("g").classed(D.dropdownButtonClassName,!0);var d=-1!==["up","down"].indexOf(b.direction);c.each(function(c,e){var f=w.select(this);f.call(m,b,c,a);var g=f.select("."+D.itemTextClassName),h=g.node()&&z.bBox(g.node()).width,i=Math.max(h+D.textPadX,D.minWidth),j=b.font.size*C,k=A.lineCount(g),l=Math.max(j*k,D.minHeight)+D.textOffsetY;l=Math.ceil(l),i=Math.ceil(i),b.widths[e]=i,b.heights[e]=l,b.height1=Math.max(b.height1,l),b.width1=Math.max(b.width1,i),d?(b.totalWidth=Math.max(b.totalWidth,i),b.openWidth=b.totalWidth,b.totalHeight+=l+D.gapButton,b.openHeight+=l+D.gapButton):(b.totalWidth+=i+D.gapButton,b.openWidth+=i+D.gapButton,b.totalHeight=Math.max(b.totalHeight,l),b.openHeight=b.totalHeight)}),d?b.totalHeight-=D.gapButton:b.totalWidth-=D.gapButton,b.headerWidth=b.width1+D.arrowPadX,b.headerHeight=b.height1,"dropdown"===b.type&&(d?(b.width1+=D.arrowPadX,b.totalHeight=b.height1):b.totalWidth=b.width1,b.totalWidth+=D.arrowPadX),c.remove();var e=b.totalWidth+b.pad.l+b.pad.r,f=b.totalHeight+b.pad.t+b.pad.b,g=a._fullLayout._size;b.lx=g.l+g.w*b.x,b.ly=g.t+g.h*(1-b.y);var h="left";B.isRightAnchor(b)&&(b.lx-=e,h="right"),B.isCenterAnchor(b)&&(b.lx-=e/2,h="center");var i="top";B.isBottomAnchor(b)&&(b.ly-=f,i="bottom"),B.isMiddleAnchor(b)&&(b.ly-=f/2,i="middle"),b.totalWidth=Math.ceil(b.totalWidth),b.totalHeight=Math.ceil(b.totalHeight),b.lx=Math.round(b.lx),b.ly=Math.round(b.ly),x.autoMargin(a,D.autoMarginIdRoot+b._index,{x:b.x,y:b.y,l:e*({right:1,center:.5}[h]||0),r:e*({left:1,center:.5}[h]||0),b:f*({top:1,middle:.5}[i]||0),t:f*({bottom:1,middle:.5}[i]||0)})}function t(a,b,c,d){d=d||{};var e=a.select("."+D.itemRectClassName),f=a.select("."+D.itemTextClassName),g=b.borderwidth,h=c.index;z.setTranslate(a,g+c.x,g+c.y);var i=-1!==["up","down"].indexOf(b.direction),j=d.height||(i?b.heights[h]:b.height1);e.attr({x:0,y:0,width:d.width||(i?b.width1:b.widths[h]),height:j});var k=b.font.size*C,l=A.lineCount(f),m=(l-1)*k/2;A.positionText(f,D.textOffsetX,j/2-m+D.textOffsetY),i?c.y+=b.heights[h]+c.yPad:c.x+=b.widths[h]+c.xPad,c.index++}function u(a){a.selectAll("g."+D.dropdownButtonClassName).remove()}function v(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];-1!==e.indexOf(D.autoMarginIdRoot)&&x.autoMargin(a,e)}}var w=a("d3"),x=a("../../plots/plots"),y=a("../color"),z=a("../drawing"),A=a("../../lib/svg_text_utils"),B=a("../legend/anchor_utils"),C=a("../../constants/alignment").LINE_SPACING,D=a("./constants"),E=a("./scrollbox");b.exports=function(a){var b=a._fullLayout,c=d(b),f=b._menulayer.selectAll("g."+D.containerClassName).data(c.length>0?[0]:[]);if(f.enter().append("g").classed(D.containerClassName,!0).style("cursor","pointer"),f.exit().remove(),f.exit().size()&&v(a),0!==c.length){var k=f.selectAll("g."+D.headerGroupClassName).data(c,e);k.enter().append("g").classed(D.headerGroupClassName,!0);var l=f.selectAll("g."+D.dropdownButtonGroupClassName).data([0]);l.enter().append("g").classed(D.dropdownButtonGroupClassName,!0).style("pointer-events","all");for(var m=0;m<c.length;m++){var n=c[m];s(a,n)}var o="updatemenus"+b._uid,p=new E(a,l,o);k.enter().size()&&(l.node().parentNode.appendChild(l.node()),l.call(u).attr(D.menuIndexAttrName,"-1")),k.exit().each(function(b){w.select(this).remove(),l.call(u).attr(D.menuIndexAttrName,"-1"),x.autoMargin(a,D.autoMarginIdRoot+b._index)}),k.each(function(b){var c=w.select(this),d="dropdown"===b.type?l:null;x.manageCommandObserver(a,b,b.buttons,function(e){h(a,b,b.buttons[e.index],c,d,p,e.index,!0)}),"dropdown"===b.type?(i(a,c,l,p,b),g(l,b)&&j(a,c,l,p,b)):j(a,c,null,null,b)})}}},{"../../constants/alignment":711,"../../lib/svg_text_utils":761,"../../plots/plots":846,"../color":613,"../drawing":638,"../legend/anchor_utils":664,"./constants":706,"./scrollbox":710,d3:123}],709:[function(a,b,c){arguments[4][703][0].apply(c,arguments)},{"./attributes":705,"./constants":706,"./defaults":707,"./draw":708,dup:703}],710:[function(a,b,c){"use strict";function d(a,b,c){this.gd=a,this.container=b,this.id=c,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.exports=d;var e=a("d3"),f=a("../color"),g=a("../drawing"),h=a("../../lib");d.barWidth=2,d.barLength=20,d.barRadius=2,d.barPad=1,d.barColor="#808BA4",d.prototype.enable=function(a,b,c){var h=this.gd._fullLayout,i=h.width,j=h.height;this.position=a;var k,l,m,n,o=this.position.l,p=this.position.w,q=this.position.t,r=this.position.h,s=this.position.direction,t="down"===s,u="left"===s,v="right"===s,w="up"===s,x=p,y=r;t||u||v||w||(this.position.direction="down",t=!0);var z=t||w;z?(k=o,l=k+x,t?(m=q,n=Math.min(m+y,j),y=n-m):(n=q+y,m=Math.max(n-y,0),y=n-m)):(m=q,n=m+y,u?(l=o+x,k=Math.max(l-x,0),x=l-k):(k=o,l=Math.min(k+x,i),x=l-k)),this._box={l:k,t:m,w:x,h:y};var A=p>x,B=d.barLength+2*d.barPad,C=d.barWidth+2*d.barPad,D=o,E=q+r;E+C>j&&(E=j-C);var F=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-horizontal",!0).call(f.fill,d.barColor),A?(this.hbar=F.attr({rx:d.barRadius,ry:d.barRadius,x:D,y:E,width:B,height:C}),this._hbarXMin=D+B/2,this._hbarTranslateMax=x-B):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var G=r>y,H=d.barWidth+2*d.barPad,I=d.barLength+2*d.barPad,J=o+p,K=q;J+H>i&&(J=i-H);var L=this.container.selectAll("rect.scrollbar-vertical").data(G?[0]:[]);L.exit().on(".drag",null).remove(),L.enter().append("rect").classed("scrollbar-vertical",!0).call(f.fill,d.barColor),G?(this.vbar=L.attr({rx:d.barRadius,ry:d.barRadius,x:J,y:K,width:H,height:I}),this._vbarYMin=K+I/2,this._vbarTranslateMax=y-I):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var M=this.id,N=k-.5,O=G?l+H+.5:l+.5,P=m-.5,Q=A?n+C+.5:n+.5,R=h._topdefs.selectAll("#"+M).data(A||G?[0]:[]);if(R.exit().remove(),R.enter().append("clipPath").attr("id",M).append("rect"),A||G?(this._clipRect=R.select("rect").attr({x:Math.floor(N),y:Math.floor(P),width:Math.ceil(O)-Math.floor(N),height:Math.ceil(Q)-Math.floor(P)}),this.container.call(g.setClipUrl,M),this.bg.attr({x:o,y:q,width:p,height:r})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(g.setClipUrl,null),delete this._clipRect),A||G){var S=e.behavior.drag().on("dragstart",function(){e.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(S);var T=e.behavior.drag().on("dragstart",function(){e.event.sourceEvent.preventDefault(),e.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));A&&this.hbar.on(".drag",null).call(T),G&&this.vbar.on(".drag",null).call(T)}this.setTranslate(b,c)},d.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(g.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},d.prototype._onBoxDrag=function(){var a=this.translateX,b=this.translateY;this.hbar&&(a-=e.event.dx),this.vbar&&(b-=e.event.dy),this.setTranslate(a,b)},d.prototype._onBoxWheel=function(){var a=this.translateX,b=this.translateY;this.hbar&&(a+=e.event.deltaY),this.vbar&&(b+=e.event.deltaY),this.setTranslate(a,b)},d.prototype._onBarDrag=function(){var a=this.translateX,b=this.translateY;if(this.hbar){var c=a+this._hbarXMin,d=c+this._hbarTranslateMax,f=h.constrain(e.event.x,c,d),g=(f-c)/(d-c),i=this.position.w-this._box.w;a=g*i}if(this.vbar){var j=b+this._vbarYMin,k=j+this._vbarTranslateMax,l=h.constrain(e.event.y,j,k),m=(l-j)/(k-j),n=this.position.h-this._box.h;b=m*n}this.setTranslate(a,b)},d.prototype.setTranslate=function(a,b){var c=this.position.w-this._box.w,d=this.position.h-this._box.h;if(a=h.constrain(a||0,0,c),b=h.constrain(b||0,0,d),this.translateX=a,this.translateY=b,this.container.call(g.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-b),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+b-.5)}),this.hbar){var e=a/c;this.hbar.call(g.setTranslate,a+e*this._hbarTranslateMax,b)}if(this.vbar){var f=b/d;this.vbar.call(g.setTranslate,a,b+f*this._vbarTranslateMax)}}},{"../../lib":738,"../color":613,"../drawing":638,d3:123}],711:[function(a,b,c){"use strict";b.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],712:[function(a,b,c){"use strict";b.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],713:[function(a,b,c){"use strict";for(var d=a("../lib/extend").extendFlat,e={circle:{unicode:"●"},square:{unicode:"■"},diamond:{unicode:"◆"},cross:{unicode:"✚"},x:{unicode:"❌"},"triangle-up":{unicode:"▲"},"triangle-down":{unicode:"▼"},"triangle-left":{unicode:"◄"},"triangle-right":{unicode:"►"},"triangle-ne":{unicode:"◥"},"triangle-nw":{unicode:"◤"},"triangle-se":{unicode:"◢"},"triangle-sw":{unicode:"◣"},pentagon:{unicode:"⬟"},hexagon:{unicode:"⬢"},hexagon2:{unicode:"⬣"},star:{unicode:"★"},"diamond-tall":{unicode:"♦"},bowtie:{unicode:"⧓"},"diamond-x":{unicode:"❖"},"cross-thin":{unicode:"+",noBorder:!0},asterisk:{unicode:"✳",noBorder:!0},"y-up":{unicode:"⅄",noBorder:!0},"y-down":{unicode:"Y",noBorder:!0},"line-ew":{unicode:"─",noBorder:!0},"line-ns":{unicode:"│",noBorder:!0}},f={},g=Object.keys(e),h=0;h<g.length;h++){var i=g[h];f[i+"-open"]=d({},e[i])}var j={"circle-cross-open":{unicode:"⨁",noFill:!0},"circle-x-open":{unicode:"⨂",noFill:!0},"square-cross-open":{unicode:"⊞",noFill:!0},"square-x-open":{unicode:"⊠",noFill:!0}};b.exports=d({},e,f,j)},{"../lib/extend":727}],714:[function(a,b,c){"use strict";b.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],715:[function(a,b,c){"use strict";b.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],716:[function(a,b,c){"use strict";b.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],717:[function(a,b,c){"use strict";b.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"−"}},{}],718:[function(a,b,c){"use strict";b.exports={entityToUnicode:{mu:"μ","#956":"μ",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:" ","#160":" ",times:"×","#215":"×",plusmn:"±","#177":"±",deg:"°","#176":"°"}}},{}],719:[function(a,b,c){"use strict";c.xmlns="http://www.w3.org/2000/xmlns/",c.svg="http://www.w3.org/2000/svg",c.xlink="http://www.w3.org/1999/xlink",c.svgAttrs={xmlns:c.svg,"xmlns:xlink":c.xlink}},{}],720:[function(a,b,c){"use strict";var d=a("./plotly");c.version="1.32.0",a("es6-promise").polyfill(),a("../build/plotcss"),a("./fonts/mathjax_config"),c.plot=d.plot,c.newPlot=d.newPlot,c.restyle=d.restyle,c.relayout=d.relayout,c.redraw=d.redraw,c.update=d.update,c.extendTraces=d.extendTraces,c.prependTraces=d.prependTraces,c.addTraces=d.addTraces,c.deleteTraces=d.deleteTraces,c.moveTraces=d.moveTraces,c.purge=d.purge,c.setPlotConfig=a("./plot_api/set_plot_config"),c.register=a("./plot_api/register"),c.toImage=a("./plot_api/to_image"),c.downloadImage=a("./snapshot/download"),c.validate=a("./plot_api/validate"),c.addFrames=d.addFrames,c.deleteFrames=d.deleteFrames,c.animate=d.animate,c.register(a("./traces/scatter")),c.register([a("./components/fx"),a("./components/legend"),a("./components/annotations"),a("./components/annotations3d"),a("./components/shapes"),a("./components/images"),a("./components/updatemenus"),a("./components/sliders"),a("./components/rangeslider"),a("./components/rangeselector")]),c.register([a("./locale-en"),a("./locale-en-us")]),c.Icons=a("../build/ploticon"),c.Plots=d.Plots,c.Fx=a("./components/fx"),c.Snapshot=a("./snapshot"),c.PlotSchema=a("./plot_api/plot_schema"),c.Queue=a("./lib/queue"),c.d3=a("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":604,"./components/annotations3d":609,"./components/fx":655,"./components/images":663,"./components/legend":672,"./components/rangeselector":684,"./components/rangeslider":690,"./components/shapes":697,"./components/sliders":703,"./components/updatemenus":709,"./fonts/mathjax_config":721,"./lib/queue":752,"./locale-en":767,"./locale-en-us":766,"./plot_api/plot_schema":774,"./plot_api/register":775,"./plot_api/set_plot_config":776,"./plot_api/to_image":778,"./plot_api/validate":779,"./plotly":780,"./snapshot":866,"./snapshot/download":863,"./traces/scatter":1066,d3:123,"es6-promise":129}],721:[function(a,b,c){"use strict";"undefined"!=typeof MathJax?(c.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):c.MathJax=!1},{}],722:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../constants/numerical").BADNUM,f=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;b.exports=function(a){return"string"==typeof a&&(a=a.replace(f,"")),d(a)?Number(a):e}},{"../constants/numerical":717,"fast-isnumeric":132}],723:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("tinycolor2"),f=a("../plots/attributes"),g=a("../components/colorscale/get_scale"),h=(Object.keys(a("../components/colorscale/scales")),a("./nested_property")),i=a("./regex").counter,j=a("../constants/interactions").DESELECTDIM;c.valObjectMeta={data_array:{coerceFunction:function(a,b,c){Array.isArray(a)?b.set(a):void 0!==c&&b.set(c)}},enumerated:{coerceFunction:function(a,b,c,d){d.coerceNumber&&(a=+a),-1===d.values.indexOf(a)?b.set(c):b.set(a)},validateFunction:function(a,b){b.coerceNumber&&(a=+a);for(var c=b.values,d=0;d<c.length;d++){var e=String(c[d]);if("/"===e.charAt(0)&&"/"===e.charAt(e.length-1)){var f=new RegExp(e.substr(1,e.length-2));if(f.test(a))return!0}else if(a===c[d])return!0}return!1}},"boolean":{coerceFunction:function(a,b,c){a===!0||a===!1?b.set(a):b.set(c)}},number:{coerceFunction:function(a,b,c,e){!d(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>e.max?b.set(c):b.set(+a)}},integer:{coerceFunction:function(a,b,c,e){a%1||!d(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>e.max?b.set(c):b.set(+a)}},string:{coerceFunction:function(a,b,c,d){if("string"!=typeof a){var e="number"==typeof a;d.strict!==!0&&e?b.set(String(a)):b.set(c)}else d.noBlank&&!a?b.set(c):b.set(a)}},color:{coerceFunction:function(a,b,c){e(a).isValid()?b.set(a):b.set(c)}},colorlist:{coerceFunction:function(a,b,c){function d(a){return e(a).isValid()}Array.isArray(a)&&a.length&&a.every(d)?b.set(a):b.set(c);
}},colorscale:{coerceFunction:function(a,b,c){b.set(g(a,c))}},angle:{coerceFunction:function(a,b,c){"auto"===a?b.set("auto"):d(a)?(Math.abs(a)>180&&(a-=360*Math.round(a/360)),b.set(+a)):b.set(c)}},subplotid:{coerceFunction:function(a,b,c){return"string"==typeof a&&i(c).test(a)?void b.set(a):void b.set(c)},validateFunction:function(a,b){var c=b.dflt;return a===c?!0:"string"!=typeof a?!1:i(c).test(a)?!0:!1}},flaglist:{coerceFunction:function(a,b,c,d){if("string"!=typeof a)return void b.set(c);if(-1!==(d.extras||[]).indexOf(a))return void b.set(a);for(var e=a.split("+"),f=0;f<e.length;){var g=e[f];-1===d.flags.indexOf(g)||e.indexOf(g)<f?e.splice(f,1):f++}e.length?b.set(e.join("+")):b.set(c)}},any:{coerceFunction:function(a,b,c){void 0===a?b.set(c):b.set(a)}},info_array:{coerceFunction:function(a,b,d,e){if(!Array.isArray(a))return void b.set(d);var f=e.items,g=[];d=Array.isArray(d)?d:[];for(var h=0;h<f.length;h++)c.coerce(a,g,f,"["+h+"]",d[h]);b.set(g)},validateFunction:function(a,b){if(!Array.isArray(a))return!1;var d=b.items;if(!b.freeLength&&a.length!==d.length)return!1;for(var e=0;e<a.length;e++){var f=c.validate(a[e],b.items[e]);if(!f)return!1}return!0}}},c.coerce=function(a,b,d,e,f){var g=h(d,e).get(),i=h(a,e),j=h(b,e),k=i.get();return void 0===f&&(f=g.dflt),g.arrayOk&&Array.isArray(k)?(j.set(k),k):(c.valObjectMeta[g.valType].coerceFunction(k,j,f,g),j.get())},c.coerce2=function(a,b,d,e,f){var g=h(a,e),i=c.coerce(a,b,d,e,f),j=g.get();return void 0!==j&&null!==j?i:!1},c.coerceFont=function(a,b,c){var d={};return c=c||{},d.family=a(b+".family",c.family),d.size=a(b+".size",c.size),d.color=a(b+".color",c.color),d},c.coerceHoverinfo=function(a,b,d){var e,g=b._module.attributes,h=g.hoverinfo?{hoverinfo:g.hoverinfo}:f,i=h.hoverinfo;if(1===d._dataLength){var j="all"===i.dflt?i.flags.slice():i.dflt.split("+");j.splice(j.indexOf("name"),1),e=j.join("+")}return c.coerce(a,b,h,"hoverinfo",e)},c.coerceSelectionMarkerOpacity=function(a,b){if(a.marker){var c,d,e=a.marker.opacity;Array.isArray(e)||a.selected||a.unselected||(c=e,d=j*e),b("selected.marker.opacity",c),b("unselected.marker.opacity",d)}},c.validate=function(a,b){var d=c.valObjectMeta[b.valType];if(b.arrayOk&&Array.isArray(a))return!0;if(d.validateFunction)return d.validateFunction(a,b);var e={},f=e,g={set:function(a){f=a}};return d.coerceFunction(a,g,e,b),f!==e}},{"../components/colorscale/get_scale":626,"../components/colorscale/scales":632,"../constants/interactions":716,"../plots/attributes":783,"./nested_property":746,"./regex":753,"fast-isnumeric":132,tinycolor2:543}],724:[function(a,b,c){"use strict";function d(a){return a&&x.componentsRegistry.calendars&&"string"==typeof a&&"gregorian"!==a}function e(a,b){return String(a+Math.pow(10,b)).substr(1)}function f(a,b,c,d,f){if((b||c||d||f)&&(a+=" "+e(b,2)+":"+e(c,2),(d||f)&&(a+=":"+e(d,2),f))){for(var g=4;f%10===0;)g-=1,f/=10;a+="."+e(f,g)}return a}function g(a,b,c,e){a=a.replace(H,function(a){var c=Math.min(+a.charAt(1)||6,6),d=(b/1e3%1+2).toFixed(c).substr(2).replace(/0+$/,"")||"0";return d});var f=new Date(Math.floor(b+.05));if(d(e))try{a=x.getComponentMethod("calendars","worldCalFmt")(a,b,e)}catch(g){return"Invalid"}return c(a)(f)}function h(a,b){var c=p(a+.05,s),d=e(Math.floor(c/t),2)+":"+e(p(Math.floor(c/u),60),2);if("M"!==b){n(b)||(b=0);var f=Math.min(p(a/v,60),I[b]),g=(100+f).toFixed(b).substr(1);b>0&&(g=g.replace(/0+$/,"").replace(/[\.]$/,"")),d+=":"+g}return d}function i(a){return a.formatDate("yyyy")}function j(a){return a.formatDate("M yyyy")}function k(a){return a.formatDate("M d")}function l(a){return a.formatDate("M d, yyyy")}var m=a("d3"),n=a("fast-isnumeric"),o=a("./loggers"),p=a("./mod"),q=a("../constants/numerical"),r=q.BADNUM,s=q.ONEDAY,t=q.ONEHOUR,u=q.ONEMIN,v=q.ONESEC,w=q.EPOCHJD,x=a("../registry"),y=m.time.format.utc,z=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,B=(new Date).getFullYear()-70;c.dateTick0=function(a,b){return d(a)?b?x.getComponentMethod("calendars","CANONICAL_SUNDAY")[a]:x.getComponentMethod("calendars","CANONICAL_TICK")[a]:b?"2000-01-02":"2000-01-01"},c.dfltRange=function(a){return d(a)?x.getComponentMethod("calendars","DFLTRANGE")[a]:["2000-01-01","2001-01-01"]},c.isJSDate=function(a){return"object"==typeof a&&null!==a&&"function"==typeof a.getTime};var C,D;c.dateTime2ms=function(a,b){if(c.isJSDate(a))return a=Number(a)-a.getTimezoneOffset()*u,a>=C&&D>=a?a:r;if("string"!=typeof a&&"number"!=typeof a)return r;a=String(a);var e=d(b),f=a.charAt(0);!e||"G"!==f&&"g"!==f||(a=a.substr(1),b="");var g=e&&"chinese"===b.substr(0,7),h=a.match(g?A:z);if(!h)return r;var i=h[1],j=h[3]||"1",k=Number(h[5]||1),l=Number(h[7]||0),m=Number(h[9]||0),n=Number(h[11]||0);if(e){if(2===i.length)return r;i=Number(i);var o;try{var p=x.getComponentMethod("calendars","getCal")(b);if(g){var q="i"===j.charAt(j.length-1);j=parseInt(j,10),o=p.newDate(i,p.toMonthIndex(i,j,q),k)}else o=p.newDate(i,Number(j),k)}catch(y){return r}return o?(o.toJD()-w)*s+l*t+m*u+n*v:r}i=2===i.length?(Number(i)+2e3-B)%100+B:Number(i),j-=1;var E=new Date(Date.UTC(2e3,j,k,l,m));return E.setUTCFullYear(i),E.getUTCMonth()!==j?r:E.getUTCDate()!==k?r:E.getTime()+n*v},C=c.MIN_MS=c.dateTime2ms("-9999"),D=c.MAX_MS=c.dateTime2ms("9999-12-31 23:59:59.9999"),c.isDateTime=function(a,b){return c.dateTime2ms(a,b)!==r};var E=90*s,F=3*t,G=5*u;c.ms2DateTime=function(a,b,c){if("number"!=typeof a||!(a>=C&&D>=a))return r;b||(b=0);var e,g,h,i,j,k,l=Math.floor(10*p(a+.05,1)),m=Math.round(a-l/10);if(d(c)){var n=Math.floor(m/s)+w,o=Math.floor(p(a,s));try{e=x.getComponentMethod("calendars","getCal")(c).fromJD(n).formatDate("yyyy-mm-dd")}catch(q){e=y("G%Y-%m-%d")(new Date(m))}if("-"===e.charAt(0))for(;e.length<11;)e="-0"+e.substr(1);else for(;e.length<10;)e="0"+e;g=E>b?Math.floor(o/t):0,h=E>b?Math.floor(o%t/u):0,i=F>b?Math.floor(o%u/v):0,j=G>b?o%v*10+l:0}else k=new Date(m),e=y("%Y-%m-%d")(k),g=E>b?k.getUTCHours():0,h=E>b?k.getUTCMinutes():0,i=F>b?k.getUTCSeconds():0,j=G>b?10*k.getUTCMilliseconds()+l:0;return f(e,g,h,i,j)},c.ms2DateTimeLocal=function(a){if(!(a>=C+s&&D-s>=a))return r;var b=Math.floor(10*p(a+.05,1)),c=new Date(Math.round(a-b/10)),d=m.time.format("%Y-%m-%d")(c),e=c.getHours(),g=c.getMinutes(),h=c.getSeconds(),i=10*c.getUTCMilliseconds()+b;return f(d,e,g,h,i)},c.cleanDate=function(a,b,e){if(c.isJSDate(a)||"number"==typeof a){if(d(e))return o.error("JS Dates and milliseconds are incompatible with world calendars",a),b;if(a=c.ms2DateTimeLocal(+a),!a&&void 0!==b)return b}else if(!c.isDateTime(a,e))return o.error("unrecognized date",a),b;return a};var H=/%\d?f/g,I=[59,59.9,59.99,59.999,59.9999],J="%Y",K="%b %Y",L="%b %-d",M="%b %-d, %Y";c.formatDate=function(a,b,c,e,f){var m,n;if(f=d(f)&&f,b)return g(b,a,e,f);if(f)try{var o=Math.floor((a+.05)/s)+w,p=x.getComponentMethod("calendars","getCal")(f).fromJD(o);"y"===c?n=i(p):"m"===c?n=j(p):"d"===c?(m=i(p),n=k(p)):(m=l(p),n=h(a,c))}catch(q){return"Invalid"}else{var r=new Date(Math.floor(a+.05));"y"===c?n=e(J)(r):"m"===c?n=e(K)(r):"d"===c?(m=e(J)(r),n=e(L)(r)):(m=e(M)(r),n=h(a,c))}return n+(m?"\n"+m:"")};var N=3*s;c.incrementMonth=function(a,b,c){c=d(c)&&c;var e=p(a,s);if(a=Math.round(a-e),c)try{var f=Math.round(a/s)+w,g=x.getComponentMethod("calendars","getCal")(c),h=g.fromJD(f);return b%12?g.add(h,b,"m"):g.add(h,b/12,"y"),(h.toJD()-w)*s+e}catch(i){o.error("invalid ms "+a+" in calendar "+c)}var j=new Date(a+N);return j.setUTCMonth(j.getUTCMonth()+b)+e-N},c.findExactDates=function(a,b){for(var c,e,f=0,g=0,h=0,i=0,j=d(b)&&x.getComponentMethod("calendars","getCal")(b),k=0;k<a.length;k++)if(e=a[k],n(e)){if(!(e%s))if(j)try{c=j.fromJD(e/s+w),1===c.day()?1===c.month()?f++:g++:h++}catch(l){}else c=new Date(e),1===c.getUTCDate()?0===c.getUTCMonth()?f++:g++:h++}else i++;g+=f,h+=g;var m=a.length-i;return{exactYears:f/m,exactMonths:g/m,exactDays:h/m}}},{"../constants/numerical":717,"../registry":861,"./loggers":743,"./mod":745,d3:123,"fast-isnumeric":132}],725:[function(a,b,c){"use strict";b.exports=function(a,b){return Array.isArray(a)||(a=[]),a.length=b,a}},{}],726:[function(a,b,c){"use strict";var d=a("events").EventEmitter,e={init:function(a){if(a._ev instanceof d)return a;var b=new d,c=new d;return a._ev=b,a._internalEv=c,a.on=b.on.bind(b),a.once=b.once.bind(b),a.removeListener=b.removeListener.bind(b),a.removeAllListeners=b.removeAllListeners.bind(b),a._internalOn=c.on.bind(c),a._internalOnce=c.once.bind(c),a._removeInternalListener=c.removeListener.bind(c),a._removeAllInternalListeners=c.removeAllListeners.bind(c),a.emit=function(d,e){"undefined"!=typeof jQuery&&jQuery(a).trigger(d,e),b.emit(d,e),c.emit(d,e)},a},triggerHandler:function(a,b,c){var d,e;"undefined"!=typeof jQuery&&(d=jQuery(a).triggerHandler(b,c));var f=a._ev;if(!f)return d;var g=f._events[b];if(!g)return d;"function"==typeof g&&(g=[g]);for(var h=g.pop(),i=0;i<g.length;i++)g[i](c);return e=h(c),void 0!==d?d:e},purge:function(a){return delete a._ev,delete a.on,delete a.once,delete a.removeListener,delete a.removeAllListeners,delete a.emit,delete a._ev,delete a._internalEv,delete a._internalOn,delete a._internalOnce,delete a._removeInternalListener,delete a._removeAllInternalListeners,a}};b.exports=e},{events:130}],727:[function(a,b,c){"use strict";function d(a,b){var c,d;for(c=0;c<a.length;c++){if(d=a[c],null!==d&&"object"==typeof d)return!1;void 0!==d&&(b[c]=d)}return!0}function e(a,b,c,h){var i,j,k,l,m,n,o,p=a[0],q=a.length;if(2===q&&g(p)&&g(a[1])&&0===p.length){if(o=d(a[1],p))return p;p.splice(0,p.length)}for(var r=1;q>r;r++){i=a[r];for(j in i)k=p[j],l=i[j],h&&g(l)?p[j]=l:b&&l&&(f(l)||(m=g(l)))?(m?(m=!1,n=k&&g(k)?k:[]):n=k&&f(k)?k:{},p[j]=e([n,l],b,c,h)):("undefined"!=typeof l||c)&&(p[j]=l)}return p}var f=a("./is_plain_object.js"),g=Array.isArray;c.extendFlat=function(){return e(arguments,!1,!1,!1)},c.extendDeep=function(){return e(arguments,!0,!1,!1)},c.extendDeepAll=function(){return e(arguments,!0,!0,!1)},c.extendDeepNoArrays=function(){return e(arguments,!0,!1,!0)}},{"./is_plain_object.js":740}],728:[function(a,b,c){"use strict";b.exports=function(a){for(var b={},c=[],d=0,e=0;e<a.length;e++){var f=a[e];1!==b[f]&&(b[f]=1,c[d++]=f)}return c}},{}],729:[function(a,b,c){"use strict";b.exports=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.visible===!0&&b.push(d)}return b}},{}],730:[function(a,b,c){"use strict";function d(a,b){var c=i[a];return c(b)}function e(a){for(var b=0;b<h.length;b++){var c=h[b],d=new RegExp(f[c]);if(d.test(a.trim().toLowerCase()))return c}return g.log("Unrecognized country name: "+a+"."),!1}var f=a("country-regex"),g=a("../lib"),h=Object.keys(f),i={"ISO-3":g.identity,"USA-states":g.identity,"country names":e};c.locationToFeature=function(a,b,c){if(!b||"string"!=typeof b)return!1;var e=d(a,b);if(e){for(var f=0;f<c.length;f++){var h=c[f];if(h.id===e)return h}g.log(["Location with id",e,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},{"../lib":738,"country-regex":108}],731:[function(a,b,c){"use strict";var d=a("../constants/numerical").BADNUM;c.calcTraceToLineCoords=function(a){for(var b=a[0].trace,c=b.connectgaps,e=[],f=[],g=0;g<a.length;g++){var h=a[g],i=h.lonlat;i[0]!==d?f.push(i):!c&&f.length>0&&(e.push(f),f=[])}return f.length>0&&e.push(f),e},c.makeLine=function(a){return 1===a.length?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}},c.makePolygon=function(a){if(1===a.length)return{type:"Polygon",coordinates:a};for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=[a[c]];return{type:"MultiPolygon",coordinates:b}},c.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":717}],732:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=c-a,j=e-a,k=g-e,l=d-b,m=f-b,n=h-f,o=i*n-k*l;if(0===o)return null;var p=(j*n-k*m)/o,q=(j*l-i*m)/o;return 0>q||q>1||0>p||p>1?null:{x:a+i*p,y:b+l*p}}function e(a,b,c,d,e){var f=d*a+e*b;if(0>f)return d*d+e*e;if(f>c){var g=d-a,h=e-b;return g*g+h*h}var i=d*b-e*a;return i*i/c}var f=a("./mod");c.segmentsIntersect=d,c.segmentDistance=function(a,b,c,f,g,h,i,j){if(d(a,b,c,f,g,h,i,j))return 0;var k=c-a,l=f-b,m=i-g,n=j-h,o=k*k+l*l,p=m*m+n*n,q=Math.min(e(k,l,o,g-a,h-b),e(k,l,o,i-a,j-b),e(m,n,p,a-g,b-h),e(m,n,p,c-g,f-h));return Math.sqrt(q)};var g,h,i;c.getTextLocation=function(a,b,c,d){if((a!==h||d!==i)&&(g={},h=a,i=d),g[c])return g[c];var e=a.getPointAtLength(f(c-d/2,b)),j=a.getPointAtLength(f(c+d/2,b)),k=Math.atan((j.y-e.y)/(j.x-e.x)),l=a.getPointAtLength(f(c,b)),m=(4*l.x+e.x+j.x)/6,n=(4*l.y+e.y+j.y)/6,o={x:m,y:n,theta:k};return g[c]=o,o},c.clearLocationCache=function(){h=null},c.getVisibleSegment=function(a,b,c){function d(b){var c=a.getPointAtLength(b);0===b?e=c:b===l&&(f=c);var d=c.x<g?g-c.x:c.x>h?c.x-h:0,k=c.y<i?i-c.y:c.y>j?c.y-j:0;return Math.sqrt(d*d+k*k)}for(var e,f,g=b.left,h=b.right,i=b.top,j=b.bottom,k=0,l=a.getTotalLength(),m=l,n=d(k);n;){if(k+=n+c,k>m)return;n=d(k)}for(n=d(m);n;){if(m-=n+c,k>m)return;n=d(m)}return{min:k,max:m,len:m-k,total:l,isClosed:0===k&&m===l&&Math.abs(e.x-f.x)<.1&&Math.abs(e.y-f.y)<.1}},c.findPointOnPath=function(a,b,c,d){d=d||{};for(var e,f,g,h=d.pathLength||a.getTotalLength(),i=d.tolerance||.001,j=d.iterationLimit||30,k=a.getPointAtLength(0)[c]>a.getPointAtLength(h)[c]?-1:1,l=0,m=0,n=h;j>l;){if(e=(m+n)/2,f=a.getPointAtLength(e),g=f[c]-b,Math.abs(g)<i)return f;k*g>0?n=e:m=e,l++}return f}},{"./mod":745}],733:[function(a,b,c){"use strict";b.exports=function(a){var b;if("string"==typeof a){if(b=document.getElementById(a),null===b)throw new Error("No DOM element with id '"+a+"' exists on the page.");return b}if(null===a||void 0===a)throw new Error("DOM element provided is null or undefined");return a}},{}],734:[function(a,b,c){"use strict";function d(a,b){var c=a;return c[3]*=b,c}function e(a){if(h(a))return l;var b=i(a);return b.length?b:l}function f(a){return h(a)?a:m}function g(a,b,c){var g,h,k,n,o,p=a.color,q=Array.isArray(p),r=Array.isArray(b),s=[];if(g=void 0!==a.colorscale?j.makeColorScaleFunc(j.extractScale(a.colorscale,a.cmin,a.cmax)):e,h=q?function(a,b){return void 0===a[b]?l:i(g(a[b]))}:e,k=r?function(a,b){return void 0===a[b]?m:f(a[b])}:f,q||r)for(var t=0;c>t;t++)n=h(p,t),o=k(b,t),s[t]=d(n,o);else s=d(i(p),b);return s}var h=a("fast-isnumeric"),i=a("color-rgba"),j=a("../components/colorscale"),k=a("../components/color/attributes").defaultLine,l=i(k),m=1;b.exports=g},{"../components/color/attributes":612,"../components/colorscale":628,"color-rgba":96,"fast-isnumeric":132}],735:[function(a,b,c){"use strict";function d(a){return[a]}var e=a("./identity");b.exports={keyFun:function(a){return a.key},repeat:d,descend:e,wrap:d,unwrap:function(a){return a[0]}}},{"./identity":737}],736:[function(a,b,c){"use strict";function d(a){for(var b=0;(b=a.indexOf("<sup>",b))>=0;){var c=a.indexOf("</sup>",b);if(b>c)break;a=a.slice(0,b)+i(a.slice(b+5,c))+a.slice(c+6)}return a}function e(a){return a.replace(/\<br\>/g,"\n")}function f(a){return a.replace(/\<.*\>/g,"")}function g(a){for(var b=j.entityToUnicode,c=0;(c=a.indexOf("&",c))>=0;){var d=a.indexOf(";",c);if(c>d)c+=1;else{var e=b[a.slice(c+1,d)];a=e?a.slice(0,c)+e+a.slice(d+1):a.slice(0,c)+a.slice(d+1)}}return a}function h(a){return""+g(f(d(e(a))))}var i=a("superscript-text"),j=a("../constants/string_mappings");b.exports=h},{"../constants/string_mappings":718,"superscript-text":539}],737:[function(a,b,c){"use strict";b.exports=function(a){return a}},{}],738:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../constants/numerical"),g=f.FP_SAFE,h=f.BADNUM,i=b.exports={};i.nestedProperty=a("./nested_property"),i.keyedContainer=a("./keyed_container"),i.relativeAttr=a("./relative_attr"),i.isPlainObject=a("./is_plain_object"),i.isArray=a("./is_array"),i.mod=a("./mod"),i.toLogRange=a("./to_log_range"),i.relinkPrivateKeys=a("./relink_private"),i.ensureArray=a("./ensure_array");var j=a("./coerce");i.valObjectMeta=j.valObjectMeta,i.coerce=j.coerce,i.coerce2=j.coerce2,i.coerceFont=j.coerceFont,i.coerceHoverinfo=j.coerceHoverinfo,i.coerceSelectionMarkerOpacity=j.coerceSelectionMarkerOpacity,i.validate=j.validate;var k=a("./dates");i.dateTime2ms=k.dateTime2ms,i.isDateTime=k.isDateTime,i.ms2DateTime=k.ms2DateTime,i.ms2DateTimeLocal=k.ms2DateTimeLocal,i.cleanDate=k.cleanDate,i.isJSDate=k.isJSDate,i.formatDate=k.formatDate,i.incrementMonth=k.incrementMonth,i.dateTick0=k.dateTick0,i.dfltRange=k.dfltRange,i.findExactDates=k.findExactDates,i.MIN_MS=k.MIN_MS,i.MAX_MS=k.MAX_MS;var l=a("./search");i.findBin=l.findBin,i.sorterAsc=l.sorterAsc,i.sorterDes=l.sorterDes,i.distinctVals=l.distinctVals,i.roundUp=l.roundUp;var m=a("./stats");i.aggNums=m.aggNums,i.len=m.len,i.mean=m.mean,i.variance=m.variance,i.stdev=m.stdev,i.interp=m.interp;var n=a("./matrix");i.init2dArray=n.init2dArray,i.transposeRagged=n.transposeRagged,i.dot=n.dot,i.translationMatrix=n.translationMatrix,i.rotationMatrix=n.rotationMatrix,i.rotationXYMatrix=n.rotationXYMatrix,i.apply2DTransform=n.apply2DTransform,i.apply2DTransform2=n.apply2DTransform2;var o=a("./geometry2d");i.segmentsIntersect=o.segmentsIntersect,i.segmentDistance=o.segmentDistance,i.getTextLocation=o.getTextLocation,i.clearLocationCache=o.clearLocationCache,i.getVisibleSegment=o.getVisibleSegment,i.findPointOnPath=o.findPointOnPath;var p=a("./extend");i.extendFlat=p.extendFlat,i.extendDeep=p.extendDeep,i.extendDeepAll=p.extendDeepAll,i.extendDeepNoArrays=p.extendDeepNoArrays;var q=a("./loggers");i.log=q.log,i.warn=q.warn,i.error=q.error;var r=a("./regex");i.counterRegex=r.counter;var s=a("./throttle");i.throttle=s.throttle,i.throttleDone=s.done,i.clearThrottle=s.clear,i.getGraphDiv=a("./get_graph_div"),i._=a("./localize"),i.notifier=a("./notifier"),i.filterUnique=a("./filter_unique"),i.filterVisible=a("./filter_visible"),i.pushUnique=a("./push_unique"),i.cleanNumber=a("./clean_number"),i.ensureNumber=function(a){return e(a)?(a=Number(a),-g>a||a>g?h:e(a)?Number(a):h):h},i.noop=a("./noop"),i.identity=a("./identity"),i.swapAttrs=function(a,b,c,d){c||(c="x"),d||(d="y");for(var e=0;e<b.length;e++){var f=b[e],g=i.nestedProperty(a,f.replace("?",c)),h=i.nestedProperty(a,f.replace("?",d)),j=g.get();g.set(h.get()),h.set(j)}},i.pauseEvent=function(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1},i.raiseToTop=function(a){a.parentNode.appendChild(a)},i.cancelTransition=function(a){return a.transition().duration(0)},i.constrain=function(a,b,c){return b>c?Math.max(c,Math.min(b,a)):Math.max(b,Math.min(c,a))},i.bBoxIntersect=function(a,b,c){return c=c||0,a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c},i.simpleMap=function(a,b,c,d){for(var e=a.length,f=new Array(e),g=0;e>g;g++)f[g]=b(a[g],c,d);return f},i.randstr=function z(a,b,c){if(c||(c=16),void 0===b&&(b=24),0>=b)return"0";var d,e,f,g=Math.log(Math.pow(2,b))/Math.log(c),h="";for(d=2;g===1/0;d*=2)g=Math.log(Math.pow(2,b/d))/Math.log(c)*d;var i=g-Math.floor(g);for(d=0;d<Math.floor(g);d++)f=Math.floor(Math.random()*c).toString(c),h=f+h;i&&(e=Math.pow(c,i),f=Math.floor(Math.random()*e).toString(c),h=f+h);var j=parseInt(h,c);return a&&a.indexOf(h)>-1||j!==1/0&&j>=Math.pow(2,b)?z(a,b,c):h},i.OptionControl=function(a,b){a||(a={}),b||(b="opt");var c={};return c.optionList=[],c._newoption=function(d){d[b]=a,c[d.name]=d,c.optionList.push(d)},c["_"+b]=a,c},i.smooth=function(a,b){if(b=Math.round(b)||0,2>b)return a;var c,d,e,f,g=a.length,h=2*g,i=2*b-1,j=new Array(i),k=new Array(g);for(c=0;i>c;c++)j[c]=(1-Math.cos(Math.PI*(c+1)/b))/(2*b);for(c=0;g>c;c++){for(f=0,d=0;i>d;d++)e=c+d+1-b,-g>e?e-=h*Math.round(e/h):e>=h&&(e-=h*Math.floor(e/h)),0>e?e=-1-e:e>=g&&(e=h-1-e),f+=a[e]*j[d];k[c]=f}return k},i.syncOrAsync=function(a,b,c){function d(){return i.syncOrAsync(a,b,c)}for(var e,f;a.length;)if(f=a.splice(0,1)[0],e=f(b),e&&e.then)return e.then(d).then(void 0,i.promiseError);return c&&c(b)},i.stripTrailingSlash=function(a){return"/"===a.substr(-1)?a.substr(0,a.length-1):a},i.noneOrAll=function(a,b,c){if(a){var d,e,f=!1,g=!0;for(d=0;d<c.length;d++)e=a[c[d]],void 0!==e&&null!==e?f=!0:g=!1;if(f&&!g)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]]}},i.mergeArray=function(a,b,c){if(Array.isArray(a))for(var d=Math.min(a.length,b.length),e=0;d>e;e++)b[e][c]=a[e]},i.fillArray=function(a,b,c,d){if(d=d||i.identity,Array.isArray(a))for(var e=0;e<b.length;e++)b[e][c]=d(a[e])},i.castOption=function(a,b,c,d){d=d||i.identity;var e=i.nestedProperty(a,c).get();return Array.isArray(e)?d(Array.isArray(b)&&Array.isArray(e[b[0]])?e[b[0]][b[1]]:e[b]):e},i.extractOption=function(a,b,c,d){if(c in a)return a[c];var e=i.nestedProperty(b,d).get();return Array.isArray(e)?void 0:e},i.tagSelected=function(a,b,c){function d(a){return e(a)&&a>=0&&a%1===0}function f(b){return void 0!==b&&b<a.length}var g,h=b.selectedpoints,i=b._indexToPoints;if(i){g={};for(var j in i)for(var k=i[j],l=0;l<k.length;l++)g[k[l]]=j}for(var m=0;m<h.length;m++){var n=h[m];if(d(n)){var o=g?g[n]:n,p=c?c[o]:o;f(p)&&(a[p].selected=1)}}},i.getTargetArray=function(a,b){var c=b.target;if("string"==typeof c&&c){var d=i.nestedProperty(a,c).get();return Array.isArray(d)?d:!1}return Array.isArray(c)?c:!1},i.minExtend=function(a,b){var c={};"object"!=typeof b&&(b={});var d,e,f,g=3,h=Object.keys(a);for(d=0;d<h.length;d++)e=h[d],f=a[e],"_"!==e.charAt(0)&&"function"!=typeof f&&("module"===e?c[e]=f:Array.isArray(f)?c[e]=f.slice(0,g):f&&"object"==typeof f?c[e]=i.minExtend(a[e],b[e]):c[e]=f);for(h=Object.keys(b),d=0;d<h.length;d++)e=h[d],f=b[e],"object"==typeof f&&e in c&&"object"==typeof c[e]||(c[e]=f);return c},i.titleCase=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},i.containsAny=function(a,b){for(var c=0;c<b.length;c++)if(-1!==a.indexOf(b[c]))return!0;return!1},i.isPlotDiv=function(a){var b=d.select(a);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")},i.removeElement=function(a){var b=a&&a.parentNode;b&&b.removeChild(a)},i.addStyleRule=function(a,b){if(!i.styleSheet){var c=document.createElement("style");c.appendChild(document.createTextNode("")),document.head.appendChild(c),i.styleSheet=c.sheet}var d=i.styleSheet;d.insertRule?d.insertRule(a+"{"+b+"}",0):d.addRule?d.addRule(a,b,0):i.warn("addStyleRule failed")},i.isIE=function(){return"undefined"!=typeof window.navigator.msSaveBlob},i.isD3Selection=function(a){return a&&"function"==typeof a.classed},i.objectFromPath=function(a,b){for(var c,d=a.split("."),e=c={},f=0;f<d.length;f++){var g=d[f],h=null,i=d[f].match(/(.*)\[([0-9]+)\]/);i?(g=i[1],h=i[2],c=c[g]=[],f===d.length-1?c[h]=b:c[h]={},c=c[h]):(f===d.length-1?c[g]=b:c[g]={},c=c[g])}return e};var t=/^([^\[\.]+)\.(.+)?/,u=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(a){var b,c,d,e,f,g,h;if("object"==typeof a&&!Array.isArray(a))for(c in a)a.hasOwnProperty(c)&&((b=c.match(t))?(e=a[c],d=b[1],delete a[c],a[d]=i.extendDeepNoArrays(a[d]||{},i.objectFromPath(c,i.expandObjectPaths(e))[d])):(b=c.match(u))?(e=a[c],d=b[1],f=parseInt(b[2]),delete a[c],a[d]=a[d]||[],"."===b[3]?(h=b[4],g=a[d][f]=a[d][f]||{},i.extendDeepNoArrays(g,i.objectFromPath(h,i.expandObjectPaths(e)))):a[d][f]=i.expandObjectPaths(e)):a[c]=i.expandObjectPaths(a[c]));return a},i.numSeparate=function(a,b,c){if(c||(c=!1),"string"!=typeof b||0===b.length)throw new Error("Separator string required for formatting!");"number"==typeof a&&(a=String(a));var d=/(\d+)(\d{3})/,e=b.charAt(0),f=b.charAt(1),g=a.split("."),h=g[0],i=g.length>1?e+g[1]:"";if(f&&(g.length>1||h.length>4||c))for(;d.test(h);)h=h.replace(d,"$1"+f+"$2");return h+i};var v=/%{([^\s%{}]*)}/g,w=/^\w*$/;i.templateString=function(a,b){var c={};return a.replace(v,function(a,d){return w.test(d)?b[d]||"":(c[d]=c[d]||i.nestedProperty(b,d).get,c[d]()||"")})};var x=48,y=57;i.subplotSort=function(a,b){for(var c=Math.min(a.length,b.length)+1,d=0,e=0,f=0;c>f;f++){var g=a.charCodeAt(f)||0,h=b.charCodeAt(f)||0,i=g>=x&&y>=g,j=h>=x&&y>=h;if(i&&(d=10*d+g-x),j&&(e=10*e+h-x),!i||!j){if(d!==e)return d-e;if(g!==h)return g-h}}return e-d}},{"../constants/numerical":717,"./clean_number":722,"./coerce":723,"./dates":724,"./ensure_array":725,"./extend":727,"./filter_unique":728,"./filter_visible":729,"./geometry2d":732,"./get_graph_div":733,"./identity":737,"./is_array":739,"./is_plain_object":740,"./keyed_container":741,"./localize":742,"./loggers":743,"./matrix":744,"./mod":745,"./nested_property":746,"./noop":747,"./notifier":748,"./push_unique":751,"./regex":753,"./relative_attr":754,"./relink_private":755,"./search":756,"./stats":759,"./throttle":762,"./to_log_range":763,d3:123,"fast-isnumeric":132}],739:[function(a,b,c){"use strict";var d="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}};b.exports=function(a){return Array.isArray(a)||d.isView(a)}},{}],740:[function(a,b,c){"use strict";b.exports=function(a){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(a):"[object Object]"===Object.prototype.toString.call(a)&&Object.getPrototypeOf(a)===Object.prototype}},{}],741:[function(a,b,c){"use strict";var d=a("./nested_property"),e=/^\w*$/,f=0,g=1,h=2,i=3,j=4;b.exports=function(a,b,c,k){c=c||"name",k=k||"value";var l,m,n={};m=b&&b.length?d(a,b).get():a,b=b||"",m=m||[];var o={};for(l=0;l<m.length;l++)o[m[l][c]]=l;var p=e.test(k),q={set:function(a,b){var e=null===b?j:f,g=o[a];void 0===g?(e|=i,g=m.length,o[a]=g):b!==(p?m[g][k]:d(m[g],k).get())&&(e|=h);var l=m[g]=m[g]||{};return l[c]=a,p?l[k]=b:d(l,k).set(b),null!==b&&(e&=~j),n[g]=n[g]|e,q},get:function(a){var b=o[a];return void 0===b?void 0:p?m[b][k]:d(m[b],k).get()},rename:function(a,b){var d=o[a];return void 0===d?q:(n[d]=n[d]|g,o[b]=d,delete o[a],m[d][c]=b,q)},remove:function(a){var b=o[a];if(void 0===b)return q;var e=m[b];if(Object.keys(e).length>2)return n[b]=n[b]|h,q.set(a,null);if(p){for(l=b;l<m.length;l++)n[l]=n[l]|i;for(l=b;l<m.length;l++)o[m[l][c]]--;m.splice(b,1),delete o[a]}else d(e,k).set(null),n[b]=n[b]|h|j;return q},constructUpdate:function(){for(var a,e,f={},i=Object.keys(n),l=0;l<i.length;l++)e=i[l],a=b+"["+e+"]",m[e]?(n[e]&g&&(f[a+"."+c]=m[e][c]),n[e]&h&&(p?f[a+"."+k]=n[e]&j?null:m[e][k]:f[a+"."+k]=n[e]&j?null:d(m[e],k).get())):f[a]=null;return f}};return q}},{"./nested_property":746}],742:[function(a,b,c){"use strict";var d=a("../registry");b.exports=function(a,b){for(var c=a._context.locale,e=0;2>e;e++){for(var f=a._context.locales,g=0;2>g;g++){var h=(f[c]||{}).dictionary;if(h){var i=h[b];if(i)return i}f=d.localeRegistry}var j=c.split("-")[0];if(j===c)break;c=j}return b}},{"../registry":861}],743:[function(a,b,c){"use strict";function d(a,b){if(a.apply)a.apply(a,b);else for(var c=0;c<b.length;c++)a(b[c])}var e=a("../plot_api/plot_config"),f=b.exports={};f.log=function(){if(e.logging>1){for(var a=["LOG:"],b=0;b<arguments.length;b++)a.push(arguments[b]);d(console.trace||console.log,a)}},f.warn=function(){if(e.logging>0){for(var a=["WARN:"],b=0;b<arguments.length;b++)a.push(arguments[b]);d(console.trace||console.log,a)}},f.error=function(){if(e.logging>0){for(var a=["ERROR:"],b=0;b<arguments.length;b++)a.push(arguments[b]);d(console.error,a)}}},{"../plot_api/plot_config":773}],744:[function(a,b,c){"use strict";c.init2dArray=function(a,b){for(var c=new Array(a),d=0;a>d;d++)c[d]=new Array(b);return c},c.transposeRagged=function(a){var b,c,d=0,e=a.length;for(b=0;e>b;b++)d=Math.max(d,a[b].length);var f=new Array(d);for(b=0;d>b;b++)for(f[b]=new Array(e),c=0;e>c;c++)f[b][c]=a[c][b];return f},c.dot=function(a,b){if(!a.length||!b.length||a.length!==b.length)return null;var d,e,f=a.length;if(a[0].length)for(d=new Array(f),e=0;f>e;e++)d[e]=c.dot(a[e],b);else if(b[0].length){var g=c.transposeRagged(b);for(d=new Array(g.length),e=0;e<g.length;e++)d[e]=c.dot(a,g[e])}else for(d=0,e=0;f>e;e++)d+=a[e]*b[e];return d},c.translationMatrix=function(a,b){return[[1,0,a],[0,1,b],[0,0,1]]},c.rotationMatrix=function(a){var b=a*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},c.rotationXYMatrix=function(a,b,d){return c.dot(c.dot(c.translationMatrix(b,d),c.rotationMatrix(a)),c.translationMatrix(-b,-d))},c.apply2DTransform=function(a){return function(){var b=arguments;3===b.length&&(b=b[0]);var d=1===arguments.length?b[0]:[b[0],b[1]];return c.dot(a,[d[0],d[1],1]).slice(0,2)}},c.apply2DTransform2=function(a){var b=c.apply2DTransform(a);return function(a){return b(a.slice(0,2)).concat(b(a.slice(2,4)))}}},{}],745:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a%b;return 0>c?c+b:c}},{}],746:[function(a,b,c){"use strict";function d(a,b){return function(){var c,e,f,g,h,i=a;for(g=0;g<b.length-1;g++){if(c=b[g],-1===c){for(e=!0,f=[],h=0;h<i.length;h++)f[h]=d(i[h],b.slice(g+1))(),f[h]!==f[0]&&(e=!1);return e?f[0]:f}if("number"==typeof c&&!n(i))return void 0;if(i=i[c],"object"!=typeof i||null===i)return void 0}return"object"!=typeof i||null===i?void 0:(f=i[b[g]],null===f?void 0:f)}}function e(a,b){if(!k(a)||o(a)&&"]"===b.charAt(b.length-1)||b.match(r)&&void 0!==a)return!1;if(!n(a))return!0;if(b.match(q))return!0;var c=p(b);return c&&""===c.index}function f(a,b,c){return function(d){var f,k,l=a,m="",o=[[a,m]],p=e(d,c);for(k=0;k<b.length-1;k++){if(f=b[k],"number"==typeof f&&!n(l))throw"array index but container is not an array";if(-1===f){if(p=!h(l,b.slice(k+1),d,c))break;return}if(!i(l,f,b[k+1],p))break;if(l=l[f],"object"!=typeof l||null===l)throw"container is not an object";m=g(m,f),o.push([l,m])}p?(k===b.length-1&&delete l[b[k]],j(o)):l[b[k]]=d}}function g(a,b){var c=b;return m(b)?c="["+b+"]":a&&(c="."+b),a+c}function h(a,b,c,d){var g,h=n(c),j=!0,k=c,l=d.replace("-1",0),m=h?!1:e(c,l),o=b[0];for(g=0;g<a.length;g++)l=d.replace("-1",g),h&&(k=c[g%c.length],m=e(k,l)),m&&(j=!1),i(a,g,o,m)&&f(a[g],b,d.replace("-1",g))(k);return j}function i(a,b,c,d){if(void 0===a[b]){if(d)return!1;"number"==typeof c?a[b]=[]:a[b]={}}return!0}function j(a){var b,c,d,f,h,i;for(b=a.length-1;b>=0;b--){if(d=a[b][0],f=a[b][1],i=!1,n(d))for(c=d.length-1;c>=0;c--)e(d[c],g(f,c))?i?d[c]=void 0:d.pop():i=!0;else if("object"==typeof d&&null!==d)for(h=Object.keys(d),i=!1,c=h.length-1;c>=0;c--)e(d[h[c]],g(f,h[c]))?delete d[h[c]]:i=!0;if(i)return}}function k(a){return void 0===a||null===a?!0:"object"!=typeof a?!1:n(a)?!a.length:!Object.keys(a).length}function l(a,b,c){return{set:function(){throw"bad container"},get:function(){},astr:b,parts:c,obj:a}}var m=a("fast-isnumeric"),n=a("./is_array"),o=a("./is_plain_object"),p=a("../plot_api/container_array_match");b.exports=function(a,b){if(m(b))b=String(b);else if("string"!=typeof b||"[-1]"===b.substr(b.length-4))throw"bad property string";for(var c,e,g,h=0,i=b.split(".");h<i.length;){if(c=String(i[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(c[1])i[h]=c[1];else{if(0!==h)throw"bad property string";i.splice(0,1)}for(e=c[2].substr(1,c[2].length-2).split("]["),g=0;g<e.length;g++)h++,i.splice(h,0,Number(e[g]))}h++}return"object"!=typeof a?l(a,b,i):{set:f(a,i,b),get:d(a,i),astr:b,parts:i,obj:a}};var q=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,r=/(^|\.)args\[/},{"../plot_api/container_array_match":768,"./is_array":739,"./is_plain_object":740,"fast-isnumeric":132}],747:[function(a,b,c){"use strict";b.exports=function(){}},{}],748:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=[];b.exports=function(a,b){function c(a){a.duration(700).style("opacity",0).each("end",function(a){var b=f.indexOf(a);-1!==b&&f.splice(b,1),d.select(this).remove()})}if(-1===f.indexOf(a)){f.push(a);var g=1e3;e(b)?g=b:"long"===b&&(g=3e3);var h=d.select("body").selectAll(".plotly-notifier").data([0]);h.enter().append("div").classed("plotly-notifier",!0);var i=h.selectAll(".notifier-note").data(f);i.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var b=d.select(this);b.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){b.transition().call(c);
});for(var e=b.append("p"),f=a.split(/<br\s*\/?>/g),h=0;h<f.length;h++)h&&e.append("br"),e.append("span").text(f[h]);b.transition().duration(700).style("opacity",1).transition().delay(g).call(c)})}}},{d3:123,"fast-isnumeric":132}],749:[function(a,b,c){"use strict";var d=a("./setcursor"),e="data-savedcursor",f="!!";b.exports=function(a,b){var c=a.attr(e);if(b){if(!c){for(var g=(a.attr("class")||"").split(" "),h=0;h<g.length;h++){var i=g[h];0===i.indexOf("cursor-")&&a.attr(e,i.substr(7)).classed(i,!1)}a.attr(e)||a.attr(e,f)}d(a,b)}else c&&(a.attr(e,null),c===f?d(a):d(a,c))}},{"./setcursor":757}],750:[function(a,b,c){"use strict";var d=a("./matrix").dot,e=a("../constants/numerical").BADNUM,f=b.exports={};f.tester=function(a){function b(a,b){var c=a[0],d=a[1];return c===e||h>c||c>i||d===e||j>d||d>k?!1:b&&l(a)?!1:!0}function c(a,b){var c=a[0],d=a[1];if(c===e||h>c||c>i||d===e||j>d||d>k)return!1;var f,l,m,n,o,p=g.length,q=g[0][0],r=g[0][1],s=0;for(f=1;p>f;f++)if(l=q,m=r,q=g[f][0],r=g[f][1],n=Math.min(l,q),!(n>c||c>Math.max(l,q)||d>Math.max(m,r)))if(d<Math.min(m,r))c!==n&&s++;else{if(o=q===l?d:m+(c-l)*(r-m)/(q-l),d===o)return 1===f&&b?!1:!0;o>=d&&c!==n&&s++}return s%2===1}if(Array.isArray(a[0][0]))return f.multitester(a);var d,g=a.slice(),h=g[0][0],i=h,j=g[0][1],k=j;for(g.push(g[0]),d=1;d<g.length;d++)h=Math.min(h,g[d][0]),i=Math.max(i,g[d][0]),j=Math.min(j,g[d][1]),k=Math.max(k,g[d][1]);var l,m=!1;5===g.length&&(g[0][0]===g[1][0]?g[2][0]===g[3][0]&&g[0][1]===g[3][1]&&g[1][1]===g[2][1]&&(m=!0,l=function(a){return a[0]===g[0][0]}):g[0][1]===g[1][1]&&g[2][1]===g[3][1]&&g[0][0]===g[3][0]&&g[1][0]===g[2][0]&&(m=!0,l=function(a){return a[1]===g[0][1]}));var n=!0,o=g[0];for(d=1;d<g.length;d++)if(o[0]!==g[d][0]||o[1]!==g[d][1]){n=!1;break}return{xmin:h,xmax:i,ymin:j,ymax:k,pts:g,contains:m?b:c,isRect:m,degenerate:n}},f.multitester=function(a){function b(a,b){for(var d=!1,e=0;e<c.length;e++)c[e].contains(a,b)&&(d=c[e].subtract===!1);return d}for(var c=[],d=a[0][0][0],e=d,g=a[0][0][1],h=g,i=0;i<a.length;i++){var j=f.tester(a[i]);j.subtract=a[i].subtract,c.push(j),d=Math.min(d,j.xmin),e=Math.max(e,j.xmax),g=Math.min(g,j.ymin),h=Math.max(h,j.ymax)}return{xmin:d,xmax:e,ymin:g,ymax:h,pts:[],contains:b,isRect:!1,degenerate:!1}};var g=f.isSegmentBent=function(a,b,c,e){var f,g,h,i=a[b],j=[a[c][0]-i[0],a[c][1]-i[1]],k=d(j,j),l=Math.sqrt(k),m=[-j[1]/l,j[0]/l];for(f=b+1;c>f;f++)if(g=[a[f][0]-i[0],a[f][1]-i[1]],h=d(g,j),0>h||h>k||Math.abs(d(g,m))>e)return!0;return!1};f.filter=function(a,b){function c(c){a.push(c);var h=d.length,i=e;d.splice(f+1);for(var j=i+1;j<a.length;j++)(j===a.length-1||g(a,i,j+1,b))&&(d.push(a[j]),d.length<h-2&&(e=j,f=d.length-1),i=j)}var d=[a[0]],e=0,f=0;if(a.length>1){var h=a.pop();c(h)}return{addPt:c,raw:a,filtered:d}}},{"../constants/numerical":717,"./matrix":744}],751:[function(a,b,c){"use strict";b.exports=function(a,b){if(b instanceof RegExp){var c,d=b.toString();for(c=0;c<a.length;c++)if(a[c]instanceof RegExp&&a[c].toString()===d)return a;a.push(b)}else b&&-1===a.indexOf(b)&&a.push(b);return a}},{}],752:[function(a,b,c){"use strict";function d(a,b){for(var c,d=[],f=0;f<b.length;f++)c=b[f],c===a?d[f]=c:"object"==typeof c?d[f]=Array.isArray(c)?e.extendDeep([],c):e.extendDeepAll({},c):d[f]=c;return d}var e=a("../lib"),f=a("../plot_api/plot_config"),g={};g.add=function(a,b,c,d,e){var g,h;return a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},h=a.undoQueue.index,a.autoplay?void(a.undoQueue.inSequence||(a.autoplay=!1)):(!a.undoQueue.sequence||a.undoQueue.beginSequence?(g={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},a.undoQueue.queue.splice(h,a.undoQueue.queue.length-h,g),a.undoQueue.index+=1):g=a.undoQueue.queue[h-1],a.undoQueue.beginSequence=!1,g&&(g.undo.calls.unshift(b),g.undo.args.unshift(c),g.redo.calls.push(d),g.redo.args.push(e)),void(a.undoQueue.queue.length>f.queueLength&&(a.undoQueue.queue.shift(),a.undoQueue.index--)))},g.startSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!0,a.undoQueue.beginSequence=!0},g.stopSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!1,a.undoQueue.beginSequence=!1},g.undo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.undo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.undo.calls.length;c++)g.plotDo(a,b.undo.calls[c],b.undo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1}},g.redo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.redo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.redo.calls.length;c++)g.plotDo(a,b.redo.calls[c],b.redo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},g.plotDo=function(a,b,c){a.autoplay=!0,c=d(a,c),b.apply(null,c)},b.exports=g},{"../lib":738,"../plot_api/plot_config":773}],753:[function(a,b,c){"use strict";c.counter=function(a,b,c){return new RegExp("^"+a+"([2-9]|[1-9][0-9]+)?"+(b||"")+(c?"":"$"))}},{}],754:[function(a,b,c){"use strict";var d=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;b.exports=function(a,b){for(;b;){var c=a.match(d);if(c)a=c[1];else{if(!a.match(e))throw new Error("bad relativeAttr call:"+[a,b]);a=""}if("^"!==b.charAt(0))break;b=b.slice(1)}return a&&"["!==b.charAt(0)?a+"."+b:a+b}},{}],755:[function(a,b,c){"use strict";var d=a("./is_array"),e=a("./is_plain_object");b.exports=function f(a,b){for(var c=Object.keys(b||{}),g=0;g<c.length;g++){var h=c[g],i=b[h],j=a[h];if("_"===h.charAt(0)||"function"==typeof i){if(h in a)continue;a[h]=i}else if(d(i)&&d(j)&&e(i[0]))for(var k=0;k<i.length;k++)e(i[k])&&e(j[k])&&f(j[k],i[k]);else e(i)&&e(j)&&(f(j,i),Object.keys(j).length||delete a[h])}}},{"./is_array":739,"./is_plain_object":740}],756:[function(a,b,c){"use strict";function d(a,b){return b>a}function e(a,b){return b>=a}function f(a,b){return a>b}function g(a,b){return a>=b}var h=a("fast-isnumeric"),i=a("./loggers"),j=1e-9;c.findBin=function(a,b,c){if(h(b.start))return c?Math.ceil((a-b.start)/b.size-j)-1:Math.floor((a-b.start)/b.size+j);var k,l,m=0,n=b.length,o=0,p=n>1?(b[n-1]-b[0])/(n-1):1;for(l=p>=0?c?d:e:c?g:f,a+=p*j*(c?-1:1)*(p>=0?1:-1);n>m&&o++<100;)k=Math.floor((m+n)/2),l(b[k],a)?m=k+1:n=k;return o>90&&i.log("Long binary search..."),m-1},c.sorterAsc=function(a,b){return a-b},c.sorterDes=function(a,b){return b-a},c.distinctVals=function(a){var b=a.slice();b.sort(c.sorterAsc);for(var d=b.length-1,e=b[d]-b[0]||1,f=e/(d||1)/1e4,g=[b[0]],h=0;d>h;h++)b[h+1]>b[h]+f&&(e=Math.min(e,b[h+1]-b[h]),g.push(b[h+1]));return{vals:g,minDiff:e}},c.roundUp=function(a,b,c){for(var d,e=0,f=b.length-1,g=0,h=c?0:1,i=c?1:0,j=c?Math.ceil:Math.floor;f>e&&g++<100;)d=j((e+f)/2),b[d]<=a?e=d+h:f=d-i;return b[e]}},{"./loggers":743,"fast-isnumeric":132}],757:[function(a,b,c){"use strict";b.exports=function(a,b){(a.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&a.classed(b,!1)}),b&&a.classed("cursor-"+b,!0)}},{}],758:[function(a,b,c){"use strict";var d=a("../components/color"),e=function(){};b.exports=function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=e);a.destroy=function(){a.container.parentNode.removeChild(a.container)};var c=document.createElement("div");return c.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",c.style.cursor="pointer",c.style.fontSize="24px",c.style.color=d.defaults[0],a.container.appendChild(c),a.container.style.background="#FFFFFF",a.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../components/color":613}],759:[function(a,b,c){"use strict";var d=a("fast-isnumeric");c.aggNums=function(a,b,e,f){var g,h;if(f||(f=e.length),d(b)||(b=!1),Array.isArray(e[0])){for(h=new Array(f),g=0;f>g;g++)h[g]=c.aggNums(a,b,e[g]);e=h}for(g=0;f>g;g++)d(b)?d(e[g])&&(b=a(+b,+e[g])):b=e[g];return b},c.len=function(a){return c.aggNums(function(a){return a+1},0,a)},c.mean=function(a,b){return b||(b=c.len(a)),c.aggNums(function(a,b){return a+b},0,a)/b},c.variance=function(a,b,e){return b||(b=c.len(a)),d(e)||(e=c.mean(a,b)),c.aggNums(function(a,b){return a+Math.pow(b-e,2)},0,a)/b},c.stdev=function(a,b,d){return Math.sqrt(c.variance(a,b,d))},c.interp=function(a,b){if(!d(b))throw"n should be a finite number";if(b=b*a.length-.5,0>b)return a[0];if(b>a.length-1)return a[a.length-1];var c=b%1;return c*a[Math.ceil(b)]+(1-c)*a[Math.floor(b)]}},{"fast-isnumeric":132}],760:[function(a,b,c){"use strict";function d(a){var b=e(a);return b.length?b:[0,0,0,1]}var e=a("color-rgba");b.exports=d},{"color-rgba":96}],761:[function(a,b,c){"use strict";function d(a,b){return a.node().getBoundingClientRect()[b]}function e(a){return a.replace(r,"\\lt ").replace(s,"\\gt ")}function f(a,b,c){var d="math-output-"+m.randstr([],64),f=l.select("body").append("div").attr({id:d}).style({visibility:"hidden",position:"absolute"}).style({"font-size":b.fontSize+"px"}).text(e(a));MathJax.Hub.Queue(["Typeset",MathJax.Hub,f.node()],function(){var b=l.select("body").select("#MathJax_SVG_glyphs");if(f.select(".MathJax_SVG").empty()||!f.select("svg").node())m.log("There was an error in the tex syntax.",a),c();else{var d=f.select("svg").node().getBoundingClientRect();c(f.select(".MathJax_SVG"),b,d)}f.remove()})}function g(a,b){if(!a)return null;var c=a.match(b);return c&&(c[3]||c[4])}function h(a,b){if(!a)return"";for(var c=0;c<b.length;c++){var d=b[c];a=a.replace(d.regExp,d.sub)}return a}function i(a){return h(a,z)}function j(a,b){function c(){o++;var b=document.createElementNS(n.svg,"tspan");l.select(b).attr({"class":"line",dy:o*p+"em"}),a.appendChild(b),h=b;var c=k;if(k=[{node:b}],c.length>1)for(var e=1;e<c.length;e++)d(c[e])}function d(a){var b,c=a.type,d={};if("a"===c){b="a";var f=a.target,g=a.href,i=a.popup;g&&(d={"xlink:xlink:show":"_blank"===f||"_"!==f.charAt(0)?"new":"replace",target:f,"xlink:xlink:href":g},i&&(d.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+i+'");return false;'))}else b="tspan";a.style&&(d.style=a.style);var j=document.createElementNS(n.svg,b);if("sup"===c||"sub"===c){e(h,w),h.appendChild(j);var m=document.createElementNS(n.svg,"tspan");e(m,w),l.select(m).attr("dy",v[c]),d.dy=u[c],h.appendChild(j),h.appendChild(m)}else h.appendChild(j);l.select(j).attr(d),h=a.node=j,k.push(a)}function e(a,b){a.appendChild(document.createTextNode(b))}function f(a){if(1===k.length)return void m.log("Ignoring unexpected end tag </"+a+">.",b);var c=k.pop();a!==c.type&&m.log("Start tag <"+c.type+"> doesnt match end tag <"+a+">. Pretending it did match.",b),h=k[k.length-1].node}b=i(b).replace(A," ");var h,j=!1,k=[],o=-1,q=D.test(b);q?c():(h=a,k=[{node:a}]);for(var r=b.split(B),s=0;s<r.length;s++){var y=r[s],z=y.match(C),J=z&&z[2].toLowerCase(),K=t[J];if("br"===J)c();else if(void 0===K)e(h,y);else if(z[1])f(J);else{var L=z[4],M={type:J},N=g(L,E);if(N?(N=N.replace(I,"$1 fill:"),K&&(N+=";"+K)):K&&(N=K),N&&(M.style=N),"a"===J){j=!0;var O=g(L,F);if(O){var P=document.createElement("a");P.href=O,-1!==x.indexOf(P.protocol)&&(M.href=encodeURI(O),M.target=g(L,G)||"_blank",M.popup=g(L,H))}}d(M)}}return j}function k(a,b,c){var d,e,f,g=c.horizontalAlign,h=c.verticalAlign||"top",i=a.node().getBoundingClientRect(),j=b.node().getBoundingClientRect();return e="bottom"===h?function(){return i.bottom-d.height}:"middle"===h?function(){return i.top+(i.height-d.height)/2}:function(){return i.top},f="right"===g?function(){return i.right-d.width}:"center"===g?function(){return i.left+(i.width-d.width)/2}:function(){return i.left},function(){return d=this.node().getBoundingClientRect(),this.style({top:e()-j.top+"px",left:f()-j.left+"px","z-index":1e3}),this}}var l=a("d3"),m=a("../lib"),n=a("../constants/xmlns_namespaces"),o=a("../constants/string_mappings"),p=a("../constants/alignment").LINE_SPACING,q=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;c.convertToTspans=function(a,b,e){function g(){k.empty()||(m=a.attr("class")+"-math",k.select("svg."+m).remove()),a.text("").style("white-space","pre");var b=j(a.node(),h);b&&a.style("pointer-events","all"),c.positionText(a),e&&e.call(a)}var h=a.text(),i=!a.attr("data-notex")&&"undefined"!=typeof MathJax&&h.match(q),k=l.select(a.node().parentNode);if(!k.empty()){var m=a.attr("class")?a.attr("class").split(" ")[0]:"text";return m+="-math",k.selectAll("svg."+m).remove(),k.selectAll("g."+m+"-group").remove(),a.style("display",null).attr({"data-unformatted":h,"data-math":"N"}),i?(b&&b._promises||[]).push(new Promise(function(b){a.style("display","none");var c=parseInt(a.node().style.fontSize,10),j={fontSize:c};f(i[2],j,function(f,i,j){k.selectAll("svg."+m).remove(),k.selectAll("g."+m+"-group").remove();var l=f&&f.select("svg");if(!l||!l.node())return g(),void b();var n=k.append("g").classed(m+"-group",!0).attr({"pointer-events":"none","data-unformatted":h,"data-math":"Y"});n.node().appendChild(l.node()),i&&i.node()&&l.node().insertBefore(i.node().cloneNode(!0),l.node().firstChild),l.attr({"class":m,height:j.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var o=a.node().style.fill||"black";l.select("g").attr({fill:o,stroke:o});var p=d(l,"width"),q=d(l,"height"),r=+a.attr("x")-p*{start:0,middle:.5,end:1}[a.attr("text-anchor")||"start"],s=c||d(a,"height"),t=-s/4;"y"===m[0]?(n.attr({transform:"rotate("+[-90,+a.attr("x"),+a.attr("y")]+") translate("+[-p/2,t-q/2]+")"}),l.attr({x:+a.attr("x"),y:+a.attr("y")})):"l"===m[0]?l.attr({x:a.attr("x"),y:t-q/2}):"a"===m[0]?l.attr({x:0,y:t}):l.attr({x:r,y:+a.attr("y")+t-q/2}),e&&e.call(a,n),b(n)})})):g(),a}};var r=/(<|&lt;|&#60;)/g,s=/(>|&gt;|&#62;)/g,t={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"},w="​",x=["http:","https:","mailto:","",void 0,":"],y=new RegExp("</?("+Object.keys(t).join("|")+")( [^>]*)?/?>","g"),z=Object.keys(o.entityToUnicode).map(function(a){return{regExp:new RegExp("&"+a+";","g"),sub:o.entityToUnicode[a]}}),A=/(\r\n?|\n)/g,B=/(<[^<>]*>)/,C=/<(\/?)([^ >]*)(\s+(.*))?>/i,D=/<br(\s+.*)?>/i,E=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,F=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,G=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,H=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,I=/(^|;)\s*color:/;c.plainText=function(a){return(a||"").replace(y," ")},c.lineCount=function(a){return a.selectAll("tspan.line").size()||1},c.positionText=function(a,b,c){return a.each(function(){function a(a,b){return void 0===b?(b=d.attr(a),null===b&&(d.attr(a,0),b=0)):d.attr(a,b),b}var d=l.select(this),e=a("x",b),f=a("y",c);"text"===this.nodeName&&d.selectAll("tspan.line").attr({x:e,y:f})})},c.makeEditable=function(a,b){function c(){e(),a.style({opacity:0});var b,c=i.attr("class");b=c?"."+c.split(" ")[0]+"-math-group":"[class*=-math-group]",b&&l.select(a.node().parentNode).select(b).style({opacity:0})}function d(a){var b=a.node(),c=document.createRange();c.selectNodeContents(b);var d=window.getSelection();d.removeAllRanges(),d.addRange(c),b.focus()}function e(){var c=l.select(f),e=c.select(".svg-container"),g=e.append("div"),i=a.node().style,j=parseFloat(i.fontSize||12);g.classed("plugin-editable editable",!0).style({position:"absolute","font-family":i.fontFamily||"Arial","font-size":j,color:b.fill||i.fill||"black",opacity:1,"background-color":b.background||"transparent",outline:"#ffffff33 1px solid",margin:[-j/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(b.text||a.attr("data-unformatted")).call(k(a,e,b)).on("blur",function(){f._editing=!1,a.text(this.textContent).style({opacity:1});var b,c=l.select(this).attr("class");b=c?"."+c.split(" ")[0]+"-math-group":"[class*=-math-group]",b&&l.select(a.node().parentNode).select(b).style({opacity:0});var d=this.textContent;l.select(this).transition().duration(0).remove(),l.select(document).on("mouseup",null),h.edit.call(a,d)}).on("focus",function(){var a=this;f._editing=!0,l.select(document).on("mouseup",function(){return l.event.target===a?!1:void(document.activeElement===g.node()&&g.node().blur())})}).on("keyup",function(){27===l.event.which?(f._editing=!1,a.style({opacity:1}),l.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),h.cancel.call(a,this.textContent)):(h.input.call(a,this.textContent),l.select(this).call(k(a,e,b)))}).on("keydown",function(){13===l.event.which&&this.blur()}).call(d)}var f=b.gd,g=b.delegate,h=l.dispatch("edit","input","cancel"),i=g||a;if(a.style({"pointer-events":g?"none":"all"}),1!==a.size())throw new Error("boo");return b.immediate?c():i.on("click",c),l.rebind(a,h,"on")}},{"../constants/alignment":711,"../constants/string_mappings":718,"../constants/xmlns_namespaces":719,"../lib":738,d3:123}],762:[function(a,b,c){"use strict";function d(a){a&&null!==a.timer&&(clearTimeout(a.timer),a.timer=null)}var e={};c.throttle=function(a,b,c){function f(){c(),g.ts=Date.now(),g.onDone&&(g.onDone(),g.onDone=null)}var g=e[a],h=Date.now();if(!g){for(var i in e)e[i].ts<h-6e4&&delete e[i];g=e[a]={ts:0,timer:null}}return d(g),h>g.ts+b?void f():void(g.timer=setTimeout(function(){f(),g.timer=null},b))},c.done=function(a){var b=e[a];return b&&b.timer?new Promise(function(a){var c=b.onDone;b.onDone=function(){c&&c(),a(),b.onDone=null}}):Promise.resolve()},c.clear=function(a){if(a)d(e[a]),delete e[a];else for(var b in e)c.clear(b)}},{}],763:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a,b){if(a>0)return Math.log(a)/Math.LN10;var c=Math.log(Math.min(b[0],b[1]))/Math.LN10;return d(c)||(c=Math.log(Math.max(b[0],b[1]))/Math.LN10-6),c}},{"fast-isnumeric":132}],764:[function(a,b,c){"use strict";var d=b.exports={},e=a("../plots/geo/constants").locationmodeToLayer,f=a("topojson-client").feature;d.getTopojsonName=function(a){return[a.scope.replace(/ /g,"-"),"_",a.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(a,b){return a+b+".json"},d.getTopojsonFeatures=function(a,b){var c=e[a.locationmode],d=b.objects[c];return f(b,d).features}},{"../plots/geo/constants":812,"topojson-client":545}],765:[function(a,b,c){"use strict";function d(a,b){for(var c=new Float32Array(b),d=0;b>d;d++)c[d]=a[d];return c}function e(a,b){for(var c=new Float64Array(b),d=0;b>d;d++)c[d]=a[d];return c}b.exports=function(a,b){if(a instanceof Float32Array)return d(a,b);if(a instanceof Float64Array)return e(a,b);throw new Error("This array type is not yet supported by `truncate`.")}},{}],766:[function(a,b,c){"use strict";b.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],767:[function(a,b,c){"use strict";b.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""]}}},{}],768:[function(a,b,c){"use strict";var d=a("../registry");b.exports=function(a){for(var b,c,e=d.layoutArrayContainers,f=d.layoutArrayRegexes,g=a.split("[")[0],h=0;h<f.length;h++)if(c=a.match(f[h]),c&&0===c.index){b=c[0];break}if(b||(b=e[e.indexOf(g)]),!b)return!1;var i=a.substr(b.length);return i?(c=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),c?{array:b,index:Number(c[1]),property:c[3]||""}:!1):{array:b,index:"",property:""}}},{"../registry":861}],769:[function(a,b,c){"use strict";function d(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!1;return b}function e(a,b,c){var d=h({},a);for(var e in d){var g=d[e];i(g)&&(d[e]=f(g,b,c,e))}return"from-root"===c&&(d.editType=b),d}function f(a,b,c,d){if(a.valType){var g=h({},a);if(g.editType=b,Array.isArray(a.items)){g.items=new Array(a.items.length);for(var i=0;i<a.items.length;i++)g.items[i]=f(a.items[i],b,"from-root")}return g}return e(a,b,"_"===d.charAt(0)?"nested":"from-root")}var g=a("../lib"),h=g.extendFlat,i=g.isPlainObject,j={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]},k={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","layoutstyle","modebar","camera","arraydraw"]},l=j.flags.slice().concat(["clearCalc","fullReplot"]),m=k.flags.slice().concat("layoutReplot");b.exports={traces:j,layout:k,traceFlags:function(){return d(l)},layoutFlags:function(){return d(m)},update:function(a,b){var c=b.editType;if(c&&"none"!==c)for(var d=c.split("+"),e=0;e<d.length;e++)a[d[e]]=!0},overrideAll:e}},{"../lib":738}],770:[function(a,b,c){"use strict";function d(a,b){var c=a[b],d=b.charAt(0);c&&"paper"!==c&&(a[b]=n(c,d))}function e(a){var b="middle",c="center";return-1!==a.indexOf("top")?b="top":-1!==a.indexOf("bottom")&&(b="bottom"),-1!==a.indexOf("left")?c="left":-1!==a.indexOf("right")&&(c="right"),b+" "+c}function f(a,b){return b in a&&"object"==typeof a[b]&&0===Object.keys(a[b]).length}function g(a){var b=a.search(q);return b>0?a.substr(0,b):void 0}var h=a("fast-isnumeric"),i=a("gl-mat4/fromQuat"),j=a("../registry"),k=a("../lib"),l=a("../plots/plots"),m=a("../plots/cartesian/axis_ids"),n=m.cleanId,o=m.getFromTrace,p=a("../components/color");c.clearPromiseQueue=function(a){Array.isArray(a._promises)&&a._promises.length>0&&k.log("Clearing previous rejected promises from queue."),a._promises=[]},c.cleanLayout=function(a){var b,c;a||(a={}),a.xaxis1&&(a.xaxis||(a.xaxis=a.xaxis1),delete a.xaxis1),a.yaxis1&&(a.yaxis||(a.yaxis=a.yaxis1),delete a.yaxis1),a.scene1&&(a.scene||(a.scene=a.scene1),delete a.scene1);var e=(l.subplotsRegistry.cartesian||{}).attrRegex,g=(l.subplotsRegistry.gl3d||{}).attrRegex,h=Object.keys(a);for(b=0;b<h.length;b++){var j=h[b];if(e&&e.test(j)){var m=a[j];m.anchor&&"free"!==m.anchor&&(m.anchor=n(m.anchor)),m.overlaying&&(m.overlaying=n(m.overlaying)),m.type||(m.isdate?m.type="date":m.islog?m.type="log":m.isdate===!1&&m.islog===!1&&(m.type="linear")),("withzero"===m.autorange||"tozero"===m.autorange)&&(m.autorange=!0,m.rangemode="tozero"),delete m.islog,delete m.isdate,delete m.categories,f(m,"domain")&&delete m.domain,void 0!==m.autotick&&(void 0===m.tickmode&&(m.tickmode=m.autotick?"auto":"linear"),delete m.autotick)}else if(g&&g.test(j)){var o=a[j],q=o.cameraposition;if(Array.isArray(q)&&4===q[0].length){var r=q[0],s=q[1],t=q[2],u=i([],r),v=[];for(c=0;3>c;++c)v[c]=s[c]+t*u[2+4*c];o.camera={eye:{x:v[0],y:v[1],z:v[2]},center:{x:s[0],y:s[1],z:s[2]},up:{x:u[1],y:u[5],z:u[9]}},delete o.cameraposition}}}var w=Array.isArray(a.annotations)?a.annotations.length:0;for(b=0;w>b;b++){var x=a.annotations[b];k.isPlainObject(x)&&(x.ref&&("paper"===x.ref?(x.xref="paper",x.yref="paper"):"data"===x.ref&&(x.xref="x",x.yref="y"),delete x.ref),d(x,"xref"),d(x,"yref"))}var y=Array.isArray(a.shapes)?a.shapes.length:0;for(b=0;y>b;b++){var z=a.shapes[b];k.isPlainObject(z)&&(d(z,"xref"),d(z,"yref"))}var A=a.legend;return A&&(A.x>3?(A.x=1.02,A.xanchor="left"):A.x<-2&&(A.x=-.02,A.xanchor="right"),A.y>3?(A.y=1.02,A.yanchor="bottom"):A.y<-2&&(A.y=-.02,A.yanchor="top")),"rotate"===a.dragmode&&(a.dragmode="orbit"),p.clean(a),a},c.cleanData=function(a,b){for(var d=[],g=(a.concat(Array.isArray(b)?b:[]).filter(function(a){return"uid"in a}).map(function(a){return a.uid})),h=0;h<a.length;h++){var i,m=a[h];if(!("uid"in m)||-1!==d.indexOf(m.uid)){var o;for(i=0;100>i&&(o=k.randstr(g),-1!==d.indexOf(o));i++);m.uid=k.randstr(g),g.push(m.uid)}if(d.push(m.uid),"histogramy"===m.type&&"xbins"in m&&!("ybins"in m)&&(m.ybins=m.xbins,delete m.xbins),m.error_y&&"opacity"in m.error_y){var q=p.defaults,r=m.error_y.color||(j.traceIs(m,"bar")?p.defaultLine:q[h%q.length]);m.error_y.color=p.addOpacity(p.rgb(r),p.opacity(r)*m.error_y.opacity),delete m.error_y.opacity}if("bardir"in m&&("h"!==m.bardir||!j.traceIs(m,"bar")&&"histogram"!==m.type.substr(0,9)||(m.orientation="h",c.swapXYData(m)),delete m.bardir),"histogramy"===m.type&&c.swapXYData(m),("histogramx"===m.type||"histogramy"===m.type)&&(m.type="histogram"),"scl"in m&&(m.colorscale=m.scl,delete m.scl),"reversescl"in m&&(m.reversescale=m.reversescl,delete m.reversescl),m.xaxis&&(m.xaxis=n(m.xaxis,"x")),m.yaxis&&(m.yaxis=n(m.yaxis,"y")),j.traceIs(m,"gl3d")&&m.scene&&(m.scene=l.subplotsRegistry.gl3d.cleanId(m.scene)),j.traceIs(m,"pie")||j.traceIs(m,"bar")||(Array.isArray(m.textposition)?m.textposition=m.textposition.map(e):m.textposition&&(m.textposition=e(m.textposition))),j.traceIs(m,"2dMap")&&("YIGnBu"===m.colorscale&&(m.colorscale="YlGnBu"),"YIOrRd"===m.colorscale&&(m.colorscale="YlOrRd")),j.traceIs(m,"markerColorscale")&&m.marker){var s=m.marker;"YIGnBu"===s.colorscale&&(s.colorscale="YlGnBu"),"YIOrRd"===s.colorscale&&(s.colorscale="YlOrRd")}if("surface"===m.type&&k.isPlainObject(m.contours)){var t=["x","y","z"];for(i=0;i<t.length;i++){var u=m.contours[t[i]];k.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}}if(Array.isArray(m.transforms)){var v=m.transforms;for(i=0;i<v.length;i++){var w=v[i];if(k.isPlainObject(w))switch(w.type){case"filter":w.filtersrc&&(w.target=w.filtersrc,delete w.filtersrc),w.calendar&&(w.valuecalendar||(w.valuecalendar=w.calendar),delete w.calendar);break;case"groupby":if(w.styles=w.styles||w.style,w.styles&&!Array.isArray(w.styles)){var x=w.styles,y=Object.keys(x);w.styles=[];for(var z=0;z<y.length;z++)w.styles.push({target:y[z],value:x[y[z]]})}}}}f(m,"line")&&delete m.line,"marker"in m&&(f(m.marker,"line")&&delete m.marker.line,f(m,"marker")&&delete m.marker),p.clean(m)}},c.swapXYData=function(a){var b;if(k.swapAttrs(a,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(a.z)&&Array.isArray(a.z[0])&&(a.transpose?delete a.transpose:a.transpose=!0),a.error_x&&a.error_y){var c=a.error_y,d="copy_ystyle"in c?c.copy_ystyle:!(c.color||c.thickness||c.width);k.swapAttrs(a,["error_?.copy_ystyle"]),d&&k.swapAttrs(a,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof a.hoverinfo){var e=a.hoverinfo.split("+");for(b=0;b<e.length;b++)"x"===e[b]?e[b]="y":"y"===e[b]&&(e[b]="x");a.hoverinfo=e.join("+")}},c.coerceTraceIndices=function(a,b){return h(b)?[b]:Array.isArray(b)&&b.length?b:a.data.map(function(a,b){return b})},c.manageArrayContainers=function(a,b,c){var d=a.obj,e=a.parts,f=e.length,g=e[f-1],i=h(g);if(i&&null===b){var j=e.slice(0,f-1).join("."),l=k.nestedProperty(d,j).get();l.splice(g,1)}else i&&void 0===a.get()?(void 0===a.get()&&(c[a.astr]=null),a.set(b)):a.set(b)};var q=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;c.hasParent=function(a,b){for(var c=g(b);c;){if(c in a)return!0;c=g(c)}return!1};var r=["x","y","z"];c.clearAxisTypes=function(a,b,c){for(var d=0;d<b.length;d++)for(var e=a._fullData[d],f=0;3>f;f++){var g=o(a,e,r[f]);if(g&&"log"!==g.type){var h=g._name,i=g._id.substr(1);if("scene"===i.substr(0,5)){if(void 0!==c[i])continue;h=i+"."+h}var j=h+".type";void 0===c[h]&&void 0===c[j]&&k.nestedProperty(a.layout,j).set(null)}}}},{"../components/color":613,"../lib":738,"../plots/cartesian/axis_ids":788,"../plots/plots":846,"../registry":861,"fast-isnumeric":132,"gl-mat4/fromQuat":179}],771:[function(a,b,c){"use strict";var d=a("../lib/nested_property"),e=a("../lib/is_plain_object"),f=a("../lib/noop"),g=a("../lib/loggers"),h=a("../lib/search").sorterAsc,i=a("../registry");c.containerArrayMatch=a("./container_array_match");var j=c.isAddVal=function(a){return"add"===a||e(a)},k=c.isRemoveVal=function(a){return null===a||"remove"===a};c.applyContainerArrayChanges=function(a,b,c,e){var l=b.astr,m=i.getComponentMethod(l,"supplyLayoutDefaults"),n=i.getComponentMethod(l,"draw"),o=i.getComponentMethod(l,"drawOne"),p=e.replot||e.recalc||m===f||n===f,q=a.layout,r=a._fullLayout;if(c[""]){Object.keys(c).length>1&&g.warn("Full array edits are incompatible with other edits",l);var s=c[""][""];if(k(s))b.set(null);else{if(!Array.isArray(s))return g.warn("Unrecognized full array edit value",l,s),!0;b.set(s)}return p?!1:(m(q,r),n(a),!0)}var t,u,v,w,x,y,z,A=Object.keys(c).map(Number).sort(h),B=b.get(),C=B||[],D=d(r,l).get(),E=[],F=-1,G=C.length;for(t=0;t<A.length;t++)if(v=A[t],w=c[v],x=Object.keys(w),y=w[""],z=j(y),0>v||v>C.length-(z?0:1))g.warn("index out of range",l,v);else if(void 0!==y)x.length>1&&g.warn("Insertion & removal are incompatible with edits to the same index.",l,v),k(y)?E.push(v):z?("add"===y&&(y={}),C.splice(v,0,y),D&&D.splice(v,0,{})):g.warn("Unrecognized full object edit value",l,v,y),-1===F&&(F=v);else for(u=0;u<x.length;u++)d(C[v],x[u]).set(w[x[u]]);for(t=E.length-1;t>=0;t--)C.splice(E[t],1),D&&D.splice(E[t],1);if(C.length?B||b.set(C):b.set(null),p)return!1;if(m(q,r),o!==f){var H;if(-1===F)H=A;else{for(G=Math.max(C.length,G),H=[],t=0;t<A.length&&(v=A[t],!(v>=F));t++)H.push(v);for(t=F;G>t;t++)H.push(t)}for(t=0;t<H.length;t++)o(a,H[t])}else n(a);return!0}},{"../lib/is_plain_object":740,"../lib/loggers":743,"../lib/nested_property":746,"../lib/noop":747,"../lib/search":756,"../registry":861,"./container_array_match":768}],772:[function(a,b,c){"use strict";function d(a,b){try{a._fullLayout._paper.style("background",b)}catch(c){w.error(c)}}function e(a,b){var c=F.combine(b,"white");d(a,c)}function f(a,b){a._context||(a._context=w.extendDeep({},v.defaultConfig));var c,f,g,h=a._context;if(b){for(f=Object.keys(b),c=0;c<f.length;c++)g=f[c],"editable"!==g&&"edits"!==g&&g in h&&("setBackground"===g&&"opaque"===b[g]?h[g]=e:h[g]=b[g]);b.plot3dPixelRatio&&!h.plotGlPixelRatio&&(h.plotGlPixelRatio=h.plot3dPixelRatio);var i=b.editable;if(void 0!==i)for(h.editable=i,f=Object.keys(h.edits),c=0;c<f.length;c++)h.edits[f[c]]=i;if(b.edits)for(f=Object.keys(b.edits),c=0;c<f.length;c++)g=f[c],g in h.edits&&(h.edits[g]=b.edits[g])}h.staticPlot&&(h.editable=!1,h.edits={},h.autosizable=!1,h.scrollZoom=!1,h.doubleClick=!1,h.showTips=!1,h.showLink=!1,h.displayModeBar=!1),"hover"!==h.displayModeBar||u||(h.displayModeBar=!0),("transparent"===h.setBackground||"function"!=typeof h.setBackground)&&(h.setBackground=d)}function g(a,b,c){var d=s.select(a).selectAll(".plot-container").data([0]);d.enter().insert("div",":first-child").classed("plot-container plotly",!0);var e=d.selectAll(".svg-container").data([0]);e.enter().append("div").classed("svg-container",!0).style("position","relative"),e.html(""),b&&(a.data=b),c&&(a.layout=c),C.manager.fillLayout(a),e.style({width:a._fullLayout.width+"px",height:a._fullLayout.height+"px"}),a.framework=C.manager.framework(a),a.framework({data:a.data,layout:a.layout},e.node()),a.framework.setUndoPoint();var f=a.framework.svg(),g=1,h=a._fullLayout.title;""!==h&&h||(g=0);var i=function(){this.call(I.convertToTspans,a)},j=f.select(".title-group text").call(i);if(a._context.edits.titleText){var k=w._(a,"Click to enter Plot title");h&&h!==k||(g=.2,j.attr({"data-unformatted":k}).text(k).style({opacity:g}).on("mouseover.opacity",function(){s.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){s.select(this).transition().duration(1e3).style("opacity",0)}));var l=function(){this.call(I.makeEditable,{gd:a}).on("edit",function(b){a.framework({layout:{title:b}}),this.text(b).call(i),this.call(l)}).on("cancel",function(){var a=this.attr("data-unformatted");this.text(a).call(i)})};j.call(l)}return a._context.setBackground(a,a._fullLayout.paper_bgcolor),B.addLinks(a),Promise.resolve()}function h(a,b){var c,d,e=b+1,f=[];for(c=0;c<a.length;c++)d=a[c],0>d?f.push(e+d):f.push(d);return f;
}function i(a,b,c){var d,e;for(d=0;d<b.length;d++){if(e=b[d],e!==parseInt(e,10))throw new Error("all values in "+c+" must be integers");if(e>=a.data.length||e<-a.data.length)throw new Error(c+" must be valid indices for gd.data.");if(b.indexOf(e,d+1)>-1||e>=0&&b.indexOf(-a.data.length+e)>-1||0>e&&b.indexOf(a.data.length+e)>-1)throw new Error("each index in "+c+" must be unique.")}}function j(a,b,c){if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if("undefined"==typeof b)throw new Error("currentIndices is a required argument.");if(Array.isArray(b)||(b=[b]),i(a,b,"currentIndices"),"undefined"==typeof c||Array.isArray(c)||(c=[c]),"undefined"!=typeof c&&i(a,c,"newIndices"),"undefined"!=typeof c&&b.length!==c.length)throw new Error("current and new indices must be of equal length.")}function k(a,b,c){var d,e;if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if("undefined"==typeof b)throw new Error("traces must be defined.");for(Array.isArray(b)||(b=[b]),d=0;d<b.length;d++)if(e=b[d],"object"!=typeof e||Array.isArray(e)||null===e)throw new Error("all values in traces array must be non-array objects");if("undefined"==typeof c||Array.isArray(c)||(c=[c]),"undefined"!=typeof c&&c.length!==b.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function l(a,b,c,d){var e=w.isPlainObject(d);if(!Array.isArray(a.data))throw new Error("gd.data must be an array");if(!w.isPlainObject(b))throw new Error("update must be a key:value object");if("undefined"==typeof c)throw new Error("indices must be an integer or array of integers");i(a,c,"indices");for(var f in b){if(!Array.isArray(b[f])||b[f].length!==c.length)throw new Error("attribute "+f+" must be an array of length equal to indices array length");if(e&&(!(f in d)||!Array.isArray(d[f])||d[f].length!==b[f].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function m(a,b,c,d){var e,f,g,i,j,k=w.isPlainObject(d),l=[];Array.isArray(c)||(c=[c]),c=h(c,a.data.length-1);for(var m in b)for(var n=0;n<c.length;n++){if(e=a.data[c[n]],g=w.nestedProperty(e,m),f=g.get(),i=b[m][n],!Array.isArray(i))throw new Error("attribute: "+m+" index: "+n+" must be an array");if(!Array.isArray(f))throw new Error("cannot extend missing or non-array attribute: "+m);j=k?d[m][n]:d,t(j)||(j=-1),l.push({prop:g,target:f,insert:i,maxp:Math.floor(j)})}return l}function n(a,b,c,d,e,f){l(a,b,c,d);for(var g,h,i,j=m(a,b,c,d),k=[],n={},o={},p=0;p<j.length;p++)h=j[p].prop,i=j[p].maxp,g=e(j[p].target,j[p].insert),i>=0&&i<g.length&&(k=f(g,i)),i=j[p].target.length,h.set(g),Array.isArray(n[h.astr])||(n[h.astr]=[]),Array.isArray(o[h.astr])||(o[h.astr]=[]),n[h.astr].push(k),o[h.astr].push(i);return{update:n,maxPoints:o}}function o(a){return void 0===a?null:a}function p(a,b,c){function d(){return c.map(function(){return void 0})}function e(a){var b=v.Axes.id2name(a);-1===j.indexOf(b)&&j.push(b)}function f(a){return"LAYOUT"+a+".autorange"}function g(a){return"LAYOUT"+a+".range"}function h(e,f,g){if(Array.isArray(e))return void e.forEach(function(a){h(a,f,g)});if(!(e in b||K.hasParent(b,e))){var i;i="LAYOUT"===e.substr(0,6)?w.nestedProperty(a.layout,e.replace("LAYOUT","")):w.nestedProperty(m[c[g]],e),e in q||(q[e]=d()),void 0===q[e][g]&&(q[e][g]=o(i.get())),void 0!==f&&i.set(f)}}var i,j,k=a._fullLayout,l=a._fullData,m=a.data,n=M.traceFlags(),p={},q={},r={};for(var s in b){if(K.hasParent(b,s))throw new Error("cannot set "+s+"and a parent attribute simultaneously");var t,u,x,y,C,D,E=b[s];if(p[s]=E,"LAYOUT"!==s.substr(0,6)){for(q[s]=d(),i=0;i<c.length;i++)if(t=m[c[i]],u=l[c[i]],x=w.nestedProperty(t,s),y=x.get(),C=Array.isArray(E)?E[i%E.length]:E,void 0!==C){if(D=A.getTraceValObject(u,x.parts),D&&D.impliedEdits&&null!==C)for(var F in D.impliedEdits)h(w.relativeAttr(s,F),D.impliedEdits[F],i);else if("colorbar.thicknessmode"===s&&x.get()!==C&&-1!==["fraction","pixels"].indexOf(C)&&u.colorbar){var G=-1!==["top","bottom"].indexOf(u.colorbar.orient)?k.height-k.margin.t-k.margin.b:k.width-k.margin.l-k.margin.r;h("colorbar.thickness",u.colorbar.thickness*("fraction"===C?1/G:G),i)}else if("colorbar.lenmode"===s&&x.get()!==C&&-1!==["fraction","pixels"].indexOf(C)&&u.colorbar){var H=-1!==["top","bottom"].indexOf(u.colorbar.orient)?k.width-k.margin.l-k.margin.r:k.height-k.margin.t-k.margin.b;h("colorbar.len",u.colorbar.len*("fraction"===C?1/H:H),i)}else("colorbar.tick0"===s||"colorbar.dtick"===s)&&h("colorbar.tickmode","linear",i);if("type"===s&&"pie"===C!=("pie"===y)){var I="x",J="y";"bar"!==C&&"bar"!==y||"h"!==t.orientation||(I="y",J="x"),w.swapAttrs(t,["?","?src"],"labels",I),w.swapAttrs(t,["d?","?0"],"label",I),w.swapAttrs(t,["?","?src"],"values",J),"pie"===y?(w.nestedProperty(t,"marker.color").set(w.nestedProperty(t,"marker.colors").get()),k._pielayer.selectAll("g.trace").remove()):z.traceIs(t,"cartesian")&&(w.nestedProperty(t,"marker.colors").set(w.nestedProperty(t,"marker.color").get()),r[t.xaxis||"x"]=!0,r[t.yaxis||"y"]=!0)}q[s][i]=o(y);var L=["swapxy","swapxyaxes","orientation","orientationaxes"];if(-1!==L.indexOf(s)){if("orientation"===s){x.set(C);var N=t.x&&!t.y?"h":"v";if((x.get()||N)===u.orientation)continue}else"orientationaxes"===s&&(t.orientation={v:"h",h:"v"}[u.orientation]);K.swapXYData(t),n.calc=n.clearAxisTypes=!0}else-1!==B.dataArrayContainers.indexOf(x.parts[0])?(K.manageArrayContainers(x,C,q),n.calc=!0):(D?D.arrayOk&&(Array.isArray(C)||Array.isArray(y))?n.calc=!0:M.update(n,D):n.calc=!0,x.set(C))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(s)&&v.Axes.swap(a,c),"orientationaxes"===s){var O=w.nestedProperty(a.layout,"hovermode");"x"===O.get()?O.set("y"):"y"===O.get()&&O.set("x")}if(-1!==["orientation","type"].indexOf(s)){for(j=[],i=0;i<c.length;i++){var P=m[c[i]];z.traceIs(P,"cartesian")&&(e(P.xaxis||"x"),e(P.yaxis||"y"),"type"===s&&h(["autobinx","autobiny"],!0,i))}h(j.map(f),!0,0),h(j.map(g),[0,1],0)}}else x=w.nestedProperty(a.layout,s.replace("LAYOUT","")),q[s]=[o(x.get())],x.set(Array.isArray(E)?E[0]:E),n.calc=!0}var Q=!1,R=v.Axes.list(a);for(i=0;i<R.length;i++)if(R[i].autorange){Q=!0;break}var S=Object.keys(r);a:for(i=0;i<S.length;i++){for(var T=S[i],U=T.charAt(0),V=U+"axis",W=0;W<m.length;W++)if(z.traceIs(m[W],"cartesian")&&(m[W][V]||U)===T)continue a;h("LAYOUT"+v.Axes.id2name(T),null,0)}return(n.calc||n.calcIfAutorange&&Q)&&(n.clearCalc=!0),(n.calc||n.plot||n.calcIfAutorange)&&(n.fullReplot=!0),{flags:n,undoit:q,redoit:p,traces:c,eventData:w.extendDeepNoArrays([],[p,c])}}function q(a,b){function c(a,d){if(Array.isArray(a))return void a.forEach(function(a){c(a,d)});if(!(a in b||K.hasParent(b,a))){var e=w.nestedProperty(i,a);a in u||(u[a]=o(e.get())),void 0!==d&&e.set(d)}}function d(b,c){if(!w.isPlainObject(b))return!1;var d=b[c+"ref"]||c,e=v.Axes.getFromId(a,d);return e||d.charAt(0)!==c||(e=v.Axes.getFromId(a,c)),(e||{}).autorange}function e(a){var b=R.name2id(a.split(".")[0]);return x[b]=1,b}var f,g,h,i=a.layout,j=a._fullLayout,k=Object.keys(b),l=v.Axes.list(a),m={};for(g=0;g<k.length;g++)if(0===k[g].indexOf("allaxes")){for(h=0;h<l.length;h++){var n=l[h]._id.substr(1),p=-1!==n.indexOf("scene")?n+".":"",q=k[g].replace("allaxes",p+l[h]._name);b[q]||(b[q]=b[k[g]])}delete b[k[g]]}var r,s=M.layoutFlags(),t={},u={},x={};for(var y in b){if(K.hasParent(b,y))throw new Error("cannot set "+y+"and a parent attribute simultaneously");var C=w.nestedProperty(i,y),D=b[y],E=C.parts.length,F="string"==typeof C.parts[E-1]?E-1:E-2,G=C.parts[F],H=C.parts[F-1]+"."+G,I=C.parts.slice(0,F).join("."),L=w.nestedProperty(a.layout,I).get(),O=w.nestedProperty(j,I).get(),P=C.get();if(void 0!==D){t[y]=D,u[y]="reverse"===G?D:o(P);var Q=A.getLayoutValObject(j,C.parts);if(Q&&Q.impliedEdits&&null!==D)for(var S in Q.impliedEdits)c(w.relativeAttr(y,S),Q.impliedEdits[S]);if(-1!==["width","height"].indexOf(y)&&null===D)j[y]=a._initialAutoSize[y];else if(H.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))e(H),w.nestedProperty(j,I+"._inputRange").set(null);else if(H.match(/^[xyz]axis[0-9]*\.autorange$/)){e(H),w.nestedProperty(j,I+"._inputRange").set(null);var T=w.nestedProperty(j,I).get();T._inputDomain&&(T._input.domain=T._inputDomain.slice())}else H.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&w.nestedProperty(j,I+"._inputDomain").set(null);if("type"===G){var U=L,V="linear"===O.type&&"log"===D,W="log"===O.type&&"linear"===D;if(V||W){if(U&&U.range)if(O.autorange)V&&(U.range=U.range[1]>U.range[0]?[1,2]:[2,1]);else{var X=U.range[0],Y=U.range[1];V?(0>=X&&0>=Y&&c(I+".autorange",!0),0>=X?X=Y/1e6:0>=Y&&(Y=X/1e6),c(I+".range[0]",Math.log(X)/Math.LN10),c(I+".range[1]",Math.log(Y)/Math.LN10)):(c(I+".range[0]",Math.pow(10,X)),c(I+".range[1]",Math.pow(10,Y)))}else c(I+".autorange",!0);z.getComponentMethod("annotations","convertCoords")(a,O,D,c),z.getComponentMethod("images","convertCoords")(a,O,D,c)}else c(I+".autorange",!0),c(I+".range",null);w.nestedProperty(j,I+"._inputRange").set(null)}else if(G.match(N.AX_NAME_PATTERN)){var Z=w.nestedProperty(j,y).get(),$=(D||{}).type;$&&"-"!==$||($="linear"),z.getComponentMethod("annotations","convertCoords")(a,Z,$,c),z.getComponentMethod("images","convertCoords")(a,Z,$,c)}var _=J.containerArrayMatch(y);if(_){f=_.array,g=_.index;var aa=_.property,ba=w.nestedProperty(i,f),ca=(ba||[])[g]||{},da=ca,ea=Q||{editType:"calc"},fa=-1!==ea.editType.indexOf("calcIfAutorange");""===g?(fa?s.calc=!0:M.update(s,ea),fa=!1):""===aa&&(da=D,J.isAddVal(D)?u[y]=null:J.isRemoveVal(D)?(u[y]=ca,da=ca):w.warn("unrecognized full object value",b)),fa&&(d(da,"x")||d(da,"y"))?s.calc=!0:M.update(s,ea),m[f]||(m[f]={});var ga=m[f][g];ga||(ga=m[f][g]={}),ga[aa]=D,delete b[y]}else"reverse"===G?(L.range?L.range.reverse():(c(I+".autorange",!0),L.range=[1,0]),O.autorange?s.calc=!0:s.plot=!0):((!j._has("gl2d")&&!j._has("regl")||"dragmode"!==y||"lasso"!==D&&"select"!==D||"lasso"===P||"select"===P)&&Q?M.update(s,Q):s.calc=!0,C.set(D))}}for(f in m){var ha=J.applyContainerArrayChanges(a,w.nestedProperty(i,f),m[f],s);ha||(s.plot=!0)}var ia=j._axisConstraintGroups||[];for(r in x)for(g=0;g<ia.length;g++){var ja=ia[g];if(ja[r]){s.calc=!0;for(var ka in ja)x[ka]||(R.getFromId(a,ka)._constraintShrinkable=!0)}}var la=j.width,ma=j.height;a.layout.autosize&&B.plotAutoSize(a,a.layout,j);var na=b.height||b.width||j.width!==la||j.height!==ma;return na&&(s.calc=!0),(s.plot||s.calc)&&(s.layoutReplot=!0),{flags:s,undoit:u,redoit:t,eventData:w.extendDeep({},t)}}function r(a){var b=s.select(a),c=a._fullLayout;if(c._container=b.selectAll(".plot-container").data([0]),c._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),c._paperdiv=c._container.selectAll(".svg-container").data([0]),c._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),c._glcontainer=c._paperdiv.selectAll(".gl-container").data([{}]),c._glcontainer.enter().append("div").classed("gl-container",!0),c._glcanvas=null,c._paperdiv.selectAll(".main-svg").remove(),c._paper=c._paperdiv.insert("svg",":first-child").classed("main-svg",!0),c._toppaper=c._paperdiv.append("svg").classed("main-svg",!0),!c._uid){var d=[];s.selectAll("defs").each(function(){this.id&&d.push(this.id.split("-")[1])}),c._uid=w.randstr(d)}c._paperdiv.selectAll(".main-svg").attr(H.svgAttrs),c._defs=c._paper.append("defs").attr("id","defs-"+c._uid),c._clips=c._defs.append("g").classed("clips",!0),c._topdefs=c._toppaper.append("defs").attr("id","topdefs-"+c._uid),c._topclips=c._topdefs.append("g").classed("clips",!0),c._bgLayer=c._paper.append("g").classed("bglayer",!0),c._draggers=c._paper.append("g").classed("draglayer",!0);var e=c._paper.append("g").classed("layer-below",!0);c._imageLowerLayer=e.append("g").classed("imagelayer",!0),c._shapeLowerLayer=e.append("g").classed("shapelayer",!0),c._cartesianlayer=c._paper.append("g").classed("cartesianlayer",!0),c._ternarylayer=c._paper.append("g").classed("ternarylayer",!0),c._geolayer=c._paper.append("g").classed("geolayer",!0),c._pielayer=c._paper.append("g").classed("pielayer",!0),c._glimages=c._paper.append("g").classed("glimages",!0);var f=c._toppaper.append("g").classed("layer-above",!0);c._imageUpperLayer=f.append("g").classed("imagelayer",!0),c._shapeUpperLayer=f.append("g").classed("shapelayer",!0),c._infolayer=c._toppaper.append("g").classed("infolayer",!0),c._menulayer=c._toppaper.append("g").classed("menulayer",!0),c._zoomlayer=c._toppaper.append("g").classed("zoomlayer",!0),c._hoverlayer=c._toppaper.append("g").classed("hoverlayer",!0),a.emit("plotly_framework")}var s=a("d3"),t=a("fast-isnumeric"),u=a("has-hover"),v=a("../plotly"),w=a("../lib"),x=a("../lib/events"),y=a("../lib/queue"),z=a("../registry"),A=a("./plot_schema"),B=a("../plots/plots"),C=a("../plots/polar"),D=a("../plots/cartesian/graph_interact"),E=a("../components/drawing"),F=a("../components/color"),G=a("../components/errorbars"),H=a("../constants/xmlns_namespaces"),I=a("../lib/svg_text_utils"),J=a("./manage_arrays"),K=a("./helpers"),L=a("./subroutines"),M=a("./edit_types"),N=a("../plots/cartesian/constants"),O=a("../plots/cartesian/constraints"),P=O.enforce,Q=O.clean,R=a("../plots/cartesian/axis_ids");v.plot=function(a,b,c,d){function e(){return p?v.addFrames(a,p):void 0}function h(){for(var b=y._basePlotModules,c=0;c<b.length;c++)b[c].drawFramework&&b[c].drawFramework(a);return!y._glcanvas&&y._has("gl")&&(y._glcanvas=y._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(a){return a.key}),y._glcanvas.enter().append("canvas").attr("class",function(a){return"gl-canvas gl-canvas-"+a.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible"}).attr("width",y.width).attr("height",y.height),y._glcanvas.filter(function(a){return!a.pick}).style({"pointer-events":"none"})),w.syncOrAsync([L.layoutStyles],a)}function i(){var b,c,d,e=a.calcdata;for(z.getComponentMethod("legend","draw")(a),z.getComponentMethod("rangeselector","draw")(a),z.getComponentMethod("sliders","draw")(a),z.getComponentMethod("updatemenus","draw")(a),b=0;b<e.length;b++)c=e[b],d=c[0].trace,d.visible===!0&&d._module.colorbar?d._module.colorbar(a,c):B.autoMargin(a,"cb"+d.uid);return B.doAutoMargin(a),B.previousPromises(a)}function j(){return JSON.stringify(y._size)!==F?w.syncOrAsync([i,L.layoutStyles],a):void 0}function k(){if(!A)return void P(a);var b,c,d,e=y._subplots.cartesian,f=y._modules,g=[];for(d=0;d<f.length;d++)w.pushUnique(g,f[d].setPositions);if(g.length)for(c=0;c<e.length;c++)for(b=y._plots[e[c]],d=0;d<g.length;d++)g[d](a,b);return G.calc(a),w.syncOrAsync([z.getComponentMethod("shapes","calcAutorange"),z.getComponentMethod("annotations","calcAutorange"),l,z.getComponentMethod("rangeslider","calcAutorange")],a)}function l(){if(!a._transitioning){for(var b=v.Axes.list(a,"",!0),c=0;c<b.length;c++){var d=b[c];Q(a,d),v.Axes.doAutoRange(d)}P(a),u&&v.Axes.saveRangeInitial(a)}}function m(){return v.Axes.doTicks(a,"redraw")}function n(){var b,c=a.calcdata,d=y._infolayer.selectAll("g.rangeslider-container");for(b=0;b<c.length;b++){var e=c[b][0].trace,f=e.visible===!0,g=e.uid;if(!f||!z.traceIs(e,"2dMap")){var h=".hm"+g+",.contour"+g+",#clip"+g;y._paper.selectAll(h).remove(),d.selectAll(h).remove()}f&&e._module.colorbar||y._infolayer.selectAll(".cb"+g).remove()}var i=y._basePlotModules;for(b=0;b<i.length;b++)i[b].plot(a);var j=y._paper.selectAll(".layer-subplot");return y._shapeSubplotLayers=j.selectAll(".shapelayer"),B.style(a),z.getComponentMethod("shapes","draw")(a),z.getComponentMethod("annotations","draw")(a),B.addLinks(a),y._replotting=!1,B.previousPromises(a)}function o(){z.getComponentMethod("shapes","draw")(a),z.getComponentMethod("images","draw")(a),z.getComponentMethod("annotations","draw")(a),z.getComponentMethod("legend","draw")(a),z.getComponentMethod("rangeslider","draw")(a),z.getComponentMethod("rangeselector","draw")(a),z.getComponentMethod("sliders","draw")(a),z.getComponentMethod("updatemenus","draw")(a)}var p;if(a=w.getGraphDiv(a),x.init(a),w.isPlainObject(b)){var q=b;b=q.data,c=q.layout,d=q.config,p=q.frames}var t=x.triggerHandler(a,"plotly_beforeplot",[b,c,d]);if(t===!1)return Promise.reject();b||c||w.isPlotDiv(a)||w.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",a),f(a,d),c||(c={}),s.select(a).classed("js-plotly-plot",!0),E.makeTester(),Array.isArray(a._promises)||(a._promises=[]);var u=0===(a.data||[]).length&&Array.isArray(b);if(Array.isArray(b)&&(K.cleanData(b,a.data),u?a.data=b:a.data.push.apply(a.data,b),a.empty=!1),(!a.layout||u)&&(a.layout=K.cleanLayout(c)),a._dragging&&!a._transitioning)return a._replotPending=!0,Promise.reject();a._replotPending=!1,B.supplyDefaults(a);var y=a._fullLayout;if(b&&b[0]&&b[0].r)return g(a,b,c);y._replotting=!0,u&&r(a),a.framework!==r&&(a.framework=r,r(a)),E.initGradients(a),u&&v.Axes.saveShowSpikeInitial(a);var A=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;A&&B.doCalcdata(a);for(var C=0;C<a.calcdata.length;C++)a.calcdata[C][0].trace=a._fullData[C];var F=JSON.stringify(y._size),H=[B.previousPromises,e,h,i,j,k,L.layoutStyles,m,n,o,D,B.rehover,B.previousPromises],I=w.syncOrAsync(H,a);return I&&I.then||(I=Promise.resolve()),I.then(function(){return a.emit("plotly_afterplot"),a})},v.redraw=function(a){if(a=w.getGraphDiv(a),!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a);return K.cleanData(a.data,a.data),K.cleanLayout(a.layout),a.calcdata=void 0,v.plot(a).then(function(){return a.emit("plotly_redraw"),a})},v.newPlot=function(a,b,c,d){return a=w.getGraphDiv(a),B.cleanPlot([],{},a._fullData||{},a._fullLayout||{}),B.purge(a),v.plot(a,b,c,d)},v.extendTraces=function S(a,b,c,d){a=w.getGraphDiv(a);var e=n(a,b,c,d,function(a,b){return a.concat(b)},function(a,b){return a.splice(0,a.length-b)}),f=v.redraw(a),g=[a,e.update,c,e.maxPoints];return y.add(a,v.prependTraces,g,S,arguments),f},v.prependTraces=function T(a,b,c,d){a=w.getGraphDiv(a);var e=n(a,b,c,d,function(a,b){return b.concat(a)},function(a,b){return a.splice(b,a.length)}),f=v.redraw(a),g=[a,e.update,c,e.maxPoints];return y.add(a,v.extendTraces,g,T,arguments),f},v.addTraces=function U(a,b,c){a=w.getGraphDiv(a);var d,e,f=[],g=v.deleteTraces,h=U,i=[a,f],l=[a,b];for(k(a,b,c),Array.isArray(b)||(b=[b]),b=b.map(function(a){return w.extendFlat({},a)}),K.cleanData(b,a.data),d=0;d<b.length;d++)a.data.push(b[d]);for(d=0;d<b.length;d++)f.push(-b.length+d);if("undefined"==typeof c)return e=v.redraw(a),y.add(a,g,i,h,l),e;Array.isArray(c)||(c=[c]);try{j(a,f,c)}catch(m){throw a.data.splice(a.data.length-b.length,b.length),m}return y.startSequence(a),y.add(a,g,i,h,l),e=v.moveTraces(a,f,c),y.stopSequence(a),e},v.deleteTraces=function V(a,b){a=w.getGraphDiv(a);var c,d,e=[],f=v.addTraces,g=V,j=[a,e,b],k=[a,b];if("undefined"==typeof b)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(b)||(b=[b]),i(a,b,"indices"),b=h(b,a.data.length-1),b.sort(w.sorterDes),c=0;c<b.length;c+=1)d=a.data.splice(b[c],1)[0],e.push(d);var l=v.redraw(a);return y.add(a,f,j,g,k),l},v.moveTraces=function W(a,b,c){a=w.getGraphDiv(a);var d,e=[],f=[],g=W,i=W,k=[a,c,b],l=[a,b,c];if(j(a,b,c),b=Array.isArray(b)?b:[b],"undefined"==typeof c)for(c=[],d=0;d<b.length;d++)c.push(-b.length+d);for(c=Array.isArray(c)?c:[c],b=h(b,a.data.length-1),c=h(c,a.data.length-1),d=0;d<a.data.length;d++)-1===b.indexOf(d)&&e.push(a.data[d]);for(d=0;d<b.length;d++)f.push({newIndex:c[d],trace:a.data[b[d]]});for(f.sort(function(a,b){return a.newIndex-b.newIndex}),d=0;d<f.length;d+=1)e.splice(f[d].newIndex,0,f[d].trace);a.data=e;var m=v.redraw(a);return y.add(a,g,k,i,l),m},v.restyle=function X(a,b,c,d){a=w.getGraphDiv(a),K.clearPromiseQueue(a);var e={};if("string"==typeof b)e[b]=c;else{if(!w.isPlainObject(b))return w.warn("Restyle fail.",b,c,d),Promise.reject();e=w.extendFlat({},b),void 0===d&&(d=c)}Object.keys(e).length&&(a.changed=!0);var f=K.coerceTraceIndices(a,d),g=p(a,e,f),h=g.flags;h.clearCalc&&(a.calcdata=void 0),h.clearAxisTypes&&K.clearAxisTypes(a,f,{});var i=[];h.fullReplot?i.push(v.plot):(i.push(B.previousPromises),B.supplyDefaults(a),h.style&&i.push(L.doTraceStyle),h.colorbars&&i.push(L.doColorBars)),i.push(B.rehover),y.add(a,X,[a,g.undoit,g.traces],X,[a,g.redoit,g.traces]);var j=w.syncOrAsync(i,a);return j&&j.then||(j=Promise.resolve()),j.then(function(){return a.emit("plotly_restyle",g.eventData),a})},v.relayout=function Y(a,b,c){if(a=w.getGraphDiv(a),K.clearPromiseQueue(a),a.framework&&a.framework.isPolar)return Promise.resolve(a);var d={};if("string"==typeof b)d[b]=c;else{if(!w.isPlainObject(b))return w.warn("Relayout fail.",b,c),Promise.reject();d=w.extendFlat({},b)}Object.keys(d).length&&(a.changed=!0);var e=q(a,d),f=e.flags;f.calc&&(a.calcdata=void 0);var g=[B.previousPromises];f.layoutReplot?g.push(L.layoutReplot):Object.keys(d).length&&(B.supplyDefaults(a),f.legend&&g.push(L.doLegend),f.layoutstyle&&g.push(L.layoutStyles),f.ticks&&g.push(L.doTicksRelayout),f.modebar&&g.push(L.doModeBar),f.camera&&g.push(L.doCamera)),g.push(B.rehover),y.add(a,Y,[a,e.undoit],Y,[a,e.redoit]);var h=w.syncOrAsync(g,a);return h&&h.then||(h=Promise.resolve(a)),h.then(function(){return a.emit("plotly_relayout",e.eventData),a})},v.update=function Z(a,b,c,d){if(a=w.getGraphDiv(a),K.clearPromiseQueue(a),a.framework&&a.framework.isPolar)return Promise.resolve(a);w.isPlainObject(b)||(b={}),w.isPlainObject(c)||(c={}),Object.keys(b).length&&(a.changed=!0),Object.keys(c).length&&(a.changed=!0);var e=K.coerceTraceIndices(a,d),f=p(a,w.extendFlat({},b),e),g=f.flags,h=q(a,w.extendFlat({},c)),i=h.flags;(g.clearCalc||i.calc)&&(a.calcdata=void 0),g.clearAxisTypes&&K.clearAxisTypes(a,e,c);var j=[];if(g.fullReplot&&i.layoutReplot){var k=a.data,l=a.layout;a.data=void 0,a.layout=void 0,j.push(function(){return v.plot(a,k,l)})}else g.fullReplot?j.push(v.plot):i.layoutReplot?j.push(L.layoutReplot):(j.push(B.previousPromises),B.supplyDefaults(a),g.style&&j.push(L.doTraceStyle),g.colorbars&&j.push(L.doColorBars),i.legend&&j.push(L.doLegend),i.layoutstyle&&j.push(L.layoutStyles),i.ticks&&j.push(L.doTicksRelayout),i.modebar&&j.push(L.doModeBar),i.camera&&j.push(L.doCamera));j.push(B.rehover),y.add(a,Z,[a,f.undoit,h.undoit,f.traces],Z,[a,f.redoit,h.redoit,f.traces]);var m=w.syncOrAsync(j,a);return m&&m.then||(m=Promise.resolve(a)),m.then(function(){return a.emit("plotly_update",{data:f.eventData,layout:h.eventData}),a})},v.animate=function(a,b,c){function d(a){return Array.isArray(h)?a>=h.length?h[0]:h[a]:h}function e(a){return Array.isArray(i)?a>=i.length?i[0]:i[a]:i}function f(a,b){var c=0;return function(){return a&&++c===b?a():void 0}}if(a=w.getGraphDiv(a),!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var g=a._transitionData;g._frameQueue||(g._frameQueue=[]),c=B.supplyAnimationDefaults(c);var h=c.transition,i=c.frame;return void 0===g._frameWaitingCnt&&(g._frameWaitingCnt=0),new Promise(function(i,j){function k(){if(0!==g._frameQueue.length){for(;g._frameQueue.length;){var b=g._frameQueue.pop();b.onInterrupt&&b.onInterrupt()}a.emit("plotly_animationinterrupted",[])}}function l(b){if(0!==b.length){for(var h=0;h<b.length;h++){var k;k="byname"===b[h].type?B.computeFrame(a,b[h].name):b[h].data;var l=e(h),m=d(h);m.duration=Math.min(m.duration,l.duration);var n={frame:k,name:b[h].name,frameOpts:l,transitionOpts:m};h===b.length-1&&(n.onComplete=f(i,2),n.onInterrupt=j),g._frameQueue.push(n)}"immediate"===c.mode&&(g._lastFrameAt=-(1/0)),g._animationRaf||o()}}function m(){a.emit("plotly_animated"),window.cancelAnimationFrame(g._animationRaf),g._animationRaf=null}function n(){g._currentFrame&&g._currentFrame.onComplete&&g._currentFrame.onComplete();var b=g._currentFrame=g._frameQueue.shift();if(b){var c=b.name?b.name.toString():null;a._fullLayout._currentFrame=c,g._lastFrameAt=Date.now(),g._timeToNext=b.frameOpts.duration,B.transition(a,b.frame.data,b.frame.layout,K.coerceTraceIndices(a,b.frame.traces),b.frameOpts,b.transitionOpts).then(function(){b.onComplete&&b.onComplete()}),a.emit("plotly_animatingframe",{name:c,frame:b.frame,animation:{frame:b.frameOpts,transition:b.transitionOpts}})}else m()}function o(){a.emit("plotly_animating"),g._lastFrameAt=-(1/0),g._timeToNext=0,g._runningTransitions=0,g._currentFrame=null;var b=function(){g._animationRaf=window.requestAnimationFrame(b),Date.now()-g._lastFrameAt>g._timeToNext&&n()};b()}function p(a){return Array.isArray(h)?s>=h.length?a.transitionOpts=h[s]:a.transitionOpts=h[0]:a.transitionOpts=h,s++,a}var q,r,s=0,t=[],u=void 0===b||null===b,v=Array.isArray(b),x=!u&&!v&&w.isPlainObject(b);if(x)t.push({type:"object",data:p(w.extendFlat({},b))});else if(u||-1!==["string","number"].indexOf(typeof b))for(q=0;q<g._frames.length;q++)r=g._frames[q],r&&(u||String(r.group)===String(b))&&t.push({type:"byname",name:String(r.name),data:p({name:r.name})});else if(v)for(q=0;q<b.length;q++){var y=b[q];-1!==["number","string"].indexOf(typeof y)?(y=String(y),t.push({type:"byname",name:y,data:p({name:y})})):w.isPlainObject(y)&&t.push({type:"object",data:p(w.extendFlat({},y))})}for(q=0;q<t.length;q++)if(r=t[q],"byname"===r.type&&!g._frameHash[r.data.name])return w.warn('animate failure: frame not found: "'+r.data.name+'"'),void j();-1!==["next","immediate"].indexOf(c.mode)&&k(),"reverse"===c.direction&&t.reverse();var z=a._fullLayout._currentFrame;if(z&&c.fromcurrent){var A=-1;for(q=0;q<t.length;q++)if(r=t[q],"byname"===r.type&&r.name===z){A=q;break}if(A>0&&A<t.length-1){var C=[];for(q=0;q<t.length;q++)r=t[q],("byname"!==t[q].type||q>A)&&C.push(r);t=C}}t.length>0?l(t):(a.emit("plotly_animated"),i())})},v.addFrames=function(a,b,c){a=w.getGraphDiv(a);var d=0;if(null===b||void 0===b)return Promise.resolve();if(!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var e,f,g,h,i=a._transitionData._frames,j=a._transitionData._frameHash;if(!Array.isArray(b))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+b);var k=i.length+2*b.length,l=[];for(e=b.length-1;e>=0;e--)if(w.isPlainObject(b[e])){var m=(j[b[e].name]||{}).name,n=b[e].name;m&&n&&"number"==typeof n&&j[m]&&(d++,w.warn('addFrames: overwriting frame "'+j[m].name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),d>5&&w.warn("addFrames: This API call has yielded too many warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),l.push({frame:B.supplyFrameDefaults(b[e]),index:c&&void 0!==c[e]&&null!==c[e]?c[e]:k+e})}l.sort(function(a,b){return a.index>b.index?-1:a.index<b.index?1:0});var o=[],p=[],q=i.length;for(e=l.length-1;e>=0;e--){if(f=l[e].frame,"number"==typeof f.name&&w.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!f.name)for(;j[f.name="frame "+a._transitionData._counter++];);if(j[f.name]){for(g=0;g<i.length&&(i[g]||{}).name!==f.name;g++);o.push({type:"replace",index:g,value:f}),p.unshift({type:"replace",index:g,value:i[g]})}else h=Math.max(0,Math.min(l[e].index,q)),o.push({type:"insert",index:h,value:f}),p.unshift({type:"delete",index:h}),q++}var r=B.modifyFrames,s=B.modifyFrames,t=[a,p],u=[a,o];return y&&y.add(a,r,t,s,u),B.modifyFrames(a,o)},v.deleteFrames=function(a,b){if(a=w.getGraphDiv(a),!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a);var c,d,e=a._transitionData._frames,f=[],g=[];if(!b)for(b=[],c=0;c<e.length;c++)b.push(c);for(b=b.slice(0),b.sort(),c=b.length-1;c>=0;c--)d=b[c],f.push({type:"delete",index:d}),g.unshift({type:"insert",index:d,value:e[d]});var h=B.modifyFrames,i=B.modifyFrames,j=[a,g],k=[a,f];return y&&y.add(a,h,j,i,k),B.modifyFrames(a,f)},v.purge=function(a){a=w.getGraphDiv(a);var b=a._fullLayout||{},c=a._fullData||[];return B.cleanPlot([],{},c,b),B.purge(a),x.purge(a),b._container&&b._container.remove(),delete a._context,a}},{"../components/color":613,"../components/drawing":638,"../components/errorbars":644,"../constants/xmlns_namespaces":719,"../lib":738,"../lib/events":726,"../lib/queue":752,"../lib/svg_text_utils":761,"../plotly":780,"../plots/cartesian/axis_ids":788,"../plots/cartesian/constants":790,"../plots/cartesian/constraints":792,"../plots/cartesian/graph_interact":794,"../plots/plots":846,"../plots/polar":849,"../registry":861,"./edit_types":769,"./helpers":770,"./manage_arrays":771,"./plot_schema":774,"./subroutines":777,d3:123,"fast-isnumeric":132,"has-hover":289}],773:[function(a,b,c){"use strict";b.exports={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],774:[function(a,b,c){"use strict";function d(a,b){var c,d,e,f,g=a._basePlotModules;if(g){var h;for(c=0;c<g.length;c++){if(e=g[c],e.attrRegex&&e.attrRegex.test(b)){if(e.layoutAttrOverrides)return e.layoutAttrOverrides;!h&&e.layoutAttributes&&(h=e.layoutAttributes)}var i=e.baseLayoutAttrOverrides;if(i&&b in i)return i[b]}if(h)return h}var j=a._modules;if(j)for(c=0;c<j.length;c++)if(f=j[c].layoutAttributes,f&&b in f)return f[b];for(d in q.componentsRegistry)if(e=q.componentsRegistry[d],!e.schema&&b===e.name)return e.layoutAttributes;return b in t?t[b]:"radialaxis"===b||"angularaxis"===b?x[b]:x.layout[b]||!1}function e(a,b,c){if(!a)return!1;if(a._isLinkedToArray)if(f(b[c]))c++;else if(c<b.length)return!1;for(;c<b.length;c++){var d=a[b[c]];if(!r.isPlainObject(d))break;if(a=d,c===b.length-1)break;if(a._isLinkedToArray){if(c++,!f(b[c]))return!1}else if("info_array"===a.valType){c++;var e=b[c];if(!f(e)||e>=a.items.length)return!1;a=a.items[e]}}return a}function f(a){return a===Math.round(a)&&a>=0}function g(a){var b,c;"area"===a?(b={attributes:w},c={}):(b=q.modules[a]._module,c=b.basePlotModule);var d={};d.type=null,A(d,s),A(d,b.attributes),c.attributes&&A(d,c.attributes),d.type=a;var e={meta:b.meta||{},attributes:k(d)};if(b.layoutAttributes){var f={};A(f,b.layoutAttributes),e.layoutAttributes=k(f)}return e}function h(){var a,b,c={};A(c,t);for(a in q.subplotsRegistry)if(b=q.subplotsRegistry[a],b.layoutAttributes)if("cartesian"===b.name)o(c,b,"xaxis"),o(c,b,"yaxis");else{var d="subplot"===b.attr?b.name:b.attr;o(c,b,d)}c=n(c);for(a in q.componentsRegistry){b=q.componentsRegistry[a];var e=b.schema;if(e&&(e.subplots||e.layout)){var f=e.subplots;if(f&&f.xaxis&&!f.yaxis)for(var g in f.xaxis)delete c.yaxis[g]}else b.layoutAttributes&&p(c,b.layoutAttributes,b.name)}return{layoutAttributes:k(c)}}function i(a){var b=q.transformsRegistry[a],c=A({},b.attributes);return Object.keys(q.componentsRegistry).forEach(function(b){var d=q.componentsRegistry[b];d.schema&&d.schema.transforms&&d.schema.transforms[a]&&Object.keys(d.schema.transforms[a]).forEach(function(b){p(c,d.schema.transforms[a][b],b)})}),{attributes:k(c)}}function j(){var a={frames:r.extendDeepAll({},u)};return k(a),a.frames}function k(a){return l(a),m(a),a}function l(a){function b(a){return{valType:"string",editType:"none"}}function d(a,d,e){
c.isValObject(a)?"data_array"===a.valType?(a.role="data",e[d+"src"]=b(d)):a.arrayOk===!0&&(e[d+"src"]=b(d)):r.isPlainObject(a)&&(a.role="object")}c.crawl(a,d)}function m(a){function b(a,b,c){if(a){var d=a[C];d&&(delete a[C],c[b]={items:{}},c[b].items[d]=a,c[b].role="object")}}c.crawl(a,b)}function n(a){return z(a,{radialaxis:x.radialaxis,angularaxis:x.angularaxis}),z(a,x.layout),a}function o(a,b,c){var d=r.nestedProperty(a,c),e=A({},b.layoutAttributes);e[B]=!0,d.set(e)}function p(a,b,c){var d=r.nestedProperty(a,c);d.set(A(d.get()||{},b))}var q=a("../registry"),r=a("../lib"),s=a("../plots/attributes"),t=a("../plots/layout_attributes"),u=a("../plots/frame_attributes"),v=a("../plots/animation_attributes"),w=a("../plots/polar/area_attributes"),x=a("../plots/polar/axis_attributes"),y=a("./edit_types"),z=r.extendFlat,A=r.extendDeepAll,B="_isSubplotObj",C="_isLinkedToArray",D="_arrayAttrRegexps",E="_deprecated",F=[B,C,D,E];c.IS_SUBPLOT_OBJ=B,c.IS_LINKED_TO_ARRAY=C,c.DEPRECATED=E,c.UNDERSCORE_ATTRS=F,c.get=function(){var a={};q.allTypes.concat("area").forEach(function(b){a[b]=g(b)});var b={};return Object.keys(q.transformsRegistry).forEach(function(a){b[a]=i(a)}),{defs:{valObjects:r.valObjectMeta,metaKeys:F.concat(["description","role","editType","impliedEdits"]),editType:{traces:y.traces,layout:y.layout},impliedEdits:{}},traces:a,layout:h(),transforms:b,frames:j(),animation:k(v)}},c.crawl=function(a,b,d,e){var f=d||0;e=e||"",Object.keys(a).forEach(function(d){var g=a[d];if(-1===F.indexOf(d)){var h=(e?e+".":"")+d;b(g,d,a,f,h),c.isValObject(g)||r.isPlainObject(g)&&"impliedEdits"!==d&&c.crawl(g,b,f+1,h)}})},c.isValObject=function(a){return a&&void 0!==a.valType},c.findArrayAttributes=function(a){function b(b,c,g,h){f=f.slice(0,h).concat([c]);var i=b&&("data_array"===b.valType||b.arrayOk===!0)&&!("colorbar"===f[h-1]&&("ticktext"===c||"tickvals"===c));if(i){var j=d(f),k=r.nestedProperty(a,j).get();Array.isArray(k)&&e.push(j)}}function d(a){return a.join(".")}var e=[],f=[];if(c.crawl(s,b),a._module&&a._module.attributes&&c.crawl(a._module.attributes,b),a.transforms)for(var g=a.transforms,h=0;h<g.length;h++){var i=g[h],j=i._module;j&&(f=["transforms["+h+"]"],c.crawl(j.attributes,b,1))}return a._fullInput&&a._fullInput._module&&a._fullInput._module.attributes&&(c.crawl(a._fullInput._module.attributes,b),e=r.filterUnique(e)),e},c.getTraceValObject=function(a,b){var c,d,g=b[0],h=1;if("transforms"===g){if(!Array.isArray(a.transforms))return!1;var i=b[1];if(!f(i)||i>=a.transforms.length)return!1;c=(q.transformsRegistry[a.transforms[i].type]||{}).attributes,d=c&&c[b[2]],h=3}else if("area"===a.type)d=w[g];else{var j=a._module;if(j||(j=(q.modules[a.type||s.type.dflt]||{})._module),!j)return!1;if(c=j.attributes,d=c&&c[g],!d){var k=j.basePlotModule;k&&k.attributes&&(d=k.attributes[g])}d||(d=s[g])}return e(d,b,h)},c.getLayoutValObject=function(a,b){var c=d(a,b[0]);return e(c,b,1)}},{"../lib":738,"../plots/animation_attributes":781,"../plots/attributes":783,"../plots/frame_attributes":811,"../plots/layout_attributes":837,"../plots/polar/area_attributes":847,"../plots/polar/axis_attributes":848,"../registry":861,"./edit_types":769}],775:[function(a,b,c){"use strict";function d(a){g.register(a,a.name,a.categories,a.meta),g.subplotsRegistry[a.basePlotModule.name]||g.registerSubplot(a.basePlotModule)}function e(a){if("string"!=typeof a.name)throw new Error("Transform module *name* must be a string.");var b="Transform module "+a.name,c="function"==typeof a.transform,d="function"==typeof a.calcTransform;if(!c&&!d)throw new Error(b+" is missing a *transform* or *calcTransform* method.");c&&d&&h.log([b+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),h.isPlainObject(a.attributes)||h.log(b+" registered without an *attributes* object."),"function"!=typeof a.supplyDefaults&&h.log(b+" registered without a *supplyDefaults* method."),g.registerTransform(a)}function f(a){if("string"!=typeof a.name)throw new Error("Component module *name* must be a string.");g.registerComponent(a)}var g=a("../registry"),h=a("../lib");b.exports=function(a){if(!a)throw new Error("No argument passed to Plotly.register.");a&&!Array.isArray(a)&&(a=[a]);for(var b=0;b<a.length;b++){var c=a[b];if(!c)throw new Error("Invalid module was attempted to be registered!");switch(c.moduleType){case"trace":d(c);break;case"transform":e(c);break;case"component":f(c);break;case"locale":g.registerLocale(c);break;default:throw new Error("Invalid module was attempted to be registered!")}}}},{"../lib":738,"../registry":861}],776:[function(a,b,c){"use strict";var d=a("../plotly"),e=a("../lib");b.exports=function(a){return e.extendFlat(d.defaultConfig,a)}},{"../lib":738,"../plotly":780}],777:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(!(e[0]>=a[1]||e[1]<=a[0])&&f[0]<b[1]&&f[1]>b[0])return!0}return!1}function e(a,b){return(a.ticks||a.showline)&&(b===a._mainSubplot||"all"===a.mirror||"allticks"===a.mirror)}function f(a,b,c){if(!c.showline||!c._lw)return!1;if("all"===c.mirror||"allticks"===c.mirror)return!0;var d=c._anchorAxis;if(!d)return!1;var e=s.FROM_BL[b];return c.side===b?d.domain[e]===a.domain[e]:c.mirror&&d.domain[1-e]===a.domain[1-e]}function g(a,b,c,d){if(f(a,b,c))return c._lw;for(var e=0;e<d.length;e++){var g=d[e];if(g._mainAxis===c._mainAxis&&f(a,b,g))return g._lw}return 0}var h=a("d3"),i=a("../plotly"),j=a("../registry"),k=a("../plots/plots"),l=a("../lib"),m=a("../components/color"),n=a("../components/drawing"),o=a("../components/titles"),p=a("../components/modebar"),q=a("../plots/cartesian/graph_interact"),r=a("../plots/cartesian/constants"),s=a("../constants/alignment");c.layoutStyles=function(a){return l.syncOrAsync([k.doAutoMargin,c.lsInner],a)},c.lsInner=function(a){function b(a,b,c){var d=a._lw/2;return"x"===a._id.charAt(0)?b?"top"===c?b._offset-l-d:b._offset+b._length+l+d:k.t+k.h*(1-(a.position||0))+d%1:b?"right"===c?b._offset+b._length+l+d:b._offset-l-d:k.l+k.w*(a.position||0)+d%1}var f,j=a._fullLayout,k=j._size,l=k.p,o=i.Axes.list(a),q=j._has("cartesian");for(f=0;f<o.length;f++){var t=o[f];t.setScale();var u=t._anchorAxis;t._linepositions={},t._lw=n.crispRound(a,t.linewidth,1),t._mainLinePosition=b(t,u,t.side),t._mainMirrorPosition=t.mirror&&u?b(t,u,s.OPPOSITE_SIDE[t.side]):null}j._paperdiv.style({width:j.width+"px",height:j.height+"px"}).selectAll(".main-svg").call(n.setSize,j.width,j.height),a._context.setBackground(a,j.paper_bgcolor);var v=j._paper.selectAll("g.subplot"),w=[],x=[];v.each(function(a){var b=j._plots[a];if(b.mainplot)return b.bg&&b.bg.remove(),void(b.bg=void 0);var c=b.xaxis.domain,e=b.yaxis.domain,f=[];d(c,e,x)?f=[0]:(w.push(a),x.push([c,e]));var g=b.plotgroup.selectAll(".bg").data(f);g.enter().append("rect").classed("bg",!0),g.exit().remove(),g.each(function(){b.bg=g;var a=b.plotgroup.node();a.insertBefore(this,a.childNodes[0])})});var y=j._bgLayer.selectAll(".bg").data(w);return y.enter().append("rect").classed("bg",!0),y.exit().remove(),y.each(function(a){j._plots[a].bg=h.select(this)}),v.each(function(a){function c(a){return"M"+y+","+a+"H"+z}function d(a){return"M"+s._offset+","+a+"h"+s._length}function h(a){return"M"+a+","+F+"V"+E}function i(a){return"M"+a+","+t._offset+"v"+t._length}function k(b,c,d){if(!b.showline||a!==b._mainSubplot)return"";if(!b._anchorAxis)return d(b._mainLinePosition);var e=c(b._mainLinePosition);return b.mirror&&(e+=c(b._mainMirrorPosition)),e}var p=j._plots[a],s=p.xaxis,t=p.yaxis;p.bg&&q&&p.bg.call(n.setRect,s._offset-l,t._offset-l,s._length+2*l,t._length+2*l).call(m.fill,j.plot_bgcolor).style("stroke-width",0),p.clipId="clip"+j._uid+a+"plot";var u=j._clips.selectAll("#"+p.clipId).data([0]);u.enter().append("clipPath").attr({"class":"plotclip",id:p.clipId}).append("rect"),u.selectAll("rect").attr({width:s._length,height:t._length}),n.setTranslate(p.plot,s._offset,t._offset);var v,w;for(p._hasClipOnAxisFalse?(v=null,w=p.clipId):(v=p.clipId,w=null),n.setClipUrl(p.plot,v),f=0;f<r.traceLayerClasses.length;f++){var x=r.traceLayerClasses[f];"scatterlayer"!==x&&p.plot.selectAll("g."+x).call(n.setClipUrl,w)}if(p.layerClipId=w,q){var y,z,A,B,C,D,E,F,G,H,I,J,K;if(e(s,a)){C=g(s,"left",t,o),y=s._offset-(C?l+C:0),D=g(s,"right",t,o),z=s._offset+s._length+(D?l+D:0),A=b(s,t,"bottom"),B=b(s,t,"top"),K=!s._anchorAxis||a!==s._mainSubplot,K&&s.ticks&&"allticks"===s.mirror&&(s._linepositions[a]=[A,B]);var L=k(s,c,d);K&&s.showline&&("all"===s.mirror||"allticks"===s.mirror)&&(L+=c(A)+c(B)),p.xlines.attr("d",L||"M0,0").style("stroke-width",s._lw+"px").call(m.stroke,s.showline?s.linecolor:"rgba(0,0,0,0)")}if(e(t,a)){I=g(t,"bottom",s,o),E=t._offset+t._length+(I?l:0),J=g(t,"top",s,o),F=t._offset-(J?l:0),G=b(t,s,"left"),H=b(t,s,"right"),K=!t._anchorAxis||a!==s._mainSubplot,K&&t.ticks&&"allticks"===t.mirror&&(t._linepositions[a]=[G,H]);var M=k(t,h,i);K&&t.showline&&("all"===t.mirror||"allticks"===t.mirror)&&(M+=h(G)+h(H)),p.ylines.attr("d",M||"M0,0").style("stroke-width",t._lw+"px").call(m.stroke,t.showline?t.linecolor:"rgba(0,0,0,0)")}}}),i.Axes.makeClipPaths(a),c.drawMainTitle(a),p.manage(a),a._promises.length&&Promise.all(a._promises)},c.drawMainTitle=function(a){var b=a._fullLayout;o.draw(a,"gtitle",{propContainer:b,propName:"title",placeholder:b._dfltTitle.plot,attributes:{x:b.width/2,y:b._size.t/2,"text-anchor":"middle"}})},c.doTraceStyle=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b],d=((c[0]||{}).trace||{})._module||{},e=d.arraysToCalcdata;e&&e(c,c[0].trace)}return k.style(a),j.getComponentMethod("legend","draw")(a),k.previousPromises(a)},c.doColorBars=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b][0];if((c.t||{}).cb){var d=c.trace,e=c.t.cb;j.traceIs(d,"contour")&&e.line({width:d.contours.showlines!==!1?d.line.width:0,dash:d.line.dash,color:"line"===d.contours.coloring?e._opts.line.color:d.line.color}),j.traceIs(d,"markerColorscale")?e.options(d.marker.colorbar)():e.options(d.colorbar)()}}return k.previousPromises(a)},c.layoutReplot=function(a){var b=a.layout;return a.layout=void 0,i.plot(a,"",b)},c.doLegend=function(a){return j.getComponentMethod("legend","draw")(a),k.previousPromises(a)},c.doTicksRelayout=function(a){return i.Axes.doTicks(a,"redraw"),c.drawMainTitle(a),k.previousPromises(a)},c.doModeBar=function(a){var b=a._fullLayout;p.manage(a),q(a);for(var c=0;c<b._basePlotModules.length;c++){var d=b._basePlotModules[c].updateFx;d&&d(b)}return k.previousPromises(a)},c.doCamera=function(a){for(var b=a._fullLayout,c=b._subplots.gl3d,d=0;d<c.length;d++){var e=b[c[d]],f=e._scene;f.setCamera(e.camera)}}},{"../components/color":613,"../components/drawing":638,"../components/modebar":675,"../components/titles":704,"../constants/alignment":711,"../lib":738,"../plotly":780,"../plots/cartesian/constants":790,"../plots/cartesian/graph_interact":794,"../plots/plots":846,"../registry":861,d3:123}],778:[function(a,b,c){"use strict";function d(a,b){function c(a){return!(a in b)||f.validate(b[a],j[a])}function d(a,c){return f.coerce(b,r,j,a,c)}function l(){return new Promise(function(a){setTimeout(a,g.getDelay(y._fullLayout))})}function m(){return new Promise(function(a,b){var c=h(y,s,v),d=y._fullLayout.width,g=y._fullLayout.height;if(e.purge(y),document.body.removeChild(y),"svg"===s)return a(x?c:"data:image/svg+xml,"+encodeURIComponent(c));var j=document.createElement("canvas");j.id=f.randstr(),i({format:s,width:d,height:g,scale:v,canvas:j,svg:c,promise:!0}).then(a)["catch"](b)})}function n(a){return x?a.replace(k,""):a}b=b||{};var o,p,q;if(f.isPlainObject(a)?(o=a.data||[],p=a.layout||{},q=a.config||{}):(a=f.getGraphDiv(a),o=f.extendDeep([],a.data),p=f.extendDeep({},a.layout),q=a._context),!c("width")||!c("height"))throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var r={},s=d("format"),t=d("width"),u=d("height"),v=d("scale"),w=d("setBackground"),x=d("imageDataOnly"),y=document.createElement("div");y.style.position="absolute",y.style.left="-5000px",document.body.appendChild(y);var z=f.extendFlat({},p);t&&(z.width=t),u&&(z.height=u);var A=f.extendFlat({},q,{staticPlot:!0,setBackground:w}),B=g.getRedrawFunc(y);return new Promise(function(a,b){e.plot(y,o,z,A).then(B).then(l).then(m).then(function(b){a(n(b))})["catch"](function(a){b(a)})})}var e=a("../plotly"),f=a("../lib"),g=a("../snapshot/helpers"),h=a("../snapshot/tosvg"),i=a("../snapshot/svgtoimg"),j={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},k=/^data:image\/\w+;base64,/;b.exports=d},{"../lib":738,"../plotly":780,"../snapshot/helpers":865,"../snapshot/svgtoimg":867,"../snapshot/tosvg":869}],779:[function(a,b,c){"use strict";function d(a,b,c,e,f,j){j=j||[];for(var k=Object.keys(a),m=0;m<k.length;m++){var n=k[m];if("transforms"!==n){var o=j.slice();o.push(n);var r=a[n],s=b[n],t=i(c,n),u="info_array"===(t||{}).valType,v="colorscale"===(t||{}).valType;if(h(c,n))if(p(r)&&p(s))d(r,s,t,e,f,o);else if(t.items&&!u&&q(r)){var w,x,y=t.items,z=y[Object.keys(y)[0]],A=[];for(w=0;w<s.length;w++){var B=s[w]._index||w;x=o.slice(),x.push(B),p(r[B])&&p(s[w])&&(A.push(B),d(r[B],s[w],z,e,f,x))}for(w=0;w<r.length;w++)x=o.slice(),x.push(w),p(r[w])?-1===A.indexOf(w)&&e.push(g("unused",f,x)):e.push(g("object",f,x,r[w]))}else!p(r)&&p(s)?e.push(g("object",f,o,r)):q(r)||!q(s)||u||v?n in b?l.validate(r,t)?"enumerated"===t.valType&&(t.coerceNumber&&r!==+s||r!==s)&&e.push(g("dynamic",f,o,r,s)):e.push(g("value",f,o,r)):e.push(g("unused",f,o,r)):e.push(g("array",f,o,r));else e.push(g("schema",f,o))}}return e}function e(a,b){for(var c=0;c<b.length;c++){var d=b[c].type,e=a.traces[d].layoutAttributes;e&&l.extendFlat(a.layout.layoutAttributes,e)}return a.layout.layoutAttributes}function f(a){return q(a)?"In data trace "+a[1]+", ":"In "+a+", "}function g(a,b,c,d,e){c=c||"";var f,g;q(b)?(f=b[0],g=b[1]):(f=b,g=null);var h=k(c),i=r[a](b,h,d,e);return l.log(i),{code:a,container:f,trace:g,path:c,astr:h,msg:i}}function h(a,b){var c=j(b),d=c.keyMinusId,e=c.id;return d in a&&a[d]._isSubplotObj&&e?!0:b in a}function i(a,b){var c=j(b);return a[c.keyMinusId]}function j(a){var b=a.match(s);return{keyMinusId:b&&b[1],id:b&&b[2]}}function k(a){if(!q(a))return String(a);for(var b="",c=0;c<a.length;c++){var d=a[c];"number"==typeof d?b=b.substr(0,b.length-1)+"["+d+"]":b+=d,c<a.length-1&&(b+=".")}return b}var l=a("../lib"),m=a("../plots/plots"),n=a("./plot_schema"),o=a("./plot_config"),p=l.isPlainObject,q=Array.isArray;b.exports=function(a,b){var c,f,h=n.get(),i=[],j={_context:l.extendFlat({},o)};q(a)?(j.data=l.extendDeep([],a),c=a):(j.data=[],c=[],i.push(g("array","data"))),p(b)?(j.layout=l.extendDeep({},b),f=b):(j.layout={},f={},arguments.length>1&&i.push(g("object","layout"))),m.supplyDefaults(j);for(var k=j._fullData,r=c.length,s=0;r>s;s++){var t=c[s],u=["data",s];if(p(t)){var v=k[s],w=v.type,x=h.traces[w].attributes;x.type={valType:"enumerated",values:[w]},v.visible===!1&&t.visible!==!1&&i.push(g("invisible",u)),d(t,v,x,i,u);var y=t.transforms,z=v.transforms;if(y){q(y)||i.push(g("array",u,["transforms"])),u.push("transforms");for(var A=0;A<y.length;A++){var B=["transforms",A],C=y[A].type;if(p(y[A])){var D=h.transforms[C]?h.transforms[C].attributes:{};D.type={valType:"enumerated",values:Object.keys(h.transforms)},d(y[A],z[A],D,i,u,B)}else i.push(g("object",u,B))}}}else i.push(g("object",u))}var E=j._fullLayout,F=e(h,k);return d(f,E,F,i,"layout"),0===i.length?void 0:i};var r={object:function(a,b){var c;return c="layout"===a&&""===b?"The layout argument":"data"===a[0]&&""===b?"Trace "+a[1]+" in the data argument":f(a)+"key "+b,c+" must be linked to an object container"},array:function(a,b){var c;return c="data"===a?"The data argument":f(a)+"key "+b,c+" must be linked to an array container"},schema:function(a,b){return f(a)+"key "+b+" is not part of the schema"},unused:function(a,b,c){var d=p(c)?"container":"key";return f(a)+d+" "+b+" did not get coerced"},dynamic:function(a,b,c,d){return[f(a)+"key",b,"(set to '"+c+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(a){return"Trace "+a[1]+" got defaulted to be not visible"},value:function(a,b,c){return[f(a)+"key "+b,"is set to an invalid value ("+c+")"].join(" ")}},s=l.counterRegex("([a-z]+)")},{"../lib":738,"../plots/plots":846,"./plot_config":773,"./plot_schema":774}],780:[function(a,b,c){"use strict";c.defaultConfig=a("./plot_api/plot_config"),c.Plots=a("./plots/plots"),c.Axes=a("./plots/cartesian/axes"),c.ModeBar=a("./components/modebar"),a("./plot_api/plot_api")},{"./components/modebar":675,"./plot_api/plot_api":772,"./plot_api/plot_config":773,"./plots/cartesian/axes":785,"./plots/plots":846}],781:[function(a,b,c){"use strict";b.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],782:[function(a,b,c){"use strict";var d=a("../lib");b.exports=function(a,b,c){var e,f=c.name,g=b[f],h=d.isArray(a[f])?a[f]:[],i=b[f]=[];for(e=0;e<h.length;e++){var j=h[e],k={},l={};d.isPlainObject(j)||(l.itemIsNotPlainObject=!0,j={}),c.handleItemDefaults(j,k,b,c,l),k._input=j,k._index=e,i.push(k)}if(d.isArray(g)){var m=Math.min(g.length,i.length);for(e=0;m>e;e++)d.relinkPrivateKeys(i[e],g[e])}}},{"../lib":738}],783:[function(a,b,c){"use strict";var d=a("../components/fx/attributes");b.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:d.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"}}},{"../components/fx/attributes":647}],784:[function(a,b,c){"use strict";b.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],785:[function(a,b,c){"use strict";function d(a){return+a}function e(a){return String(a)}function f(a,b,c,d,e){function f(b){return(1+100*(b-a)/c.dtick)%100<2}for(var g=0,h=0,i=0,j=0,k=0;k<b.length;k++)b[k]%1===0?i++:x(b[k])||j++,f(b[k])&&g++,f(b[k]+c.dtick/2)&&h++;var l=b.length-j;if(i===l&&"date"!==c.type)c.dtick<1?a=d-.5*c.dtick:(a-=.5,a+c.dtick<d&&(a+=c.dtick));else if(.1*l>h&&(g>.3*l||f(d)||f(e))){var m=c.dtick/2;a+=d>a+m?m:-m}return a}function g(a,b,c,d,e){var f=z.findExactDates(b,e),g=.8;if(f.exactDays>g){var h=Number(c.substr(1));f.exactYears>g&&h%12===0?a=P.tickIncrement(a,"M6","reverse")+1.5*I:f.exactMonths>g?a=P.tickIncrement(a,"M1","reverse")+15.5*I:a-=I/2;var i=P.tickIncrement(a,c);if(d>=i)return i}return a}function h(a){var b,c,d=a.tickvals,e=a.ticktext,f=new Array(d.length),g=z.simpleMap(a.range,a.r2l),h=1.0001*g[0]-1e-4*g[1],i=1.0001*g[1]-1e-4*g[0],j=Math.min(h,i),l=Math.max(h,i),m=0;Array.isArray(e)||(e=[]);var n="category"===a.type?a.d2l_noadd:a.d2l;for("log"===a.type&&"L"!==String(a.dtick).charAt(0)&&(a.dtick="L"+Math.pow(10,Math.floor(Math.min(a.range[0],a.range[1]))-1)),c=0;c<d.length;c++)b=n(d[c]),b>j&&l>b&&(void 0===e[c]?f[m]=P.tickText(a,b):f[m]=k(a,b,String(e[c])),m++);return m<d.length&&f.splice(m,d.length-m),f}function i(a,b,c){return b*z.roundUp(a/b,c)}function j(a){var b=a.dtick;if(a._tickexponent=0,x(b)||"string"==typeof b||(b=1),"category"===a.type&&(a._tickround=null),"date"===a.type){var c=a.r2l(a.tick0),d=a.l2r(c).replace(/(^-|i)/g,""),e=d.length;if("M"===String(b).charAt(0))e>10||"01-01"!==d.substr(5)?a._tickround="d":a._tickround=+b.substr(1)%12===0?"y":"m";else if(b>=I&&10>=e||b>=15*I)a._tickround="d";else if(b>=K&&16>=e||b>=J)a._tickround="M";else if(b>=L&&19>=e||b>=K)a._tickround="S";else{var f=a.l2r(c+b).replace(/^-/,"").length;a._tickround=Math.max(e,f)-20}}else if(x(b)||"L"===b.charAt(0)){var g=a.range.map(a.r2d||Number);x(b)||(b=Number(b.substr(1))),a._tickround=2-Math.floor(Math.log(b)/Math.LN10+.01);var h=Math.max(Math.abs(g[0]),Math.abs(g[1])),i=Math.floor(Math.log(h)/Math.LN10+.01);Math.abs(i)>3&&(p(a.exponentformat)&&!q(i)?a._tickexponent=3*Math.round((i-1)/3):a._tickexponent=i)}else a._tickround=null}function k(a,b,c){var d=a.tickfont||{};return{x:b,dx:0,dy:0,text:c||"",fontSize:d.size,font:d.family,fontColor:d.color}}function l(a,b,c,d){var e=a._tickround,f=c&&a.hoverformat||P.getTickFormat(a);d&&(e=x(e)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[e]);var g,h=z.formatDate(b.x,f,e,a._dateFormat,a.calendar),i=h.indexOf("\n");-1!==i&&(g=h.substr(i+1),h=h.substr(0,i)),d&&("00:00:00"===h||"00:00"===h?(h=g,g=""):8===h.length&&(h=h.replace(/:00$/,""))),g&&(c?"d"===e?h+=", "+g:h=g+(h?", "+h:""):a._inCalcTicks&&g===a._prevDateHead||(h+="<br>"+g,a._prevDateHead=g)),b.text=h}function m(a,b,c,d,e){var f=a.dtick,g=b.x,h=a.tickformat;if("never"===e&&(e=""),!d||"string"==typeof f&&"L"===f.charAt(0)||(f="L3"),h||"string"==typeof f&&"L"===f.charAt(0))b.text=r(Math.pow(10,g),a,e,d);else if(x(f)||"D"===f.charAt(0)&&z.mod(g+.01,1)<.1){var i=Math.round(g);-1!==["e","E","power"].indexOf(a.exponentformat)||p(a.exponentformat)&&q(i)?(0===i?b.text=1:1===i?b.text="10":i>1?b.text="10<sup>"+i+"</sup>":b.text="10<sup>"+M+-i+"</sup>",b.fontSize*=1.25):(b.text=r(Math.pow(10,g),a,"","fakehover"),"D1"===f&&"y"===a._id.charAt(0)&&(b.dy-=b.fontSize/6))}else{if("D"!==f.charAt(0))throw"unrecognized dtick "+String(f);b.text=String(Math.round(Math.pow(10,z.mod(g,1)))),b.fontSize*=.75}if("D1"===a.dtick){var j=String(b.text).charAt(0);("0"===j||"1"===j)&&("y"===a._id.charAt(0)?b.dx-=b.fontSize/4:(b.dy+=b.fontSize/2,b.dx+=(a.range[1]>a.range[0]?1:-1)*b.fontSize*(0>g?.5:.25)))}}function n(a,b){var c=a._categories[Math.round(b.x)];void 0===c&&(c=""),b.text=String(c)}function o(a,b,c,d,e){"never"===e?e="":"all"===a.showexponent&&Math.abs(b.x/a.dtick)<1e-6&&(e="hide"),b.text=r(b.x,a,e,d)}function p(a){return"SI"===a||"B"===a}function q(a){return a>14||-15>a}function r(a,b,c,d){var e=0>a,f=b._tickround,g=c||b.exponentformat||"B",h=b._tickexponent,i=P.getTickFormat(b),k=b.separatethousands;if(d){var l={exponentformat:b.exponentformat,dtick:"none"===b.showexponent?b.dtick:x(a)?Math.abs(a)||1:1,range:"none"===b.showexponent?b.range.map(b.r2d):[0,a||1]};j(l),f=(Number(l._tickround)||0)+4,h=l._tickexponent,b.hoverformat&&(i=b.hoverformat)}if(i)return b._numFormat(i)(a).replace(/-/g,M);var m=Math.pow(10,-f)/2;if("none"===g&&(h=0),a=Math.abs(a),m>a)a="0",e=!1;else{if(a+=m,h&&(a*=Math.pow(10,-h),f+=h),0===f)a=String(Math.floor(a));else if(0>f){a=String(Math.round(a)),a=a.substr(0,a.length+f);for(var n=f;0>n;n++)a+="0"}else{a=String(a);var o=a.indexOf(".")+1;o&&(a=a.substr(0,o+f).replace(/\.?0+$/,""))}a=z.numSeparate(a,b._separators,k)}if(h&&"hide"!==g){p(g)&&q(h)&&(g="power");var r;r=0>h?M+-h:"power"!==g?"+"+h:String(h),"e"===g?a+="e"+r:"E"===g?a+="E"+r:"power"===g?a+="×10<sup>"+r+"</sup>":"B"===g&&9===h?a+="B":p(g)&&(a+=Z[h/3+5])}return e?M+a:a}function s(a,b){var c,d,e=[];for(c=0;c<b.length;c++){var f=[],g=a._fullData[b[c]].xaxis,h=a._fullData[b[c]].yaxis;if(g&&h){for(d=0;d<e.length;d++)(-1!==e[d].x.indexOf(g)||-1!==e[d].y.indexOf(h))&&f.push(d);if(f.length){var i,j=e[f[0]];if(f.length>1)for(d=1;d<f.length;d++)i=e[f[d]],t(j.x,i.x),t(j.y,i.y);t(j.x,[g]),t(j.y,[h])}else e.push({x:[g],y:[h]})}}return e}function t(a,b){for(var c=0;c<b.length;c++)-1===a.indexOf(b[c])&&a.push(b[c])}function u(a,b,c){var d,e,f=[],g=[],h=a.layout;for(d=0;d<b.length;d++)f.push(P.getFromId(a,b[d]));for(d=0;d<c.length;d++)g.push(P.getFromId(a,c[d]));var i=Object.keys(f[0]),j=["anchor","domain","overlaying","position","side","tickangle"],k=["linear","log"];for(d=0;d<i.length;d++){var l=i[d],m=f[0][l],n=g[0][l],o=!0,p=!1,q=!1;if("_"!==l.charAt(0)&&"function"!=typeof m&&-1===j.indexOf(l)){for(e=1;e<f.length&&o;e++){var r=f[e][l];"type"===l&&-1!==k.indexOf(m)&&-1!==k.indexOf(r)&&m!==r?p=!0:r!==m&&(o=!1)}for(e=1;e<g.length&&o;e++){var s=g[e][l];"type"===l&&-1!==k.indexOf(n)&&-1!==k.indexOf(s)&&n!==s?q=!0:g[e][l]!==n&&(o=!1)}o&&(p&&(h[f[0]._name].type="linear"),q&&(h[g[0]._name].type="linear"),v(h,l,f,g,a._fullLayout._dfltTitle))}}for(d=0;d<a._fullLayout.annotations.length;d++){var t=a._fullLayout.annotations[d];-1!==b.indexOf(t.xref)&&-1!==c.indexOf(t.yref)&&z.swapAttrs(h.annotations[d],["?"])}}function v(a,b,c,d,e){var f,g=z.nestedProperty,h=g(a[c[0]._name],b).get(),i=g(a[d[0]._name],b).get();for("title"===b&&(h===e.x&&(h=e.y),i===e.y&&(i=e.x)),f=0;f<c.length;f++)g(a,c[f]._name+"."+b).set(i);for(f=0;f<d.length;f++)g(a,d[f]._name+"."+b).set(h)}var w=a("d3"),x=a("fast-isnumeric"),y=a("../../registry"),z=a("../../lib"),A=a("../../lib/svg_text_utils"),B=a("../../components/titles"),C=a("../../components/color"),D=a("../../components/drawing"),E=a("../../constants/numerical"),F=E.FP_SAFE,G=E.ONEAVGYEAR,H=E.ONEAVGMONTH,I=E.ONEDAY,J=E.ONEHOUR,K=E.ONEMIN,L=E.ONESEC,M=E.MINUS_SIGN,N=E.BADNUM,O=a("../../constants/alignment").MID_SHIFT,P=b.exports={};P.setConvert=a("./set_convert");var Q=a("./axis_autotype"),R=a("./axis_ids");P.id2name=R.id2name,P.cleanId=R.cleanId,P.list=R.list,P.listIds=R.listIds,P.getFromId=R.getFromId,P.getFromTrace=R.getFromTrace,P.coerceRef=function(a,b,c,d,e,f){var g=d.charAt(d.length-1),h=c._fullLayout._subplots[g+"axis"],i=d+"ref",j={};return e||(e=h[0]||f),f||(f=e),j[i]={valType:"enumerated",values:h.concat(f?[f]:[]),dflt:e},z.coerce(a,b,j,i)},P.coercePosition=function(a,b,c,d,e,f){var g,h;if("paper"===d||"pixel"===d)g=z.ensureNumber,h=c(e,f);else{var i=P.getFromId(b,d);f=i.fraction2r(f),h=c(e,f),g=i.cleanPos}a[e]=g(h)},P.cleanPosition=function(a,b,c){var d="paper"===c||"pixel"===c?z.ensureNumber:P.getFromId(b,c).cleanPos;return d(a)};var S=P.getDataConversions=function(a,b,c,f){var g,h="x"===c||"y"===c||"z"===c?c:f;if(Array.isArray(h)){if(g={type:Q(f),_categories:[]},P.setConvert(g),"category"===g.type)for(var i=0;i<f.length;i++)g.d2c(f[i])}else g=P.getFromTrace(a,b,h);return g?{d2c:g.d2c,c2d:g.c2d}:"ids"===h?{d2c:e,c2d:e}:{d2c:d,c2d:d}};P.getDataToCoordFunc=function(a,b,c,d){return S(a,b,c,d).d2c},P.counterLetter=function(a){var b=a.charAt(0);return"x"===b?"y":"y"===b?"x":void 0},P.minDtick=function(a,b,c,d){-1===["log","category"].indexOf(a.type)&&d?void 0===a._minDtick?(a._minDtick=b,a._forceTick0=c):a._minDtick&&((a._minDtick/b+1e-6)%1<2e-6&&((c-a._forceTick0)/b%1+1.000001)%1<2e-6?(a._minDtick=b,a._forceTick0=c):((b/a._minDtick+1e-6)%1>2e-6||((c-a._forceTick0)/a._minDtick%1+1.000001)%1>2e-6)&&(a._minDtick=0)):a._minDtick=0},P.getAutoRange=function(a){var b,c=[],d=a._min[0].val,e=a._max[0].val;for(b=1;b<a._min.length&&d===e;b++)d=Math.min(d,a._min[b].val);for(b=1;b<a._max.length&&d===e;b++)e=Math.max(e,a._max[b].val);var f,g,h,i,j,k,l,m=0,n=!1;if(a.range){var o=z.simpleMap(a.range,a.r2l);n=o[1]<o[0]}for("reversed"===a.autorange&&(n=!0,a.autorange=!0),b=0;b<a._min.length;b++)for(g=a._min[b],f=0;f<a._max.length;f++)h=a._max[f],l=h.val-g.val,k=a._length-g.pad-h.pad,l>0&&k>0&&l/k>m&&(i=g,j=h,m=l/k);if(d===e){var p=d-1,q=d+1;c="tozero"===a.rangemode?0>d?[p,0]:[0,q]:"nonnegative"===a.rangemode?[Math.max(0,p),Math.max(0,q)]:[p,q]}else m&&(("linear"===a.type||"-"===a.type)&&("tozero"===a.rangemode?(i.val>=0&&(i={val:0,pad:0}),j.val<=0&&(j={val:0,pad:0})):"nonnegative"===a.rangemode&&(i.val-m*i.pad<0&&(i={val:0,pad:0}),j.val<0&&(j={val:1,pad:0})),m=(j.val-i.val)/(a._length-i.pad-j.pad)),c=[i.val-m*i.pad,j.val+m*j.pad]);return c[0]===c[1]&&("tozero"===a.rangemode?c=c[0]<0?[c[0],0]:c[0]>0?[0,c[0]]:[0,1]:(c=[c[0]-1,c[0]+1],"nonnegative"===a.rangemode&&(c[0]=Math.max(0,c[0])))),n&&c.reverse(),z.simpleMap(c,a.l2r||Number)},P.doAutoRange=function(a){a._length||a.setScale();var b=a._min&&a._max&&a._min.length&&a._max.length;if(a.autorange&&b){a.range=P.getAutoRange(a),a._r=a.range.slice(),a._rl=z.simpleMap(a._r,a.r2l);var c=a._input;c.range=a.range.slice(),c.autorange=a.autorange}},P.saveRangeInitial=function(a,b){for(var c=P.list(a,"",!0),d=!1,e=0;e<c.length;e++){var f=c[e],g=void 0===f._rangeInitial,h=g||!(f.range[0]===f._rangeInitial[0]&&f.range[1]===f._rangeInitial[1]);(g&&f.autorange===!1||b&&h)&&(f._rangeInitial=f.range.slice(),d=!0)}return d},P.saveShowSpikeInitial=function(a,b){for(var c=P.list(a,"",!0),d=!1,e="on",f=0;f<c.length;f++){var g=c[f],h=void 0===g._showSpikeInitial,i=h||!(g.showspikes===g._showspikes);(h||b&&i)&&(g._showSpikeInitial=g.showspikes,d=!0),"on"!==e||g.showspikes||(e="off")}return a._fullLayout._cartesianSpikesEnabled=e,d},P.expand=function(a,b,c){function d(a){if(Array.isArray(a))return function(b){return Math.max(Number(a[b]||0),0)};var b=Math.max(Number(a||0),0);return function(){return b}}function e(c){function d(a){return x(a)&&Math.abs(a)<F}if(j=b[c],x(j)){if(m=u(c)+s,n=v(c)+s,p=j-y(c),q=j+w(c),"log"===a.type&&q/10>p&&(p=q/10),k=a.c2l(p),l=a.c2l(q),t&&(k=Math.min(0,k),l=Math.max(0,l)),d(k)){for(o=!0,h=0;h<a._min.length&&o;h++)i=a._min[h],i.val<=k&&i.pad>=n?o=!1:i.val>=k&&i.pad<=n&&(a._min.splice(h,1),h--);o&&a._min.push({val:k,pad:t&&0===k?0:n})}if(d(l)){for(o=!0,h=0;h<a._max.length&&o;h++)i=a._max[h],i.val>=l&&i.pad>=m?o=!1:i.val<=l&&i.pad<=m&&(a._max.splice(h,1),h--);o&&a._max.push({val:l,pad:t&&0===l?0:m})}}}var f=a.autorange||!!z.nestedProperty(a,"rangeslider.autorange").get();if(f&&b){a._min||(a._min=[]),a._max||(a._max=[]),c||(c={}),a._m||a.setScale();var g,h,i,j,k,l,m,n,o,p,q,r=b.length,s=c.padded?.05*a._length:0,t=c.tozero&&("linear"===a.type||"-"===a.type);s&&"domain"===a.constrain&&a._inputDomain&&(s*=(a._inputDomain[1]-a._inputDomain[0])/(a.domain[1]-a.domain[0]));var u=d((a._m>0?c.ppadplus:c.ppadminus)||c.ppad||0),v=d((a._m>0?c.ppadminus:c.ppadplus)||c.ppad||0),w=d(c.vpadplus||c.vpad),y=d(c.vpadminus||c.vpad);for(g=0;6>g;g++)e(g);for(g=r-1;g>5;g--)e(g)}},P.autoBin=function(a,b,c,d,e){var h=z.aggNums(Math.min,null,a),i=z.aggNums(Math.max,null,a);if(e||(e=b.calendar),"category"===b.type)return{start:h-.5,end:i+.5,size:1,_count:i-h+1};var j;if(c)j=(i-h)/c;else{var k=z.distinctVals(a),l=Math.pow(10,Math.floor(Math.log(k.minDiff)/Math.LN10)),m=l*z.roundUp(k.minDiff/l,[.9,1.9,4.9,9.9],!0);j=Math.max(m,2*z.stdev(a)/Math.pow(a.length,d?.25:.4)),x(j)||(j=1)}var n;n="log"===b.type?{type:"linear",range:[h,i]}:{type:b.type,range:z.simpleMap([h,i],b.c2r,0,e),calendar:e},P.setConvert(n),P.autoTicks(n,j);var o,p,q=P.tickIncrement(P.tickFirst(n),n.dtick,"reverse",e);if("number"==typeof n.dtick)q=f(q,a,n,h,i),p=1+Math.floor((i-q)/n.dtick),o=q+p*n.dtick;else for("M"===n.dtick.charAt(0)&&(q=g(q,a,n.dtick,h,e)),o=q,p=0;i>=o;)o=P.tickIncrement(o,n.dtick,!1,e),p++;return{start:b.c2r(q,0,e),end:b.c2r(o,0,e),size:n.dtick,_count:p}},P.calcTicks=function(a){
var b=z.simpleMap(a.range,a.r2l);if("auto"===a.tickmode||!a.dtick){var c,d=a.nticks;d||("category"===a.type?(c=a.tickfont?1.2*(a.tickfont.size||12):15,d=a._length/c):(c="y"===a._id.charAt(0)?40:80,d=z.constrain(a._length/c,4,9)+1)),"array"===a.tickmode&&(d*=100),P.autoTicks(a,Math.abs(b[1]-b[0])/d),a._minDtick>0&&a.dtick<2*a._minDtick&&(a.dtick=a._minDtick,a.tick0=a.l2r(a._forceTick0))}if(a.tick0||(a.tick0="date"===a.type?"2000-01-01":0),j(a),"array"===a.tickmode)return h(a);a._tmin=P.tickFirst(a);var e=b[1]<b[0],f=[],g=1.0001*b[1]-1e-4*b[0];"category"===a.type&&(g=e?Math.max(-.5,g):Math.min(a._categories.length-.5,g));for(var i=null,k=Math.max(1e3,a._length||0),l=a._tmin;(e?l>=g:g>=l)&&!(f.length>k||l===i);l=P.tickIncrement(l,a.dtick,e,a.calendar))i=l,f.push(l);a._tmax=f[f.length-1],a._prevDateHead="",a._inCalcTicks=!0;for(var m=new Array(f.length),n=0;n<f.length;n++)m[n]=P.tickText(a,f[n]);return a._inCalcTicks=!1,m};var T=[2,5,10],U=[1,2,3,6,12],V=[1,2,5,10,15,30],W=[1,2,3,7,14],X=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Y=[-.301,0,.301,.699,1];P.autoTicks=function(a,b){var c;if("date"===a.type){a.tick0=z.dateTick0(a.calendar);var d=2*b;d>G?(b/=G,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick="M"+12*i(b,c,T)):d>H?(b/=H,a.dtick="M"+i(b,1,U)):d>I?(a.dtick=i(b,I,W),a.tick0=z.dateTick0(a.calendar,!0)):d>J?a.dtick=i(b,J,U):d>K?a.dtick=i(b,K,V):d>L?a.dtick=i(b,L,V):(c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick=i(b,c,T))}else if("log"===a.type){a.tick0=0;var e=z.simpleMap(a.range,a.r2l);if(b>.7)a.dtick=Math.ceil(b);else if(Math.abs(e[1]-e[0])<1){var f=1.5*Math.abs((e[1]-e[0])/b);b=Math.abs(Math.pow(10,e[1])-Math.pow(10,e[0]))/f,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick="L"+i(b,c,T)}else a.dtick=b>.3?"D2":"D1"}else"category"===a.type?(a.tick0=0,a.dtick=Math.ceil(Math.max(b,1))):(a.tick0=0,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick=i(b,c,T));if(0===a.dtick&&(a.dtick=1),!x(a.dtick)&&"string"!=typeof a.dtick){var g=a.dtick;throw a.dtick=1,"ax.dtick error: "+String(g)}},P.tickIncrement=function(a,b,c,d){var e=c?-1:1;if(x(b))return a+e*b;var f=b.charAt(0),g=e*Number(b.substr(1));if("M"===f)return z.incrementMonth(a,g,d);if("L"===f)return Math.log(Math.pow(10,a)+g)/Math.LN10;if("D"===f){var h="D2"===b?Y:X,i=a+.01*e,j=z.roundUp(z.mod(i,1),h,c);return Math.floor(i)+Math.log(w.round(Math.pow(10,j),1))/Math.LN10}throw"unrecognized dtick "+String(b)},P.tickFirst=function(a){var b=a.r2l||Number,c=z.simpleMap(a.range,b),d=c[1]<c[0],e=d?Math.floor:Math.ceil,f=1.0001*c[0]-1e-4*c[1],g=a.dtick,h=b(a.tick0);if(x(g)){var i=e((f-h)/g)*g+h;return"category"===a.type&&(i=z.constrain(i,0,a._categories.length-1)),i}var j=g.charAt(0),k=Number(g.substr(1));if("M"===j){for(var l,m,n,o=0,p=h;10>o;){if(l=P.tickIncrement(p,g,d,a.calendar),0>=(l-f)*(p-f))return d?Math.min(p,l):Math.max(p,l);m=(f-(p+l)/2)/(l-p),n=j+(Math.abs(Math.round(m))||1)*k,p=P.tickIncrement(p,n,0>m?!d:d,a.calendar),o++}return z.error("tickFirst did not converge",a),p}if("L"===j)return Math.log(e((Math.pow(10,f)-h)/k)*k+h)/Math.LN10;if("D"===j){var q="D2"===g?Y:X,r=z.roundUp(z.mod(f,1),q,d);return Math.floor(f)+Math.log(w.round(Math.pow(10,r),1))/Math.LN10}throw"unrecognized dtick "+String(g)},P.tickText=function(a,b,c){function d(d){var e;return void 0===d?!0:c?"none"===d:(e={first:a._tmin,last:a._tmax}[d],"all"!==d&&b!==e)}var e,f,g=k(a,b),h="array"===a.tickmode,i=c||h,j="category"===a.type?a.d2l_noadd:a.d2l;if(h&&Array.isArray(a.ticktext)){var p=z.simpleMap(a.range,a.r2l),q=Math.abs(p[1]-p[0])/1e4;for(f=0;f<a.ticktext.length&&!(Math.abs(b-j(a.tickvals[f]))<q);f++);if(f<a.ticktext.length)return g.text=String(a.ticktext[f]),g}return e=c?"never":"none"!==a.exponentformat&&d(a.showexponent)?"hide":"","date"===a.type?l(a,g,c,i):"log"===a.type?m(a,g,c,i,e):"category"===a.type?n(a,g):o(a,g,c,i,e),a.tickprefix&&!d(a.showtickprefix)&&(g.text=a.tickprefix+g.text),a.ticksuffix&&!d(a.showticksuffix)&&(g.text+=a.ticksuffix),g},P.hoverLabelText=function(a,b,c){if(c!==N&&c!==b)return P.hoverLabelText(a,b)+" - "+P.hoverLabelText(a,c);var d="log"===a.type&&0>=b,e=P.tickText(a,a.c2l(d?-b:b),"hover").text;return d?0===b?"0":M+e:e};var Z=["f","p","n","μ","m","","k","M","G","T"];P.getTickFormat=function(a){function b(a){return"string"!=typeof a?a:Number(a.replace("M",""))*H}function c(a,b){var c=["L","D"];if(typeof a==typeof b){if("number"==typeof a)return a-b;var d=c.indexOf(a.charAt(0)),e=c.indexOf(b.charAt(0));return d===e?Number(a.replace(/(L|D)/g,""))-Number(b.replace(/(L|D)/g,"")):d-e}return"number"==typeof a?1:-1}function d(a,b,c){var d=c||function(a){return a},e=b[0],f=b[1];return(!e&&"number"!=typeof e||d(e)<=d(a))&&(!f&&"number"!=typeof f||d(f)>=d(a))}function e(a,b){var d=null===b[0],e=null===b[1],f=c(a,b[0])>=0,g=c(a,b[1])<=0;return(d||f)&&(e||g)}var f,g;if(a.tickformatstops&&a.tickformatstops.length>0)switch(a.type){case"date":case"linear":for(f=0;f<a.tickformatstops.length;f++)if(d(a.dtick,a.tickformatstops[f].dtickrange,b)){g=a.tickformatstops[f];break}break;case"log":for(f=0;f<a.tickformatstops.length;f++)if(e(a.dtick,a.tickformatstops[f].dtickrange)){g=a.tickformatstops[f];break}}return g?g.value:a.tickformat},P.getSubplots=function(a,b){var c=a._fullLayout._subplots,d=c.cartesian.concat(c.gl2d||[]),e=b?P.findSubplotsWithAxis(d,b):d;return e.sort(function(a,b){var c=a.substr(1).split("y"),d=b.substr(1).split("y");return c[0]===d[0]?+c[1]-+d[1]:+c[0]-+d[0]}),e},P.findSubplotsWithAxis=function(a,b){for(var c=new RegExp("x"===b._id.charAt(0)?"^"+b._id+"y":b._id+"$"),d=[],e=0;e<a.length;e++){var f=a[e];c.test(f)&&d.push(f)}return d},P.makeClipPaths=function(a){var b,c,d=a._fullLayout,e={_offset:0,_length:d.width,_id:""},f={_offset:0,_length:d.height,_id:""},g=P.list(a,"x",!0),h=P.list(a,"y",!0),i=[];for(b=0;b<g.length;b++)for(i.push({x:g[b],y:f}),c=0;c<h.length;c++)0===b&&i.push({x:e,y:h[c]}),i.push({x:g[b],y:h[c]});var j=d._clips.selectAll(".axesclip").data(i,function(a){return a.x._id+a.y._id});j.enter().append("clipPath").classed("axesclip",!0).attr("id",function(a){return"clip"+d._uid+a.x._id+a.y._id}).append("rect"),j.exit().remove(),j.each(function(a){w.select(this).select("rect").attr({x:a.x._offset||0,y:a.y._offset||0,width:a.x._length||1,height:a.y._length||1})})},P.doTicks=function(a,b,c){function d(a){var b=j.l2p(a.x);return b>1&&b<j._length-1}function e(a,b){var c=a.selectAll("path."+v).data("inside"===j.ticks?S:t,u);b&&j.ticks?(c.enter().append("path").classed(v,1).classed("ticks",1).classed("crisp",1).call(C.stroke,j.tickcolor).style("stroke-width",L+"px").attr("d",b),c.attr("transform",n),c.exit().remove()):c.remove()}function f(c,d){function e(a,b){a.each(function(a){var c=s(b),d=w.select(this),e=d.select(".text-math-group"),f=n(a)+(x(b)&&0!==+b?" rotate("+b+","+m(a)+","+(o(a)-a.fontSize/2)+")":"");if(e.empty())d.select("text").attr({transform:f,"text-anchor":c});else{var g=D.bBox(e.node()).width*{end:-.5,start:.5}[c];e.attr("transform",f+(g?"translate("+g+",0)":""))}})}function f(){return F.length&&Promise.all(F)}function h(){if(e(l,j.tickangle),"x"===r&&!x(j.tickangle)&&("log"!==j.type||"D"!==String(j.dtick).charAt(0))){var a=[];for(l.each(function(b){var c=w.select(this),d=c.select(".text-math-group"),e=j.l2p(b.x);d.empty()&&(d=c.select("text"));var f=D.bBox(d.node());a.push({top:0,bottom:10,height:10,left:e-f.width/2,right:e+f.width/2+2,width:f.width+2})}),q=0;q<a.length-1;q++)if(z.bBoxIntersect(a[q],a[q+1])){E=30;break}if(E){var c=Math.abs((t[t.length-1].x-t[0].x)*j._m)/(t.length-1);2.5*C>c&&(E=90),e(l,E)}j._lastangle=E}return g(),b+" done"}function i(){function b(a,b){a[0]=Math.min(a[0],b[0]),a[1]=Math.max(a[1],b[1])}if(j.showticklabels){var d=a.getBoundingClientRect(),e=c.node().getBoundingClientRect();j._boundingBox={width:e.width,height:e.height,left:e.left-d.left,right:e.right-d.left,top:e.top-d.top,bottom:e.bottom-d.top}}else{var f,g=k._size;"x"===r?(f="free"===j.anchor?g.t+g.h*(1-j.position):g.t+g.h*(1-j._anchorAxis.domain[{bottom:0,top:1}[j.side]]),j._boundingBox={top:f,bottom:f,left:j._offset,rigth:j._offset+j._length,width:j._length,height:0}):(f="free"===j.anchor?g.l+g.w*j.position:g.l+g.w*j._anchorAxis.domain[{left:0,right:1}[j.side]],j._boundingBox={left:f,right:f,bottom:j._offset+j._length,top:j._offset,height:j._length,width:0})}if(p){var h=j._counterSpan=[1/0,-(1/0)];for(q=0;q<p.length;q++){var i=k._plots[p[q]],l=i["x"===r?"yaxis":"xaxis"];b(h,[l._offset,l._offset+l._length])}"free"===j.anchor&&b(h,"x"===r?[j._boundingBox.bottom,j._boundingBox.top]:[j._boundingBox.right,j._boundingBox.left])}}var l=c.selectAll("g."+v).data(t,u);if(!x(d))return l.remove(),void g();if(!j.showticklabels)return l.remove(),g(),void i();var m,o,s,y,B;"x"===r?(B="bottom"===N?1:-1,m=function(a){return a.dx+I*B},y=d+(H+G)*B,o=function(a){return a.dy+y+a.fontSize*("bottom"===N?1:-.2)},s=function(a){return x(a)&&0!==a&&180!==a?0>a*B?"end":"start":"middle"}):(B="right"===N?1:-1,o=function(a){return a.dy+a.fontSize*O-I*B},m=function(a){return a.dx+d+(H+G+(90===Math.abs(j.tickangle)?a.fontSize/2:0))*B},s=function(a){return x(a)&&90===Math.abs(a)?"middle":"right"===N?"start":"end"});var C=0,E=0,F=[];l.enter().append("g").classed(v,1).append("text").attr("text-anchor","middle").each(function(b){var c=w.select(this),d=a._promises.length;c.call(A.positionText,m(b),o(b)).call(D.font,b.font,b.fontSize,b.fontColor).text(b.text).call(A.convertToTspans,a),d=a._promises[d],d?F.push(a._promises.pop().then(function(){e(c,j.tickangle)})):e(c,j.tickangle)}),l.exit().remove(),l.each(function(a){C=Math.max(C,a.fontSize)}),e(l,j._lastangle||j.tickangle);var J=z.syncOrAsync([f,h,i]);return J&&J.then&&a._promises.push(J),J}function g(){if(!c){var d,e,f,g,h=R.getFromId(a,b),i=w.select(a).selectAll("g."+b+"tick"),j={selection:i,side:h.side},l=b.charAt(0),m=a._fullLayout._size,n=1.5,o=h.titlefont.size;if(i.size()){var p=D.getTranslate(i.node().parentNode);j.offsetLeft=p.x,j.offsetTop=p.y}var q=10+o*n+(h.linewidth?h.linewidth-1:0);"x"===l?(e="free"===h.anchor?{_offset:m.t+(1-(h.position||0))*m.h,_length:0}:R.getFromId(a,h.anchor),f=h._offset+h._length/2,g="top"===h.side?-q-o*(h.showticklabels?1:0):e._length+q+o*(h.showticklabels?1.5:.5),g+=e._offset,h.rangeslider&&h.rangeslider.visible&&h._boundingBox&&(g+=(k.height-k.margin.b-k.margin.t)*h.rangeslider.thickness+h._boundingBox.height),j.side||(j.side="bottom")):(e="free"===h.anchor?{_offset:m.l+(h.position||0)*m.w,_length:0}:R.getFromId(a,h.anchor),g=h._offset+h._length/2,f="right"===h.side?e._length+q+o*(h.showticklabels?1:.5):-q-o*(h.showticklabels?.5:0),f+=e._offset,d={rotate:"-90",offset:0},j.side||(j.side="left")),B.draw(a,b+"title",{propContainer:h,propName:h._name+".title",placeholder:k._dfltTitle[l],avoid:j,transform:d,attributes:{x:f,y:g,"text-anchor":"middle"}})}}function h(a,b){return a.visible!==!0||a.xaxis+a.yaxis!==b?!1:y.traceIs(a,"bar")&&a.orientation==={x:"h",y:"v"}[r]?!0:a.fill&&a.fill.charAt(a.fill.length-1)===r}function i(c,e,f){var g=c.gridlayer.selectAll("."+b),i=c.zerolinelayer,k=c["hidegrid"+r]?[]:S,l=j._gridpath||("x"===r?"M0,"+e._offset+"v":"M"+e._offset+",0h")+e._length,m=g.selectAll("path."+E).data(j.showgrid===!1?[]:k,u);if(m.enter().append("path").classed(E,1).classed("crisp",1).attr("d",l).each(function(a){j.zeroline&&("linear"===j.type||"-"===j.type)&&Math.abs(a.x)<j.dtick/100&&w.select(this).remove()}),m.attr("transform",n).call(C.stroke,j.gridcolor||"#ddd").style("stroke-width",J+"px"),m.exit().remove(),i){for(var o=!1,p=0;p<a._fullData.length;p++)if(h(a._fullData[p],f)){o=!0;break}var q=z.simpleMap(j.range,j.r2l),s=q[0]*q[1]<=0&&j.zeroline&&("linear"===j.type||"-"===j.type)&&k.length&&(o||d({x:0})||!j.showline),t=i.selectAll("path."+F).data(s?[{x:0,id:b}]:[]);t.enter().append("path").classed(F,1).classed("zl",1).classed("crisp",1).attr("d",l).each(function(){i.selectAll("path").sort(function(a,b){return R.idSort(a.id,b.id)})}),t.attr("transform",n).call(C.stroke,j.zerolinecolor||C.defaultLine).style("stroke-width",K+"px"),t.exit().remove()}}var j,k=a._fullLayout,l=!1;if("object"==typeof b)j=b,b=j._id,l=!0;else if(j=P.getFromId(a,b),"redraw"===b&&k._paper.selectAll("g.subplot").each(function(a){var b=k._plots[a],c=b.xaxis,d=b.yaxis;b.xaxislayer.selectAll("."+c._id+"tick").remove(),b.yaxislayer.selectAll("."+d._id+"tick").remove(),b.gridlayer.selectAll("path").remove(),b.zerolinelayer.selectAll("path").remove(),k._infolayer.select(".g-"+c._id+"title").remove(),k._infolayer.select(".g-"+d._id+"title").remove()}),!b||"redraw"===b)return z.syncOrAsync(P.list(a,"",!0).map(function(c){return function(){if(c._id){var d=P.doTicks(a,c._id);return"redraw"===b&&(c._r=c.range.slice(),c._rl=z.simpleMap(c._r,c.r2l)),d}}}));j.tickformat||(-1===["none","e","E","power","SI","B"].indexOf(j.exponentformat)&&(j.exponentformat="e"),-1===["all","first","last","none"].indexOf(j.showexponent)&&(j.showexponent="all")),j.setScale();var m,n,o,p,q,r=b.charAt(0),s=P.counterLetter(b),t=P.calcTicks(j),u=function(a){return[a.text,a.x,j.mirror].join("_")},v=b+"tick",E=b+"grid",F=b+"zl",G=(j.linewidth||1)/2,H="outside"===j.ticks?j.ticklen:0,I=0,J=D.crispRound(a,j.gridwidth,1),K=D.crispRound(a,j.zerolinewidth,J),L=D.crispRound(a,j.tickwidth,1);if(j._counterangle&&"outside"===j.ticks){var M=j._counterangle*Math.PI/180;H=j.ticklen*Math.cos(M)+1,I=j.ticklen*Math.sin(M)}if(j.showticklabels&&("outside"===j.ticks||j.showline)&&(H+=.2*j.tickfont.size),"x"===r)m=["bottom","top"],n=function(a){return"translate("+(j._offset+j.l2p(a.x))+",0)"},o=function(a,b){if(j._counterangle){var c=j._counterangle*Math.PI/180;return"M0,"+a+"l"+Math.sin(c)*b+","+Math.cos(c)*b}return"M0,"+a+"v"+b};else{if("y"!==r)return void z.warn("Unrecognized doTicks axis:",b);m=["left","right"],n=function(a){return"translate(0,"+(j._offset+j.l2p(a.x))+")"},o=function(a,b){if(j._counterangle){var c=j._counterangle*Math.PI/180;return"M"+a+",0l"+Math.cos(c)*b+","+-Math.sin(c)*b}return"M"+a+",0h"+b}}var N=j.side||m[0],Q=[-1,1,N===m[1]?1:-1];if("inside"!==j.ticks==("x"===r)&&(Q=Q.map(function(a){return-a})),j.visible){var S=t.filter(d);if(l){if(e(j._axislayer,o(j._pos+G*Q[2],Q[2]*j.ticklen)),j._counteraxis){var T={gridlayer:j._gridlayer,zerolinelayer:j._zerolinelayer};i(T,j._counteraxis)}return f(j._axislayer,j._pos)}if(k._has("cartesian")){p=P.getSubplots(a,j);var U={};p.map(function(a){var b=k._plots[a],c=b[s+"axis"],d=c._mainAxis._id;U[d]||(U[d]=1,i(b,c,a))});var V=j._mainSubplot,W=k._plots[V],X=[];if(j.ticks){var Y=Q[2],Z=o(j._mainLinePosition+G*Y,Y*j.ticklen);j._anchorAxis&&j.mirror&&j.mirror!==!0&&(Z+=o(j._mainMirrorPosition-G*Y,-Y*j.ticklen)),e(W[r+"axislayer"],Z),X=Object.keys(j._linepositions)}X.map(function(a){function b(a){var b=Q[a];return o(f[a]+G*b,b*j.ticklen)}var c=k._plots[a],d=c[r+"axislayer"],f=j._linepositions[a]||[];e(d,b(0)+b(1))});var $=W[r+"axislayer"];return f($,j._mainLinePosition)}}},P.swap=function(a,b){for(var c=s(a,b),d=0;d<c.length;d++)u(a,c[d].x,c[d].y)}},{"../../components/color":613,"../../components/drawing":638,"../../components/titles":704,"../../constants/alignment":711,"../../constants/numerical":717,"../../lib":738,"../../lib/svg_text_utils":761,"../../registry":861,"./axis_autotype":786,"./axis_ids":788,"./set_convert":803,d3:123,"fast-isnumeric":132}],786:[function(a,b,c){"use strict";function d(a){if(!a)return!1;for(var b=0;b<a.length;b++)if(g(a[b]))return!0;return!1}function e(a,b){for(var c,d=0,e=0,f=Math.max(1,(a.length-1)/1e3),i=0;i<a.length;i+=f)c=a[Math.round(i)],h.isDateTime(c,b)&&(d+=1),g(c)&&(e+=1);return d>2*e}function f(a){for(var b,c=Math.max(1,(a.length-1)/1e3),d=0,e=0,f=0;f<a.length;f+=c)b=a[Math.round(f)],h.cleanNumber(b)!==i?d++:"string"==typeof b&&""!==b&&"None"!==b&&e++;return e>2*d}var g=a("fast-isnumeric"),h=a("../../lib"),i=a("../../constants/numerical").BADNUM;b.exports=function(a,b){return e(a,b)?"date":f(a)?"category":d(a)?"linear":"-"}},{"../../constants/numerical":717,"../../lib":738,"fast-isnumeric":132}],787:[function(a,b,c){"use strict";var d=a("tinycolor2").mix,e=a("../../registry"),f=a("../../lib"),g=a("../../components/color/attributes").lightFraction,h=a("./layout_attributes"),i=a("./tick_value_defaults"),j=a("./tick_mark_defaults"),k=a("./tick_label_defaults"),l=a("./category_order_defaults"),m=a("./set_convert"),n=a("./ordered_categories");b.exports=function(a,b,c,o,p){function q(c,d){return f.coerce2(a,b,h,c,d)}var r=o.letter,s=o.font||{},t=c("visible",!o.cheateronly),u=b.type;if("date"===u){var v=e.getComponentMethod("calendars","handleDefaults");v(a,b,"calendar",o.calendar)}m(b,p);var w=c("autorange",!b.isValidRange(a.range));if(w&&c("rangemode"),c("range"),b.cleanRange(),l(a,b,c),b._initialCategories="category"===u?n(r,b.categoryorder,b.categoryarray,o.data):[],!t)return b;var x=c("color"),y=x===a.color?x:s.color;c("title",p._dfltTitle[r]),f.coerceFont(c,"titlefont",{family:s.family,size:Math.round(1.2*s.size),color:y}),i(a,b,c,u),k(a,b,c,u,o),j(a,b,c,o);var z=q("linecolor",x),A=q("linewidth"),B=c("showline",!!z||!!A);B||(delete b.linecolor,delete b.linewidth),(B||b.ticks)&&c("mirror");var C=q("gridcolor",d(x,o.bgColor,g).toRgbString()),D=q("gridwidth"),E=c("showgrid",o.showGrid||!!C||!!D);E||(delete b.gridcolor,delete b.gridwidth);var F=q("zerolinecolor",x),G=q("zerolinewidth"),H=c("zeroline",o.showGrid||!!F||!!G);return H||(delete b.zerolinecolor,delete b.zerolinewidth),b}},{"../../components/color/attributes":612,"../../lib":738,"../../registry":861,"./category_order_defaults":789,"./layout_attributes":797,"./ordered_categories":799,"./set_convert":803,"./tick_label_defaults":804,"./tick_mark_defaults":805,"./tick_value_defaults":806,tinycolor2:543}],788:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("./constants");c.id2name=function(a){if("string"==typeof a&&a.match(e.AX_ID_PATTERN)){var b=a.substr(1);return"1"===b&&(b=""),a.charAt(0)+"axis"+b}},c.name2id=function(a){if(a.match(e.AX_NAME_PATTERN)){var b=a.substr(5);return"1"===b&&(b=""),a.charAt(0)+b}},c.cleanId=function(a,b){if(a.match(e.AX_ID_PATTERN)&&(!b||a.charAt(0)===b)){var c=a.substr(1).replace(/^0+/,"");return"1"===c&&(c=""),a.charAt(0)+c}},c.list=function(a,b,d){var e=a._fullLayout;if(!e)return[];var f,g=c.listIds(a,b),h=new Array(g.length);for(f=0;f<g.length;f++){var i=g[f];h[f]=e[i.charAt(0)+"axis"+i.substr(1)]}if(!d){var j=e._subplots.gl3d||[];for(f=0;f<j.length;f++){var k=e[j[f]];b?h.push(k[b+"axis"]):h.push(k.xaxis,k.yaxis,k.zaxis)}}return h},c.listIds=function(a,b){var c=a._fullLayout;if(!c)return[];var d=c._subplots;return b?d[b+"axis"]:d.xaxis.concat(d.yaxis)},c.getFromId=function(a,b,d){var e=a._fullLayout;return"x"===d?b=b.replace(/y[0-9]*/,""):"y"===d&&(b=b.replace(/x[0-9]*/,"")),e[c.id2name(b)]},c.getFromTrace=function(a,b,e){var f=a._fullLayout,g=null;if(d.traceIs(b,"gl3d")){var h=b.scene;"scene"===h.substr(0,5)&&(g=f[h][e+"axis"])}else g=c.getFromId(a,b[e+"axis"]||e);return g},c.idSort=function(a,b){var c=a.charAt(0),d=b.charAt(0);return c!==d?c>d?1:-1:+(a.substr(1)||1)-+(b.substr(1)||1)}},{"../../registry":861,"./constants":790}],789:[function(a,b,c){"use strict";b.exports=function(a,b,c){if("category"===b.type){var d,e=a.categoryarray,f=Array.isArray(e)&&e.length>0;f&&(d="array");var g=c("categoryorder",d);"array"===g&&c("categoryarray"),f||"array"!==g||(b.categoryorder="trace")}}},{}],790:[function(a,b,c){"use strict";var d=a("../../lib").counterRegex;b.exports={idRegex:{x:d("x"),y:d("y")},attrRegex:d("[xy]axis"),xAxisMatch:d("xaxis"),yAxisMatch:d("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib":738}],791:[function(a,b,c){"use strict";function d(a,b,c,d){var e,f,h,i,j=d[g(b)].type,k=[];for(f=0;f<c.length;f++)h=c[f],h!==b&&(i=d[g(h)],i.type!==j||i.fixedrange||k.push(h));for(e=0;e<a.length;e++)if(a[e][b]){var l=a[e],m=[];for(f=0;f<k.length;f++)h=k[f],l[h]||m.push(h);return{linkableAxes:m,thisGroup:l}}return{linkableAxes:k,thisGroup:null}}function e(a,b,c,d,e){var f,g,h,i,j;null===b?(b={},b[c]=1,j=a.length,a.push(b)):j=a.indexOf(b);var k=Object.keys(b);for(f=0;f<a.length;f++)if(h=a[f],f!==j&&h[d]){var l=h[d];for(g=0;g<k.length;g++)i=k[g],h[i]=l*e*b[i];return void a.splice(j,1)}if(1!==e)for(g=0;g<k.length;g++)b[k[g]]*=e;b[d]=1}var f=a("../../lib"),g=a("./axis_ids").id2name;b.exports=function(a,b,c,g,h){var i=h._axisConstraintGroups,j=b._id,k=j.charAt(0);if(!b.fixedrange&&(c("constrain"),f.coerce(a,b,{constraintoward:{valType:"enumerated",values:"x"===k?["left","center","right"]:["bottom","middle","top"],dflt:"x"===k?"center":"middle"}},"constraintoward"),a.scaleanchor)){var l=d(i,j,g,h),m=f.coerce(a,b,{scaleanchor:{valType:"enumerated",values:l.linkableAxes}},"scaleanchor");if(m){var n=c("scaleratio");n||(n=b.scaleratio=1),e(i,l.thisGroup,j,m,n)}else-1!==g.indexOf(a.scaleanchor)&&f.warn("ignored "+b._name+'.scaleanchor: "'+a.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}}},{"../../lib":738,"./axis_ids":788}],792:[function(a,b,c){"use strict";function d(a,b){var c=a._inputDomain,d=h[a.constraintoward],e=c[0]+(c[1]-c[0])*d;a.domain=a._input.domain=[e+(c[0]-e)/b,e+(c[1]-e)/b]}var e=a("./axis_ids").id2name,f=a("./scale_zoom"),g=a("../../constants/numerical").ALMOST_EQUAL,h=a("../../constants/alignment").FROM_BL;c.enforce=function(a){var b,c,h,i,j,k,l,m=a._fullLayout,n=m._axisConstraintGroups||[];for(b=0;b<n.length;b++){var o=n[b],p=Object.keys(o),q=1/0,r=0,s=1/0,t={},u={},v=!1;for(c=0;c<p.length;c++)h=p[c],u[h]=i=m[e(h)],i._inputDomain?i.domain=i._inputDomain.slice():i._inputDomain=i.domain.slice(),i._inputRange||(i._inputRange=i.range.slice()),i.setScale(),t[h]=j=Math.abs(i._m)/o[h],q=Math.min(q,j),"domain"!==i.constrain&&i._constraintShrinkable||(s=Math.min(s,j)),delete i._constraintShrinkable,r=Math.max(r,j),"domain"===i.constrain&&(v=!0);if(!(q>g*r)||v)for(c=0;c<p.length;c++)if(h=p[c],j=t[h],i=u[h],k=i.constrain,j!==s||"domain"===k)if(l=j/s,"range"===k)f(i,l);else{var w=i._inputDomain,x=(i.domain[1]-i.domain[0])/(w[1]-w[0]),y=(i.r2l(i.range[1])-i.r2l(i.range[0]))/(i.r2l(i._inputRange[1])-i.r2l(i._inputRange[0]));if(l/=x,1>l*y){i.domain=i._input.domain=w.slice(),f(i,l);continue}if(1>y&&(i.range=i._input.range=i._inputRange.slice(),l*=y),i.autorange&&i._min.length&&i._max.length){var z=i.r2l(i.range[0]),A=i.r2l(i.range[1]),B=(z+A)/2,C=B,D=B,E=Math.abs(A-B),F=B-E*l*1.0001,G=B+E*l*1.0001;d(i,l),i.setScale();var H,I,J=Math.abs(i._m);for(I=0;I<i._min.length;I++)H=i._min[I].val-i._min[I].pad/J,H>F&&C>H&&(C=H);for(I=0;I<i._max.length;I++)H=i._max[I].val+i._max[I].pad/J,G>H&&H>D&&(D=H);var K=(D-C)/(2*E);l/=K,C=i.l2r(C),D=i.l2r(D),i.range=i._input.range=A>z?[C,D]:[D,C]}d(i,l)}}},c.clean=function(a,b){if(b._inputDomain){for(var c=!1,d=b._id,e=a._fullLayout._axisConstraintGroups,f=0;f<e.length;f++)if(e[f][d]){c=!0;break}c&&"domain"===b.constrain||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},{"../../constants/alignment":711,"../../constants/numerical":717,"./axis_ids":788,"./scale_zoom":801}],793:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){var h=a.draglayer.selectAll("."+b).data([0]);return h.enter().append("rect").classed("drag",!0).classed(b,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",a.id),h.call(B.setRect,d,e,f,g).call(D,c),h.node()}function e(a,b){for(var c=0;c<a.length;c++)if(!a[c].fixedrange)return b;return""}function f(a,b){var c,d=a.range[b],e=Math.abs(d-a.range[1-b]);return"date"===a.type?d:"log"===a.type?(c=Math.ceil(Math.max(0,-Math.log(e)/Math.LN10))+3,u.format("."+c+"g")(Math.pow(10,d))):(c=Math.floor(Math.log(Math.abs(d))/Math.LN10)-Math.floor(Math.log(e)/Math.LN10)+4,u.format("."+String(c)+"g")(d))}function g(a,b,c,d,e){var f,h,i,j;for(f=0;f<a.length;f++)h=a[f],h.fixedrange||(i=h._rl[0],j=h._rl[1]-i,h.range=[h.l2r(i+j*b),h.l2r(i+j*c)],d[h._name+".range[0]"]=h.range[0],d[h._name+".range[1]"]=h.range[1]);if(e&&e.length){var k=(b+(1-c))/2;g(e,k,1-k,d)}}function h(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.fixedrange||(d.range=[d.l2r(d._rl[0]-b/d._m),d.l2r(d._rl[1]-b/d._m)])}}function i(a){return 1-(a>=0?Math.min(a,.9):1/(1/Math.max(a,-.3)+3.222))}function j(a,b){return a?"nsew"===a?"pan"===b?"move":"crosshair":a.toLowerCase()+"-resize":"pointer"}function k(a,b,c,d,e){return a.append("path").attr("class","zoombox").style({fill:b>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+c+", "+d+")").attr("d",e+"Z")}function l(a,b,c){return a.append("path").attr("class","zoombox-corners").style({fill:A.background,stroke:A.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+b+", "+c+")").attr("d","M0,0Z")}function m(a){a.selectAll(".select-outline").remove()}function n(a,b,c,d,e,f){a.attr("d",d+"M"+c.l+","+c.t+"v"+c.h+"h"+c.w+"v-"+c.h+"h-"+c.w+"Z"),e||(a.transition().style("fill",f>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),b.transition().style("opacity",1).duration(200))}function o(a){u.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function p(a){return"lasso"===a||"select"===a}function q(a,b){return"M"+(a.l-.5)+","+(b-N-.5)+"h-3v"+(2*N+1)+"h3ZM"+(a.r+.5)+","+(b-N-.5)+"h3v"+(2*N+1)+"h-3Z"}function r(a,b){return"M"+(b-N-.5)+","+(a.t-.5)+"v-3h"+(2*N+1)+"v3ZM"+(b-N-.5)+","+(a.b+.5)+"v3h"+(2*N+1)+"v-3Z"}function s(a){var b=Math.floor(Math.min(a.b-a.t,a.r-a.l,N)/2);return"M"+(a.l-3.5)+","+(a.t-.5+b)+"h3v"+-b+"h"+b+"v-3h-"+(b+3)+"ZM"+(a.r+3.5)+","+(a.t-.5+b)+"h-3v"+-b+"h"+-b+"v-3h"+(b+3)+"ZM"+(a.r+3.5)+","+(a.b+.5-b)+"h-3v"+b+"h"+-b+"v3h"+(b+3)+"ZM"+(a.l-3.5)+","+(a.b+.5-b)+"h3v"+b+"h"+b+"v3h-"+(b+3)+"Z"}function t(a,b,c){var d,e,f,g,h,i,j=!1,k={},l={};for(d=0;d<a.length;d++){for(g=a[d],e=0;e<b.length;e++)if(g[b[e]]){for(h in g)-1===("x"===h.charAt(0)?b:c).indexOf(h)&&(k[h]=1);for(f=0;f<c.length;f++)g[c[f]]&&(j=!0)}for(e=0;e<c.length;e++)if(g[c[e]])for(i in g)-1===("x"===i.charAt(0)?b:c).indexOf(i)&&(l[i]=1)}return j&&(y.extendFlat(k,l),l={}),{x:k,y:l,xy:j}}var u=a("d3"),v=a("tinycolor2"),w=a("../../plotly"),x=a("../../registry"),y=a("../../lib"),z=a("../../lib/svg_text_utils"),A=a("../../components/color"),B=a("../../components/drawing"),C=a("../../components/fx"),D=a("../../lib/setcursor"),E=a("../../components/dragelement"),F=a("../../constants/alignment").FROM_TL,G=a("../plots"),H=a("./axes").doTicks,I=a("./axis_ids").getFromId,J=a("./select"),K=a("./scale_zoom"),L=a("./constants"),M=L.MINDRAG,N=L.MINZOOM,O=!0;b.exports=function(a,b,c,A,D,P,Q,R){function S(){ba=[b.xaxis],ca=[b.yaxis];var c=ba[0],d=ca[0];fa=c._length,ga=d._length;var f=na._axisConstraintGroups,g=[c._id],h=[d._id];aa=[b].concat(Q&&R?b.overlays:[]);for(var i=1;i<aa.length;i++){var k=aa[i].xaxis,l=aa[i].yaxis;-1===ba.indexOf(k)&&(ba.push(k),g.push(k._id)),-1===ca.indexOf(l)&&(ca.push(l),h.push(l._id))}ha=e(ba,R),ia=e(ca,Q),ja=j(ia+ha,na.dragmode),da=c._offset,ea=d._offset;var m=t(f,g,h);ka=m.xy,la=[];for(var n in m.x)la.push(I(a,n));ma=[];for(var o in m.y)ma.push(I(a,o))}function T(b,c,d){var e=ra.getBoundingClientRect();ta=c-e.left,ua=d-e.top,va={l:ta,r:ta,w:0,t:ua,b:ua,h:0},wa=a._hmpixcount?a._hmlumcount/a._hmpixcount:v(a._fullLayout.plot_bgcolor).getLuminance(),xa="M0,0H"+fa+"V"+ga+"H0V0",ya=!1,za="xy",Aa=k(oa,wa,da,ea,xa),Ba=l(oa,da,ea),m(oa)}function U(b,c){function d(){za="",va.r=va.l,va.t=va.b,Ba.attr("d","M0,0Z")}if(a._transitioningWithDuration)return!1;var e=Math.max(0,Math.min(fa,b+ta)),f=Math.max(0,Math.min(ga,c+ua)),g=Math.abs(e-ta),h=Math.abs(f-ua);va.l=Math.min(ta,e),va.r=Math.max(ta,e),va.t=Math.min(ua,f),va.b=Math.max(ua,f),ka?g>N||h>N?(za="xy",g/fa>h/ga?(h=g*ga/fa,ua>f?va.t=ua-h:va.b=ua+h):(g=h*fa/ga,ta>e?va.l=ta-g:va.r=ta+g),Ba.attr("d",s(va))):d():!ia||h<Math.min(Math.max(.6*g,M),N)?M>g?d():(va.t=0,va.b=ga,za="x",Ba.attr("d",q(va,ua))):!ha||g<Math.min(.6*h,N)?(va.l=0,va.r=fa,za="y",Ba.attr("d",r(va,ta))):(za="xy",Ba.attr("d",s(va))),va.w=va.r-va.l,va.h=va.b-va.t,n(Aa,Ba,va,xa,ya,wa),ya=!0}function V(){return Math.min(va.h,va.w)<2*M?o(a):(("xy"===za||"x"===za)&&g(ba,va.l/fa,va.r/fa,Ca,la),("xy"===za||"y"===za)&&g(ca,(ga-va.b)/ga,(ga-va.t)/ga,Ca,ma),o(a),$(),void(O&&a.data&&a._context.showTips&&(y.notifier(y._(a,"Double-click to zoom back out"),"long"),O=!1)))}function W(b){function c(a,b,c){function d(b){return a.l2r(f+(b-f)*c)}if(!a.fixedrange){var e=y.simpleMap(a.range,a.r2l),f=e[0]+(e[1]-e[0])*b;a.range=e.map(d)}}if(a._context.scrollZoom||na._enablescrollzoom){if(a._transitioningWithDuration)return y.pauseEvent(b);var d=a.querySelector(".plotly");if(S(),!(d.scrollHeight-d.clientHeight>10||d.scrollWidth-d.clientWidth>10)){clearTimeout(Ea);var e=-b.deltaY;if(isFinite(e)||(e=b.wheelDelta/10),!isFinite(e))return void y.log("Did not find wheel motion attributes: ",b);var f,g=Math.exp(-Math.min(Math.max(e,-20),20)/200),h=Ga.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(b.clientX-h.left)/h.width,j=(h.bottom-b.clientY)/h.height;if(R||ka){for(R||(i=.5),f=0;f<ba.length;f++)c(ba[f],i,g);Da[2]*=g,Da[0]+=Da[2]*i*(1/g-1)}if(Q||ka){for(Q||(j=.5),f=0;f<ca.length;f++)c(ca[f],j,g);Da[3]*=g,Da[1]+=Da[3]*(1-j)*(1/g-1)}return _(Da),Y(Q,R),Ea=setTimeout(function(){Da=[0,0,fa,ga];var a;a=ka?"xy":(R?"x":"")+(Q?"y":""),$(a)},Fa),y.pauseEvent(b)}}}function X(b,c){function d(a,b,c){for(var d,e,f=1-b,g=0;g<a.length;g++){var h=a[g];if(!h.fixedrange){d=h,e=h._rl[f]+(h._rl[b]-h._rl[f])/i(c/h._length);var j=h.l2r(e);j!==!1&&void 0!==j&&(h.range[b]=j)}}return d._length*(d._rl[b]-e)/(d._rl[b]-d._rl[f])}if(!a._transitioningWithDuration){if(S(),"ew"===ha||"ns"===ia)return ha&&h(ba,b),ia&&h(ca,c),_([ha?-b:0,ia?-c:0,fa,ga]),void Y(ia,ha);if(ka&&ha&&ia){var e="w"===ha==("n"===ia)?1:-1,f=(b/fa+e*c/ga)/2;b=f*fa,c=e*f*ga}"w"===ha?b=d(ba,0,b):"e"===ha?b=d(ba,1,-b):ha||(b=0),"n"===ia?c=d(ca,1,c):"s"===ia?c=d(ca,0,-c):ia||(c=0);var g="w"===ha?b:0,j="n"===ia?c:0;if(ka){var k;if(!ha&&1===ia.length){for(k=0;k<ba.length;k++)ba[k].range=ba[k]._r.slice(),K(ba[k],1-c/ga);b=c*fa/ga,g=b/2}if(!ia&&1===ha.length){for(k=0;k<ca.length;k++)ca[k].range=ca[k]._r.slice(),K(ca[k],1-b/fa);c=b*ga/fa,j=c/2}}_([g,j,fa-b,ga-c]),Y(ia,ha)}}function Y(b,c){function d(a){for(f=0;f<a.length;f++)a[f].fixedrange||g.push(a[f]._id)}function e(d,e,h){for(f=0;f<d.length;f++){var i=d[f];if((c&&-1!==g.indexOf(i.xref)||b&&-1!==g.indexOf(i.yref))&&(e(a,f),h))return}}var f,g=[];for((c||ka)&&(d(ba),d(la)),(b||ka)&&(d(ca),d(ma)),Ca={},f=0;f<g.length;f++){var h=g[f];H(a,h,!0);var i=I(a,h);Ca[i._name+".range[0]"]=i.range[0],Ca[i._name+".range[1]"]=i.range[1]}e(na.annotations||[],x.getComponentMethod("annotations","drawOne")),e(na.shapes||[],x.getComponentMethod("shapes","drawOne")),e(na.images||[],x.getComponentMethod("images","draw"),!0)}function Z(){if(!a._transitioningWithDuration){var b,c,d,e=a._context.doubleClick,f=(ha?ba:[]).concat(ia?ca:[]),g={};if("reset+autosize"===e)for(e="autosize",c=0;c<f.length;c++)if(b=f[c],b._rangeInitial&&(b.range[0]!==b._rangeInitial[0]||b.range[1]!==b._rangeInitial[1])||!b._rangeInitial&&!b.autorange){e="reset";break}if("autosize"===e)for(c=0;c<f.length;c++)b=f[c],b.fixedrange||(g[b._name+".autorange"]=!0);else if("reset"===e)for((ha||ka)&&(f=f.concat(la)),ia&&!ka&&(f=f.concat(ma)),ka&&(ha?ia||(f=f.concat(ca)):f=f.concat(ba)),c=0;c<f.length;c++)b=f[c],b._rangeInitial?(d=b._rangeInitial,g[b._name+".range[0]"]=d[0],g[b._name+".range[1]"]=d[1]):g[b._name+".autorange"]=!0;a.emit("plotly_doubleclick",null),w.relayout(a,g)}}function $(){_([0,0,fa,ga]),y.syncOrAsync([G.previousPromises,function(){w.relayout(a,Ca)}],a)}function _(a){function b(a){return a.fixedrange?0:n&&-1!==la.indexOf(a)?l:o&&-1!==(ka?la:ma).indexOf(a)?m:0}function c(a,b){
return b?(a.range=a._r.slice(),K(a,b),d(a,b)):0}function d(a,b){return a._length*(1-b)*F[a.constraintoward||"middle"]}var e,f,g,h,i,j=na._plots,k=Object.keys(j),l=a[2]/ba[0]._length,m=a[3]/ca[0]._length,n=R||ka,o=Q||ka;for(na._glcanvas&&na._glcanvas.size()&&na._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0})}),e=0;e<k.length;e++){var p=j[k[e]],q=p.xaxis,r=p.yaxis,s=n&&!q.fixedrange&&-1!==ba.indexOf(q),t=o&&!r.fixedrange&&-1!==ca.indexOf(r);if(p._scene&&p._scene.update){var u=y.simpleMap(q.range,q.r2l),v=y.simpleMap(r.range,r.r2l);p._scene.update({range:[u[0],v[0],u[1],v[1]]})}if(s?(f=l,h=R?a[0]:d(q,f)):(f=b(q),h=c(q,f)),t?(g=m,i=Q?a[1]:d(r,g)):(g=b(r),i=c(r,g)),f||g){f||(f=1),g||(g=1);var w=q._offset-h/f,x=r._offset-i/g;na._defs.select("#"+p.clipId+"> rect").call(B.setTranslate,h,i).call(B.setScale,f,g);var z=p.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");p.plot.call(B.setTranslate,w,x).call(B.setScale,1/f,1/g),z.selectAll(".point").call(B.setPointGroupScale,f,g),z.selectAll(".textpoint").call(B.setTextPointsScale,f,g),z.call(B.hideOutsideRangePoints,p)}}}var aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na=a._fullLayout,oa=a._fullLayout._zoomlayer,pa=Q+R==="nsew",qa=1===(Q+R).length;S();var ra=d(b,Q+R+"drag",ja,c,A,D,P);if(!ia&&!ha&&!p(na.dragmode))return ra.onmousedown=null,ra.style.pointerEvents=pa?"all":"none",ra;var sa={element:ra,gd:a,plotinfo:b,prepFn:function(b,c,d){var e=a._fullLayout.dragmode;pa?b.shiftKey?"pan"===e?e="zoom":p(e)||(e="pan"):b.ctrlKey&&(e="pan"):e="pan","lasso"===e?sa.minDrag=1:sa.minDrag=void 0,"zoom"===e?(sa.moveFn=U,sa.doneFn=V,sa.minDrag=1,T(b,c,d)):"pan"===e?(sa.moveFn=X,sa.doneFn=$,m(oa)):p(e)&&(sa.xaxes=ba,sa.yaxes=ca,J(b,c,d,sa,e))},clickFn:function(c,d){if(o(a),2!==c||qa||Z(),pa)C.click(a,d,b.id);else if(1===c&&qa){var e=Q?ca[0]:ba[0],g="s"===Q||"w"===R?0:1,h=e._name+".range["+g+"]",i=f(e,g),j="left",k="middle";if(e.fixedrange)return;Q?(k="n"===Q?"top":"bottom","right"===e.side&&(j="right")):"e"===R&&(j="right"),a._context.showAxisRangeEntryBoxes&&u.select(ra).call(z.makeEditable,{gd:a,immediate:!0,background:na.paper_bgcolor,text:String(i),fill:e.tickfont?e.tickfont.color:"#444",horizontalAlign:j,verticalAlign:k}).on("edit",function(b){var c=e.d2r(b);void 0!==c&&w.relayout(a,h,c)})}}};E.init(sa);var ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca={},Da=[0,0,fa,ga],Ea=null,Fa=L.REDRAWDELAY,Ga=b.mainplot?na._plots[b.mainplot]:b;return Q.length*R.length!==1&&(void 0!==ra.onwheel?ra.onwheel=W:void 0!==ra.onmousewheel&&(ra.onmousewheel=W)),ra}},{"../../components/color":613,"../../components/dragelement":635,"../../components/drawing":638,"../../components/fx":655,"../../constants/alignment":711,"../../lib":738,"../../lib/setcursor":757,"../../lib/svg_text_utils":761,"../../plotly":780,"../../registry":861,"../plots":846,"./axes":785,"./axis_ids":788,"./constants":790,"./scale_zoom":801,"./select":802,d3:123,tinycolor2:543}],794:[function(a,b,c){"use strict";var d=a("../../components/fx"),e=a("../../components/dragelement"),f=a("./constants"),g=a("./dragbox");b.exports=function(a){var b=a._fullLayout;if((b._has("cartesian")||b._has("gl2d"))&&!a._context.staticPlot){var c=Object.keys(b._plots||{}).sort(function(a,c){if((b._plots[a].mainplot&&!0)===(b._plots[c].mainplot&&!0)){var d=a.split("y"),e=c.split("y");return d[0]===e[0]?Number(d[1]||1)-Number(e[1]||1):Number(d[0]||1)-Number(e[0]||1)}return b._plots[a].mainplot?1:-1});c.forEach(function(c){var h=b._plots[c],i=h.xaxis,j=h.yaxis,k=f.DRAGGERSIZE;if(!h.mainplot){var l=g(a,h,i._offset,j._offset,i._length,j._length,"ns","ew");l.onmousemove=function(b){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===c&&d.hover(a,b,c)},d.hover(a,b,c),a._fullLayout._lasthover=l,a._fullLayout._hoversubplot=c},l.onmouseout=function(b){a._dragging||(a._fullLayout._hoversubplot=null,e.unhover(a,b))},a._context.showAxisDragHandles&&(g(a,h,i._offset-k,j._offset-k,k,k,"n","w"),g(a,h,i._offset+i._length,j._offset-k,k,k,"n","e"),g(a,h,i._offset-k,j._offset+j._length,k,k,"s","w"),g(a,h,i._offset+i._length,j._offset+j._length,k,k,"s","e"))}if(a._context.showAxisDragHandles){if(c===i._mainSubplot){var m=i._mainLinePosition;"top"===i.side&&(m-=k),g(a,h,i._offset+.1*i._length,m,.8*i._length,k,"","ew"),g(a,h,i._offset,m,.1*i._length,k,"","w"),g(a,h,i._offset+.9*i._length,m,.1*i._length,k,"","e")}if(c===j._mainSubplot){var n=j._mainLinePosition;"right"!==j.side&&(n-=k),g(a,h,n,j._offset+.1*j._length,k,.8*j._length,"ns",""),g(a,h,n,j._offset+.9*j._length,k,.1*j._length,"s",""),g(a,h,n,j._offset,k,.1*j._length,"n","")}}});var h=b._hoverlayer.node();h.onmousemove=function(c){c.target=b._lasthover,d.hover(a,c,b._hoversubplot)},h.onclick=function(c){c.target=b._lasthover,d.click(a,c)},h.onmousedown=function(a){b._lasthover.onmousedown(a)}}}},{"../../components/dragelement":635,"../../components/fx":655,"./constants":790,"./dragbox":793}],795:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib");b.exports=function(a){return function(b,c){var f=b[a];if(Array.isArray(f))for(var g=d.subplotsRegistry.cartesian,h=g.idRegex,i=c._subplots,j=i.xaxis,k=i.yaxis,l=i.cartesian,m=c._has("cartesian")||c._has("gl2d"),n=0;n<f.length;n++){var o=f[n];if(e.isPlainObject(o)){var p=o.xref,q=o.yref,r=h.x.test(p),s=h.y.test(q);if(r||s){m||e.pushUnique(c._basePlotModules,g);var t=!1;r&&-1===j.indexOf(p)&&(j.push(p),t=!0),s&&-1===k.indexOf(q)&&(k.push(q),t=!0),t&&r&&s&&l.push(p+q)}}}}}},{"../../lib":738,"../../registry":861}],796:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=a._fullLayout,g=f._modules;b.plot&&b.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var h=0;h<g.length;h++){var i=g[h];if("cartesian"===i.basePlotModule.name){var j=l(c,i);i.plot(a,b,j,d,e)}}}function e(a){for(var b=a._fullLayout,c=Object.keys(b._plots),d=[],e=[],f=0;f<c.length;f++){var g=c[f],h=b._plots[g],i=h.xaxis,j=h.yaxis,k=i._mainAxis,l=j._mainAxis,m=k._id+l._id;m!==g&&-1!==c.indexOf(m)?(h.mainplot=m,h.mainplotinfo=b._plots[m],e.push(g)):d.push(g)}return d=d.concat(e)}function f(a){var b=a.plotgroup,c=a.id,d=n.layerValue2layerClass[a.xaxis.layer],e=n.layerValue2layerClass[a.yaxis.layer];if(a.mainplot){var f=a.mainplotinfo,g=f.plotgroup,i=c+"-x",j=c+"-y";a.gridlayer=f.gridlayer,a.zerolinelayer=f.zerolinelayer,h(f.overlinesBelow,"path",i),h(f.overlinesBelow,"path",j),h(f.overaxesBelow,"g",i),h(f.overaxesBelow,"g",j),a.plot=h(f.overplot,"g",c),h(f.overlinesAbove,"path",i),h(f.overlinesAbove,"path",j),h(f.overaxesAbove,"g",i),h(f.overaxesAbove,"g",j),a.xlines=g.select(".overlines-"+d).select("."+i),a.ylines=g.select(".overlines-"+e).select("."+j),a.xaxislayer=g.select(".overaxes-"+d).select("."+i),a.yaxislayer=g.select(".overaxes-"+e).select("."+j)}else{var k=h(b,"g","layer-subplot");a.shapelayer=h(k,"g","shapelayer"),a.imagelayer=h(k,"g","imagelayer"),a.gridlayer=h(b,"g","gridlayer"),a.zerolinelayer=h(b,"g","zerolinelayer"),h(b,"path","xlines-below"),h(b,"path","ylines-below"),a.overlinesBelow=h(b,"g","overlines-below"),h(b,"g","xaxislayer-below"),h(b,"g","yaxislayer-below"),a.overaxesBelow=h(b,"g","overaxes-below"),a.plot=h(b,"g","plot"),a.overplot=h(b,"g","overplot"),h(b,"path","xlines-above"),h(b,"path","ylines-above"),a.overlinesAbove=h(b,"g","overlines-above"),h(b,"g","xaxislayer-above"),h(b,"g","yaxislayer-above"),a.overaxesAbove=h(b,"g","overaxes-above"),a.xlines=b.select(".xlines-"+d),a.ylines=b.select(".ylines-"+e),a.xaxislayer=b.select(".xaxislayer-"+d),a.yaxislayer=b.select(".yaxislayer-"+e)}h(a.gridlayer,"g",a.xaxis._id,a.xaxis._id),h(a.gridlayer,"g",a.yaxis._id,a.yaxis._id),a.gridlayer.selectAll("g").sort(m.idSort);for(var l=0;l<n.traceLayerClasses.length;l++)h(a.plot,"g",n.traceLayerClasses[l]);a.xlines.style("fill","none").classed("crisp",!0),a.ylines.style("fill","none").classed("crisp",!0)}function g(a,b){if(a){var c={};a.each(function(a){var d=i.select(this),e="clip"+b._uid+a+"plot";d.remove(),b._draggers.selectAll("g."+a).remove(),b._defs.select("#"+e).remove(),c[a]=!0});for(var d=b._plots,e=Object.keys(d),f=0;f<e.length;f++)for(var g=d[e[f]],h=g.overlays||[],j=0;j<h.length;j++){var k=h[j];c[k.id]&&k.plot.selectAll(".trace").remove()}}}function h(a,b,c,d){var e=a.selectAll("."+c).data([d||0]);return e.enter().append(b).classed(c,!0),e}var i=a("d3"),j=a("../../lib"),k=a("../plots"),l=a("../get_data").getModuleCalcData,m=a("./axis_ids"),n=a("./constants");c.name="cartesian",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.idRegex=n.idRegex,c.attrRegex=n.attrRegex,c.attributes=a("./attributes"),c.layoutAttributes=a("./layout_attributes"),c.supplyLayoutDefaults=a("./layout_defaults"),c.transitionAxes=a("./transition_axes"),c.finalizeSubplots=function(a,b){var c,d,e,f=b._subplots,g=f.xaxis,h=f.yaxis,i=f.cartesian,k=i.concat(f.gl2d||[]),l={},o={};for(c=0;c<k.length;c++){var p=k[c].split("y");l[p[0]]=1,o["y"+p[1]]=1}for(c=0;c<g.length;c++)d=g[c],l[d]||(e=(a[m.id2name(d)]||{}).anchor,n.idRegex.y.test(e)||(e="y"),i.push(d+e),k.push(d+e),o[e]||(o[e]=1,j.pushUnique(h,e)));for(c=0;c<h.length;c++)e=h[c],o[e]||(d=(a[m.id2name(e)]||{}).anchor,n.idRegex.x.test(d)||(d="x"),i.push(d+e),k.push(d+e),l[d]||(l[d]=1,j.pushUnique(g,d)));if(!k.length){var q=Object.keys(a);for(d="",e="",c=0;c<q.length;c++){var r=q[c];if(n.attrRegex.test(r)){var s=r.charAt(0);"x"===s?(!d||+r.substr(5)<+d.substr(5))&&(d=r):(!e||+r.substr(5)<+e.substr(5))&&(e=r)}}d=d?m.name2id(d):"x",e=e?m.name2id(e):"y",g.push(d),h.push(e),i.push(d+e)}},c.plot=function(a,b,c,e){var f,g=a._fullLayout,h=g._subplots.cartesian,i=a.calcdata;if(!Array.isArray(b))for(b=[],f=0;f<i.length;f++)b.push(f);for(g._glcanvas&&g._glcanvas.size()&&g._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0})}),f=0;f<h.length;f++){for(var j,k=h[f],l=g._plots[k],m=[],n=0;n<i.length;n++){var o=i[n],p=o[0].trace;p.xaxis+p.yaxis===k&&((-1!==b.indexOf(p.index)||p.carpet)&&(j&&j[0].trace.xaxis+j[0].trace.yaxis===k&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===m.indexOf(j)&&m.push(j),m.push(o)),j=o)}d(a,l,m,c,e)}},c.clean=function(a,b,c,d){var e,f,h,i=d._modules||[],j=b._modules||[];for(h=0;h<i.length;h++)if("scatter"===i[h].name){e=!0;break}for(h=0;h<j.length;h++)if("scatter"===j[h].name){f=!0;break}if(e&&!f){var k=d._plots,l=Object.keys(k||{});for(h=0;h<l.length;h++){var m=k[l[h]];m.plot&&m.plot.select("g.scatterlayer").selectAll("g.trace").remove()}d._infolayer.selectAll("g.rangeslider-container").select("g.scatterlayer").selectAll("g.trace").remove()}var n=d._subplots||{},o=b._subplots||{xaxis:[],yaxis:[]};if(n.xaxis&&n.yaxis){var p=n.xaxis.concat(n.yaxis),q=o.xaxis.concat(o.yaxis);for(h=0;h<p.length;h++)-1===q.indexOf(p[h])&&d._infolayer.selectAll(".g-"+p[h]+"title").remove()}var r=d._has&&d._has("cartesian"),s=b._has&&b._has("cartesian");r&&!s&&(g(d._cartesianlayer.selectAll(".subplot"),d),d._defs.selectAll(".axesclip").remove())},c.drawFramework=function(a){var b=a._fullLayout,c=e(a),d=b._cartesianlayer.selectAll(".subplot").data(c,j.identity);d.enter().append("g").attr("class",function(a){return"subplot "+a}),d.order(),d.exit().call(g,b),d.each(function(a){var c=b._plots[a];if(c.plotgroup=i.select(this),c.overlays=[],f(c),c.mainplot){var d=b._plots[c.mainplot];d.overlays.push(c)}c.draglayer=h(b._draggers,"g",a)})},c.rangePlot=function(a,b,c){f(b),d(a,b,c),k.style(a)}},{"../../lib":738,"../get_data":820,"../plots":846,"./attributes":784,"./axis_ids":788,"./constants":790,"./layout_attributes":797,"./layout_defaults":798,"./transition_axes":807,d3:123}],797:[function(a,b,c){"use strict";var d=a("../font_attributes"),e=a("../../components/color/attributes"),f=a("../../components/drawing/attributes").dash,g=a("../../lib/extend").extendFlat,h=a("./constants");b.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:e.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:d({editType:"ticks"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"calc"},scaleratio:{valType:"number",min:0,dflt:1,editType:"calc"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"calc"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"calc"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:e.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:g({},f,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"},hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"layoutstyle"},linecolor:{valType:"color",dflt:e.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:e.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:e.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"calc"},{valType:"number",min:0,max:1,editType:"calc"}],dflt:[0,1],editType:"calc"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"}}}},{"../../components/color/attributes":612,"../../components/drawing/attributes":637,"../../lib/extend":727,"../font_attributes":810,"./constants":790}],798:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../components/color"),g=a("../layout_attributes"),h=a("./layout_attributes"),i=a("./type_defaults"),j=a("./axis_defaults"),k=a("./constraint_defaults"),l=a("./position_defaults"),m=a("./axis_ids");b.exports=function(a,b,c){function n(a,b){return e.coerce(I,J,h,a,b)}function o(a){return"x"===a?B:A}function p(b,c){for(var d="x"===b?C:D,e=[],f=0;f<d.length;f++){var g=d[f];g===c||(a[g]||{}).overlaying||e.push(m.name2id(g))}return e}var q,r={},s={},t={},u={};for(q=0;q<c.length;q++){var v=c[q];if(d.traceIs(v,"cartesian")||d.traceIs(v,"gl2d")){var w=m.id2name(v.xaxis),x=m.id2name(v.yaxis);if((!d.traceIs(v,"carpet")||"carpet"===v.type&&!v._cheater)&&w&&(s[w]=1),"carpet"===v.type&&v._cheater&&w&&(r[w]=1),d.traceIs(v,"2dMap")&&(t[w]=!0,t[x]=!0),d.traceIs(v,"oriented")){var y="h"===v.orientation?x:w;u[y]=!0}}}var z=b._subplots,A=z.xaxis,B=z.yaxis,C=e.simpleMap(A,m.id2name),D=e.simpleMap(B,m.id2name),E=C.concat(D),F=f.background;A.length&&B.length&&(F=e.coerce(a,b,g,"plot_bgcolor"));var G,H,I,J,K=f.combine(F,b.paper_bgcolor),L={x:o("x"),y:o("y")};for(q=0;q<E.length;q++){G=E[q],e.isPlainObject(a[G])||(a[G]={}),I=a[G],J=b[G]={},i(I,J,n,c,G),H=G.charAt(0);var M=p(H,G),N={letter:H,font:b.font,outerTicks:t[G],showGrid:!u[G],data:c,bgColor:K,calendar:b.calendar,cheateronly:"x"===H&&r[G]&&!s[G]};j(I,J,n,N,b);var O=n("showspikes");O&&(n("spikecolor"),n("spikethickness"),n("spikedash"),n("spikemode"));var P={letter:H,counterAxes:L[H],overlayableAxes:M};l(I,J,n,P),J._input=I}var Q=d.getComponentMethod("rangeslider","handleDefaults"),R=d.getComponentMethod("rangeselector","handleDefaults");for(q=0;q<C.length;q++)G=C[q],I=a[G],J=b[G],Q(a,b,G),"date"===J.type&&R(I,J,b,D,J.calendar),n("fixedrange");for(q=0;q<D.length;q++){G=D[q],I=a[G],J=b[G];var S=b[m.id2name(J.anchor)],T=S&&S.rangeslider&&S.rangeslider.visible;n("fixedrange",T)}b._axisConstraintGroups=[];var U=L.x.concat(L.y);for(q=0;q<E.length;q++)G=E[q],H=G.charAt(0),I=a[G],J=b[G],k(I,J,n,U,b)}},{"../../components/color":613,"../../lib":738,"../../registry":861,"../layout_attributes":837,"./axis_defaults":787,"./axis_ids":788,"./constraint_defaults":791,"./layout_attributes":797,"./position_defaults":800,"./type_defaults":808}],799:[function(a,b,c){"use strict";function d(a,b,c){var d,f,g,h,i,j=[],k=c.map(function(b){return b[a]}),l=e.bisector(b).left;for(d=0;d<k.length;d++)for(g=k[d],f=0;f<g.length;f++)h=g[f],null!==h&&void 0!==h&&(i=l(j,h),i<j.length&&j[i]===h||j.splice(i,0,h));return j}var e=a("d3");b.exports=function(a,b,c,f){switch(b){case"array":return Array.isArray(c)?c.slice():[];case"category ascending":return d(a,e.ascending,f);case"category descending":return d(a,e.descending,f);case"trace":return[];default:return[]}}},{d3:123}],800:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib");b.exports=function(a,b,c,f){var g=f.counterAxes||[],h=f.overlayableAxes||[],i=f.letter,j=e.coerce(a,b,{anchor:{valType:"enumerated",values:["free"].concat(g),dflt:d(a.position)?"free":g[0]||"free"}},"anchor");"free"===j&&c("position"),e.coerce(a,b,{side:{valType:"enumerated",values:"x"===i?["bottom","top"]:["left","right"],dflt:"x"===i?"bottom":"left"}},"side");var k=!1;if(h.length&&(k=e.coerce(a,b,{overlaying:{valType:"enumerated",values:[!1].concat(h),dflt:!1}},"overlaying")),!k){var l=c("domain");l[0]>l[1]-.01&&(b.domain=[0,1]),e.noneOrAll(a.domain,b.domain,[0,1])}return c("layer"),b}},{"../../lib":738,"fast-isnumeric":132}],801:[function(a,b,c){"use strict";var d=a("../../constants/alignment").FROM_BL;b.exports=function(a,b,c){void 0===c&&(c=d[a.constraintoward||"center"]);var e=[a.r2l(a.range[0]),a.r2l(a.range[1])],f=e[0]+(e[1]-e[0])*c;a.range=a._input.range=[a.l2r(f+(e[0]-f)*b),a.l2r(f+(e[1]-f)*b)]}},{"../../constants/alignment":711}],802:[function(a,b,c){"use strict";function d(a){return a._id}function e(a,b,c){var d,e,f;if(c){var g=c.points||[];for(d=0;d<b.length;d++)f=b[d].cd[0].trace,f.selectedpoints=[],f._input.selectedpoints=[];for(d=0;d<g.length;d++){var h=g[d],i=h.data,j=h.fullData;h.pointIndices?(i.selectedpoints=i.selectedpoints.concat(h.pointIndices),j.selectedpoints=j.selectedpoints.concat(h.pointIndices)):(i.selectedpoints.push(h.pointIndex),j.selectedpoints.push(h.pointIndex))}}else for(d=0;d<b.length;d++)f=b[d].cd[0].trace,delete f.selectedpoints,delete f._input.selectedpoints;for(d=0;d<b.length;d++)e=b[d],e.style&&e.style(a,e.cd)}function f(a,b,c){var d;return c?(d=h.difference({regions:a,inverted:!1},{regions:[b],inverted:!1}),d.regions):(d=h.union({regions:a,inverted:!1},{regions:[b],inverted:!1}),d.regions)}function g(a,b){if(Array.isArray(a))for(var c=b.cd,d=b.cd[0].trace,e=0;e<a.length;e++)a[e]=l(a[e],d,c);return a}var h=a("polybooljs"),i=a("../../lib/polygon"),j=a("../../lib/throttle"),k=a("../../components/color"),l=a("../../components/fx/helpers").makeEventData,m=a("./axes"),n=a("./constants"),o=i.filter,p=i.tester,q=i.multitester,r=n.MINSELECT;b.exports=function(a,b,c,h,i){function l(a){var b="y"===a._id.charAt(0)?1:0;return function(c){return a.p2d(c[b])}}function s(a,b){return a-b}var t,u,v,w,x=h.gd,y=x._fullLayout,z=y._zoomlayer,A=h.element.getBoundingClientRect(),B=h.plotinfo,C=B.xaxis._offset,D=B.yaxis._offset,E=b-A.left,F=c-A.top,G=E,H=F,I="M"+E+","+F,J=h.xaxes[0]._length,K=h.yaxes[0]._length,L=h.xaxes.map(d),M=h.yaxes.map(d),N=h.xaxes.concat(h.yaxes),O=a.altKey;(a.shiftKey||a.altKey)&&B.selection&&B.selection.polygons&&!h.polygons?(h.polygons=B.selection.polygons,h.mergedPolygons=B.selection.mergedPolygons):(!a.shiftKey&&!a.altKey||(a.shiftKey||a.altKey)&&!B.selection)&&(B.selection={},B.selection.polygons=h.polygons=[],B.selection.mergedPolygons=h.mergedPolygons=[]),"lasso"===i&&(t=o([[E,F]],n.BENDPX));var P=z.selectAll("path.select-outline").data([1,2]);P.enter().append("path").attr("class",function(a){return"select-outline select-outline-"+a}).attr("transform","translate("+C+", "+D+")").attr("d",I+"Z");var Q,R,S,T,U,V=z.append("path").attr("class","zoombox-corners").style({fill:k.background,stroke:k.defaultLine,"stroke-width":1}).attr("transform","translate("+C+", "+D+")").attr("d","M0,0Z"),W=[],X=y._uid+n.SELECTID,Y=[];for(Q=0;Q<x.calcdata.length;Q++)if(R=x.calcdata[Q],S=R[0].trace,S.visible===!0&&S._module&&S._module.selectPoints)if(h.subplot)(S.subplot===h.subplot||S.geo===h.subplot)&&W.push({selectPoints:S._module.selectPoints,style:S._module.style,cd:R,xaxis:h.xaxes[0],yaxis:h.yaxes[0]});else{if(-1===L.indexOf(S.xaxis))continue;if(-1===M.indexOf(S.yaxis))continue;W.push({selectPoints:S._module.selectPoints,style:S._module.style,cd:R,xaxis:m.getFromId(x,S.xaxis),yaxis:m.getFromId(x,S.yaxis)})}var Z;Z=B.fillRangeItems?B.fillRangeItems:"select"===i?function(a,b){var c=a.range={};for(Q=0;Q<N.length;Q++){var d=N[Q],e=d._id.charAt(0);c[d._id]=[d.p2d(b[e+"min"]),d.p2d(b[e+"max"])].sort(s)}}:function(a,b,c){var d=a.lassoPoints={};for(Q=0;Q<N.length;Q++){var e=N[Q];d[e._id]=c.filtered.map(l(e))}},h.moveFn=function(a,b){G=Math.max(0,Math.min(J,a+E)),H=Math.max(0,Math.min(K,b+F));var c=Math.abs(G-E),d=Math.abs(H-F);"select"===i?d<Math.min(.6*c,r)?(w=[[E,0],[E,K],[G,K],[G,0]],w.xmin=Math.min(E,G),w.xmax=Math.max(E,G),w.ymin=Math.min(0,K),w.ymax=Math.max(0,K),V.attr("d","M"+w.xmin+","+(F-r)+"h-4v"+2*r+"h4ZM"+(w.xmax-1)+","+(F-r)+"h4v"+2*r+"h-4Z")):c<Math.min(.6*d,r)?(w=[[0,F],[0,H],[J,H],[J,F]],w.xmin=Math.min(0,J),w.xmax=Math.max(0,J),w.ymin=Math.min(F,H),w.ymax=Math.max(F,H),V.attr("d","M"+(E-r)+","+w.ymin+"v-4h"+2*r+"v4ZM"+(E-r)+","+(w.ymax-1)+"v4h"+2*r+"v-4Z")):(w=[[E,F],[E,H],[G,H],[G,F]],w.xmin=Math.min(E,G),w.xmax=Math.max(E,G),w.ymin=Math.min(F,H),w.ymax=Math.max(F,H),V.attr("d","M0,0Z")):"lasso"===i&&(t.addPt([G,H]),w=t.filtered),h.polygons&&h.polygons.length?(v=f(h.mergedPolygons,w,O),w.subtract=O,u=q(h.polygons.concat([w]))):(v=[w],u=p(w));var k=[];for(Q=0;Q<v.length;Q++){var l=v[Q];k.push(l.join("L")+"L"+l[0])}P.attr("d","M"+k.join("M")+"Z"),j.throttle(X,n.SELECTDELAY,function(){Y=[];var a,b=[];for(Q=0;Q<W.length;Q++){T=W[Q],a=T.selectPoints(T,u),b.push(a);var c=g(a,T);if(Y.length)for(var d=0;d<c.length;d++)Y.push(c[d]);else Y=c}U={points:Y},e(x,W,U),Z(U,w,t),h.gd.emit("plotly_selecting",U)})},h.clickFn=function(a){V.remove(),j.done(X).then(function(){if(j.clear(X),2===a){for(P.remove(),Q=0;Q<W.length;Q++)T=W[Q],T.selectPoints(T,!1);e(x,W),x.emit("plotly_deselect",null)}else x.emit("plotly_selected",void 0)})},h.doneFn=function(){V.remove(),j.done(X).then(function(){j.clear(X),h.gd.emit("plotly_selected",U),w&&h.polygons&&(w.subtract=O,h.polygons.push(w),h.mergedPolygons.length=0,[].push.apply(h.mergedPolygons,v))})}}},{"../../components/color":613,"../../components/fx/helpers":652,"../../lib/polygon":750,"../../lib/throttle":762,"./axes":785,"./constants":790,polybooljs:487}],803:[function(a,b,c){"use strict";function d(a){return Math.pow(10,a)}var e=a("d3"),f=a("fast-isnumeric"),g=a("../../lib"),h=g.cleanNumber,i=g.ms2DateTime,j=g.dateTime2ms,k=g.ensureNumber,l=a("../../constants/numerical"),m=l.FP_SAFE,n=l.BADNUM,o=a("./constants"),p=a("./axis_ids");b.exports=function(a,b){function c(b,c){if(b>0)return Math.log(b)/Math.LN10;if(0>=b&&c&&a.range&&2===a.range.length){var d=a.range[0],e=a.range[1];return.5*(d+e-3*x*Math.abs(d-e))}return n}function l(b,c,d){var e=j(b,d||a.calendar);if(e===n){if(!f(b))return n;e=j(new Date(+b))}return e}function q(b,c,d){return i(b,c,d||a.calendar)}function r(b){return a._categories[Math.round(b)]}function s(b){if(null!==b&&void 0!==b){if(void 0===a._categoriesMap&&(a._categoriesMap={}),void 0!==a._categoriesMap[b])return a._categoriesMap[b];a._categories.push(b);var c=a._categories.length-1;return a._categoriesMap[b]=c,c}return n}function t(b){if(a._categoriesMap){var c=a._categoriesMap[b];if(void 0!==c)return c}return f(b)?+b:void 0}function u(b){return f(b)?e.round(a._b+a._m*b,2):n}function v(b){return(b-a._b)/a._m}b=b||{};var w=(a._id||"x").charAt(0),x=10;a.c2l="log"===a.type?c:k,a.l2c="log"===a.type?d:k,a.l2p=u,a.p2l=v,a.c2p="log"===a.type?function(a,b){return u(c(a,b))}:u,a.p2c="log"===a.type?function(a){return d(v(a))}:v,-1!==["linear","-"].indexOf(a.type)?(a.d2r=a.r2d=a.d2c=a.r2c=a.d2l=a.r2l=h,a.c2d=a.c2r=a.l2d=a.l2r=k,a.d2p=a.r2p=function(b){return a.l2p(h(b))},a.p2d=a.p2r=v,a.cleanPos=k):"log"===a.type?(a.d2r=a.d2l=function(a,b){return c(h(a),b)},a.r2d=a.r2c=function(a){return d(h(a))},a.d2c=a.r2l=h,a.c2d=a.l2r=k,a.c2r=c,a.l2d=d,a.d2p=function(b,c){return a.l2p(a.d2r(b,c))},a.p2d=function(a){return d(v(a))},a.r2p=function(b){return a.l2p(h(b))},a.p2r=v,a.cleanPos=k):"date"===a.type?(a.d2r=a.r2d=g.identity,a.d2c=a.r2c=a.d2l=a.r2l=l,a.c2d=a.c2r=a.l2d=a.l2r=q,a.d2p=a.r2p=function(b,c,d){return a.l2p(l(b,0,d))},a.p2d=a.p2r=function(a,b,c){return q(v(a),b,c)},a.cleanPos=function(b){return g.cleanDate(b,n,a.calendar)}):"category"===a.type&&(a.d2c=a.d2l=s,a.r2d=a.c2d=a.l2d=r,a.d2r=a.d2l_noadd=t,a.r2c=function(b){var c=t(b);return void 0!==c?c:a.fraction2r(.5)},a.l2r=a.c2r=k,a.r2l=t,a.d2p=function(b){return a.l2p(a.r2c(b))},a.p2d=function(a){return r(v(a))},a.r2p=a.d2p,a.p2r=v,a.cleanPos=function(a){return"string"==typeof a&&""!==a?a:k(a)}),a.fraction2r=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return a.l2r(c+b*(d-c))},a.r2fraction=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return(a.r2l(b)-c)/(d-c)},a.cleanRange=function(b){b||(b="range");var c,d,e=g.nestedProperty(a,b).get();if(d="date"===a.type?g.dfltRange(a.calendar):"y"===w?o.DFLTRANGEY:o.DFLTRANGEX,d=d.slice(),!e||2!==e.length)return void g.nestedProperty(a,b).set(d);for("date"===a.type&&(e[0]=g.cleanDate(e[0],n,a.calendar),e[1]=g.cleanDate(e[1],n,a.calendar)),c=0;2>c;c++)if("date"===a.type){if(!g.isDateTime(e[c],a.calendar)){a[b]=d;break}if(a.r2l(e[0])===a.r2l(e[1])){var h=g.constrain(a.r2l(e[0]),g.MIN_MS+1e3,g.MAX_MS-1e3);e[0]=a.l2r(h-1e3),e[1]=a.l2r(h+1e3);break}}else{if(!f(e[c])){if(!f(e[1-c])){a[b]=d;break}e[c]=e[1-c]*(c?10:.1)}if(e[c]<-m?e[c]=-m:e[c]>m&&(e[c]=m),e[0]===e[1]){var i=Math.max(1,Math.abs(1e-6*e[0]));e[0]-=i,e[1]+=i}}},a.setScale=function(c){var d=b._size;if(a._categories||(a._categories=[]),a._categoriesMap||(a._categoriesMap={}),a.overlaying){var e=p.getFromId({_fullLayout:b},a.overlaying);a.domain=e.domain}var f=c&&a._r?"_r":"range",g=a.calendar;a.cleanRange(f);var h=a.r2l(a[f][0],g),i=a.r2l(a[f][1],g);if("y"===w?(a._offset=d.t+(1-a.domain[1])*d.h,a._length=d.h*(a.domain[1]-a.domain[0]),a._m=a._length/(h-i),a._b=-a._m*i):(a._offset=d.l+a.domain[0]*d.w,a._length=d.w*(a.domain[1]-a.domain[0]),a._m=a._length/(i-h),a._b=-a._m*h),!isFinite(a._m)||!isFinite(a._b))throw b._replotting=!1,new Error("Something went wrong with axis scaling")},a.makeCalcdata=function(b,c){var d,e,f,g="date"===a.type&&b[c+"calendar"];if(c in b)for(d=b[c],e=new Array(d.length),f=0;f<d.length;f++)e[f]=a.d2c(d[f],0,g);else{var h=c+"0"in b?a.d2c(b[c+"0"],0,g):0,i=b["d"+c]?Number(b["d"+c]):1;for(d=b[{x:"y",y:"x"}[c]],e=new Array(d.length),f=0;f<d.length;f++)e[f]=h+f*i}return e},a.isValidRange=function(b){return Array.isArray(b)&&2===b.length&&f(a.r2l(b[0]))&&f(a.r2l(b[1]))},a.isPtWithinRange=function(b,c){var d=a.c2l(b[w],null,c);return d>=a.r2l(a.range[0])&&d<=a.r2l(a.range[1])},a._min=[],a._max=[];var y=b._d3locale;"date"===a.type&&(a._dateFormat=y?y.timeFormat.utc:e.time.format.utc),a._separators=b.separators,a._numFormat=y?y.numberFormat:e.format,delete a._minDtick,delete a._forceTick0}},{"../../constants/numerical":717,"../../lib":738,"./axis_ids":788,"./constants":790,d3:123,"fast-isnumeric":132}],804:[function(a,b,c){"use strict";function d(a){var b=["showexponent","showtickprefix","showticksuffix"],c=b.filter(function(b){return void 0!==a[b]}),d=function(b){return a[b]===a[c[0]]};return c.every(d)||1===c.length?a[c[0]]:void 0}function e(a,b){function c(a,b){return f.coerce(h,i,g.tickformatstops,a,b)}var d=a.tickformatstops,e=b.tickformatstops=[];if(Array.isArray(d))for(var h,i,j=0;j<d.length;j++)h=d[j],i={},c("dtickrange"),c("value"),e.push(i)}var f=a("../../lib"),g=a("./layout_attributes");b.exports=function(a,b,c,g,h){var i=d(a),j=c("tickprefix");j&&c("showtickprefix",i);var k=c("ticksuffix");k&&c("showticksuffix",i);var l=c("showticklabels");if(l){var m=h.font||{},n=b.color===a.color?b.color:m.color;if(f.coerceFont(c,"tickfont",{family:m.family,size:m.size,color:n}),c("tickangle"),"category"!==g){var o=c("tickformat");e(a,b),o||"date"===g||(c("showexponent",i),c("exponentformat"),c("separatethousands"))}}"category"===g||h.noHover||c("hoverformat")}},{"../../lib":738,"./layout_attributes":797}],805:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes");b.exports=function(a,b,c,f){var g=d.coerce2(a,b,e,"ticklen"),h=d.coerce2(a,b,e,"tickwidth"),i=d.coerce2(a,b,e,"tickcolor",b.color),j=c("ticks",f.outerTicks||g||h||i?"outside":"");j||(delete b.ticklen,delete b.tickwidth,delete b.tickcolor)}},{"../../lib":738,"./layout_attributes":797}],806:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../constants/numerical").ONEDAY;b.exports=function(a,b,c,g){var h="auto";"array"!==a.tickmode||"log"!==g&&"date"!==g||(a.tickmode="auto"),Array.isArray(a.tickvals)?h="array":a.dtick&&(h="linear");var i=c("tickmode",h);if("auto"===i)c("nticks");else if("linear"===i){var j="date"===g?f:1,k=c("dtick",j);if(d(k))b.dtick=k>0?Number(k):j;else if("string"!=typeof k)b.dtick=j;else{
var l=k.charAt(0),m=k.substr(1);m=d(m)?Number(m):0,(0>=m||!("date"===g&&"M"===l&&m===Math.round(m)||"log"===g&&"L"===l||"log"===g&&"D"===l&&(1===m||2===m)))&&(b.dtick=j)}var n="date"===g?e.dateTick0(b.calendar):0,o=c("tick0",n);"date"===g?b.tick0=e.cleanDate(o,n):d(o)&&"D1"!==k&&"D2"!==k?b.tick0=Number(o):b.tick0=n}else{var p=c("tickvals");void 0===p?b.tickmode="auto":c("ticktext")}}},{"../../constants/numerical":717,"../../lib":738,"fast-isnumeric":132}],807:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("../../registry"),g=a("../../components/drawing"),h=a("./axes"),i=a("./constants").attrRegex;b.exports=function(a,b,c,j){function k(a){var b,c,d,e,f,g={};for(b in a)if(c=b.split("."),d=c[0].match(i)){var h=b.charAt(0),j=c[0];if(e=t[j],f={},Array.isArray(a[b])?f.to=a[b].slice(0):Array.isArray(a[b].range)&&(f.to=a[b].range.slice(0)),!f.to)continue;f.axisName=j,f.length=e._length,u.push(h),g[h]=f}return g}function l(a,b,c){var d,e,f,g=a._plots,h=[];for(d in g){var i=g[d];if(-1===h.indexOf(i)){var j=i.xaxis._id,k=i.yaxis._id,l=i.xaxis.range,m=i.yaxis.range;i.xaxis._r=i.xaxis.range.slice(),i.yaxis._r=i.yaxis.range.slice(),e=c[j]?c[j].to:l,f=c[k]?c[k].to:m,(l[0]!==e[0]||l[1]!==e[1]||m[0]!==f[0]||m[1]!==f[1])&&(-1!==b.indexOf(j)||-1!==b.indexOf(k))&&h.push(i)}}return h}function m(){function b(b,c,d){for(var e=0;e<b.length;e++)if(c(a,e),d)return}b(t.annotations||[],f.getComponentMethod("annotations","drawOne")),b(t.shapes||[],f.getComponentMethod("shapes","drawOne")),b(t.images||[],f.getComponentMethod("images","draw"),!0)}function n(b,c){function d(b,c,d){for(e=0;e<b.length;e++){var f=b[e];if((-1!==g.indexOf(f.xref)||-1!==g.indexOf(f.yref))&&c(a,e),d)return}}var e,g=[];for(g=[b._id,c._id],e=0;e<g.length;e++)h.doTicks(a,g[e],!0);d(t.annotations||[],f.getComponentMethod("annotations","drawOne")),d(t.shapes||[],f.getComponentMethod("shapes","drawOne")),d(t.images||[],f.getComponentMethod("images","draw"),!0)}function o(a){var b=a.xaxis,c=a.yaxis;t._defs.select("#"+a.clipId+"> rect").call(g.setTranslate,0,0).call(g.setScale,1,1),a.plot.call(g.setTranslate,b._offset,c._offset).call(g.setScale,1,1);var d=a.plot.selectAll(".scatterlayer .trace");d.selectAll(".point").call(g.setPointGroupScale,1,1),d.selectAll(".textpoint").call(g.setTextPointsScale,1,1),d.call(g.hideOutsideRangePoints,a)}function p(b,c){var d,e,f,h=v[b.xaxis._id],i=v[b.yaxis._id],j=[];if(h){d=a._fullLayout[h.axisName],e=d._r,f=h.to,j[0]=(e[0]*(1-c)+c*f[0]-e[0])/(e[1]-e[0])*b.xaxis._length;var k=e[1]-e[0],l=f[1]-f[0];d.range[0]=e[0]*(1-c)+c*f[0],d.range[1]=e[1]*(1-c)+c*f[1],j[2]=b.xaxis._length*(1-c+c*l/k)}else j[0]=0,j[2]=b.xaxis._length;if(i){d=a._fullLayout[i.axisName],e=d._r,f=i.to,j[1]=(e[1]*(1-c)+c*f[1]-e[1])/(e[0]-e[1])*b.yaxis._length;var m=e[1]-e[0],o=f[1]-f[0];d.range[0]=e[0]*(1-c)+c*f[0],d.range[1]=e[1]*(1-c)+c*f[1],j[3]=b.yaxis._length*(1-c+c*o/m)}else j[1]=0,j[3]=b.yaxis._length;n(b.xaxis,b.yaxis);var p=b.xaxis,q=b.yaxis,r=!!h,s=!!i,u=r?p._length/j[2]:1,w=s?q._length/j[3]:1,x=r?j[0]:0,y=s?j[1]:0,z=r?j[0]/j[2]*p._length:0,A=s?j[1]/j[3]*q._length:0,B=p._offset-z,C=q._offset-A;t._defs.select("#"+b.clipId+"> rect").call(g.setTranslate,x,y).call(g.setScale,1/u,1/w),b.plot.call(g.setTranslate,B,C).call(g.setScale,u,w).selectAll(".points").selectAll(".point").call(g.setPointGroupScale,1/u,1/w),b.plot.selectAll(".points").selectAll(".textpoint").call(g.setTextPointsScale,1/u,1/w)}function q(){for(var b={},c=0;c<w.length;c++){var d=a._fullLayout[v[w[c]].axisName],f=v[w[c]].to;b[d._name+".range[0]"]=f[0],b[d._name+".range[1]"]=f[1],d.range=f.slice()}return y&&y(),e.relayout(a,b).then(function(){for(var a=0;a<x.length;a++)o(x[a])})}function r(){for(var b={},c=0;c<w.length;c++){var d=a._fullLayout[w[c]+"axis"];b[d._name+".range[0]"]=d.range[0],b[d._name+".range[1]"]=d.range[1],d.range=d._r.slice()}return e.relayout(a,b).then(function(){for(var a=0;a<x.length;a++)o(x[a])})}function s(){A=Date.now();for(var a=Math.min(1,(A-z)/c.duration),b=C(a),d=0;d<x.length;d++)p(x[d],b);A-z>c.duration?(q(),B=window.cancelAnimationFrame(s)):B=window.requestAnimationFrame(s)}var t=a._fullLayout,u=[],v=k(b),w=Object.keys(v),x=l(t,w,v);if(!x.length)return m(),!1;var y;j&&(y=j());var z,A,B,C=d.ease(c.easing);return a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(B),B=null,r()}),z=Date.now(),B=window.requestAnimationFrame(s),Promise.resolve()}},{"../../components/drawing":638,"../../plotly":780,"../../registry":861,"./axes":785,"./constants":790,d3:123}],808:[function(a,b,c){"use strict";function d(a,b){if("-"===a.type){var c=a._id,d=c.charAt(0);-1!==c.indexOf("scene")&&(c=d);var j=e(b,c,d);if(j){if("histogram"===j.type&&d==={v:"y",h:"x"}[j.orientation||"v"])return void(a.type="linear");var k=d+"calendar",l=j[k];if(g(j,d)){for(var m,n=f(j),o=[],p=0;p<b.length;p++)m=b[p],h.traceIs(m,"box-violin")&&(m[d+"axis"]||d)===c&&(void 0!==m[n]?o.push(m[n][0]):void 0!==m.name?o.push(m.name):o.push("text"),m[k]!==l&&(l=void 0));a.type=i(o,l)}else a.type=i(j[d]||[j[d+"0"]],l)}}}function e(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if((e[c+"axis"]||c)===b){if(g(e,c))return e;if((e[c]||[]).length||e[c+"0"])return e}}}function f(a){return{v:"x",h:"y"}[a.orientation||"v"]}function g(a,b){var c=f(a),d=h.traceIs(a,"box-violin"),e=h.traceIs(a._fullInput||{},"candlestick");return d&&!e&&b===c&&void 0===a[c]&&void 0===a[c+"0"]}var h=a("../../registry"),i=a("./axis_autotype"),j=a("./axis_ids").name2id;b.exports=function(a,b,c,e,f){f&&(b._name=f,b._id=j(f));var g=c("type");"-"===g&&(d(b,e),"-"===b.type?b.type="linear":a.type=b.type)}},{"../../registry":861,"./axis_autotype":786,"./axis_ids":788}],809:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f,g=!1;if("data"===b.type)d=a._fullData[null!==b.traces?b.traces[0]:0];else{if("layout"!==b.type)return!1;d=a._fullLayout}return e=j.nestedProperty(d,b.prop).get(),f=c[b.type]=c[b.type]||{},f.hasOwnProperty(b.prop)&&f[b.prop]!==e&&(g=!0),f[b.prop]=e,{changed:g,value:e}}function e(a,b){return Array.isArray(b[0])&&1===b[0].length&&-1!==["string","number"].indexOf(typeof b[0][0])?[{type:"layout",prop:"_currentFrame",value:b[0][0].toString()}]:[]}function f(a,b){var c=[],d=b[0],e={};if("string"==typeof d)e[d]=b[1];else{if(!j.isPlainObject(d))return c;e=d}return h(e,function(a,b,d){c.push({type:"layout",prop:a,value:d})},"",0),c}function g(a,b){var c,d,e,f,g=[];if(d=b[0],e=b[1],c=b[2],f={},"string"==typeof d)f[d]=e;else{if(!j.isPlainObject(d))return g;f=d,void 0===c&&(c=e)}return void 0===c&&(c=null),h(f,function(b,d,e){var f;if(Array.isArray(e)){var h=Math.min(e.length,a.data.length);c&&(h=Math.min(h,c.length)),f=[];for(var i=0;h>i;i++)f[i]=c?c[i]:i}else f=c?c.slice(0):null;if(null===f)Array.isArray(e)&&(e=e[0]);else if(Array.isArray(f)){if(!Array.isArray(e)){var j=e;e=[];for(var k=0;k<f.length;k++)e[k]=j}e.length=Math.min(f.length,e.length)}g.push({type:"data",prop:b,traces:f,value:e})},"",0),g}function h(a,b,c,d){Object.keys(a).forEach(function(e){var f=a[e];if("_"!==e[0]){var g=c+(d>0?".":"")+e;j.isPlainObject(f)?h(f,b,g,d+1):b(g,e,f)}})}var i=a("../plotly"),j=a("../lib");c.manageCommandObserver=function(a,b,e,f){var g={},h=!0;b&&b._commandObserver&&(g=b._commandObserver),g.cache||(g.cache={}),g.lookupTable={};var i=c.hasSimpleAPICommandBindings(a,e,g.lookupTable);if(b&&b._commandObserver){if(i)return g;if(b._commandObserver.remove)return b._commandObserver.remove(),b._commandObserver=null,g}if(i){d(a,i,g.cache),g.check=function(){if(h){var b=d(a,i,g.cache);return b.changed&&f&&void 0!==g.lookupTable[b.value]&&(g.disable(),Promise.resolve(f({value:b.value,type:i.type,prop:i.prop,traces:i.traces,index:g.lookupTable[b.value]})).then(g.enable,g.enable)),b.changed}};for(var k=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<k.length;l++)a._internalOn(k[l],g.check);g.remove=function(){for(var b=0;b<k.length;b++)a._removeInternalListener(k[b],g.check)}}else j.log("Unable to automatically bind plot updates to API command"),g.lookupTable={},g.remove=function(){};return g.disable=function(){h=!1},g.enable=function(){h=!0},b&&(b._commandObserver=g),g},c.hasSimpleAPICommandBindings=function(a,b,d){var e,f,g=b.length;for(e=0;g>e;e++){var h,i=b[e],j=i.method,k=i.args;if(Array.isArray(k)||(k=[]),!j)return!1;var l=c.computeAPICommandBindings(a,j,k);if(1!==l.length)return!1;if(f){if(h=l[0],h.type!==f.type)return!1;if(h.prop!==f.prop)return!1;if(Array.isArray(f.traces)){if(!Array.isArray(h.traces))return!1;h.traces.sort();for(var m=0;m<f.traces.length;m++)if(f.traces[m]!==h.traces[m])return!1}else if(h.prop!==f.prop)return!1}else f=l[0],Array.isArray(f.traces)&&f.traces.sort();h=l[0];var n=h.value;if(Array.isArray(n)){if(1!==n.length)return!1;n=n[0]}d&&(d[n]=e)}return f},c.executeAPICommand=function(a,b,c){if("skip"===b)return Promise.resolve();var d=i[b],e=[a];Array.isArray(c)||(c=[]);for(var f=0;f<c.length;f++)e.push(c[f]);return d.apply(null,e)["catch"](function(a){return j.warn("API call to Plotly."+b+" rejected.",a),Promise.reject(a)})},c.computeAPICommandBindings=function(a,b,c){var d;switch(Array.isArray(c)||(c=[]),b){case"restyle":d=g(a,c);break;case"relayout":d=f(a,c);break;case"update":d=g(a,[c[0],c[2]]).concat(f(a,[c[1]]));break;case"animate":d=e(a,c);break;default:d=[]}return d}},{"../lib":738,"../plotly":780}],810:[function(a,b,c){"use strict";b.exports=function(a){var b=a.editType,c=a.colorEditType;void 0===c&&(c=b);var d={family:{valType:"string",noBlank:!0,strict:!0,editType:b},size:{valType:"number",min:1,editType:b},color:{valType:"color",editType:c},editType:b};return a.arrayOk&&(d.family.arrayOk=!0,d.size.arrayOk=!0,d.color.arrayOk=!0),d}},{}],811:[function(a,b,c){"use strict";b.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],812:[function(a,b,c){"use strict";c.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},c.axesNames=["lonaxis","lataxis"],c.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},c.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},c.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},c.clipPad=.001,c.precision=.1,c.landColor="#F0DC82",c.waterColor="#3399FF",c.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},c.sphereSVG={type:"Sphere"},c.fillLayers={ocean:1,land:1,lakes:1},c.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},c.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],c.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],c.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],813:[function(a,b,c){"use strict";function d(a){this.id=a.id,this.graphDiv=a.graphDiv,this.container=a.container,this.topojsonURL=a.topojsonURL,this.isStatic=a.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}function e(a){for(var b=a.projection,c=b.type,d=h.geo[s.projNames[c]](),e=a._isClipped?s.lonaxisSpan[c]/2:null,f=["center","rotate","parallels","clipExtent"],g=function(a){return a?d:[]},i=0;i<f.length;i++){var j=f[i];"function"!=typeof d[j]&&(d[j]=g)}return d.isLonLatOverEdges=function(a){if(null===d(a))return!0;if(e){var b=d.rotate(),c=h.geo.distance(a,[-b[0],-b[1]]),f=e*Math.PI/180;return c>f}return!1},d.getPath=function(){return h.geo.path().projection(d)},d.getBounds=function(a){return d.getPath().bounds(a)},d.fitExtent=function(a,b){var c=a[1][0]-a[0][0],e=a[1][1]-a[0][1],f=d.clipExtent&&d.clipExtent();d.scale(150).translate([0,0]),f&&d.clipExtent(null);var g=d.getBounds(b),h=Math.min(c/(g[1][0]-g[0][0]),e/(g[1][1]-g[0][1])),i=+a[0][0]+(c-h*(g[1][0]+g[0][0]))/2,j=+a[0][1]+(e-h*(g[1][1]+g[0][1]))/2;return f&&d.clipExtent(f),d.scale(150*h).translate([i,j])},d.precision(s.precision),e&&d.clipAngle(e-s.clipPad),d}function f(a,b){var c=b[a],d=c.dtick,e=s.scopeDefaults[b.scope],f=e.lonaxisRange,g=e.lataxisRange,i="lonaxis"===a?[d]:[0,d];return h.geo.graticule().extent([[f[0],g[0]],[f[1],g[1]]]).step(i)}function g(a,b){var c=s.clipPad,d=a[0]+c,e=a[1]-c,f=b[0]+c,g=b[1]-c;d>0&&0>e&&(e+=360);var h=(e-d)/4;return{type:"Polygon",coordinates:[[[d,f],[d,g],[d+h,g],[d+2*h,g],[d+3*h,g],[e,g],[e,f],[e-h,f],[e-2*h,f],[e-3*h,f],[d,f]]]}}var h=a("d3"),i=a("../../plotly"),j=a("../../lib"),k=a("../../components/color"),l=a("../../components/drawing"),m=a("../../components/fx"),n=a("../plots"),o=a("../cartesian/axes"),p=a("../../components/dragelement"),q=a("../cartesian/select"),r=a("./zoom"),s=a("./constants"),t=a("../../lib/topojson_utils"),u=a("topojson-client").feature;a("./projections")(h);var v=d.prototype;b.exports=function(a){return new d(a)},v.plot=function(a,b,c){var d=this,e=b[this.id],f=t.getTopojsonName(e);null===d.topojson||f!==d.topojsonName?(d.topojsonName=f,void 0===PlotlyGeoAssets.topojson[d.topojsonName]?c.push(d.fetchTopojson().then(function(c){PlotlyGeoAssets.topojson[d.topojsonName]=c,d.topojson=c,d.update(a,b)})):(d.topojson=PlotlyGeoAssets.topojson[d.topojsonName],d.update(a,b))):d.update(a,b)},v.fetchTopojson=function(){var a=t.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(b,c){h.json(a,function(d,e){return d?c(404===d.status?new Error(["plotly.js could not find topojson file at",a,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",a].join(" "))):void b(e)})})},v.update=function(a,b){var c=b[this.id],d=this.updateProjection(b,c);if(!d){this.hasChoropleth=!1;for(var e=0;e<a.length;e++)if("choropleth"===a[e][0].trace.type){this.hasChoropleth=!0;break}this.viewInitial||this.saveViewInitial(c),this.updateBaseLayers(b,c),this.updateDims(b,c),this.updateFx(b,c),n.generalUpdatePerTraceModule(this,a,c);var f=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=f.selectAll(".point"),this.dataPoints.text=f.selectAll("text"),this.dataPaths.line=f.selectAll(".js-line");var g=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=g.selectAll("path"),this.render()}},v.updateProjection=function(a,b){var c=a._size,d=b.domain,f=b.projection,h=f.rotation||{},k=b.center||{},l=this.projection=e(b);l.center([k.lon-h.lon,k.lat-h.lat]).rotate([-h.lon,-h.lat,h.roll]).parallels(f.parallels);var m=[[c.l+c.w*d.x[0],c.t+c.h*(1-d.y[1])],[c.l+c.w*d.x[1],c.t+c.h*(1-d.y[0])]],n=b.lonaxis,o=b.lataxis,p=g(n.range,o.range);l.fitExtent(m,p);var q=this.bounds=l.getBounds(p),r=this.fitScale=l.scale(),s=l.translate();if(!isFinite(q[0][0])||!isFinite(q[0][1])||!isFinite(q[1][0])||!isFinite(q[1][1])||isNaN(s[0])||isNaN(s[0])){for(var t=this.graphDiv,u=["projection.rotation","center","lonaxis.range","lataxis.range"],v="Invalid geo settings, relayout'ing to default view.",w={},x=0;x<u.length;x++)w[this.id+"."+u[x]]=null;return this.viewInitial=null,j.warn(v),t._promises.push(i.relayout(t,w)),v}var y=this.midPt=[(q[0][0]+q[1][0])/2,(q[0][1]+q[1][1])/2];if(l.scale(f.scale*r).translate([s[0]+(y[0]-s[0]),s[1]+(y[1]-s[1])]).clipExtent(q),b._isAlbersUsa){var z=l([k.lon,k.lat]),A=l.translate();l.translate([A[0]-(z[0]-A[0]),A[1]-(z[1]-A[1])])}},v.updateBaseLayers=function(a,b){function c(a){return"lonaxis"===a||"lataxis"===a}function d(a){return Boolean(s.lineLayers[a])}function e(a){return Boolean(s.fillLayers[a])}var g=this,i=g.topojson,j=g.layers,m=g.basePaths,n=this.hasChoropleth?s.layersForChoropleth:s.layers,o=n.filter(function(a){return d(a)||e(a)?b["show"+a]:c(a)?b[a].showgrid:!0}),p=g.framework.selectAll(".layer").data(o,String);p.exit().each(function(a){delete j[a],delete m[a],h.select(this).remove()}),p.enter().append("g").attr("class",function(a){return"layer "+a}).each(function(a){var b=j[a]=h.select(this);"bg"===a?g.bgRect=b.append("rect").style("pointer-events","all"):c(a)?m[a]=b.append("path").style("fill","none"):"backplot"===a?b.append("g").classed("choroplethlayer",!0):"frontplot"===a?b.append("g").classed("scatterlayer",!0):d(a)?m[a]=b.append("path").style("fill","none").style("stroke-miterlimit",2):e(a)&&(m[a]=b.append("path").style("stroke","none"))}),p.order(),p.each(function(a){var g=m[a],h=s.layerNameToAdjective[a];"frame"===a?g.datum(s.sphereSVG):d(a)||e(a)?g.datum(u(i,i.objects[a])):c(a)&&g.datum(f(a,b)).call(k.stroke,b[a].gridcolor).call(l.dashLine,"",b[a].gridwidth),d(a)?g.call(k.stroke,b[h+"color"]).call(l.dashLine,"",b[h+"width"]):e(a)&&g.call(k.fill,b[h+"color"])})},v.updateDims=function(a,b){var c=this.bounds,d=(b.framewidth||0)/2,e=c[0][0]-d,f=c[0][1]-d,g=c[1][0]-e+d,h=c[1][1]-f+d;l.setRect(this.clipRect,e,f,g,h),this.bgRect.call(l.setRect,e,f,g,h).call(k.fill,b.bgcolor),this.xaxis._offset=e,this.xaxis._length=g,this.yaxis._offset=f,this.yaxis._length=h},v.updateFx=function(a,b){function c(){var a=e.viewInitial,b={};for(var c in a)b[e.id+"."+c]=a[c];i.relayout(f,b),f.emit("plotly_doubleclick",null)}function d(a){return e.projection.invert([a[0]+e.xaxis._offset,a[1]+e.yaxis._offset])}var e=this,f=e.graphDiv,g=e.bgRect,j=a.dragmode;if(!e.isStatic){if("pan"===j)g.node().onmousedown=null,g.call(r(e,b)),g.on("dblclick.zoom",c);else if("select"===j||"lasso"===j){g.on(".zoom",null);var k;"select"===j?k=function(a,b){var c=a.range={};c[e.id]=[d([b.xmin,b.ymin]),d([b.xmax,b.ymax])]}:"lasso"===j&&(k=function(a,b,c){var f=a.lassoPoints={};f[e.id]=c.filtered.map(d)});var l={element:e.bgRect.node(),gd:f,plotinfo:{xaxis:e.xaxis,yaxis:e.yaxis,fillRangeItems:k},xaxes:[e.xaxis],yaxes:[e.yaxis],subplot:e.id,clickFn:function(b){2===b&&a._zoomlayer.selectAll(".select-outline").remove()}};l.prepFn=function(a,b,c){q(a,b,c,l,j)},p.init(l)}g.on("mousemove",function(){var a=e.projection.invert(h.mouse(this));return!a||isNaN(a[0])||isNaN(a[1])?p.unhover(f,h.event):(e.xaxis.p2c=function(){return a[0]},e.yaxis.p2c=function(){return a[1]},void m.hover(f,h.event,e.id))}),g.on("mouseout",function(){p.unhover(f,h.event)}),g.on("click",function(){m.click(f,h.event)})}},v.makeFramework=function(){var a=this,b=a.graphDiv._fullLayout,c="clip"+b._uid+a.id;a.clipDef=b._clips.append("clipPath").attr("id",c),a.clipRect=a.clipDef.append("rect"),a.framework=h.select(a.container).append("g").attr("class","geo "+a.id).call(l.setClipUrl,c),a.project=function(b){var c=a.projection(b);return c?[c[0]-a.xaxis._offset,c[1]-a.yaxis._offset]:[null,null]},a.xaxis={_id:"x",c2p:function(b){return a.project(b)[0]}},a.yaxis={_id:"y",c2p:function(b){return a.project(b)[1]}},a.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(a.mockAxis,b)},v.saveViewInitial=function(a){var b=a.center||{},c=a.projection,d=c.rotation||{};a._isScoped?this.viewInitial={"center.lon":b.lon,"center.lat":b.lat,"projection.scale":c.scale}:a._isClipped?this.viewInitial={"projection.scale":c.scale,"projection.rotation.lon":d.lon,"projection.rotation.lat":d.lat}:this.viewInitial={"center.lon":b.lon,"center.lat":b.lat,"projection.scale":c.scale,"projection.rotation.lon":d.lon}},v.render=function(){function a(a){var b=d(a.lonlat);return b?"translate("+b[0]+","+b[1]+")":null}function b(a){return d.isLonLatOverEdges(a.lonlat)?"none":null}var c,d=this.projection,e=d.getPath();for(c in this.basePaths)this.basePaths[c].attr("d",e);for(c in this.dataPaths)this.dataPaths[c].attr("d",function(a){return e(a.geojson)});for(c in this.dataPoints)this.dataPoints[c].attr("display",b).attr("transform",a)}},{"../../components/color":613,"../../components/dragelement":635,"../../components/drawing":638,"../../components/fx":655,"../../lib":738,"../../lib/topojson_utils":764,"../../plotly":780,"../cartesian/axes":785,"../cartesian/select":802,"../plots":846,"./constants":812,"./projections":818,"./zoom":819,d3:123,"topojson-client":545}],814:[function(a,b,c){"use strict";var d=a("./geo"),e=a("../../plots/get_data").getSubplotCalcData,f=a("../../lib").counterRegex,g="geo";c.name=g,c.attr=g,c.idRoot=g,c.idRegex=c.attrRegex=f(g),c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){var b=a._fullLayout,c=a.calcdata,f=b._subplots[g];void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var h=0;h<f.length;h++){var i=f[h],j=e(c,g,i),k=b[i],l=k._subplot;l||(l=d({id:i,graphDiv:a,container:b._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),b[i]._subplot=l),l.plot(j,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=d._subplots[g]||[],f=0;f<e.length;f++){var h=e[f],i=d[h]._subplot;!b[h]&&i&&(i.framework.remove(),i.clipDef.remove())}},c.updateFx=function(a){for(var b=a._subplots[g],c=0;c<b.length;c++){var d=a[b[c]],e=d._subplot;e.updateFx(a,d)}}},{"../../lib":738,"../../plots/get_data":820,"./geo":813,"./layout/attributes":815,"./layout/defaults":816,"./layout/layout_attributes":817}],815:[function(a,b,c){"use strict";b.exports={geo:{valType:"subplotid",dflt:"geo",editType:"calc"}}},{}],816:[function(a,b,c){"use strict";function d(a,b,c){var d,e=c("resolution"),g=c("scope"),i=f.scopeDefaults[g],j=c("projection.type",i.projType),k=b._isAlbersUsa="albers usa"===j;k&&(g=b.scope="usa");var l=b._isScoped="world"!==g,m=b._isConic=-1!==j.indexOf("conic");b._isClipped=!!f.lonaxisSpan[j];for(var n=0;n<h.length;n++){var o,p=h[n],q=[30,10][n];if(l)o=i[p+"Range"];else{var r=f[p+"Span"],s=(r[j]||r["*"])/2,t=c("projection.rotation."+p.substr(0,3),i.projRotate[n]);o=[t-s,t+s]}var u=c(p+".range",o);c(p+".tick0",u[0]),c(p+".dtick",q),d=c(p+".showgrid"),d&&(c(p+".gridcolor"),c(p+".gridwidth"))}var v=b.lonaxis.range,w=b.lataxis.range,x=v[0],y=v[1];x>0&&0>y&&(y+=360);var z,A=(x+y)/2;if(!k){var B=l?i.projRotate:[A,0,0];z=c("projection.rotation.lon",B[0]),c("projection.rotation.lat",B[1]),c("projection.rotation.roll",B[2]),d=c("showcoastlines",!l),d&&(c("coastlinecolor"),c("coastlinewidth")),d=c("showocean"),d&&c("oceancolor")}var C,D;if(k?(C=-96.6,D=38.7):(C=l?A:z,D=(w[0]+w[1])/2),c("center.lon",C),c("center.lat",D),m){var E=i.projParallels||[0,60];c("projection.parallels",E)}c("projection.scale"),d=c("showland"),d&&c("landcolor"),d=c("showlakes"),d&&c("lakecolor"),d=c("showrivers"),d&&(c("rivercolor"),c("riverwidth")),d=c("showcountries",l&&"usa"!==g),d&&(c("countrycolor"),c("countrywidth")),("usa"===g||"north america"===g&&50===e)&&(c("showsubunits",!0),c("subunitcolor"),c("subunitwidth")),l||(d=c("showframe",!0),d&&(c("framecolor"),c("framewidth"))),c("bgcolor")}var e=a("../../subplot_defaults"),f=a("../constants"),g=a("./layout_attributes"),h=f.axesNames;b.exports=function(a,b,c){e(a,b,c,{type:"geo",attributes:g,handleDefaults:d,partition:"y"})}},{"../../subplot_defaults":853,"../constants":812,"./layout_attributes":817}],817:[function(a,b,c){"use strict";var d=a("../../../components/color/attributes"),e=a("../constants"),f=a("../../../plot_api/edit_types").overrideAll,g={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};b.exports=f({domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(e.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(e.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:e.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:e.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:e.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:e.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:g,lataxis:g},"plot","from-root")},{"../../../components/color/attributes":612,"../../../plot_api/edit_types":769,"../constants":812}],818:[function(a,b,c){"use strict";function d(a){function b(a,b){return{type:"Feature",id:a.id,properties:a.properties,geometry:c(a.geometry,b)}}function c(b,d){if(!b)return null;if("GeometryCollection"===b.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(a){return c(a,d)})};if(!C.hasOwnProperty(b.type))return null;var e=C[b.type];return a.geo.stream(b,d(e)),e.result()}function d(){}function e(a){if((b=a.length)<4)return!1;for(var b,c=0,d=a[b-1][1]*a[0][0]-a[b-1][0]*a[0][1];++c<b;)d+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0>=d}function f(a,b){for(var c=b[0],d=b[1],e=!1,f=0,g=a.length,h=g-1;g>f;h=f++){var i=a[f],j=i[0],k=i[1],l=a[h],m=l[0],n=l[1];k>d^n>d&&(m-j)*(d-k)/(n-k)+j>c&&(e=!e)}return e}function g(a){return a?a/Math.sin(a):1}function h(a){return a>1?G:-1>a?-G:Math.asin(a)}function i(a){return a>1?0:-1>a?F:Math.acos(a)}function j(a,b){var c=(2+G)*Math.sin(b);b/=2;for(var d=0,e=1/0;10>d&&Math.abs(e)>D;d++){var f=Math.cos(b);b-=e=(b+Math.sin(b)*(f+2)-c)/(2*f*(1+f))}return[2/Math.sqrt(F*(4+F))*a*(1+Math.cos(b)),2*Math.sqrt(F/(4+F))*Math.sin(b)]}function k(a,b){function c(c,d){var e=L(c/b,d);return e[0]*=a,e}return arguments.length<2&&(b=a),1===b?L:b===1/0?m:(c.invert=function(c,d){var e=L.invert(c/a,d);return e[0]*=b,e},c)}function l(){var a=2,b=K(k),c=b(a);return c.coefficient=function(c){return arguments.length?b(a=+c):a},c}function m(a,b){return[a*Math.cos(b)/Math.cos(b/=2),2*Math.sin(b)]}function n(a,b){return[3*a/(2*F)*Math.sqrt(F*F/3-b*b),b]}function o(a,b){return[a,1.25*Math.log(Math.tan(F/4+.4*b))]}function p(a){return function(b){var c,d=a*Math.sin(b),e=30;do b-=c=(b+Math.sin(b)-d)/(1+Math.cos(b));while(Math.abs(c)>D&&--e>0);return b/2}}function q(a,b,c){function d(c,d){return[a*c*Math.cos(d=e(d)),b*Math.sin(d)]}var e=p(c);return d.invert=function(d,e){var f=h(e/b);return[d/(a*Math.cos(f)),h((2*f+Math.sin(2*f))/c)]},d}function r(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),b*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}function s(a,b){var c,d=Math.min(18,36*Math.abs(b)/F),e=Math.floor(d),f=d-e,g=(c=N[e])[0],h=c[1],i=(c=N[++e])[0],j=c[1],k=(c=N[Math.min(19,++e)])[0],l=c[1];return[a*(i+f*(k-g)/2+f*f*(k-2*i+g)/2),(b>0?G:-G)*(j+f*(l-h)/2+f*f*(l-2*j+h)/2)]}function t(a,b){return[a*Math.cos(b),b]}function u(a,b){var c=Math.cos(b),d=g(i(c*Math.cos(a/=2)));return[2*c*Math.sin(a)*d,Math.sin(b)*d]}function v(a,b){var c=u(a,b);return[(c[0]+a/G)/2,(c[1]+b)/2]}a.geo.project=function(a,b){var d=b.stream;if(!d)throw new Error("not yet supported");return(a&&w.hasOwnProperty(a.type)?w[a.type]:c)(a,d)};var w={Feature:b,FeatureCollection:function(a,c){return{type:"FeatureCollection",features:a.features.map(function(a){return b(a,c)})}}},x=[],y=[],z={point:function(a,b){x.push([a,b])},result:function(){var a=x.length?x.length<2?{type:"Point",coordinates:x[0]}:{type:"MultiPoint",coordinates:x}:null;return x=[],a}},A={lineStart:d,point:function(a,b){x.push([a,b])},lineEnd:function(){x.length&&(y.push(x),x=[])},result:function(){var a=y.length?y.length<2?{type:"LineString",coordinates:y[0]}:{type:"MultiLineString",coordinates:y}:null;return y=[],a}},B={polygonStart:d,lineStart:d,point:function(a,b){x.push([a,b])},lineEnd:function(){var a=x.length;if(a){do x.push(x[0].slice());while(++a<4);y.push(x),x=[]}},polygonEnd:d,result:function(){if(!y.length)return null;var a=[],b=[];return y.forEach(function(c){e(c)?a.push([c]):b.push(c)}),b.forEach(function(b){var c=b[0];a.some(function(a){return f(a[0],c)?(a.push(b),!0):void 0})||a.push([b])}),y=[],a.length?a.length>1?{type:"MultiPolygon",coordinates:a}:{type:"Polygon",coordinates:a[0]}:null}},C={Point:z,MultiPoint:z,LineString:A,MultiLineString:A,Polygon:B,MultiPolygon:B,Sphere:B},D=1e-6,E=D*D,F=Math.PI,G=F/2,H=(Math.sqrt(F),F/180),I=180/F,J=a.geo.projection,K=a.geo.projectionMutator;a.geo.interrupt=function(b){function c(a,c){for(var d=0>c?-1:1,e=i[+(0>c)],f=0,g=e.length-1;g>f&&a>e[f][2][0];++f);var h=b(a-e[f][1][0],c);return h[0]+=b(e[f][1][0],d*c>d*e[f][0][1]?e[f][0][1]:c)[0],h}function d(){h=i.map(function(a){return a.map(function(a){var c,d=b(a[0][0],a[0][1])[0],e=b(a[2][0],a[2][1])[0],f=b(a[1][0],a[0][1])[1],g=b(a[1][0],a[1][1])[1];return f>g&&(c=f,f=g,g=c),[[d,f],[e,g]]})})}function e(){for(var b=1e-6,c=[],d=0,e=i[0].length;e>d;++d){var g=i[0][d],h=180*g[0][0]/F,j=180*g[0][1]/F,k=180*g[1][1]/F,l=180*g[2][0]/F,m=180*g[2][1]/F;c.push(f([[h+b,j+b],[h+b,k-b],[l-b,k-b],[l-b,m+b]],30))}for(var d=i[1].length-1;d>=0;--d){var g=i[1][d],h=180*g[0][0]/F,j=180*g[0][1]/F,k=180*g[1][1]/F,l=180*g[2][0]/F,m=180*g[2][1]/F;c.push(f([[l-b,m-b],[l-b,k+b],[h+b,k+b],[h+b,j-b]],30))}return{type:"Polygon",coordinates:[a.merge(c)]}}function f(a,b){for(var c,d,e,f=-1,g=a.length,h=a[0],i=[];++f<g;){c=a[f],d=(c[0]-h[0])/b,e=(c[1]-h[1])/b;for(var j=0;b>j;++j)i.push([h[0]+j*d,h[1]+j*e]);h=c}return i.push(c),i}function g(a,b){return Math.abs(a[0]-b[0])<D&&Math.abs(a[1]-b[1])<D}var h,i=[[[[-F,0],[0,G],[F,0]]],[[[-F,0],[0,-G],[F,0]]]];b.invert&&(c.invert=function(a,d){for(var e=h[+(0>d)],f=i[+(0>d)],j=0,k=e.length;k>j;++j){var l=e[j];if(l[0][0]<=a&&a<l[1][0]&&l[0][1]<=d&&d<l[1][1]){var m=b.invert(a-b(f[j][1][0],0)[0],d);
return m[0]+=f[j][1][0],g(c(m[0],m[1]),[a,d])?m:null}}});var j=a.geo.projection(c),k=j.stream;return j.stream=function(b){var c=j.rotate(),d=k(b),f=(j.rotate([0,0]),k(b));return j.rotate(c),d.sphere=function(){a.geo.stream(e(),f)},d},j.lobes=function(a){return arguments.length?(i=a.map(function(a){return a.map(function(a){return[[a[0][0]*F/180,a[0][1]*F/180],[a[1][0]*F/180,a[1][1]*F/180],[a[2][0]*F/180,a[2][1]*F/180]]})}),d(),j):i.map(function(a){return a.map(function(a){return[[180*a[0][0]/F,180*a[0][1]/F],[180*a[1][0]/F,180*a[1][1]/F],[180*a[2][0]/F,180*a[2][1]/F]]})})},j},j.invert=function(a,b){var c=.5*b*Math.sqrt((4+F)/F),d=h(c),e=Math.cos(d);return[a/(2/Math.sqrt(F*(4+F))*(1+e)),h((d+c*(e+2))/(2+G))]},(a.geo.eckert4=function(){return J(j)}).raw=j;var L=a.geo.azimuthalEqualArea.raw;m.invert=function(a,b){var c=2*h(b/2);return[a*Math.cos(c/2)/Math.cos(c),c]},(a.geo.hammer=l).raw=k,n.invert=function(a,b){return[2/3*F*a/Math.sqrt(F*F/3-b*b),b]},(a.geo.kavrayskiy7=function(){return J(n)}).raw=n,o.invert=function(a,b){return[a,2.5*Math.atan(Math.exp(.8*b))-.625*F]},(a.geo.miller=function(){return J(o)}).raw=o;var M=(p(F),q(Math.SQRT2/G,Math.SQRT2,F));(a.geo.mollweide=function(){return J(M)}).raw=M,r.invert=function(a,b){var c,d=b,e=25;do{var f=d*d,g=f*f;d-=c=(d*(1.007226+f*(.015085+g*(-.044475+.028874*f-.005916*g)))-b)/(1.007226+f*(.045255+g*(-0.311325+.259866*f-.005916*11*g)))}while(Math.abs(c)>D&&--e>0);return[a/(.8707+(f=d*d)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),d]},(a.geo.naturalEarth=function(){return J(r)}).raw=r;var N=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];N.forEach(function(a){a[1]*=1.0144}),s.invert=function(a,b){var c=b/G,d=90*c,e=Math.min(18,Math.abs(d/5)),f=Math.max(0,Math.floor(e));do{var g=N[f][1],h=N[f+1][1],i=N[Math.min(19,f+2)][1],j=i-g,k=i-2*h+g,l=2*(Math.abs(c)-h)/j,m=k/j,n=l*(1-m*l*(1-2*m*l));if(n>=0||1===f){d=(b>=0?5:-5)*(n+e);var o,p=50;do e=Math.min(18,Math.abs(d)/5),f=Math.floor(e),n=e-f,g=N[f][1],h=N[f+1][1],i=N[Math.min(19,f+2)][1],d-=(o=(b>=0?G:-G)*(h+n*(i-g)/2+n*n*(i-2*h+g)/2)-b)*I;while(Math.abs(o)>E&&--p>0);break}}while(--f>=0);var q=N[f][0],r=N[f+1][0],s=N[Math.min(19,f+2)][0];return[a/(r+n*(s-q)/2+n*n*(s-2*r+q)/2),d*H]},(a.geo.robinson=function(){return J(s)}).raw=s,t.invert=function(a,b){return[a/Math.cos(b),b]},(a.geo.sinusoidal=function(){return J(t)}).raw=t,u.invert=function(a,b){if(!(a*a+4*b*b>F*F+D)){var c=a,d=b,e=25;do{var f,g=Math.sin(c),h=Math.sin(c/2),j=Math.cos(c/2),k=Math.sin(d),l=Math.cos(d),m=Math.sin(2*d),n=k*k,o=l*l,p=h*h,q=1-o*j*j,r=q?i(l*j)*Math.sqrt(f=1/q):f=0,s=2*r*l*h-a,t=r*k-b,u=f*(o*p+r*l*j*n),v=f*(.5*g*m-2*r*k*h),w=.25*f*(m*h-r*k*o*g),x=f*(n*j+r*p*l),y=v*w-x*u;if(!y)break;var z=(t*v-s*x)/y,A=(s*w-t*u)/y;c-=z,d-=A}while((Math.abs(z)>D||Math.abs(A)>D)&&--e>0);return[c,d]}},(a.geo.aitoff=function(){return J(u)}).raw=u,v.invert=function(a,b){var c=a,d=b,e=25;do{var f,g=Math.cos(d),h=Math.sin(d),j=Math.sin(2*d),k=h*h,l=g*g,m=Math.sin(c),n=Math.cos(c/2),o=Math.sin(c/2),p=o*o,q=1-l*n*n,r=q?i(g*n)*Math.sqrt(f=1/q):f=0,s=.5*(2*r*g*o+c/G)-a,t=.5*(r*h+d)-b,u=.5*f*(l*p+r*g*n*k)+.5/G,v=f*(m*j/4-r*h*o),w=.125*f*(j*o-r*h*l*m),x=.5*f*(k*n+r*p*g)+.5,y=v*w-x*u,z=(t*v-s*x)/y,A=(s*w-t*u)/y;c-=z,d-=A}while((Math.abs(z)>D||Math.abs(A)>D)&&--e>0);return[c,d]},(a.geo.winkel3=function(){return J(v)}).raw=v}b.exports=d},{}],819:[function(a,b,c){"use strict";function d(a,b){var c,d=a.projection;return(c=b._isScoped?g:b._isClipped?i:h)(a,d)}function e(a,b){return w.behavior.zoom().translate(b.translate()).scale(b.scale())}function f(a,b,c){function d(a,b){var c=x.nestedProperty(h,a);c.get()!==b&&(c.set(b),x.nestedProperty(g,a).set(b),i[e+"."+a]=b)}var e=a.id,f=a.graphDiv,g=f.layout[e],h=f._fullLayout[e],i={};c(d),d("projection.scale",b.scale()/a.fitScale),f.emit("plotly_relayout",i)}function g(a,b){function c(){w.select(this).style(A)}function d(){b.scale(w.event.scale).translate(w.event.translate),a.render()}function g(c){var d=b.invert(a.midPt);c("center.lon",d[0]),c("center.lat",d[1])}function h(){w.select(this).style(B),f(a,b,g)}var i=e(a,b);return i.on("zoomstart",c).on("zoom",d).on("zoomend",h),i}function h(a,b){function c(a){return b.invert(a)}function d(a){var d=b(c(a));return Math.abs(d[0]-a[0])>t||Math.abs(d[1]-a[1])>t}function g(){w.select(this).style(A),k=w.mouse(this),l=b.rotate(),m=b.translate(),n=l,o=c(k)}function h(){return p=w.mouse(this),d(k)?(s.scale(b.scale()),void s.translate(b.translate())):(b.scale(w.event.scale),b.translate([m[0],w.event.translate[1]]),o?c(p)&&(r=c(p),q=[n[0]+(r[0]-o[0]),l[1],l[2]],b.rotate(q),n=q):(k=p,o=c(k)),void a.render())}function i(){w.select(this).style(B),f(a,b,j)}function j(c){var d=b.rotate(),e=b.invert(a.midPt);c("projection.rotation.lon",-d[0]),c("center.lon",e[0]),c("center.lat",e[1])}var k,l,m,n,o,p,q,r,s=e(a,b),t=2;return s.on("zoomstart",g).on("zoom",h).on("zoomend",i),s}function i(a,b){function c(a){s++||a({type:"zoomstart"})}function d(a){a({type:"zoom"})}function g(a){--s||a({type:"zoomend"})}function h(a){var c=b.rotate();a("projection.rotation.lon",-c[0]),a("projection.rotation.lat",-c[1])}var i,o={r:b.rotate(),k:b.scale()},p=e(a,b),q=v(p,"zoomstart","zoom","zoomend"),s=0,t=p.on;return p.on("zoomstart",function(){w.select(this).style(A);var a=w.mouse(this),e=b.rotate(),f=e,g=b.translate(),h=k(e);i=j(b,a),t.call(p,"zoom",function(){var c=w.mouse(this);if(b.scale(o.k=w.event.scale),i){if(j(b,c)){b.rotate(e).translate(g);var k=j(b,c),p=m(i,k),s=r(l(h,p)),t=o.r=n(s,i,f);isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])||(t=f),b.rotate(t),f=t}}else a=c,i=j(b,a);d(q.of(this,arguments))}),c(q.of(this,arguments))}).on("zoomend",function(){w.select(this).style(B),t.call(p,"zoom",null),g(q.of(this,arguments)),f(a,b,h)}).on("zoom.redraw",function(){a.render()}),w.rebind(p,q,"on")}function j(a,b){var c=a.invert(b);return c&&isFinite(c[0])&&isFinite(c[1])&&s(c)}function k(a){var b=.5*a[0]*y,c=.5*a[1]*y,d=.5*a[2]*y,e=Math.sin(b),f=Math.cos(b),g=Math.sin(c),h=Math.cos(c),i=Math.sin(d),j=Math.cos(d);return[f*h*j+e*g*i,e*h*j-f*g*i,f*g*j+e*h*i,f*h*i-e*g*j]}function l(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return[c*g-d*h-e*i-f*j,c*h+d*g+e*j-f*i,c*i-d*j+e*g+f*h,c*j+d*i-e*h+f*g]}function m(a,b){if(a&&b){var c=u(a,b),d=Math.sqrt(t(c,c)),e=.5*Math.acos(Math.max(-1,Math.min(1,t(a,b)))),f=Math.sin(e)/d;return d&&[Math.cos(e),c[2]*f,-c[1]*f,c[0]*f]}}function n(a,b,c){var d=q(b,2,a[0]);d=q(d,1,a[1]),d=q(d,0,a[2]-c[2]);var e,f,g=b[0],h=b[1],i=b[2],j=d[0],k=d[1],l=d[2],m=Math.atan2(h,g)*z,n=Math.sqrt(g*g+h*h);Math.abs(k)>n?(f=(k>0?90:-90)-m,e=0):(f=Math.asin(k/n)*z-m,e=Math.sqrt(n*n-k*k));var p=180-f-2*m,r=(Math.atan2(l,j)-Math.atan2(i,e))*z,s=(Math.atan2(l,j)-Math.atan2(i,-e))*z,t=o(c[0],c[1],f,r),u=o(c[0],c[1],p,s);return u>=t?[f,r,c[2]]:[p,s,c[2]]}function o(a,b,c,d){var e=p(c-a),f=p(d-b);return Math.sqrt(e*e+f*f)}function p(a){return(a%360+540)%360-180}function q(a,b,c){var d=c*y,e=a.slice(),f=0===b?1:0,g=2===b?1:2,h=Math.cos(d),i=Math.sin(d);return e[f]=a[f]*h-a[g]*i,e[g]=a[g]*h+a[f]*i,e}function r(a){return[Math.atan2(2*(a[0]*a[1]+a[2]*a[3]),1-2*(a[1]*a[1]+a[2]*a[2]))*z,Math.asin(Math.max(-1,Math.min(1,2*(a[0]*a[2]-a[3]*a[1]))))*z,Math.atan2(2*(a[0]*a[3]+a[1]*a[2]),1-2*(a[2]*a[2]+a[3]*a[3]))*z]}function s(a){var b=a[0]*y,c=a[1]*y,d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function t(a,b){for(var c=0,d=0,e=a.length;e>d;++d)c+=a[d]*b[d];return c}function u(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function v(a){for(var b=0,c=arguments.length,d=[];++b<c;)d.push(arguments[b]);var e=w.dispatch.apply(null,d);return e.of=function(b,c){return function(d){var f;try{f=d.sourceEvent=w.event,d.target=a,w.event=d,e[d.type].apply(b,c)}finally{w.event=f}}},e}var w=a("d3"),x=a("../../lib"),y=Math.PI/180,z=180/Math.PI,A={cursor:"pointer"},B={cursor:"auto"};b.exports=d},{"../../lib":738,d3:123}],820:[function(a,b,c){"use strict";var d=a("../registry"),e=a("./cartesian/constants").SUBPLOT_PATTERN;c.getSubplotCalcData=function(a,b,c){var e=d.subplotsRegistry[b];if(!e)return[];for(var f=e.attr,g=[],h=0;h<a.length;h++){var i=a[h],j=i[0].trace;j[f]===c&&g.push(i)}return g},c.getModuleCalcData=function(a,b){var c=[],e="string"==typeof b?d.getModule(b):b;if(!e)return c;for(var f=0;f<a.length;f++){var g=a[f],h=g[0].trace;h._module===e&&h.visible===!0&&c.push(g)}return c},c.getSubplotData=function(a,b,c){if(!d.subplotsRegistry[b])return[];var f,g,h,i=d.subplotsRegistry[b].attr,j=[];if("gl2d"===b){var k=c.match(e);g="x"+k[1],h="y"+k[2]}for(var l=0;l<a.length;l++)f=a[l],"gl2d"===b&&d.traceIs(f,"gl2d")?f[i[0]]===g&&f[i[1]]===h&&j.push(f):f[i]===c&&j.push(f);return j}},{"../registry":861,"./cartesian/constants":790}],821:[function(a,b,c){"use strict";function d(a,b){this.element=a,this.plot=b,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function e(a){function b(){a.xaxis.autorange=!1,a.yaxis.autorange=!1}function c(){for(var b=a.graphDiv._fullLayout._axisConstraintGroups,c=a.xaxis._id,d=a.yaxis._id,e=0;e<b.length;e++)if(-1!==b[e][c]){if(-1!==b[e][d])return!0;break}return!1}function e(d,e,f){function g(b,c,d){var e=Math.min(c,d),f=Math.max(c,d);e!==f?(m[b]=e,m[b+2]=f,l.dataBox=m,a.setRanges(m)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}var h,j,m=a.calcDataBox(),n=k.viewBox,o=l.lastPos[0],p=l.lastPos[1],q=i.MINDRAG*k.pixelRatio,r=i.MINZOOM*k.pixelRatio;switch(e*=k.pixelRatio,f*=k.pixelRatio,f=n[3]-n[1]-f,a.fullLayout.dragmode){case"zoom":if(d){var s=e/(n[2]-n[0])*(m[2]-m[0])+m[0],t=f/(n[3]-n[1])*(m[3]-m[1])+m[1];l.boxInited||(l.boxStart[0]=s,l.boxStart[1]=t,l.dragStart[0]=e,l.dragStart[1]=f),l.boxEnd[0]=s,l.boxEnd[1]=t,l.boxInited=!0,l.boxEnabled||l.boxStart[0]===l.boxEnd[0]&&l.boxStart[1]===l.boxEnd[1]||(l.boxEnabled=!0);var u=Math.abs(l.dragStart[0]-e)<r,v=Math.abs(l.dragStart[1]-f)<r;if(!c()||u&&v)u&&(l.boxEnd[0]=l.boxStart[0]),v&&(l.boxEnd[1]=l.boxStart[1]);else{h=l.boxEnd[0]-l.boxStart[0],j=l.boxEnd[1]-l.boxStart[1];var w=(m[3]-m[1])/(m[2]-m[0]);Math.abs(h*w)>Math.abs(j)?(l.boxEnd[1]=l.boxStart[1]+Math.abs(h)*w*(j>=0?1:-1),l.boxEnd[1]<m[1]?(l.boxEnd[1]=m[1],l.boxEnd[0]=l.boxStart[0]+(m[1]-l.boxStart[1])/Math.abs(w)):l.boxEnd[1]>m[3]&&(l.boxEnd[1]=m[3],l.boxEnd[0]=l.boxStart[0]+(m[3]-l.boxStart[1])/Math.abs(w))):(l.boxEnd[0]=l.boxStart[0]+Math.abs(j)/w*(h>=0?1:-1),l.boxEnd[0]<m[0]?(l.boxEnd[0]=m[0],l.boxEnd[1]=l.boxStart[1]+(m[0]-l.boxStart[0])*Math.abs(w)):l.boxEnd[0]>m[2]&&(l.boxEnd[0]=m[2],l.boxEnd[1]=l.boxStart[1]+(m[2]-l.boxStart[0])*Math.abs(w)))}}else l.boxEnabled?(h=l.boxStart[0]!==l.boxEnd[0],j=l.boxStart[1]!==l.boxEnd[1],h||j?(h&&(g(0,l.boxStart[0],l.boxEnd[0]),a.xaxis.autorange=!1),j&&(g(1,l.boxStart[1],l.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),l.boxEnabled=!1,l.boxInited=!1):l.boxInited&&(l.boxInited=!1);break;case"pan":l.boxEnabled=!1,l.boxInited=!1,d?(l.panning||(l.dragStart[0]=e,l.dragStart[1]=f),Math.abs(l.dragStart[0]-e)<q&&(e=l.dragStart[0]),Math.abs(l.dragStart[1]-f)<q&&(f=l.dragStart[1]),h=(o-e)*(m[2]-m[0])/(k.viewBox[2]-k.viewBox[0]),j=(p-f)*(m[3]-m[1])/(k.viewBox[3]-k.viewBox[1]),m[0]+=h,m[2]+=h,m[1]+=j,m[3]+=j,a.setRanges(m),l.panning=!0,l.lastInputTime=Date.now(),b(),a.cameraChanged(),a.handleAnnotations()):l.panning&&(l.panning=!1,a.relayoutCallback())}l.lastPos[0]=e,l.lastPos[1]=f}var j=a.mouseContainer,k=a.glplot,l=new d(j,k);return l.mouseListener=f(j,e),j.addEventListener("touchstart",function(a){var b=h(a.changedTouches[0],j);e(0,b[0],b[1]),e(1,b[0],b[1])}),j.addEventListener("touchmove",function(a){a.preventDefault();var b=h(a.changedTouches[0],j);e(1,b[0],b[1])}),j.addEventListener("touchend",function(){e(0,l.lastPos[0],l.lastPos[1])}),l.wheelListener=g(j,function(c,d){if(!a.scrollZoom)return!1;var e=a.calcDataBox(),f=k.viewBox,g=l.lastPos[0],h=l.lastPos[1],i=Math.exp(5*d/(f[3]-f[1])),j=g/(f[2]-f[0])*(e[2]-e[0])+e[0],m=h/(f[3]-f[1])*(e[3]-e[1])+e[1];return e[0]=(e[0]-j)*i+j,e[2]=(e[2]-j)*i+j,e[1]=(e[1]-m)*i+m,e[3]=(e[3]-m)*i+m,a.setRanges(e),l.lastInputTime=Date.now(),b(),a.cameraChanged(),a.handleAnnotations(),a.relayoutCallback(),!0}),l}var f=a("mouse-change"),g=a("mouse-wheel"),h=a("mouse-event-offset"),i=a("../cartesian/constants");b.exports=e},{"../cartesian/constants":790,"mouse-change":453,"mouse-event-offset":454,"mouse-wheel":456}],822:[function(a,b,c){"use strict";function d(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=!1,this.backgroundColor=[0,0,0,0],this["static"]=this.scene.staticPlot}function e(a){return new d(a)}var f=a("../cartesian/axes"),g=a("../../lib/html2unicode"),h=a("../../lib/str2rgbarray"),i=d.prototype,j=["xaxis","yaxis"];i.merge=function(a){this.titleEnable=!1,this.backgroundColor=h(a.plot_bgcolor);var b,c,d,e,f,i,k,l,m,n,o;for(n=0;2>n;++n){b=j[n];var p=b.charAt(0);for(c=a[this.scene[b]._name],d=c.title===this.scene.fullLayout._dfltTitle[p]?"":c.title,o=0;2>=o;o+=2)this.labelEnable[n+o]=!1,this.labels[n+o]=g(d),this.labelColor[n+o]=h(c.titlefont.color),this.labelFont[n+o]=c.titlefont.family,this.labelSize[n+o]=c.titlefont.size,this.labelPad[n+o]=this.getLabelPad(b,c),this.tickEnable[n+o]=!1,this.tickColor[n+o]=h((c.tickfont||{}).color),this.tickAngle[n+o]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[n+o]=this.getTickPad(c),this.tickMarkLength[n+o]=0,this.tickMarkWidth[n+o]=c.tickwidth||0,this.tickMarkColor[n+o]=h(c.tickcolor),this.borderLineEnable[n+o]=!1,this.borderLineColor[n+o]=h(c.linecolor),this.borderLineWidth[n+o]=c.linewidth||0;k=this.hasSharedAxis(c),f=this.hasAxisInDfltPos(b,c)&&!k,i=this.hasAxisInAltrPos(b,c)&&!k,e=c.mirror||!1,l=k?-1!==String(e).indexOf("all"):!!e,m=k?"allticks"===e:-1!==String(e).indexOf("ticks"),f?this.labelEnable[n]=!0:i&&(this.labelEnable[n+2]=!0),f?this.tickEnable[n]=c.showticklabels:i&&(this.tickEnable[n+2]=c.showticklabels),(f||l)&&(this.borderLineEnable[n]=c.showline),(i||l)&&(this.borderLineEnable[n+2]=c.showline),(f||m)&&(this.tickMarkLength[n]=this.getTickMarkLength(c)),(i||m)&&(this.tickMarkLength[n+2]=this.getTickMarkLength(c)),this.gridLineEnable[n]=c.showgrid,this.gridLineColor[n]=h(c.gridcolor),this.gridLineWidth[n]=c.gridwidth,this.zeroLineEnable[n]=c.zeroline,this.zeroLineColor[n]=h(c.zerolinecolor),this.zeroLineWidth[n]=c.zerolinewidth}},i.hasSharedAxis=function(a){var b=this.scene,c=b.fullLayout._subplots.gl2d,d=f.findSubplotsWithAxis(c,a);return 0!==d.indexOf(b.id)},i.hasAxisInDfltPos=function(a,b){var c=b.side;return"xaxis"===a?"bottom"===c:"yaxis"===a?"left"===c:void 0},i.hasAxisInAltrPos=function(a,b){var c=b.side;return"xaxis"===a?"top"===c:"yaxis"===a?"right"===c:void 0},i.getLabelPad=function(a,b){var c=1.5,d=b.titlefont.size,e=b.showticklabels;return"xaxis"===a?"top"===b.side?-10+d*(c+(e?1:0)):-10+d*(c+(e?.5:0)):"yaxis"===a?"right"===b.side?10+d*(c+(e?1:.5)):10+d*(c+(e?.5:0)):void 0},i.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15},i.getTickMarkLength=function(a){if(!a.ticks)return 0;var b=a.ticklen;return"inside"===a.ticks?-b:b},b.exports=e},{"../../lib/html2unicode":736,"../../lib/str2rgbarray":760,"../cartesian/axes":785}],823:[function(a,b,c){"use strict";var d=a("../../plot_api/edit_types").overrideAll,e=a("./scene2d"),f=a("../layout_attributes"),g=a("../../constants/xmlns_namespaces"),h=a("../cartesian/constants"),i=a("../cartesian"),j=a("../../components/fx/layout_attributes"),k=a("../get_data").getSubplotData;c.name="gl2d",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.idRegex=h.idRegex,c.attrRegex=h.attrRegex,c.attributes=a("../cartesian/attributes"),c.supplyLayoutDefaults=function(a,b,c){b._has("cartesian")||i.supplyLayoutDefaults(a,b,c)},c.layoutAttrOverrides=d(i.layoutAttributes,"plot","from-root"),c.baseLayoutAttrOverrides=d({plot_bgcolor:f.plot_bgcolor,hoverlabel:j.hoverlabel},"plot","nested"),c.plot=function(a){for(var b=a._fullLayout,c=a._fullData,d=b._subplots.gl2d,f=0;f<d.length;f++){var g=d[f],h=b._plots[g],i=k(c,"gl2d",g),j=h._scene2d;void 0===j&&(j=new e({id:g,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),h._scene2d=j),j.plot(i,a.calcdata,b,a.layout)}},c.clean=function(a,b,c,d){for(var e=d._subplots.gl2d||[],f=0;f<e.length;f++){var g=e[f],h=d._plots[g];if(h._scene2d){var j=k(a,"gl2d",g);0===j.length&&(h._scene2d.destroy(),delete d._plots[g])}}i.clean.apply(this,arguments)},c.drawFramework=function(a){a._context.staticPlot||i.drawFramework(a)},c.toSVG=function(a){for(var b=a._fullLayout,c=b._subplots.gl2d,d=0;d<c.length;d++){var e=b._plots[c[d]],f=e._scene2d,h=f.toImage("png"),i=b._glimages.append("svg:image");i.attr({xmlns:g.svg,"xlink:href":h,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),f.destroy()}},c.updateFx=function(a){for(var b=a._subplots.gl2d,c=0;c<b.length;c++){var d=a._plots[b[c]]._scene2d;d.updateFx(a.dragmode)}}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":719,"../../plot_api/edit_types":769,"../cartesian":796,"../cartesian/attributes":784,"../cartesian/constants":790,"../get_data":820,"../layout_attributes":837,"./scene2d":824}],824:[function(a,b,c){"use strict";function d(a,b){this.container=a.container,this.graphDiv=a.graphDiv,this.pixelRatio=a.plotGlPixelRatio||window.devicePixelRatio,this.id=a.id,this.staticPlot=!!a.staticPlot,this.scrollZoom=this.graphDiv._context.scrollZoom,this.fullData=null,this.updateRefs(b),this.makeFramework(),this.glplotOptions=o(this),this.glplotOptions.merge(b),this.glplot=k(this.glplotOptions),this.camera=p(this),this.traces={},this.spikes=l(this.glplot),this.selectBox=m(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function e(a,b){for(var c=0;2>c;++c){var d=a[c],e=b[c];if(d.length!==e.length)return!0;for(var f=0;f<d.length;++f)if(d[f].x!==e[f].x)return!0}return!1}var f,g,h=a("../../registry"),i=a("../../plots/cartesian/axes"),j=a("../../components/fx"),k=a("gl-plot2d"),l=a("gl-spikes2d"),m=a("gl-select-box"),n=a("webgl-context"),o=a("./convert"),p=a("./camera"),q=a("../../lib/html2unicode"),r=a("../../lib/show_no_webgl_msg"),s=a("../cartesian/constraints"),t=s.enforce,u=s.clean,v=["xaxis","yaxis"],w=a("../cartesian/constants").SUBPLOT_PATTERN;b.exports=d;var x=d.prototype;x.makeFramework=function(){if(this.staticPlot){if(!g&&(f=document.createElement("canvas"),g=n({canvas:f,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!g))throw new Error("Error creating static canvas/context for image server");this.canvas=f,this.gl=g}else{var a=this.container.querySelector(".gl-canvas-focus"),b=n({canvas:a,preserveDrawingBuffer:!0,premultipliedAlpha:!0});b||r(this),this.canvas=a,this.gl=b}var c=this.canvas;c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style["pointer-events"]="none",this.updateSize(c),c.className+=" user-select-none";var d=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");d.style.position="absolute",d.style.top=d.style.left="0px",d.style.width=d.style.height="100%",d.style["z-index"]=20,d.style["pointer-events"]="none";var e=this.mouseContainer=document.createElement("div");e.style.position="absolute",e.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var h=this.container;h.appendChild(d),h.appendChild(e);var i=this;e.addEventListener("mouseout",function(){i.isMouseOver=!1,i.unhover()}),e.addEventListener("mouseover",function(){i.isMouseOver=!0})},x.toImage=function(a){a||(a="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(f),this.updateSize(this.canvas);var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.clearColor(1,1,1,0),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var g=0,h=d-1;h>g;++g,--h)for(var i=0;c>i;++i)for(var j=0;4>j;++j){var k=e[4*(c*g+i)+j];e[4*(c*g+i)+j]=e[4*(c*h+i)+j],e[4*(c*h+i)+j]=k}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(f),o},x.updateSize=function(a){a||(a=this.canvas);var b=this.pixelRatio,c=this.fullLayout,d=c.width,e=c.height,f=0|Math.ceil(b*d),g=0|Math.ceil(b*e);return(a.width!==f||a.height!==g)&&(a.width=f,a.height=g),this.redraw&&this.redraw(),a},x.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var a=[i.calcTicks(this.xaxis),i.calcTicks(this.yaxis)],b=0;2>b;++b)for(var c=0;c<a[b].length;++c)a[b][c].text=q(a[b][c].text+"");return a},x.updateRefs=function(a){this.fullLayout=a;var b=this.id.match(w),c="xaxis"+b[1],d="yaxis"+b[2];this.xaxis=this.fullLayout[c],this.yaxis=this.fullLayout[d]},x.relayoutCallback=function(){var a=this.graphDiv,b=this.xaxis,c=this.yaxis,d=a.layout;d.xaxis.autorange=b.autorange,d.xaxis.range=b.range.slice(0),d.yaxis.autorange=c.autorange,d.yaxis.range=c.range.slice(0);var e={lastInputTime:this.camera.lastInputTime};e[b._name]=b.range.slice(0),e[c._name]=c.range.slice(0),a.emit("plotly_relayout",e)},x.cameraChanged=function(){var a=this.camera;this.glplot.setDataBox(this.calcDataBox());var b=this.computeTickMarks(),c=this.glplotOptions.ticks;e(b,c)&&(this.glplotOptions.ticks=b,this.glplotOptions.dataBox=a.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},x.handleAnnotations=function(){for(var a=this.graphDiv,b=this.fullLayout.annotations,c=0;c<b.length;c++){var d=b[c];d.xref===this.xaxis._id&&d.yref===this.yaxis._id&&h.getComponentMethod("annotations","drawOne")(a,c)}},x.destroy=function(){if(this.glplot){var a=this.traces;a&&Object.keys(a).map(function(b){a[b].dispose(),delete a[b]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},x.plot=function(a,b,c){var d=this.glplot;this.updateRefs(c),this.updateTraces(a,b),this.updateFx(c.dragmode);var e=c.width,f=c.height;this.updateSize(this.canvas);var g=this.glplotOptions;g.merge(c),g.screenBox=[0,0,e,f];var h={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};u(h,this.xaxis),u(h,this.yaxis);var j=c._size,k=this.xaxis.domain,l=this.yaxis.domain;g.viewBox=[j.l+k[0]*j.w,j.b+l[0]*j.h,e-j.r-(1-k[1])*j.w,f-j.t-(1-l[1])*j.h],this.mouseContainer.style.width=j.w*(k[1]-k[0])+"px",this.mouseContainer.style.height=j.h*(l[1]-l[0])+"px",this.mouseContainer.height=j.h*(l[1]-l[0]),this.mouseContainer.style.left=j.l+k[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-l[1])*j.h+"px";var m=this.bounds;m[0]=m[1]=1/0,m[2]=m[3]=-(1/0);var n,o,p=Object.keys(this.traces);for(o=0;o<p.length;++o)for(var q=this.traces[p[o]],r=0;2>r;++r)m[r]=Math.min(m[r],q.bounds[r]),m[r+2]=Math.max(m[r+2],q.bounds[r+2]);for(o=0;2>o;++o)m[o]>m[o+2]&&(m[o]=-1,m[o+2]=1),n=this[v[o]],n._length=g.viewBox[o+2]-g.viewBox[o],i.doAutoRange(n),n.setScale();t(h),g.ticks=this.computeTickMarks(),g.dataBox=this.calcDataBox(),g.merge(c),d.update(g),this.glplot.draw()},x.calcDataBox=function(){var a=this.xaxis,b=this.yaxis,c=a.range,d=b.range,e=a.r2l,f=b.r2l;return[e(c[0]),f(d[0]),e(c[1]),f(d[1])]},x.setRanges=function(a){var b=this.xaxis,c=this.yaxis,d=b.l2r,e=c.l2r;b.range=[d(a[0]),d(a[2])],c.range=[e(a[1]),e(a[3])]},x.updateTraces=function(a,b){var c,d,e,f=Object.keys(this.traces);this.fullData=a;a:for(c=0;c<f.length;c++){var g=f[c],h=this.traces[g];for(d=0;d<a.length;d++)if(e=a[d],e.uid===g&&e.type===h.type)continue a;h.dispose(),delete this.traces[g]}for(c=0;c<a.length;c++){e=a[c];var i=b[c],j=this.traces[e.uid];j?j.update(e,i):(j=e._module.plot(this,e,i),this.traces[e.uid]=j)}this.glplot.objects.sort(function(a,b){return a._trace.index-b._trace.index})},x.updateFx=function(a){"lasso"===a||"select"===a?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),"pan"===a?this.mouseContainer.style.cursor="move":"zoom"===a?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},x.emitPointAction=function(a,b){for(var c,d=a.trace.uid,e=a.pointIndex,f=0;f<this.fullData.length;f++)this.fullData[f].uid===d&&(c=this.fullData[f]);var g={x:a.traceCoord[0],y:a.traceCoord[1],curveNumber:c.index,pointNumber:e,data:c._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};j.appendArrayPointValue(g,c,e),this.graphDiv.emit(b,{points:[g]})},x.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var a=this.glplot,b=this.camera,c=b.mouseListener,d=1===this.lastButtonState&&0===c.buttons,e=this.fullLayout;this.lastButtonState=c.buttons,this.cameraChanged();var f,g=c.x*a.pixelRatio,h=this.canvas.height-a.pixelRatio*c.y;if(b.boxEnabled&&"zoom"===e.dragmode){this.selectBox.enabled=!0;for(var i=this.selectBox.selectBox=[Math.min(b.boxStart[0],b.boxEnd[0]),Math.min(b.boxStart[1],b.boxEnd[1]),Math.max(b.boxStart[0],b.boxEnd[0]),Math.max(b.boxStart[1],b.boxEnd[1])],k=0;2>k;k++)b.boxStart[k]===b.boxEnd[k]&&(i[k]=a.dataBox[k],i[k+2]=a.dataBox[k+2]);a.setDirty()}else if(!b.panning&&this.isMouseOver){this.selectBox.enabled=!1;var l=e._size,m=this.xaxis.domain,n=this.yaxis.domain;f=a.pick(g/a.pixelRatio+l.l+m[0]*l.w,h/a.pixelRatio-(l.t+(1-n[1])*l.h));var o=f&&f.object._trace.handlePick(f);if(o&&d&&this.emitPointAction(o,"plotly_click"),f&&"skip"!==f.object._trace.hoverinfo&&e.hovermode&&o&&(!this.lastPickResult||this.lastPickResult.traceUid!==o.trace.uid||this.lastPickResult.dataCoord[0]!==o.dataCoord[0]||this.lastPickResult.dataCoord[1]!==o.dataCoord[1])){var p=o;this.lastPickResult={traceUid:o.trace?o.trace.uid:null,dataCoord:o.dataCoord.slice()},this.spikes.update({center:f.dataCoord}),p.screenCoord=[((a.viewBox[2]-a.viewBox[0])*(f.dataCoord[0]-a.dataBox[0])/(a.dataBox[2]-a.dataBox[0])+a.viewBox[0])/a.pixelRatio,(this.canvas.height-(a.viewBox[3]-a.viewBox[1])*(f.dataCoord[1]-a.dataBox[1])/(a.dataBox[3]-a.dataBox[1])-a.viewBox[1])/a.pixelRatio],this.emitPointAction(o,"plotly_hover");var q=this.fullData[p.trace.index]||{},r=p.pointIndex,s=j.castHoverinfo(q,e,r);if(s&&"all"!==s){var t=s.split("+");-1===t.indexOf("x")&&(p.traceCoord[0]=void 0),-1===t.indexOf("y")&&(p.traceCoord[1]=void 0),-1===t.indexOf("z")&&(p.traceCoord[2]=void 0),-1===t.indexOf("text")&&(p.textLabel=void 0),-1===t.indexOf("name")&&(p.name=void 0)}j.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:j.castHoverOption(q,r,"bgcolor")||p.color,borderColor:j.castHoverOption(q,r,"bordercolor"),fontFamily:j.castHoverOption(q,r,"font.family"),fontSize:j.castHoverOption(q,r,"font.size"),fontColor:j.castHoverOption(q,r,"font.color")},{container:this.svgContainer,gd:this.graphDiv})}}f||this.unhover(),a.draw()}},x.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),j.loneUnhover(this.svgContainer))},x.hoverFormatter=function(a,b){if(void 0===b)return void 0;var c=this[a];return i.tickText(c,c.c2l(b),"hover").text}},{"../../components/fx":655,"../../lib/html2unicode":736,"../../lib/show_no_webgl_msg":758,"../../plots/cartesian/axes":785,"../../registry":861,"../cartesian/constants":790,"../cartesian/constraints":792,"./camera":821,"./convert":822,"gl-plot2d":220,"gl-select-box":254,"gl-spikes2d":263,"webgl-context":572}],825:[function(a,b,c){"use strict";function d(a,b){function c(b,c,d,f){var g=o.keyBindingMode;if(g!==!1){var h="rotate"===g,i="pan"===g,k="zoom"===g,m=!!f.control,n=!!f.alt,s=!!f.shift,t=!!(1&b),u=!!(2&b),v=!!(4&b),w=1/a.clientHeight,x=w*(c-p),y=w*(d-q),z=o.flipX?1:-1,A=o.flipY?1:-1,B=e(),C=Math.PI*o.rotateSpeed;if((h&&t&&!m&&!n&&!s||t&&!m&&!n&&s)&&j.rotate(B,z*C*x,-A*C*y,0),(i&&t&&!m&&!n&&!s||u||t&&m&&!n&&!s)&&j.pan(B,-o.translateSpeed*x*l,o.translateSpeed*y*l,0),k&&t&&!m&&!n&&!s||v||t&&!m&&n&&!s){var D=-o.zoomSpeed*y/window.innerHeight*(B-j.lastT())*100;j.pan(B,0,0,l*(Math.exp(D)-1))}return p=c,q=d,r=f,!0}}a=a||document.body,b=b||{};var d=[.01,1/0];"distanceLimits"in b&&(d[0]=b.distanceLimits[0],d[1]=b.distanceLimits[1]),"zoomMin"in b&&(d[0]=b.zoomMin),"zoomMax"in b&&(d[1]=b.zoomMax);var j=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:d}),k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,m=a.clientWidth,n=a.clientHeight,o={keyBindingMode:"rotate",view:j,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:j.modes,tick:function(){var b=e(),c=this.delay,d=b-2*c;j.idle(b-c),j.recalcMatrix(d),j.flush(b-(100+2*c));for(var f=!0,g=j.computedMatrix,h=0;16>h;++h)f=f&&k[h]===g[h],k[h]=g[h];var i=a.clientWidth===m&&a.clientHeight===n;return m=a.clientWidth,n=a.clientHeight,f?!i:(l=Math.exp(j.computedRadius[0]),!0)},lookAt:function(a,b,c){j.lookAt(j.lastT(),a,b,c)},rotate:function(a,b,c){j.rotate(j.lastT(),a,b,c)},pan:function(a,b,c){j.pan(j.lastT(),a,b,c)},translate:function(a,b,c){j.translate(j.lastT(),a,b,c)}};Object.defineProperties(o,{matrix:{get:function(){return j.computedMatrix},set:function(a){return j.setMatrix(j.lastT(),a),j.computedMatrix},enumerable:!0},mode:{get:function(){return j.getMode()},set:function(a){var b=j.computedUp.slice(),c=j.computedEye.slice(),d=j.computedCenter.slice();if(j.setMode(a),"turntable"===a){var f=e();j._active.lookAt(f,c,d,b),j._active.lookAt(f+500,c,d,[0,0,1]),j._active.flush(f)}return j.getMode()},enumerable:!0},center:{get:function(){return j.computedCenter},set:function(a){return j.lookAt(j.lastT(),null,a),j.computedCenter},enumerable:!0},eye:{get:function(){return j.computedEye},set:function(a){return j.lookAt(j.lastT(),a),j.computedEye},enumerable:!0},up:{get:function(){return j.computedUp},set:function(a){return j.lookAt(j.lastT(),null,null,a),j.computedUp},enumerable:!0},distance:{
get:function(){return l},set:function(a){return j.setDistance(j.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return j.getDistanceLimits(d)},set:function(a){return j.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var p=0,q=0,r={shift:!1,control:!1,alt:!1,meta:!1};return o.mouseListener=g(a,c),a.addEventListener("touchstart",function(b){var d=i(b.changedTouches[0],a);c(0,d[0],d[1],r),c(1,d[0],d[1],r)}),a.addEventListener("touchmove",function(b){var d=i(b.changedTouches[0],a);c(1,d[0],d[1],r)}),a.addEventListener("touchend",function(){c(0,p,q,r)}),o.wheelListener=h(a,function(a,b){if(o.keyBindingMode!==!1){var c=o.flipX?1:-1,d=o.flipY?1:-1,f=e();if(Math.abs(a)>Math.abs(b))j.rotate(f,0,0,-a*c*Math.PI*o.rotateSpeed/window.innerWidth);else{var g=-o.zoomSpeed*d*b/window.innerHeight*(f-j.lastT())/20;j.pan(f,0,0,l*(Math.exp(g)-1))}}},!0),o}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel"),i=a("mouse-event-offset")},{"3d-view":38,"mouse-change":453,"mouse-event-offset":454,"mouse-wheel":456,"right-now":511}],826:[function(a,b,c){"use strict";var d=a("../../plot_api/edit_types").overrideAll,e=a("../../components/fx/layout_attributes"),f=a("./scene"),g=a("../get_data").getSubplotData,h=a("../../lib"),i=a("../../constants/xmlns_namespaces"),j="gl3d",k="scene";c.name=j,c.attr=k,c.idRoot=k,c.idRegex=c.attrRegex=h.counterRegex("scene"),c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.baseLayoutAttrOverrides=d({hoverlabel:e.hoverlabel},"plot","nested"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){for(var b=a._fullLayout,c=a._fullData,d=b._subplots[j],e=0;e<d.length;e++){var i=d[e],k=g(c,j,i),l=b[i],m=l._scene;m||(m=new f({id:i,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),l._scene=m),m.cameraInitial||(m.cameraInitial=h.extendDeep({},l.camera)),m.plot(k,b,a.layout)}},c.clean=function(a,b,c,d){for(var e=d._subplots[j]||[],f=0;f<e.length;f++){var g=e[f];!b[g]&&d[g]._scene&&(d[g]._scene.destroy(),d._infolayer&&d._infolayer.selectAll(".annotation-"+g).remove())}},c.toSVG=function(a){for(var b=a._fullLayout,c=b._subplots[j],d=b._size,e=0;e<c.length;e++){var f=b[c[e]],g=f.domain,h=f._scene,k=h.toImage("png"),l=b._glimages.append("svg:image");l.attr({xmlns:i.svg,"xlink:href":k,x:d.l+d.w*g.x[0],y:d.t+d.h*(1-g.y[1]),width:d.w*(g.x[1]-g.x[0]),height:d.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),h.destroy()}},c.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var b=a.substr(5);return"1"===b&&(b=""),k+b}},c.updateFx=function(a){for(var b=a._subplots[j],c=0;c<b.length;c++){var d=a[b[c]]._scene;d.updateFx(a.dragmode,a.hovermode)}}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":719,"../../lib":738,"../../plot_api/edit_types":769,"../get_data":820,"./layout/attributes":827,"./layout/defaults":831,"./layout/layout_attributes":832,"./scene":836}],827:[function(a,b,c){"use strict";b.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],828:[function(a,b,c){"use strict";var d=a("../../../components/color"),e=a("../../cartesian/layout_attributes"),f=a("../../../lib/extend").extendFlat,g=a("../../../plot_api/edit_types").overrideAll;b.exports=g({visible:e.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:d.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:e.color,categoryorder:e.categoryorder,categoryarray:e.categoryarray,title:e.title,titlefont:e.titlefont,type:e.type,autorange:e.autorange,rangemode:e.rangemode,range:e.range,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,mirror:e.mirror,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,tickfont:e.tickfont,tickangle:e.tickangle,tickprefix:e.tickprefix,showtickprefix:e.showtickprefix,ticksuffix:e.ticksuffix,showticksuffix:e.showticksuffix,showexponent:e.showexponent,exponentformat:e.exponentformat,separatethousands:e.separatethousands,tickformat:e.tickformat,tickformatstops:e.tickformatstops,hoverformat:e.hoverformat,showline:e.showline,linecolor:e.linecolor,linewidth:e.linewidth,showgrid:e.showgrid,gridcolor:f({},e.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:e.gridwidth,zeroline:e.zeroline,zerolinecolor:e.zerolinecolor,zerolinewidth:e.zerolinewidth},"plot","from-root")},{"../../../components/color":613,"../../../lib/extend":727,"../../../plot_api/edit_types":769,"../../cartesian/layout_attributes":797}],829:[function(a,b,c){"use strict";var d=a("tinycolor2").mix,e=a("../../../lib"),f=a("./axis_attributes"),g=a("../../cartesian/type_defaults"),h=a("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"],j=13600/187;b.exports=function(a,b,c){function k(a,b){return e.coerce(l,m,f,a,b)}for(var l,m,n=0;n<i.length;n++){var o=i[n];l=a[o]||{},m=b[o]={_id:o[0]+c.scene,_name:o},g(l,m,k,c.data),h(l,m,k,{font:c.font,letter:o[0],data:c.data,showGrid:!0,bgColor:c.bgColor,calendar:c.calendar},c.fullLayout),k("gridcolor",d(m.color,c.bgColor,j).toRgbString()),k("title",o[0]),m.setScale=e.noop,k("showspikes")&&(k("spikesides"),k("spikethickness"),k("spikecolor",m.color)),k("showaxeslabels"),k("showbackground")&&k("backgroundcolor")}}},{"../../../lib":738,"../../cartesian/axis_defaults":787,"../../cartesian/type_defaults":808,"./axis_attributes":828,tinycolor2:543}],830:[function(a,b,c){"use strict";function d(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}function e(a){var b=new d;return b.merge(a),b}var f=a("../../../lib/html2unicode"),g=a("../../../lib/str2rgbarray"),h=["xaxis","yaxis","zaxis"],i=d.prototype;i.merge=function(a){for(var b=this,c=0;3>c;++c){var d=a[h[c]];d.visible?(b.labels[c]=f(d.title),"titlefont"in d&&(d.titlefont.color&&(b.labelColor[c]=g(d.titlefont.color)),d.titlefont.family&&(b.labelFont[c]=d.titlefont.family),d.titlefont.size&&(b.labelSize[c]=d.titlefont.size)),"showline"in d&&(b.lineEnable[c]=d.showline),"linecolor"in d&&(b.lineColor[c]=g(d.linecolor)),"linewidth"in d&&(b.lineWidth[c]=d.linewidth),"showgrid"in d&&(b.gridEnable[c]=d.showgrid),"gridcolor"in d&&(b.gridColor[c]=g(d.gridcolor)),"gridwidth"in d&&(b.gridWidth[c]=d.gridwidth),"log"===d.type?b.zeroEnable[c]=!1:"zeroline"in d&&(b.zeroEnable[c]=d.zeroline),"zerolinecolor"in d&&(b.zeroLineColor[c]=g(d.zerolinecolor)),"zerolinewidth"in d&&(b.zeroLineWidth[c]=d.zerolinewidth),"ticks"in d&&d.ticks?b.lineTickEnable[c]=!0:b.lineTickEnable[c]=!1,"ticklen"in d&&(b.lineTickLength[c]=b._defaultLineTickLength[c]=d.ticklen),"tickcolor"in d&&(b.lineTickColor[c]=g(d.tickcolor)),"tickwidth"in d&&(b.lineTickWidth[c]=d.tickwidth),"tickangle"in d&&(b.tickAngle[c]="auto"===d.tickangle?0:Math.PI*-d.tickangle/180),"showticklabels"in d&&(b.tickEnable[c]=d.showticklabels),"tickfont"in d&&(d.tickfont.color&&(b.tickColor[c]=g(d.tickfont.color)),d.tickfont.family&&(b.tickFont[c]=d.tickfont.family),d.tickfont.size&&(b.tickSize[c]=d.tickfont.size)),"mirror"in d?-1!==["ticks","all","allticks"].indexOf(d.mirror)?(b.lineTickMirror[c]=!0,b.lineMirror[c]=!0):d.mirror===!0?(b.lineTickMirror[c]=!1,b.lineMirror[c]=!0):(b.lineTickMirror[c]=!1,b.lineMirror[c]=!1):b.lineMirror[c]=!1,"showbackground"in d&&d.showbackground!==!1?(b.backgroundEnable[c]=!0,b.backgroundColor[c]=g(d.backgroundcolor)):b.backgroundEnable[c]=!1):(b.tickEnable[c]=!1,b.labelEnable[c]=!1,b.lineEnable[c]=!1,b.lineTickEnable[c]=!1,b.gridEnable[c]=!1,b.zeroEnable[c]=!1,b.backgroundEnable[c]=!1)}},b.exports=e},{"../../../lib/html2unicode":736,"../../../lib/str2rgbarray":760}],831:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=c("bgcolor"),h=f.combine(e,d.paper_bgcolor),j=["up","center","eye"],k=0;k<j.length;k++)c("camera."+j[k]+".x"),c("camera."+j[k]+".y"),c("camera."+j[k]+".z");var l=!!c("aspectratio.x")&&!!c("aspectratio.y")&&!!c("aspectratio.z"),m=l?"manual":"auto",n=c("aspectmode",m);l||(a.aspectratio=b.aspectratio={x:1,y:1,z:1},"manual"===n&&(b.aspectmode="auto"),a.aspectmode=b.aspectmode),i(a,b,{font:d.font,scene:d.id,data:d.fullData,bgColor:h,calendar:d.calendar,fullLayout:d.fullLayout}),g.getComponentMethod("annotations3d","handleDefaults")(a,b,d),c("dragmode",d.getDfltFromLayout("dragmode")),c("hovermode",d.getDfltFromLayout("hovermode"))}var e=a("../../../lib"),f=a("../../../components/color"),g=a("../../../registry"),h=a("../../subplot_defaults"),i=a("./axis_defaults"),j=a("./layout_attributes");b.exports=function(a,b,c){function f(b){if(!g){var c=e.validate(a[b],j[b]);return c?a[b]:void 0}}var g=b._basePlotModules.length>1;h(a,b,c,{type:"gl3d",attributes:j,handleDefaults:d,fullLayout:b,font:b.font,fullData:c,getDfltFromLayout:f,paper_bgcolor:b.paper_bgcolor,calendar:b.calendar})}},{"../../../components/color":613,"../../../lib":738,"../../../registry":861,"../../subplot_defaults":853,"./axis_defaults":829,"./layout_attributes":832}],832:[function(a,b,c){"use strict";function d(a,b,c){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:b,editType:"camera"},z:{valType:"number",dflt:c,editType:"camera"},editType:"camera"}}var e=a("./axis_attributes"),f=a("../../../lib/extend").extendFlat,g=a("../../../lib").counterRegex;b.exports={_arrayAttrRegexps:[g("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:f(d(0,0,1),{}),center:f(d(0,0,0),{}),eye:f(d(1.25,1.25,1.25),{}),editType:"camera"},domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},y:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},editType:"plot"},aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:e,yaxis:e,zaxis:e,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],dflt:"turntable",editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":738,"../../../lib/extend":727,"./axis_attributes":828}],833:[function(a,b,c){"use strict";function d(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function e(a){var b=new d;return b.merge(a),b}var f=a("../../../lib/str2rgbarray"),g=["xaxis","yaxis","zaxis"],h=d.prototype;h.merge=function(a){for(var b=0;3>b;++b){var c=a[g[b]];c.visible?(this.enabled[b]=c.showspikes,this.colors[b]=f(c.spikecolor),this.drawSides[b]=c.spikesides,this.lineWidth[b]=c.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},b.exports=e},{"../../../lib/str2rgbarray":760}],834:[function(a,b,c){"use strict";function d(a){for(var b=new Array(3),c=0;3>c;++c){for(var d=a[c],e=new Array(d.length),f=0;f<d.length;++f)e[f]=d[f].x;b[c]=e}return b}function e(a){for(var b=a.axesOptions,c=a.glplot.axesPixels,e=a.fullSceneLayout,k=[[],[],[]],l=0;3>l;++l){var m=e[i[l]];if(m._length=(c[l].hi-c[l].lo)*c[l].pixelsPerDataUnit/a.dataScale[l],Math.abs(m._length)===1/0)k[l]=[];else{m.range[0]=c[l].lo/a.dataScale[l],m.range[1]=c[l].hi/a.dataScale[l],m._m=1/(a.dataScale[l]*c[l].pixelsPerDataUnit),m.range[0]===m.range[1]&&(m.range[0]-=1,m.range[1]+=1);var n=m.tickmode;if("auto"===m.tickmode){m.tickmode="linear";var o=m.nticks||g.constrain(m._length/40,4,9);f.autoTicks(m,Math.abs(m.range[1]-m.range[0])/o)}for(var p=f.calcTicks(m),q=0;q<p.length;++q)p[q].x=p[q].x*a.dataScale[l],p[q].text=h(p[q].text);k[l]=p,m.tickmode=n}}b.ticks=k;for(var l=0;3>l;++l){j[l]=.5*(a.glplot.bounds[0][l]+a.glplot.bounds[1][l]);for(var q=0;2>q;++q)b.bounds[q][l]=a.glplot.bounds[q][l]}a.contourLevels=d(k)}b.exports=e;var f=a("../../cartesian/axes"),g=a("../../../lib"),h=a("../../../lib/html2unicode"),i=["xaxis","yaxis","zaxis"],j=[0,0,0]},{"../../../lib":738,"../../../lib/html2unicode":736,"../../cartesian/axes":785}],835:[function(a,b,c){"use strict";function d(a,b){var c,d,e=[0,0,0,0];for(c=0;4>c;++c)for(d=0;4>d;++d)e[d]+=a[4*c+d]*b[c];return e}function e(a,b){var c=d(a.projection,d(a.view,d(a.model,[b[0],b[1],b[2],1])));return c}b.exports=e},{}],836:[function(a,b,c){"use strict";function d(a){function b(b,c){var d=a.fullSceneLayout[b];return q.tickText(d,d.d2l(c),"hover").text}var c,d=a.svgContainer,e=a.container.getBoundingClientRect(),f=e.width,g=e.height;d.setAttributeNS(null,"viewBox","0 0 "+f+" "+g),d.setAttributeNS(null,"width",f),d.setAttributeNS(null,"height",g),y(a),a.glplot.axes.update(a.axesOptions);for(var h=Object.keys(a.traces),i=null,j=a.glplot.selection,k=0;k<h.length;++k)c=a.traces[h[k]],"skip"!==c.data.hoverinfo&&c.handlePick(j)&&(i=c),c.setContourLevels&&c.setContourLevels();var l;if(null!==i){var m=v(a.glplot.cameraParams,j.dataCoordinate);c=i.data;var n=j.index,o=r.castHoverinfo(c,a.fullLayout,n),p=b("xaxis",j.traceCoordinate[0]),s=b("yaxis",j.traceCoordinate[1]),t=b("zaxis",j.traceCoordinate[2]);if("all"!==o){var u=o.split("+");-1===u.indexOf("x")&&(p=void 0),-1===u.indexOf("y")&&(s=void 0),-1===u.indexOf("z")&&(t=void 0),-1===u.indexOf("text")&&(j.textLabel=void 0),-1===u.indexOf("name")&&(i.name=void 0)}a.fullSceneLayout.hovermode&&r.loneHover({x:(.5+.5*m[0]/m[3])*f,y:(.5-.5*m[1]/m[3])*g,xLabel:p,yLabel:s,zLabel:t,text:j.textLabel,name:i.name,color:r.castHoverOption(c,n,"bgcolor")||i.color,borderColor:r.castHoverOption(c,n,"bordercolor"),fontFamily:r.castHoverOption(c,n,"font.family"),fontSize:r.castHoverOption(c,n,"font.size"),fontColor:r.castHoverOption(c,n,"font.color")},{container:d,gd:a.graphDiv});var w={x:j.traceCoordinate[0],y:j.traceCoordinate[1],z:j.traceCoordinate[2],data:c._input,fullData:c,curveNumber:c.index,pointNumber:n};r.appendArrayPointValue(w,c,n);var x={points:[w]};j.buttons&&j.distance<5?a.graphDiv.emit("plotly_click",x):a.graphDiv.emit("plotly_hover",x),l=x}else r.loneUnhover(d),a.graphDiv.emit("plotly_unhover",l);a.drawAnnotations(a)}function e(a,b,c,e){var f={canvas:c,gl:e,container:a.container,axes:a.axesOptions,spikes:a.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(a.staticMode){if(!l&&(k=document.createElement("canvas"),l=n({canvas:k,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");f.pixelRatio=a.pixelRatio,f.gl=l,f.canvas=k}try{a.glplot=m(f)}catch(g){t(a)}var h=function(a){if(a.fullSceneLayout.dragmode!==!1){var b={};b[a.id+".camera"]=j(a.camera),a.saveCamera(a.graphDiv.layout),a.graphDiv.emit("plotly_relayout",b)}};if(a.glplot.canvas.addEventListener("mouseup",h.bind(null,a)),a.glplot.canvas.addEventListener("wheel",h.bind(null,a)),a.staticMode||a.glplot.canvas.addEventListener("webglcontextlost",function(a){p.warn("Lost WebGL context."),a.preventDefault()}),!a.camera){var i=a.fullSceneLayout.camera;a.camera=u(a.container,{center:[i.center.x,i.center.y,i.center.z],eye:[i.eye.x,i.eye.y,i.eye.z],up:[i.up.x,i.up.y,i.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return a.glplot.camera=a.camera,a.glplot.oncontextloss=function(){a.recoverContext()},a.glplot.onrender=d.bind(null,a),a.traces={},!0}function f(a,b){var c=document.createElement("div"),d=a.container;this.graphDiv=a.graphDiv;var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute",f.style.top=f.style.left="0px",f.style.width=f.style.height="100%",f.style["z-index"]=20,f.style["pointer-events"]="none",c.appendChild(f),this.svgContainer=f,c.id=a.id,c.style.position="absolute",c.style.top=c.style.left="0px",c.style.width=c.style.height="100%",d.appendChild(c),this.fullLayout=b,this.id=a.id||"scene",this.fullSceneLayout=b[this.id],this.plotArgs=[[],{},{}],this.axesOptions=w(b[this.id]),this.spikeOptions=x(b[this.id]),this.container=c,this.staticMode=!!a.staticPlot,this.pixelRatio=a.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),!e(this,b)}function g(a,b,c,d,e){for(var f,g=0;g<b.length;++g)if(Array.isArray(b[g]))for(var h=0;h<b[g].length;++h)f=a.d2l(b[g][h],0,e),!isNaN(f)&&isFinite(f)&&(d[0][c]=Math.min(d[0][c],f),d[1][c]=Math.max(d[1][c],f));else f=a.d2l(b[g],0,e),!isNaN(f)&&isFinite(f)&&(d[0][c]=Math.min(d[0][c],f),d[1][c]=Math.max(d[1][c],f))}function h(a,b,c){var d=a.fullSceneLayout;g(d.xaxis,b.x,0,c,b.xcalendar),g(d.yaxis,b.y,1,c,b.ycalendar),g(d.zaxis,b.z,2,c,b.zcalendar)}function i(a){return[[a.eye.x,a.eye.y,a.eye.z],[a.center.x,a.center.y,a.center.z],[a.up.x,a.up.y,a.up.z]]}function j(a){return{up:{x:a.up[0],y:a.up[1],z:a.up[2]},center:{x:a.center[0],y:a.center[1],z:a.center[2]},eye:{x:a.eye[0],y:a.eye[1],z:a.eye[2]}}}var k,l,m=a("gl-plot3d"),n=a("webgl-context"),o=a("../../registry"),p=a("../../lib"),q=a("../../plots/cartesian/axes"),r=a("../../components/fx"),s=a("../../lib/str2rgbarray"),t=a("../../lib/show_no_webgl_msg"),u=a("./camera"),v=a("./project"),w=a("./layout/convert"),x=a("./layout/spikes"),y=a("./layout/tick_marks"),z=f.prototype;z.recoverContext=function(){function a(){return c.isContextLost()?void requestAnimationFrame(a):e(b,b.fullLayout,d,c)?void b.plot.apply(b,b.plotArgs):void p.error("Catastrophic and unrecoverable WebGL error. Context lost.")}var b=this,c=this.glplot.gl,d=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(a)};var A=["xaxis","yaxis","zaxis"];z.plot=function(a,b,c){if(this.plotArgs=[a,b,c],!this.glplot.contextLost){var d,e,f,g,i,j,k=b[this.id],l=c[this.id];k.bgcolor?this.glplot.clearColor=s(k.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullLayout=b,this.fullSceneLayout=k,this.glplotLayout=k,this.axesOptions.merge(k),this.spikeOptions.merge(k),this.setCamera(k.camera),this.updateFx(k.dragmode,k.hovermode),this.glplot.update({}),this.setConvert(i),a?Array.isArray(a)||(a=[a]):a=[];var m=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(f=0;f<a.length;++f)d=a[f],d.visible===!0&&h(this,d,m);var n=[1,1,1];for(g=0;3>g;++g)m[0][g]>m[1][g]?n[g]=1:m[1][g]===m[0][g]?n[g]=1:n[g]=1/(m[1][g]-m[0][g]);for(this.dataScale=n,this.convertAnnotations(this),f=0;f<a.length;++f)d=a[f],d.visible===!0&&(e=this.traces[d.uid],e?e.update(d):(e=d._module.plot(this,d),this.traces[d.uid]=e),e.name=d.name);var o=Object.keys(this.traces);a:for(f=0;f<o.length;++f){for(g=0;g<a.length;++g)if(a[g].uid===o[f]&&a[g].visible===!0)continue a;e=this.traces[o[f]],e.dispose(),delete this.traces[o[f]]}this.glplot.objects.sort(function(a,b){return a._trace.data.index-b._trace.data.index});var p=[[0,0,0],[0,0,0]],q=[],r={};for(f=0;3>f;++f){if(i=k[A[f]],j=i.type,j in r?(r[j].acc*=n[f],r[j].count+=1):r[j]={acc:n[f],count:1},i.autorange){p[0][f]=1/0,p[1][f]=-(1/0);var t=this.glplot.objects,u=this.fullSceneLayout.annotations||[],v=i._name.charAt(0);for(g=0;g<t.length;g++){var w=t[g].bounds;p[0][f]=Math.min(p[0][f],w[0][f]/n[f]),p[1][f]=Math.max(p[1][f],w[1][f]/n[f])}for(g=0;g<u.length;g++){var x=u[g];if(x.visible){var y=i.r2l(x[v]);p[0][f]=Math.min(p[0][f],y),p[1][f]=Math.max(p[1][f],y)}}if("rangemode"in i&&"tozero"===i.rangemode&&(p[0][f]=Math.min(p[0][f],0),p[1][f]=Math.max(p[1][f],0)),p[0][f]>p[1][f])p[0][f]=-1,p[1][f]=1;else{var z=p[1][f]-p[0][f];p[0][f]-=z/32,p[1][f]+=z/32}}else{var B=i.range;p[0][f]=i.r2l(B[0]),p[1][f]=i.r2l(B[1])}p[0][f]===p[1][f]&&(p[0][f]-=1,p[1][f]+=1),q[f]=p[1][f]-p[0][f],this.glplot.bounds[0][f]=p[0][f]*n[f],this.glplot.bounds[1][f]=p[1][f]*n[f]}var C=[1,1,1];for(f=0;3>f;++f){i=k[A[f]],j=i.type;var D=r[j];C[f]=Math.pow(D.acc,1/D.count)/n[f]}var E,F=4;if("auto"===k.aspectmode)E=Math.max.apply(null,C)/Math.min.apply(null,C)<=F?C:[1,1,1];else if("cube"===k.aspectmode)E=[1,1,1];else if("data"===k.aspectmode)E=C;else{if("manual"!==k.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var G=k.aspectratio;E=[G.x,G.y,G.z]}k.aspectratio.x=l.aspectratio.x=E[0],k.aspectratio.y=l.aspectratio.y=E[1],k.aspectratio.z=l.aspectratio.z=E[2],this.glplot.aspect=E;var H=k.domain||null,I=b._size||null;if(H&&I){var J=this.container.style;J.position="absolute",J.left=I.l+H.x[0]*I.w+"px",J.top=I.t+(1-H.y[1])*I.h+"px",J.width=I.w*(H.x[1]-H.x[0])+"px",J.height=I.h*(H.y[1]-H.y[0])+"px"}this.glplot.redraw()}},z.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=this.glplot.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},z.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),j(this.glplot.camera)},z.setCamera=function(a){this.glplot.camera.lookAt.apply(this,i(a))},z.saveCamera=function(a){function b(a,b,c,d){var e=["up","center","eye"],f=["x","y","z"];return b[e[c]]&&a[e[c]][f[d]]===b[e[c]][f[d]]}var c=this.getCamera(),d=p.nestedProperty(a,this.id+".camera"),e=d.get(),f=!1;if(void 0===e)f=!0;else for(var g=0;3>g;g++)for(var h=0;3>h;h++)if(!b(c,e,g,h)){f=!0;break}return f&&d.set(c),f},z.updateFx=function(a,b){var c=this.camera;c&&("orbit"===a?(c.mode="orbit",c.keyBindingMode="rotate"):"turntable"===a?(c.up=[0,0,1],c.mode="turntable",c.keyBindingMode="rotate"):c.keyBindingMode=a),this.fullSceneLayout.hovermode=b},z.toImage=function(a){a||(a="png"),this.staticMode&&this.container.appendChild(k),this.glplot.redraw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var f=0,g=d-1;g>f;++f,--g)for(var h=0;c>h;++h)for(var i=0;4>i;++i){var j=e[4*(c*f+h)+i];e[4*(c*f+h)+i]=e[4*(c*g+h)+i],e[4*(c*g+h)+i]=j}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(k),o},z.setConvert=function(){for(var a=0;3>a;a++){var b=this.fullSceneLayout[A[a]];q.setConvert(b,this.fullLayout),b.setScale=p.noop}},b.exports=f},{"../../components/fx":655,"../../lib":738,"../../lib/show_no_webgl_msg":758,"../../lib/str2rgbarray":760,"../../plots/cartesian/axes":785,"../../registry":861,"./camera":825,"./layout/convert":830,"./layout/spikes":833,"./layout/tick_marks":834,"./project":835,"gl-plot3d":222,"webgl-context":572}],837:[function(a,b,c){"use strict";var d=a("./font_attributes"),e=a("../components/color/attributes"),f=d({editType:"calc"});f.family.dflt='"Open Sans", verdana, arial, sans-serif',f.size.dflt=12,f.color.dflt=e.defaultLine,b.exports={font:f,title:{valType:"string",editType:"layoutstyle"},titlefont:d({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"none"},height:{valType:"number",min:10,dflt:450,editType:"none"},margin:{l:{valType:"number",min:0,dflt:80,editType:"calc"},r:{valType:"number",min:0,dflt:80,editType:"calc"},t:{valType:"number",min:0,dflt:100,editType:"calc"},b:{valType:"number",min:0,dflt:80,editType:"calc"},pad:{valType:"number",min:0,dflt:0,editType:"calc"},autoexpand:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},paper_bgcolor:{valType:"color",dflt:e.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:e.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:e.defaults,editType:"calc"}}},{"../components/color/attributes":612,"./font_attributes":810}],838:[function(a,b,c){"use strict";b.exports={styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),mapOnErrorMsg:"Mapbox error."}},{}],839:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){var c=a.split(" "),e=c[0],f=c[1],g=Array.isArray(b)?d.mean(b):b,h=.5+g/100,i=1.5+g/100,j=["",""],k=[0,0];switch(e){case"top":j[0]="top",k[1]=-i;break;case"bottom":j[0]="bottom",k[1]=i}switch(f){case"left":j[1]="right",k[0]=-h;break;case"right":j[1]="left",k[0]=h}var l;return l=j[0]&&j[1]?j.join("-"):j[0]?j[0]:j[1]?j[1]:"center",{anchor:l,offset:k}}},{"../../lib":738}],840:[function(a,b,c){"use strict";function d(a,b){var c=a._fullLayout,d=a._context;if(""===d.mapboxAccessToken)return"";for(var e=d.mapboxAccessToken,f=0;f<b.length;f++){var g=c[b[f]];if(g.accesstoken){e=g.accesstoken;break}}if(!e)throw new Error(j.noAccessTokenErrorMsg);return e}var e=a("mapbox-gl"),f=a("../../lib"),g=a("../../plots/get_data").getSubplotCalcData,h=a("../../constants/xmlns_namespaces"),i=a("./mapbox"),j=a("./constants"),k="mapbox";c.name=k,c.attr="subplot",c.idRoot=k,c.idRegex=c.attrRegex=f.counterRegex(k),c.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},c.layoutAttributes=a("./layout_attributes"),c.supplyLayoutDefaults=a("./layout_defaults"),c.plot=function(a){var b=a._fullLayout,c=a.calcdata,h=b._subplots[k],j=d(a,h);e.accessToken=j;for(var l=0;l<h.length;l++){var m=h[l],n=g(c,k,m),o=b[m],p=o._subplot;o.accesstoken=j,p||(p=i({gd:a,container:b._glcontainer.node(),id:m,fullLayout:b,staticPlot:a._context.staticPlot}),b[m]._subplot=p),p.viewInitial||(p.viewInitial={center:f.extendFlat({},o.center),zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}),p.plot(n,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=d._subplots[k]||[],f=0;f<e.length;f++){var g=e[f];!b[g]&&d[g]._subplot&&d[g]._subplot.destroy()}},c.toSVG=function(a){for(var b=a._fullLayout,c=b._subplots[k],d=b._size,e=0;e<c.length;e++){var f=b[c[e]],g=f.domain,i=f._subplot,j=i.toImage("png"),l=b._glimages.append("svg:image");l.attr({xmlns:h.svg,"xlink:href":j,x:d.l+d.w*g.x[0],y:d.t+d.h*(1-g.y[1]),width:d.w*(g.x[1]-g.x[0]),height:d.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),i.destroy()}},c.updateFx=function(a){for(var b=a._subplots[k],c=0;c<b.length;c++){var d=a[b[c]]._subplot;d.updateFx(a)}}},{"../../constants/xmlns_namespaces":719,"../../lib":738,"../../plots/get_data":820,"./constants":838,"./layout_attributes":842,"./layout_defaults":843,"./mapbox":844,"mapbox-gl":344}],841:[function(a,b,c){"use strict";function d(a,b){this.mapbox=a,this.map=a.map,this.uid=a.uid+"-layer"+b,this.idSource=this.uid+"-source",this.idLayer=this.uid+"-layer",this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}function e(a){var b=a.source;return h.isPlainObject(b)||"string"==typeof b&&b.length>0}function f(a){var b={},c={};switch(a.type){case"circle":h.extendFlat(c,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case"line":h.extendFlat(c,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity});break;case"fill":h.extendFlat(c,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case"symbol":var d=a.symbol,e=i(d.textposition,d.iconsize);h.extendFlat(b,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":e.anchor,"text-offset":e.offset}),h.extendFlat(c,{"icon-color":a.color,"text-color":d.textfont.color,"text-opacity":a.opacity})}return{layout:b,paint:c}}function g(a){var b,c=a.sourcetype,d=a.source,e={type:c},f="string"==typeof d;return"geojson"===c?b="data":"vector"===c&&(b=f?"url":"tiles"),e[b]=d,e}var h=a("../../lib"),i=a("./convert_text_opts"),j=d.prototype;j.update=function(a){this.visible?this.needsNewSource(a)?(this.updateLayer(a),this.updateSource(a)):this.needsNewLayer(a)&&this.updateLayer(a):(this.updateSource(a),this.updateLayer(a)),this.updateStyle(a),this.visible=e(a)},j.needsNewSource=function(a){return this.sourceType!==a.sourcetype||this.source!==a.source||this.layerType!==a.type},j.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==a.below},j.updateSource=function(a){var b=this.map;if(b.getSource(this.idSource)&&b.removeSource(this.idSource),this.sourceType=a.sourcetype,this.source=a.source,e(a)){var c=g(a);b.addSource(this.idSource,c)}},j.updateLayer=function(a){var b=this.map;if(b.getLayer(this.idLayer)&&b.removeLayer(this.idLayer),this.layerType=a.type,e(a)){b.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type},a.below);var c={visibility:"visible"};this.mapbox.setOptions(this.idLayer,"setLayoutProperty",c)}},j.updateStyle=function(a){var b=f(a);e(a)&&(this.mapbox.setOptions(this.idLayer,"setLayoutProperty",b.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",b.paint))},j.dispose=function(){var a=this.map;a.removeLayer(this.idLayer),a.removeSource(this.idSource)},b.exports=function(a,b,c){var e=new d(a,b);return e.update(c),e}},{"../../lib":738,"./convert_text_opts":839}],842:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color").defaultLine,f=a("../font_attributes"),g=a("../../traces/scatter/attributes").textposition,h=a("../../plot_api/edit_types").overrideAll,i=f({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",b.exports=h({_arrayAttrRegexps:[d.counterRegex("mapbox",".layers",!0)],domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],dflt:"basic"},center:{lon:{valType:"number",dflt:0},
lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:{_isLinkedToArray:"layer",sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:e},opacity:{valType:"number",min:0,max:1,dflt:1},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2}},fill:{outlinecolor:{valType:"color",dflt:e}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},textfont:i,textposition:d.extendFlat({},g,{arrayOk:!1})}}},"plot","from-root")},{"../../components/color":613,"../../lib":738,"../../plot_api/edit_types":769,"../../traces/scatter/attributes":1054,"../font_attributes":810}],843:[function(a,b,c){"use strict";function d(a,b,c){c("accesstoken"),c("style"),c("center.lon"),c("center.lat"),c("zoom"),c("bearing"),c("pitch"),e(a,b),b._input=a}function e(a,b){function c(a,b){return f.coerce(d,e,h.layers,a,b)}for(var d,e,g=a.layers||[],i=b.layers=[],j=0;j<g.length;j++)if(d=g[j],e={},f.isPlainObject(d)){var k=c("sourcetype");c("source"),"vector"===k&&c("sourcelayer");var l=c("type");c("below"),c("color"),c("opacity"),"circle"===l&&c("circle.radius"),"line"===l&&c("line.width"),"fill"===l&&c("fill.outlinecolor"),"symbol"===l&&(c("symbol.icon"),c("symbol.iconsize"),c("symbol.text"),f.coerceFont(c,"symbol.textfont"),c("symbol.textposition")),e._index=j,i.push(e)}}var f=a("../../lib"),g=a("../subplot_defaults"),h=a("./layout_attributes");b.exports=function(a,b,c){g(a,b,c,{type:"mapbox",attributes:h,handleDefaults:d,partition:"y"})}},{"../../lib":738,"../subplot_defaults":853,"./layout_attributes":842}],844:[function(a,b,c){"use strict";function d(a){this.id=a.id,this.gd=a.gd,this.container=a.container,this.isStatic=a.staticPlot;var b=a.fullLayout;this.uid=b._uid+"-"+this.id,this.opts=b[this.id],this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(b),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[]}function e(a){var b=n.style.values,c=n.style.dflt,d={};return j.isPlainObject(a)?(d.id=a.id,d.style=a):"string"==typeof a?(d.id=a,d.style=-1!==b.indexOf(a)?f(a):a):(d.id=c,d.style=f(c)),d}function f(a){return m.styleUrlPrefix+a+"-"+m.styleUrlSuffix}function g(a){return[a.lon,a.lat]}var h=a("mapbox-gl"),i=a("../../components/fx"),j=a("../../lib"),k=a("../../components/dragelement"),l=a("../cartesian/select"),m=a("./constants"),n=a("./layout_attributes"),o=a("./layers"),p=d.prototype;b.exports=function(a){var b=new d(a);return b},p.plot=function(a,b,c){var d=this,e=d.opts=b[this.id];d.map&&e.accesstoken!==d.accessToken&&(d.map.remove(),d.map=null,d.styleObj=null,d.traceHash=[],d.layerList={});var f;f=d.map?new Promise(function(c,e){d.updateMap(a,b,c,e)}):new Promise(function(c,e){d.createMap(a,b,c,e)}),c.push(f)},p.createMap=function(a,b,c,d){function f(){i.loneUnhover(b._toppaper)}var k=this,l=k.gd,n=k.opts,o=k.styleObj=e(n.style);k.accessToken=n.accesstoken;var p=k.map=new h.Map({container:k.div,style:o.style,center:g(n.center),zoom:n.zoom,bearing:n.bearing,pitch:n.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1}),q=m.controlContainerClassName,r=k.div.getElementsByClassName(q)[0];k.div.removeChild(r),p._canvas.canvas.style.left="0px",p._canvas.canvas.style.top="0px",k.rejectOnError(d),p.once("load",function(){k.updateData(a),k.updateLayout(b),k.resolveOnRender(c)}),k.isStatic||(p.on("moveend",function(a){if(k.map){var b=k.getView();if(n._input.center=n.center=b.center,n._input.zoom=n.zoom=b.zoom,n._input.bearing=n.bearing=b.bearing,n._input.pitch=n.pitch=b.pitch,a.originalEvent){var c={};c[k.id]=j.extendFlat({},b),l.emit("plotly_relayout",c)}}}),p.on("mousemove",function(a){var b=k.div.getBoundingClientRect();a.clientX=a.point.x+b.left,a.clientY=a.point.y+b.top,a.target.getBoundingClientRect=function(){return b},k.xaxis.p2c=function(){return a.lngLat.lng},k.yaxis.p2c=function(){return a.lngLat.lat},i.hover(l,a,k.id)}),p.on("click",function(a){i.click(l,a.originalEvent)}),p.on("dragstart",f),p.on("zoomstart",f),p.on("dblclick",function(){var a=k.viewInitial;p.setCenter(g(a.center)),p.setZoom(a.zoom),p.setBearing(a.bearing),p.setPitch(a.pitch);var b=k.getView();n._input.center=n.center=b.center,n._input.zoom=n.zoom=b.zoom,n._input.bearing=n.bearing=b.bearing,n._input.pitch=n.pitch=b.pitch,l.emit("plotly_doubleclick",null)}))},p.updateMap=function(a,b,c,d){var f=this,g=f.map;f.rejectOnError(d);var h=e(f.opts.style);f.styleObj.id!==h.id?(f.styleObj=h,g.setStyle(h.style),g.style.once("load",function(){f.traceHash={},f.updateData(a),f.updateLayout(b),f.resolveOnRender(c)})):(f.updateData(a),f.updateLayout(b),f.resolveOnRender(c))},p.updateData=function(a){var b,c,d,e,f=this.traceHash;for(d=0;d<a.length;d++){var g=a[d];c=g[0].trace,b=f[c.uid],b?b.update(g):c._module&&(f[c.uid]=c._module.plot(this,g))}var h=Object.keys(f);a:for(d=0;d<h.length;d++){var i=h[d];for(e=0;e<a.length;e++)if(c=a[e][0].trace,i===c.uid)continue a;b=f[i],b.dispose(),delete f[i]}},p.updateLayout=function(a){var b=this.map,c=this.opts;b.setCenter(g(c.center)),b.setZoom(c.zoom),b.setBearing(c.bearing),b.setPitch(c.pitch),this.updateLayers(),this.updateFramework(a),this.updateFx(a),this.map.resize()},p.resolveOnRender=function(a){var b=this.map;b.on("render",function c(){b.loaded()&&(b.off("render",c),a())})},p.rejectOnError=function(a){function b(){a(new Error(m.mapOnErrorMsg))}var c=this.map;c.once("error",b),c.once("style.error",b),c.once("source.error",b),c.once("tile.error",b),c.once("layer.error",b)},p.createFramework=function(a){var b=this,c=b.div=document.createElement("div");c.id=b.uid,c.style.position="absolute",b.container.appendChild(c),b.xaxis={_id:"x",c2p:function(a){return b.project(a).x}},b.yaxis={_id:"y",c2p:function(a){return b.project(a).y}},b.updateFramework(a)},p.updateFx=function(a){function b(a){var b=c.map.unproject(a);return[b.lng,b.lat]}var c=this,d=c.map,e=c.gd;if(!c.isStatic){var f,g=a.dragmode;if(f="select"===g?function(a,d){var e=a.range={};e[c.id]=[b([d.xmin,d.ymin]),b([d.xmax,d.ymax])]}:function(a,d,e){var f=a.lassoPoints={};f[c.id]=e.filtered.map(b)},"select"===g||"lasso"===g){d.dragPan.disable();var h={element:c.div,gd:e,plotinfo:{xaxis:c.xaxis,yaxis:c.yaxis,fillRangeItems:f},xaxes:[c.xaxis],yaxes:[c.yaxis],subplot:c.id};h.prepFn=function(a,b,c){l(a,b,c,h,g)},k.init(h)}else d.dragPan.enable(),c.div.onmousedown=null}},p.updateFramework=function(a){var b=a[this.id].domain,c=a._size,d=this.div.style;d.width=c.w*(b.x[1]-b.x[0])+"px",d.height=c.h*(b.y[1]-b.y[0])+"px",d.left=c.l+b.x[0]*c.w+"px",d.top=c.t+(1-b.y[1])*c.h+"px",this.xaxis._offset=c.l+b.x[0]*c.w,this.xaxis._length=c.w*(b.x[1]-b.x[0]),this.yaxis._offset=c.t+(1-b.y[1])*c.h,this.yaxis._length=c.h*(b.y[1]-b.y[0])},p.updateLayers=function(){var a,b=this.opts,c=b.layers,d=this.layerList;if(c.length!==d.length){for(a=0;a<d.length;a++)d[a].dispose();for(d=this.layerList=[],a=0;a<c.length;a++)d.push(o(this,a,c[a]))}else for(a=0;a<c.length;a++)d[a].update(c[a])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},p.toImage=function(){return this.map.getCanvas().toDataURL()},p.initSource=function(a){var b={type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[]}}};return this.map.addSource(a,b)},p.setSourceData=function(a,b){this.map.getSource(a).setData(b)},p.setOptions=function(a,b,c){for(var d=this.map,e=Object.keys(c),f=0;f<e.length;f++){var g=e[f];d[b](a,g,c[g])}},p.project=function(a){return this.map.project(new h.LngLat(a[0],a[1]))},p.getView=function(){var a=this.map,b=a.getCenter(),c={lon:b.lng,lat:b.lat};return{center:c,zoom:a.getZoom(),bearing:a.getBearing(),pitch:a.getPitch()}}},{"../../components/dragelement":635,"../../components/fx":655,"../../lib":738,"../cartesian/select":802,"./constants":838,"./layers":841,"./layout_attributes":842,"mapbox-gl":344}],845:[function(a,b,c){"use strict";b.exports={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"}},{}],846:[function(a,b,c){"use strict";function d(a,b){b.text("");var c=b.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(a._context.linkText+" "+String.fromCharCode(187));if(a._context.sendData)c.on("click",function(){v.sendDataToCloud(a)});else{var d=window.location.pathname.split("/"),e=window.location.search;c.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+d[2].split(".")[0]+"/"+d[1]+e})}}function e(){var a,b,c={};if(!C){C=[];var d=p.subplotsRegistry;for(var e in d){var f=d[e],g=f.attr;if(g&&(C.push(e),Array.isArray(g)))for(b=0;b<g.length;b++)r.pushUnique(C,g[b])}}for(a=0;a<C.length;a++)c[C[a]]=[];return c}function f(a,b){var c,d,e=a.trace,f=e._arrayAttrs,g={};for(c=0;c<f.length;c++)d=f[c],g[d]=r.nestedProperty(e,d).get().slice();for(a.trace=b,c=0;c<f.length;c++)d=f[c],r.nestedProperty(a.trace,d).set(g[d])}function g(a){function b(a){for(var b=!0,c=0;c<D.length;c++){var f=D[c];e[f]||(a[f]?e[f]=a[f]:b=!1)}b&&(d=!0)}for(var c=a._context.locale,d=!1,e={},f=0;2>f;f++){for(var g=a._context.locales,h=0;2>h;h++){var i=(g[c]||{}).format;if(i&&(b(i),d))break;g=p.localeRegistry}var j=c.split("-")[0];if(d||j===c)break;c=j}return d||b(p.localeRegistry.en.format),e}function h(a,b){return a.decimal=b.charAt(0),a.thousands=b.charAt(1),l.locale(a)}function i(a,b,c,d){for(var e=a.transforms,f=[a],g=0;g<e.length;g++){var h=e[g],i=z[h.type];i&&i.transform&&(f=i.transform(f,{transform:h,fullTrace:a,fullData:b,layout:c,fullLayout:d,transformIndex:g}))}return f}function j(a){var b,c={left:0,right:0,bottom:0,top:0};if(a)for(b in a)a.hasOwnProperty(b)&&(c.left+=a[b].left||0,c.right+=a[b].right||0,c.bottom+=a[b].bottom||0,c.top+=a[b].top||0);return c}function k(a){for(var b=0;b<a.length;b++){a[b]._categories=a[b]._initialCategories.slice(),a[b]._categoriesMap={};for(var c=0;c<a[b]._categories.length;c++)a[b]._categoriesMap[a[b]._categories[c]]=c}}var l=a("d3"),m=a("fast-isnumeric"),n=a("../plotly"),o=a("../plot_api/plot_schema"),p=a("../registry"),q=a("../plots/cartesian/axis_ids"),r=a("../lib"),s=r._,t=a("../components/color"),u=a("../constants/numerical").BADNUM,v=b.exports={},w=a("./animation_attributes"),x=a("./frame_attributes"),y=r.relinkPrivateKeys;r.extendFlat(v,p),v.attributes=a("./attributes"),v.attributes.type.values=v.allTypes,v.fontAttrs=a("./font_attributes"),v.layoutAttributes=a("./layout_attributes"),v.fontWeight="normal";var z=v.transformsRegistry,A=a("../components/errorbars"),B=a("./command");v.executeAPICommand=B.executeAPICommand,v.computeAPICommandBindings=B.computeAPICommandBindings,v.manageCommandObserver=B.manageCommandObserver,v.hasSimpleAPICommandBindings=B.hasSimpleAPICommandBindings,v.redrawText=function(a){return a=r.getGraphDiv(a),a.data&&a.data[0]&&a.data[0].r?void 0:new Promise(function(b){setTimeout(function(){p.getComponentMethod("annotations","draw")(a),p.getComponentMethod("legend","draw")(a),(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()}),b(v.previousPromises(a))},300)})},v.resize=function(a){return a=r.getGraphDiv(a),new Promise(function(b,c){function d(a){var b=window.getComputedStyle(a).display;return!b||"none"===b}(!a||d(a))&&c(new Error("Resize must be passed a displayed plot div element.")),a._redrawTimer&&clearTimeout(a._redrawTimer),a._redrawTimer=setTimeout(function(){if(a.layout.width&&a.layout.height)return void b(a);delete a.layout.width,delete a.layout.height;var c=a.changed;a.autoplay=!0,n.relayout(a,{autosize:!0}).then(function(){a.changed=c,b(a)})},100)})},v.previousPromises=function(a){return(a._promises||[]).length?Promise.all(a._promises).then(function(){a._promises=[]}):void 0},v.addLinks=function(a){if(a._context.showLink||a._context.showSources){var b=a._fullLayout,c=b._paper.selectAll("text.js-plot-link-container").data([0]);c.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var a=l.select(this);a.append("tspan").classed("js-link-to-tool",!0),a.append("tspan").classed("js-link-spacer",!0),a.append("tspan").classed("js-sourcelinks",!0)});var e=c.node(),f={y:b._paper.attr("height")-9};document.body.contains(e)&&e.getComputedTextLength()>=b.width-20?(f["text-anchor"]="start",f.x=5):(f["text-anchor"]="end",f.x=b._paper.attr("width")-7),c.attr(f);var g=c.select(".js-link-to-tool"),h=c.select(".js-link-spacer"),i=c.select(".js-sourcelinks");a._context.showSources&&a._context.showSources(a),a._context.showLink&&d(a,g),h.text(g.text()&&i.text()?" - ":"")}},v.sendDataToCloud=function(a){a.emit("plotly_beforeexport");var b=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",c=l.select(a).append("div").attr("id","hiddenform").style("display","none"),d=c.append("form").attr({action:b+"/external",method:"post",target:"_blank"}),e=d.append("input").attr({type:"text",name:"data"});return e.node().value=v.graphJson(a,!1,"keepdata"),d.node().submit(),c.remove(),a.emit("plotly_afterexport"),!1},v.supplyDefaults=function(a){var b,c=a._fullLayout||{},d=a._fullLayout={},i=a.layout||{},j=a._fullData||[],k=a._fullData=[],l=a.data||[];a._transitionData||v.createTransitionData(a),d._dfltTitle={plot:s(a,"Click to enter Plot title"),x:s(a,"Click to enter X axis title"),y:s(a,"Click to enter Y axis title"),colorbar:s(a,"Click to enter Colorscale title")},d._traceWord=s(a,"trace");var m=g(a);if(c._initialAutoSizeIsDone){var n=c.width,o=c.height;v.supplyLayoutGlobalDefaults(i,d,m),i.width||(d.width=n),i.height||(d.height=o)}else{v.supplyLayoutGlobalDefaults(i,d,m);var p=!i.width||!i.height,r=d.autosize,t=a._context&&a._context.autosizable,u=p&&(r||t);u?v.plotAutoSize(a,i,d):p&&v.sanitizeMargins(a),!r&&p&&(i.width=d.width,i.height=d.height)}d._d3locale=h(m,d.separators),d._initialAutoSizeIsDone=!0,d._dataLength=l.length,d._modules=[],d._basePlotModules=[],d._subplots=e(),d._globalTransforms=(a._context||{}).globalTransforms,v.supplyDataDefaults(l,k,i,d),d._has=v._hasPlotType.bind(d);var w=d._modules;for(b=0;b<w.length;b++){var x=w[b];x.cleanData&&x.cleanData(k)}if(j.length===l.length)for(b=0;b<k.length;b++)y(k[b],j[b]);v.supplyLayoutModuleDefaults(i,d,k,a._transitionData),d._hasCartesian=d._has("cartesian"),d._hasGeo=d._has("geo"),d._hasGL3D=d._has("gl3d"),d._hasGL2D=d._has("gl2d"),d._hasTernary=d._has("ternary"),d._hasPie=d._has("pie"),v.cleanPlot(k,d,j,c),v.linkSubplots(k,d,j,c),y(d,c),v.doAutoMargin(a);var z=q.list(a);for(b=0;b<z.length;b++){var A=z[b];A.setScale()}if((a.calcdata||[]).length===k.length)for(b=0;b<k.length;b++){var B=k[b],C=a.calcdata[b][0];C&&C.trace&&(C.trace._hasCalcTransform?f(C,B):C.trace=B)}};var C,D=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];v.createTransitionData=function(a){a._transitionData||(a._transitionData={}),a._transitionData._frames||(a._transitionData._frames=[]),a._transitionData._frameHash||(a._transitionData._frameHash={}),a._transitionData._counter||(a._transitionData._counter=0),a._transitionData._interruptCallbacks||(a._transitionData._interruptCallbacks=[])},v._hasPlotType=function(a){var b,c=this._basePlotModules||[];for(b=0;b<c.length;b++){var d=c[b];if(d.name===a)return!0}var e=this._modules||[];for(b=0;b<e.length;b++){var f=e[b];if(f.categories&&f.categories.indexOf(a)>=0)return!0}return!1},v.cleanPlot=function(a,b,c,d){var e,f,g=d._basePlotModules||[];for(e=0;e<g.length;e++){var h=g[e];h.clean&&h.clean(a,b,c,d)}var i=!!d._paper,j=!!d._infolayer,k=d._has&&d._has("gl"),l=b._has&&b._has("gl");k&&!l&&void 0!==d._glcontainer&&(d._glcontainer.selectAll(".gl-canvas").remove(),d._glcanvas=null);a:for(e=0;e<c.length;e++){var m=c[e],n=m.uid;for(f=0;f<a.length;f++){var o=a[f];if(n===o.uid)continue a}var p=".hm"+n+",.contour"+n+",.carpet"+n+",#clip"+n+",.trace"+n;i&&d._paper.selectAll(p).remove(),j&&(d._infolayer.selectAll(".cb"+n).remove(),d._infolayer.selectAll("g.rangeslider-container").selectAll(p).remove())}d._zoomlayer&&d._zoomlayer.selectAll(".select-outline").remove()},v.linkSubplots=function(a,b,c,d){var e,f,g,h,i=d._plots||{},j=b._plots={},k=b._subplots,l={_fullData:a,_fullLayout:b},m=k.cartesian.concat(k.gl2d||[]);for(var n in k)k[n].sort(r.subplotSort);for(e=0;e<m.length;e++){g=m[e];var o,p=i[g],s=q.getFromId(l,g,"x"),t=q.getFromId(l,g,"y");for(p?(o=j[g]=p,o._scene2d&&o._scene2d.updateRefs(b),o.xaxis.layer!==s.layer&&(o.xlines.attr("d",null),o.xaxislayer.selectAll("*").remove()),o.yaxis.layer!==t.layer&&(o.ylines.attr("d",null),o.yaxislayer.selectAll("*").remove())):(o=j[g]={},o.id=g),o.xaxis=s,o.yaxis=t,o._hasClipOnAxisFalse=!1,f=0;f<a.length;f++){var u=a[f];if(u.xaxis===o.xaxis._id&&u.yaxis===o.yaxis._id&&u.cliponaxis===!1){o._hasClipOnAxisFalse=!0;break}}}var v=q.list(l,null,!0);for(e=0;e<v.length;e++){h=v[e];var w=null;h.overlaying&&(w=q.getFromId(l,h.overlaying),w&&w.overlaying&&(h.overlaying=!1,w=null)),h._mainAxis=w||h,w&&(h.domain=w.domain.slice()),h._anchorAxis="free"===h.anchor?null:q.getFromId(l,h.anchor)}for(e=0;e<v.length;e++){h=v[e];var x="x"===h._id.charAt(0),y=h._mainAxis._anchorAxis,z="",A="",B="";if(y&&(B=y._mainAxis._id,z=x?h._id+B:B+h._id),!z||-1===m.indexOf(z))for(z="",f=0;f<m.length;f++){g=m[f];var C=g.indexOf("y"),D=x?g.substr(0,C):g.substr(C),E=x?g.substr(C):g.substr(0,C);if(D===h._id){A||(A=g);var F=q.getFromId(l,E);if(B&&F.overlaying===B){z=g;break}}}h._mainSubplot=z||A}},v.clearExpandedTraceDefaultColors=function(a){function b(a,b,e,f){d[f]=b,d.length=f+1,"color"===a.valType&&void 0===a.dflt&&c.push(d.join("."))}var c,d,e;for(d=[],c=a._module._colorAttrs,c||(a._module._colorAttrs=c=[],o.crawl(a._module.attributes,b)),e=0;e<c.length;e++){var f=r.nestedProperty(a,"_input."+c[e]);f.get()||r.nestedProperty(a,c[e]).set(null)}},v.supplyDataDefaults=function(a,b,c,d){function e(a){b.push(a);var c=a._module;c&&(a.visible===!0&&r.pushUnique(j,c),r.pushUnique(k,a._module.basePlotModule),l++,a._input.visible!==!1&&m++)}var f,g,h,j=d._modules,k=d._basePlotModules,l=0,m=0;d._transformModules=[];var n={},o=[];for(f=0;f<a.length;f++){if(h=a[f],g=v.supplyTraceDefaults(h,m,d,f),g.index=f,g._input=h,g._expandedIndex=l,g.transforms&&g.transforms.length)for(var q=i(g,b,c,d),s=0;s<q.length;s++){var t=q[s],u=v.supplyTraceDefaults(t,l,d,f);y(u,t),t.uid=u.uid=g.uid+s,u.index=f,u._input=h,u._fullInput=g,u._expandedIndex=l,u._expandedInput=t,e(u)}else g._fullInput=g,g._expandedInput=g,e(g);p.traceIs(g,"carpetAxis")&&(n[g.carpet]=g),p.traceIs(g,"carpetDependent")&&o.push(f)}for(f=0;f<o.length;f++)if(g=b[o[f]],g.visible){var w=n[g.carpet];g._carpet=w,w&&w.visible?(g.xaxis=w.xaxis,g.yaxis=w.yaxis):g.visible=!1}},v.supplyAnimationDefaults=function(a){function b(b,c){return r.coerce(a||{},d,w,b,c)}a=a||{};var c,d={};if(b("mode"),b("direction"),b("fromcurrent"),Array.isArray(a.frame))for(d.frame=[],c=0;c<a.frame.length;c++)d.frame[c]=v.supplyAnimationFrameDefaults(a.frame[c]||{});else d.frame=v.supplyAnimationFrameDefaults(a.frame||{});if(Array.isArray(a.transition))for(d.transition=[],c=0;c<a.transition.length;c++)d.transition[c]=v.supplyAnimationTransitionDefaults(a.transition[c]||{});else d.transition=v.supplyAnimationTransitionDefaults(a.transition||{});return d},v.supplyAnimationFrameDefaults=function(a){function b(b,d){return r.coerce(a||{},c,w.frame,b,d)}var c={};return b("duration"),b("redraw"),c},v.supplyAnimationTransitionDefaults=function(a){function b(b,d){return r.coerce(a||{},c,w.transition,b,d)}var c={};return b("duration"),b("easing"),c},v.supplyFrameDefaults=function(a){function b(b,d){return r.coerce(a,c,x,b,d)}var c={};return b("group"),b("name"),b("traces"),b("baseframe"),b("data"),b("layout"),c},v.supplyTraceDefaults=function(a,b,c,d){function e(b,c){return r.coerce(a,h,v.attributes,b,c)}var f,g=c.colorway||t.defaults,h={},i=g[b%g.length],j=e("visible");e("type"),e("uid"),e("name",c._traceWord+" "+d);var k=v.getModule(h);if(h._module=k,k){var l=k.basePlotModule,m=l.attr;if(m){var n=c._subplots,o=l.attributes,q="";if("gl2d"!==l.name||j){if(Array.isArray(m))for(f=0;f<m.length;f++){var s=m[f],u=r.coerce(a,h,o,s);n[s]&&r.pushUnique(n[s],u),q+=u}else q=r.coerce(a,h,o,m);n[l.name]&&r.pushUnique(n[l.name],q)}}}return j&&(e("customdata"),e("ids"),v.traceIs(h,"showLegend")&&(e("showlegend"),e("legendgroup")),p.getComponentMethod("fx","supplyDefaults")(a,h,i,c),k&&(k.supplyDefaults(a,h,i,c),r.coerceHoverinfo(a,h,c)),v.traceIs(h,"noOpacity")||e("opacity"),v.traceIs(h,"notLegendIsolatable")&&(h.visible=!!h.visible),k&&k.selectPoints&&"scattergl"!==h.type&&e("selectedpoints"),v.supplyTransformDefaults(a,h,c)),h},v.supplyTransformDefaults=function(a,b,c){var d=c._globalTransforms||[],e=c._transformModules||[];if(Array.isArray(a.transforms)||0!==d.length)for(var f=a.transforms||[],g=d.concat(f),h=b.transforms=[],i=0;i<g.length;i++){var j,k=g[i],l=k.type,m=z[l],n=!(k._module&&k._module===m),o=m&&"function"==typeof m.transform;m||r.warn("Unrecognized transform type "+l+"."),m&&m.supplyDefaults&&(n||o)?(j=m.supplyDefaults(k,b,c,a),j.type=l,j._module=m,r.pushUnique(e,m)):j=r.extendFlat({},k),h.push(j)}},v.supplyLayoutGlobalDefaults=function(a,b,c){function d(c,d){return r.coerce(a,b,v.layoutAttributes,c,d)}var e=r.coerceFont(d,"font");d("title",b._dfltTitle.plot),r.coerceFont(d,"titlefont",{family:e.family,size:Math.round(1.4*e.size),color:e.color}),d("autosize",!(a.width&&a.height)),d("width"),d("height"),d("margin.l"),d("margin.r"),d("margin.t"),d("margin.b"),d("margin.pad"),d("margin.autoexpand"),a.width&&a.height&&v.sanitizeMargins(b),d("paper_bgcolor"),d("separators",c.decimal+c.thousands),d("hidesources"),d("colorway"),p.getComponentMethod("calendars","handleDefaults")(a,b,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(a,b,d)},v.plotAutoSize=function(a,b,c){var d,e,f=a._context||{},g=f.frameMargins,h=r.isPlotDiv(a);if(h&&a.emit("plotly_autosize"),f.fillFrame)d=window.innerWidth,e=window.innerHeight,document.body.style.overflow="hidden";else if(m(g)&&g>0){var i=j(a._boundingBoxMargins),k=i.left+i.right,l=i.bottom+i.top,n=1-2*g,o=c._container&&c._container.node?c._container.node().getBoundingClientRect():{width:c.width,height:c.height};d=Math.round(n*(o.width-k)),e=Math.round(n*(o.height-l))}else{var p=h?window.getComputedStyle(a):{};d=parseFloat(p.width)||c.width,e=parseFloat(p.height)||c.height}var q=v.layoutAttributes.width.min,s=v.layoutAttributes.height.min;q>d&&(d=q),s>e&&(e=s);var t=!b.width&&Math.abs(c.width-d)>1,u=!b.height&&Math.abs(c.height-e)>1;(u||t)&&(t&&(c.width=d),u&&(c.height=e)),a._initialAutoSize||(a._initialAutoSize={width:d,height:e}),v.sanitizeMargins(c)},v.supplyLayoutModuleDefaults=function(a,b,c,d){var e,f,g,h=p.componentsRegistry,i=b._basePlotModules,j=p.subplotsRegistry.cartesian;for(e in h)g=h[e],g.includeBasePlot&&g.includeBasePlot(a,b);for(i.length||i.push(j),b._has("cartesian")&&j.finalizeSubplots(a,b),f=0;f<i.length;f++)g=i[f],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c);var k=b._modules;for(f=0;f<k.length;f++)g=k[f],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c);var l=b._transformModules;for(f=0;f<l.length;f++)g=l[f],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c,d);for(e in h)g=h[e],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c)},v.purge=function(a){var b=a._fullLayout||{};void 0!==b._glcontainer&&(b._glcontainer.selectAll(".gl-canvas").remove(),b._glcontainer.remove(),b._glcanvas=null),void 0!==b._geocontainer&&b._geocontainer.remove(),b._modeBar&&b._modeBar.destroy(),a._transitionData&&(a._transitionData._interruptCallbacks&&(a._transitionData._interruptCallbacks.length=0),a._transitionData._animationRaf&&window.cancelAnimationFrame(a._transitionData._animationRaf)),r.clearThrottle(),delete a.data,delete a.layout,delete a._fullData,delete a._fullLayout,delete a.calcdata,delete a.framework,delete a.empty,delete a.fid,delete a.undoqueue,delete a.undonum,delete a.autoplay,delete a.changed,delete a._promises,delete a._redrawTimer,delete a.firstscatter,delete a._hmlumcount,delete a._hmpixcount,delete a._transitionData,delete a._transitioning,delete a._initialAutoSize,delete a._transitioningWithDuration,delete a._dragging,delete a._dragged,delete a._hoverdata,delete a._snapshotInProgress,delete a._editing,delete a._replotPending,delete a._mouseDownTime,delete a._legendMouseDownTime,a.removeAllListeners&&a.removeAllListeners()},v.style=function(a){for(var b=a._fullLayout._modules,c=0;c<b.length;c++){var d=b[c];d.style&&d.style(a)}},v.sanitizeMargins=function(a){if(a&&a.margin){var b,c=a.width,d=a.height,e=a.margin,f=c-(e.l+e.r),g=d-(e.t+e.b);0>f&&(b=(c-1)/(e.l+e.r),e.l=Math.floor(b*e.l),e.r=Math.floor(b*e.r)),0>g&&(b=(d-1)/(e.t+e.b),e.t=Math.floor(b*e.t),e.b=Math.floor(b*e.b))}},v.autoMargin=function(a,b,c){var d=a._fullLayout;if(d._pushmargin||(d._pushmargin={}),d.margin.autoexpand!==!1){if(c){var e=void 0===c.pad?12:c.pad;c.l+c.r>.5*d.width&&(c.l=c.r=0),c.b+c.t>.5*d.height&&(c.b=c.t=0),d._pushmargin[b]={l:{val:c.x,size:c.l+e},r:{val:c.x,size:c.r+e},b:{val:c.y,size:c.b+e},t:{val:c.y,size:c.t+e}}}else delete d._pushmargin[b];d._replotting||v.doAutoMargin(a)}},v.doAutoMargin=function(a){var b=a._fullLayout;b._size||(b._size={}),b._pushmargin||(b._pushmargin={});var c=b._size,d=JSON.stringify(c),e=Math.max(b.margin.l||0,0),f=Math.max(b.margin.r||0,0),g=Math.max(b.margin.t||0,0),h=Math.max(b.margin.b||0,0),i=b._pushmargin;if(b.margin.autoexpand!==!1){i.base={l:{val:0,size:e},r:{val:1,size:f},t:{val:1,size:g},b:{val:0,size:h}};for(var j in i){var k=i[j].l||{},l=i[j].b||{},o=k.val,p=k.size,q=l.val,r=l.size;for(var s in i){if(m(p)&&i[s].r){var t=i[s].r.val,u=i[s].r.size;if(t>o){var v=(p*t+(u-b.width)*o)/(t-o),w=(u*(1-o)+(p-b.width)*(1-t))/(t-o);v>=0&&w>=0&&v+w>e+f&&(e=v,f=w)}}if(m(r)&&i[s].t){var x=i[s].t.val,y=i[s].t.size;if(x>q){var z=(r*x+(y-b.height)*q)/(x-q),A=(y*(1-q)+(r-b.height)*(1-x))/(x-q);z>=0&&A>=0&&z+A>h+g&&(h=z,g=A)}}}}}return c.l=Math.round(e),c.r=Math.round(f),c.t=Math.round(g),c.b=Math.round(h),c.p=Math.round(b.margin.pad),c.w=Math.round(b.width)-c.l-c.r,c.h=Math.round(b.height)-c.t-c.b,b._replotting||"{}"===d||d===JSON.stringify(b._size)?void 0:n.plot(a)},v.graphJson=function(a,b,c,d,e){function f(a){if("function"==typeof a)return null;if(r.isPlainObject(a)){var b,d,e={};for(b in a)if("function"!=typeof a[b]&&-1===["_","["].indexOf(b.charAt(0))){if("keepdata"===c){if("src"===b.substr(b.length-3))continue}else if("keepstream"===c){if(d=a[b+"src"],"string"==typeof d&&d.indexOf(":")>0&&!r.isPlainObject(a.stream))continue}else if("keepall"!==c&&(d=a[b+"src"],"string"==typeof d&&d.indexOf(":")>0))continue;e[b]=f(a[b])}return e}return Array.isArray(a)?a.map(f):r.isJSDate(a)?r.ms2DateTimeLocal(+a):a}(e&&b&&!a._fullData||e&&!b&&!a._fullLayout)&&v.supplyDefaults(a);var g=e?a._fullData:a.data,h=e?a._fullLayout:a.layout,i=(a._transitionData||{})._frames,j={data:(g||[]).map(function(a){var c=f(a);return b&&delete c.fit,c})};return b||(j.layout=f(h)),a.framework&&a.framework.isPolar&&(j=a.framework.getConfig()),i&&(j.frames=f(i)),"object"===d?j:JSON.stringify(j)},v.modifyFrames=function(a,b){var c,d,e,f=a._transitionData._frames,g=a._transitionData._frameHash;for(c=0;c<b.length;c++)switch(d=b[c],d.type){case"replace":e=d.value;var h=(f[d.index]||{}).name,i=e.name;f[d.index]=g[i]=e,i!==h&&(delete g[h],g[i]=e);break;case"insert":e=d.value,g[e.name]=e,f.splice(d.index,0,e);break;case"delete":e=f[d.index],delete g[e.name],f.splice(d.index,1)}return Promise.resolve()},v.computeFrame=function(a,b){var c,d,e,f,g=a._transitionData._frameHash;if(!b)throw new Error("computeFrame must be given a string frame name");var h=g[b.toString()];if(!h)return!1;for(var i=[h],j=[h.name];h.baseframe&&(h=g[h.baseframe.toString()])&&-1===j.indexOf(h.name);)i.push(h),j.push(h.name);for(var k={};h=i.pop();)if(h.layout&&(k.layout=v.extendLayout(k.layout,h.layout)),h.data){if(k.data||(k.data=[]),d=h.traces,!d)for(d=[],c=0;c<h.data.length;c++)d[c]=c;for(k.traces||(k.traces=[]),c=0;c<h.data.length;c++)e=d[c],void 0!==e&&null!==e&&(f=k.traces.indexOf(e),-1===f&&(f=k.data.length,k.traces[f]=e),k.data[f]=v.extendTrace(k.data[f],h.data[c]))}return k},v.recomputeFrameHash=function(a){for(var b=a._transitionData._frameHash={},c=a._transitionData._frames,d=0;d<c.length;d++){var e=c[d];e&&e.name&&(b[e.name]=e)}},v.extendObjectWithContainers=function(a,b,c){var d,e,f,g,h,i,j,k,l=r.extendDeepNoArrays({},b||{}),m=r.expandObjectPaths(l),n={};if(c&&c.length)for(f=0;f<c.length;f++)d=r.nestedProperty(m,c[f]),e=d.get(),void 0===e?r.nestedProperty(n,c[f]).set(null):(d.set(null),r.nestedProperty(n,c[f]).set(e));if(a=r.extendDeepNoArrays(a||{},m),c&&c.length)for(f=0;f<c.length;f++)if(h=r.nestedProperty(n,c[f]),j=h.get()){for(i=r.nestedProperty(a,c[f]),k=i.get(),Array.isArray(k)||(k=[],i.set(k)),g=0;g<j.length;g++){var o=j[g];null===o?k[g]=null:k[g]=v.extendObjectWithContainers(k[g],o)}i.set(k)}return a},v.dataArrayContainers=["transforms"],v.layoutArrayContainers=p.layoutArrayContainers,v.extendTrace=function(a,b){return v.extendObjectWithContainers(a,b,v.dataArrayContainers)},v.extendLayout=function(a,b){return v.extendObjectWithContainers(a,b,v.layoutArrayContainers)},v.transition=function(a,b,c,d,e,f){function g(){var d;for(d=0;d<q.length;d++){var e=q[d],f=a._fullData[e],g=f._module;g&&(g.animatable&&s.push(e),a.data[q[d]]=v.extendTrace(a.data[q[d]],b[d]))}var h=r.expandObjectPaths(r.extendDeepNoArrays({},c)),i=/^[xy]axis[0-9]*$/;for(var j in h)i.test(j)&&delete h[j].range;return v.extendLayout(a.layout,h),delete a.calcdata,v.supplyDefaults(a),v.doCalcdata(a),A.calc(a),Promise.resolve()}function h(a){var b=Promise.resolve();if(!a)return b;for(;a.length;)b=b.then(a.shift());return b}function i(a){if(a)for(;a.length;)a.shift()}function j(){return a.emit("plotly_transitioning",[]),new Promise(function(b){function d(){return i++,function(){j++,t||j!==i||k(b)}}a._transitioning=!0,f.duration>0&&(a._transitioningWithDuration=!0),a._transitionData._interruptCallbacks.push(function(){t=!0}),e.redraw&&a._transitionData._interruptCallbacks.push(function(){return n.redraw(a)}),a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var g,h,i=0,j=0,l=a._fullLayout._basePlotModules,m=!1;if(c)for(h=0;h<l.length;h++)if(l[h].transitionAxes){var o=r.expandObjectPaths(c);m=l[h].transitionAxes(a,o,f,d)||m}for(m?(g=r.extendFlat({},f),g.duration=0):g=f,h=0;h<l.length;h++)l[h].plot(a,s,g,d);setTimeout(d())})}function k(b){return a._transitionData?(i(a._transitionData._interruptCallbacks),Promise.resolve().then(function(){return e.redraw?n.redraw(a):void 0}).then(function(){a._transitioning=!1,a._transitioningWithDuration=!1,a.emit("plotly_transitioned",[])}).then(b)):void 0}function l(){return a._transitionData?(a._transitioning=!1,h(a._transitionData._interruptCallbacks)):void 0}var m,o,p=Array.isArray(b)?b.length:0,q=d.slice(0,p),s=[],t=!1;for(m=0;m<q.length;m++){o=q[m];var u=a._fullData[o],w=u._module;if(w&&!w.animatable){var x={};for(var y in b[m])x[y]=[b[m][y]]}}var z=[v.previousPromises,l,g,v.rehover,j],B=r.syncOrAsync(z,a);return B&&B.then||(B=Promise.resolve()),B.then(function(){return a})},v.doCalcdata=function(a,b){var c,d,e,f,g=q.list(a),h=a._fullData,i=a._fullLayout,j=new Array(h.length),l=(a.calcdata||[]).slice(0);for(a.calcdata=j,a.firstscatter=!0,i._numBoxes=0,i._numViolins=0,i._violinScaleGroupStats={},a._hmpixcount=0,a._hmlumcount=0,i._piecolormap={},i._piecolorway=null,i._piedefaultcolorcount=0,e=0;e<h.length;e++)Array.isArray(b)&&-1===b.indexOf(e)&&(j[e]=l[e]);
for(e=0;e<h.length;e++)c=h[e],c._arrayAttrs=o.findArrayAttributes(c);k(g);var m=!1;for(e=0;e<h.length;e++)if(c=h[e],c.visible===!0&&c.transforms)for(d=c._module,d&&d.calc&&d.calc(a,c),f=0;f<c.transforms.length;f++){var n=c.transforms[f];d=z[n.type],d&&d.calcTransform&&(c._hasCalcTransform=!0,m=!0,d.calcTransform(a,c,n))}if(m){for(e=0;e<g.length;e++)g[e]._min=[],g[e]._max=[],g[e]._categories=[],g[e]._categoriesMap={};k(g)}for(e=0;e<h.length;e++){var r=[];if(c=h[e],c.visible===!0){d=c._module;var s=c.transforms||[];for(f=s.length-1;f>=0;f--)if(s[f].enabled){c._indexToPoints=s[f]._indexToPoints;break}d&&d.calc&&(r=d.calc(a,c))}Array.isArray(r)&&r[0]||(r=[{x:u,y:u}]),r[0].t||(r[0].t={}),r[0].trace=c,j[e]=r}p.getComponentMethod("fx","calc")(a)},v.rehover=function(a){a._fullLayout._rehover&&a._fullLayout._rehover()},v.generalUpdatePerTraceModule=function(a,b,c){function d(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d[0].trace;e.visible===!0&&b.push(d)}return b}var e,f=a.traceHash,g={};for(e=0;e<b.length;e++){var h=b[e],i=h[0].trace;i.visible&&(g[i.type]=g[i.type]||[],g[i.type].push(h))}for(var j in f)if(!g[j]){var k=f[j][0],l=k[0].trace;l.visible=!1,g[j]=[k]}for(var m in g){var n=g[m],o=n[0][0].trace._module;o.plot(a,d(n),c)}a.traceHash=g}},{"../components/color":613,"../components/errorbars":644,"../constants/numerical":717,"../lib":738,"../plot_api/plot_schema":774,"../plotly":780,"../plots/cartesian/axis_ids":788,"../registry":861,"./animation_attributes":781,"./attributes":783,"./command":809,"./font_attributes":810,"./frame_attributes":811,"./layout_attributes":837,d3:123,"fast-isnumeric":132}],847:[function(a,b,c){"use strict";var d=a("../../traces/scatter/attributes"),e=d.marker;b.exports={r:d.r,t:d.t,marker:{color:e.color,size:e.size,symbol:e.symbol,opacity:e.opacity,editType:"calc"}}},{"../../traces/scatter/attributes":1054}],848:[function(a,b,c){"use strict";function d(a,b){var c={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return f({},b,c)}var e=a("../cartesian/layout_attributes"),f=a("../../lib/extend").extendFlat,g=a("../../plot_api/edit_types").overrideAll,h=f({},e.domain,{});b.exports=g({radialaxis:d("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:h,orientation:{valType:"number"}}),angularaxis:d("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:h}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../lib/extend":727,"../../plot_api/edit_types":769,"../cartesian/layout_attributes":797}],849:[function(a,b,c){"use strict";var d=b.exports=a("./micropolar");d.manager=a("./micropolar_manager")},{"./micropolar":850,"./micropolar_manager":851}],850:[function(a,b,c){var d=a("d3"),e=a("../../lib"),f=e.extendDeepAll,g=a("../../constants/alignment").MID_SHIFT,h=b.exports={version:"0.2.2"};h.Axis=function(){function a(a){c=a||c;var k=j.data,m=j.layout;return("string"==typeof c||c.nodeName)&&(c=d.select(c)),c.datum(k).each(function(a,c){function j(a,b){return i(a)%360+m.orientation}var k=a.slice();l={data:h.util.cloneJson(k),layout:h.util.cloneJson(m)};var n=0;k.forEach(function(a,b){a.color||(a.color=m.defaultColorRange[n],n=(n+1)%m.defaultColorRange.length),a.strokeColor||(a.strokeColor="LinePlot"===a.geometry?a.color:d.rgb(a.color).darker().toString()),l.data[b].color=a.color,l.data[b].strokeColor=a.strokeColor,l.data[b].strokeDash=a.strokeDash,l.data[b].strokeSize=a.strokeSize});var o=k.filter(function(a,b){var c=a.visible;return"undefined"==typeof c||c===!0}),p=!1,q=o.map(function(a,b){return p=p||"undefined"!=typeof a.groupId,a});if(p){var r=d.nest().key(function(a,b){return"undefined"!=typeof a.groupId?a.groupId:"unstacked"}).entries(q),s=[],t=r.map(function(a,b){if("unstacked"===a.key)return a.values;var c=a.values[0].r.map(function(a,b){return 0});return a.values.forEach(function(a,b,d){a.yStack=[c],s.push(c),c=h.util.sumArrays(a.r,c)}),a.values});o=d.merge(t)}o.forEach(function(a,b){a.t=Array.isArray(a.t[0])?a.t:[a.t],a.r=Array.isArray(a.r[0])?a.r:[a.r]});var u=Math.min(m.width-m.margin.left-m.margin.right,m.height-m.margin.top-m.margin.bottom)/2;u=Math.max(10,u);var v,w=[m.margin.left+u,m.margin.top+u];if(p){var x=d.max(h.util.sumArrays(h.util.arrayLast(o).r[0],h.util.arrayLast(s)));v=[0,x]}else v=d.extent(h.util.flattenArray(o.map(function(a,b){return a.r})));m.radialAxis.domain!=h.DATAEXTENT&&(v[0]=0),e=d.scale.linear().domain(m.radialAxis.domain!=h.DATAEXTENT&&m.radialAxis.domain?m.radialAxis.domain:v).range([0,u]),l.layout.radialAxis.domain=e.domain();var y,z=h.util.flattenArray(o.map(function(a,b){return a.t})),A="string"==typeof z[0];A&&(z=h.util.deduplicate(z),y=z.slice(),z=d.range(z.length),o=o.map(function(a,b){var c=a;return a.t=[z],p&&(c.yStack=a.yStack),c}));var B=o.filter(function(a,b){return"LinePlot"===a.geometry||"DotPlot"===a.geometry}).length===o.length,C=null===m.needsEndSpacing?A||!B:m.needsEndSpacing,D=m.angularAxis.domain&&m.angularAxis.domain!=h.DATAEXTENT&&!A&&m.angularAxis.domain[0]>=0,E=D?m.angularAxis.domain:d.extent(z),F=Math.abs(z[1]-z[0]);B&&!A&&(F=0);var G=E.slice();C&&A&&(G[1]+=F);var H=m.angularAxis.ticksCount||4;H>8&&(H=H/(H/8)+H%8),m.angularAxis.ticksStep&&(H=(G[1]-G[0])/H);var I=m.angularAxis.ticksStep||(G[1]-G[0])/(H*(m.minorTicks+1));y&&(I=Math.max(Math.round(I),1)),G[2]||(G[2]=I);var J=d.range.apply(this,G);if(J=J.map(function(a,b){return parseFloat(a.toPrecision(12))}),i=d.scale.linear().domain(G.slice(0,2)).range("clockwise"===m.direction?[0,360]:[360,0]),l.layout.angularAxis.domain=i.domain(),l.layout.angularAxis.endPadding=C?F:0,b=d.select(this).select("svg.chart-root"),"undefined"==typeof b||b.empty()){var K="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",L=(new DOMParser).parseFromString(K,"application/xml"),M=this.appendChild(this.ownerDocument.importNode(L.documentElement,!0));b=d.select(M)}b.select(".guides-group").style({"pointer-events":"none"}),b.select(".angular.axis-group").style({"pointer-events":"none"}),b.select(".radial.axis-group").style({"pointer-events":"none"});var N,O=b.select(".chart-group"),P={fill:"none",stroke:m.tickColor},Q={"font-size":m.font.size,"font-family":m.font.family,fill:m.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(a,b){return" "+a+" 0 "+m.font.outlineColor}).join(",")};if(m.showLegend){N=b.select(".legend-group").attr({transform:"translate("+[u,m.margin.top]+")"}).style({display:"block"});var R=o.map(function(a,b){var c=h.util.cloneJson(a);return c.symbol="DotPlot"===a.geometry?a.dotType||"circle":"LinePlot"!=a.geometry?"square":"line",c.visibleInLegend="undefined"==typeof a.visibleInLegend||a.visibleInLegend,c.color="LinePlot"===a.geometry?a.strokeColor:a.color,c});h.Legend().config({data:o.map(function(a,b){return a.name||"Element"+b}),legendConfig:f({},h.Legend.defaultConfig().legendConfig,{container:N,elements:R,reverseOrder:m.legend.reverseOrder})})();var S=N.node().getBBox();u=Math.min(m.width-S.width-m.margin.left-m.margin.right,m.height-m.margin.top-m.margin.bottom)/2,u=Math.max(10,u),w=[m.margin.left+u,m.margin.top+u],e.range([0,u]),l.layout.radialAxis.domain=e.domain(),N.attr("transform","translate("+[w[0]+u,w[1]-u]+")")}else N=b.select(".legend-group").style({display:"none"});b.attr({width:m.width,height:m.height}).style({opacity:m.opacity}),O.attr("transform","translate("+w+")").style({cursor:"crosshair"});var T=[(m.width-(m.margin.left+m.margin.right+2*u+(S?S.width:0)))/2,(m.height-(m.margin.top+m.margin.bottom+2*u))/2];if(T[0]=Math.max(0,T[0]),T[1]=Math.max(0,T[1]),b.select(".outer-group").attr("transform","translate("+T+")"),m.title){var U=b.select("g.title-group text").style(Q).text(m.title),V=U.node().getBBox();U.attr({x:w[0]-V.width/2,y:w[1]-u-20})}var W=b.select(".radial.axis-group");if(m.radialAxis.gridLinesVisible){var X=W.selectAll("circle.grid-circle").data(e.ticks(5));X.enter().append("circle").attr({"class":"grid-circle"}).style(P),X.attr("r",e),X.exit().remove()}W.select("circle.outside-circle").attr({r:u}).style(P);var Y=b.select("circle.background-circle").attr({r:u}).style({fill:m.backgroundColor,stroke:m.stroke});if(m.radialAxis.visible){var Z=d.svg.axis().scale(e).ticks(5).tickSize(5);W.call(Z).attr({transform:"rotate("+m.radialAxis.orientation+")"}),W.selectAll(".domain").style(P),W.selectAll("g>text").text(function(a,b){return this.textContent+m.radialAxis.ticksSuffix}).style(Q).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(a,b){return"horizontal"===m.radialAxis.tickOrientation?"rotate("+-m.radialAxis.orientation+") translate("+[0,Q["font-size"]]+")":"translate("+[0,Q["font-size"]]+")"}}),W.selectAll("g>line").style({stroke:"black"})}var $=b.select(".angular.axis-group").selectAll("g.angular-tick").data(J),_=$.enter().append("g").classed("angular-tick",!0);$.attr({transform:function(a,b){return"rotate("+j(a,b)+")"}}).style({display:m.angularAxis.visible?"block":"none"}),$.exit().remove(),_.append("line").classed("grid-line",!0).classed("major",function(a,b){return b%(m.minorTicks+1)==0}).classed("minor",function(a,b){return!(b%(m.minorTicks+1)==0)}).style(P),_.selectAll(".minor").style({stroke:m.minorTickColor}),$.select("line.grid-line").attr({x1:m.tickLength?u-m.tickLength:0,x2:u}).style({display:m.angularAxis.gridLinesVisible?"block":"none"}),_.append("text").classed("axis-text",!0).style(Q);var aa=$.select("text.axis-text").attr({x:u+m.labelOffset,dy:g+"em",transform:function(a,b){var c=j(a,b),d=u+m.labelOffset,e=m.angularAxis.tickOrientation;return"horizontal"==e?"rotate("+-c+" "+d+" 0)":"radial"==e?270>c&&c>90?"rotate(180 "+d+" 0)":null:"rotate("+(180>=c&&c>0?-90:90)+" "+d+" 0)"}}).style({"text-anchor":"middle",display:m.angularAxis.labelsVisible?"block":"none"}).text(function(a,b){return b%(m.minorTicks+1)!=0?"":y?y[a]+m.angularAxis.ticksSuffix:a+m.angularAxis.ticksSuffix}).style(Q);m.angularAxis.rewriteTicks&&aa.text(function(a,b){return b%(m.minorTicks+1)!=0?"":m.angularAxis.rewriteTicks(this.textContent,b)});var ba=d.max(O.selectAll(".angular-tick text")[0].map(function(a,b){return a.getCTM().e+a.getBBox().width}));N.attr({transform:"translate("+[u+ba,m.margin.top]+")"});var ca=b.select("g.geometry-group").selectAll("g").size()>0,da=b.select("g.geometry-group").selectAll("g.geometry").data(o);if(da.enter().append("g").attr({"class":function(a,b){return"geometry geometry"+b}}),da.exit().remove(),o[0]||ca){var ea=[];o.forEach(function(a,b){var c={};c.radialScale=e,c.angularScale=i,c.container=da.filter(function(a,c){return c==b}),c.geometry=a.geometry,c.orientation=m.orientation,c.direction=m.direction,c.index=b,ea.push({data:a,geometryConfig:c})});var fa=d.nest().key(function(a,b){return"undefined"!=typeof a.data.groupId||"unstacked"}).entries(ea),ga=[];fa.forEach(function(a,b){"unstacked"===a.key?ga=ga.concat(a.values.map(function(a,b){return[a]})):ga.push(a.values)}),ga.forEach(function(a,b){var c;c=Array.isArray(a)?a[0].geometryConfig.geometry:a.geometryConfig.geometry;var d=a.map(function(a,b){return f(h[c].defaultConfig(),a)});h[c]().config(d)()})}var ha,ia,ja=b.select(".guides-group"),ka=b.select(".tooltips-group"),la=h.tooltipPanel().config({container:ka,fontSize:8})(),ma=h.tooltipPanel().config({container:ka,fontSize:8})(),na=h.tooltipPanel().config({container:ka,hasTick:!0})();if(!A){var oa=ja.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});O.on("mousemove.angular-guide",function(a,b){var c=h.util.getMousePos(Y).angle;oa.attr({x2:-u,transform:"rotate("+c+")"}).style({opacity:.5});var d=(c+180+360-m.orientation)%360;ha=i.invert(d);var e=h.util.convertToCartesian(u+12,c+180);la.text(h.util.round(ha)).move([e[0]+w[0],e[1]+w[1]])}).on("mouseout.angular-guide",function(a,b){ja.select("line").style({opacity:0})})}var pa=ja.select("circle").style({stroke:"grey",fill:"none"});O.on("mousemove.radial-guide",function(a,b){var c=h.util.getMousePos(Y).radius;pa.attr({r:c}).style({opacity:.5}),ia=e.invert(h.util.getMousePos(Y).radius);var d=h.util.convertToCartesian(c,m.radialAxis.orientation);ma.text(h.util.round(ia)).move([d[0]+w[0],d[1]+w[1]])}).on("mouseout.radial-guide",function(a,b){pa.style({opacity:0}),na.hide(),la.hide(),ma.hide()}),b.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(a,c){var e=d.select(this),f=this.style.fill,g="black",i=this.style.opacity||1;if(e.attr({"data-opacity":i}),f&&"none"!==f){e.attr({"data-fill":f}),g=d.hsl(f).darker().toString(),e.style({fill:g,opacity:1});var j={t:h.util.round(a[0]),r:h.util.round(a[1])};A&&(j.t=y[a[0]]);var k="t: "+j.t+", r: "+j.r,l=this.getBoundingClientRect(),m=b.node().getBoundingClientRect(),n=[l.left+l.width/2-T[0]-m.left,l.top+l.height/2-T[1]-m.top];na.config({color:g}).text(k),na.move(n)}else f=this.style.stroke||"black",e.attr({"data-stroke":f}),g=d.hsl(f).darker().toString(),e.style({stroke:g,opacity:1})}).on("mousemove.tooltip",function(a,b){return 0!=d.event.which?!1:void(d.select(this).attr("data-fill")&&na.show())}).on("mouseout.tooltip",function(a,b){na.hide();var c=d.select(this),e=c.attr("data-fill");e?c.style({fill:e,opacity:c.attr("data-opacity")}):c.style({stroke:c.attr("data-stroke"),opacity:c.attr("data-opacity")})})}),n}var b,c,e,i,j={data:[],layout:{}},k={},l={},m=d.dispatch("hover"),n={};return n.render=function(b){return a(b),this},n.config=function(a){if(!arguments.length)return j;var b=h.util.cloneJson(a);return b.data.forEach(function(a,b){j.data[b]||(j.data[b]={}),f(j.data[b],h.Axis.defaultConfig().data[0]),f(j.data[b],a)}),f(j.layout,h.Axis.defaultConfig().layout),f(j.layout,b.layout),this},n.getLiveConfig=function(){return l},n.getinputConfig=function(){return k},n.radialScale=function(a){return e},n.angularScale=function(a){return i},n.svg=function(){return b},d.rebind(n,m,"on"),n},h.Axis.defaultConfig=function(a,b){var c={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:d.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return c},h.util={},h.DATAEXTENT="dataExtent",h.AREA="AreaChart",h.LINE="LinePlot",h.DOT="DotPlot",h.BAR="BarChart",h.util._override=function(a,b){for(var c in a)c in b&&(b[c]=a[c])},h.util._extend=function(a,b){for(var c in a)b[c]=a[c]},h.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},h.util.dataFromEquation2=function(a,b){var c=b||6,e=d.range(0,360+c,c).map(function(b,c){var d=b*Math.PI/180,e=a(d);return[b,e]});return e},h.util.dataFromEquation=function(a,b,c){var e=b||6,f=[],g=[];d.range(0,360+e,e).forEach(function(b,c){var d=b*Math.PI/180,e=a(d);f.push(b),g.push(e)});var h={t:f,r:g};return c&&(h.name=c),h},h.util.ensureArray=function(a,b){if("undefined"==typeof a)return null;var c=[].concat(a);return d.range(b).map(function(a,b){return c[b]||c[0]})},h.util.fillArrays=function(a,b,c){return b.forEach(function(b,d){a[b]=h.util.ensureArray(a[b],c)}),a},h.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))},h.util.validateKeys=function(a,b){"string"==typeof b&&(b=b.split("."));var c=b.shift();return a[c]&&(!b.length||objHasKeys(a[c],b))},h.util.sumArrays=function(a,b){return d.zip(a,b).map(function(a,b){return d.sum(a)})},h.util.arrayLast=function(a){return a[a.length-1]},h.util.arrayEqual=function(a,b){for(var c=Math.max(a.length,b.length,1);c-->=0&&a[c]===b[c];);return-2===c},h.util.flattenArray=function(a){for(var b=[];!h.util.arrayEqual(b,a);)b=a,a=[].concat.apply([],a);return a},h.util.deduplicate=function(a){return a.filter(function(a,b,c){return c.indexOf(a)==b})},h.util.convertToCartesian=function(a,b){var c=b*Math.PI/180,d=a*Math.cos(c),e=a*Math.sin(c);return[d,e]},h.util.round=function(a,b){var c=b||2,d=Math.pow(10,c);return Math.round(a*d)/d},h.util.getMousePos=function(a){var b=d.mouse(a.node()),c=b[0],e=b[1],f={};return f.x=c,f.y=e,f.pos=b,f.angle=180*(Math.atan2(e,c)+Math.PI)/Math.PI,f.radius=Math.sqrt(c*c+e*e),f},h.util.duplicatesCount=function(a){for(var b,c={},d={},e=0,f=a.length;f>e;e++)b=a[e],b in c?(c[b]++,d[b]=c[b]):c[b]=1;return d},h.util.duplicates=function(a){return Object.keys(h.util.duplicatesCount(a))},h.util.translator=function(a,b,c,d){if(d){var e=c.slice();c=b,b=e}var f=b.reduce(function(a,b){return"undefined"!=typeof a?a[b]:void 0},a);"undefined"!=typeof f&&(b.reduce(function(a,c,d){return"undefined"!=typeof a?(d===b.length-1&&delete a[c],a[c]):void 0},a),c.reduce(function(a,b,d){return"undefined"==typeof a[b]&&(a[b]={}),d===c.length-1&&(a[b]=f),a[b]},a))},h.PolyChart=function(){function a(){var a=c[0].geometryConfig,b=a.container;"string"==typeof b&&(b=d.select(b)),b.datum(c).each(function(b,c){function e(b,c){var d=a.radialScale(b[1]),e=(a.angularScale(b[0])+a.orientation)*Math.PI/180;return{r:d,t:e}}function f(a){var b=a.r*Math.cos(a.t),c=a.r*Math.sin(a.t);return{x:b,y:c}}var h=!!b[0].data.yStack,i=b.map(function(a,b){return h?d.zip(a.data.t[0],a.data.r[0],a.data.yStack[0]):d.zip(a.data.t[0],a.data.r[0])}),j=a.angularScale,k=a.radialScale.domain()[0],l={};l.bar=function(c,e,f){var g=b[f].data,h=a.radialScale(c[1])-a.radialScale(0),i=a.radialScale(c[2]||0),k=g.barWidth;d.select(this).attr({"class":"mark bar",d:"M"+[[h+i,-k/2],[h+i,k/2],[i,k/2],[i,-k/2]].join("L")+"Z",transform:function(b,c){return"rotate("+(a.orientation+j(b[0]))+")"}})},l.dot=function(a,c,g){var h=a[2]?[a[0],a[1]+a[2]]:a,i=d.svg.symbol().size(b[g].data.dotSize).type(b[g].data.dotType)(a,c);d.select(this).attr({"class":"mark dot",d:i,transform:function(a,b){var c=f(e(h));return"translate("+[c.x,c.y]+")"}})};var m=d.svg.line.radial().interpolate(b[0].data.lineInterpolation).radius(function(b){return a.radialScale(b[1])}).angle(function(b){return a.angularScale(b[0])*Math.PI/180});l.line=function(c,e,f){var g=c[2]?i[f].map(function(a,b){return[a[0],a[1]+a[2]]}):i[f];if(d.select(this).each(l.dot).style({opacity:function(a,c){return+b[f].data.dotVisible},fill:q.stroke(c,e,f)}).attr({"class":"mark dot"}),!(e>0)){var h=d.select(this.parentNode).selectAll("path.line").data([0]);h.enter().insert("path"),h.attr({"class":"line",d:m(g),transform:function(b,c){return"rotate("+(a.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(a,b){return q.fill(c,e,f)},"fill-opacity":0,stroke:function(a,b){return q.stroke(c,e,f)},"stroke-width":function(a,b){return q["stroke-width"](c,e,f)},"stroke-dasharray":function(a,b){return q["stroke-dasharray"](c,e,f)},opacity:function(a,b){return q.opacity(c,e,f)},display:function(a,b){return q.display(c,e,f)}})}};var n=a.angularScale.range(),o=Math.abs(n[1]-n[0])/i[0].length*Math.PI/180,p=d.svg.arc().startAngle(function(a){return-o/2}).endAngle(function(a){return o/2}).innerRadius(function(b){return a.radialScale(k+(b[2]||0))}).outerRadius(function(b){return a.radialScale(k+(b[2]||0))+a.radialScale(b[1])});l.arc=function(b,c,e){d.select(this).attr({"class":"mark arc",d:p,transform:function(b,c){return"rotate("+(a.orientation+j(b[0])+90)+")"}})};var q={fill:function(a,c,d){return b[d].data.color},stroke:function(a,c,d){return b[d].data.strokeColor},"stroke-width":function(a,c,d){return b[d].data.strokeSize+"px"},"stroke-dasharray":function(a,c,d){return g[b[d].data.strokeDash]},opacity:function(a,c,d){return b[d].data.opacity},display:function(a,c,d){return"undefined"==typeof b[d].data.visible||b[d].data.visible?"block":"none"}},r=d.select(this).selectAll("g.layer").data(i);r.enter().append("g").attr({"class":"layer"});var s=r.selectAll("path.mark").data(function(a,b){return a});s.enter().append("path").attr({"class":"mark"}),s.style(q).each(l[a.geometryType]),s.exit().remove(),r.exit().remove()})}var b,c=[h.PolyChart.defaultConfig()],e=d.dispatch("hover"),g={solid:"none",dash:[5,2],dot:[2,5]};return a.config=function(a){return arguments.length?(a.forEach(function(a,b){c[b]||(c[b]={}),f(c[b],h.PolyChart.defaultConfig()),f(c[b],a)}),this):c},a.getColorScale=function(){return b},d.rebind(a,e,"on"),a},h.PolyChart.defaultConfig=function(){var a={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:d.scale.category20()}};return a},h.BarChart=function(){return h.PolyChart()},h.BarChart.defaultConfig=function(){var a={geometryConfig:{geometryType:"bar"}};return a},h.AreaChart=function(){return h.PolyChart()},h.AreaChart.defaultConfig=function(){var a={geometryConfig:{geometryType:"arc"}};return a},h.DotPlot=function(){return h.PolyChart()},h.DotPlot.defaultConfig=function(){var a={geometryConfig:{geometryType:"dot",dotType:"circle"}};return a},h.LinePlot=function(){return h.PolyChart()},h.LinePlot.defaultConfig=function(){var a={geometryConfig:{geometryType:"line"}};return a},h.Legend=function(){function a(){var c=b.legendConfig,e=b.data.map(function(a,b){return[].concat(a).map(function(a,d){var e=f({},c.elements[b]);return e.name=a,e.color=[].concat(c.elements[b].color)[d],e})}),g=d.merge(e);g=g.filter(function(a,b){return c.elements[b]&&(c.elements[b].visibleInLegend||"undefined"==typeof c.elements[b].visibleInLegend)}),c.reverseOrder&&(g=g.reverse());var h=c.container;("string"==typeof h||h.nodeName)&&(h=d.select(h));var i=g.map(function(a,b){return a.color}),j=c.fontSize,k=null==c.isContinuous?"number"==typeof g[0]:c.isContinuous,l=k?c.height:j*g.length,m=h.classed("legend-group",!0),n=m.selectAll("svg").data([0]),o=n.enter().append("svg").attr({width:300,height:l+j,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});o.append("g").classed("legend-axis",!0),o.append("g").classed("legend-marks",!0);var p=d.range(g.length),q=d.scale[k?"linear":"ordinal"]().domain(p).range(i),r=d.scale[k?"linear":"ordinal"]().domain(p)[k?"range":"rangePoints"]([0,l]),s=function(a,b){var c=3*b;return"line"===a?"M"+[[-b/2,-b/12],[b/2,-b/12],[b/2,b/12],[-b/2,b/12]]+"Z":-1!=d.svg.symbolTypes.indexOf(a)?d.svg.symbol().type(a).size(c)():d.svg.symbol().type("square").size(c)()};if(k){var t=n.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(i);t.enter().append("stop"),t.attr({offset:function(a,b){return b/(i.length-1)*100+"%"}}).style({"stop-color":function(a,b){return a}}),n.append("rect").classed("legend-mark",!0).attr({height:c.height,width:c.colorBandWidth,fill:"url(#grad1)"})}else{var u=n.select(".legend-marks").selectAll("path.legend-mark").data(g);u.enter().append("path").classed("legend-mark",!0),u.attr({transform:function(a,b){return"translate("+[j/2,r(b)+j/2]+")"},d:function(a,b){var c=a.symbol;return s(c,j)},fill:function(a,b){return q(b)}}),u.exit().remove()}var v=d.svg.axis().scale(r).orient("right"),w=n.select("g.legend-axis").attr({transform:"translate("+[k?c.colorBandWidth:j,j/2]+")"}).call(v);return w.selectAll(".domain").style({fill:"none",stroke:"none"}),w.selectAll("line").style({fill:"none",stroke:k?c.textColor:"none"}),w.selectAll("text").style({fill:c.textColor,"font-size":c.fontSize}).text(function(a,b){return g[b].name}),a}var b=h.Legend.defaultConfig(),c=d.dispatch("hover");return a.config=function(a){return arguments.length?(f(b,a),this):b},d.rebind(a,c,"on"),a},h.Legend.defaultConfig=function(a,b){var c={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return c},h.tooltipPanel=function(){var a,b,c,e={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},g="tooltip-"+h.tooltipPanel.uid++,i=10,j=function(){a=e.container.selectAll("g."+g).data([0]);var d=a.enter().append("g").classed(g,!0).style({"pointer-events":"none",display:"none"});return c=d.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),b=d.append("text").attr({dx:e.padding+i,dy:.3*+e.fontSize}),j};return j.text=function(f){var g=d.hsl(e.color).l,h=g>=.5?"#aaa":"white",k=g>=.5?"black":"white",l=f||"";b.style({fill:k,"font-size":e.fontSize+"px"}).text(l);var m=e.padding,n=b.node().getBBox(),o={fill:e.color,stroke:h,"stroke-width":"2px"},p=n.width+2*m+i,q=n.height+2*m;return c.attr({d:"M"+[[i,-q/2],[i,-q/4],[e.hasTick?0:i,0],[i,q/4],[i,q/2],[p,q/2],[p,-q/2]].join("L")+"Z"}).style(o),a.attr({transform:"translate("+[i,-q/2+2*m]+")"}),a.style({display:"block"}),j},j.move=function(b){return a?(a.attr({transform:"translate("+[b[0],b[1]]+")"}).style({display:"block"}),j):void 0},j.hide=function(){return a?(a.style({display:"none"}),j):void 0},j.show=function(){return a?(a.style({display:"block"}),j):void 0},j.config=function(a){return f(e,a),j},j},h.tooltipPanel.uid=1,h.adapter={},h.adapter.plotly=function(){var a={};return a.convert=function(a,b){var c={};if(a.data&&(c.data=a.data.map(function(a,c){var d=f({},a),e=[[d,["marker","color"],["color"]],[d,["marker","opacity"],["opacity"]],[d,["marker","line","color"],["strokeColor"]],[d,["marker","line","dash"],["strokeDash"]],[d,["marker","line","width"],["strokeSize"]],[d,["marker","symbol"],["dotType"]],[d,["marker","size"],["dotSize"]],[d,["marker","barWidth"],["barWidth"]],[d,["line","interpolation"],["lineInterpolation"]],[d,["showlegend"],["visibleInLegend"]]];return e.forEach(function(a,c){h.util.translator.apply(null,a.concat(b))}),b||delete d.marker,b&&delete d.groupId,b?("LinePlot"===d.geometry?(d.type="scatter",d.dotVisible===!0?(delete d.dotVisible,d.mode="lines+markers"):d.mode="lines"):"DotPlot"===d.geometry?(d.type="scatter",d.mode="markers"):"AreaChart"===d.geometry?d.type="area":"BarChart"===d.geometry&&(d.type="bar"),delete d.geometry):("scatter"===d.type?"lines"===d.mode?d.geometry="LinePlot":"markers"===d.mode?d.geometry="DotPlot":"lines+markers"===d.mode&&(d.geometry="LinePlot",d.dotVisible=!0):"area"===d.type?d.geometry="AreaChart":"bar"===d.type&&(d.geometry="BarChart"),delete d.mode,delete d.type),d}),!b&&a.layout&&"stack"===a.layout.barmode)){var e=h.util.duplicates(c.data.map(function(a,b){return a.geometry}));c.data.forEach(function(a,b){var d=e.indexOf(a.geometry);-1!=d&&(c.data[b].groupId=d)})}if(a.layout){var g=f({},a.layout),i=[[g,["plot_bgcolor"],["backgroundColor"]],[g,["showlegend"],["showLegend"]],[g,["radialaxis"],["radialAxis"]],[g,["angularaxis"],["angularAxis"]],[g.angularaxis,["showline"],["gridLinesVisible"]],[g.angularaxis,["showticklabels"],["labelsVisible"]],[g.angularaxis,["nticks"],["ticksCount"]],[g.angularaxis,["tickorientation"],["tickOrientation"]],[g.angularaxis,["ticksuffix"],["ticksSuffix"]],[g.angularaxis,["range"],["domain"]],[g.angularaxis,["endpadding"],["endPadding"]],[g.radialaxis,["showline"],["gridLinesVisible"]],[g.radialaxis,["tickorientation"],["tickOrientation"]],[g.radialaxis,["ticksuffix"],["ticksSuffix"]],[g.radialaxis,["range"],["domain"]],[g.angularAxis,["showline"],["gridLinesVisible"]],[g.angularAxis,["showticklabels"],["labelsVisible"]],[g.angularAxis,["nticks"],["ticksCount"]],[g.angularAxis,["tickorientation"],["tickOrientation"]],[g.angularAxis,["ticksuffix"],["ticksSuffix"]],[g.angularAxis,["range"],["domain"]],[g.angularAxis,["endpadding"],["endPadding"]],[g.radialAxis,["showline"],["gridLinesVisible"]],[g.radialAxis,["tickorientation"],["tickOrientation"]],[g.radialAxis,["ticksuffix"],["ticksSuffix"]],[g.radialAxis,["range"],["domain"]],[g.font,["outlinecolor"],["outlineColor"]],[g.legend,["traceorder"],["reverseOrder"]],[g,["labeloffset"],["labelOffset"]],[g,["defaultcolorrange"],["defaultColorRange"]]];if(i.forEach(function(a,c){h.util.translator.apply(null,a.concat(b))}),b?("undefined"!=typeof g.tickLength&&(g.angularaxis.ticklen=g.tickLength,delete g.tickLength),g.tickColor&&(g.angularaxis.tickcolor=g.tickColor,delete g.tickColor)):(g.angularAxis&&"undefined"!=typeof g.angularAxis.ticklen&&(g.tickLength=g.angularAxis.ticklen),g.angularAxis&&"undefined"!=typeof g.angularAxis.tickcolor&&(g.tickColor=g.angularAxis.tickcolor)),g.legend&&"boolean"!=typeof g.legend.reverseOrder&&(g.legend.reverseOrder="normal"!=g.legend.reverseOrder),g.legend&&"boolean"==typeof g.legend.traceorder&&(g.legend.traceorder=g.legend.traceorder?"reversed":"normal",delete g.legend.reverseOrder),g.margin&&"undefined"!=typeof g.margin.t){var j=["t","r","b","l","pad"],k=["top","right","bottom","left","pad"],l={};d.entries(g.margin).forEach(function(a,b){l[k[j.indexOf(a.key)]]=a.value}),g.margin=l}b&&(delete g.needsEndSpacing,delete g.minorTickColor,delete g.minorTicks,delete g.angularaxis.ticksCount,delete g.angularaxis.ticksCount,delete g.angularaxis.ticksStep,delete g.angularaxis.rewriteTicks,delete g.angularaxis.nticks,delete g.radialaxis.ticksCount,delete g.radialaxis.ticksCount,delete g.radialaxis.ticksStep,delete g.radialaxis.rewriteTicks,delete g.radialaxis.nticks),c.layout=g}return c},a}},{"../../constants/alignment":711,"../../lib":738,d3:123}],851:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../lib"),f=a("../../components/color"),g=a("./micropolar"),h=a("./undo_manager"),i=e.extendDeepAll,j=b.exports={};j.framework=function(a){function b(b,e){return e&&(l=e),d.select(d.select(l).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),c=c?i(c,b):b,f||(f=g.Axis()),k=g.adapter.plotly().convert(c),f.config(k).render(l),a.data=c.data,a.layout=c.layout,j.fillLayout(a),c}var c,e,f,k,l,m=new h;return b.isPolar=!0,b.svg=function(){return f.svg()},b.getConfig=function(){return c},b.getLiveConfig=function(){return g.adapter.plotly().convert(f.getLiveConfig(),!0)},b.getLiveScales=function(){return{t:f.angularScale(),r:f.radialScale()}},b.setUndoPoint=function(){var a=this,b=g.util.cloneJson(c);!function(b,c){m.add({undo:function(){c&&a(c)},redo:function(){a(b)}})}(b,e),e=g.util.cloneJson(b)},b.undo=function(){m.undo()},b.redo=function(){m.redo()},b},j.fillLayout=function(a){var b=d.select(a).selectAll(".plot-container"),c=b.selectAll(".svg-container"),e=a.framework&&a.framework.svg&&a.framework.svg(),g={width:800,height:600,paper_bgcolor:f.background,_container:b,_paperdiv:c,_paper:e};a._fullLayout=i(g,a.layout)}},{"../../components/color":613,"../../lib":738,"./micropolar":850,"./undo_manager":852,d3:123}],852:[function(a,b,c){"use strict";b.exports=function(){function a(a,b){return a?(e=!0,a[b](),e=!1,this):this}var b,c=[],d=-1,e=!1;
return{add:function(a){return e?this:(c.splice(d+1,c.length-d),c.push(a),d=c.length-1,this)},setCallback:function(a){b=a},undo:function(){var e=c[d];return e?(a(e,"undo"),d-=1,b&&b(e.undo),this):this},redo:function(){var e=c[d+1];return e?(a(e,"redo"),d+=1,b&&b(e.redo),this):this},clear:function(){c=[],d=-1},hasUndo:function(){return-1!==d},hasRedo:function(){return d<c.length-1},getCommands:function(){return c},getPreviousCommand:function(){return c[d-1]},getIndex:function(){return d}}}},{}],853:[function(a,b,c){"use strict";var d=a("../lib");b.exports=function(a,b,c,e){function f(a,b){return d.coerce(g,h,j,a,b)}for(var g,h,i=e.type,j=e.attributes,k=e.handleDefaults,l=e.partition||"x",m=b._subplots[i],n=m.length,o=0;n>o;o++){var p=m[o];g=a[p]?a[p]:a[p]={},b[p]=h={},f("domain."+l,[o/n,(o+1)/n]),f("domain."+{x:"y",y:"x"}[l]),e.id=p,k(g,h,f,e)}}},{"../lib":738}],854:[function(a,b,c){"use strict";var d=a("./ternary"),e=a("../../plots/get_data").getSubplotCalcData,f=a("../../lib").counterRegex,g="ternary";c.name=g,c.attr="subplot",c.idRoot=g,c.idRegex=c.attrRegex=f(g),c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){for(var b=a._fullLayout,c=a.calcdata,f=b._subplots[g],h=0;h<f.length;h++){var i=f[h],j=e(c,g,i),k=b[i]._subplot;k||(k=new d({id:i,graphDiv:a,container:b._ternarylayer.node()},b),b[i]._subplot=k),k.plot(j,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=d._subplots[g]||[],f=0;f<e.length;f++){var h=e[f],i=d[h]._subplot;!b[h]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove())}}},{"../../lib":738,"../../plots/get_data":820,"./layout/attributes":855,"./layout/defaults":858,"./layout/layout_attributes":859,"./ternary":860}],855:[function(a,b,c){"use strict";b.exports={subplot:{valType:"subplotid",dflt:"ternary",editType:"calc"}}},{}],856:[function(a,b,c){"use strict";var d=a("../../cartesian/layout_attributes"),e=a("../../../lib/extend").extendFlat;b.exports={title:d.title,titlefont:d.titlefont,color:d.color,tickmode:d.tickmode,nticks:e({},d.nticks,{dflt:6,min:1}),tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:d.ticks,ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,showtickprefix:d.showtickprefix,tickprefix:d.tickprefix,showticksuffix:d.showticksuffix,ticksuffix:d.ticksuffix,showexponent:d.showexponent,exponentformat:d.exponentformat,separatethousands:d.separatethousands,tickfont:d.tickfont,tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,hoverformat:d.hoverformat,showline:e({},d.showline,{dflt:!0}),linecolor:d.linecolor,linewidth:d.linewidth,showgrid:e({},d.showgrid,{dflt:!0}),gridcolor:d.gridcolor,gridwidth:d.gridwidth,layer:d.layer,min:{valType:"number",dflt:0,min:0}}},{"../../../lib/extend":727,"../../cartesian/layout_attributes":797}],857:[function(a,b,c){"use strict";var d=a("tinycolor2").mix,e=a("../../../lib"),f=a("./axis_attributes"),g=a("../../cartesian/tick_label_defaults"),h=a("../../cartesian/tick_mark_defaults"),i=a("../../cartesian/tick_value_defaults");b.exports=function(a,b,c){function j(c,d){return e.coerce(a,b,f,c,d)}b.type="linear";var k=j("color"),l=k===a.color?k:c.font.color,m=b._name,n=m.charAt(0).toUpperCase(),o="Component "+n,p=j("title",o);b._hovertitle=p===o?p:n,e.coerceFont(j,"titlefont",{family:c.font.family,size:Math.round(1.2*c.font.size),color:l}),j("min"),i(a,b,j,"linear"),g(a,b,j,"linear",{noHover:!1}),h(a,b,j,{outerTicks:!0});var q=j("showticklabels");q&&(e.coerceFont(j,"tickfont",{family:c.font.family,size:c.font.size,color:l}),j("tickangle"),j("tickformat")),j("hoverformat");var r=j("showline");r&&(j("linecolor",k),j("linewidth"));var s=j("showgrid");s&&(j("gridcolor",d(k,c.bgColor,60).toRgbString()),j("gridwidth")),j("layer")}},{"../../../lib":738,"../../cartesian/tick_label_defaults":804,"../../cartesian/tick_mark_defaults":805,"../../cartesian/tick_value_defaults":806,"./axis_attributes":856,tinycolor2:543}],858:[function(a,b,c){"use strict";function d(a,b,c,d){var f=c("bgcolor"),g=c("sum");d.bgColor=e.combine(f,d.paper_bgcolor);for(var j,k,l,m=0;m<i.length;m++)j=i[m],k=a[j]||{},l=b[j]={_name:j,type:"linear"},h(k,l,d);var n=b.aaxis,o=b.baxis,p=b.caxis;n.min+o.min+p.min>=g&&(n.min=0,o.min=0,p.min=0,a.aaxis&&delete a.aaxis.min,a.baxis&&delete a.baxis.min,a.caxis&&delete a.caxis.min)}var e=a("../../../components/color"),f=a("../../subplot_defaults"),g=a("./layout_attributes"),h=a("./axis_defaults"),i=["aaxis","baxis","caxis"];b.exports=function(a,b,c){f(a,b,c,{type:"ternary",attributes:g,handleDefaults:d,font:b.font,paper_bgcolor:b.paper_bgcolor})}},{"../../../components/color":613,"../../subplot_defaults":853,"./axis_defaults":857,"./layout_attributes":859}],859:[function(a,b,c){"use strict";var d=a("../../../components/color/attributes"),e=a("./axis_attributes"),f=a("../../../plot_api/edit_types").overrideAll;b.exports=f({domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},bgcolor:{valType:"color",dflt:d.background},sum:{valType:"number",dflt:1,min:0},aaxis:e,baxis:e,caxis:e},"plot","from-root")},{"../../../components/color/attributes":612,"../../../plot_api/edit_types":769,"./axis_attributes":856}],860:[function(a,b,c){"use strict";function d(a,b){this.id=a.id,this.graphDiv=a.graphDiv,this.init(b),this.makeFramework(b)}function e(a){f.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var f=a("d3"),g=a("tinycolor2"),h=a("../../plotly"),i=a("../../lib"),j=i._,k=a("../../components/color"),l=a("../../components/drawing"),m=a("../cartesian/set_convert"),n=a("../../lib/extend").extendFlat,o=a("../plots"),p=a("../cartesian/axes"),q=a("../../components/dragelement"),r=a("../../components/fx"),s=a("../../components/titles"),t=a("../cartesian/select"),u=a("../cartesian/constants");b.exports=d;var v=d.prototype;v.init=function(a){this.container=a._ternarylayer,this.defs=a._defs,this.layoutId=a._uid,this.traceHash={},this.layers={}},v.plot=function(a,b){var c=this,d=b[c.id],e=b._size;c._hasClipOnAxisFalse=!1;for(var f=0;f<a.length;f++){var g=a[f][0].trace;if(g.cliponaxis===!1){c._hasClipOnAxisFalse=!0;break}}c.updateLayers(d),c.adjustLayout(d,e),o.generalUpdatePerTraceModule(c,a,d),c.layers.plotbg.select("path").call(k.fill,d.bgcolor)},v.makeFramework=function(a){var b=this,c=a[b.id],d=b.clipId="clip"+b.layoutId+b.id;b.clipDef=a._clips.selectAll("#"+d).data([0]),b.clipDef.enter().append("clipPath").attr("id",d).append("path").attr("d","M0,0Z");var e=b.clipIdRelative="clip-relative"+b.layoutId+b.id;b.clipDefRelative=a._clips.selectAll("#"+e).data([0]),b.clipDefRelative.enter().append("clipPath").attr("id",e).append("path").attr("d","M0,0Z"),b.plotContainer=b.container.selectAll("g."+b.id).data([0]),b.plotContainer.enter().append("g").classed(b.id,!0),b.updateLayers(c),l.setClipUrl(b.layers.backplot,d),l.setClipUrl(b.layers.grids,d)},v.updateLayers=function(a){var b=this,c=b.layers,d=["draglayer","plotbg","backplot","grids"];"below traces"===a.aaxis.layer&&d.push("aaxis","aline"),"below traces"===a.baxis.layer&&d.push("baxis","bline"),"below traces"===a.caxis.layer&&d.push("caxis","cline"),d.push("frontplot"),"above traces"===a.aaxis.layer&&d.push("aaxis","aline"),"above traces"===a.baxis.layer&&d.push("baxis","bline"),"above traces"===a.caxis.layer&&d.push("caxis","cline");var e=b.plotContainer.selectAll("g.toplevel").data(d,String),g=["agrid","bgrid","cgrid"];e.enter().append("g").attr("class",function(a){return"toplevel "+a}).each(function(a){var b=f.select(this);c[a]=b,"frontplot"===a?b.append("g").classed("scatterlayer",!0):"backplot"===a?b.append("g").classed("maplayer",!0):"plotbg"===a?b.append("path").attr("d","M0,0Z"):"aline"===a||"bline"===a||"cline"===a?b.append("path"):"grids"===a&&g.forEach(function(a){c[a]=b.append("g").classed("grid "+a,!0);var d="bgrid"===a?"x":"y";c[a].append("g").classed(d,!0)})}),e.order()};var w=Math.sqrt(4/3);v.adjustLayout=function(a,b){var c,d,e,f,g,h,i=this,j=a.domain,o=(j.x[0]+j.x[1])/2,p=(j.y[0]+j.y[1])/2,q=j.x[1]-j.x[0],r=j.y[1]-j.y[0],s=q*b.w,t=r*b.h,u=a.sum,v=a.aaxis.min,x=a.baxis.min,y=a.caxis.min;s>w*t?(f=t,e=f*w):(e=s,f=e/w),g=q*e/s,h=r*f/t,c=b.l+b.w*o-e/2,d=b.t+b.h*(1-p)-f/2,i.x0=c,i.y0=d,i.w=e,i.h=f,i.sum=u,i.xaxis={type:"linear",range:[v+2*y-u,u-v-2*x],domain:[o-g/2,o+g/2],_id:"x"},m(i.xaxis,i.graphDiv._fullLayout),i.xaxis.setScale(),i.xaxis.isPtWithinRange=function(a){return a.a>=i.aaxis.range[0]&&a.a<=i.aaxis.range[1]&&a.b>=i.baxis.range[1]&&a.b<=i.baxis.range[0]&&a.c>=i.caxis.range[1]&&a.c<=i.caxis.range[0]},i.yaxis={type:"linear",range:[v,u-x-y],domain:[p-h/2,p+h/2],_id:"y"},m(i.yaxis,i.graphDiv._fullLayout),i.yaxis.setScale(),i.yaxis.isPtWithinRange=function(){return!0};var z=i.yaxis.domain[0],A=i.aaxis=n({},a.aaxis,{visible:!0,range:[v,u-x-y],side:"left",_counterangle:30,tickangle:(+a.aaxis.tickangle||0)-30,domain:[z,z+h*w],_axislayer:i.layers.aaxis,_gridlayer:i.layers.agrid,_pos:0,_id:"y",_length:e,_gridpath:"M0,0l"+f+",-"+e/2});m(A,i.graphDiv._fullLayout),A.setScale();var B=i.baxis=n({},a.baxis,{visible:!0,range:[u-v-y,x],side:"bottom",_counterangle:30,domain:i.xaxis.domain,_axislayer:i.layers.baxis,_gridlayer:i.layers.bgrid,_counteraxis:i.aaxis,_pos:0,_id:"x",_length:e,_gridpath:"M0,0l-"+e/2+",-"+f});m(B,i.graphDiv._fullLayout),B.setScale(),A._counteraxis=B;var C=i.caxis=n({},a.caxis,{visible:!0,range:[u-v-x,y],side:"right",_counterangle:30,tickangle:(+a.caxis.tickangle||0)+30,domain:[z,z+h*w],_axislayer:i.layers.caxis,_gridlayer:i.layers.cgrid,_counteraxis:i.baxis,_pos:0,_id:"y",_length:e,_gridpath:"M0,0l-"+f+","+e/2});m(C,i.graphDiv._fullLayout),C.setScale();var D="M"+c+","+(d+f)+"h"+e+"l-"+e/2+",-"+f+"Z";i.clipDef.select("path").attr("d",D),i.layers.plotbg.select("path").attr("d",D);var E="M0,"+f+"h"+e+"l-"+e/2+",-"+f+"Z";i.clipDefRelative.select("path").attr("d",E);var F="translate("+c+","+d+")";i.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",F),i.clipDefRelative.select("path").attr("transform",null);var G="translate("+(c-B._offset)+","+(d+f)+")";i.layers.baxis.attr("transform",G),i.layers.bgrid.attr("transform",G);var H="translate("+(c+e/2)+","+d+")rotate(30)translate(0,-"+A._offset+")";i.layers.aaxis.attr("transform",H),i.layers.agrid.attr("transform",H);var I="translate("+(c+e/2)+","+d+")rotate(-30)translate(0,-"+C._offset+")";i.layers.caxis.attr("transform",I),i.layers.cgrid.attr("transform",I),i.drawAxes(!0),i.plotContainer.selectAll(".crisp").classed("crisp",!1),i.layers.aline.select("path").attr("d",A.showline?"M"+c+","+(d+f)+"l"+e/2+",-"+f:"M0,0").call(k.stroke,A.linecolor||"#000").style("stroke-width",(A.linewidth||0)+"px"),i.layers.bline.select("path").attr("d",B.showline?"M"+c+","+(d+f)+"h"+e:"M0,0").call(k.stroke,B.linecolor||"#000").style("stroke-width",(B.linewidth||0)+"px"),i.layers.cline.select("path").attr("d",C.showline?"M"+(c+e/2)+","+d+"l"+e/2+","+f:"M0,0").call(k.stroke,C.linecolor||"#000").style("stroke-width",(C.linewidth||0)+"px"),i.graphDiv._context.staticPlot||i.initInteractions(),l.setClipUrl(i.layers.frontplot,i._hasClipOnAxisFalse?null:i.clipId)},v.drawAxes=function(a){var b=this,c=b.graphDiv,d=b.id.substr(7)+"title",e=b.aaxis,f=b.baxis,g=b.caxis;if(p.doTicks(c,e,!0),p.doTicks(c,f,!0),p.doTicks(c,g,!0),a){var h=Math.max(e.showticklabels?e.tickfont.size/2:0,(g.showticklabels?.75*g.tickfont.size:0)+("outside"===g.ticks?.87*g.ticklen:0));s.draw(c,"a"+d,{propContainer:e,propName:b.id+".aaxis.title",placeholder:j(c,"Click to enter Component A title"),attributes:{x:b.x0+b.w/2,y:b.y0-e.titlefont.size/3-h,"text-anchor":"middle"}});var i=(f.showticklabels?f.tickfont.size:0)+("outside"===f.ticks?f.ticklen:0)+3;s.draw(c,"b"+d,{propContainer:f,propName:b.id+".baxis.title",placeholder:j(c,"Click to enter Component B title"),attributes:{x:b.x0-i,y:b.y0+b.h+.83*f.titlefont.size+i,"text-anchor":"middle"}}),s.draw(c,"c"+d,{propContainer:g,propName:b.id+".caxis.title",placeholder:j(c,"Click to enter Component C title"),attributes:{x:b.x0+b.w+i,y:b.y0+b.h+.83*g.titlefont.size+i,"text-anchor":"middle"}})}};var x=u.MINZOOM/2+.87,y="m-0.87,.5h"+x+"v3h-"+(x+5.2)+"l"+(x/2+2.6)+",-"+(.87*x+4.5)+"l2.6,1.5l-"+x/2+","+.87*x+"Z",z="m0.87,.5h-"+x+"v3h"+(x+5.2)+"l-"+(x/2+2.6)+",-"+(.87*x+4.5)+"l-2.6,1.5l"+x/2+","+.87*x+"Z",A="m0,1l"+x/2+","+.87*x+"l2.6,-1.5l-"+(x/2+2.6)+",-"+(.87*x+4.5)+"l-"+(x/2+2.6)+","+(.87*x+4.5)+"l2.6,1.5l"+x/2+",-"+.87*x+"Z",B="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",C=!0;v.initInteractions=function(){function a(a,b,c){var d=M.getBoundingClientRect();v=b-d.left,x=c-d.top,D={a:L.aaxis.range[0],b:L.baxis.range[1],c:L.caxis.range[1]},F=D,E=L.aaxis.range[1]-D.a,G=g(L.graphDiv._fullLayout[L.id].bgcolor).getLuminance(),H="M0,"+L.h+"L"+L.w/2+", 0L"+L.w+","+L.h+"Z",I=!1,J=O.append("path").attr("class","zoombox").attr("transform","translate("+L.x0+", "+L.y0+")").style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",H),K=O.append("path").attr("class","zoombox-corners").attr("transform","translate("+L.x0+", "+L.y0+")").style({fill:k.background,stroke:k.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),s()}function b(a,b){return 1-b/L.h}function c(a,b){return 1-(a+(L.h-b)/Math.sqrt(3))/L.w}function d(a,b){return(a-(L.h-b)/Math.sqrt(3))/L.w}function f(a,e){var f=v+a,g=x+e,h=Math.max(0,Math.min(1,b(v,x),b(f,g))),i=Math.max(0,Math.min(1,c(v,x),c(f,g))),j=Math.max(0,Math.min(1,d(v,x),d(f,g))),k=(h/2+j)*L.w,l=(1-h/2-i)*L.w,m=(k+l)/2,n=l-k,o=(1-h)*L.h,p=o-n/w;n<u.MINZOOM?(F=D,J.attr("d",H),K.attr("d","M0,0Z")):(F={a:D.a+h*E,b:D.b+i*E,c:D.c+j*E},J.attr("d",H+"M"+k+","+o+"H"+l+"L"+m+","+p+"L"+k+","+o+"Z"),K.attr("d","M"+v+","+x+B+"M"+k+","+o+y+"M"+l+","+o+z+"M"+m+","+p+A)),I||(J.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),K.transition().style("opacity",1).duration(200),I=!0)}function m(){if(e(N),F!==D){var a={};a[L.id+".aaxis.min"]=F.a,a[L.id+".baxis.min"]=F.b,a[L.id+".caxis.min"]=F.c,h.relayout(N,a),C&&N.data&&N._context.showTips&&(i.notifier(j(N,"Double-click to zoom back out"),"long"),C=!1)}}function n(){D={a:L.aaxis.range[0],b:L.baxis.range[1],c:L.caxis.range[1]},F=D}function o(a,b){var c=a/L.xaxis._m,d=b/L.yaxis._m;F={a:D.a-d,b:D.b+(c+d)/2,c:D.c-(c-d)/2};var e=[F.a,F.b,F.c].sort(),f={a:e.indexOf(F.a),b:e.indexOf(F.b),c:e.indexOf(F.c)};e[0]<0&&(e[1]+e[0]/2<0?(e[2]+=e[0]+e[1],e[0]=e[1]=0):(e[2]+=e[0]/2,e[1]+=e[0]/2,e[0]=0),F={a:e[f.a],b:e[f.b],c:e[f.c]},b=(D.a-F.a)*L.yaxis._m,a=(D.c-F.c-D.b+F.b)*L.xaxis._m);var g="translate("+(L.x0+a)+","+(L.y0+b)+")";L.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",g);var h="translate("+-a+","+-b+")";L.clipDefRelative.select("path").attr("transform",h),L.aaxis.range=[F.a,L.sum-F.b-F.c],L.baxis.range=[L.sum-F.a-F.c,F.b],L.caxis.range=[L.sum-F.a-F.b,F.c],L.drawAxes(!1),L.plotContainer.selectAll(".crisp").classed("crisp",!1),L._hasClipOnAxisFalse&&L.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,L)}function p(){var a={};a[L.id+".aaxis.min"]=F.a,a[L.id+".baxis.min"]=F.b,a[L.id+".caxis.min"]=F.c,h.relayout(N,a)}function s(){O.selectAll(".select-outline").remove()}var v,x,D,E,F,G,H,I,J,K,L=this,M=L.layers.plotbg.select("path").node(),N=L.graphDiv,O=N._fullLayout._zoomlayer,P={element:M,gd:N,plotinfo:{xaxis:L.xaxis,yaxis:L.yaxis},subplot:L.id,prepFn:function(b,c,d){P.xaxes=[L.xaxis],P.yaxes=[L.yaxis];var e=N._fullLayout.dragmode;b.shiftKey&&(e="pan"===e?"zoom":"pan"),"lasso"===e?P.minDrag=1:P.minDrag=void 0,"zoom"===e?(P.moveFn=f,P.doneFn=m,a(b,c,d)):"pan"===e?(P.moveFn=o,P.doneFn=p,n(),s()):("select"===e||"lasso"===e)&&t(b,c,d,P,e)},clickFn:function(a,b){if(e(N),2===a){var c={};c[L.id+".aaxis.min"]=0,c[L.id+".baxis.min"]=0,c[L.id+".caxis.min"]=0,N.emit("plotly_doubleclick",null),h.relayout(N,c)}r.click(N,b,L.id)}};M.onmousemove=function(a){r.hover(N,a,L.id),N._fullLayout._lasthover=M,N._fullLayout._hoversubplot=L.id},M.onmouseout=function(a){N._dragging||q.unhover(N,a)},q.init(P)}},{"../../components/color":613,"../../components/dragelement":635,"../../components/drawing":638,"../../components/fx":655,"../../components/titles":704,"../../lib":738,"../../lib/extend":727,"../../plotly":780,"../cartesian/axes":785,"../cartesian/constants":790,"../cartesian/select":802,"../cartesian/set_convert":803,"../plots":846,d3:123,tinycolor2:543}],861:[function(a,b,c){"use strict";function d(a){if(a.layoutAttributes){var b=a.layoutAttributes._arrayAttrRegexps;if(b)for(var d=0;d<b.length;d++)k(c.layoutArrayRegexes,b[d])}}function e(a,b){var d=c.componentsRegistry[a].schema;if(d&&d.traces){var e=d.traces[b];e&&n(c.modules[b]._module.attributes,e)}}function f(a,b){var d=c.componentsRegistry[a].schema;if(d&&d.transforms){var e=d.transforms[b];e&&n(c.transformsRegistry[b].attributes,e)}}function g(a,b){var d=c.componentsRegistry[a].schema;if(d&&d.subplots){var e=c.subplotsRegistry[b],f=e.layoutAttributes,g="subplot"===e.attr?e.name:e.attr;Array.isArray(g)&&(g=g[0]);var h=d.subplots[g];f&&h&&n(f,h)}}function h(a){return"object"==typeof a&&(a=a.type),a}var i=a("./lib/loggers"),j=a("./lib/noop"),k=a("./lib/push_unique"),l=a("./lib/extend"),m=l.extendFlat,n=l.extendDeepAll,o=a("./plots/attributes"),p=a("./plots/layout_attributes");c.modules={},c.allCategories={},c.allTypes=[],c.subplotsRegistry={},c.transformsRegistry={},c.componentsRegistry={},c.layoutArrayContainers=[],c.layoutArrayRegexes=[],c.traceLayoutAttributes={},c.localeRegistry={},c.register=function(a,b,d,f){if(c.modules[b])return void i.log("Type "+b+" already registered");for(var g={},h=0;h<d.length;h++)g[d[h]]=!0,c.allCategories[d[h]]=!0;c.modules[b]={_module:a,categories:g},f&&Object.keys(f).length&&(c.modules[b].meta=f),c.allTypes.push(b);for(var j in c.componentsRegistry)e(j,b);a.layoutAttributes&&m(c.traceLayoutAttributes,a.layoutAttributes)},c.registerSubplot=function(a){var b=a.name;if(c.subplotsRegistry[b])return void i.log("Plot type "+b+" already registered.");d(a),c.subplotsRegistry[b]=a;for(var e in c.componentsRegistry)g(e,a.name)},c.registerComponent=function(a){var b=a.name;c.componentsRegistry[b]=a,a.layoutAttributes&&(a.layoutAttributes._isLinkedToArray&&k(c.layoutArrayContainers,b),d(a));for(var h in c.modules)e(b,h);for(var i in c.subplotsRegistry)g(b,i);for(var j in c.transformsRegistry)f(b,j);a.schema&&a.schema.layout&&n(p,a.schema.layout)},c.registerTransform=function(a){c.transformsRegistry[a.name]=a;for(var b in c.componentsRegistry)f(b,a.name)},c.getModule=function(a){if(void 0!==a.r)return i.warn("Tried to put a polar trace on an incompatible graph of cartesian data. Ignoring this dataset.",a),!1;var b=c.modules[h(a)];return b?b._module:!1},c.traceIs=function(a,b){if(a=h(a),"various"===a)return!1;var d=c.modules[a];return d||(a&&"area"!==a&&i.log("Unrecognized trace type "+a+"."),d=c.modules[o.type.dflt]),!!d.categories[b]},c.getTransformIndices=function(a,b){for(var c=[],d=a.transforms||[],e=0;e<d.length;e++)d[e].type===b&&c.push(e);return c},c.hasTransform=function(a,b){for(var c=a.transforms||[],d=0;d<c.length;d++)if(c[d].type===b)return!0;return!1},c.getComponentMethod=function(a,b){var d=c.componentsRegistry[a];return d?d[b]||j:j},c.registerLocale=function(a){var b=a.name,d=b.split("-")[0],e=a.dictionary,f=a.format,g=e&&Object.keys(e).length,h=f&&Object.keys(f).length,i=c.localeRegistry,j=i[b];if(j||(i[b]=j={}),d!==b){var k=i[d];k||(i[d]=k={}),g&&k.dictionary===j.dictionary&&(k.dictionary=e),h&&k.format===j.format&&(k.format=f)}g&&(j.dictionary=e),h&&(j.format=f)}},{"./lib/extend":727,"./lib/loggers":743,"./lib/noop":747,"./lib/push_unique":751,"./plots/attributes":783,"./plots/layout_attributes":837}],862:[function(a,b,c){"use strict";function d(a){var b;switch(a){case"themes__thumb":b={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":b={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:b={}}return b}function e(a){var b=["xaxis","yaxis","zaxis"];return b.indexOf(a.slice(0,5))>-1}var f=a("../lib"),g=f.extendFlat,h=f.extendDeep;b.exports=function(a,b){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var c,f=a.data,i=a.layout,j=h([],f),k=h({},i,d(b.tileClass)),l=a._context||{};if(b.width&&(k.width=b.width),b.height&&(k.height=b.height),"thumbnail"===b.tileClass||"themes__thumb"===b.tileClass){k.annotations=[];var m=Object.keys(k);for(c=0;c<m.length;c++)e(m[c])&&(k[m[c]].title="");for(c=0;c<j.length;c++){var n=j[c];n.showscale=!1,n.marker&&(n.marker.showscale=!1),"pie"===n.type&&(n.textposition="none")}}if(Array.isArray(b.annotations))for(c=0;c<b.annotations.length;c++)k.annotations.push(b.annotations[c]);var o=Object.keys(k).filter(function(a){return a.match(/^scene\d*$/)});if(o.length){var p={};for("thumbnail"===b.tileClass&&(p={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),c=0;c<o.length;c++){var q=k[o[c]];q.xaxis||(q.xaxis={}),q.yaxis||(q.yaxis={}),q.zaxis||(q.zaxis={}),g(q.xaxis,p),g(q.yaxis,p),g(q.zaxis,p),q._scene=null}}var r=document.createElement("div");b.tileClass&&(r.className=b.tileClass);var s={gd:r,td:r,layout:k,data:j,config:{staticPlot:void 0===b.staticPlot?!0:b.staticPlot,plotGlPixelRatio:void 0===b.plotGlPixelRatio?2:b.plotGlPixelRatio,displaylogo:b.displaylogo||!1,showLink:b.showLink||!1,showTips:b.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return"transparent"!==b.setBackground&&(s.config.setBackground=b.setBackground||"opaque"),s.gd.defaultLayout=d(b.tileClass),s}},{"../lib":738}],863:[function(a,b,c){"use strict";function d(a,b){return b=b||{},b.format=b.format||"png",new Promise(function(c,d){a._snapshotInProgress&&d(new Error("Snapshotting already in progress.")),f.isIE()&&"svg"!==b.format&&d(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),a._snapshotInProgress=!0;var h=e(a,b),i=b.filename||a.fn||"newplot";i+="."+b.format,h.then(function(b){return a._snapshotInProgress=!1,g(b,i)}).then(function(a){c(a)})["catch"](function(b){a._snapshotInProgress=!1,d(b)})})}var e=a("../plot_api/to_image"),f=a("../lib"),g=a("./filesaver");b.exports=d},{"../lib":738,"../plot_api/to_image":778,"./filesaver":864}],864:[function(a,b,c){"use strict";var d=function(a,b){var c=document.createElement("a"),d="download"in c,e=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),f=new Promise(function(f,g){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&g(new Error("IE < 10 unsupported")),e&&(document.location.href="data:application/octet-stream"+a.slice(a.search(/[,;]/)),f(b)),b||(b="download"),d&&(c.href=a,c.download=b,document.body.appendChild(c),c.click(),document.body.removeChild(c),f(b)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var h=a.split(/^data:image\/svg\+xml,/)[1],i=decodeURIComponent(h);navigator.msSaveBlob(new Blob([i]),b),f(b)}g(new Error("download error"))});return f};b.exports=d},{}],865:[function(a,b,c){"use strict";c.getDelay=function(a){return a._has&&(a._has("gl3d")||a._has("gl2d"))?500:0},c.getRedrawFunc=function(a){return a.data&&a.data[0]&&a.data[0].r?void 0:function(){(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()})}}},{}],866:[function(a,b,c){"use strict";var d=a("./helpers"),e={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage"),downloadImage:a("./download")};b.exports=e},{"./cloneplot":862,"./download":863,"./helpers":865,"./svgtoimg":867,"./toimage":868,"./tosvg":869}],867:[function(a,b,c){"use strict";function d(a){var b=a.emitter||new f,c=new Promise(function(d,f){var g=window.Image,h=a.svg,i=a.format||"png";if(e.isIE()&&"svg"!==i){var j=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return f(j),a.promise?c:b.emit("error",j)}var k=a.canvas,l=a.scale||1,m=a.width||300,n=a.height||150,o=l*m,p=l*n,q=k.getContext("2d"),r=new g,s="data:image/svg+xml,"+encodeURIComponent(h);k.width=o,k.height=p,r.onload=function(){var c;switch("svg"!==i&&q.drawImage(r,0,0,o,p),i){case"jpeg":c=k.toDataURL("image/jpeg");break;case"png":c=k.toDataURL("image/png");break;case"webp":c=k.toDataURL("image/webp");break;case"svg":c=s;break;default:var e="Image format is not jpeg, png, svg or webp.";if(f(new Error(e)),!a.promise)return b.emit("error",e)}d(c),a.promise||b.emit("success",c)},r.onerror=function(c){return f(c),a.promise?void 0:b.emit("error",c)},r.src=s});return a.promise?c:b}var e=a("../lib"),f=a("events").EventEmitter;b.exports=d},{"../lib":738,events:130}],868:[function(a,b,c){"use strict";function d(a,b){function c(){var a=h.getDelay(m._fullLayout);setTimeout(function(){var a=j(m),c=document.createElement("canvas");c.id=g.randstr(),d=k({format:b.format,width:m._fullLayout.width,height:m._fullLayout.height,canvas:c,emitter:d,svg:a}),d.clean=function(){m&&document.body.removeChild(m)}},a)}var d=new e,l=i(a,{format:"png"}),m=l.gd;m.style.position="absolute",m.style.left="-5000px",document.body.appendChild(m);var n=h.getRedrawFunc(m);return f.plot(m,l.data,l.layout,l.config).then(n).then(c)["catch"](function(a){d.emit("error",a)}),d}var e=a("events").EventEmitter,f=a("../plotly"),g=a("../lib"),h=a("./helpers"),i=a("./cloneplot"),j=a("./tosvg"),k=a("./svgtoimg");b.exports=d},{"../lib":738,"../plotly":780,"./cloneplot":862,"./helpers":865,"./svgtoimg":867,"./tosvg":869,events:130}],869:[function(a,b,c){"use strict";function d(a){var b=f.select("body").append("div").style({display:"none"}).html(""),c=a.replace(/(&[^;]*;)/gi,function(a){return"&lt;"===a?"&#60;":"&rt;"===a?"&#62;":-1!==a.indexOf("<")||-1!==a.indexOf(">")?"":b.html(a).text()});return b.remove(),c}function e(a){return a.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}var f=a("d3"),g=a("../lib"),h=a("../components/drawing"),i=a("../components/color"),j=a("../constants/xmlns_namespaces"),k=/"/g,l="TOBESTRIPPED",m=new RegExp('("'+l+")|("+l+'")',"g");b.exports=function(a,b,c){var n,o=a._fullLayout,p=o._paper,q=o._toppaper,r=o.width,s=o.height;p.insert("rect",":first-child").call(h.setRect,0,0,r,s).call(i.fill,o.paper_bgcolor);var t=o._basePlotModules||[];for(n=0;n<t.length;n++){var u=t[n];u.toSVG&&u.toSVG(a)}if(q){var v=q.node().childNodes,w=Array.prototype.slice.call(v);for(n=0;n<w.length;n++){var x=w[n];x.childNodes.length&&p.node().appendChild(x)}}o._draggers&&o._draggers.remove(),p.node().style.background="",p.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var a=f.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)return void a.remove();a.style({visibility:null,display:null});var b=this.style.fontFamily;b&&-1!==b.indexOf('"')&&a.style("font-family",b.replace(k,l))}),p.selectAll(".point,.scatterpts").each(function(){var a=f.select(this),b=this.style.fill;b&&-1!==b.indexOf("url(")&&a.style("fill",b.replace(k,l))}),("pdf"===b||"eps"===b)&&p.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),p.node().setAttributeNS(j.xmlns,"xmlns",j.svg),p.node().setAttributeNS(j.xmlns,"xmlns:xlink",j.xlink),"svg"===b&&c&&(p.attr("width",c*r),p.attr("height",c*s),p.attr("viewBox","0 0 "+r+" "+s));var y=(new window.XMLSerializer).serializeToString(p.node());return y=d(y),y=e(y),y=y.replace(m,"'"),g.isIE()&&(y=y.replace(/"/gi,"'"),y=y.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),y=y.replace(/(\\')/gi,'"')),y}},{"../components/color":613,"../components/drawing":638,"../constants/xmlns_namespaces":719,"../lib":738,d3:123}],870:[function(a,b,c){"use strict";var d=a("../../lib").mergeArray;b.exports=function(a,b){for(var c=0;c<a.length;c++)a[c].i=c;d(b.text,a,"tx"),d(b.hovertext,a,"htx");var e=b.marker;if(e){d(e.opacity,a,"mo"),d(e.color,a,"mc");var f=e.line;f&&(d(f.color,a,"mlc"),d(f.width,a,"mlw"))}}},{"../../lib":738}],871:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/color_attributes"),f=a("../../components/errorbars/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../plots/font_attributes"),i=a("../../lib/extend").extendFlat,j=h({editType:"calc",arrayOk:!0}),k=d.marker,l=k.line,m=i({},l.width,{dflt:0}),n=i({width:m,editType:"calc"},e("marker.line")),o=i({line:n,editType:"calc"},e("marker"),{showscale:k.showscale,colorbar:g,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});b.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,hovertext:d.hovertext,textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:i({},j,{}),insidetextfont:i({},j,{}),outsidetextfont:i({},j,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:o,selected:{marker:{opacity:d.selected.marker.opacity,color:d.selected.marker.color,editType:"style"},textfont:d.selected.textfont,editType:"style"},unselected:{marker:{opacity:d.unselected.marker.opacity,color:d.unselected.marker.color,editType:"style"},textfont:d.unselected.textfont,editType:"style"},r:d.r,t:d.t,error_y:f,error_x:f,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":614,"../../components/colorscale/color_attributes":621,"../../components/errorbars/attributes":640,"../../lib/extend":727,"../../plots/font_attributes":810,"../scatter/attributes":1054}],872:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../../components/colorscale/has_colorscale"),g=a("../../components/colorscale/calc"),h=a("./arrays_to_calcdata"),i=a("../scatter/calc_selection");b.exports=function(a,b){var c,j,k,l,m,n=e.getFromId(a,b.xaxis||"x"),o=e.getFromId(a,b.yaxis||"y"),p=b.orientation||(b.x&&!b.y?"h":"v");"h"===p?(c=n,k=n.makeCalcdata(b,"x"),j=o.makeCalcdata(b,"y"),m=b.xcalendar):(c=o,k=o.makeCalcdata(b,"y"),j=n.makeCalcdata(b,"x"),m=b.ycalendar);var q=Math.min(j.length,k.length),r=new Array(q);for(l=0;q>l;l++)r[l]={p:j[l],s:k[l]},b.ids&&(r[l].id=String(b.ids[l]));var s,t=b.base;if(Array.isArray(t)){for(l=0;l<Math.min(t.length,r.length);l++)s=c.d2c(t[l],0,m),d(s)?(r[l].b=+s,r[l].hasB=1):r[l].b=0;for(;l<r.length;l++)r[l].b=0}else{s=c.d2c(t,0,m);var u=d(s);for(s=u?s:0,l=0;l<r.length;l++)r[l].b=s,u&&(r[l].hasB=1)}return f(b,"marker")&&g(b,b.marker.color,"marker","c"),f(b,"marker.line")&&g(b,b.marker.line.color,"marker.line","c"),h(r,b),i(r,b),r}},{"../../components/colorscale/calc":620,"../../components/colorscale/has_colorscale":627,"../../plots/cartesian/axes":785,"../scatter/calc_selection":1056,"./arrays_to_calcdata":870,"fast-isnumeric":132}],873:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("../scatter/xy_defaults"),g=a("../bar/style_defaults"),h=a("../../components/errorbars/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=d.coerceFont,m=f(a,b,j,k);if(!m)return void(b.visible=!1);k("orientation",b.x&&!b.y?"h":"v"),k("base"),k("offset"),k("width"),k("text"),k("hovertext");var n=k("textposition"),o=Array.isArray(n)||"auto"===n,p=o||"inside"===n,q=o||"outside"===n;if(p||q){var r=l(k,"textfont",j.font);p&&l(k,"insidetextfont",r),q&&l(k,"outsidetextfont",r),k("constraintext"),k("selected.textfont.color"),k("unselected.textfont.color")}g(a,b,k,c,j),h(a,b,e.defaultLine,{axis:"y"}),h(a,b,e.defaultLine,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(b,k);
}},{"../../components/color":613,"../../components/errorbars/defaults":643,"../../lib":738,"../bar/style_defaults":883,"../scatter/xy_defaults":1078,"./attributes":871}],874:[function(a,b,c){"use strict";var d=a("../../components/fx"),e=a("../../components/errorbars"),f=a("../../components/color"),g=a("../scatter/fill_hover_text");b.exports=function(a,b,c,h){function i(a){return a[o]-a.w/2}function j(a){return a[o]+a.w/2}function k(a){return d.inbox(w(a)-m,x(a)-m)}function l(a){return d.inbox(a.b-n,a[p]-n)+(a[p]-n)/(a[p]-a.b)}var m,n,o,p,q,r,s=a.cd,t=s[0].trace,u=s[0].t,v="closest"===h,w=v?i:function(a){return Math.min(i(a),a.p-u.bardelta/2)},x=v?j:function(a){return Math.max(j(a),a.p+u.bardelta/2)};"h"===t.orientation?(m=c,n=b,o="y",p="x",q=l,r=k):(m=b,n=c,o="x",p="y",r=l,q=k);var y=a[o+"a"],z=a[p+"a"],A=d.getDistanceFunction(h,q,r);if(d.getClosest(s,A,a),a.index!==!1){v||(w=function(a){return Math.min(i(a),a.p-u.bargroupwidth/2)},x=function(a){return Math.max(j(a),a.p+u.bargroupwidth/2)});var B=a.index,C=s[B],D=C.mcc||t.marker.color,E=C.mlcc||t.marker.line.color,F=C.mlw||t.marker.line.width;f.opacity(D)?a.color=D:f.opacity(E)&&F&&(a.color=E);var G=t.base?C.b+C.s:C.s;return a[p+"0"]=a[p+"1"]=z.c2p(C[p],!0),a[p+"LabelVal"]=G,a[o+"0"]=y.c2p(w(C),!0),a[o+"1"]=y.c2p(x(C),!0),a[o+"LabelVal"]=C.p,g(C,t,a),e.hoverInfo(C,t,a),[a]}}},{"../../components/color":613,"../../components/errorbars":644,"../../components/fx":655,"../scatter/fill_hover_text":1062}],875:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("./layout_attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("./layout_defaults"),d.calc=a("./calc"),d.setPositions=a("./set_positions"),d.colorbar=a("../scatter/colorbar"),d.arraysToCalcdata=a("./arrays_to_calcdata"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="bar",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"../scatter/colorbar":1058,"./arrays_to_calcdata":870,"./attributes":871,"./calc":872,"./defaults":873,"./hover":874,"./layout_attributes":876,"./layout_defaults":877,"./plot":878,"./select":879,"./set_positions":880,"./style":882}],876:[function(a,b,c){"use strict";b.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],877:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../plots/cartesian/axes"),f=a("../../lib"),g=a("./layout_attributes");b.exports=function(a,b,c){function h(c,d){return f.coerce(a,b,g,c,d)}for(var i=!1,j=!1,k=!1,l={},m=0;m<c.length;m++){var n=c[m];if(d.traceIs(n,"bar")){if(i=!0,"overlay"!==a.barmode&&"stack"!==a.barmode){var o=n.xaxis+n.yaxis;l[o]&&(k=!0),l[o]=!0}if(n.visible&&"histogram"===n.type){var p=e.getFromId({_fullLayout:b},n["v"===n.orientation?"xaxis":"yaxis"]);"category"!==p.type&&(j=!0)}}}if(i){var q=h("barmode");"overlay"!==q&&h("barnorm"),h("bargap",j&&!k?0:.2),h("bargroupgap")}}},{"../../lib":738,"../../plots/cartesian/axes":785,"../../registry":861,"./layout_attributes":876}],878:[function(a,b,c){"use strict";function d(a,b,c,d,g,m,n,o){function p(b,c,d){var e=b.append("text").text(c).attr({"class":"bartext bartext-"+q,transform:"","text-anchor":"middle","data-notex":1}).call(y.font,d).call(w.convertToTspans,a);return e}var q,r=c[0].trace,s=r.orientation,t=h(r,d);if(t&&(q=i(r,d),"none"!==q)){var u,v,x,z,A=j(r,d,a._fullLayout.font),B=k(r,d,A),C=l(r,d,A),D=a._fullLayout.barmode,E="stack"===D,F="relative"===D,H=E||F,I=c[d],J=!H||I._outmost,K=Math.abs(m-g)-2*G,L=Math.abs(o-n)-2*G;if("outside"===q&&(J||(q="inside")),"auto"===q)if(J){q="inside",u=p(b,t,B),v=y.bBox(u.node()),x=v.width,z=v.height;var M=x>0&&z>0,N=K>=x&&L>=z,O=L>=x&&K>=z,P="h"===s?K>=x*(L/z):L>=z*(K/x);M&&(N||O||P)?q="inside":(q="outside",u.remove(),u=null)}else q="inside";if(!u&&(u=p(b,t,"outside"===q?C:B),v=y.bBox(u.node()),x=v.width,z=v.height,0>=x||0>=z))return void u.remove();var Q,R;"outside"===q?(R="both"===r.constraintext||"outside"===r.constraintext,Q=f(g,m,n,o,v,s,R)):(R="both"===r.constraintext||"inside"===r.constraintext,Q=e(g,m,n,o,v,s,R)),u.attr("transform",Q)}}function e(a,b,c,d,e,f,h){var i,j,k,l,m,n=e.width,o=e.height,p=(e.left+e.right)/2,q=(e.top+e.bottom)/2,r=Math.abs(b-a),s=Math.abs(d-c);r>2*G&&s>2*G?(m=G,r-=2*m,s-=2*m):m=0;var t,u;return r>=n&&s>=o?(t=!1,u=1):s>=n&&r>=o?(t=!0,u=1):o>n==s>r?(t=!1,u=h?Math.min(r/n,s/o):1):(t=!0,u=h?Math.min(s/n,r/o):1),t&&(t=90),t?(i=u*o,j=u*n):(i=u*n,j=u*o),"h"===f?a>b?(k=b+m+i/2,l=(c+d)/2):(k=b-m-i/2,l=(c+d)/2):d>c?(k=(a+b)/2,l=d-m-j/2):(k=(a+b)/2,l=d+m+j/2),g(p,q,k,l,u,t)}function f(a,b,c,d,e,f,h){var i,j="h"===f?Math.abs(d-c):Math.abs(b-a);j>2*G&&(i=G);var k=1;h&&(k="h"===f?Math.min(1,j/e.height):Math.min(1,j/e.width));var l,m,n,o,p=(e.left+e.right)/2,q=(e.top+e.bottom)/2;return l=k*e.width,m=k*e.height,"h"===f?a>b?(n=b-i-l/2,o=(c+d)/2):(n=b+i+l/2,o=(c+d)/2):d>c?(n=(a+b)/2,o=d+i+m/2):(n=(a+b)/2,o=d-i-m/2),g(p,q,n,o,k,!1)}function g(a,b,c,d,e,f){var g,h,i;1>e?g="scale("+e+") ":(e=1,g=""),h=f?"rotate("+f+" "+a+" "+b+") ":"";var j=c-e*a,k=d-e*b;return i="translate("+j+" "+k+")",i+g+h}function h(a,b){var c=n(a.text,b);return o(B,c)}function i(a,b){var c=n(a.textposition,b);return p(C,c)}function j(a,b,c){return m(D,a.textfont,b,c)}function k(a,b,c){return m(E,a.insidetextfont,b,c)}function l(a,b,c){return m(F,a.outsidetextfont,b,c)}function m(a,b,c,d){b=b||{};var e=n(b.family,c),f=n(b.size,c),g=n(b.color,c);return{family:o(a.family,e,d.family),size:q(a.size,f,d.size),color:r(a.color,g,d.color)}}function n(a,b){var c;return Array.isArray(a)?b<a.length&&(c=a[b]):c=a,c}function o(a,b,c){if("string"==typeof b){if(b||!a.noBlank)return b}else if("number"==typeof b&&!a.strict)return String(b);return void 0!==c?c:a.dflt}function p(a,b,c){return a.coerceNumber&&(b=+b),-1!==a.values.indexOf(b)?b:void 0!==c?c:a.dflt}function q(a,b,c){if(t(b)){b=+b;var d=a.min,e=a.max,f=void 0!==d&&d>b||void 0!==e&&b>e;if(!f)return b}return void 0!==c?c:a.dflt}function r(a,b,c){return u(b).isValid()?b:void 0!==c?c:a.dflt}var s=a("d3"),t=a("fast-isnumeric"),u=a("tinycolor2"),v=a("../../lib"),w=a("../../lib/svg_text_utils"),x=a("../../components/color"),y=a("../../components/drawing"),z=a("../../components/errorbars"),A=a("./attributes"),B=A.text,C=A.textposition,D=A.textfont,E=A.insidetextfont,F=A.outsidetextfont,G=3;b.exports=function(a,b,c){var e=b.xaxis,f=b.yaxis,g=a._fullLayout,h=b.plot.select(".barlayer").selectAll("g.trace.bars").data(c);h.enter().append("g").attr("class","trace bars"),h.each(function(a){a[0].node3=s.select(this)}),h.append("g").attr("class","points").each(function(b){var c=s.select(this),h=b[0].t,i=b[0].trace,j=h.poffset,k=Array.isArray(j);c.selectAll("g.point").data(v.identity).enter().append("g").classed("point",!0).each(function(c,h){function l(a){return 0===g.bargap&&0===g.bargroupgap?s.round(Math.round(a)-z,2):a}function m(a,b){return Math.abs(a-b)>=2?l(a):a>b?Math.ceil(a):Math.floor(a)}var n,o,p,q,r=c.p+(k?j[h]:j),u=r+c.w,v=c.b,w=v+c.s;if("h"===i.orientation?(p=f.c2p(r,!0),q=f.c2p(u,!0),n=e.c2p(v,!0),o=e.c2p(w,!0),c.ct=[o,(p+q)/2]):(n=e.c2p(r,!0),o=e.c2p(u,!0),p=f.c2p(v,!0),q=f.c2p(w,!0),c.ct=[(n+o)/2,q]),!(t(n)&&t(o)&&t(p)&&t(q)&&n!==o&&p!==q))return void s.select(this).remove();var y=(c.mlw+1||i.marker.line.width+1||(c.trace?c.trace.marker.line.width:0)+1)-1,z=s.round(y/2%1,2);if(!a._context.staticPlot){var A=x.opacity(c.mc||i.marker.color),B=1>A||y>.01?l:m;n=B(n,o),o=B(o,n),p=B(p,q),q=B(q,p)}var C=s.select(this);C.append("path").style("vector-effect","non-scaling-stroke").attr("d","M"+n+","+p+"V"+q+"H"+o+"V"+p+"Z"),d(a,C,b,h,n,o,p,q)})}),h.call(z.plot,b)}},{"../../components/color":613,"../../components/drawing":638,"../../components/errorbars":644,"../../lib":738,"../../lib/svg_text_utils":761,"./attributes":871,d3:123,"fast-isnumeric":132,tinycolor2:543}],879:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d=a.cd,e=a.xaxis,f=a.yaxis,g=[];if(b===!1)for(c=0;c<d.length;c++)d[c].selected=0;else for(c=0;c<d.length;c++){var h=d[c];b.contains(h.ct)?(g.push({pointNumber:c,x:e.c2d(h.x),y:f.c2d(h.y)}),h.selected=1):h.selected=0}return g}},{}],880:[function(a,b,c){"use strict";function d(a,b,c,d){if(d.length){var h,i,j,k,l,m=a._fullLayout.barmode,n="overlay"===m,o="group"===m;if(n)e(a,b,c,d);else if(o){for(h=[],i=[],j=0;j<d.length;j++)k=d[j],l=k[0].trace,void 0===l.offset?i.push(k):h.push(k);i.length&&f(a,b,c,i),h.length&&e(a,b,c,h)}else{for(h=[],i=[],j=0;j<d.length;j++)k=d[j],l=k[0].trace,void 0===l.base?i.push(k):h.push(k);i.length&&g(a,b,c,i),h.length&&e(a,b,c,h)}}}function e(a,b,c,d){for(var e=a._fullLayout.barnorm,f=!1,g=!e,i=0;i<d.length;i++){var j=d[i],k=new w([j],f,g);h(a,b,k),e?(p(a,c,k),q(a,c,k)):n(a,c,k)}}function f(a,b,c,d){var e=a._fullLayout,f=e.barnorm,g=!1,h=!f,j=new w(d,g,h);i(a,b,j),f?(p(a,c,j),q(a,c,j)):n(a,c,j)}function g(a,b,c,d){var e=a._fullLayout,f=e.barmode,g="stack"===f,i="relative"===f,j=a._fullLayout.barnorm,k=i,l=!(j||g||i),m=new w(d,k,l);h(a,b,m),o(a,c,m);for(var n=0;n<d.length;n++)for(var p=d[n],r=0;r<p.length;r++){var s=p[r];if(s.s!==t){var u=s.b+s.s===m.get(s.p,s.s);u&&(s._outmost=!0)}}j&&q(a,c,m)}function h(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.bargap,m=h.bargroupgap,n=c.minDiff,o=c.traces,p=n*(1-i),q=p,r=q*(1-m),s=-r/2;for(d=0;d<o.length;d++)e=o[d],f=e[0],g=f.t,g.barwidth=r,g.poffset=s,g.bargroupwidth=p,g.bardelta=n;c.binWidth=o[0][0].t.barwidth/100,j(c),k(a,b,c),l(a,b,c)}function i(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.bargap,m=h.bargroupgap,n=c.positions,o=c.distinctPositions,p=c.minDiff,q=c.traces,r=n.length!==o.length,s=q.length,t=p*(1-i),u=r?t/s:t,v=u*(1-m);for(d=0;s>d;d++){e=q[d],f=e[0];var w=r?((2*d+1-s)*u-v)/2:-v/2;g=f.t,g.barwidth=v,g.poffset=w,g.bargroupwidth=t,g.bardelta=p}c.binWidth=q[0][0].t.barwidth/100,j(c),k(a,b,c),l(a,b,c,r)}function j(a){var b,c,d,e,f,g,h=a.traces;for(b=0;b<h.length;b++){c=h[b],d=c[0],e=d.trace,g=d.t;var i,j=e.offset,k=g.poffset;if(Array.isArray(j)){for(i=j.slice(0,c.length),f=0;f<i.length;f++)s(i[f])||(i[f]=k);for(f=i.length;f<c.length;f++)i.push(k);g.poffset=i}else void 0!==j&&(g.poffset=j);var l=e.width,m=g.barwidth;if(Array.isArray(l)){var n=l.slice(0,c.length);for(f=0;f<n.length;f++)s(n[f])||(n[f]=m);for(f=n.length;f<c.length;f++)n.push(m);if(g.barwidth=n,void 0===j){for(i=[],f=0;f<c.length;f++)i.push(k+(m-n[f])/2);g.poffset=i}}else void 0!==l&&(g.barwidth=l,void 0===j&&(g.poffset=k+(m-l)/2))}}function k(a,b,c){for(var d=c.traces,e=r(b),f=0;f<d.length;f++)for(var g=d[f],h=g[0].t,i=h.poffset,j=Array.isArray(i),k=h.barwidth,l=Array.isArray(k),m=0;m<g.length;m++){var n=g[m],o=n.w=l?k[m]:k;n[e]=n.p+(j?i[m]:i)+o/2}}function l(a,b,c,d){var e=c.traces,f=c.distinctPositions,g=f[0],h=c.minDiff,i=h/2;v.minDtick(b,h,g,d);for(var j=Math.min.apply(Math,f)-i,k=Math.max.apply(Math,f)+i,l=0;l<e.length;l++){var m=e[l],n=m[0],o=n.trace;if(void 0!==o.width||void 0!==o.offset)for(var p=n.t,q=p.poffset,r=p.barwidth,s=Array.isArray(q),t=Array.isArray(r),u=0;u<m.length;u++){var w=m[u],x=s?q[u]:q,y=t?r[u]:r,z=w.p,A=z+x,B=A+y;j=Math.min(j,A),k=Math.max(k,B)}}v.expand(b,[j,k],{padded:!1})}function m(a,b){s(a[0])?a[0]=Math.min(a[0],b):a[0]=b,s(a[1])?a[1]=Math.max(a[1],b):a[1]=b}function n(a,b,c){for(var d=c.traces,e=r(b),f=[null,null],g=0;g<d.length;g++)for(var h=d[g],i=0;i<h.length;i++){var j=h[i],k=j.b,l=k+j.s;j[e]=l,s(b.c2l(l))&&m(f,l),j.hasB&&s(b.c2l(k))&&m(f,k)}v.expand(b,f,{tozero:!0,padded:!0})}function o(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.barnorm,j=r(b),k=c.traces,l=[null,null];for(d=0;d<k.length;d++)for(e=k[d],f=0;f<e.length;f++)if(g=e[f],g.s!==t){var n=c.put(g.p,g.b+g.s),o=n+g.b+g.s;g.b=n,g[j]=o,i||(s(b.c2l(o))&&m(l,o),g.hasB&&s(b.c2l(n))&&m(l,n))}i||v.expand(b,l,{tozero:!0,padded:!0})}function p(a,b,c){for(var d=c.traces,e=0;e<d.length;e++)for(var f=d[e],g=0;g<f.length;g++){var h=f[g];h.s!==t&&c.put(h.p,h.b+h.s)}}function q(a,b,c){function d(a){s(b.c2l(a))&&(i-h>a||a>j+h||!s(i))&&(l=!0,m(k,a))}for(var e=c.traces,f=r(b),g="fraction"===a._fullLayout.barnorm?1:100,h=g/1e9,i=b.l2c(b.c2l(0)),j="stack"===a._fullLayout.barmode?g:i,k=[i,j],l=!1,n=0;n<e.length;n++)for(var o=e[n],p=0;p<o.length;p++){var q=o[p];if(q.s!==t){var u=Math.abs(g/c.get(q.p,q.s));q.b*=u,q.s*=u;var w=q.b,x=w+q.s;q[f]=x,d(x),q.hasB&&d(w)}}v.expand(b,k,{tozero:!0,padded:l})}function r(a){return a._id.charAt(0)}var s=a("fast-isnumeric"),t=a("../../constants/numerical").BADNUM,u=a("../../registry"),v=a("../../plots/cartesian/axes"),w=a("./sieve.js");b.exports=function(a,b){var c,e=b.xaxis,f=b.yaxis,g=a._fullData,h=a.calcdata,i=[],j=[];for(c=0;c<g.length;c++){var k=g[c];k.visible===!0&&u.traceIs(k,"bar")&&k.xaxis===e._id&&k.yaxis===f._id&&("h"===k.orientation?i.push(h[c]):j.push(h[c]))}d(a,e,f,j),d(a,f,e,i)}},{"../../constants/numerical":717,"../../plots/cartesian/axes":785,"../../registry":861,"./sieve.js":881,"fast-isnumeric":132}],881:[function(a,b,c){"use strict";function d(a,b,c){this.traces=a,this.separateNegativeValues=b,this.dontMergeOverlappingData=c;for(var d=1/0,g=[],h=0;h<a.length;h++){for(var i=a[h],j=0;j<i.length;j++){var k=i[j];k.p!==f&&g.push(k.p)}i[0]&&i[0].width1&&(d=Math.min(i[0].width1,d))}this.positions=g;var l=e.distinctVals(g);this.distinctPositions=l.vals,1===l.vals.length&&d!==1/0?this.minDiff=d:this.minDiff=Math.min(l.minDiff,d),this.binWidth=this.minDiff,this.bins={}}b.exports=d;var e=a("../../lib"),f=a("../../constants/numerical").BADNUM;d.prototype.put=function(a,b){var c=this.getLabel(a,b),d=this.bins[c]||0;return this.bins[c]=d+b,d},d.prototype.get=function(a,b){var c=this.getLabel(a,b);return this.bins[c]||0},d.prototype.getLabel=function(a,b){var c=0>b&&this.separateNegativeValues?"v":"^",d=this.dontMergeOverlappingData?a:Math.round(a/this.binWidth);return c+d}},{"../../constants/numerical":717,"../../lib":738}],882:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/drawing"),f=a("../../components/errorbars");b.exports=function(a,b){var c=b?b[0].node3:d.select(a).selectAll("g.trace.bars"),g=c.size(),h=a._fullLayout;c.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){("stack"===h.barmode&&g>1||0===h.bargap&&0===h.bargroupgap&&!a[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),c.selectAll("g.points").each(function(b){var c=d.select(this),f=c.selectAll("path"),g=c.selectAll("text"),h=b[0].trace;e.pointStyle(f,h,a),e.selectedPointStyle(f,h),g.each(function(a){function b(b){var d=c[b];return Array.isArray(d)?d[a.i]:d}var c,f=d.select(this);f.classed("bartext-inside")?c=h.insidetextfont:f.classed("bartext-outside")&&(c=h.outsidetextfont),c||(c=h.textfont),e.font(f,b("family"),b("size"),b("color"))}),e.selectedTextStyle(g,h)}),f.style(c)}},{"../../components/drawing":638,"../../components/errorbars":644,d3:123}],883:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("../../components/colorscale/has_colorscale"),f=a("../../components/colorscale/defaults");b.exports=function(a,b,c,g,h){c("marker.color",g),e(a,"marker")&&f(a,b,h,c,{prefix:"marker.",cLetter:"c"}),c("marker.line.color",d.defaultLine),e(a,"marker.line")&&f(a,b,h,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width"),c("marker.opacity"),c("selected.marker.color"),c("unselected.marker.color")}},{"../../components/color":613,"../../components/colorscale/defaults":623,"../../components/colorscale/has_colorscale":627}],884:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/color/attributes"),f=a("../../lib/extend").extendFlat,g=d.marker,h=g.line;b.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},name:{valType:"string",editType:"calc+clearAxisTypes"},text:f({},d.text,{}),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calcIfAutorange"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers",editType:"calcIfAutorange"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1,editType:"calcIfAutorange"},jitter:{valType:"number",min:0,max:1,editType:"calcIfAutorange"},pointpos:{valType:"number",min:-2,max:2,editType:"calcIfAutorange"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:f({},g.symbol,{arrayOk:!1,editType:"plot"}),opacity:f({},g.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:f({},g.size,{arrayOk:!1,editType:"calcIfAutorange"}),color:f({},g.color,{arrayOk:!1,editType:"style"}),line:{color:f({},h.color,{arrayOk:!1,dflt:e.defaultLine,editType:"style"}),width:f({},h.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,selected:{marker:d.selected.marker,editType:"style"},unselected:{marker:d.unselected.marker,editType:"style"},hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":612,"../../lib/extend":727,"../scatter/attributes":1054}],885:[function(a,b,c){"use strict";function d(a,b,c,d,e){if(b in a)return c.makeCalcdata(a,b);var f;f=b+"0"in a?a[b+"0"]:"name"in a&&("category"===c.type||k(a.name)&&-1!==["linear","log"].indexOf(c.type)||l.isDateTime(a.name)&&"date"===c.type)?a.name:e;var g=c.d2c(f,0,a[b+"calendar"]);return d.map(function(){return g})}function e(a,b){for(var c=a.length,d=new Array(c+1),e=0;c>e;e++)d[e]=a[e]-b;return d[c]=a[c-1]+b,d}function f(a){for(var b=new Array(a),c=0;a>c;c++)b[c]=[];return b}function g(a,b,c){var d={text:"tx"};for(var e in d)Array.isArray(b[e])&&(a[d[e]]=b[e][c])}function h(a,b){if(Array.isArray(b.selectedpoints))for(var c=0;c<a.length;c++){for(var d=a[c].pts||[],e={},f=0;f<d.length;f++)e[d[f].i]=f;l.tagSelected(d,b,e)}}function i(a,b){return a.v-b.v}function j(a){return a.v}var k=a("fast-isnumeric"),l=a("../../lib"),m=l._,n=a("../../plots/cartesian/axes");b.exports=function(a,b){var c,o,p,q,r,s=a._fullLayout,t=n.getFromId(a,b.xaxis||"x"),u=n.getFromId(a,b.yaxis||"y"),v=[],w="violin"===b.type?"_numViolins":"_numBoxes";"h"===b.orientation?(o=t,p="x",q=u,r="y"):(o=u,p="y",q=t,r="x");var x=o.makeCalcdata(b,p),y=d(b,r,q,x,s[w]),z=l.distinctVals(y),A=z.vals,B=z.minDiff/2,C=e(A,B),D=x.length,E=A.length,F=f(E);for(c=0;D>c;c++){var G=x[c];if(k(G)){var H=l.findBin(y[c],C);if(H>=0&&E>H){var I={v:G,i:c};g(I,b,c),F[H].push(I)}}}for(c=0;E>c;c++)if(F[c].length>0){var J=F[c].sort(i),K=J.map(j),L=K.length,M={pos:A[c],pts:J};M.min=K[0],M.max=K[L-1],M.mean=l.mean(K,L),M.sd=l.stdev(K,L,M.mean),M.q1=l.interp(K,.25),M.med=l.interp(K,.5),M.q3=l.interp(K,.75),M.lf=Math.min(M.q1,K[Math.min(l.findBin(2.5*M.q1-1.5*M.q3,K,!0)+1,L-1)]),M.uf=Math.max(M.q3,K[Math.max(l.findBin(2.5*M.q3-1.5*M.q1,K),0)]),M.lo=4*M.q1-3*M.q3,M.uo=4*M.q3-3*M.q1,v.push(M)}return h(v,b),n.expand(o,x,{padded:!0}),v.length>0?(v[0].t={num:s[w],dPos:B,posLetter:r,valLetter:p,labels:{med:m(a,"median:"),min:m(a,"min:"),q1:m(a,"q1:"),q3:m(a,"q3:"),max:m(a,"max:"),mean:"sd"===b.boxmean?m(a,"mean ± σ:"):m(a,"mean:"),lf:m(a,"lower fence:"),uf:m(a,"upper fence:")}},s[w]++,v):[{t:{empty:!0}}]}},{"../../lib":738,"../../plots/cartesian/axes":785,"fast-isnumeric":132}],886:[function(a,b,c){"use strict";function d(a,b,c,d){function h(c,d){return g.coerce(a,b,j,c,d)}e(a,b,h,d),b.visible!==!1&&(h("line.color",(a.marker||{}).color||c),h("line.width"),h("fillcolor",i.addOpacity(b.line.color,.5)),h("whiskerwidth"),h("boxmean"),f(a,b,h,{prefix:"box"}))}function e(a,b,c,d){var e,f=c("y"),g=c("x");if(f&&f.length)e="v",g||c("x0");else{if(!g||!g.length)return void(b.visible=!1);e="h",c("y0")}var i=h.getComponentMethod("calendars","handleTraceDefaults");i(a,b,["x","y"],d),c("orientation",e)}function f(a,b,c,d){var e=d.prefix,f=g.coerce2(a,b,j,"marker.outliercolor"),h=c("marker.line.outliercolor"),i=c(e+"points",f||h?"suspectedoutliers":void 0);i?(c("jitter","all"===i?.3:0),c("pointpos","all"===i?-1.5:0),c("marker.symbol"),c("marker.opacity"),c("marker.size"),c("marker.color",b.line.color),c("marker.line.color"),c("marker.line.width"),"suspectedoutliers"===i&&(c("marker.line.outliercolor",b.marker.color),c("marker.line.outlierwidth")),c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size"),c("text")):delete b.marker,c("hoveron"),g.coerceSelectionMarkerOpacity(b,c)}var g=a("../../lib"),h=a("../../registry"),i=a("../../components/color"),j=a("./attributes");b.exports={supplyDefaults:d,handleSampleDefaults:e,handlePointsDefaults:f}},{"../../components/color":613,"../../lib":738,"../../registry":861,"./attributes":884}],887:[function(a,b,c){"use strict";function d(a,b,c,d){var g,h=a.cd,i=h[0].trace,j=i.hoveron,k=[];return-1!==j.indexOf("boxes")&&(k=k.concat(e(a,b,c,d))),-1!==j.indexOf("points")&&(g=f(a,b,c)),"closest"===d?g?[g]:k:g?(k.push(g),k):k}function e(a,b,c,d){var e,f,k,l,m,n,o,p,q,r=a.cd,s=a.xa,t=a.ya,u=r[0].trace,v=r[0].t,w="violin"===u.type,x=[],y="closest"!==d||w?v.bdPos:2.5*v.bdPos,z=function(a){return a.pos+v.bPos-n};w&&"both"!==u.side?("positive"===u.side&&(q=function(a){var b=z(a);return i.inbox(b,b+y)}),"negative"===u.side&&(q=function(a){var b=z(a);return i.inbox(b-y,b)})):q=function(a){var b=z(a);return i.inbox(b-y,b+y)};var A;A=w?function(a){return i.inbox(a.span[0]-m,a.span[1]-m)}:function(a){return i.inbox(a.min-m,a.max-m)},"h"===u.orientation?(m=b,n=c,o=A,p=q,e="y",k=t,f="x",l=s):(m=c,n=b,o=q,p=A,e="x",k=s,f="y",l=t);var B=i.getDistanceFunction(d,o,p);if(i.getClosest(r,B,a),a.index===!1)return[];var C=r[a.index],D=u.line.color,E=(u.marker||{}).color;j.opacity(D)&&u.line.width?a.color=D:j.opacity(E)&&u.boxpoints?a.color=E:a.color=u.fillcolor,a[e+"0"]=k.c2p(C.pos+v.bPos-v.bdPos,!0),a[e+"1"]=k.c2p(C.pos+v.bPos+v.bdPos,!0),g.tickText(k,k.c2l(C.pos),"hover").text,a[e+"LabelVal"]=C.pos;var F={},G=["med","min","q1","q3","max"];(u.boxmean||(u.meanline||{}).visible)&&G.push("mean"),(u.boxpoints||u.points)&&G.push("lf","uf");for(var H=0;H<G.length;H++){var I=G[H];if(I in C&&!(C[I]in F)){F[C[I]]=!0;var J=C[I],K=l.c2p(J,!0),L=h.extendFlat({},a);L[f+"0"]=L[f+"1"]=K,L[f+"LabelVal"]=J,L[f+"Label"]=v.labels[I]+" "+g.hoverLabelText(l,J),"mean"===I&&"sd"in C&&"sd"===u.boxmean&&(L[f+"err"]=C.sd),a.name="",x.push(L)}}return x}function f(a,b,c){for(var d,e,f,g=a.cd,j=a.xa,l=a.ya,m=g[0].trace,n=j.c2p(b),o=l.c2p(c),p=function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(j.c2p(a.x)-n)-b,1-3/b)},q=function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(l.c2p(a.y)-o)-b,1-3/b)},r=i.quadrature(p,q),s=!1,t=0;t<g.length;t++){e=g[t];for(var u=0;u<(e.pts||[]).length;u++){f=e.pts[u];var v=r(f);v<=a.distance&&(a.distance=v,s=[t,u])}}if(!s)return!1;e=g[s[0]],f=e.pts[s[1]];var w=j.c2p(f.x,!0),x=l.c2p(f.y,!0),y=f.mrc||1;return d=h.extendFlat({},a,{index:f.i,color:(m.marker||{}).color,name:m.name,x0:w-y,x1:w+y,xLabelVal:f.x,y0:x-y,y1:x+y,yLabelVal:f.y}),k(f,m,d),d}var g=a("../../plots/cartesian/axes"),h=a("../../lib"),i=a("../../components/fx"),j=a("../../components/color"),k=a("../scatter/fill_hover_text");b.exports={hoverPoints:d,hoverOnBoxes:e,hoverOnPoints:f}},{"../../components/color":613,"../../components/fx":655,"../../lib":738,"../../plots/cartesian/axes":785,"../scatter/fill_hover_text":1062}],888:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("./layout_attributes"),d.supplyDefaults=a("./defaults").supplyDefaults,d.supplyLayoutDefaults=a("./layout_defaults").supplyLayoutDefaults,d.calc=a("./calc"),d.setPositions=a("./set_positions").setPositions,d.plot=a("./plot").plot,d.style=a("./style"),d.hoverPoints=a("./hover").hoverPoints,d.selectPoints=a("./select"),d.moduleType="trace",d.name="box",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","symbols","oriented","box-violin","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"./attributes":884,"./calc":885,"./defaults":886,"./hover":887,"./layout_attributes":889,"./layout_defaults":890,"./plot":891,"./select":892,"./set_positions":893,"./style":894}],889:[function(a,b,c){"use strict";b.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],890:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f,g=0;g<c.length;g++)if(c[g].type===e){f=!0;break}f&&(d(e+"mode"),d(e+"gap"),d(e+"groupgap"))}function e(a,b,c){function e(c,d){return f.coerce(a,b,g,c,d)}d(a,b,c,e,"box")}var f=a("../../lib"),g=a("./layout_attributes");b.exports={supplyLayoutDefaults:e,_supply:d}},{"../../lib":738,"./layout_attributes":889}],891:[function(a,b,c){"use strict";function d(){m=2e9}function e(){var a=m;return m=(69069*m+1)%4294967296,Math.abs(m-a)<429496729?e():m/4294967296}function f(a,b,c){var d=a._fullLayout,e=b.xaxis,f=b.yaxis,k=b.plot.select(".boxlayer").selectAll("g.trace.boxes").data(c).enter().append("g").attr("class","trace boxes");k.each(function(a){var b=a[0],c=b.t,k=b.trace,l=b.node3=j.select(this),m=d._numBoxes,n="group"===d.boxmode&&m>1,o=c.dPos*(1-d.boxgap)*(1-d.boxgroupgap)/(n?m:1),p=n?2*c.dPos*(-.5+(c.num+.5)/m)*(1-d.boxgap):0,q=o*k.whiskerwidth;if(k.visible!==!0||c.empty)return void j.select(this).remove();var r,s;"h"===k.orientation?(r=f,s=e):(r=e,s=f),c.bPos=p,c.bdPos=o,c.wdPos=q,g(l,{pos:r,val:s},k,c),k.boxpoints&&h(l,{x:e,y:f},k,c),k.boxmean&&i(l,{pos:r,val:s},k,c)})}function g(a,b,c,d){var e,f,g=b.pos,h=b.val,i=d.bPos,l=d.wdPos||0,m=d.bPosPxOffset||0,n=c.whiskerwidth||0;Array.isArray(d.bdPos)?(e=d.bdPos[0],f=d.bdPos[1]):(e=d.bdPos,f=d.bdPos),a.selectAll("path.box").data(k.identity).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box").each(function(a){var b=a.pos,d=g.c2p(b+i,!0)+m,o=g.c2p(b+i-e,!0)+m,p=g.c2p(b+i+f,!0)+m,q=g.c2p(b+i-l,!0)+m,r=g.c2p(b+i+l,!0)+m,s=h.c2p(a.q1,!0),t=h.c2p(a.q3,!0),u=k.constrain(h.c2p(a.med,!0),Math.min(s,t)+1,Math.max(s,t)-1),v=h.c2p(c.boxpoints===!1?a.min:a.lf,!0),w=h.c2p(c.boxpoints===!1?a.max:a.uf,!0);"h"===c.orientation?j.select(this).attr("d","M"+u+","+o+"V"+p+"M"+s+","+o+"V"+p+"H"+t+"V"+o+"ZM"+s+","+d+"H"+v+"M"+t+","+d+"H"+w+(0===n?"":"M"+v+","+q+"V"+r+"M"+w+","+q+"V"+r)):j.select(this).attr("d","M"+o+","+u+"H"+p+"M"+o+","+s+"H"+p+"V"+t+"H"+o+"ZM"+d+","+s+"V"+v+"M"+d+","+t+"V"+w+(0===n?"":"M"+q+","+v+"H"+r+"M"+q+","+w+"H"+r))})}function h(a,b,c,f){var g=b.x,h=b.y,i=f.bdPos,j=f.bPos,m=c.boxpoints||c.points;d(),a.selectAll("g.points").data(function(a){return a.forEach(function(a){a.t=f,a.trace=c}),a}).enter().append("g").attr("class","points").selectAll("path").data(function(a){var b,d,f="all"===m?a.pts:a.pts.filter(function(b){return b.v<a.lf||b.v>a.uf}),g=Math.max((a.max-a.min)/10,a.q3-a.q1),h=1e-9*g,l=g*o,p=[],q=0;if(c.jitter){if(0===g)for(q=1,p=new Array(f.length),b=0;b<f.length;b++)p[b]=1;else for(b=0;b<f.length;b++){var r=Math.max(0,b-n),s=f[r].v,t=Math.min(f.length-1,b+n),u=f[t].v;"all"!==m&&(f[b].v<a.lf?u=Math.min(u,a.lf):s=Math.max(s,a.uf));var v=Math.sqrt(l*(t-r)/(u-s+h))||0;v=k.constrain(Math.abs(v),0,1),p.push(v),q=Math.max(v,q)}d=2*c.jitter/q}for(b=0;b<f.length;b++){var w=f[b],x=w.v,y=c.jitter?d*p[b]*(e()-.5):0,z=a.pos+j+i*(c.pointpos+y);"h"===c.orientation?(w.y=z,w.x=x):(w.x=z,w.y=x),"suspectedoutliers"===m&&x<a.uo&&x>a.lo&&(w.so=!0)}return f}).enter().append("path").classed("point",!0).call(l.translatePoints,g,h)}function i(a,b,c,d){var e,f,g=b.pos,h=b.val,i=d.bPos,l=d.bPosPxOffset||0;Array.isArray(d.bdPos)?(e=d.bdPos[0],f=d.bdPos[1]):(e=d.bdPos,f=d.bdPos),a.selectAll("path.mean").data(k.identity).enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}).each(function(a){var b=g.c2p(a.pos+i,!0)+l,d=g.c2p(a.pos+i-e,!0)+l,k=g.c2p(a.pos+i+f,!0)+l,m=h.c2p(a.mean,!0),n=h.c2p(a.mean-a.sd,!0),o=h.c2p(a.mean+a.sd,!0);"h"===c.orientation?j.select(this).attr("d","M"+m+","+d+"V"+k+("sd"===c.boxmean?"m0,0L"+n+","+b+"L"+m+","+d+"L"+o+","+b+"Z":"")):j.select(this).attr("d","M"+d+","+m+"H"+k+("sd"===c.boxmean?"m0,0L"+b+","+n+"L"+d+","+m+"L"+b+","+o+"Z":""))})}var j=a("d3"),k=a("../../lib"),l=a("../../components/drawing"),m=2e9,n=5,o=.01;b.exports={plot:f,plotBoxAndWhiskers:g,plotPoints:h,plotBoxMean:i}},{"../../components/drawing":638,"../../lib":738,d3:123}],892:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d,e=a.cd,f=a.xaxis,g=a.yaxis,h=[];if(b===!1)for(c=0;c<e.length;c++)for(d=0;d<(e[c].pts||[]).length;d++)e[c].pts[d].selected=0;else for(c=0;c<e.length;c++)for(d=0;d<(e[c].pts||[]).length;d++){var i=e[c].pts[d],j=f.c2p(i.x),k=g.c2p(i.y);b.contains([j,k])?(h.push({pointNumber:i.i,x:f.c2d(i.x),y:g.c2d(i.y)}),i.selected=1):i.selected=0}return h}},{}],893:[function(a,b,c){"use strict";function d(a,b){for(var c=a.calcdata,d=b.xaxis,f=b.yaxis,g=0;g<h.length;g++){for(var i=h[g],j="h"===i?f:d,k=[],l=0,m=0,n=0;n<c.length;n++){var o=c[n],p=o[0].t,q=o[0].trace;q.visible!==!0||"box"!==q.type||p.empty||q.orientation!==i||q.xaxis!==d._id||q.yaxis!==f._id||(k.push(n),q.boxpoints!==!1&&(l=Math.max(l,q.jitter-q.pointpos-1),m=Math.max(m,q.jitter+q.pointpos-1)))}e("box",a,k,j,[l,m])}}function e(a,b,c,d,e){var h,i,j,k=b.calcdata,l=b._fullLayout,m=[],n="violin"===a?"_numViolins":"_numBoxes";for(h=0;h<c.length;h++)for(j=k[c[h]],i=0;i<j.length;i++)m.push(j[i].pos);if(m.length){var o=g.distinctVals(m),p=o.minDiff/2;for(m.length===o.vals.length&&(l[n]=1),f.minDtick(d,o.minDiff,o.vals[0],!0),h=0;h<c.length;h++)j=k[c[h]],j[0].t.dPos=p;var q=l[a+"gap"],r=l[a+"groupgap"],s=(1-q)*(1-r)*p/l[n];f.expand(d,o.vals,{vpadminus:p+e[0]*s,vpadplus:p+e[1]*s})}}var f=a("../../plots/cartesian/axes"),g=a("../../lib"),h=["v","h"];b.exports={setPositions:d,setPositionOffset:e}},{"../../lib":738,"../../plots/cartesian/axes":785}],894:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/color"),f=a("../../components/drawing");b.exports=function(a,b){var c=b?b[0].node3:d.select(a).selectAll("g.trace.boxes");c.style("opacity",function(a){return a[0].trace.opacity}),c.each(function(b){var c=d.select(this),g=b[0].trace,h=g.line.width;c.selectAll("path.box").style("stroke-width",h+"px").call(e.stroke,g.line.color).call(e.fill,g.fillcolor),c.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(e.stroke,g.line.color);var i=c.selectAll("path.point");f.pointStyle(i,g,a),f.selectedPointStyle(i,g)})}},{"../../components/color":613,"../../components/drawing":638,d3:123}],895:[function(a,b,c){"use strict";function d(a){return{name:f.increasing.name,showlegend:f.increasing.showlegend,line:{color:e({},g.line.color,{dflt:a}),width:g.line.width,editType:"style"},fillcolor:g.fillcolor,editType:"style"}}var e=a("../../lib").extendFlat,f=a("../ohlc/attributes"),g=a("../box/attributes");b.exports={x:f.x,open:f.open,high:f.high,low:f.low,close:f.close,line:{width:e({},g.line.width,{}),editType:"style"},increasing:d(f.increasing.line.color.dflt),decreasing:d(f.decreasing.line.color.dflt),text:f.text,whiskerwidth:e({},g.whiskerwidth,{dflt:0})}},{"../../lib":738,"../box/attributes":884,"../ohlc/attributes":1012}],896:[function(a,b,c){"use strict";function d(a,b,c,d){g(a,b,c,d),c(d+".line.color"),c(d+".line.width",b.line.width),c(d+".fillcolor")}var e=a("../../lib"),f=a("../ohlc/ohlc_defaults"),g=a("../ohlc/direction_defaults"),h=a("../ohlc/helpers"),i=a("./attributes");
b.exports=function(a,b,c,g){function j(c,d){return e.coerce(a,b,i,c,d)}h.pushDummyTransformOpts(a,b);var k=f(a,b,j,g);return 0===k?void(b.visible=!1):(j("line.width"),d(a,b,j,"increasing"),d(a,b,j,"decreasing"),j("text"),void j("whiskerwidth"))}},{"../../lib":738,"../ohlc/direction_defaults":1014,"../ohlc/helpers":1015,"../ohlc/ohlc_defaults":1017,"./attributes":895}],897:[function(a,b,c){"use strict";var d=a("../../plot_api/register");b.exports={moduleType:"trace",name:"candlestick",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","showLegend","candlestick"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults")},d(a("../box")),d(a("./transform"))},{"../../plot_api/register":775,"../../plots/cartesian":796,"../box":888,"./attributes":895,"./defaults":896,"./transform":898}],898:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"box",boxpoints:!1,visible:a.visible,hoverinfo:a.hoverinfo,opacity:a.opacity,xaxis:a.xaxis,yaxis:a.yaxis,transforms:g.makeTransform(a,b,c)},e=a[c];return e&&f.extendFlat(d,{x:a.x||[0],xcalendar:a.xcalendar,y:[].concat(a.low).concat(a.high),whiskerwidth:a.whiskerwidth,text:a.text,name:e.name,showlegend:e.showlegend,line:e.line,fillcolor:e.fillcolor}),d}var e=a("fast-isnumeric"),f=a("../../lib"),g=a("../ohlc/helpers");c.moduleType="transform",c.name="candlestick",c.attributes={},c.supplyDefaults=function(a,b,c,d){return g.clearEphemeralTransformOpts(d),g.copyOHLC(a,b),a},c.transform=function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e];"candlestick"===f.type?c.push(d(f,b,"increasing"),d(f,b,"decreasing")):c.push(f)}return g.addRangeSlider(c,b.layout),c},c.calcTransform=function(a,b,c){for(var d=c.direction,f=g.getFilterFn(d),h=b.open,i=b.high,j=b.low,k=b.close,l=h.length,m=[],n=[],o=b._fullInput.x?function(a){var c=b.x[a];m.push(c,c,c,c,c,c)}:function(a){m.push(a,a,a,a,a,a)},p=function(a,b,c,d){n.push(c,a,d,d,d,b)},q=0;l>q;q++)f(h[q],k[q])&&e(i[q])&&e(j[q])&&(o(q),p(h[q],i[q],j[q],k[q]));b.x=m,b.y=n}},{"../../lib":738,"../ohlc/helpers":1015,"fast-isnumeric":132}],899:[function(a,b,c){"use strict";function d(a,b,c,d){var f=["aaxis","baxis"];f.forEach(function(f){var g=f.charAt(0),h=a[f]||{},i={},j={tickfont:"x",id:g+"axis",letter:g,font:b.font,name:f,data:a[g],calendar:b.calendar,dfltColor:d,bgColor:c.paper_bgcolor,fullLayout:c};e(h,i,j),i._categories=i._categories||[],b[f]=i,a[f]||"-"===h.type||(a[f]={type:h.type})})}var e=a("./axis_defaults");b.exports=function(a,b,c,e,f){var g=e("a");g||(e("da"),e("a0"));var h=e("b");h||(e("db"),e("b0")),d(a,b,c,f)}},{"./axis_defaults":904}],900:[function(a,b,c){"use strict";function d(a,b){if(!Array.isArray(a)||b>=10)return null;for(var c=1/0,e=-(1/0),f=a.length,g=0;f>g;g++){var h=a[g];if(Array.isArray(h)){var i=d(h,b+1);i&&(c=Math.min(i[0],c),e=Math.max(i[1],e))}else c=Math.min(h,c),e=Math.max(h,e)}return[c,e]}b.exports=function(a){return d(a,0)}},{}],901:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("./axis_attributes"),f=a("../../components/color/attributes"),g=d({editType:"calc"});g.family.dflt='"Open Sans", verdana, arial, sans-serif',g.size.dflt=12,g.color.dflt=f.defaultLine,b.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:e,baxis:e,font:g,color:{valType:"color",dflt:f.defaultLine,editType:"plot"}}},{"../../components/color/attributes":612,"../../plots/font_attributes":810,"./axis_attributes":903}],902:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r=Array.isArray(c)?"a":"b",s="a"===r?a.aaxis:a.baxis,t=s.smoothing,u="a"===r?a.a2i:a.b2j,v="a"===r?c:d,w="a"===r?d:c,x="a"===r?b.a.length:b.b.length,y="a"===r?b.b.length:b.a.length,z=Math.floor("a"===r?a.b2j(w):a.a2i(w)),A="a"===r?function(b){return a.evalxy([],b,z)}:function(b){return a.evalxy([],z,b)};t&&(g=Math.max(0,Math.min(y-2,z)),h=z-g,f="a"===r?function(b,c){return a.dxydi([],b,g,c,h)}:function(b,c){return a.dxydj([],g,b,h,c)});var B=u(v[0]),C=u(v[1]),D=C>B?1:-1,E=1e-8*(C-B),F=D>0?Math.floor:Math.ceil,G=D>0?Math.ceil:Math.floor,H=D>0?Math.min:Math.max,I=D>0?Math.max:Math.min,J=F(B+E),K=G(C-E);k=A(B);var L=[[k]];for(e=J;K*D>e*D;e+=D)i=[],o=I(B,e),p=H(C,e+D),q=p-o,j=Math.max(0,Math.min(x-2,Math.floor(.5*(o+p)))),l=A(p),t&&(m=f(j,o-j),n=f(j,p-j),i.push([k[0]+m[0]/3*q,k[1]+m[1]/3*q]),i.push([l[0]-n[0]/3*q,l[1]-n[1]/3*q])),i.push(l),L.push(i),k=l;return L}},{}],903:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../../components/color/attributes"),f=a("../../plots/cartesian/layout_attributes"),g=a("../../plot_api/edit_types").overrideAll;b.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{valType:"string",editType:"calc"},titlefont:d({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:d({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:g(f.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:e.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:e.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},editType:"calc"}},{"../../components/color/attributes":612,"../../plot_api/edit_types":769,"../../plots/cartesian/layout_attributes":797,"../../plots/font_attributes":810}],904:[function(a,b,c){"use strict";function d(a,b){if("-"===a.type){var c=a._id,d=c.charAt(0),e=d+"calendar",f=a[e];a.type=n(b,f)}}var e=a("./attributes"),f=a("../../components/color").addOpacity,g=a("../../registry"),h=a("../../lib"),i=a("../../plots/cartesian/tick_value_defaults"),j=a("../../plots/cartesian/tick_label_defaults"),k=a("../../plots/cartesian/category_order_defaults"),l=a("../../plots/cartesian/set_convert"),m=a("../../plots/cartesian/ordered_categories"),n=a("../../plots/cartesian/axis_autotype");b.exports=function(a,b,c){function n(c,d){return h.coerce(a,b,r,c,d)}function o(c,d){return h.coerce2(a,b,r,c,d)}var p=c.letter,q=c.font||{},r=e[p+"axis"];c.noHover=!0,c.name&&(b._name=c.name,b._id=c.name);var s=n("type");if("-"===s&&(c.data&&d(b,c.data),"-"===b.type?b.type="linear":s=a.type=b.type),n("smoothing"),n("cheatertype"),n("showticklabels"),n("labelprefix",p+" = "),n("labelsuffix"),n("showtickprefix"),n("showticksuffix"),n("separatethousands"),n("tickformat"),n("exponentformat"),n("showexponent"),n("categoryorder"),n("tickmode"),n("tickvals"),n("ticktext"),n("tick0"),n("dtick"),"array"===b.tickmode&&(n("arraytick0"),n("arraydtick")),n("labelpadding"),b._hovertitle=p,"date"===s){var t=g.getComponentMethod("calendars","handleDefaults");t(a,b,"calendar",c.calendar)}l(b,c.fullLayout);var u=n("color",c.dfltColor),v=u===a.color?u:q.color;n("title"),h.coerceFont(n,"titlefont",{family:q.family,size:Math.round(1.2*q.size),color:v}),n("titleoffset"),n("tickangle");var w=n("autorange",!b.isValidRange(a.range));w&&n("rangemode"),n("range"),b.cleanRange(),n("fixedrange"),i(a,b,n,s),j(a,b,n,s,c),k(a,b,n);var x=o("gridcolor",f(u,.3)),y=o("gridwidth"),z=n("showgrid");z||(delete b.gridcolor,delete b.gridwidth);var A=o("startlinecolor",u),B=o("startlinewidth",y),C=n("startline",b.showgrid||!!A||!!B);C||(delete b.startlinecolor,delete b.startlinewidth);var D=o("endlinecolor",u),E=o("endlinewidth",y),F=n("endline",b.showgrid||!!D||!!E);return F||(delete b.endlinecolor,delete b.endlinewidth),z?(n("minorgridcount"),n("minorgridwidth",y),n("minorgridcolor",f(x,.06)),b.minorgridcount||(delete b.minorgridwidth,delete b.minorgridcolor)):(delete b.gridcolor,delete b.gridWidth),b._initialCategories="category"===s?m(p,b.categoryorder,b.categoryarray,c.data):[],"none"===b.showticklabels&&(delete b.tickfont,delete b.tickangle,delete b.showexponent,delete b.exponentformat,delete b.tickformat,delete b.showticksuffix,delete b.showtickprefix),b.showticksuffix||delete b.ticksuffix,b.showtickprefix||delete b.tickprefix,n("tickmode"),(!b.title||b.title&&0===b.title.length)&&(delete b.titlefont,delete b.titleoffset),b}},{"../../components/color":613,"../../lib":738,"../../plots/cartesian/axis_autotype":786,"../../plots/cartesian/category_order_defaults":789,"../../plots/cartesian/ordered_categories":799,"../../plots/cartesian/set_convert":803,"../../plots/cartesian/tick_label_defaults":804,"../../plots/cartesian/tick_value_defaults":806,"../../registry":861,"./attributes":901}],905:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("./cheater_basis"),f=a("./array_minmax"),g=a("./map_2d_array"),h=a("./calc_gridlines"),i=a("./calc_labels"),j=a("./calc_clippath"),k=a("../heatmap/clean_2d_array"),l=a("./smooth_fill_2d_array");b.exports=function(a,b){var c,m=d.getFromId(a,b.xaxis||"x"),n=d.getFromId(a,b.yaxis||"y"),o=b.aaxis,p=b.baxis,q=b._a=b.a,r=b._b=b.b,s={},t=b.y;if(b._cheater){var u="index"===o.cheatertype?q.length:q,v="index"===p.cheatertype?r.length:r;b.x=c=e(u,v,b.cheaterslope)}else c=b.x;b._x=b.x=c=k(c),b._y=b.y=t=k(t),l(c,q,r),l(t,q,r),b.setScale(),s.xp=b.xp=g(b.xp,c,m.c2p),s.yp=b.yp=g(b.yp,t,n.c2p);var w=f(c),x=f(t),y=.5*(w[1]-w[0]),z=.5*(w[1]+w[0]),A=.5*(x[1]-x[0]),B=.5*(x[1]+x[0]),C=1.3;return w=[z-y*C,z+y*C],x=[B-A*C,B+A*C],d.expand(m,w,{padded:!0}),d.expand(n,x,{padded:!0}),h(b,s,"a","b"),h(b,s,"b","a"),i(b,o),i(b,p),s.clipsegments=j(b.xctrl,b.yctrl,o,p),s.x=c,s.y=t,s.a=q,s.b=r,[s]}},{"../../plots/cartesian/axes":785,"../heatmap/clean_2d_array":967,"./array_minmax":900,"./calc_clippath":906,"./calc_gridlines":907,"./calc_labels":908,"./cheater_basis":910,"./map_2d_array":922,"./smooth_fill_2d_array":926}],906:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e,f,g,h=[],i=!!c.smoothing,j=!!d.smoothing,k=a[0].length-1,l=a.length-1;for(e=0,f=[],g=[];k>=e;e++)f[e]=a[0][e],g[e]=b[0][e];for(h.push({x:f,y:g,bicubic:i}),e=0,f=[],g=[];l>=e;e++)f[e]=a[e][k],g[e]=b[e][k];for(h.push({x:f,y:g,bicubic:j}),e=k,f=[],g=[];e>=0;e--)f[k-e]=a[l][e],g[k-e]=b[l][e];for(h.push({x:f,y:g,bicubic:i}),e=l,f=[],g=[];e>=0;e--)f[l-e]=a[e][0],g[l-e]=b[e][0];return h.push({x:f,y:g,bicubic:j}),h}},{}],907:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../../lib/extend").extendFlat;b.exports=function(a,b,c,f){function g(b){var d,e,g,h,i,j,k,l,m,n,o,q,r=[],s=[],t={};if("b"===c)for(e=a.b2j(b),g=Math.floor(Math.max(0,Math.min(I-2,e))),h=e-g,t.length=I,t.crossLength=H,t.xy=function(b){return a.evalxy([],b,e)},t.dxy=function(b,c){return a.dxydi([],b,g,c,h)},d=0;H>d;d++)j=Math.min(H-2,d),k=d-j,l=a.evalxy([],d,e),C.smoothing&&d>0&&(m=a.dxydi([],d-1,g,0,h),r.push(i[0]+m[0]/3),s.push(i[1]+m[1]/3),n=a.dxydi([],d-1,g,1,h),r.push(l[0]-n[0]/3),s.push(l[1]-n[1]/3)),r.push(l[0]),s.push(l[1]),i=l;else for(d=a.a2i(b),j=Math.floor(Math.max(0,Math.min(H-2,d))),k=d-j,t.length=H,t.crossLength=I,t.xy=function(b){return a.evalxy([],d,b)},t.dxy=function(b,c){return a.dxydj([],j,b,k,c)},e=0;I>e;e++)g=Math.min(I-2,e),h=e-g,l=a.evalxy([],d,e),C.smoothing&&e>0&&(o=a.dxydj([],j,e-1,k,0),r.push(i[0]+o[0]/3),s.push(i[1]+o[1]/3),q=a.dxydj([],j,e-1,k,1),r.push(l[0]-q[0]/3),s.push(l[1]-q[1]/3)),r.push(l[0]),s.push(l[1]),i=l;return t.axisLetter=c,t.axis=x,t.crossAxis=C,t.value=b,t.constvar=f,t.index=p,t.x=r,t.y=s,t.smoothing=C.smoothing,t}function h(b){var d,e,g,h,i,j=[],k=[],l={};if(l.length=w.length,l.crossLength=B.length,"b"===c)for(g=Math.max(0,Math.min(I-2,b)),i=Math.min(1,Math.max(0,b-g)),l.xy=function(c){return a.evalxy([],c,b)},l.dxy=function(b,c){return a.dxydi([],b,g,c,i)},d=0;F>d;d++)j[d]=D[b*J][d],k[d]=E[b*J][d];else for(e=Math.max(0,Math.min(H-2,b)),h=Math.min(1,Math.max(0,b-e)),l.xy=function(c){return a.evalxy([],b,c)},l.dxy=function(b,c){return a.dxydj([],e,b,h,c)},d=0;G>d;d++)j[d]=D[d][b*J],k[d]=E[d][b*J];return l.axisLetter=c,l.axis=x,l.crossAxis=C,l.value=w[b],l.constvar=f,l.index=b,l.x=j,l.y=k,l.smoothing=C.smoothing,l}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=a[c],x=a[c+"axis"],y=x._gridlines=[],z=x._minorgridlines=[],A=x._boundarylines=[],B=a[f],C=a[f+"axis"];if("array"===x.tickmode)for(x.tickvals=[],i=0;i<w.length;i++)x.tickvals.push(w[i]);var D=a.xctrl,E=a.yctrl,F=D[0].length,G=D.length,H=a.a.length,I=a.b.length;d.calcTicks(x);var J=x.smoothing?3:1;if("array"===x.tickmode){for(l=5e-15,m=[Math.floor((w.length-1-x.arraytick0)/x.arraydtick*(1+l)),Math.ceil(-x.arraytick0/x.arraydtick/(1+l))].sort(function(a,b){return a-b}),n=m[0]-1,o=m[1]+1,p=n;o>p;p++)j=x.arraytick0+x.arraydtick*p,0>j||j>w.length-1||y.push(e(h(j),{color:x.gridcolor,width:x.gridwidth}));for(p=n;o>p;p++)if(k=x.arraytick0+x.arraydtick*p,s=Math.min(k+x.arraydtick,w.length-1),!(0>k||k>w.length-1||0>s||s>w.length-1))for(t=w[k],u=w[s],i=0;i<x.minorgridcount;i++)v=s-k,0>=v||(r=t+(u-t)*(i+1)/(x.minorgridcount+1)*(x.arraydtick/v),r<w[0]||r>w[w.length-1]||z.push(e(g(r),{color:x.minorgridcolor,width:x.minorgridwidth})));x.startline&&A.push(e(h(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&A.push(e(h(w.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(l=5e-15,m=[Math.floor((w[w.length-1]-x.tick0)/x.dtick*(1+l)),Math.ceil((w[0]-x.tick0)/x.dtick/(1+l))].sort(function(a,b){return a-b}),n=m[0],o=m[1],p=n;o>=p;p++)q=x.tick0+x.dtick*p,y.push(e(g(q),{color:x.gridcolor,width:x.gridwidth}));for(p=n-1;o+1>p;p++)for(q=x.tick0+x.dtick*p,i=0;i<x.minorgridcount;i++)r=q+x.dtick*(i+1)/(x.minorgridcount+1),r<w[0]||r>w[w.length-1]||z.push(e(g(r),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&A.push(e(g(w[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&A.push(e(g(w[w.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},{"../../lib/extend":727,"../../plots/cartesian/axes":785}],908:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../../lib/extend").extendFlat;b.exports=function(a,b){var c,f,g,h,i,j=b._labels=[],k=b._gridlines;for(c=0;c<k.length;c++)i=k[c],-1!==["start","both"].indexOf(b.showticklabels)&&(f=d.tickText(b,i.value),e(f,{prefix:g,suffix:h,endAnchor:!0,xy:i.xy(0),dxy:i.dxy(0,0),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===c,isLast:c===k.length-1}),j.push(f)),-1!==["end","both"].indexOf(b.showticklabels)&&(f=d.tickText(b,i.value),e(f,{endAnchor:!1,xy:i.xy(i.crossLength-1),dxy:i.dxy(i.crossLength-2,1),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===c,isLast:c===k.length-1}),j.push(f))}},{"../../lib/extend":727,"../../plots/cartesian/axes":785}],909:[function(a,b,c){"use strict";var d=.5;b.exports=function(a,b,c,e){var f=a[0]-b[0],g=a[1]-b[1],h=c[0]-b[0],i=c[1]-b[1],j=Math.pow(f*f+g*g,d/2),k=Math.pow(h*h+i*i,d/2),l=(k*k*f-j*j*h)*e,m=(k*k*g-j*j*i)*e,n=k*(j+k)*3,o=j*(j+k)*3;return[[b[0]+(n&&l/n),b[1]+(n&&m/n)],[b[0]-(o&&l/o),b[1]-(o&&m/o)]]}},{}],910:[function(a,b,c){"use strict";var d=a("../../lib").isArray;b.exports=function(a,b,c){var e,f,g,h,i,j,k=[],l=d(a)?a.length:a,m=d(b)?b.length:b,n=d(a)?a:null,o=d(b)?b:null;n&&(g=(n.length-1)/(n[n.length-1]-n[0])/(l-1)),o&&(h=(o.length-1)/(o[o.length-1]-o[0])/(m-1));var p,q=1/0,r=-(1/0);for(f=0;m>f;f++)for(k[f]=[],j=o?(o[f]-o[0])*h:f/(m-1),e=0;l>e;e++)i=n?(n[e]-n[0])*g:e/(l-1),p=i-j*c,q=Math.min(p,q),r=Math.max(p,r),k[f][e]=p;var s=1/(r-q),t=-q*s;for(f=0;m>f;f++)for(e=0;l>e;e++)k[f][e]=s*k[f][e]+t;return k}},{"../../lib":738}],911:[function(a,b,c){"use strict";function d(a,b,c){var d=-.5*c[0]+1.5*b[0],e=-.5*c[1]+1.5*b[1];return[(2*d+a[0])/3,(2*e+a[1])/3]}var e=a("./catmull_rom"),f=a("../../lib").ensureArray;b.exports=function(a,b,c,g,h,i){var j,k,l,m,n,o,p,q,r,s,t=c[0].length,u=c.length,v=h?3*t-2:t,w=i?3*u-2:u;for(a=f(a,w),b=f(b,w),l=0;w>l;l++)a[l]=f(a[l],v),b[l]=f(b[l],v);for(k=0,m=0;u>k;k++,m+=i?3:1)for(n=a[m],o=b[m],p=c[k],q=g[k],j=0,l=0;t>j;j++,l+=h?3:1)n[l]=p[j],o[l]=q[j];if(h)for(k=0,m=0;u>k;k++,m+=i?3:1){for(j=1,l=3;t-1>j;j++,l+=3)r=e([c[k][j-1],g[k][j-1]],[c[k][j],g[k][j]],[c[k][j+1],g[k][j+1]],h),a[m][l-1]=r[0][0],b[m][l-1]=r[0][1],a[m][l+1]=r[1][0],b[m][l+1]=r[1][1];s=d([a[m][0],b[m][0]],[a[m][2],b[m][2]],[a[m][3],b[m][3]]),a[m][1]=s[0],b[m][1]=s[1],s=d([a[m][v-1],b[m][v-1]],[a[m][v-3],b[m][v-3]],[a[m][v-4],b[m][v-4]]),a[m][v-2]=s[0],b[m][v-2]=s[1]}if(i)for(l=0;v>l;l++){for(m=3;w-3>m;m+=3)r=e([a[m-3][l],b[m-3][l]],[a[m][l],b[m][l]],[a[m+3][l],b[m+3][l]],i),a[m-1][l]=r[0][0],b[m-1][l]=r[0][1],a[m+1][l]=r[1][0],b[m+1][l]=r[1][1];s=d([a[0][l],b[0][l]],[a[2][l],b[2][l]],[a[3][l],b[3][l]]),a[1][l]=s[0],b[1][l]=s[1],s=d([a[w-1][l],b[w-1][l]],[a[w-3][l],b[w-3][l]],[a[w-4][l],b[w-4][l]]),a[w-2][l]=s[0],b[w-2][l]=s[1]}if(h&&i)for(m=1;w>m;m+=(m+1)%3===0?2:1){for(l=3;v-3>l;l+=3)r=e([a[m][l-3],b[m][l-3]],[a[m][l],b[m][l]],[a[m][l+3],b[m][l+3]],h),a[m][l-1]=.5*(a[m][l-1]+r[0][0]),b[m][l-1]=.5*(b[m][l-1]+r[0][1]),a[m][l+1]=.5*(a[m][l+1]+r[1][0]),b[m][l+1]=.5*(b[m][l+1]+r[1][1]);s=d([a[m][0],b[m][0]],[a[m][2],b[m][2]],[a[m][3],b[m][3]]),a[m][1]=.5*(a[m][1]+s[0]),b[m][1]=.5*(b[m][1]+s[1]),s=d([a[m][v-1],b[m][v-1]],[a[m][v-3],b[m][v-3]],[a[m][v-4],b[m][v-4]]),a[m][v-2]=.5*(a[m][v-2]+s[0]),b[m][v-2]=.5*(b[m][v-2]+s[1])}return[a,b]}},{"../../lib":738,"./catmull_rom":909}],912:[function(a,b,c){"use strict";b.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],913:[function(a,b,c){"use strict";b.exports=function(a,b,c){return b&&c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;c*=3,d*=3;var m=e*e,n=1-e,o=n*n,p=n*e*2,q=-3*o,r=3*(o-p),s=3*(p-m),t=3*m,u=f*f,v=u*f,w=1-f,x=w*w,y=x*w;for(l=0;l<a.length;l++)k=a[l],g=q*k[d][c]+r*k[d][c+1]+s*k[d][c+2]+t*k[d][c+3],h=q*k[d+1][c]+r*k[d+1][c+1]+s*k[d+1][c+2]+t*k[d+1][c+3],i=q*k[d+2][c]+r*k[d+2][c+1]+s*k[d+2][c+2]+t*k[d+2][c+3],j=q*k[d+3][c]+r*k[d+3][c+1]+s*k[d+3][c+2]+t*k[d+3][c+3],b[l]=y*g+3*(x*f*h+w*u*i)+v*j;return b}:b?function(b,c,d,e,f){b||(b=[]);var g,h,i,j;c*=3;var k=e*e,l=1-e,m=l*l,n=l*e*2,o=-3*m,p=3*(m-n),q=3*(n-k),r=3*k,s=1-f;for(i=0;i<a.length;i++)j=a[i],g=o*j[d][c]+p*j[d][c+1]+q*j[d][c+2]+r*j[d][c+3],h=o*j[d+1][c]+p*j[d+1][c+1]+q*j[d+1][c+2]+r*j[d+1][c+3],b[i]=s*g+f*h;return b}:c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;d*=3;var m=f*f,n=m*f,o=1-f,p=o*o,q=p*o;for(k=0;k<a.length;k++)l=a[k],g=l[d][c+1]-l[d][c],h=l[d+1][c+1]-l[d+1][c],i=l[d+2][c+1]-l[d+2][c],j=l[d+3][c+1]-l[d+3][c],b[k]=q*g+3*(p*f*h+o*m*i)+n*j;return b}:function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k=1-f;for(i=0;i<a.length;i++)j=a[i],g=j[d][c+1]-j[d][c],h=j[d+1][c+1]-j[d+1][c],b[i]=k*g+f*h;return b}}},{}],914:[function(a,b,c){"use strict";b.exports=function(a,b,c){return b&&c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;c*=3,d*=3;var m=e*e,n=m*e,o=1-e,p=o*o,q=p*o,r=f*f,s=1-f,t=s*s,u=s*f*2,v=-3*t,w=3*(t-u),x=3*(u-r),y=3*r;for(l=0;l<a.length;l++)k=a[l],g=v*k[d][c]+w*k[d+1][c]+x*k[d+2][c]+y*k[d+3][c],h=v*k[d][c+1]+w*k[d+1][c+1]+x*k[d+2][c+1]+y*k[d+3][c+1],i=v*k[d][c+2]+w*k[d+1][c+2]+x*k[d+2][c+2]+y*k[d+3][c+2],j=v*k[d][c+3]+w*k[d+1][c+3]+x*k[d+2][c+3]+y*k[d+3][c+3],b[l]=q*g+3*(p*e*h+o*m*i)+n*j;return b}:b?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;c*=3;var m=f*f,n=m*f,o=1-f,p=o*o,q=p*o;for(k=0;k<a.length;k++)l=a[k],g=l[d+1][c]-l[d][c],h=l[d+1][c+1]-l[d][c+1],i=l[d+1][c+2]-l[d][c+2],j=l[d+1][c+3]-l[d][c+3],b[k]=q*g+3*(p*f*h+o*m*i)+n*j;return b}:c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j;d*=3;var k=1-e,l=f*f,m=1-f,n=m*m,o=m*f*2,p=-3*n,q=3*(n-o),r=3*(o-l),s=3*l;for(i=0;i<a.length;i++)j=a[i],g=p*j[d][c]+q*j[d+1][c]+r*j[d+2][c]+s*j[d+3][c],h=p*j[d][c+1]+q*j[d+1][c+1]+r*j[d+2][c+1]+s*j[d+3][c+1],b[i]=k*g+e*h;return b}:function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k=1-e;for(i=0;i<a.length;i++)j=a[i],g=j[d+1][c]-j[d][c],h=j[d+1][c+1]-j[d][c+1],b[i]=k*g+e*h;return b}}},{}],915:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=b-2,g=c-2;return d&&e?function(b,c,d){b||(b=[]);var e,h,i,j,k,l,m=Math.max(0,Math.min(Math.floor(c),f)),n=Math.max(0,Math.min(Math.floor(d),g)),o=Math.max(0,Math.min(1,c-m)),p=Math.max(0,Math.min(1,d-n));m*=3,n*=3;var q=o*o,r=q*o,s=1-o,t=s*s,u=t*s,v=p*p,w=v*p,x=1-p,y=x*x,z=y*x;for(l=0;l<a.length;l++)k=a[l],e=u*k[n][m]+3*(t*o*k[n][m+1]+s*q*k[n][m+2])+r*k[n][m+3],h=u*k[n+1][m]+3*(t*o*k[n+1][m+1]+s*q*k[n+1][m+2])+r*k[n+1][m+3],i=u*k[n+2][m]+3*(t*o*k[n+2][m+1]+s*q*k[n+2][m+2])+r*k[n+2][m+3],j=u*k[n+3][m]+3*(t*o*k[n+3][m+1]+s*q*k[n+3][m+2])+r*k[n+3][m+3],b[l]=z*e+3*(y*p*h+x*v*i)+w*j;return b}:d?function(b,c,d){b||(b=[]);var e,h,i,j,k,l,m=Math.max(0,Math.min(Math.floor(c),f)),n=Math.max(0,Math.min(Math.floor(d),g)),o=Math.max(0,Math.min(1,c-m)),p=Math.max(0,Math.min(1,d-n));m*=3;var q=o*o,r=q*o,s=1-o,t=s*s,u=t*s,v=1-p;for(k=0;k<a.length;k++)l=a[k],e=v*l[n][m]+p*l[n+1][m],h=v*l[n][m+1]+p*l[n+1][m+1],i=v*l[n][m+2]+p*l[n+1][m+1],j=v*l[n][m+3]+p*l[n+1][m+1],b[k]=u*e+3*(t*o*h+s*q*i)+r*j;return b}:e?function(b,c,d){b||(b=[]);var e,h,i,j,k,l,m=Math.max(0,Math.min(Math.floor(c),f)),n=Math.max(0,Math.min(Math.floor(d),g)),o=Math.max(0,Math.min(1,c-m)),p=Math.max(0,Math.min(1,d-n));n*=3;var q=p*p,r=q*p,s=1-p,t=s*s,u=t*s,v=1-o;for(k=0;k<a.length;k++)l=a[k],e=v*l[n][m]+o*l[n][m+1],h=v*l[n+1][m]+o*l[n+1][m+1],i=v*l[n+2][m]+o*l[n+2][m+1],j=v*l[n+3][m]+o*l[n+3][m+1],b[k]=u*e+3*(t*p*h+s*q*i)+r*j;return b}:function(b,c,d){b||(b=[]);var e,h,i,j,k=Math.max(0,Math.min(Math.floor(c),f)),l=Math.max(0,Math.min(Math.floor(d),g)),m=Math.max(0,Math.min(1,c-k)),n=Math.max(0,Math.min(1,d-l)),o=1-n,p=1-m;for(i=0;i<a.length;i++)j=a[i],e=p*j[l][k]+m*j[l][k+1],h=p*j[l+1][k]+m*j[l+1][k+1],b[i]=o*e+n*h;return b}}},{}],916:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./xy_defaults"),f=a("./ab_defaults"),g=a("./set_convert"),h=a("./attributes"),i=a("../../components/color/attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,h,c,e)}b._clipPathId="clip"+b.uid+"carpet";var l=k("color",i.defaultLine);if(d.coerceFont(k,"font"),k("carpet"),f(a,b,j,k,l),!b.a||!b.b)return void(b.visible=!1);b.a.length<3&&(b.aaxis.smoothing=0),b.b.length<3&&(b.baxis.smoothing=0);var m=e(a,b,k);g(b),b._cheater&&k("cheaterslope"),m||(b.visible=!1)}},{"../../components/color/attributes":612,"../../lib":738,"./ab_defaults":899,"./attributes":901,"./set_convert":925,"./xy_defaults":927}],917:[function(a,b,c){"use strict";b.exports=function(a){return Array.isArray(a[0])}},{}],918:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.plot=a("./plot"),d.calc=a("./calc"),d.animatable=!0,d.moduleType="trace",d.name="carpet",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","carpet","carpetAxis","notLegendIsolatable"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"./attributes":901,"./calc":905,"./defaults":916,"./plot":924}],919:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c,d=a._fullData.length,e=0;d>e;e++){var f=a._fullData[e];if(f.index!==b.index&&"carpet"===f.type&&(c||(c=f),f.carpet===b.carpet))return f}return c}},{}],920:[function(a,b,c){"use strict";b.exports=function(a,b,c){if(0===a.length)return"";var d,e=[],f=c?3:1;for(d=0;d<a.length;d+=f)e.push(a[d]+","+b[d]),c&&d<a.length-f&&(e.push("C"),e.push([a[d+1]+","+b[d+1],a[d+2]+","+b[d+2]+" "].join(" ")));return e.join(c?"":"L")}},{}],921:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d;for(Array.isArray(a)?a.length>b.length&&(a=a.slice(0,b.length)):a=[],d=0;d<b.length;d++)a[d]=c(b[d]);return a}},{}],922:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d,e;for(Array.isArray(a)?a.length>b.length&&(a=a.slice(0,b.length)):a=[],d=0;d<b.length;d++)for(Array.isArray(a[d])?a[d].length>b.length&&(a[d]=a[d].slice(0,b.length)):a[d]=[],e=0;e<b[0].length;e++)a[d][e]=c(b[d][e]);return a}},{}],923:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e,f){var g=e[0]*a.dpdx(b),h=e[1]*a.dpdy(c),i=1,j=1;if(f){var k=Math.sqrt(e[0]*e[0]+e[1]*e[1]),l=Math.sqrt(f[0]*f[0]+f[1]*f[1]),m=(e[0]*f[0]+e[1]*f[1])/k/l;j=Math.max(0,m)}var n=180*Math.atan2(h,g)/Math.PI;return-90>n?(n+=180,i=-i):n>90&&(n-=180,i=-i),{angle:n,flip:i,p:a.c2p(d,b,c),offsetMultplier:j}}},{}],924:[function(a,b,c){"use strict";function d(a,b,c){var d=a.selectAll(b+"."+c).data([0]);return d.enter().append(b).classed(c,!0),d}function e(a,b,c){var e=c[0],j=c[0].trace,k=b.xaxis,l=b.yaxis,m=j.aaxis,n=j.baxis,o=a._fullLayout,p=b.plot.selectAll(".carpetlayer"),q=o._clips,r=d(p,"g","carpet"+j.uid).classed("trace",!0),s=d(r,"g","minorlayer"),t=d(r,"g","majorlayer"),u=d(r,"g","boundarylayer"),v=d(r,"g","labellayer");r.style("opacity",j.opacity),g(k,l,t,m,"a",m._gridlines,!0),g(k,l,t,n,"b",n._gridlines,!0),g(k,l,s,m,"a",m._minorgridlines,!0),g(k,l,s,n,"b",n._minorgridlines,!0),g(k,l,u,m,"a-boundary",m._boundarylines),g(k,l,u,n,"b-boundary",n._boundarylines);var w=h(a,k,l,j,e,v,m._labels,"a-label"),x=h(a,k,l,j,e,v,n._labels,"b-label");i(a,v,j,e,k,l,w,x),f(j,e,q,k,l)}function f(a,b,c,e,f){var g,h,i,j,k=c.select("#"+a._clipPathId);k.size()||(k=c.append("clipPath").classed("carpetclip",!0));var l=d(k,"path","carpetboundary"),o=b.clipsegments,p=[];for(j=0;j<o.length;j++)g=o[j],h=m([],g.x,e.c2p),i=m([],g.y,f.c2p),p.push(n(h,i,g.bicubic));var q="M"+p.join("L")+"Z";k.attr("id",a._clipPathId),l.attr("d",q)}function g(a,b,c,d,e,f){var g="const-"+e+"-lines",h=c.selectAll("."+g).data(f);h.enter().append("path").classed(g,!0).style("vector-effect","non-scaling-stroke"),h.each(function(c){var d=c,e=d.x,f=d.y,g=m([],e,a.c2p),h=m([],f,b.c2p),i="M"+n(g,h,d.smoothing),j=k.select(this);j.attr("d",i).style("stroke-width",d.width).style("stroke",d.color).style("fill","none")}),h.exit().remove()}function h(a,b,c,d,e,f,g,h){var i=f.selectAll("text."+h).data(g);i.enter().append("text").classed(h,!0);var j=0;return i.each(function(e){var f;if("auto"===e.axis.tickangle)f=o(d,b,c,e.xy,e.dxy);else{var g=(e.axis.tickangle+180)*Math.PI/180;f=o(d,b,c,e.xy,[Math.cos(g),Math.sin(g)])}var h=(e.endAnchor?-1:1)*f.flip,i=k.select(this).attr({"text-anchor":h>0?"start":"end","data-notex":1}).call(l.font,e.font).text(e.text).call(p.convertToTspans,a),m=l.bBox(this);i.attr("transform","translate("+f.p[0]+","+f.p[1]+") rotate("+f.angle+")translate("+e.axis.labelpadding*h+","+.3*m.height+")"),j=Math.max(j,m.width+e.axis.labelpadding)}),i.exit().remove(),j}function i(a,b,c,d,e,f,g,h){var i,k,l,m;i=.5*(c.a[0]+c.a[c.a.length-1]),k=c.b[0],l=c.ab2xy(i,k,!0),m=c.dxyda_rough(i,k),j(a,b,c,d,l,m,c.aaxis,e,f,g,"a-title"),i=c.a[0],k=.5*(c.b[0]+c.b[c.b.length-1]),l=c.ab2xy(i,k,!0),m=c.dxydb_rough(i,k),j(a,b,c,d,l,m,c.baxis,e,f,h,"b-title")}function j(a,b,c,d,e,f,g,h,i,j,m){var n=[];g.title&&n.push(g.title);var q=b.selectAll("text."+m).data(n);q.enter().append("text").classed(m,!0),q.each(function(){var b=o(c,h,i,e,f);-1===["start","both"].indexOf(g.showticklabels)&&(j=0),j+=g.titlefont.size+g.titleoffset;var d=k.select(this);d.text(g.title||"").call(p.convertToTspans,a).attr("transform","translate("+b.p[0]+","+b.p[1]+") rotate("+b.angle+") translate(0,"+j+")").classed("user-select-none",!0).attr("text-anchor","middle").call(l.font,g.titlefont)}),q.exit().remove()}var k=a("d3"),l=a("../../components/drawing"),m=a("./map_1d_array"),n=a("./makepath"),o=a("./orient_text"),p=a("../../lib/svg_text_utils");b.exports=function(a,b,c){for(var d=0;d<c.length;d++)e(a,b,c[d])}},{"../../components/drawing":638,"../../lib/svg_text_utils":761,"./makepath":920,"./map_1d_array":921,"./orient_text":923,d3:123}],925:[function(a,b,c){"use strict";var d=a("./constants"),e=a("../../lib/search").findBin,f=a("./compute_control_points"),g=a("./create_spline_evaluator"),h=a("./create_i_derivative_evaluator"),i=a("./create_j_derivative_evaluator");b.exports=function(a){var b=a.a,c=a.b,j=a.a.length,k=a.b.length,l=a.aaxis,m=a.baxis,n=b[0],o=b[j-1],p=c[0],q=c[k-1],r=b[b.length-1]-b[0],s=c[c.length-1]-c[0],t=r*d.RELATIVE_CULL_TOLERANCE,u=s*d.RELATIVE_CULL_TOLERANCE;n-=t,o+=t,p-=u,q+=u,a.isVisible=function(a,b){return a>n&&o>a&&b>p&&q>b},a.isOccluded=function(a,b){return n>a||a>o||p>b||b>q},l.c2p=function(a){return a},m.c2p=function(a){return a},a.setScale=function(){var b=a.x,c=a.y,d=f(a.xctrl,a.yctrl,b,c,l.smoothing,m.smoothing);a.xctrl=d[0],a.yctrl=d[1],a.evalxy=g([a.xctrl,a.yctrl],j,k,l.smoothing,m.smoothing),a.dxydi=h([a.xctrl,a.yctrl],l.smoothing,m.smoothing),a.dxydj=i([a.xctrl,a.yctrl],l.smoothing,m.smoothing)},a.i2a=function(a){var c=Math.max(0,Math.floor(a[0]),j-2),d=a[0]-c;return(1-d)*b[c]+d*b[c+1]},a.j2b=function(a){var b=Math.max(0,Math.floor(a[1]),j-2),d=a[1]-b;return(1-d)*c[b]+d*c[b+1]},a.ij2ab=function(b){return[a.i2a(b[0]),a.j2b(b[1])]},a.a2i=function(a){var c=Math.max(0,Math.min(e(a,b),j-2)),d=b[c],f=b[c+1];return Math.max(0,Math.min(j-1,c+(a-d)/(f-d)))},a.b2j=function(a){var b=Math.max(0,Math.min(e(a,c),k-2)),d=c[b],f=c[b+1];return Math.max(0,Math.min(k-1,b+(a-d)/(f-d)))},a.ab2ij=function(b){return[a.a2i(b[0]),a.b2j(b[1])]},a.i2c=function(b,c){return a.evalxy([],b,c)},a.ab2xy=function(d,e,f){if(!f&&(d<b[0]||d>b[j-1]|e<c[0]||e>c[k-1]))return[!1,!1];var g=a.a2i(d),h=a.b2j(e),i=a.evalxy([],g,h);if(f){var l,m,n,o,p=0,q=0,r=[];d<b[0]?(l=0,m=0,p=(d-b[0])/(b[1]-b[0])):d>b[j-1]?(l=j-2,m=1,p=(d-b[j-1])/(b[j-1]-b[j-2])):(l=Math.max(0,Math.min(j-2,Math.floor(g))),m=g-l),e<c[0]?(n=0,o=0,q=(e-c[0])/(c[1]-c[0])):e>c[k-1]?(n=k-2,o=1,q=(e-c[k-1])/(c[k-1]-c[k-2])):(n=Math.max(0,Math.min(k-2,Math.floor(h))),
o=h-n),p&&(a.dxydi(r,l,n,m,o),i[0]+=r[0]*p,i[1]+=r[1]*p),q&&(a.dxydj(r,l,n,m,o),i[0]+=r[0]*q,i[1]+=r[1]*q)}return i},a.c2p=function(a,b,c){return[b.c2p(a[0]),c.c2p(a[1])]},a.p2x=function(a,b,c){return[b.p2c(a[0]),c.p2c(a[1])]},a.dadi=function(a){var c=Math.max(0,Math.min(b.length-2,a));return b[c+1]-b[c]},a.dbdj=function(a){var b=Math.max(0,Math.min(c.length-2,a));return c[b+1]-c[b]},a.dxyda=function(b,c,d,e){var f=a.dxydi(null,b,c,d,e),g=a.dadi(b,d);return[f[0]/g,f[1]/g]},a.dxydb=function(b,c,d,e){var f=a.dxydj(null,b,c,d,e),g=a.dbdj(c,e);return[f[0]/g,f[1]/g]},a.dxyda_rough=function(b,c,d){var e=r*(d||.1),f=a.ab2xy(b+e,c,!0),g=a.ab2xy(b-e,c,!0);return[.5*(f[0]-g[0])/e,.5*(f[1]-g[1])/e]},a.dxydb_rough=function(b,c,d){var e=s*(d||.1),f=a.ab2xy(b,c+e,!0),g=a.ab2xy(b,c-e,!0);return[.5*(f[0]-g[0])/e,.5*(f[1]-g[1])/e]},a.dpdx=function(a){return a._m},a.dpdy=function(a){return a._m}}},{"../../lib/search":756,"./compute_control_points":911,"./constants":912,"./create_i_derivative_evaluator":913,"./create_j_derivative_evaluator":914,"./create_spline_evaluator":915}],926:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c){function e(b,c){var d,e=0,f=0;return b>0&&void 0!==(d=a[c][b-1])&&(f++,e+=d),k-1>b&&void 0!==(d=a[c][b+1])&&(f++,e+=d),c>0&&void 0!==(d=a[c-1][b])&&(f++,e+=d),l-1>c&&void 0!==(d=a[c+1][b])&&(f++,e+=d),e/Math.max(1,f)}var f,g,h,i=[],j=[],k=a[0].length,l=a.length,m=0;for(f=0;k>f;f++)for(g=0;l>g;g++)void 0===a[g][f]&&(i.push(f),j.push(g),a[g][f]=e(f,g)),m=Math.max(m,Math.abs(a[g][f]));if(!i.length)return a;var n,o,p,q,r,s,t,u,v,w,x,y=1e-5,z=0,A=100,B=0,C=i.length;do{for(z=0,h=0;C>h;h++){f=i[h],g=j[h];var D,E,F,G,H,I,J=0,K=0;0===f?(H=Math.min(k-1,2),F=b[H],G=b[1],D=a[g][H],E=a[g][1],K+=E+(E-D)*(b[0]-G)/(G-F),J++):f===k-1&&(H=Math.max(0,k-3),F=b[H],G=b[k-2],D=a[g][H],E=a[g][k-2],K+=E+(E-D)*(b[k-1]-G)/(G-F),J++),(0===f||f===k-1)&&g>0&&l-1>g&&(n=c[g+1]-c[g],o=c[g]-c[g-1],K+=(o*a[g+1][f]+n*a[g-1][f])/(o+n),J++),0===g?(I=Math.min(l-1,2),F=c[I],G=c[1],D=a[I][f],E=a[1][f],K+=E+(E-D)*(c[0]-G)/(G-F),J++):g===l-1&&(I=Math.max(0,l-3),F=c[I],G=c[l-2],D=a[I][f],E=a[l-2][f],K+=E+(E-D)*(c[l-1]-G)/(G-F),J++),(0===g||g===l-1)&&f>0&&k-1>f&&(n=b[f+1]-b[f],o=b[f]-b[f-1],K+=(o*a[g][f+1]+n*a[g][f-1])/(o+n),J++),J?K/=J:(p=b[f+1]-b[f],q=b[f]-b[f-1],r=c[g+1]-c[g],s=c[g]-c[g-1],t=p*q*(p+q),u=r*s*(r+s),K=(t*(s*a[g+1][f]+r*a[g-1][f])+u*(q*a[g][f+1]+p*a[g][f-1]))/(u*(q+p)+t*(s+r))),v=K-a[g][f],w=v/m,z+=w*w,x=J?0:.85,a[g][f]+=v*(1+x)}z=Math.sqrt(z)}while(B++<A&&z>y);return d.log("Smoother converged to",z,"after",B,"iterations"),a}},{"../../lib":738}],927:[function(a,b,c){"use strict";var d=a("./has_columns"),e=a("../heatmap/convert_column_xyz");b.exports=function(a,b,c){var f=[],g=c("x"),h=g&&!d(g);h&&f.push("x"),b._cheater=!g;var i=c("y"),j=i&&!d(i);return j&&f.push("y"),g||i?(f.length&&e(b,b.aaxis,b.baxis,"a","b",f),!0):void 0}},{"../heatmap/convert_column_xyz":969,"./has_columns":917}],928:[function(a,b,c){"use strict";var d=a("../scattergeo/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../plots/attributes"),h=a("../../lib/extend"),i=h.extendFlat,j=h.extendDeepAll,k=d.marker.line;b.exports=i({locations:{valType:"data_array",editType:"calc"},locationmode:d.locationmode,z:{valType:"data_array",editType:"calc"},text:i({},d.text,{}),marker:{line:{color:k.color,width:i({},k.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:d.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:d.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:i({},g.hoverinfo,{editType:"calc",flags:["location","z","text","name"]})},j({},e,{zmax:{editType:"calc"},zmin:{editType:"calc"}}),{colorbar:f})},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../lib/extend":727,"../../plots/attributes":783,"../scattergeo/attributes":1093}],929:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../constants/numerical").BADNUM,f=a("../../components/colorscale/calc"),g=a("../scatter/arrays_to_calcdata"),h=a("../scatter/calc_selection");b.exports=function(a,b){for(var c=b.locations.length,i=new Array(c),j=0;c>j;j++){var k=i[j]={},l=b.locations[j],m=b.z[j];k.loc="string"==typeof l?l:null,k.z=d(m)?m:e}return g(i,b),f(b,b.z,"","z"),h(i,b),i}},{"../../components/colorscale/calc":620,"../../constants/numerical":717,"../scatter/arrays_to_calcdata":1053,"../scatter/calc_selection":1056,"fast-isnumeric":132}],930:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/colorscale/defaults"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,e){return d.coerce(a,b,f,c,e)}var i,j=h("locations");if(j&&(i=j.length),!j||!i)return void(b.visible=!1);var k=h("z");return Array.isArray(k)?(k.length>i&&(b.z=k.slice(0,i)),h("locationmode"),h("text"),h("marker.line.color"),h("marker.line.width"),h("marker.opacity"),e(a,b,g,h,{prefix:"",cLetter:"z"}),void d.coerceSelectionMarkerOpacity(b,h)):void(b.visible=!1)}},{"../../components/colorscale/defaults":623,"../../lib":738,"./attributes":928}],931:[function(a,b,c){"use strict";b.exports=function(a,b){return a.location=b.location,a.z=b.z,a}},{}],932:[function(a,b,c){"use strict";function d(a,b,c,d){function h(a){return e.tickText(d,d.c2l(a),"hover").text}var i=c.hi||b.hoverinfo,j="all"===i?f.hoverinfo.flags:i.split("+"),k=-1!==j.indexOf("name"),l=-1!==j.indexOf("location"),m=-1!==j.indexOf("z"),n=-1!==j.indexOf("text"),o=!k&&l,p=[];o?a.nameOverride=c.loc:(k&&(a.nameOverride=b.name),l&&p.push(c.loc)),m&&p.push(h(c.z)),n&&g(c,b,p),a.extraText=p.join("<br>")}var e=a("../../plots/cartesian/axes"),f=a("./attributes"),g=a("../scatter/fill_hover_text");b.exports=function(a,b,c){var e,f,g,h,i=a.cd,j=i[0].trace,k=a.subplot;for(f=0;f<i.length;f++)if(e=i[f],h=!1,e._polygons){for(g=0;g<e._polygons.length;g++)e._polygons[g].contains([b,c])&&(h=!h),e._polygons[g].contains([b+360,c])&&(h=!h);if(h)break}return h&&e?(a.x0=a.x1=a.xa.c2p(e.ct),a.y0=a.y1=a.ya.c2p(e.ct),a.index=e.index,a.location=e.loc,a.z=e.z,d(a,j,e,k.mockAxis),[a]):void 0}},{"../../plots/cartesian/axes":785,"../scatter/fill_hover_text":1062,"./attributes":928}],933:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../heatmap/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="choropleth",d.basePlotModule=a("../../plots/geo"),d.categories=["geo","noOpacity"],d.meta={},b.exports=d},{"../../plots/geo":814,"../heatmap/colorbar":968,"./attributes":928,"./calc":929,"./defaults":930,"./event_data":931,"./hover":932,"./plot":934,"./select":935,"./style":936}],934:[function(a,b,c){"use strict";function d(a,b){for(var c=a[0].trace,d=a.length,f=i(c,b),g=0;d>g;g++){var h=a[g],k=j(c.locationmode,h.loc,f);k?(h.geojson=k,h.ct=k.properties.ct,h.index=g,h._polygons=e(k)):h.geojson=null}}function e(a){function b(a){for(var b=0;b<a.length-1;b++)if(a[b][0]>0&&a[b+1][0]<0)return b;return null}var c,d,e,f,g=a.geometry,i=g.coordinates,j=a.id,k=[];switch(c="RUS"===j||"FJI"===j?function(a){var c;if(null===b(a))c=a;else for(c=new Array(a.length),f=0;f<a.length;f++)c[f]=[a[f][0]<0?a[f][0]+360:a[f][0],a[f][1]];k.push(h.tester(c))}:"ATA"===j?function(a){var c=b(a);if(null===c)return k.push(h.tester(a));var d=new Array(a.length+1),e=0;for(f=0;f<a.length;f++)f>c?d[e++]=[a[f][0]+360,a[f][1]]:f===c?(d[e++]=a[f],d[e++]=[a[f][0],-90]):d[e++]=a[f];var g=h.tester(d);g.pts.pop(),k.push(g)}:function(a){k.push(h.tester(a))},g.type){case"MultiPolygon":for(d=0;d<i.length;d++)for(e=0;e<i[d].length;e++)c(i[d][e]);break;case"Polygon":for(d=0;d<i.length;d++)c(i[d])}return k}var f=a("d3"),g=a("../../lib"),h=a("../../lib/polygon"),i=a("../../lib/topojson_utils").getTopojsonFeatures,j=a("../../lib/geo_location_utils").locationToFeature,k=a("./style");b.exports=function(a,b){function c(a){return a[0].trace.uid}for(var e=0;e<b.length;e++)d(b[e],a.topojson);var h=a.layers.backplot.select(".choroplethlayer").selectAll("g.trace.choropleth").data(b,c);h.enter().append("g").attr("class","trace choropleth"),h.exit().remove(),h.each(function(b){var c=b[0].node3=f.select(this),d=c.selectAll("path.choroplethlocation").data(g.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),k(a.graphDiv,b)})}},{"../../lib":738,"../../lib/geo_location_utils":730,"../../lib/polygon":750,"../../lib/topojson_utils":764,"./style":936,d3:123}],935:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d,e,f,g,h=a.cd,i=a.xaxis,j=a.yaxis,k=[];if(b===!1)for(c=0;c<h.length;c++)h[c].selected=0;else for(c=0;c<h.length;c++)d=h[c],e=d.ct,e&&(f=i.c2p(e),g=j.c2p(e),b.contains([f,g])?(k.push({pointNumber:c,lon:e[0],lat:e[1]}),d.selected=1):d.selected=0);return k}},{}],936:[function(a,b,c){"use strict";function d(a,b){var c=b[0].trace,d=b[0].node3,i=d.selectAll(".choroplethlocation"),j=c.marker||{},k=j.line||{},l=h.makeColorScaleFunc(h.extractScale(c.colorscale,c.zmin,c.zmax));i.each(function(a){e.select(this).attr("fill",l(a.z)).call(f.stroke,a.mlc||k.color).call(g.dashLine,"",a.mlw||k.width||0).style("opacity",j.opacity)}),g.selectedPointStyle(i,c)}var e=a("d3"),f=a("../../components/color"),g=a("../../components/drawing"),h=a("../../components/colorscale");b.exports=function(a,b){b&&d(a,b)}},{"../../components/color":613,"../../components/colorscale":628,"../../components/drawing":638,d3:123}],937:[function(a,b,c){"use strict";var d=a("../heatmap/attributes"),e=a("../scatter/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../components/drawing/attributes").dash,i=a("../../plots/font_attributes"),j=a("../../lib/extend").extendFlat,k=e.line;b.exports=j({z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,zhoverformat:d.zhoverformat,connectgaps:d.connectgaps,autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:i({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:j({},k.color,{editType:"style+colorbars"}),width:j({},k.width,{editType:"style+colorbars"}),dash:h,smoothing:j({},k.smoothing,{}),editType:"plot"}},f,{autocolorscale:j({},f.autocolorscale,{dflt:!1}),zmin:j({},f.zmin,{editType:"calc"}),zmax:j({},f.zmax,{editType:"calc"})},{colorbar:g})},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../components/drawing/attributes":637,"../../lib/extend":727,"../../plots/font_attributes":810,"../heatmap/attributes":965,"../scatter/attributes":1054}],938:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"linear",range:[a,b]};return e.autoTicks(d,(b-a)/(c||15)),d}var e=a("../../plots/cartesian/axes"),f=a("../../lib").extendFlat,g=a("../heatmap/calc");b.exports=function(a,b){var c=g(a,b),h=b.contours;if(b.autocontour!==!1){var i=d(b.zmin,b.zmax,b.ncontours);h.size=i.dtick,h.start=e.tickFirst(i),i.range.reverse(),h.end=e.tickFirst(i),h.start===b.zmin&&(h.start+=h.size),h.end===b.zmax&&(h.end-=h.size),h.start>h.end&&(h.start=h.end=(h.start+h.end)/2),b._input.contours||(b._input.contours={}),f(b._input.contours,{start:h.start,end:h.end,size:h.size}),b._input.autocontour=!0}else{var j=h.start,k=h.end,l=b._input.contours;if(j>k&&(h.start=l.start=k,k=h.end=l.end=j,j=h.start),!(h.size>0)){var m;m=j===k?1:d(j,k,b.ncontours).dtick,l.size=h.size=m}}return c}},{"../../lib":738,"../../plots/cartesian/axes":785,"../heatmap/calc":966}],939:[function(a,b,c){"use strict";var d=a("../../plots/plots"),e=a("../../components/colorbar/draw"),f=a("./make_color_map"),g=a("./end_plus");b.exports=function(a,b){var c=b[0].trace,h="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+h).remove(),!c.showscale)return void d.autoMargin(a,h);var i=e(a,h);b[0].t.cb=i;var j=c.contours,k=c.line,l=j.size||1,m=j.coloring,n=f(c,{isColorbar:!0});"heatmap"===m&&i.filllevels({start:c.zmin,end:c.zmax,size:(c.zmax-c.zmin)/254}),i.fillcolor("fill"===m||"heatmap"===m?n:"").line({color:"lines"===m?n:k.color,width:j.showlines!==!1?k.width:0,dash:k.dash}).levels({start:j.start,end:g(j),size:l}).options(c.colorbar)()}},{"../../components/colorbar/draw":617,"../../plots/plots":846,"./end_plus":943,"./make_color_map":947}],940:[function(a,b,c){"use strict";b.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],941:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c){var f,g=d.coerce2(a,b,e,"contours.start"),h=d.coerce2(a,b,e,"contours.end"),i=g===!1||h===!1,j=c("contours.size");f=i?b.autocontour=!0:c("autocontour",!1),(f||!j)&&c("ncontours")}},{"../../lib":738,"./attributes":937}],942:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../heatmap/has_columns"),f=a("../heatmap/xyz_defaults"),g=a("./contours_defaults"),h=a("./style_defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=f(a,b,k,j);return l?(k("text"),k("connectgaps",e(b)),g(a,b,k),void h(a,b,k,j)):void(b.visible=!1)}},{"../../lib":738,"../heatmap/has_columns":972,"../heatmap/xyz_defaults":981,"./attributes":937,"./contours_defaults":941,"./style_defaults":951}],943:[function(a,b,c){"use strict";b.exports=function(a){return a.end+a.size/1e6}},{}],944:[function(a,b,c){"use strict";function d(a,b,c,d){return Math.abs(a[0]-b[0])<c&&Math.abs(a[1]-b[1])<d}function e(a,b){var c=a[2]-b[2],d=a[3]-b[3];return Math.sqrt(c*c+d*d)}function f(a,b,c,f,k){function l(a){return r[a%r.length]}var m,n=b.join(","),o=n,p=a.crossings[o],q=g(p,c,b),r=[h(a,b,[-q[0],-q[1]])],s=q.join(","),t=a.z.length,u=a.z[0].length;for(m=0;1e4>m;m++){if(p>20?(p=j.CHOOSESADDLE[p][(q[0]||q[1])<0?0:1],a.crossings[o]=j.SADDLEREMAINDER[p]):delete a.crossings[o],q=j.NEWDELTA[p],!q){i.log("Found bad marching index:",p,b,a.level);break}r.push(h(a,b,q)),b[0]+=q[0],b[1]+=q[1],d(r[r.length-1],r[r.length-2],f,k)&&r.pop(),o=b.join(",");var v=q[0]&&(b[0]<0||b[0]>u-2)||q[1]&&(b[1]<0||b[1]>t-2),w=o===n&&q.join(",")===s;if(w||c&&v)break;p=a.crossings[o]}1e4===m&&i.log("Infinite loop in contour?");var x,y,z,A,B,C,D,E,F,G,H,I=d(r[0],r[r.length-1],f,k),J=0,K=.2*a.smoothing,L=[],M=0;for(m=1;m<r.length;m++)D=e(r[m],r[m-1]),J+=D,L.push(D);var N=J/L.length*K;for(m=r.length-2;m>=M;m--)if(x=L[m],N>x){for(z=0,y=m-1;y>=M&&x+L[y]<N;y--)x+=L[y];if(I&&m===r.length-2)for(z=0;y>z&&x+L[z]<N;z++)x+=L[z];B=m-y+z+1,C=Math.floor((m+y+z+2)/2),A=I||m!==r.length-2?I||-1!==y?B%2?l(C):[(l(C)[0]+l(C+1)[0])/2,(l(C)[1]+l(C+1)[1])/2]:r[0]:r[r.length-1],r.splice(y+1,m-y+1,A),m=y+1,z&&(M=z),I&&(m===r.length-2?r[z]=r[r.length-1]:0===m&&(r[r.length-1]=r[0]))}for(r.splice(0,M),m=0;m<r.length;m++)r[m].length=2;if(!(r.length<2))if(I)r.pop(),a.paths.push(r);else{c||i.log("Unclosed interior contour?",a.level,n,r.join("L"));var O=!1;for(E=0;E<a.edgepaths.length;E++)if(G=a.edgepaths[E],!O&&d(G[0],r[r.length-1],f,k)){r.pop(),O=!0;var P=!1;for(F=0;F<a.edgepaths.length;F++)if(H=a.edgepaths[F],d(H[H.length-1],r[0],f,k)){P=!0,r.shift(),a.edgepaths.splice(E,1),F===E?a.paths.push(r.concat(H)):(F>E&&F--,a.edgepaths[F]=H.concat(r,G));break}P||(a.edgepaths[E]=r.concat(G))}for(E=0;E<a.edgepaths.length&&!O;E++)G=a.edgepaths[E],d(G[G.length-1],r[0],f,k)&&(r.shift(),a.edgepaths[E]=G.concat(r),O=!0);O||a.edgepaths.push(r)}}function g(a,b,c){var d=0,e=0;return a>20&&b?208===a||1114===a?d=0===c[0]?1:-1:e=0===c[1]?1:-1:-1!==j.BOTTOMSTART.indexOf(a)?e=1:-1!==j.LEFTSTART.indexOf(a)?d=1:-1!==j.TOPSTART.indexOf(a)?e=-1:d=-1,[d,e]}function h(a,b,c){var d=b[0]+Math.max(c[0],0),e=b[1]+Math.max(c[1],0),f=a.z[e][d],g=a.xaxis,h=a.yaxis;if(c[1]){var i=(a.level-f)/(a.z[e][d+1]-f);return[g.c2p((1-i)*a.x[d]+i*a.x[d+1],!0),h.c2p(a.y[e],!0),d+i,e]}var j=(a.level-f)/(a.z[e+1][d]-f);return[g.c2p(a.x[d],!0),h.c2p((1-j)*a.y[e]+j*a.y[e+1],!0),d,e+j]}var i=a("../../lib"),j=a("./constants");b.exports=function(a,b,c){var d,e,g,h,j;for(b=b||.01,c=c||.01,g=0;g<a.length;g++){for(h=a[g],j=0;j<h.starts.length;j++)e=h.starts[j],f(h,e,"edge",b,c);for(d=0;Object.keys(h.crossings).length&&1e4>d;)d++,e=Object.keys(h.crossings)[0].split(",").map(Number),f(h,e,void 0,b,c);1e4===d&&i.log("Infinite loop in contour?")}}},{"../../lib":738,"./constants":940}],945:[function(a,b,c){"use strict";var d=a("../heatmap/hover");b.exports=function(a,b,c,e,f){return d(a,b,c,e,f,!0)}},{"../heatmap/hover":973}],946:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot").plot,d.style=a("./style"),d.colorbar=a("./colorbar"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="contour",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","contour"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"./attributes":937,"./calc":938,"./colorbar":939,"./defaults":942,"./hover":945,"./plot":949,"./style":950}],947:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/colorscale"),f=a("./end_plus");b.exports=function(a){var b=a.contours,c=b.start,g=f(b),h=b.size||1,i=Math.floor((g-c)/h)+1,j="lines"===b.coloring?0:1;isFinite(h)||(h=1,i=1);var k,l,m=a.colorscale,n=m.length,o=new Array(n),p=new Array(n);if("heatmap"===b.coloring){for(a.zauto&&a.autocontour===!1&&(a.zmin=c-h/2,a.zmax=a.zmin+i*h),l=0;n>l;l++)k=m[l],o[l]=k[0]*(a.zmax-a.zmin)+a.zmin,p[l]=k[1];var q=d.extent([a.zmin,a.zmax,b.start,b.start+h*(i-1)]),r=q[a.zmin<a.zmax?0:1],s=q[a.zmin<a.zmax?1:0];r!==a.zmin&&(o.splice(0,0,r),p.splice(0,0,Range[0])),s!==a.zmax&&(o.push(s),p.push(p[p.length-1]))}else for(l=0;n>l;l++)k=m[l],o[l]=(k[0]*(i+j-1)-j/2)*h+c,p[l]=k[1];return e.makeColorScaleFunc({domain:o,range:p},{noNumericCheck:!0})}},{"../../components/colorscale":628,"./end_plus":943,d3:123}],948:[function(a,b,c){"use strict";function d(a,b){var c=(b[0][0]>a?0:1)+(b[0][1]>a?0:2)+(b[1][1]>a?0:4)+(b[1][0]>a?0:8);if(5===c||10===c){var d=(b[0][0]+b[0][1]+b[1][0]+b[1][1])/4;return a>d?5===c?713:1114:5===c?104:208}return 15===c?0:c}var e=a("./constants");b.exports=function(a){var b,c,f,g,h,i,j,k,l,m=a[0].z,n=m.length,o=m[0].length,p=2===n||2===o;for(c=0;n-1>c;c++)for(g=[],0===c&&(g=g.concat(e.BOTTOMSTART)),c===n-2&&(g=g.concat(e.TOPSTART)),b=0;o-1>b;b++)for(f=g.slice(),0===b&&(f=f.concat(e.LEFTSTART)),b===o-2&&(f=f.concat(e.RIGHTSTART)),h=b+","+c,i=[[m[c][b],m[c][b+1]],[m[c+1][b],m[c+1][b+1]]],l=0;l<a.length;l++)k=a[l],j=d(k.level,i),j&&(k.crossings[h]=j,-1!==f.indexOf(j)&&(k.starts.push([b,c]),p&&-1!==f.indexOf(j,f.indexOf(j)+1)&&k.starts.push([b,c])))}},{"./constants":940}],949:[function(a,b,c){"use strict";function d(a,b,d){var h=d[0].trace,j=d[0].x,l=d[0].y,m=h.contours,n=h.uid,o=b.xaxis,p=b.yaxis,q=a._fullLayout,r="contour"+n,v=e(m,b,d[0]);if(h.visible!==!0)return q._paper.selectAll("."+r+",.hm"+n).remove(),void q._infolayer.selectAll(".cb"+n).remove();"heatmap"===m.coloring?(h.zauto&&h.autocontour===!1&&(h._input.zmin=h.zmin=m.start-m.size/2,h._input.zmax=h.zmax=h.zmin+v.length*m.size),s(a,b,[d])):(q._paper.selectAll(".hm"+n).remove(),q._infolayer.selectAll("g.rangeslider-container").selectAll(".hm"+n).remove()),t(v),u(v);var w=o.c2p(j[0],!0),x=o.c2p(j[j.length-1],!0),y=p.c2p(l[0],!0),z=p.c2p(l[l.length-1],!0),A=[[w,z],[x,z],[x,y],[w,y]],B=c.makeContourGroup(b,d,r);f(B,A,m),g(B,v,A,m),i(B,v,a,d[0],m,A),k(B,b,q._clips,d[0],A)}function e(a,b,c){for(var d=a.size,e=[],f=v(a),g=a.start;f>g;g+=d)if(e.push({level:g,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:c.x,y:c.y,z:c.z,smoothing:c.trace.line.smoothing}),e.length>1e3){n.warn("Too many contours, clipping at 1000",a);break}return e}function f(a,b,c){var d=a.selectAll("g.contourbg").data([0]);d.enter().append("g").classed("contourbg",!0);var e=d.selectAll("path").data("fill"===c.coloring?[0]:[]);e.enter().append("path"),e.exit().remove(),e.attr("d","M"+b.join("L")+"Z").style("stroke","none")}function g(a,b,c,d){var e=a.selectAll("g.contourfill").data([0]);e.enter().append("g").classed("contourfill",!0);var f=e.selectAll("path").data("fill"===d.coloring?b:[]);f.enter().append("path"),f.exit().remove(),f.each(function(a){var b=h(a,c);b?m.select(this).attr("d",b).style("stroke","none"):m.select(this).remove()})}function h(a,b){function c(a){return Math.abs(a[1]-b[0][1])<.01}function d(a){return Math.abs(a[1]-b[2][1])<.01}function e(a){return Math.abs(a[0]-b[0][0])<.01}function f(a){return Math.abs(a[0]-b[2][0])<.01}for(var g,h,i,j,k,l,m=Math.min(a.z[0][0],a.z[0][1]),p=a.edgepaths.length||m<=a.level?"":"M"+b.join("L")+"Z",q=0,r=a.edgepaths.map(function(a,b){return b}),s=!0;r.length;){for(l=o.smoothopen(a.edgepaths[q],a.smoothing),p+=s?l:l.replace(/^M/,"L"),r.splice(r.indexOf(q),1),g=a.edgepaths[q][a.edgepaths[q].length-1],j=-1,i=0;4>i;i++){if(!g){n.log("Missing end?",q,a);break}for(c(g)&&!f(g)?h=b[1]:e(g)?h=b[0]:d(g)?h=b[3]:f(g)&&(h=b[2]),k=0;k<a.edgepaths.length;k++){var t=a.edgepaths[k][0];Math.abs(g[0]-h[0])<.01?Math.abs(g[0]-t[0])<.01&&(t[1]-g[1])*(h[1]-t[1])>=0&&(h=t,j=k):Math.abs(g[1]-h[1])<.01?Math.abs(g[1]-t[1])<.01&&(t[0]-g[0])*(h[0]-t[0])>=0&&(h=t,j=k):n.log("endpt to newendpt is not vert. or horz.",g,h,t)}if(g=h,j>=0)break;p+="L"+h}if(j===a.edgepaths.length){n.log("unclosed perimeter path");break}q=j,s=-1===r.indexOf(q),s&&(q=r[0],p+="Z")}for(q=0;q<a.paths.length;q++)p+=o.smoothclosed(a.paths[q],a.smoothing);return p}function i(a,b,d,e,f,g){var h=a.selectAll("g.contourlines").data([0]);h.enter().append("g").classed("contourlines",!0);var i=f.showlines!==!1,j=f.showlabels,k=i&&j,l=c.createLines(h,i||j,b),p=c.createLineClip(h,k,d._fullLayout._clips,e.trace.uid),q=a.selectAll("g.contourlabels").data(j?[0]:[]);if(q.exit().remove(),q.enter().append("g").classed("contourlabels",!0),j){var r=[g],s=[];n.clearLocationCache();var t=c.labelFormatter(f,e.t.cb,d._fullLayout),u=o.tester.append("text").attr("data-notex",1).call(o.font,f.labelfont),v=b[0].xaxis._length,x=b[0].yaxis._length,y={left:Math.max(g[0][0],0),right:Math.min(g[2][0],v),top:Math.max(g[0][1],0),bottom:Math.min(g[2][1],x)};y.middle=(y.top+y.bottom)/2,y.center=(y.left+y.right)/2;var z=Math.sqrt(v*v+x*x),A=w.LABELDISTANCE*z/Math.max(1,b.length/w.LABELINCREASE);l.each(function(a){var b=c.calcTextOpts(a.level,t,u,d);m.select(this).selectAll("path").each(function(){var a=this,d=n.getVisibleSegment(a,y,b.height/2);if(d&&!(d.len<(b.width+b.height)*w.LABELMIN))for(var e=Math.min(Math.ceil(d.len/A),w.LABELMAX),f=0;e>f;f++){var g=c.findBestTextLocation(a,d,b,s,y);if(!g)break;c.addLabelData(g,b,s,r)}})}),u.remove(),c.drawLabels(q,s,d,p,k?r:null)}j&&!i&&l.remove()}function j(a,b,c,d){var e=b.width/2,f=b.height/2,g=a.x,h=a.y,i=a.theta,j=Math.cos(i)*e,k=Math.sin(i)*e,l=(g>d.center?d.right-g:g-d.left)/(j+Math.abs(Math.sin(i)*f)),m=(h>d.middle?d.bottom-h:h-d.top)/(Math.abs(k)+Math.cos(i)*f);if(1>l||1>m)return 1/0;var o=x.EDGECOST*(1/(l-1)+1/(m-1));o+=x.ANGLECOST*i*i;for(var p=g-j,q=h-k,r=g+j,s=h+k,t=0;t<c.length;t++){var u=c[t],v=Math.cos(u.theta)*u.width/2,w=Math.sin(u.theta)*u.width/2,y=2*n.segmentDistance(p,q,r,s,u.x-v,u.y-w,u.x+v,u.y+w)/(b.height+u.height),z=u.level===b.level,A=z?x.SAMELEVELDISTANCE:1;if(A>=y)return 1/0;var B=x.NEIGHBORCOST*(z?x.SAMELEVELFACTOR:1);o+=B/(y-A)}return o}function k(a,b,c,d,e){var f="clip"+d.trace.uid,g=c.selectAll("#"+f).data(d.trace.connectgaps?[]:[0]);if(g.enter().append("clipPath").classed("contourclip",!0).attr("id",f),g.exit().remove(),d.trace.connectgaps===!1){var i={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:d.x,y:d.y,z:l(d),smoothing:0};t([i]),u([i]);var j=h(i,e),k=g.selectAll("path").data([0]);k.enter().append("path"),k.attr("d",j)}else f=null;a.call(o.setClipUrl,f),b.plot.selectAll(".hm"+d.trace.uid).call(o.setClipUrl,f)}function l(a){var b,c,d=a.trace._emptypoints,e=[],f=a.z.length,g=a.z[0].length,h=[];for(b=0;g>b;b++)h.push(1);for(b=0;f>b;b++)e.push(h.slice());for(b=0;b<d.length;b++)c=d[b],e[c[0]][c[1]]=0;return a.zmask=e,e}var m=a("d3"),n=a("../../lib"),o=a("../../components/drawing"),p=a("../../lib/svg_text_utils"),q=a("../../plots/cartesian/axes"),r=a("../../plots/cartesian/set_convert"),s=a("../heatmap/plot"),t=a("./make_crossings"),u=a("./find_all_paths"),v=a("./end_plus"),w=a("./constants"),x=w.LABELOPTIMIZER;c.plot=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])},c.makeContourGroup=function(a,b,c){var d=a.plot.select(".maplayer").selectAll("g.contour."+c).data(b);return d.enter().append("g").classed("contour",!0).classed(c,!0),d.exit().remove(),d},c.createLines=function(a,b,c){var d=c[0].smoothing,e=a.selectAll("g.contourlevel").data(b?c:[]);if(e.exit().remove(),e.enter().append("g").classed("contourlevel",!0),b){var f=e.selectAll("path.openline").data(function(a){return a.pedgepaths||a.edgepaths});f.exit().remove(),f.enter().append("path").classed("openline",!0),f.attr("d",function(a){return o.smoothopen(a,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var g=e.selectAll("path.closedline").data(function(a){return a.ppaths||a.paths});g.exit().remove(),g.enter().append("path").classed("closedline",!0),g.attr("d",function(a){return o.smoothclosed(a,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return e},c.createLineClip=function(a,b,c,d){var e=b?"clipline"+d:null,f=c.selectAll("#"+e).data(b?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",e),o.setClipUrl(a,e),f},c.labelFormatter=function(a,b,c){if(a.labelformat)return c._d3locale.numberFormat(a.labelformat);var d;return b?d=b.axis:(d={type:"linear",_id:"ycontour",nticks:(a.end-a.start)/a.size,showexponent:"all",range:[a.start,a.end]},r(d,c),q.calcTicks(d),d._tmin=null,d._tmax=null),function(a){return q.tickText(d,a).text}},c.calcTextOpts=function(a,b,c,d){var e=b(a);c.text(e).call(p.convertToTspans,d);var f=o.bBox(c.node(),!0);return{text:e,width:f.width,height:f.height,level:a,dy:(f.top+f.bottom)/2}},c.findBestTextLocation=function(a,b,c,d,e){var f,g,h,i,k,l=c.width;b.isClosed?(g=b.len/x.INITIALSEARCHPOINTS,f=b.min+g/2,h=b.max):(g=(b.len-l)/(x.INITIALSEARCHPOINTS+1),f=b.min+g+l/2,h=b.max-(g+l)/2);for(var m=1/0,o=0;o<x.ITERATIONS;o++){for(var p=f;h>p;p+=g){var q=n.getTextLocation(a,b.total,p,l),r=j(q,c,d,e);m>r&&(m=r,k=q,i=p)}if(m>2*x.MAXCOST)break;o&&(g/=2),f=i-g/2,h=f+1.5*g}return m<=x.MAXCOST?k:void 0},c.addLabelData=function(a,b,c,d){var e=b.width/2,f=b.height/2,g=a.x,h=a.y,i=a.theta,j=Math.sin(i),k=Math.cos(i),l=e*k,m=f*j,n=e*j,o=-f*k,p=[[g-l-m,h-n-o],[g+l-m,h+n-o],[g+l+m,h+n+o],[g-l+m,h-n+o]];c.push({text:b.text,x:g,y:h,dy:b.dy,theta:i,level:b.level,width:b.width,height:b.height}),d.push(p)},c.drawLabels=function(a,b,c,d,e){var f=a.selectAll("text").data(b,function(a){return a.text+","+a.x+","+a.y+","+a.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(a){var b=a.x+Math.sin(a.theta)*a.dy,d=a.y-Math.cos(a.theta)*a.dy;m.select(this).text(a.text).attr({x:b,y:d,transform:"rotate("+180*a.theta/Math.PI+" "+b+" "+d+")"}).call(p.convertToTspans,c)}),e){for(var g="",h=0;h<e.length;h++)g+="M"+e[h].join("L")+"Z";var i=d.selectAll("path").data([0]);i.enter().append("path"),i.attr("d",g)}}},{"../../components/drawing":638,"../../lib":738,"../../lib/svg_text_utils":761,"../../plots/cartesian/axes":785,"../../plots/cartesian/set_convert":803,"../heatmap/plot":978,"./constants":940,"./end_plus":943,"./find_all_paths":944,"./make_crossings":948,d3:123}],950:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/drawing"),f=a("../heatmap/style"),g=a("./make_color_map");b.exports=function(a){var b=d.select(a).selectAll("g.contour");b.style("opacity",function(a){return a.trace.opacity}),b.each(function(a){var b=d.select(this),c=a.trace,f=c.contours,h=c.line,i=f.size||1,j=f.start,k="constraint"===f.type,l=!k&&"lines"===f.coloring,m=!k&&"fill"===f.coloring,n=l||m?g(c):null;b.selectAll("g.contourlevel").each(function(a){d.select(this).selectAll("path").call(e.lineGroupStyle,h.width,l?n(a.level):h.color,h.dash)});var o=f.labelfont;if(b.selectAll("g.contourlabels text").each(function(a){e.font(d.select(this),{family:o.family,size:o.size,color:o.color||(l?n(a.level):h.color)})}),k)b.selectAll("g.contourfill path").style("fill",c.fillcolor);else if(m){var p;b.selectAll("g.contourfill path").style("fill",function(a){return void 0===p&&(p=a.level),n(a.level+.5*i)}),void 0===p&&(p=j),b.selectAll("g.contourbg path").style("fill",n(p-.5*i))}}),f(a)}},{"../../components/drawing":638,"../heatmap/style":979,"./make_color_map":947,d3:123}],951:[function(a,b,c){"use strict";var d=a("../../components/colorscale/defaults"),e=a("../../lib");b.exports=function(a,b,c,f,g){g||(g={});var h,i=c("contours.coloring"),j="";"fill"===i&&(h=c("contours.showlines")),h!==!1&&("lines"!==i&&(j=c("line.color",g.defaultColor||"#000")),c("line.width",void 0===g.defaultWidth?.5:g.defaultWidth),c("line.dash")),c("line.smoothing"),"none"!==i&&d(a,b,f,c,{prefix:"",cLetter:"z"});var k=c("contours.showlabels");if(k){var l=f.font;e.coerceFont(c,"contours.labelfont",{family:l.family,size:l.size,color:j}),c("contours.labelformat")}g.hasHover!==!1&&c("zhoverformat")}},{"../../components/colorscale/defaults":623,"../../lib":738}],952:[function(a,b,c){"use strict";var d=a("../heatmap/attributes"),e=a("../contour/attributes"),f=e.contours,g=a("../scatter/attributes"),h=a("../../components/colorscale/attributes"),i=a("../../components/colorbar/attributes"),j=a("../../lib/extend").extendFlat,k=g.line,l=a("./constants");b.exports=j({},{carpet:{valType:"string",editType:"calc"},z:d.z,a:d.x,a0:d.x0,da:d.dx,b:d.y,b0:d.y0,db:d.dy,text:d.text,transpose:d.transpose,atype:d.xtype,btype:d.ytype,mode:{valType:"flaglist",flags:["lines","fill"],extras:["none"],editType:"calc"},connectgaps:d.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:e.autocontour,ncontours:e.ncontours,contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:f.start,end:f.end,size:f.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:f.showlines,showlabels:f.showlabels,labelfont:f.labelfont,labelformat:f.labelformat,operation:{valType:"enumerated",values:[].concat(l.INEQUALITY_OPS).concat(l.INTERVAL_OPS).concat(l.SET_OPS),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc"},line:{color:j({},k.color,{}),width:k.width,dash:k.dash,smoothing:j({},k.smoothing,{}),editType:"plot"}},h,{autocolorscale:j({},h.autocolorscale,{dflt:!1})},{colorbar:i})},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../lib/extend":727,
"../contour/attributes":937,"../heatmap/attributes":965,"../scatter/attributes":1054,"./constants":955}],953:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"linear",range:[a,b]};return f.autoTicks(d,(b-a)/(c||15)),d}function e(a,b){var c,d,e,f,g,p,q,r=b.carpetTrace,s=r.aaxis,t=r.baxis;s._minDtick=0,t._minDtick=0,i(b)&&j(b,s,t,"a","b",["z"]),c=b.a?s.makeCalcdata(b,"a"):[],f=b.b?t.makeCalcdata(b,"b"):[],d=b.a0||0,e=b.da||1,g=b.b0||0,p=b.db||1,q=k(b.z,b.transpose),b._emptypoints=n(q),b._interpz=m(q,b._emptypoints,b._interpz);var u=l(q),v="scaled"===b.xtype?"":c,w=o(b,v,d,e,u,s),x="scaled"===b.ytype?"":f,y=o(b,x,g,p,q.length,t),z={a:w,b:y,z:q};return"levels"===b.contours.type&&h(b,q,"","z"),[z]}var f=a("../../plots/cartesian/axes"),g=a("../../lib").extendFlat,h=a("../../components/colorscale/calc"),i=a("../heatmap/has_columns"),j=a("../heatmap/convert_column_xyz"),k=a("../heatmap/clean_2d_array"),l=a("../heatmap/max_row_length"),m=a("../heatmap/interp2d"),n=a("../heatmap/find_empties"),o=a("../heatmap/make_bound_array"),p=a("./defaults"),q=a("../carpet/lookup_carpetid");b.exports=function(a,b){var c=b.carpetTrace=q(a,b);if(c&&c.visible&&"legendonly"!==c.visible){if(!b.a||!b.b){var h=a.data[c.index],i=a.data[b.index];i.a||(i.a=h.a),i.b||(i.b=h.b),p(i,b,b._defaultColor,a._fullLayout)}var j=e(a,b),k=b.contours;if(b.autocontour===!0){var l=d(b.zmin,b.zmax,b.ncontours);k.size=l.dtick,k.start=f.tickFirst(l),l.range.reverse(),k.end=f.tickFirst(l),k.start===b.zmin&&(k.start+=k.size),k.end===b.zmax&&(k.end-=k.size),k.start>k.end&&(k.start=k.end=(k.start+k.end)/2),b._input.contours=g({},k)}else{var m=k.start,n=k.end,o=b._input.contours;if(m>n&&(k.start=o.start=n,n=k.end=o.end=m,m=k.start),!(k.size>0)){var r;r=m===n?1:d(m,n,b.ncontours).dtick,o.size=k.size=r}}return j}}},{"../../components/colorscale/calc":620,"../../lib":738,"../../plots/cartesian/axes":785,"../carpet/lookup_carpetid":919,"../heatmap/clean_2d_array":967,"../heatmap/convert_column_xyz":969,"../heatmap/find_empties":971,"../heatmap/has_columns":972,"../heatmap/interp2d":975,"../heatmap/make_bound_array":976,"../heatmap/max_row_length":977,"./defaults":959}],954:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e,f,g,h=d.a.length,i=d.b.length,j=d.z,k=-(1/0),l=1/0;for(e=0;i>e;e++)l=Math.min(l,j[e][0]),l=Math.min(l,j[e][h-1]),k=Math.max(k,j[e][0]),k=Math.max(k,j[e][h-1]);for(e=1;h-1>e;e++)l=Math.min(l,j[0][e]),l=Math.min(l,j[i-1][e]),k=Math.max(k,j[0][e]),k=Math.max(k,j[i-1][e]);switch(b){case">":case">=":d.contours.value>k&&(a[0].prefixBoundary=!0);break;case"<":case"<=":d.contours.value<l&&(a[0].prefixBoundary=!0);break;case"[]":case"()":f=Math.min.apply(null,d.contours.value),g=Math.max.apply(null,d.contours.value),l>g&&(a[0].prefixBoundary=!0),f>k&&(a[0].prefixBoundary=!0);break;case"][":case")(":f=Math.min.apply(null,d.contours.value),g=Math.max.apply(null,d.contours.value),l>f&&g>k&&(a[0].prefixBoundary=!0)}}},{}],955:[function(a,b,c){"use strict";b.exports={INEQUALITY_OPS:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"]}},{}],956:[function(a,b,c){"use strict";function d(a,b){function c(a){return h(a)?+a:null}var d,e=Array.isArray(b);return-1!==g.INEQUALITY_OPS.indexOf(a)?d=c(e?b[0]:b):-1!==g.INTERVAL_OPS.indexOf(a)?d=e?[c(b[0]),c(b[1])]:[c(b),c(b)]:-1!==g.SET_OPS.indexOf(a)&&(d=e?b.map(c):[c(b)]),d}function e(a){return function(b){b=d(a,b);var c=Math.min(b[0],b[1]),e=Math.max(b[0],b[1]);return{start:c,end:e,size:e-c}}}function f(a){return function(b){return b=d(a,b),{start:b,end:1/0,size:1/0}}}var g=a("./constants"),h=a("fast-isnumeric");b.exports["[]"]=e("[]"),b.exports["()"]=e("()"),b.exports["[)"]=e("[)"),b.exports["(]"]=e("(]"),b.exports["]["]=e("]["),b.exports[")("]=e(")("),b.exports[")["]=e(")["),b.exports["]("]=e("]("),b.exports[">"]=f(">"),b.exports[">="]=f(">="),b.exports["<"]=f("<"),b.exports["<="]=f("<="),b.exports["="]=f("=")},{"./constants":955,"fast-isnumeric":132}],957:[function(a,b,c){"use strict";var d=a("./constraint_mapping"),e=a("fast-isnumeric");b.exports=function(a,b){var c,f=["=","<","<=",">",">="];-1===f.indexOf(b.operation)?(a("contours.value",[0,1]),Array.isArray(b.value)?b.value.length>2?b.value=b.value.slice(2):0===b.length?b.value=[0,1]:b.length<2?(c=parseFloat(b.value[0]),b.value=[c,c+1]):b.value=[parseFloat(b.value[0]),parseFloat(b.value[1])]:e(b.value)&&(c=parseFloat(b.value),b.value=[c,c+1])):(a("contours.value",0),e(b.value)||(Array.isArray(b.value)?b.value=parseFloat(b.value[0]):b.value=0));var g=d[b.operation](b.value);b.start=g.start,b.end=g.end,b.size=g.size}},{"./constraint_mapping":956,"fast-isnumeric":132}],958:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){var c,e,f,g=function(a){return a.reverse()},h=function(a){return a};switch(b){case"][":case")[":case"](":case")(":var i=g;g=h,h=i;case"[]":case"[)":case"(]":case"()":if(2!==a.length)return void d.warn("Contour data invalid for the specified inequality range operation.");for(e=a[0],f=a[1],c=0;c<e.edgepaths.length;c++)e.edgepaths[c]=g(e.edgepaths[c]);for(c=0;c<e.paths.length;c++)e.paths[c]=g(e.paths[c]);for(;f.edgepaths.length;)e.edgepaths.push(h(f.edgepaths.shift()));for(;f.paths.length;)e.paths.push(h(f.paths.shift()));a.pop();break;case">=":case">":if(1!==a.length)return void d.warn("Contour data invalid for the specified inequality operation.");for(e=a[0],c=0;c<e.edgepaths.length;c++)e.edgepaths[c]=g(e.edgepaths[c]);for(c=0;c<e.paths.length;c++)e.paths[c]=g(e.paths[c])}}},{"../../lib":738}],959:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../heatmap/xyz_defaults"),f=a("./attributes"),g=a("../contour/style_defaults"),h=a("../scatter/fillcolor_defaults"),i=a("../../plots/attributes"),j=a("./constraint_value_defaults"),k=a("../../components/color").addOpacity;b.exports=function(a,b,c,l){function m(c,e){return d.coerce(a,b,f,c,e)}if(m("carpet"),a.a&&a.b){var n,o,p,q,r,s=e(a,b,m,l,"a","b");if(!s)return void(b.visible=!1);m("text"),m("contours.type");var t=b.contours;if("constraint"===t.type){m("contours.operation"),j(m,t),d.coerce(a,b,i,"showlegend",!0),m("contours.coloring","="===t.operation?"lines":"fill"),m("contours.showlines",!0),"="===t.operation&&(t.coloring="lines"),h(a,b,c,m);var u=b.fillcolor?k(b.fillcolor,1):c;g(a,b,m,l,{hasHover:!1,defaultColor:u,defaultWidth:2}),"="===t.operation&&(m("line.color",c),"fill"===t.coloring&&(t.coloring="lines"),"lines"===t.coloring&&delete b.fillcolor),delete b.showscale,delete b.autocontour,delete b.autocolorscale,delete b.colorscale,delete b.ncontours,delete b.colorbar,b.line&&(delete b.line.autocolorscale,delete b.line.colorscale,delete b.line.mincolor,delete b.line.maxcolor)}else d.coerce(a,b,i,"showlegend",!1),o=d.coerce2(a,b,f,"contours.start"),p=d.coerce2(a,b,f,"contours.end"),n=m("contours.size"),m("contours.coloring"),q=o===!1||p===!1,r=q?b.autocontour=!0:m("autocontour",!1),(r||!n)&&m("ncontours"),g(a,b,m,l,{hasHover:!1}),delete b.value,delete b.operation}else b._defaultColor=c}},{"../../components/color":613,"../../lib":738,"../../plots/attributes":783,"../contour/style_defaults":951,"../heatmap/xyz_defaults":981,"../scatter/fillcolor_defaults":1063,"./attributes":952,"./constraint_value_defaults":957}],960:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c){for(var e=a.size,f=[],g=c.trace.carpetTrace,h=a.start;h<a.end+e/10;h+=e)if(f.push({level:h,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:g.aaxis,yaxis:g.baxis,x:c.a,y:c.b,z:c.z,smoothing:c.trace.line.smoothing}),f.length>1e3){d.warn("Too many contours, clipping at 1000",a);break}return f}},{"../../lib":738}],961:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../contour/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("../contour/style"),d.moduleType="trace",d.name="contourcarpet",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","carpet","contour","symbols","showLegend","hasLines","carpetDependent"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"../contour/colorbar":939,"../contour/style":950,"./attributes":952,"./calc":953,"./defaults":959,"./plot":964}],962:[function(a,b,c){"use strict";var d=a("../../components/drawing"),e=a("../carpet/axis_aligned_line"),f=a("../../lib");b.exports=function(a,b,c,g,h,i,j,k){function l(a){return Math.abs(a[1]-c[0][1])<B}function m(a){return Math.abs(a[1]-c[2][1])<B}function n(a){return Math.abs(a[0]-c[0][0])<A}function o(a){return Math.abs(a[0]-c[2][0])<A}function p(a,b){var c,d,f,g,p="";for(l(a)&&!o(a)||m(a)&&!n(a)?(g=h.aaxis,f=e(h,i,[a[0],b[0]],.5*(a[1]+b[1]))):(g=h.baxis,f=e(h,i,.5*(a[0]+b[0]),[a[1],b[1]])),c=1;c<f.length;c++)for(p+=g.smoothing?"C":"L",d=0;d<f[c].length;d++){var q=f[c][d];p+=[j.c2p(q[0]),k.c2p(q[1])]+" "}return p}var q,r,s,t,u,v,w,x="",y=b.edgepaths.map(function(a,b){return b}),z=!0,A=1e-4*Math.abs(c[0][0]-c[2][0]),B=1e-4*Math.abs(c[0][1]-c[2][1]);for(q=0,r=null;y.length;){var C=b.edgepaths[q][0];for(r&&(x+=p(r,C)),w=d.smoothopen(b.edgepaths[q].map(g),b.smoothing),x+=z?w:w.replace(/^M/,"L"),y.splice(y.indexOf(q),1),r=b.edgepaths[q][b.edgepaths[q].length-1],u=-1,t=0;4>t;t++){if(!r){f.log("Missing end?",q,b);break}for(l(r)&&!o(r)?s=c[1]:n(r)?s=c[0]:m(r)?s=c[3]:o(r)&&(s=c[2]),v=0;v<b.edgepaths.length;v++){var D=b.edgepaths[v][0];Math.abs(r[0]-s[0])<A?Math.abs(r[0]-D[0])<A&&(D[1]-r[1])*(s[1]-D[1])>=0&&(s=D,u=v):Math.abs(r[1]-s[1])<B?Math.abs(r[1]-D[1])<B&&(D[0]-r[0])*(s[0]-D[0])>=0&&(s=D,u=v):f.log("endpt to newendpt is not vert. or horz.",r,s,D)}if(u>=0)break;x+=p(r,s),r=s}if(u===b.edgepaths.length){f.log("unclosed perimeter path");break}q=u,z=-1===y.indexOf(q),z&&(q=y[0],x+=p(r,s)+"Z",r=null)}for(q=0;q<b.paths.length;q++)x+=d.smoothclosed(b.paths[q].map(g),b.smoothing);return x}},{"../../components/drawing":638,"../../lib":738,"../carpet/axis_aligned_line":902}],963:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d,e,f,g,h,i,j,k;for(c=0;c<a.length;c++){for(f=a[c],g=f.pedgepaths=[],h=f.ppaths=[],d=0;d<f.edgepaths.length;d++){for(k=f.edgepaths[d],i=[],e=0;e<k.length;e++)i[e]=b(k[e]);g.push(i)}for(d=0;d<f.paths.length;d++){for(k=f.paths[d],j=[],e=0;e<k.length;e++)j[e]=b(k[e]);h.push(j)}}}},{}],964:[function(a,b,c){"use strict";function d(a,b,c){function d(a){var b=g.ab2xy(a[0],a[1],!0);return[v.c2p(b[0]),A.c2p(b[1])]}var f=c[0].trace,g=f.carpetTrace=y(a,f),h=a.calcdata[g.index][0];if(g.visible&&"legendonly"!==g.visible){var i=c[0].a,l=c[0].b,p=f.contours,t=f.uid,v=b.xaxis,A=b.yaxis,B=a._fullLayout,C="contour"+t,D=w(p,b,c[0]),E="constraint"===f.contours.type;if(f.visible!==!0)return void B._infolayer.selectAll(".cb"+t).remove();var F=[[i[0],l[l.length-1]],[i[i.length-1],l[l.length-1]],[i[i.length-1],l[0]],[i[0],l[0]]];q(D);var G=1e-8*(i[i.length-1]-i[0]),H=1e-8*(l[l.length-1]-l[0]);r(D,G,H),"constraint"===f.contours.type&&(u(D,f.contours.operation),z(D,f.contours.operation,F,f)),x(D,d);var I,J,K,L,M=s.makeContourGroup(b,c,C),N=[];for(L=h.clipsegments.length-1;L>=0;L--)I=h.clipsegments[L],J=m([],I.x,v.c2p),K=m([],I.y,A.c2p),J.reverse(),K.reverse(),N.push(n(J,K,I.bicubic));var O="M"+N.join("L")+"Z";j(M,h.clipsegments,v,A,E,p.coloring),k(f,M,v,A,D,F,d,g,h,p.coloring,O),e(M,D,a,c[0],p,b,g),o.setClipUrl(M,g._clipPathId)}}function e(a,b,c,d,e,g,h){var i=a.selectAll("g.contourlines").data([0]);i.enter().append("g").classed("contourlines",!0);var j=e.showlines!==!1,k=e.showlabels,m=j&&k,n=s.createLines(i,j||k,b),q=s.createLineClip(i,m,c._fullLayout._defs,d.trace.uid),r=a.selectAll("g.contourlabels").data(k?[0]:[]);if(r.exit().remove(),r.enter().append("g").classed("contourlabels",!0),k){var u=g.xaxis,v=g.yaxis,w=u._length,x=v._length,y=[[[0,0],[w,0],[w,x],[0,x]]],z=[];p.clearLocationCache();var A=s.labelFormatter(e,d.t.cb,c._fullLayout),B=o.tester.append("text").attr("data-notex",1).call(o.font,e.labelfont),C={left:0,right:w,center:w/2,top:0,bottom:x,middle:x/2},D=Math.sqrt(w*w+x*x),E=t.LABELDISTANCE*D/Math.max(1,b.length/t.LABELINCREASE);n.each(function(a){var b=s.calcTextOpts(a.level,A,B,c);l.select(this).selectAll("path").each(function(c){var d=this,e=p.getVisibleSegment(d,C,b.height/2);if(e&&(f(d,c,a,e,h,b.height),!(e.len<(b.width+b.height)*t.LABELMIN)))for(var g=Math.min(Math.ceil(e.len/E),t.LABELMAX),i=0;g>i;i++){var j=s.findBestTextLocation(d,e,b,z,C);if(!j)break;s.addLabelData(j,b,z,y)}})}),B.remove(),s.drawLabels(r,z,c,q,m?y:null)}k&&!j&&n.remove()}function f(a,b,c,d,e,f){function j(a,b){var c,d=0,g=.1;return(Math.abs(a[0]-m)<g||Math.abs(a[0]-n)<g)&&(c=h(e.dxydb_rough(a[0],a[1],g)),d=Math.max(d,f*i(b,c)/2)),(Math.abs(a[1]-o)<g||Math.abs(a[1]-p)<g)&&(c=h(e.dxyda_rough(a[0],a[1],g)),d=Math.max(d,f*i(b,c)/2)),d}for(var k,l=0;l<c.pedgepaths.length;l++)b===c.pedgepaths[l]&&(k=c.edgepaths[l]);if(k){var m=e.a[0],n=e.a[e.a.length-1],o=e.b[0],p=e.b[e.b.length-1],q=g(a,0,1),r=g(a,d.total,d.total-1),s=j(k[0],q),t=d.total-j(k[k.length-1],r);d.min<s&&(d.min=s),d.max>t&&(d.max=t),d.len=d.max-d.min}}function g(a,b,c){var d=a.getPointAtLength(b),e=a.getPointAtLength(c),f=e.x-d.x,g=e.y-d.y,h=Math.sqrt(f*f+g*g);return[f/h,g/h]}function h(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return[a[0]/b,a[1]/b]}function i(a,b){var c=Math.abs(a[0]*b[0]+a[1]*b[1]),d=Math.sqrt(1-c*c);return d/c}function j(a,b,c,d,e,f){var g,h,i,j,k=a.selectAll("g.contourbg").data([0]);k.enter().append("g").classed("contourbg",!0);var l=k.selectAll("path").data("fill"!==f||e?[]:[0]);l.enter().append("path"),l.exit().remove();var o=[];for(j=0;j<b.length;j++)g=b[j],h=m([],g.x,c.c2p),i=m([],g.y,d.c2p),o.push(n(h,i,g.bicubic));l.attr("d","M"+o.join("L")+"Z").style("stroke","none")}function k(a,b,c,d,e,f,g,h,i,j,k){var m=b.selectAll("g.contourfill").data([0]);m.enter().append("g").classed("contourfill",!0);var n=m.selectAll("path").data("fill"===j?e:[]);n.enter().append("path"),n.exit().remove(),n.each(function(b){var e=v(a,b,f,g,h,i,c,d);b.prefixBoundary&&(e=k+e),e?l.select(this).attr("d",e).style("stroke","none"):l.select(this).remove()})}var l=a("d3"),m=a("../carpet/map_1d_array"),n=a("../carpet/makepath"),o=a("../../components/drawing"),p=a("../../lib"),q=a("../contour/make_crossings"),r=a("../contour/find_all_paths"),s=a("../contour/plot"),t=a("../contour/constants"),u=a("./convert_to_constraints"),v=a("./join_all_paths"),w=a("./empty_pathinfo"),x=a("./map_pathinfo"),y=a("../carpet/lookup_carpetid"),z=a("./close_boundaries");b.exports=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])}},{"../../components/drawing":638,"../../lib":738,"../carpet/lookup_carpetid":919,"../carpet/makepath":920,"../carpet/map_1d_array":921,"../contour/constants":940,"../contour/find_all_paths":944,"../contour/make_crossings":948,"../contour/plot":949,"./close_boundaries":954,"./convert_to_constraints":958,"./empty_pathinfo":960,"./join_all_paths":962,"./map_pathinfo":963,d3:123}],965:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../lib/extend").extendFlat;b.exports=g({},{z:{valType:"data_array",editType:"calc"},x:g({},d.x,{impliedEdits:{xtype:"array"}}),x0:g({},d.x0,{impliedEdits:{xtype:"scaled"}}),dx:g({},d.dx,{impliedEdits:{xtype:"scaled"}}),y:g({},d.y,{impliedEdits:{ytype:"array"}}),y0:g({},d.y0,{impliedEdits:{ytype:"scaled"}}),dy:g({},d.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"}},e,{autocolorscale:g({},e.autocolorscale,{dflt:!1})},{colorbar:f})},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../lib/extend":727,"../scatter/attributes":1054}],966:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("../histogram2d/calc"),h=a("../../components/colorscale/calc"),i=a("./has_columns"),j=a("./convert_column_xyz"),k=a("./max_row_length"),l=a("./clean_2d_array"),m=a("./interp2d"),n=a("./find_empties"),o=a("./make_bound_array");b.exports=function(a,b){function c(a){D=b._input.zsmooth=b.zsmooth=!1,e.warn('cannot use zsmooth: "fast": '+a)}var p,q,r,s,t,u,v,w,x,y=f.getFromId(a,b.xaxis||"x"),z=f.getFromId(a,b.yaxis||"y"),A=d.traceIs(b,"contour"),B=d.traceIs(b,"histogram"),C=d.traceIs(b,"gl2d"),D=A?"best":b.zsmooth;if(y._minDtick=0,z._minDtick=0,B?(x=g(a,b),p=x.x,q=x.x0,r=x.dx,s=x.y,t=x.y0,u=x.dy,v=x.z):(i(b)?(j(b,y,z,"x","y",["z"]),p=b.x,s=b.y):(p=b.x?y.makeCalcdata(b,"x"):[],s=b.y?z.makeCalcdata(b,"y"):[]),q=b.x0||0,r=b.dx||1,t=b.y0||0,u=b.dy||1,v=l(b.z,b.transpose),(A||b.connectgaps)&&(b._emptypoints=n(v),b._interpz=m(v,b._emptypoints,b._interpz))),"fast"===D)if("log"===y.type||"log"===z.type)c("log axis found");else if(!B){if(p.length){var E=(p[p.length-1]-p[0])/(p.length-1),F=Math.abs(E/100);for(w=0;w<p.length-1;w++)if(Math.abs(p[w+1]-p[w]-E)>F){c("x scale is not linear");break}}if(s.length&&"fast"===D){var G=(s[s.length-1]-s[0])/(s.length-1),H=Math.abs(G/100);for(w=0;w<s.length-1;w++)if(Math.abs(s[w+1]-s[w]-G)>H){c("y scale is not linear");break}}}var I=k(v),J="scaled"===b.xtype?"":p,K=o(b,J,q,r,I,y),L="scaled"===b.ytype?"":s,M=o(b,L,t,u,v.length,z);C||(f.expand(y,K),f.expand(z,M));var N={x:K,y:M,z:v,text:b.text};if(B&&(N.xRanges=x.xRanges,N.yRanges=x.yRanges,N.pts=x.pts),h(b,v,"","z"),A&&b.contours&&"heatmap"===b.contours.coloring){var O={type:"contour"===b.type?"heatmap":"histogram2d",xcalendar:b.xcalendar,ycalendar:b.ycalendar};N.xfill=o(O,J,q,r,I,y),N.yfill=o(O,L,t,u,v.length,z)}return[N]}},{"../../components/colorscale/calc":620,"../../lib":738,"../../plots/cartesian/axes":785,"../../registry":861,"../histogram2d/calc":998,"./clean_2d_array":967,"./convert_column_xyz":969,"./find_empties":971,"./has_columns":972,"./interp2d":975,"./make_bound_array":976,"./max_row_length":977}],967:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a,b){function c(a){return d(a)?+a:void 0}var e,f,g,h,i,j;if(b){for(e=0,i=0;i<a.length;i++)e=Math.max(e,a[i].length);if(0===e)return!1;g=function(a){return a.length},h=function(a,b,c){return a[c][b]}}else e=a.length,g=function(a,b){return a[b].length},h=function(a,b,c){return a[b][c]};var k=new Array(e);for(i=0;e>i;i++)for(f=g(a,i),k[i]=new Array(f),j=0;f>j;j++)k[i][j]=c(h(a,i,j));return k}},{"fast-isnumeric":132}],968:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.zmin,k=c.zmax;if(d(j)||(j=e.aggNums(Math.min,null,c.z)),d(k)||(k=e.aggNums(Math.max,null,c.z)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var l=b[0].t.cb=h(a,i),m=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});l.fillcolor(m).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":617,"../../components/colorscale":628,"../../lib":738,"../../plots/plots":846,"fast-isnumeric":132}],969:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../constants/numerical").BADNUM;b.exports=function(a,b,c,f,g,h){f=f||"x",g=g||"y",h=h||["z"];var i,j,k,l,m,n=a[f].slice(),o=a[g].slice(),p=a.text,q=Math.min(n.length,o.length),r=void 0!==p&&!Array.isArray(p[0]),s=a[f+"calendar"],t=a[g+"calendar"];for(i=0;i<h.length;i++)k=a[h[i]],k&&(q=Math.min(q,k.length));for(q<n.length&&(n=n.slice(0,q)),q<o.length&&(o=o.slice(0,q)),i=0;q>i;i++)n[i]=b.d2c(n[i],0,s),o[i]=c.d2c(o[i],0,t);var u=d.distinctVals(n),v=u.vals,w=d.distinctVals(o),x=w.vals,y=[];for(i=0;i<h.length;i++)y[i]=d.init2dArray(x.length,v.length);var z,A,B;for(r&&(B=d.init2dArray(x.length,v.length)),i=0;q>i;i++)if(n[i]!==e&&o[i]!==e){for(z=d.findBin(n[i]+u.minDiff/2,v),A=d.findBin(o[i]+w.minDiff/2,x),j=0;j<h.length;j++)m=h[j],k=a[m],l=y[j],l[A][z]=k[i];r&&(B[A][z]=p[i])}for(a[f]=v,a[g]=x,j=0;j<h.length;j++)a[h[j]]=y[j];r&&(a.text=B)}},{"../../constants/numerical":717,"../../lib":738}],970:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./has_columns"),f=a("./xyz_defaults"),g=a("./style_defaults"),h=a("../../components/colorscale/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=f(a,b,k,j);return l?(k("text"),g(a,b,k,j),k("connectgaps",e(b)&&b.zsmooth!==!1),void h(a,b,j,k,{prefix:"",cLetter:"z"})):void(b.visible=!1)}},{"../../components/colorscale/defaults":623,"../../lib":738,"./attributes":965,"./has_columns":972,"./style_defaults":980,"./xyz_defaults":981}],971:[function(a,b,c){"use strict";var d=a("./max_row_length");b.exports=function(a){var b,c,e,f,g,h,i,j,k=[],l={},m=[],n=a[0],o=[],p=[0,0,0],q=d(a);for(c=0;c<a.length;c++)for(b=o,o=n,n=a[c+1]||[],e=0;q>e;e++)void 0===o[e]&&(h=(void 0!==o[e-1]?1:0)+(void 0!==o[e+1]?1:0)+(void 0!==b[e]?1:0)+(void 0!==n[e]?1:0),h?(0===c&&h++,0===e&&h++,c===a.length-1&&h++,e===o.length-1&&h++,4>h&&(l[[c,e]]=[c,e,h]),k.push([c,e,h])):m.push([c,e]));for(;m.length;){for(i={},j=!1,g=m.length-1;g>=0;g--)f=m[g],c=f[0],e=f[1],h=((l[[c-1,e]]||p)[2]+(l[[c+1,e]]||p)[2]+(l[[c,e-1]]||p)[2]+(l[[c,e+1]]||p)[2])/20,h&&(i[f]=[c,e,h],m.splice(g,1),j=!0);if(!j)throw"findEmpties iterated with no new neighbors";for(f in i)l[f]=i[f],k.push(i[f])}return k.sort(function(a,b){return b[2]-a[2]})}},{"./max_row_length":977}],972:[function(a,b,c){"use strict";b.exports=function(a){return!Array.isArray(a.z[0])}},{}],973:[function(a,b,c){"use strict";var d=a("../../components/fx"),e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=d.constants.MAXDIST;b.exports=function(a,b,c,h,i,j){if(!(a.distance<g)){var k,l,m,n,o=a.cd[0],p=o.trace,q=a.xa,r=a.ya,s=o.x,t=o.y,u=o.z,v=o.zmask,w=[p.zmin,p.zmax],x=p.zhoverformat,y=s,z=t;if(a.index!==!1){try{m=Math.round(a.index[1]),n=Math.round(a.index[0])}catch(A){return void e.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index)}if(0>m||m>=u[0].length||0>n||n>u.length)return}else{if(d.inbox(b-s[0],b-s[s.length-1])>g||d.inbox(c-t[0],c-t[t.length-1])>g)return;if(j){var B;for(y=[2*s[0]-s[1]],B=1;B<s.length;B++)y.push((s[B]+s[B-1])/2);for(y.push([2*s[s.length-1]-s[s.length-2]]),z=[2*t[0]-t[1]],B=1;B<t.length;B++)z.push((t[B]+t[B-1])/2);z.push([2*t[t.length-1]-t[t.length-2]])}m=Math.max(0,Math.min(y.length-2,e.findBin(b,y))),n=Math.max(0,Math.min(z.length-2,e.findBin(c,z)))}var C=q.c2p(s[m]),D=q.c2p(s[m+1]),E=r.c2p(t[n]),F=r.c2p(t[n+1]);j?(D=C,k=s[m],F=E,l=t[n]):(k=(s[m]+s[m+1])/2,l=(t[n]+t[n+1])/2,p.zsmooth&&(C=D=(C+D)/2,E=F=(E+F)/2));var G=u[n][m];v&&!v[n][m]&&(G=void 0);var H;Array.isArray(o.text)&&Array.isArray(o.text[n])&&(H=o.text[n][m]);var I,J={type:"linear",range:w,hoverformat:x,_separators:q._separators,_numFormat:q._numFormat},K=f.tickText(J,G,"hover");return I=K.text,[e.extendFlat(a,{index:[n,m],distance:g+10,x0:C,x1:D,y0:E,y1:F,xLabelVal:k,yLabelVal:l,zLabelVal:G,zLabel:I,text:H})]}}},{"../../components/fx":655,"../../lib":738,"../../plots/cartesian/axes":785}],974:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="heatmap",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"./attributes":965,"./calc":966,"./colorbar":968,"./defaults":970,"./hover":973,"./plot":978,"./style":979}],975:[function(a,b,c){"use strict";function d(a){return.5-.25*Math.min(1,.5*a)}function e(a,b,c){var d,e,f,g,i,j,k,l,m,n,o,p,q,r=0;for(g=0;g<b.length;g++){for(d=b[g],e=d[0],f=d[1],o=a[e][f],n=0,m=0,i=0;4>i;i++)j=h[i],k=a[e+j[0]],k&&(l=k[f+j[1]],void 0!==l&&(0===n?p=q=l:(p=Math.min(p,l),q=Math.max(q,l)),m++,n+=l));if(0===m)throw"iterateInterp2d order is wrong: no defined neighbors";a[e][f]=n/m,void 0===o?4>m&&(r=1):(a[e][f]=(1+c)*a[e][f]-c*o,q>p&&(r=Math.max(r,Math.abs(a[e][f]-o)/(q-p))))}return r}var f=a("../../lib"),g=.01,h=[[-1,0],[1,0],[0,-1],[0,1]];b.exports=function(a,b,c){var h,i,j=1;if(Array.isArray(c))for(h=0;h<b.length;h++)i=b[h],a[i[0]][i[1]]=c[i[0]][i[1]];else e(a,b);for(h=0;h<b.length&&!(b[h][2]<4);h++);for(b=b.slice(h),h=0;100>h&&j>g;h++)j=e(a,b,d(j));return j>g&&f.log("interp2d didn't converge quickly",j),a}},{"../../lib":738}],976:[function(a,b,c){"use strict";var d=a("../../registry");b.exports=function(a,b,c,e,f,g){var h,i,j,k=[],l=d.traceIs(a,"contour"),m=d.traceIs(a,"histogram"),n=d.traceIs(a,"gl2d"),o=Array.isArray(b)&&b.length>1;if(o&&!m&&"category"!==g.type){var p=b.length;if(!(f>=p))return l?b.slice(0,f):b.slice(0,f+1);if(l||n)k=b.slice(0,f);else if(1===f)k=[b[0]-.5,b[0]+.5];else{for(k=[1.5*b[0]-.5*b[1]],j=1;p>j;j++)k.push(.5*(b[j-1]+b[j]));k.push(1.5*b[p-1]-.5*b[p-2])}if(f>p){var q=k[k.length-1],r=q-k[k.length-2];for(j=p;f>j;j++)q+=r,k.push(q)}}else{i=e||1;var s=a[g._id.charAt(0)+"calendar"];for(h=m||"category"===g.type?g.r2c(c,0,s)||0:Array.isArray(b)&&1===b.length?b[0]:void 0===c?0:g.d2c(c,0,s),j=l||n?0:-.5;f>j;j++)k.push(h+i*j)}return k}},{"../../registry":861}],977:[function(a,b,c){"use strict";b.exports=function(a){for(var b=0,c=0;c<a.length;c++)b=Math.max(b,a[c].length);return b}},{}],978:[function(a,b,c){"use strict";function d(a,b,c){function d(a,b){var c=b.length-2,d=g.constrain(g.findBin(a,b),0,c),e=b[d],f=b[d+1],h=g.constrain(d+(a-e)/(f-e)-.5,0,c),i=Math.round(h),j=Math.abs(h-i);return h&&h!==c&&j?{bin0:i,frac:j,bin1:Math.round(i+j/(h-i))}:{bin0:i,bin1:i,frac:0}}function k(a,b){if(void 0!==a){var c=T(a);return c[0]=Math.round(c[0]),c[1]=Math.round(c[1]),c[2]=Math.round(c[2]),ca+=b,da+=c[0]*b,ea+=c[1]*b,fa+=c[2]*b,c}return[0,0,0,0]}function l(a,b,c){a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=Math.round(255*c[3])}function m(a,b,c,d){var e=a[c.bin0];if(void 0===e)return k(void 0,1);var f,g=a[c.bin1],h=b[c.bin0],i=b[c.bin1],j=g-e||0,l=h-e||0;return f=void 0===g?void 0===i?0:void 0===h?2*(i-e):2*(2*i-h-e)/3:void 0===i?void 0===h?0:2*(2*e-g-h)/3:void 0===h?2*(2*i-g-e)/3:i+e-g-h,k(e+c.frac*j+d.frac*(l+c.frac*f))}var n=c[0].trace,o=n.uid,p=b.xaxis,q=b.yaxis,r=a._fullLayout,s="hm"+o;if(r._paper.selectAll(".contour"+o).remove(),r._infolayer.selectAll("g.rangeslider-container").selectAll(".contour"+o).remove(),n.visible!==!0)return r._paper.selectAll("."+s).remove(),void r._infolayer.selectAll(".cb"+o).remove();var t,u,v,w,x,y,z=c[0].z,A=c[0].x,B=c[0].y,C=f.traceIs(n,"contour"),D=C?"best":n.zsmooth,E=z.length,F=j(z),G=!1,H=!1;for(y=0;void 0===t&&y<A.length-1;)t=p.c2p(A[y]),y++;for(y=A.length-1;void 0===u&&y>0;)u=p.c2p(A[y]),y--;for(t>u&&(v=u,u=t,t=v,G=!0),y=0;void 0===w&&y<B.length-1;)w=q.c2p(B[y]),y++;for(y=B.length-1;void 0===x&&y>0;)x=q.c2p(B[y]),y--;if(w>x&&(v=w,w=x,x=v,H=!0),C&&(A=c[0].xfill,B=c[0].yfill),"fast"!==D){var I="best"===D?0:.5;t=Math.max(-I*p._length,t),u=Math.min((1+I)*p._length,u),w=Math.max(-I*q._length,w),x=Math.min((1+I)*q._length,x)}var J=Math.round(u-t),K=Math.round(x-w),L=0>=J||0>=K,M=b.plot.select(".imagelayer").selectAll("g.hm."+s).data(L?[]:[0]);if(M.enter().append("g").classed("hm",!0).classed(s,!0),M.exit().remove(),!L){var N,O;"fast"===D?(N=F,O=E):(N=J,O=K);var P=document.createElement("canvas");P.width=N,P.height=O;var Q,R,S=P.getContext("2d"),T=h.makeColorScaleFunc(h.extractScale(n.colorscale,n.zmin,n.zmax),{noNumericCheck:!0,returnArray:!0});"fast"===D?(Q=G?function(a){return F-1-a}:g.identity,R=H?function(a){return E-1-a}:g.identity):(Q=function(a){return g.constrain(Math.round(p.c2p(A[a])-t),0,J)},R=function(a){return g.constrain(Math.round(q.c2p(B[a])-w),0,K)});var U,V,W,X,Y,Z,$=R(0),_=[$,$],aa=G?0:1,ba=H?0:1,ca=0,da=0,ea=0,fa=0;if(D){var ga,ha=0;try{ga=new Uint8Array(J*K*4)}catch(ia){ga=new Array(J*K*4)}if("best"===D){var ja,ka,la,ma=new Array(A.length),na=new Array(B.length),oa=new Array(J);for(y=0;y<A.length;y++)ma[y]=Math.round(p.c2p(A[y])-t);for(y=0;y<B.length;y++)na[y]=Math.round(q.c2p(B[y])-w);for(y=0;J>y;y++)oa[y]=d(y,ma);for(V=0;K>V;V++)for(ja=d(V,na),ka=z[ja.bin0],la=z[ja.bin1],y=0;J>y;y++,ha+=4)Z=m(ka,la,oa[y],ja),l(ga,ha,Z)}else for(V=0;E>V;V++)for(Y=z[V],_=R(V),y=0;J>y;y++)Z=k(Y[y],1),ha=4*(_*J+Q(y)),l(ga,ha,Z);var pa=S.createImageData(J,K);try{pa.data.set(ga)}catch(ia){var qa=pa.data,ra=qa.length;for(V=0;ra>V;V++)qa[V]=ga[V]}S.putImageData(pa,0,0)}else{var sa=n.xgap,ta=n.ygap,ua=Math.floor(sa/2),va=Math.floor(ta/2);for(V=0;E>V;V++)if(Y=z[V],_.reverse(),_[ba]=R(V+1),_[0]!==_[1]&&void 0!==_[0]&&void 0!==_[1])for(W=Q(0),U=[W,W],y=0;F>y;y++)U.reverse(),U[aa]=Q(y+1),U[0]!==U[1]&&void 0!==U[0]&&void 0!==U[1]&&(X=Y[y],Z=k(X,(U[1]-U[0])*(_[1]-_[0])),S.fillStyle="rgba("+Z.join(",")+")",S.fillRect(U[0]+ua,_[0]+va,U[1]-U[0]-sa,_[1]-_[0]-ta))}da=Math.round(da/ca),ea=Math.round(ea/ca),fa=Math.round(fa/ca);var wa=e("rgb("+da+","+ea+","+fa+")");a._hmpixcount=(a._hmpixcount||0)+ca,a._hmlumcount=(a._hmlumcount||0)+ca*wa.getLuminance();var xa=M.selectAll("image").data(c);xa.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),xa.attr({height:K,width:J,x:t,y:w,"xlink:href":P.toDataURL("image/png")}),xa.exit().remove()}}var e=a("tinycolor2"),f=a("../../registry"),g=a("../../lib"),h=a("../../components/colorscale"),i=a("../../constants/xmlns_namespaces"),j=a("./max_row_length");b.exports=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])}},{"../../components/colorscale":628,"../../constants/xmlns_namespaces":719,"../../lib":738,"../../registry":861,"./max_row_length":977,tinycolor2:543}],979:[function(a,b,c){"use strict";var d=a("d3");b.exports=function(a){d.select(a).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},{d3:123}],980:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d=c("zsmooth");d===!1&&(c("xgap"),c("ygap")),c("zhoverformat")}},{}],981:[function(a,b,c){"use strict";function d(a,b){var c=b(a),d=c?b(a+"type","array"):"scaled";return"scaled"===d&&(b(a+"0"),b("d"+a)),c}function e(a){for(var b,c=!0,d=!1,e=!1,g=0;g<a.length;g++){if(b=a[g],!Array.isArray(b)){c=!1;break}b.length>0&&(d=!0);for(var h=0;h<b.length;h++)if(f(b[h])){e=!0;break}}return c&&d&&e}var f=a("fast-isnumeric"),g=a("../../registry"),h=a("./has_columns");b.exports=function(a,b,c,f,i,j){var k=c("z");i=i||"x",j=j||"y";var l,m;if(void 0===k||!k.length)return 0;if(h(a)){if(l=c(i),m=c(j),!l||!m)return 0}else{if(l=d(i,c),m=d(j,c),!e(k))return 0;c("transpose")}var n=g.getComponentMethod("calendars","handleTraceDefaults");return n(a,b,[i,j],f),b.z.length}},{"../../registry":861,"./has_columns":972,"fast-isnumeric":132}],982:[function(a,b,c){"use strict";for(var d=a("../heatmap/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../lib/extend").extendFlat,h=a("../../plot_api/edit_types").overrideAll,i=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],j={},k=0;k<i.length;k++){var l=i[k];j[l]=d[l]}g(j,e,{autocolorscale:g({},e.autocolorscale,{dflt:!1})},{colorbar:f}),b.exports=h(j,"calc","nested")},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../lib/extend":727,"../../plot_api/edit_types":769,"../heatmap/attributes":965}],983:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=g(a.glplot,this.options),this.heatmap._trace=this}function e(a){
for(var b=a.colorscale,c=a.zmin,d=a.zmax,e=b.length,f=new Array(e),g=new Array(4*e),h=0;e>h;h++){var j=b[h],k=i(j[1]);f[h]=c+j[0]*(d-c);for(var l=0;4>l;l++)g[4*h+l]=k[l]}return{colorLevels:f,colorValues:g}}function f(a,b,c){var e=new d(a,b.uid);return e.update(b,c),e}var g=a("gl-heatmap2d"),h=a("../../plots/cartesian/axes"),i=a("../../lib/str2rgbarray"),j=d.prototype;j.handlePick=function(a){var b=this.options,c=b.shape,d=a.pointId,e=d%c[0],f=Math.floor(d/c[0]),g=d;return{trace:this,dataCoord:a.dataCoord,traceCoord:[b.x[e],b.y[f],b.z[g]],textLabel:this.textLabels[d],name:this.name,pointIndex:[f,e],hoverinfo:this.hoverinfo}},j.update=function(a,b){var c=b[0];this.index=a.index,this.name=a.name,this.hoverinfo=a.hoverinfo;var d=c.z;this.options.z=[].concat.apply([],d);var f=d[0].length,g=d.length;this.options.shape=[f,g],this.options.x=c.x,this.options.y=c.y;var i=e(a);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],a.text),this.heatmap.update(this.options),h.expand(this.scene.xaxis,c.x),h.expand(this.scene.yaxis,c.y)},j.dispose=function(){this.heatmap.dispose()},b.exports=f},{"../../lib/str2rgbarray":760,"../../plots/cartesian/axes":785,"gl-heatmap2d":167}],984:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("../heatmap/defaults"),d.colorbar=a("../heatmap/colorbar"),d.calc=a("../heatmap/calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="heatmapgl",d.basePlotModule=a("../../plots/gl2d"),d.categories=["gl","gl2d","2dMap"],d.meta={},b.exports=d},{"../../plots/gl2d":823,"../heatmap/calc":966,"../heatmap/colorbar":968,"../heatmap/defaults":970,"./attributes":982,"./convert":983}],985:[function(a,b,c){"use strict";function d(a){var b={};b["autobin"+a]=!1;var c={};return c["^autobin"+a]=!1,{start:{valType:"any",dflt:null,editType:"calc",impliedEdits:c},end:{valType:"any",dflt:null,editType:"calc",impliedEdits:c},size:{valType:"any",dflt:null,editType:"calc",impliedEdits:c},editType:"calc",impliedEdits:b}}var e=a("../bar/attributes");b.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:e.text,orientation:e.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},autobinx:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"xbins.start":void 0,"xbins.end":void 0,"xbins.size":void 0}},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x"),autobiny:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"ybins.start":void 0,"ybins.end":void 0,"ybins.size":void 0}},nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y"),marker:e.marker,selected:e.selected,unselected:e.unselected,error_y:e.error_y,error_x:e.error_x,_deprecated:{bardir:e._deprecated.bardir}}},{"../bar/attributes":871}],986:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c=a.length,d=0,e=0;c>e;e++)b[e]?(a[e]/=b[e],d+=a[e]):a[e]=null;return d}},{}],987:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){return c("histnorm"),d.forEach(function(a){c(a+"bins.start"),c(a+"bins.end"),c(a+"bins.size"),c("autobin"+a),c("nbins"+a)}),b}},{}],988:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports={count:function(a,b,c){return c[a]++,1},sum:function(a,b,c,e){var f=e[b];return d(f)?(f=Number(f),c[a]+=f,f):0},avg:function(a,b,c,e,f){var g=e[b];return d(g)&&(g=Number(g),c[a]+=g,f[a]++),0},min:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]>f){var g=f-c[a];return c[a]=f,g}}return 0},max:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]<f){var g=f-c[a];return c[a]=f,g}}return 0}}},{"fast-isnumeric":132}],989:[function(a,b,c){"use strict";function d(a,b,c,d){if(0>=a*b)return 1/0;for(var g=Math.abs(b-a),h="date"===c.type,i=e(g,h),j=0;10>j;j++){var k=e(80*i,h);if(i===k)break;if(!f(k,a,b,h,c,d))break;i=k}return i}function e(a,b){return b&&a>n?a>k?a>1.1*i?i:a>1.1*j?j:k:a>l?l:a>m?m:n:Math.pow(10,Math.floor(Math.log(a)/Math.LN10))}function f(a,b,c,d,e,f){if(d&&a>k){var h=g(b,e,f),j=g(c,e,f),l=a===i?0:1;return h[l]!==j[l]}return Math.floor(c/a)-Math.floor(b/a)>.1}function g(a,b,c){var d=b.c2d(a,i,c).split("-");return""===d[0]&&(d.unshift(),d[0]="-"+d[0]),d}var h=a("../../constants/numerical"),i=h.ONEAVGYEAR,j=h.ONEAVGMONTH,k=h.ONEDAY,l=h.ONEHOUR,m=h.ONEMIN,n=h.ONESEC,o=a("../../plots/cartesian/axes").tickIncrement;b.exports=function(a,b,c,e,f){var g,h,j=-1.1*b,l=-.1*b,m=a-l,n=c[0],p=c[1],q=Math.min(d(n+l,n+m,e,f),d(p+l,p+m,e,f)),r=Math.min(d(n+j,n+l,e,f),d(p+j,p+l,e,f));if(q>r&&r<Math.abs(p-n)/4e3?(g=q,h=!1):(g=Math.min(q,r),h=!0),"date"===e.type&&g>k){var s=g===i?1:6,t=g===i?"M12":"M1";return function(b,c){var d=e.c2d(b,i,f),g=d.indexOf("-",s);g>0&&(d=d.substr(0,g));var j=e.d2c(d,0,f);if(b>j){var k=o(j,t,!1,f);b+a>(j+k)/2&&(j=k)}return c&&h?o(j,t,!0,f):j}}return function(b,c){var d=g*Math.round(b/g);return b>d+g/10&&b+a>d+.9*g&&(d+=g),c&&h&&(d-=g),d}}},{"../../constants/numerical":717,"../../plots/cartesian/axes":785}],990:[function(a,b,c){"use strict";function d(a,b,c,d,h){var i,k,m,n,o,p=d+"bins",q="overlay"===a._fullLayout.barmode;if(b._autoBinFinished)delete b._autoBinFinished;else{var r=q?[b]:f(a,b),s=[],t=1/0,u=1/0,v=-(1/0),w="autobin"+d;for(i=0;i<r.length;i++){k=r[i],o=k._pos0=c.makeCalcdata(k,d);var x=k[p];if(k[w]||!x||null===x.start||null===x.end){m=k[d+"calendar"];var y=k.cumulative;if(x=l.autoBin(o,c,k["nbins"+d],!1,m),q&&1===x._count&&"category"!==c.type){if(h)return[x,o,!0];x=e(a,b,c,d,p)}y.enabled&&"include"!==y.currentbin&&("decreasing"===y.direction?u=Math.min(u,c.r2c(x.start,0,m)-x.size):v=Math.max(v,c.r2c(x.end,0,m)+x.size)),s.push(k)}else n||(n={size:x.size,start:c.r2c(x.start,0,m),end:c.r2c(x.end,0,m)});t=g(t,x.size),u=Math.min(u,c.r2c(x.start,0,m)),v=Math.max(v,c.r2c(x.end,0,m)),i&&(k._autoBinFinished=1)}if(n&&j(n.size)&&j(t)){t=t>n.size/1.9?n.size:n.size/Math.ceil(n.size/t);var z=n.start+(n.size-t)/2;u=z-t*Math.ceil((z-u)/t)}for(i=0;i<s.length;i++)k=s[i],m=k[d+"calendar"],k._input[p]=k[p]={start:c.c2r(u,0,m),end:c.c2r(v,0,m),size:t},k._input[w]=k[w]}return o=b._pos0,delete b._pos0,[b[p],o]}function e(a,b,c,e,g){var h,i,j=f(a,b),l=!1,m=1/0,n=[b];for(h=0;h<j.length;h++)if(i=j[h],i===b)l=!0;else if(l){var o=d(a,i,c,e,!0),p=o[0],q=o[2];i._autoBinFinished=1,i._pos0=o[1],q?n.push(i):m=Math.min(m,p.size)}else m=Math.min(m,i[g].size);var r=new Array(n.length);for(h=0;h<n.length;h++)for(var s=n[h]._pos0,t=0;t<s.length;t++)if(void 0!==s[t]){r[h]=s[t];break}for(isFinite(m)||(m=k.distinctVals(r).minDiff),h=0;h<n.length;h++){i=n[h];var u=i[e+"calendar"];i._input[g]=i[g]={start:c.c2r(r[h]-m/2,0,u),end:c.c2r(r[h]+m/2,0,u),size:m}}return b[g]}function f(a,b){for(var c=b.xaxis,d=b.yaxis,e=b.orientation,f=[],g=a._fullData,h=0;h<g.length;h++){var i=g[h];"histogram"===i.type&&i.orientation===e&&i.xaxis===c&&i.yaxis===d&&f.push(i)}return f}function g(a,b){if(a===1/0)return b;var c=h(a),d=h(b);return c>d?b:a}function h(a){return j(a)?a:"string"==typeof a&&"M"===a.charAt(0)?r*+a.substr(1):1/0}function i(a,b,c){function d(b){h=a[b],a[b]/=2}function e(b){g=a[b],a[b]=h+g/2,h+=g}var f,g,h;if("half"===c)if("increasing"===b)for(d(0),f=1;f<a.length;f++)e(f);else for(d(a.length-1),f=a.length-2;f>=0;f--)e(f);else if("increasing"===b){for(f=1;f<a.length;f++)a[f]+=a[f-1];"exclude"===c&&(a.unshift(0),a.pop())}else{for(f=a.length-2;f>=0;f--)a[f]+=a[f+1];"exclude"===c&&(a.push(0),a.shift())}}var j=a("fast-isnumeric"),k=a("../../lib"),l=a("../../plots/cartesian/axes"),m=a("../bar/arrays_to_calcdata"),n=a("./bin_functions"),o=a("./norm_functions"),p=a("./average"),q=a("./clean_bins"),r=a("../../constants/numerical").ONEAVGMONTH,s=a("./bin_label_vals");b.exports=function(a,b){if(b.visible===!0){var c,e=[],f=[],g=l.getFromId(a,"h"===b.orientation?b.yaxis||"y":b.xaxis||"x"),h="h"===b.orientation?"y":"x",r={x:"y",y:"x"}[h],t=b[h+"calendar"],u=b.cumulative;q(b,g,h);var v,w,x,y=d(a,b,g,h),z=y[0],A=y[1],B="string"==typeof z.size,C=[],D=B?C:z,E=[],F=[],G=[],H=0,I=b.histnorm,J=b.histfunc,K=-1!==I.indexOf("density");u.enabled&&K&&(I=I.replace(/ ?density$/,""),K=!1);var L,M="max"===J||"min"===J,N=M?null:0,O=n.count,P=o[I],Q=!1,R=function(a){return g.r2c(a,0,t)};for(Array.isArray(b[r])&&"count"!==J&&(L=b[r],Q="avg"===J,O=n[J]),c=R(z.start),w=R(z.end)+(c-l.tickIncrement(c,z.size,!1,t))/1e6;w>c&&e.length<1e6&&(v=l.tickIncrement(c,z.size,!1,t),e.push((c+v)/2),f.push(N),G.push([]),C.push(c),K&&E.push(1/(v-c)),Q&&F.push(0),!(c>=v));)c=v;C.push(c),B||"date"!==g.type||(D={start:R(D.start),end:R(D.end),size:D.size});var S=f.length,T=!0,U=1/0,V=1/0,W={};for(c=0;c<A.length;c++){var X=A[c];x=k.findBin(X,D),x>=0&&S>x&&(H+=O(x,c,f,L,F),T&&G[x].length&&X!==A[G[x][0]]&&(T=!1),G[x].push(c),W[c]=x,U=Math.min(U,X-C[x]),V=Math.min(V,C[x+1]-X))}var Y;T||(Y=s(U,V,C,g,t)),Q&&(H=p(f,F)),P&&P(f,H,E),u.enabled&&i(f,u.direction,u.currentbin);var Z=Math.min(e.length,f.length),$=[],_=0,aa=Z-1;for(c=0;Z>c;c++)if(f[c]){_=c;break}for(c=Z-1;c>=_;c--)if(f[c]){aa=c;break}for(c=_;aa>=c;c++)if(j(e[c])&&j(f[c])){var ba={p:e[c],s:f[c],b:0};u.enabled||(ba.pts=G[c],T?ba.p0=ba.p1=G[c].length?A[G[c][0]]:e[c]:(ba.p0=Y(C[c]),ba.p1=Y(C[c+1],!0))),$.push(ba)}return 1===$.length&&($[0].width1=l.tickIncrement($[0].p,z.size,!1,t)-$[0].p),m($,b),Array.isArray(b.selectedpoints)&&k.tagSelected($,b,W),$}}},{"../../constants/numerical":717,"../../lib":738,"../../plots/cartesian/axes":785,"../bar/arrays_to_calcdata":870,"./average":986,"./bin_functions":988,"./bin_label_vals":989,"./clean_bins":991,"./norm_functions":996,"fast-isnumeric":132}],991:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib").cleanDate,f=a("../../constants/numerical"),g=f.ONEDAY,h=f.BADNUM;b.exports=function(a,b,c){var f=b.type,i=c+"bins",j=a[i];j||(j=a[i]={});var k="date"===f?function(a){return a||0===a?e(a,h,j.calendar):null}:function(a){return d(a)?Number(a):null};j.start=k(j.start),j.end=k(j.end);var l="date"===f?g:1,m=j.size;if(d(m))j.size=m>0?Number(m):l;else if("string"!=typeof m)j.size=l;else{var n=m.charAt(0),o=m.substr(1);o=d(o)?Number(o):0,(0>=o||"date"!==f||"M"!==n||o!==Math.round(o))&&(j.size=l)}var p="autobin"+c;"boolean"!=typeof a[p]&&(a[p]=!((j.start||0===j.start)&&(j.end||0===j.end))),a[p]||delete a["nbins"+c]}},{"../../constants/numerical":717,"../../lib":738,"fast-isnumeric":132}],992:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../components/color"),g=a("./bin_defaults"),h=a("../bar/style_defaults"),i=a("../../components/errorbars/defaults"),j=a("./attributes");b.exports=function(a,b,c,k){function l(c,d){return e.coerce(a,b,j,c,d)}var m=l("x"),n=l("y"),o=l("cumulative.enabled");o&&(l("cumulative.direction"),l("cumulative.currentbin")),l("text");var p=l("orientation",n&&!m?"h":"v"),q=b["v"===p?"x":"y"];if(!q||!q.length)return void(b.visible=!1);var r=d.getComponentMethod("calendars","handleTraceDefaults");r(a,b,["x","y"],k);var s=b["h"===p?"x":"y"];s&&l("histfunc");var t="h"===p?["y"]:["x"];g(a,b,l,t),h(a,b,l,c,k),i(a,b,f.defaultLine,{axis:"y"}),i(a,b,f.defaultLine,{axis:"x",inherit:"y"}),e.coerceSelectionMarkerOpacity(b,l)}},{"../../components/color":613,"../../components/errorbars/defaults":643,"../../lib":738,"../../registry":861,"../bar/style_defaults":883,"./attributes":985,"./bin_defaults":987}],993:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){if(a.x="xVal"in b?b.xVal:b.x,a.y="yVal"in b?b.yVal:b.y,b.xa&&(a.xaxis=b.xa),b.ya&&(a.yaxis=b.ya),!(c.cumulative||{}).enabled){var f=Array.isArray(e)?d[0].pts[e[0]][e[1]]:d[e].pts;a.pointNumbers=f,a.binNumber=a.pointNumber,delete a.pointNumber,delete a.pointIndex;var g;if(c._indexToPoints){g=[];for(var h=0;h<f.length;h++)g=g.concat(c._indexToPoints[f[h]])}else g=f;a.pointIndices=g}return a}},{}],994:[function(a,b,c){"use strict";var d=a("../bar/hover"),e=a("../../plots/cartesian/axes").hoverLabelText;b.exports=function(a,b,c,f){var g=d(a,b,c,f);if(g){a=g[0];var h=a.cd[a.index],i=a.cd[0].trace;if(!i.cumulative.enabled){var j="h"===i.orientation?"y":"x";a[j+"Label"]=e(a[j+"a"],h.p0,h.p1)}return g}}},{"../../plots/cartesian/axes":785,"../bar/hover":874}],995:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("../bar/layout_attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("../bar/layout_defaults"),d.calc=a("./calc"),d.setPositions=a("../bar/set_positions"),d.plot=a("../bar/plot"),d.style=a("../bar/style"),d.colorbar=a("../scatter/colorbar"),d.hoverPoints=a("./hover"),d.selectPoints=a("../bar/select"),d.eventData=a("./event_data"),d.moduleType="trace",d.name="histogram",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"../bar/layout_attributes":876,"../bar/layout_defaults":877,"../bar/plot":878,"../bar/select":879,"../bar/set_positions":880,"../bar/style":882,"../scatter/colorbar":1058,"./attributes":985,"./calc":990,"./defaults":992,"./event_data":993,"./hover":994}],996:[function(a,b,c){"use strict";b.exports={percent:function(a,b){for(var c=a.length,d=100/b,e=0;c>e;e++)a[e]*=d},probability:function(a,b){for(var c=a.length,d=0;c>d;d++)a[d]/=b},density:function(a,b,c,d){var e=a.length;d=d||1;for(var f=0;e>f;f++)a[f]*=c[f]*d},"probability density":function(a,b,c,d){var e=a.length;d&&(b/=d);for(var f=0;e>f;f++)a[f]*=c[f]/b}}},{}],997:[function(a,b,c){"use strict";var d=a("../histogram/attributes"),e=a("../heatmap/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat;b.exports=h({},{x:d.x,y:d.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,xgap:e.xgap,ygap:e.ygap,zsmooth:e.zsmooth,zhoverformat:e.zhoverformat},f,{autocolorscale:h({},f.autocolorscale,{dflt:!1})},{colorbar:g})},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../lib/extend":727,"../heatmap/attributes":965,"../histogram/attributes":985}],998:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){var h=b+"bins",j="autobin"+b,k=a[h];m(a,d,b),(a[j]||!k||null===k.start||null===k.end)&&(k=i.autoBin(c,d,a["nbins"+b],"2d",g),"histogram2dcontour"===a.type&&(k.start=f(i.tickIncrement(e(k.start),k.size,!0,g)),k.end=f(i.tickIncrement(e(k.end),k.size,!1,g))),a._input[h]=a[h]=k,a._input[j]=a[j])}function e(a,b,c,d){var e,f=new Array(a);if(d)for(e=0;a>e;e++)f[e]=1/(b[e+1]-b[e]);else{var g=1/c;for(e=0;a>e;e++)f[e]=g}return f}function f(a,b){return{start:a(b.start),end:a(b.end),size:b.size}}function g(a,b,c,d,e,f){var g,h=a.length-1,i=new Array(h);if(b)for(g=0;h>g;g++)i[g]=[b[g],b[g]];else{var j=n(c,d,a,e,f);for(g=0;h>g;g++)i[g]=[j(a[g]),j(a[g+1],!0)]}return i}var h=a("../../lib"),i=a("../../plots/cartesian/axes"),j=a("../histogram/bin_functions"),k=a("../histogram/norm_functions"),l=a("../histogram/average"),m=a("../histogram/clean_bins"),n=a("../histogram/bin_label_vals");b.exports=function(a,b){var c,m,n,o,p=i.getFromId(a,b.xaxis||"x"),q=b.x?p.makeCalcdata(b,"x"):[],r=i.getFromId(a,b.yaxis||"y"),s=b.y?r.makeCalcdata(b,"y"):[],t=b.xcalendar,u=b.ycalendar,v=function(a){return p.r2c(a,0,t)},w=function(a){return r.r2c(a,0,u)},x=function(a){return p.c2r(a,0,t)},y=function(a){return r.c2r(a,0,u)},z=Math.min(q.length,s.length);q.length>z&&q.splice(z,q.length-z),s.length>z&&s.splice(z,s.length-z),d(b,"x",q,p,v,x,t),d(b,"y",s,r,w,y,u);var A=[],B=[],C=[],D="string"==typeof b.xbins.size,E="string"==typeof b.ybins.size,F=[],G=[],H=D?F:b.xbins,I=E?G:b.ybins,J=0,K=[],L=[],M=b.histnorm,N=b.histfunc,O=-1!==M.indexOf("density"),P="max"===N||"min"===N,Q=P?null:0,R=j.count,S=k[M],T=!1,U=[],V=[],W="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";W&&"count"!==N&&(T="avg"===N,R=j[N]);var X=b.xbins,Y=v(X.start),Z=v(X.end)+(Y-i.tickIncrement(Y,X.size,!1,t))/1e6;for(c=Y;Z>c;c=i.tickIncrement(c,X.size,!1,t))B.push(Q),F.push(c),T&&C.push(0);F.push(c);var $=B.length,_=v(b.xbins.start),aa=(c-_)/$,ba=x(_+aa/2);for(X=b.ybins,Y=w(X.start),Z=w(X.end)+(Y-i.tickIncrement(Y,X.size,!1,u))/1e6,c=Y;Z>c;c=i.tickIncrement(c,X.size,!1,u)){A.push(B.slice()),G.push(c);var ca=new Array($);for(m=0;$>m;m++)ca[m]=[];L.push(ca),T&&K.push(C.slice())}G.push(c);var da=A.length,ea=w(b.ybins.start),fa=(c-ea)/da,ga=y(ea+fa/2);O&&(U=e(B.length,H,aa,D),V=e(A.length,I,fa,E)),D||"date"!==p.type||(H=f(v,H)),E||"date"!==r.type||(I=f(w,I));var ha=!0,ia=!0,ja=new Array($),ka=new Array(da),la=1/0,ma=1/0,na=1/0,oa=1/0;for(c=0;z>c;c++){var pa=q[c],qa=s[c];n=h.findBin(pa,H),o=h.findBin(qa,I),n>=0&&$>n&&o>=0&&da>o&&(J+=R(n,c,A[o],W,K[o]),L[o][n].push(c),ha&&(void 0===ja[n]?ja[n]=pa:ja[n]!==pa&&(ha=!1)),ia&&(void 0===ka[n]?ka[n]=qa:ka[n]!==qa&&(ia=!1)),la=Math.min(la,pa-F[n]),ma=Math.min(ma,F[n+1]-pa),na=Math.min(na,qa-G[o]),oa=Math.min(oa,G[o+1]-qa))}if(T)for(o=0;da>o;o++)J+=l(A[o],K[o]);if(S)for(o=0;da>o;o++)S(A[o],J,U,V[o]);return{x:q,xRanges:g(F,ha&&ja,la,ma,p,t),x0:ba,dx:aa,y:s,yRanges:g(G,ia&&ka,na,oa,r,u),y0:ga,dy:fa,z:A,pts:L}}},{"../../lib":738,"../../plots/cartesian/axes":785,"../histogram/average":986,"../histogram/bin_functions":988,"../histogram/bin_label_vals":989,"../histogram/clean_bins":991,"../histogram/norm_functions":996}],999:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./sample_defaults"),f=a("../heatmap/style_defaults"),g=a("../../components/colorscale/defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}e(a,b,j,i),b.visible!==!1&&(f(a,b,j,i),g(a,b,i,j,{prefix:"",cLetter:"z"}))}},{"../../components/colorscale/defaults":623,"../../lib":738,"../heatmap/style_defaults":980,"./attributes":997,"./sample_defaults":1002}],1e3:[function(a,b,c){"use strict";var d=a("../heatmap/hover"),e=a("../../plots/cartesian/axes").hoverLabelText;b.exports=function(a,b,c,f,g,h){var i=d(a,b,c,f,g,h);if(i){a=i[0];var j=a.index,k=j[0],l=j[1],m=a.cd[0],n=m.xRanges[l],o=m.yRanges[k];return a.xLabel=e(a.xa,n[0],n[1]),a.yLabel=e(a.ya,o[0],o[1]),i}}},{"../../plots/cartesian/axes":785,"../heatmap/hover":973}],1001:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../heatmap/calc"),d.plot=a("../heatmap/plot"),d.colorbar=a("../heatmap/colorbar"),d.style=a("../heatmap/style"),d.hoverPoints=a("./hover"),d.eventData=a("../histogram/event_data"),d.moduleType="trace",d.name="histogram2d",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","histogram"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"../heatmap/calc":966,"../heatmap/colorbar":968,"../heatmap/plot":978,"../heatmap/style":979,"../histogram/event_data":993,"./attributes":997,"./defaults":999,"./hover":1e3}],1002:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../histogram/bin_defaults");b.exports=function(a,b,c,f){var g=c("x"),h=c("y");if(!(g&&g.length&&h&&h.length))return void(b.visible=!1);var i=d.getComponentMethod("calendars","handleTraceDefaults");i(a,b,["x","y"],f);var j=c("z")||c("marker.color");j&&c("histfunc");var k=["x","y"];e(a,b,c,k)}},{"../../registry":861,"../histogram/bin_defaults":987}],1003:[function(a,b,c){"use strict";var d=a("../histogram2d/attributes"),e=a("../contour/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat;b.exports=h({x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,autocontour:e.autocontour,ncontours:e.ncontours,contours:e.contours,line:e.line,zhoverformat:d.zhoverformat},f,{zmin:h({},f.zmin,{editType:"calc"}),zmax:h({},f.zmax,{editType:"calc"})},{colorbar:g})},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../lib/extend":727,"../contour/attributes":937,"../histogram2d/attributes":997}],1004:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../histogram2d/sample_defaults"),f=a("../contour/contours_defaults"),g=a("../contour/style_defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}e(a,b,j,i),b.visible!==!1&&(f(a,b,j),g(a,b,j,i))}},{"../../lib":738,"../contour/contours_defaults":941,"../contour/style_defaults":951,"../histogram2d/sample_defaults":1002,"./attributes":1003}],1005:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../contour/calc"),d.plot=a("../contour/plot").plot,d.style=a("../contour/style"),d.colorbar=a("../contour/colorbar"),d.hoverPoints=a("../contour/hover"),d.moduleType="trace",d.name="histogram2dcontour",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","contour","histogram"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"../contour/calc":938,"../contour/colorbar":939,"../contour/hover":945,"../contour/plot":949,"../contour/style":950,"./attributes":1003,"./defaults":1004}],1006:[function(a,b,c){"use strict";var d=a("../../components/colorscale/color_attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../surface/attributes"),h=a("../../lib/extend").extendFlat;b.exports=h(d("","calc",!1),{x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},opacity:g.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:h({},g.contours.x.show,{}),color:g.contours.x.color,width:g.contours.x.width,editType:"calc"},showscale:e.showscale,colorbar:f,lightposition:{x:h({},g.lightposition.x,{dflt:1e5}),y:h({},g.lightposition.y,{dflt:1e5}),z:h({},g.lightposition.z,{dflt:0}),editType:"calc"},lighting:h({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},g.lighting)})},{"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../components/colorscale/color_attributes":621,"../../lib/extend":727,"../surface/attributes":1124}],1007:[function(a,b,c){"use strict";var d=a("../../components/colorscale/calc");b.exports=function(a,b){b.intensity&&d(b,b.intensity,"","c")}},{"../../components/colorscale/calc":620}],1008:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.cmin,k=c.cmax,l=c.intensity||[];if(d(j)||(j=e.aggNums(Math.min,null,l)),d(k)||(k=e.aggNums(Math.max,null,l)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var m=b[0].t.cb=h(a,i),n=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});m.fillcolor(n).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":617,"../../components/colorscale":628,"../../lib":738,"../../plots/plots":846,"fast-isnumeric":132}],1009:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.mesh=b,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function e(a){return a.map(function(a){var b=a[0],c=j(a[1]),d=c.toRgb();return{index:b,rgb:[d.r,d.g,d.b,1]}})}function f(a){return a.map(n)}function g(a,b,c){for(var d=new Array(a.length),e=0;e<a.length;++e)d[e]=[a[e],b[e],c[e]];return d}function h(a,b){var c=a.glplot.gl,e=i({gl:c}),f=new d(a,e,b.uid);return e._trace=f,f.update(b),a.glplot.add(e),f}var i=a("gl-mesh3d"),j=a("tinycolor2"),k=a("delaunay-triangulate"),l=a("alpha-shape"),m=a("convex-hull"),n=a("../../lib/str2rgbarray"),o=d.prototype;o.handlePick=function(a){if(a.object===this.mesh){var b=a.index=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},o.update=function(a){function b(a,b,c,d){return b.map(function(b){return a.d2l(b,0,d)*c})}var c=this.scene,d=c.fullSceneLayout;this.data=a;var h,i=g(b(d.xaxis,a.x,c.dataScale[0],a.xcalendar),b(d.yaxis,a.y,c.dataScale[1],a.ycalendar),b(d.zaxis,a.z,c.dataScale[2],a.zcalendar));if(a.i&&a.j&&a.k)h=g(a.i,a.j,a.k);else if(0===a.alphahull)h=m(i);else if(a.alphahull>0)h=l(a.alphahull,i);else{var j=["x","y","z"].indexOf(a.delaunayaxis);h=k(i.map(function(a){return[a[(j+1)%3],a[(j+2)%3]]}))}var o={positions:i,cells:h,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:n(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};a.intensity?(this.color="#fff",o.vertexIntensity=a.intensity,o.vertexIntensityBounds=[a.cmin,a.cmax],o.colormap=e(a.colorscale)):a.vertexcolor?(this.color=a.vertexcolor[0],o.vertexColors=f(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],o.cellColors=f(a.facecolor)):(this.color=a.color,o.meshColor=n(a.color)),this.mesh.update(o)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},b.exports=h},{"../../lib/str2rgbarray":760,"alpha-shape":44,"convex-hull":104,"delaunay-triangulate":124,"gl-mesh3d":206,tinycolor2:543}],1010:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../components/colorscale/defaults"),g=a("./attributes");b.exports=function(a,b,c,h){function i(c,d){return e.coerce(a,b,g,c,d)}function j(a){var b=a.map(function(a){var b=i(a);return b&&Array.isArray(b)?b:null});return b.every(function(a){return a&&a.length===b[0].length})&&b}var k=j(["x","y","z"]),l=j(["i","j","k"]);if(!k)return void(b.visible=!1);l&&l.forEach(function(a){for(var b=0;b<a.length;++b)a[b]|=0});var m=d.getComponentMethod("calendars","handleTraceDefaults");m(a,b,["x","y","z"],h),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(a){i(a)}),"intensity"in a?(i("intensity"),f(a,b,h,i,{prefix:"",cLetter:"c"})):(b.showscale=!1,"facecolor"in a?i("facecolor"):"vertexcolor"in a?i("vertexcolor"):i("color",c))}},{"../../components/colorscale/defaults":623,"../../lib":738,"../../registry":861,"./attributes":1006}],1011:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.colorbar=a("./colorbar"),d.plot=a("./convert"),d.moduleType="trace",d.name="mesh3d",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d"],d.meta={},b.exports=d},{"../../plots/gl3d":826,"./attributes":1006,"./calc":1007,"./colorbar":1008,"./convert":1009,"./defaults":1010}],1012:[function(a,b,c){"use strict";function d(a){return{name:{valType:"string",editType:"style"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},line:{color:e({},j.color,{dflt:a}),width:j.width,dash:g,editType:"style"},editType:"style"}}var e=a("../../lib").extendFlat,f=a("../scatter/attributes"),g=a("../../components/drawing/attributes").dash,h="#3D9970",i="#FF4136",j=f.line;b.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",dflt:[],editType:"calc"},high:{valType:"data_array",dflt:[],editType:"calc"},low:{valType:"data_array",dflt:[],editType:"calc"},close:{valType:"data_array",dflt:[],editType:"calc"},line:{width:e({},j.width,{}),dash:e({},g,{}),editType:"style"},increasing:d(h),decreasing:d(i),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calcIfAutorange"}}},{"../../components/drawing/attributes":637,"../../lib":738,"../scatter/attributes":1054}],1013:[function(a,b,c){"use strict";function d(a,b,c,d){g(a,b,c,d),c(d+".line.color"),c(d+".line.width",b.line.width),c(d+".line.dash",b.line.dash)}var e=a("../../lib"),f=a("./ohlc_defaults"),g=a("./direction_defaults"),h=a("./attributes"),i=a("./helpers");b.exports=function(a,b,c,g){function j(c,d){return e.coerce(a,b,h,c,d)}i.pushDummyTransformOpts(a,b);var k=f(a,b,j,g);return 0===k?void(b.visible=!1):(j("line.width"),j("line.dash"),d(a,b,j,"increasing"),d(a,b,j,"decreasing"),j("text"),void j("tickwidth"))}},{"../../lib":738,"./attributes":1012,"./direction_defaults":1014,"./helpers":1015,"./ohlc_defaults":1017}],1014:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){c(d+".showlegend"),a.showlegend===!1&&(b[d].showlegend=!1);var e=b.name+" - "+d;c(d+".name",e)}},{}],1015:[function(a,b,c){"use strict";function d(a){function b(a,b){return a===b?b>g?f=!0:g>b&&(f=!1):f=b>a,g=b,f}function c(a,c){return e(a)&&e(c)&&b(+a,+c)}function d(a,c){return e(a)&&e(c)&&!b(+a,+c)}var f=!0,g=null;return"increasing"===a?c:d}var e=a("fast-isnumeric"),f=a("../../lib");c.pushDummyTransformOpts=function(a,b){var c={type:b.type,_ephemeral:!0};Array.isArray(a.transforms)?a.transforms.push(c):a.transforms=[c]},c.clearEphemeralTransformOpts=function(a){var b=a.transforms;if(Array.isArray(b)){for(var c=0;c<b.length;c++)b[c]._ephemeral&&b.splice(c,1);0===b.length&&delete a.transforms}},c.copyOHLC=function(a,b){a.open&&(b.open=a.open),a.high&&(b.high=a.high),a.low&&(b.low=a.low),a.close&&(b.close=a.close)},c.makeTransform=function(a,b,c){var d=f.extendFlat([],a.transforms);return d[b.transformIndex]={type:a.type,direction:c,open:a.open,high:a.high,low:a.low,close:a.close},d},c.getFilterFn=function(a){return new d(a)},c.addRangeSlider=function(a,b){for(var c=!1,d=0;d<a.length;d++)if(a[d].visible===!0){c=!0;break}c&&(b.xaxis||(b.xaxis={}),b.xaxis.rangeslider||(b.xaxis.rangeslider={}))}},{"../../lib":738,"fast-isnumeric":132}],1016:[function(a,b,c){"use strict";var d=a("../../plot_api/register");b.exports={moduleType:"trace",name:"ohlc",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","showLegend"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults")},d(a("../scatter")),d(a("./transform"))},{"../../plot_api/register":775,"../../plots/cartesian":796,"../scatter":1066,"./attributes":1012,"./defaults":1013,"./transform":1018}],1017:[function(a,b,c){"use strict";var d=a("../../registry");b.exports=function(a,b,c,e){var f,g=c("x"),h=c("open"),i=c("high"),j=c("low"),k=c("close"),l=d.getComponentMethod("calendars","handleTraceDefaults");return l(a,b,["x"],e),f=Math.min(h.length,i.length,j.length,k.length),g&&(f=Math.min(f,g.length),f<g.length&&(b.x=g.slice(0,f))),f<h.length&&(b.open=h.slice(0,f)),f<i.length&&(b.high=i.slice(0,f)),
f<j.length&&(b.low=j.slice(0,f)),f<k.length&&(b.close=k.slice(0,f)),f}},{"../../registry":861}],1018:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"scatter",mode:"lines",connectgaps:!1,visible:a.visible,opacity:a.opacity,xaxis:a.xaxis,yaxis:a.yaxis,hoverinfo:e(a),transforms:j.makeTransform(a,b,c)},f=a[c];return f&&h.extendFlat(d,{x:a.x||[0],xcalendar:a.xcalendar,y:[].concat(a.low).concat(a.high),text:a.text,name:f.name,showlegend:f.showlegend,line:f.line}),d}function e(a){var b=a.hoverinfo;if("all"===b)return"x+text+name";var c=b.split("+"),d=c.indexOf("y"),e=c.indexOf("text");return-1!==d&&(c.splice(d,1),-1===e&&c.push("text")),c.join("+")}function f(a,b,c){var d=c._fullInput,e=d.tickwidth,f=d._minDiff;if(!f){var g=a._fullData,i=[];f=1/0;var j;for(j=0;j<g.length;j++){var k=g[j]._fullInput;if("ohlc"===k.type&&k.visible===!0&&k.xaxis===b._id&&(i.push(k),k.x&&k.x.length>1)){var l=h.simpleMap(k.x,b.d2c,0,c.xcalendar),m=h.distinctVals(l).minDiff;f=Math.min(f,m)}}for(f===1/0&&(f=1),j=0;j<i.length;j++)i[j]._minDiff=f}return f*e}var g=a("fast-isnumeric"),h=a("../../lib"),i=h._,j=a("./helpers"),k=a("../../plots/cartesian/axes"),l=a("../../plots/cartesian/axis_ids");c.moduleType="transform",c.name="ohlc",c.attributes={},c.supplyDefaults=function(a,b,c,d){return j.clearEphemeralTransformOpts(d),j.copyOHLC(a,b),a},c.transform=function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e];"ohlc"===f.type?c.push(d(f,b,"increasing"),d(f,b,"decreasing")):c.push(f)}return j.addRangeSlider(c,b.layout),c},c.calcTransform=function(a,b,c){var d,e=c.direction,h=j.getFilterFn(e),m=l.getFromTrace(a,b,"x"),n=l.getFromTrace(a,b,"y"),o=f(a,m,b),p=b.open,q=b.high,r=b.low,s=b.close,t=b.text,u=i(a,"open:")+" ",v=i(a,"high:")+" ",w=i(a,"low:")+" ",x=i(a,"close:")+" ",y=p.length,z=[],A=[],B=[];d=b._fullInput.x?function(a){var c=b.x[a],d=b.xcalendar,e=m.d2c(c,0,d);z.push(m.c2d(e-o,0,d),c,c,c,c,m.c2d(e+o,0,d),null)}:function(a){z.push(a-o,a,a,a,a,a+o,null)};for(var C=function(a,b,c,d){A.push(a,a,b,c,d,d,null)},D=function(a,b){return k.tickText(a,a.c2l(b),"hover").text},E=b._fullInput.hoverinfo,F=E.split("+"),G="all"===E,H=G||-1!==F.indexOf("y"),I=G||-1!==F.indexOf("text"),J=Array.isArray(t)?function(a){return t[a]||""}:function(){return t},K=function(a,b,c,d,e){var f=[];H&&(f.push(u+D(n,b)),f.push(v+D(n,c)),f.push(w+D(n,d)),f.push(x+D(n,e))),I&&f.push(J(a));var g=f.join("<br>");B.push(g,g,g,g,g,g,null)},L=0;y>L;L++)h(p[L],s[L])&&g(q[L])&&g(r[L])&&(d(L),C(p[L],q[L],r[L],s[L]),K(L,p[L],q[L],r[L],s[L]));b.x=z,b.y=A,b.text=B}},{"../../lib":738,"../../plots/cartesian/axes":785,"../../plots/cartesian/axis_ids":788,"./helpers":1015,"fast-isnumeric":132}],1019:[function(a,b,c){"use strict";var d=a("../../components/colorscale/color_attributes"),e=a("../../components/colorbar/attributes"),f=a("../../components/colorscale/scales"),g=a("../../plots/cartesian/layout_attributes"),h=a("../../plots/font_attributes"),i=a("../../lib/extend"),j=i.extendDeepAll,k=i.extendFlat;b.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"calc"},{valType:"number",min:0,max:1,editType:"calc"}],dflt:[0,1],editType:"calc"},y:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"calc"},{valType:"number",min:0,max:1,editType:"calc"}],dflt:[0,1],editType:"calc"},editType:"calc"},labelfont:h({editType:"calc"}),tickfont:h({editType:"calc"}),rangefont:h({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},tickvals:k({},g.tickvals,{editType:"calc"}),ticktext:k({},g.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},editType:"calc"},line:k(j(d("line","calc"),{colorscale:{dflt:f.Viridis},autocolorscale:{dflt:!1}}),{showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:e,editType:"calc"})}},{"../../components/colorbar/attributes":614,"../../components/colorscale/color_attributes":621,"../../components/colorscale/scales":632,"../../lib/extend":727,"../../plots/cartesian/layout_attributes":797,"../../plots/font_attributes":810}],1020:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plots/get_data").getModuleCalcData,f=a("./plot"),g=a("../../constants/xmlns_namespaces"),h="parcoords";c.name=h,c.plot=function(a){var b=e(a.calcdata,h);b.length&&f(a,b)},c.clean=function(a,b,c,d){var e=d._has&&d._has(h),f=b._has&&b._has(h);e&&!f&&(d._paperdiv.selectAll(".parcoords").remove(),d._glimages.selectAll("*").remove())},c.toSVG=function(a){function b(){var a=this,b=a.toDataURL("image/png"),d=c.append("svg:image");d.attr({xmlns:g.svg,"xlink:href":b,x:0,y:0,width:a.width,height:a.height,preserveAspectRatio:"none"})}var c=a._fullLayout._glimages,e=d.select(a).selectAll(".svg-container"),f=e.filter(function(a,b){return b===e.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");f.each(b),window.setTimeout(function(){d.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":719,"../../plots/get_data":820,"./plot":1028,d3:123}],1021:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/calc"),f=a("../../lib"),g=a("../../lib/gup").wrap;b.exports=function(a,b){var c=!!b.line.colorscale&&f.isArray(b.line.color),h=c?b.line.color:Array.apply(0,Array(b.dimensions.reduce(function(a,b){return Math.max(a,b.values.length)},0))).map(function(){return.5}),i=c?b.line.colorscale:[[0,b.line.color],[1,b.line.color]];return d(b,"line")&&e(b,b.line.color,"line","c"),g({lineColor:h,cscale:i})}},{"../../components/colorscale/calc":620,"../../components/colorscale/has_colorscale":627,"../../lib":738,"../../lib/gup":735}],1022:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i=c.line,j="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+j).remove(),void 0===i||!i.showscale)return void f.autoMargin(a,j);var k=i.color,l=i.cmin,m=i.cmax;d(l)||(l=e.aggNums(Math.min,null,k)),d(m)||(m=e.aggNums(Math.max,null,k));var n=b[0].t.cb=h(a,j),o=g.makeColorScaleFunc(g.extractScale(i.colorscale,l,m),{noNumericCheck:!0});n.fillcolor(o).filllevels({start:l,end:m,size:(m-l)/254}).options(i.colorbar)()}},{"../../components/colorbar/draw":617,"../../components/colorscale":628,"../../lib":738,"../../plots/plots":846,"fast-isnumeric":132}],1023:[function(a,b,c){"use strict";b.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,scatter:!1,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,capturewidth:10,fillcolor:"magenta",fillopacity:1,strokecolor:"white",strokeopacity:1,strokewidth:1,handleheight:16,handleopacity:1,handleoverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1024:[function(a,b,c){"use strict";function d(a,b,c,d,e){e("line.color",c),h(a,"line")&&f.isArray(a.line.color)?(e("line.colorscale"),i(a,b,d,e,{prefix:"line.",cLetter:"c"})):e("line.color",c)}function e(a,b){function c(a,b){return f.coerce(d,e,g.dimensions,a,b)}var d,e,h,i=a.dimensions||[],k=b.dimensions=[],l=1/0;for(i.length>j&&(f.log("parcoords traces support up to "+j+" dimensions at the moment"),i.splice(j)),h=0;h<i.length;h++)if(d=i[h],e={},f.isPlainObject(d)){var m=c("values"),n=c("visible",m.length>0);n&&(c("label"),c("tickvals"),c("ticktext"),c("tickformat"),c("range"),c("constraintrange"),l=Math.min(l,e.values.length)),e._index=h,k.push(e)}if(isFinite(l))for(h=0;h<k.length;h++)e=k[h],e.visible&&e.values.length>l&&(e.values=e.values.slice(0,l));return k}var f=a("../../lib"),g=a("./attributes"),h=a("../../components/colorscale/has_colorscale"),i=a("../../components/colorscale/defaults"),j=a("./constants").maxDimensionCount;b.exports=function(a,b,c,h){function i(c,d){return f.coerce(a,b,g,c,d)}var j=e(a,b);d(a,b,c,h,i),i("domain.x"),i("domain.y"),Array.isArray(j)&&j.length||(b.visible=!1);var k={family:h.font.family,size:Math.round(h.font.size*(10/12)),color:h.font.color};f.coerceFont(i,"labelfont",k),f.coerceFont(i,"tickfont",k),f.coerceFont(i,"rangefont",k)}},{"../../components/colorscale/defaults":623,"../../components/colorscale/has_colorscale":627,"../../lib":738,"./attributes":1019,"./constants":1023}],1025:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.moduleType="trace",d.name="parcoords",d.basePlotModule=a("./base_plot"),d.categories=["gl","regl","noOpacity"],d.meta={},b.exports=d},{"./attributes":1019,"./base_plot":1020,"./calc":1021,"./colorbar":1022,"./defaults":1024,"./plot":1028}],1026:[function(a,b,c){"use strict";function d(a){a.read({x:0,y:0,width:1,height:1,data:w})}function e(a,b,c,d,e){var f=a._gl;f.enable(f.SCISSOR_TEST),f.scissor(b,c,d,e),a.clear({color:[0,0,0,0],depth:1})}function f(a,b,c,f,g,h){function i(d){var k;k=Math.min(f,g-d*f),h.offset=t*d*f,h.count=t*k,0===d&&(window.cancelAnimationFrame(c.currentRafs[j]),delete c.currentRafs[j],e(a,h.scissorX,h.scissorY,h.scissorWidth,h.viewBoxSize[1])),c.clearOnly||(b(h),g>d*f+k&&(c.currentRafs[j]=window.requestAnimationFrame(function(){i(d+1)})),c.drawCompleted=!1)}var j=h.key;c.drawCompleted||(d(a),c.drawCompleted=!0),i(0)}function g(a){return Math.max(r,Math.min(1-r,a))}function h(a,b,c){for(var d=[],e=0;256>e;e++){var f=a(e/255);d.push((b?v:f).concat(c))}return d}function i(a,b){return(a>>>8*b)%256/255}function j(a,b,c,d){for(var e=[],f=0;a>f;f++)for(var h=0;s>h;h++)e.push(b>h?c[h].paddedUnitValues[f]:h===s-1?g(d[f]):h>=s-4?i(f,s-2-h):.5);return e}function k(a,b,c){var d,e,f,g=[];for(e=0;a>e;e++)for(f=0;t>f;f++)for(d=0;u>d;d++)g.push(b[e*s+c*u+d]),c*u+d===s-1&&f%2===0&&(g[g.length-1]*=-1);return g}function l(a,b){var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],d=c.map(function(c){return k(a,b,c)}),e={};return d.forEach(function(a,b){e["p"+b.toString(16)]=a}),e}function m(a,b,c){return c>=a+b}var n=a("./constants"),o="precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // visible coloring\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n",p="precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // pick coloring\n    fragColor = vec4(pf.rgb, 1.0);\n}\n",q="precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n",r=1e-6,s=64,t=2,u=4,v=[119,119,119],w=new Uint8Array(4),x=new Uint8Array(4);b.exports=function(a,b,c){function d(a){T[0]=a[0],T[1]=a[1]}function g(a,b,c,d,e,f,g,h,i,j,k){var l,o,p,q,r=[a,b],s=n.verticalPadding/f,u=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})}),w=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(l=0;2>l;l++)for(q=r[l],o=0;4>o;o++)for(p=0;16>p;p++){var x=p+16*o;u[l][o][p]=p+16*o===q?1:0,w[l][o][p]=(!D&&m(p,16*o,N)?G[0===x?0:1+(x-1)%(G.length-1)].filter[l]:l)+(2*l-1)*s}return{key:g,resolution:[y,z],viewBoxPosition:[c+M,d],viewBoxSize:[e,f],i:a,ii:b,dim1A:u[0][0],dim1B:u[0][1],dim1C:u[0][2],dim1D:u[0][3],dim2A:u[1][0],dim2B:u[1][1],dim2C:u[1][2],dim2D:u[1][3],loA:w[0][0],loB:w[0][1],loC:w[0][2],loD:w[0][3],hiA:w[1][0],hiB:w[1][1],hiC:w[1][2],hiD:w[1][3],colorClamp:T,scatter:h||0,scissorX:(i===j?0:c+M)+(t.pad.l-M)+t.layoutWidth*v.x[0],scissorWidth:(i===k?y-c+M:e+.5)+(i===j?c+M:0),scissorY:d+t.pad.b+t.layoutHeight*v.y[0],scissorHeight:f,viewportX:t.pad.l-M+t.layoutWidth*v.x[0],viewportY:t.pad.b+t.layoutHeight*v.y[0],viewportWidth:y,viewportHeight:z}}function i(a,b,d){var h,i,j,k=1/0,l=-(1/0);for(h=0;N>h;h++)a[h].dim2.canvasX>l&&(l=a[h].dim2.canvasX,j=h),a[h].dim1.canvasX<k&&(k=a[h].dim1.canvasX,i=h);for(0===N&&e(Q,0,0,y,z),h=0;N>h;h++){var m=a[h],n=m.dim1,o=n.crossfilterDimensionIndex,p=m.canvasX,q=m.canvasY,r=m.dim2,s=r.crossfilterDimensionIndex,t=m.panelSizeX,u=m.panelSizeY,v=p+t;if(b||!U[o]||U[o][0]!==p||U[o][1]!==v){U[o]=[p,v];var x=g(o,s,p,q,t,u,n.crossfilterDimensionIndex,c||n.scatter?1:0,h,i,j);F.clearOnly=d,f(Q,S,F,b?w.blockLineCount:I,I,x)}}}function k(a,b){return Q.read({x:a,y:b,width:1,height:1,data:x}),x}function r(a,b,c,d){var e=new Uint8Array(4*c*d);return Q.read({x:a,y:b,width:c,height:d,data:e}),e}function s(){R.destroy()}var t=b.model,u=b.viewModel,v=t.domain,w=t.lines,y=t.canvasWidth,z=t.canvasHeight,A=u.dimensions,B=u.panels,C=t.unitToColor,D=b.context,E=b.pick,F={currentRafs:{},drawCompleted:!0,clearOnly:!1},G=A.slice(),H=G.length,I=G[0]?G[0].values.length:0,J=D,K=E?w.color.map(function(a,b){return b/w.color.length}):w.color,L=Math.max(1/255,Math.pow(1/K.length,1/3)),M=w.canvasOverdrag,N=B.length,O=j(I,H,G,K),P=l(I,O),Q=b.regl,R=Q.texture({shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest",data:h(C,D,Math.round(255*(D?L:1)))}),S=Q({profile:!1,blend:{enable:J,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!J,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:Q.prop("scissorX"),y:Q.prop("scissorY"),width:Q.prop("scissorWidth"),height:Q.prop("scissorHeight")}},viewport:{x:Q.prop("viewportX"),y:Q.prop("viewportY"),width:Q.prop("viewportWidth"),height:Q.prop("viewportHeight")},dither:!1,vert:E?p:o,frag:q,primitive:"lines",lineWidth:1,attributes:P,uniforms:{resolution:Q.prop("resolution"),viewBoxPosition:Q.prop("viewBoxPosition"),viewBoxSize:Q.prop("viewBoxSize"),dim1A:Q.prop("dim1A"),dim2A:Q.prop("dim2A"),dim1B:Q.prop("dim1B"),dim2B:Q.prop("dim2B"),dim1C:Q.prop("dim1C"),dim2C:Q.prop("dim2C"),dim1D:Q.prop("dim1D"),dim2D:Q.prop("dim2D"),loA:Q.prop("loA"),hiA:Q.prop("hiA"),loB:Q.prop("loB"),hiB:Q.prop("hiB"),loC:Q.prop("loC"),hiC:Q.prop("hiC"),loD:Q.prop("loD"),hiD:Q.prop("hiD"),palette:R,colorClamp:Q.prop("colorClamp"),scatter:Q.prop("scatter")},offset:Q.prop("offset"),count:Q.prop("count")}),T=[0,1],U=[];return{setColorDomain:d,render:i,readPixel:k,readPixels:r,destroy:s}}},{"./constants":1023}],1027:[function(a,b,c){"use strict";function d(a){return!("visible"in a)||a.visible}function e(a){var b=a.range?a.range[0]:s.min(a.values),c=a.range?a.range[1]:s.max(a.values);return(isNaN(b)||!isFinite(b))&&(b=0),(isNaN(c)||!isFinite(c))&&(c=0),b===c&&(void 0===b?(b=0,c=1):0===b?(b-=1,c+=1):(b*=.9,c*=1.1)),[b,c]}function f(a,b){var c,d,e,f,g;for(c=0,d=a.range(),e=1/0,f=d[0],g;c<d.length;c++){if((g=Math.abs(d[c]-b))>e)return f;e=g,f=d[c]}return d[d.length-1]}function g(a,b){return function(c,d){if(b){var e=b[d];return null===e||void 0===e?a(c):e}return a(c)}}function h(a,b,c){var d=e(c),f=c.ticktext;return c.tickvals?s.scale.ordinal().domain(c.tickvals.map(g(s.format(c.tickformat),f))).range(c.tickvals.map(function(a){return(a-d[0])/(d[1]-d[0])}).map(function(c){return a-b+c*(b-(a-b))})):s.scale.linear().domain(d).range([a-b,b])}function i(a,b){return s.scale.linear().range([a-b,b])}function j(a){return s.scale.linear().domain(e(a))}function k(a){var b=e(a);return a.tickvals&&s.scale.ordinal().domain(a.tickvals).range(a.tickvals.map(function(a){return(a-b[0])/(b[1]-b[0])}))}function l(a){var b=a.map(function(a){return a[0]}),c=a.map(function(a){return a[1]}),d=c.map(function(a){return s.rgb(a)}),e=function(a){return function(b){return b[a]}},f="rgb".split("").map(function(a){return s.scale.linear().clamp(!0).domain(b).range(d.map(e(a)))});return function(a){return f.map(function(b){return b(a)})}}function m(a,b,c){var e=w(b),f=e.trace,g=e.lineColor,h=e.cscale,i=f.line,k=f.domain,m=f.dimensions,n=a.width,o=f.labelfont,p=f.tickfont,s=f.rangefont,t=r.extendDeep({},i,{color:g.map(j({values:g,range:[i.cmin,i.cmax]})),blockLineCount:q.blockLineCount,canvasOverdrag:q.overdrag*q.canvasPixelRatio}),u=Math.floor(n*(k.x[1]-k.x[0])),v=Math.floor(a.height*(k.y[1]-k.y[0])),x=a.margin||{l:80,r:80,t:100,b:80},y=u,z=v;return{key:c,colCount:m.filter(d).length,dimensions:m,tickDistance:q.tickDistance,unitToColor:l(h),lines:t,labelFont:o,tickFont:p,rangeFont:s,layoutWidth:n,layoutHeight:a.height,domain:k,translateX:k.x[0]*n,translateY:a.height-k.y[1]*a.height,pad:x,canvasWidth:y*q.canvasPixelRatio+2*t.canvasOverdrag,canvasHeight:z*q.canvasPixelRatio,width:y,height:z,canvasPixelRatio:q.canvasPixelRatio}}function n(a){var b=a.width,c=a.height,e=a.dimensions,f=a.canvasPixelRatio,g=function(c){return b*c/Math.max(1,a.colCount-1)},l=q.verticalPadding/(c*f),m=1-2*l,n=function(a){return l+m*a},o={key:a.key,xScale:g,model:a},p={};return o.dimensions=e.filter(d).map(function(b,d){var e=j(b),l=p[b.label];p[b.label]=(l||0)+1;var m=b.label+(l?"__"+l:"");return{key:m,label:b.label,tickFormat:b.tickformat,tickvals:b.tickvals,ticktext:b.ticktext,ordinal:!!b.tickvals,scatter:q.scatter||b.scatter,xIndex:d,crossfilterDimensionIndex:d,visibleIndex:b._index,height:c,values:b.values,paddedUnitValues:b.values.map(e).map(n),xScale:g,x:g(d),canvasX:g(d)*f,unitScale:i(c,q.verticalPadding),domainScale:h(c,q.verticalPadding,b),ordinalScale:k(b),domainToUnitScale:e,filter:b.constraintrange?b.constraintrange.map(e):[0,1],parent:o,model:a}}),o}function o(a){a.classed(q.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}var p=a("./lines"),q=a("./constants"),r=a("../../lib"),s=a("d3"),t=a("../../components/drawing"),u=a("../../lib/gup").keyFun,v=a("../../lib/gup").repeat,w=a("../../lib/gup").unwrap;b.exports=function(a,b,c,d,e,g){function h(a){var b=a.selectAll("defs").data(v,u);b.enter().append("defs");var c=b.selectAll("#"+q.id.filterBarPattern).data(v,u);c.enter().append("pattern").attr("id",q.id.filterBarPattern).attr("patternUnits","userSpaceOnUse"),c.attr("x",-q.bar.width).attr("width",q.bar.capturewidth).attr("height",function(a){return a.model.height});var d=c.selectAll("rect").data(v,u);d.enter().append("rect").attr("shape-rendering","crispEdges"),d.attr("height",function(a){return a.model.height}).attr("width",q.bar.width).attr("x",q.bar.width/2).attr("fill",q.bar.fillcolor).attr("fill-opacity",q.bar.fillopacity).attr("stroke",q.bar.strokecolor).attr("stroke-opacity",q.bar.strokeopacity).attr("stroke-width",q.bar.strokewidth)}function i(a){return a.dimensions.some(function(a){return 0!==a.filter[0]||1!==a.filter[1]})}function j(a,b){for(var c=b.panels||(b.panels=[]),d=a.each(function(a){return a})[b.key].map(function(a){return a.__data__}),e=d.length-1,f=1,g=0;f>g;g++)for(var h=0;e>h;h++){var i=c[h+g*e]||(c[h+g*e]={}),j=d[h],k=d[h+1];i.dim1=j,i.dim2=k,i.canvasX=j.canvasX,i.panelSizeX=k.canvasX-j.canvasX,i.panelSizeY=b.model.canvasHeight/f,i.y=g*i.panelSizeY,i.canvasY=b.model.canvasHeight-i.y-i.panelSizeY}}function k(a,b){for(var c=b.panels||(b.panels=[]),d=a.each(function(a){return a})[b.key].map(function(a){return a.__data__}),e=d.length-1,f=e,g=0;e>g;g++)for(var h=0;e>h;h++){var i=c[h+g*e]||(c[h+g*e]={}),j=d[h],k=d[h+1];i.dim1=d[g+1],i.dim2=k,i.canvasX=j.canvasX,i.panelSizeX=k.canvasX-j.canvasX,i.panelSizeY=b.model.canvasHeight/f,i.y=g*i.panelSizeY,i.canvasY=b.model.canvasHeight-i.y-i.panelSizeY}}function l(a,b){return(q.scatter?k:j)(a,b)}function x(a){return a.ordinal?function(){return""}:s.format(a.tickFormat)}function y(){V=!0,B=!0}function z(a){C=!1;var b=a.parent,c=a.brush.extent(),d=b.dimensions,e=d[a.xIndex].filter,f=V&&c[0]===c[1];f&&(a.brush.clear(),s.select(this).select("rect.extent").attr("y",-100));var g=f?[0,1]:c.slice();if(g[0]!==e[0]||g[1]!==e[1]){d[a.xIndex].filter=g,b.focusLayer&&b.focusLayer.render(b.panels,!0);var h=i(b);!W&&h?(b.contextLayer&&b.contextLayer.render(b.panels,!0),W=!0):W&&!h&&(b.contextLayer&&b.contextLayer.render(b.panels,!0,!0),W=!1)}V=!1}function A(a){var b=a.parent,c=a.brush.extent(),d=c[0]===c[1],e=b.dimensions,h=e[a.xIndex].filter;if(!d&&a.ordinal&&(h[0]=f(a.ordinalScale,h[0]),h[1]=f(a.ordinalScale,h[1]),h[0]===h[1]&&(h[0]=Math.max(0,h[0]-.05),h[1]=Math.min(1,h[1]+.05)),s.select(this).transition().duration(150).call(a.brush.extent(h)),b.focusLayer.render(b.panels,!0)),b.pickLayer&&b.pickLayer.render(b.panels,!0),C=!0,B="ending",g&&g.filterChanged){var i=a.domainToUnitScale.invert,j=h.map(i);g.filterChanged(b.key,a.visibleIndex,j)}}var B=!1,C=!0,D=d.filter(function(a){return w(a).trace.visible}).map(m.bind(0,e)).map(n);c.each(function(a,b){return r.extendFlat(a,D[b])});var E=c.selectAll(".gl-canvas").each(function(a){a.viewModel=D[0],a.model=a.viewModel?a.viewModel.model:null}),F={renderers:[],dimensions:[]},G=null;E.filter(function(a){return a.pick}).on("mousemove",function(a){if(C&&a.lineLayer&&g&&g.hover){var b=s.event,c=this.width,d=this.height,e=s.mouse(this),f=e[0],h=e[1];if(0>f||0>h||f>=c||h>=d)return;var i=a.lineLayer.readPixel(f,d-1-h),j=0!==i[3],k=j?i[2]+256*(i[1]+256*i[0]):null,l={x:f,y:h,clientX:b.clientX,clientY:b.clientY,dataIndex:a.model.key,curveNumber:k};k!==G&&(j?g.hover(l):g.unhover&&g.unhover(l),G=k)}}),E.style("opacity",function(a){return a.pick?.01:1}),b.style("background","rgba(255, 255, 255, 0)");var H=b.selectAll("."+q.cn.parcoords).data(D,u);H.exit().remove(),H.enter().append("g").classed(q.cn.parcoords,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","none").call(h),H.attr("width",function(a){return a.model.width+a.model.pad.l+a.model.pad.r}).attr("height",function(a){return a.model.height+a.model.pad.t+a.model.pad.b}).attr("transform",function(a){return"translate("+a.model.translateX+","+a.model.translateY+")"});var I=H.selectAll("."+q.cn.parcoordsControlView).data(v,u);I.enter().append("g").classed(q.cn.parcoordsControlView,!0).style("box-sizing","content-box"),I.attr("transform",function(a){return"translate("+a.model.pad.l+","+a.model.pad.t+")"});var J=I.selectAll("."+q.cn.yAxis).data(function(a){return a.dimensions},u);J.enter().append("g").classed(q.cn.yAxis,!0).each(function(a){F.dimensions.push(a)}),I.each(function(a){l(J,a)}),E.filter(function(a){return!!a.viewModel}).each(function(a){a.lineLayer=p(this,a,q.scatter),a.viewModel[a.key]=a.lineLayer,F.renderers.push(function(){a.lineLayer.render(a.viewModel.panels,!0)}),a.lineLayer.render(a.viewModel.panels,!a.context)}),J.attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"}),J.call(s.behavior.drag().origin(function(a){return a}).on("drag",function(a){var b=a.parent;C=!1,B||(a.x=Math.max(-q.overdrag,Math.min(a.model.width+q.overdrag,s.event.x)),a.canvasX=a.x*a.model.canvasPixelRatio,J.sort(function(a,b){return a.x-b.x}).each(function(b,c){b.xIndex=c,b.x=a===b?b.x:b.xScale(b.xIndex),b.canvasX=b.x*b.model.canvasPixelRatio}),l(J,b),J.filter(function(b){return 0!==Math.abs(a.xIndex-b.xIndex)}).attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"}),s.select(this).attr("transform","translate("+a.x+", 0)"),J.each(function(c,d,e){e===a.parent.key&&(b.dimensions[d]=c)}),b.contextLayer&&b.contextLayer.render(b.panels,!1,!i(b)),b.focusLayer.render&&b.focusLayer.render(b.panels))}).on("dragend",function(a){var b=a.parent;return B?void("ending"===B&&(B=!1)):(a.x=a.xScale(a.xIndex),a.canvasX=a.x*a.model.canvasPixelRatio,l(J,b),s.select(this).attr("transform",function(a){return"translate("+a.x+", 0)"}),b.contextLayer&&b.contextLayer.render(b.panels,!1,!i(b)),b.focusLayer&&b.focusLayer.render(b.panels),b.pickLayer&&b.pickLayer.render(b.panels,!0),C=!0,void(g&&g.axesMoved&&g.axesMoved(b.key,b.dimensions.map(function(a){return a.crossfilterDimensionIndex}))))})),J.exit().remove();var K=J.selectAll("."+q.cn.axisOverlays).data(v,u);K.enter().append("g").classed(q.cn.axisOverlays,!0),K.selectAll("."+q.cn.axis).remove();var L=K.selectAll("."+q.cn.axis).data(v,u);L.enter().append("g").classed(q.cn.axis,!0),L.each(function(a){var b=a.model.height/a.model.tickDistance,c=a.domainScale,d=c.domain();s.select(this).call(s.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(b,a.tickFormat).tickValues(a.ordinal?d:null).tickFormat(a.ordinal?function(a){return a}:null).scale(c)),t.font(L.selectAll("text"),a.model.tickFont)}),L.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),L.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var M=K.selectAll("."+q.cn.axisHeading).data(v,u);M.enter().append("g").classed(q.cn.axisHeading,!0);var N=M.selectAll("."+q.cn.axisTitle).data(v,u);N.enter().append("text").classed(q.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto"),N.attr("transform","translate(0,"+-q.axisTitleOffset+")").text(function(a){return a.label}).each(function(a){t.font(N,a.model.labelFont)});var O=K.selectAll("."+q.cn.axisExtent).data(v,u);O.enter().append("g").classed(q.cn.axisExtent,!0);var P=O.selectAll("."+q.cn.axisExtentTop).data(v,u);P.enter().append("g").classed(q.cn.axisExtentTop,!0),P.attr("transform","translate(0,"+-q.axisExtentOffset+")");var Q=P.selectAll("."+q.cn.axisExtentTopText).data(v,u);Q.enter().append("text").classed(q.cn.axisExtentTopText,!0).call(o),Q.text(function(a){return x(a)(a.domainScale.domain().slice(-1)[0])}).each(function(a){t.font(Q,a.model.rangeFont)});var R=O.selectAll("."+q.cn.axisExtentBottom).data(v,u);R.enter().append("g").classed(q.cn.axisExtentBottom,!0),R.attr("transform",function(a){return"translate(0,"+(a.model.height+q.axisExtentOffset)+")"});var S=R.selectAll("."+q.cn.axisExtentBottomText).data(v,u);S.enter().append("text").classed(q.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(o),S.text(function(a){return x(a)(a.domainScale.domain()[0])}).each(function(a){t.font(S,a.model.rangeFont)});var T=K.selectAll("."+q.cn.axisBrush).data(v,u),U=T.enter().append("g").classed(q.cn.axisBrush,!0);T.each(function(a){a.brush||(a.brush=s.svg.brush().y(a.unitScale).on("brushstart",y).on("brush",z).on("brushend",A),(0!==a.filter[0]||1!==a.filter[1])&&a.brush.extent(a.filter),s.select(this).call(a.brush))}),U.selectAll("rect").attr("x",-q.bar.capturewidth/2).attr("width",q.bar.capturewidth),U.selectAll("rect.extent").attr("fill","url(#"+q.id.filterBarPattern+")").style("cursor","ns-resize").filter(function(a){return 0===a.filter[0]&&1===a.filter[1]}).attr("y",-100),U.selectAll(".resize rect").attr("height",q.bar.handleheight).attr("opacity",0).style("visibility","visible"),U.selectAll(".resize.n rect").style("cursor","n-resize").attr("y",q.bar.handleoverlap-q.bar.handleheight),U.selectAll(".resize.s rect").style("cursor","s-resize").attr("y",q.bar.handleoverlap);var V=!1,W=!1;return F}},{"../../components/drawing":638,"../../lib":738,"../../lib/gup":735,"./constants":1023,
"./lines":1026,d3:123}],1028:[function(a,b,c){(function(c){"use strict";var d=a("./parcoords"),e=a("regl");b.exports=function(a,b){var f=a._fullLayout,g=f._toppaper,h=f._paperdiv,i=f._glcontainer;f._glcanvas.each(function(b){b.regl||(b.regl=e({canvas:this,attributes:{antialias:!b.pick,preserveDrawingBuffer:!0},pixelRatio:a._context.plotGlPixelRatio||c.devicePixelRatio}))});var j={},k={},l=f._size;b.forEach(function(b,c){j[c]=a.data[c].dimensions,k[c]=a.data[c].dimensions.slice()});var m=function(b,c,d){var e=k[b][c],f=e.constraintrange;f&&2===f.length||(f=e.constraintrange=[]),f[0]=d[0],f[1]=d[1],a.emit("plotly_restyle")},n=function(b){a.emit("plotly_hover",b)},o=function(b){a.emit("plotly_unhover",b)},p=function(b,c){function d(a){return!("visible"in a)||a.visible}function e(a,b,c){var d=b.indexOf(c),e=a.indexOf(d);return-1===e&&(e+=b.length),e}function f(a){return function(b,d){var f=e(c,a,b),g=e(c,a,d);return f-g}}var g=f(k[b].filter(d));j[b].sort(g),k[b].filter(function(a){return!d(a)}).sort(function(a){return k[b].indexOf(a)}).forEach(function(a){j[b].splice(j[b].indexOf(a),1),j[b].splice(k[b].indexOf(a),0,a)}),a.emit("plotly_restyle")};d(h,g,i,b,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:m,hover:n,unhover:o,axesMoved:p})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./parcoords":1027,regl:508}],1029:[function(a,b,c){"use strict";var d=a("../../components/color/attributes"),e=a("../../plots/font_attributes"),f=a("../../plots/attributes"),g=a("../../lib/extend").extendFlat,h=e({editType:"calc",colorEditType:"style"});b.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:d.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:g({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:g({},h,{}),insidetextfont:g({},h,{}),outsidetextfont:g({},h,{}),domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"calc"},{valType:"number",min:0,max:1,editType:"calc"}],dflt:[0,1],editType:"calc"},y:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"calc"},{valType:"number",min:0,max:1,editType:"calc"}],dflt:[0,1],editType:"calc"},editType:"calc"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}},{"../../components/color/attributes":612,"../../lib/extend":727,"../../plots/attributes":783,"../../plots/font_attributes":810}],1030:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f._module===b&&f.visible===!0&&c.push(e)}return c}var e=a("../../registry");c.name="pie",c.plot=function(a){var b=e.getModule("pie"),c=d(a.calcdata,b);c.length&&b.plot(a,c)},c.clean=function(a,b,c,d){var e=d._has&&d._has("pie"),f=b._has&&b._has("pie");e&&!f&&d._pielayer.selectAll("g.trace").remove()}},{"../../registry":861}],1031:[function(a,b,c){"use strict";function d(a,b){if(!j){var c=h.defaults;j=e(c)}var d=b||j;return d[a%d.length]}function e(a){var b,c=a.slice();for(b=0;b<a.length;b++)c.push(g(a[b]).lighten(20).toHexString());for(b=0;b<a.length;b++)c.push(g(a[b]).darken(20).toHexString());return c}var f=a("fast-isnumeric"),g=a("tinycolor2"),h=a("../../components/color"),i=a("./helpers");b.exports=function(a,b){function c(a,b){return a?(a=g(a),a.isValid()?(a=h.addOpacity(a,a.getAlpha()),v[b]||(v[b]=a),a):!1):!1}var j,k,l,m,n,o=b.values,p=Array.isArray(o)&&o.length,q=b.labels,r=b.marker.colors,s=[],t=a._fullLayout,u=t.colorway,v=t._piecolormap,w={},x=0,y=t.hiddenlabels||[];if(t._piecolorway||u===h.defaults||(t._piecolorway=e(u)),b.dlabel)for(q=new Array(o.length),j=0;j<o.length;j++)q[j]=String(b.label0+j*b.dlabel);var z=(p?o:q).length;for(j=0;z>j;j++){if(p){if(k=o[j],!f(k))continue;if(k=+k,0>k)continue}else k=1;l=q[j],(void 0===l||""===l)&&(l=j),l=String(l);var A=w[l];void 0===A?(w[l]=s.length,m=-1!==y.indexOf(l),m||(x+=k),s.push({v:k,label:l,color:c(r[j]),i:j,pts:[j],hidden:m})):(n=s[A],n.v+=k,n.pts.push(j),n.hidden||(x+=k),n.color===!1&&r[j]&&(n.color=c(r[j],l)))}for(b.sort&&s.sort(function(a,b){return b.v-a.v}),j=0;j<s.length;j++)n=s[j],n.color===!1&&(v[n.label]?n.color=v[n.label]:(v[n.label]=n.color=d(t._piedefaultcolorcount,t._piecolorway),t._piedefaultcolorcount++));if(s[0]&&(s[0].vTotal=x),b.textinfo&&"none"!==b.textinfo){var B,C=-1!==b.textinfo.indexOf("label"),D=-1!==b.textinfo.indexOf("text"),E=-1!==b.textinfo.indexOf("value"),F=-1!==b.textinfo.indexOf("percent"),G=t.separators;for(j=0;j<s.length;j++){if(n=s[j],B=C?[n.label]:[],D){var H=i.getFirstFilled(b.text,n.pts);H&&B.push(H)}E&&B.push(i.formatPieValue(n.v,G)),F&&B.push(i.formatPiePercent(n.v/x,G)),n.text=B.join("<br>")}}return s};var j},{"../../components/color":613,"./helpers":1034,"fast-isnumeric":132,tinycolor2:543}],1032:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c,f){function g(c,f){return d.coerce(a,b,e,c,f)}var h=d.coerceFont,i=g("values"),j=g("labels");if(!Array.isArray(j)){if(!Array.isArray(i)||!i.length)return void(b.visible=!1);g("label0"),g("dlabel")}var k=g("marker.line.width");k&&g("marker.line.color");var l=g("marker.colors");Array.isArray(l)||(b.marker.colors=[]),g("scalegroup");var m=g("text"),n=g("textinfo",Array.isArray(m)?"text+percent":"percent");if(g("hovertext"),n&&"none"!==n){var o=g("textposition"),p=Array.isArray(o)||"auto"===o,q=p||"inside"===o,r=p||"outside"===o;if(q||r){var s=h(g,"textfont",f.font);q&&h(g,"insidetextfont",s),r&&h(g,"outsidetextfont",s)}}g("domain.x"),g("domain.y"),g("hole"),g("sort"),g("direction"),g("rotation"),g("pull")}},{"../../lib":738,"./attributes":1029}],1033:[function(a,b,c){"use strict";var d=a("../../components/fx/helpers").appendArrayMultiPointValues;b.exports=function(a,b){var c={curveNumber:b.index,pointNumbers:a.pts,data:b._input,fullData:b,label:a.label,color:a.color,value:a.v,v:a.v};return 1===a.pts.length&&(c.pointNumber=c.i=a.pts[0]),d(c,b,a.pts),c}},{"../../components/fx/helpers":652}],1034:[function(a,b,c){"use strict";var d=a("../../lib");c.formatPiePercent=function(a,b){var c=(100*a).toPrecision(3);return-1!==c.lastIndexOf(".")&&(c=c.replace(/[.]?0+$/,"")),d.numSeparate(c,b)+"%"},c.formatPieValue=function(a,b){var c=a.toPrecision(10);return-1!==c.lastIndexOf(".")&&(c=c.replace(/[.]?0+$/,"")),d.numSeparate(c,b)},c.getFirstFilled=function(a,b){if(Array.isArray(a))for(var c=0;c<b.length;c++){var d=a[b[c]];if(d||0===d)return d}},c.castOption=function(a,b){return Array.isArray(a)?c.getFirstFilled(a,b):a?a:void 0}},{"../../lib":738}],1035:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("./layout_defaults"),d.layoutAttributes=a("./layout_attributes"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.styleOne=a("./style_one"),d.moduleType="trace",d.name="pie",d.basePlotModule=a("./base_plot"),d.categories=["pie","showLegend"],d.meta={},b.exports=d},{"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./layout_attributes":1036,"./layout_defaults":1037,"./plot":1038,"./style":1039,"./style_one":1040}],1036:[function(a,b,c){"use strict";b.exports={hiddenlabels:{valType:"data_array",editType:"calc"}}},{}],1037:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes");b.exports=function(a,b){function c(c,f){return d.coerce(a,b,e,c,f)}c("hiddenlabels")}},{"../../lib":738,"./layout_attributes":1036}],1038:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.sqrt(a.width*a.width+a.height*a.height),f=a.width/a.height,g=Math.PI*Math.min(b.v/c.vTotal,.5),h=1-c.trace.hole,i=e(b,c),j={scale:i*c.r*2/d,rCenter:1-i,rotate:0};if(j.scale>=1)return j;var k=f+1/(2*Math.tan(g)),l=c.r*Math.min(1/(Math.sqrt(k*k+.5)+k),h/(Math.sqrt(f*f+h/2)+f)),m={scale:2*l/a.height,rCenter:Math.cos(l/c.r)-l*f/c.r,rotate:(180/Math.PI*b.midangle+720)%180-90},n=1/f,o=n+1/(2*Math.tan(g)),p=c.r*Math.min(1/(Math.sqrt(o*o+.5)+o),h/(Math.sqrt(n*n+h/2)+n)),q={scale:2*p/a.width,rCenter:Math.cos(p/c.r)-p/f/c.r,rotate:(180/Math.PI*b.midangle+810)%180-90},r=q.scale>m.scale?q:m;return j.scale<1&&r.scale>j.scale?r:j}function e(a,b){if(a.v===b.vTotal&&!b.trace.hole)return 1;var c=Math.PI*Math.min(a.v/b.vTotal,.5);return Math.min(1/(1+1/Math.sin(c)),(1-b.trace.hole)/2)}function f(a,b){var c=b.pxmid[0],d=b.pxmid[1],e=a.width/2,f=a.height/2;return 0>c&&(e*=-1),0>d&&(f*=-1),{scale:1,rCenter:1,rotate:0,x:e+Math.abs(f)*(e>0?1:-1)/2,y:f/(1+c*c/(d*d)),outside:!0}}function g(a,b){function c(a,b){return a.pxmid[1]-b.pxmid[1]}function d(a,b){return b.pxmid[1]-a.pxmid[1]}function e(a,c){c||(c={});var d,e,f,h,m,n,q=c.labelExtraY+(g?c.yLabelMax:c.yLabelMin),r=g?a.yLabelMin:a.yLabelMax,s=g?a.yLabelMax:a.yLabelMin,t=a.cyFinal+j(a.px0[1],a.px1[1]),u=q-r;if(u*l>0&&(a.labelExtraY=u),Array.isArray(b.pull))for(e=0;e<p.length;e++)f=p[e],f===a||(o.castOption(b.pull,a.pts)||0)>=(o.castOption(b.pull,f.pts)||0)||((a.pxmid[1]-f.pxmid[1])*l>0?(h=f.cyFinal+j(f.px0[1],f.px1[1]),u=h-r-a.labelExtraY,u*l>0&&(a.labelExtraY+=u)):(s+a.labelExtraY-t)*l>0&&(d=3*k*Math.abs(e-p.indexOf(a)),m=f.cxFinal+i(f.px0[0],f.px1[0]),n=m+d-(a.cxFinal+a.pxmid[0])-a.labelExtraX,n*k>0&&(a.labelExtraX+=n)))}var f,g,h,i,j,k,l,m,n,p,q,r,s;for(g=0;2>g;g++)for(h=g?c:d,j=g?Math.max:Math.min,l=g?1:-1,f=0;2>f;f++){for(i=f?Math.max:Math.min,k=f?1:-1,m=a[g][f],m.sort(h),n=a[1-g][f],p=n.concat(m),r=[],q=0;q<m.length;q++)void 0!==m[q].yLabelMid&&r.push(m[q]);for(s=!1,q=0;g&&q<n.length;q++)if(void 0!==n[q].yLabelMid){s=n[q];break}for(q=0;q<r.length;q++){var t=q&&r[q-1];s&&!q&&(t=s),e(r[q],t)}}}function h(a,b){var c,d,e,f,g,h,i,j,k,l=[];for(e=0;e<a.length;e++){if(g=a[e][0],h=g.trace,c=b.w*(h.domain.x[1]-h.domain.x[0]),d=b.h*(h.domain.y[1]-h.domain.y[0]),i=h.pull,Array.isArray(i))for(i=0,f=0;f<h.pull.length;f++)h.pull[f]>i&&(i=h.pull[f]);g.r=Math.min(c,d)/(2+2*i),g.cx=b.l+b.w*(h.domain.x[1]+h.domain.x[0])/2,g.cy=b.t+b.h*(2-h.domain.y[1]-h.domain.y[0])/2,h.scalegroup&&-1===l.indexOf(h.scalegroup)&&l.push(h.scalegroup)}for(f=0;f<l.length;f++){for(k=1/0,j=l[f],e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===j&&(k=Math.min(k,g.r*g.r/g.vTotal));for(e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===j&&(g.r=Math.sqrt(k*g.vTotal))}}function i(a){function b(a){return[f.r*Math.sin(a),-f.r*Math.cos(a)]}var c,d,e,f=a[0],g=f.trace,h=g.rotation*Math.PI/180,i=2*Math.PI/f.vTotal,j="px0",k="px1";if("counterclockwise"===g.direction){for(c=0;c<a.length&&a[c].hidden;c++);if(c===a.length)return;h+=i*a[c].v,i*=-1,j="px1",k="px0"}for(e=b(h),c=0;c<a.length;c++)d=a[c],d.hidden||(d[j]=e,h+=i*d.v/2,d.pxmid=b(h),d.midangle=h,h+=i*d.v/2,e=b(h),d[k]=e,d.largeArc=d.v>f.vTotal/2?1:0)}var j=a("d3"),k=a("../../components/fx"),l=a("../../components/color"),m=a("../../components/drawing"),n=a("../../lib/svg_text_utils"),o=a("./helpers"),p=a("./event_data");b.exports=function(a,b){var c=a._fullLayout;h(b,c._size);var q=c._pielayer.selectAll("g.trace").data(b);q.enter().append("g").attr({"stroke-linejoin":"round","class":"trace"}),q.exit().remove(),q.order(),q.each(function(b){var h=j.select(this),q=b[0],r=q.trace;i(b),h.each(function(){var h=j.select(this).selectAll("g.slice").data(b);h.enter().append("g").classed("slice",!0),h.exit().remove();var i=[[[],[]],[[],[]]],s=!1;h.each(function(b){function g(){var d=a._fullLayout,f=a._fullData[r.index];if(!a._dragging&&d.hovermode!==!1){var g=f.hoverinfo;if(Array.isArray(g)&&(g=k.castHoverinfo({hoverinfo:[o.castOption(g,b.pts)],_module:r._module},d,0)),"all"===g&&(g="label+text+value+percent+name"),"none"!==g&&"skip"!==g&&g){var h=e(b,q),i=u+b.pxmid[0]*(1-h),l=v+b.pxmid[1]*(1-h),m=c.separators,n=[];if(-1!==g.indexOf("label")&&n.push(b.label),-1!==g.indexOf("text")){var s=o.castOption(f.hovertext||f.text,b.pts);s&&n.push(s)}-1!==g.indexOf("value")&&n.push(o.formatPieValue(b.v,m)),-1!==g.indexOf("percent")&&n.push(o.formatPiePercent(b.v/q.vTotal,m));var t=r.hoverlabel,w=t.font;k.loneHover({x0:i-h*q.r,x1:i+h*q.r,y:l,text:n.join("<br>"),name:-1!==g.indexOf("name")?f.name:void 0,idealAlign:b.pxmid[0]<0?"left":"right",color:o.castOption(t.bgcolor,b.pts)||b.color,borderColor:o.castOption(t.bordercolor,b.pts),fontFamily:o.castOption(w.family,b.pts),fontSize:o.castOption(w.size,b.pts),fontColor:o.castOption(w.color,b.pts)},{container:d._hoverlayer.node(),outerContainer:d._paper.node(),gd:a}),y=!0}a.emit("plotly_hover",{points:[p(b,f)],event:j.event}),z=!0}}function h(c){var d=a._fullLayout,e=a._fullData[r.index];z&&(c.originalEvent=j.event,a.emit("plotly_unhover",{points:[p(b,e)],event:j.event}),z=!1),y&&(k.loneUnhover(d._hoverlayer.node()),y=!1)}function l(){var c=a._fullLayout,d=a._fullData[r.index];a._dragging||c.hovermode===!1||(a._hoverdata=[p(b,d)],k.click(a,j.event))}function t(a,c,d,e){return"a"+e*q.r+","+e*q.r+" 0 "+b.largeArc+(d?" 1 ":" 0 ")+e*(c[0]-a[0])+","+e*(c[1]-a[1])}if(b.hidden)return void j.select(this).selectAll("path,g").remove();b.pointNumber=b.i,b.curveNumber=r.index,i[b.pxmid[1]<0?0:1][b.pxmid[0]<0?0:1].push(b);var u=q.cx,v=q.cy,w=j.select(this),x=w.selectAll("path.surface").data([b]),y=!1,z=!1;if(x.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),w.select("path.textline").remove(),w.on("mouseover",g).on("mouseout",h).on("click",l),r.pull){var A=+o.castOption(r.pull,b.pts)||0;A>0&&(u+=A*b.pxmid[0],v+=A*b.pxmid[1])}b.cxFinal=u,b.cyFinal=v;var B=r.hole;if(b.v===q.vTotal){var C="M"+(u+b.px0[0])+","+(v+b.px0[1])+t(b.px0,b.pxmid,!0,1)+t(b.pxmid,b.px0,!0,1)+"Z";B?x.attr("d","M"+(u+B*b.px0[0])+","+(v+B*b.px0[1])+t(b.px0,b.pxmid,!1,B)+t(b.pxmid,b.px0,!1,B)+"Z"+C):x.attr("d",C)}else{var D=t(b.px0,b.px1,!0,1);if(B){var E=1-B;x.attr("d","M"+(u+B*b.px1[0])+","+(v+B*b.px1[1])+t(b.px1,b.px0,!1,B)+"l"+E*b.px0[0]+","+E*b.px0[1]+D+"Z")}else x.attr("d","M"+u+","+v+"l"+b.px0[0]+","+b.px0[1]+D+"Z")}var F=o.castOption(r.textposition,b.pts),G=w.selectAll("g.slicetext").data(b.text&&"none"!==F?[0]:[]);G.enter().append("g").classed("slicetext",!0),G.exit().remove(),G.each(function(){var c=j.select(this).selectAll("text").data([0]);c.enter().append("text").attr("data-notex",1),c.exit().remove(),c.text(b.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(m.font,"outside"===F?r.outsidetextfont:r.insidetextfont).call(n.convertToTspans,a);var e,g=m.bBox(c.node());"outside"===F?e=f(g,b):(e=d(g,b,q),"auto"===F&&e.scale<1&&(c.call(m.font,r.outsidetextfont),(r.outsidetextfont.family!==r.insidetextfont.family||r.outsidetextfont.size!==r.insidetextfont.size)&&(g=m.bBox(c.node())),e=f(g,b)));var h=u+b.pxmid[0]*e.rCenter+(e.x||0),i=v+b.pxmid[1]*e.rCenter+(e.y||0);e.outside&&(b.yLabelMin=i-g.height/2,b.yLabelMid=i,b.yLabelMax=i+g.height/2,b.labelExtraX=0,b.labelExtraY=0,s=!0),c.attr("transform","translate("+h+","+i+")"+(e.scale<1?"scale("+e.scale+")":"")+(e.rotate?"rotate("+e.rotate+")":"")+"translate("+-(g.left+g.right)/2+","+-(g.top+g.bottom)/2+")")})}),s&&g(i,r),h.each(function(a){if(a.labelExtraX||a.labelExtraY){var b=j.select(this),c=b.select("g.slicetext text");c.attr("transform","translate("+a.labelExtraX+","+a.labelExtraY+")"+c.attr("transform"));var d=a.cxFinal+a.pxmid[0],e=a.cyFinal+a.pxmid[1],f="M"+d+","+e,g=(a.yLabelMax-a.yLabelMin)*(a.pxmid[0]<0?-1:1)/4;if(a.labelExtraX){var h=a.labelExtraX*a.pxmid[1]/a.pxmid[0],i=a.yLabelMid+a.labelExtraY-(a.cyFinal+a.pxmid[1]);f+=Math.abs(h)>Math.abs(i)?"l"+i*a.pxmid[0]/a.pxmid[1]+","+i+"H"+(d+a.labelExtraX+g):"l"+a.labelExtraX+","+h+"v"+(i-h)+"h"+g}else f+="V"+(a.yLabelMid+a.labelExtraY)+"h"+g;b.append("path").classed("textline",!0).call(l.stroke,r.outsidetextfont.color).attr({"stroke-width":Math.min(2,r.outsidetextfont.size/8),d:f,fill:"none"})}})})}),setTimeout(function(){q.selectAll("tspan").each(function(){var a=j.select(this);a.attr("dy")&&a.attr("dy",a.attr("dy"))})},0)}},{"../../components/color":613,"../../components/drawing":638,"../../components/fx":655,"../../lib/svg_text_utils":761,"./event_data":1033,"./helpers":1034,d3:123}],1039:[function(a,b,c){"use strict";var d=a("d3"),e=a("./style_one");b.exports=function(a){a._fullLayout._pielayer.selectAll(".trace").each(function(a){var b=a[0],c=b.trace,f=d.select(this);f.style({opacity:c.opacity}),f.selectAll("path.surface").each(function(a){d.select(this).call(e,a,c)})})}},{"./style_one":1040,d3:123}],1040:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("./helpers").castOption;b.exports=function(a,b,c){var f=c.marker.line,g=e(f.color,b.pts)||d.defaultLine,h=e(f.width,b.pts)||0;a.style({"stroke-width":h}).call(d.fill,b.color).call(d.stroke,g)}},{"../../components/color":613,"./helpers":1034}],1041:[function(a,b,c){"use strict";var d=a("../scattergl/attributes");b.exports={x:d.x,y:d.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:d.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"}}},{"../scattergl/attributes":1102}],1042:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=f(a.glplot,this.pointcloudOptions),this.pointcloud._trace=this}function e(a,b){var c=new d(a,b.uid);return c.update(b),c}var f=a("gl-pointcloud2d"),g=a("../../lib/str2rgbarray"),h=a("../scatter/get_trace_color"),i=["xaxis","yaxis"],j=d.prototype;j.handlePick=function(a){var b=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*b],this.pickXYData[2*b+1]]:[this.pickXData[b],this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}},j.update=function(a){this.index=a.index,this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.updateFast(a),this.color=h(a,{})},j.updateFast=function(a){var b,c,d,e,f,h,i=this.xData=this.pickXData=a.x,j=this.yData=this.pickYData=a.y,k=this.pickXYData=a.xy,l=a.xbounds&&a.ybounds,m=a.indices,n=this.bounds;if(k){if(d=k,b=k.length>>>1,l)n[0]=a.xbounds[0],n[2]=a.xbounds[1],n[1]=a.ybounds[0],n[3]=a.ybounds[1];else for(h=0;b>h;h++)e=d[2*h],f=d[2*h+1],e<n[0]&&(n[0]=e),e>n[2]&&(n[2]=e),f<n[1]&&(n[1]=f),f>n[3]&&(n[3]=f);if(m)c=m;else for(c=new Int32Array(b),h=0;b>h;h++)c[h]=h}else for(b=i.length,d=new Float32Array(2*b),c=new Int32Array(b),h=0;b>h;h++)e=i[h],f=j[h],c[h]=h,d[2*h]=e,d[2*h+1]=f,e<n[0]&&(n[0]=e),e>n[2]&&(n[2]=e),f<n[1]&&(n[1]=f),f>n[3]&&(n[3]=f);this.idToIndex=c,this.pointcloudOptions.idToIndex=c,this.pointcloudOptions.positions=d;var o=g(a.marker.color),p=g(a.marker.border.color),q=a.opacity*a.marker.opacity;o[3]*=q,this.pointcloudOptions.color=o;var r=a.marker.blend;if(null===r){var s=100;r=i.length<s||j.length<s}this.pointcloudOptions.blend=r,p[3]*=q,this.pointcloudOptions.borderColor=p;var t=a.marker.sizemin,u=Math.max(a.marker.sizemax,a.marker.sizemin);this.pointcloudOptions.sizeMin=t,this.pointcloudOptions.sizeMax=u,this.pointcloudOptions.areaRatio=a.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions),this.expandAxesFast(n,u/2)},j.expandAxesFast=function(a,b){for(var c,d,e,f=b||.5,g=0;2>g;g++)c=this.scene[i[g]],d=c._min,d||(d=[]),d.push({val:a[g],pad:f}),e=c._max,e||(e=[]),e.push({val:a[g+2],pad:f})},j.dispose=function(){this.pointcloud.dispose()},b.exports=e},{"../../lib/str2rgbarray":760,"../scatter/get_trace_color":1064,"gl-pointcloud2d":231}],1043:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c){function f(c,f){return d.coerce(a,b,e,c,f)}f("x"),f("y"),f("xbounds"),f("ybounds"),a.xy&&a.xy instanceof Float32Array&&(b.xy=a.xy),a.indices&&a.indices instanceof Int32Array&&(b.indices=a.indices),f("text"),f("marker.color",c),f("marker.opacity"),f("marker.blend"),f("marker.sizemin"),f("marker.sizemax"),f("marker.border.color",c),f("marker.border.arearatio")}},{"../../lib":738,"./attributes":1041}],1044:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../scatter3d/calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="pointcloud",d.basePlotModule=a("../../plots/gl2d"),d.categories=["gl","gl2d","showLegend"],d.meta={},b.exports=d},{"../../plots/gl2d":823,"../scatter3d/calc":1080,"./attributes":1041,"./convert":1042,"./defaults":1043}],1045:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../../plots/attributes"),f=a("../../components/color/attributes"),g=a("../../components/fx/attributes"),h=a("../../lib/extend").extendFlat,i=a("../../plot_api/edit_types").overrideAll;b.exports=i({hoverinfo:h({},e.hoverinfo,{flags:["label","text","value","percent","name"]}),hoverlabel:g.hoverlabel,domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:d({}),node:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:f.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20}},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:f.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]}}},"calc","nested")},{"../../components/color/attributes":612,"../../components/fx/attributes":647,"../../lib/extend":727,"../../plot_api/edit_types":769,"../../plots/attributes":783,"../../plots/font_attributes":810}],1046:[function(a,b,c){"use strict";var d=a("../../plot_api/edit_types").overrideAll,e=a("../../plots/get_data").getModuleCalcData,f=a("./plot"),g=a("../../components/fx/layout_attributes"),h="sankey";c.name=h,c.baseLayoutAttrOverrides=d({hoverlabel:g.hoverlabel},"plot","nested"),c.plot=function(a){var b=e(a.calcdata,h);f(a,b)},c.clean=function(a,b,c,d){var e=d._has&&d._has(h),f=b._has&&b._has(h);e&&!f&&d._paperdiv.selectAll(".sankey").remove()}},{"../../components/fx/layout_attributes":656,"../../plot_api/edit_types":769,"../../plots/get_data":820,"./plot":1051}],1047:[function(a,b,c){"use strict";function d(a,b,c){for(var d=a.map(function(){return[]}),f=0;f<Math.min(b.length,c.length);f++){if(b[f]===c[f])return!0;d[b[f]].push(c[f])}var g=e(d);return g.components.some(function(a){return a.length>1})}var e=a("strongly-connected-components"),f=a("../../lib"),g=a("../../lib/gup").wrap;b.exports=function(a,b){return d(b.node.label,b.link.source,b.link.target)&&(f.error("Circularity is present in the Sankey data. Removing all nodes and links."),b.link.label=[],b.link.source=[],b.link.target=[],b.link.value=[],b.link.color=[],b.node.label=[],b.node.color=[]),g({link:b.link,node:b.node})}},{"../../lib":738,"../../lib/gup":735,"strongly-connected-components":537}],1048:[function(a,b,c){"use strict";b.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"cubic-in-out",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1049:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes"),f=a("../../components/color/attributes").defaults,g=a("../../components/color"),h=a("tinycolor2");b.exports=function(a,b,c,i){function j(c,f){return d.coerce(a,b,e,c,f)}j("node.label"),j("node.pad"),j("node.thickness"),j("node.line.color"),j("node.line.width");var k=function(a){return f[a%f.length]};j("node.color",b.node.label.map(function(a,b){return g.addOpacity(k(b),.8)})),j("link.label"),j("link.source"),j("link.target"),j("link.value"),j("link.line.color"),j("link.line.width"),j("link.color",b.link.value.map(function(){return h(i.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)"})),j("domain.x"),j("domain.y"),j("orientation"),j("valueformat"),j("valuesuffix"),j("arrangement"),d.coerceFont(j,"textfont",d.extendFlat({},i.font));var l=function(a,c){return-1===b.link.source.indexOf(c)&&-1===b.link.target.indexOf(c)};b.node.label.some(l)&&d.warn("Some of the nodes are neither sources nor targets, they will not be displayed.")}},{"../../components/color":613,"../../components/color/attributes":612,"../../lib":738,"./attributes":1045,tinycolor2:543}],1050:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.moduleType="trace",d.name="sankey",d.basePlotModule=a("./base_plot"),d.categories=["noOpacity"],d.meta={},b.exports=d},{"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./plot":1051}],1051:[function(a,b,c){"use strict";function d(a){return""!==a}function e(a,b){return a.filter(function(a){return a.key===b.traceId})}function f(a,b){o.select(a).select("path").style("fill-opacity",b),o.select(a).select("rect").style("fill-opacity",b)}function g(a){o.select(a).select("text.name").style("fill","black")}function h(a){return function(b){return-1!==a.node.sourceLinks.indexOf(b.link)||-1!==a.node.targetLinks.indexOf(b.link)}}function i(a){return function(b){return-1!==b.node.sourceLinks.indexOf(a.link)||-1!==b.node.targetLinks.indexOf(a.link)}}function j(a,b,c){b&&c&&e(c,b).selectAll("."+t.sankeyLink).filter(h(b)).call(l.bind(0,b,c,!1))}function k(a,b,c){b&&c&&e(c,b).selectAll("."+t.sankeyLink).filter(h(b)).call(m.bind(0,b,c,!1))}function l(a,b,c,d){var f=d.datum().link.label;d.style("fill-opacity",.4),f&&e(b,a).selectAll("."+t.sankeyLink).filter(function(a){return a.link.label===f}).style("fill-opacity",.4),c&&e(b,a).selectAll("."+t.sankeyNode).filter(i(a)).call(j)}function m(a,b,c,d){var f=d.datum().link.label;d.style("fill-opacity",function(a){return a.tinyColorAlpha}),f&&e(b,a).selectAll("."+t.sankeyLink).filter(function(a){return a.link.label===f}).style("fill-opacity",function(a){return a.tinyColorAlpha}),c&&e(b,a).selectAll(t.sankeyNode).filter(i(a)).call(k)}function n(a,b){var c=a.hoverlabel||{},d=s.nestedProperty(c,b).get();return Array.isArray(d)?!1:d}var o=a("d3"),p=a("./render"),q=a("../../components/fx"),r=a("../../components/color"),s=a("../../lib"),t=a("./constants").cn,u=s._;b.exports=function(a,b){var c=a._fullLayout,e=c._paper,h=c._size,i=function(b,c){var d=c.link;d.originalEvent=o.event,a._hoverdata=[d],q.click(a,{target:!0})},s=function(b,c,d){o.select(b).call(l.bind(0,c,d,!0)),a.emit("plotly_hover",{event:o.event,points:[c.link]})},v=u(a,"source:")+" ",w=u(a,"target:")+" ",x=u(a,"incoming flow count:")+" ",y=u(a,"outgoing flow count:")+" ",z=function(b,e){var h=e.link.trace,i=a._fullLayout._paperdiv.node().getBoundingClientRect(),j=b.getBoundingClientRect(),k=j.left+j.width/2,l=j.top+j.height/2,m=q.loneHover({x:k-i.left,y:l-i.top,name:o.format(e.valueFormat)(e.link.value)+e.valueSuffix,text:[e.link.label||"",v+e.link.source.label,w+e.link.target.label].filter(d).join("<br>"),color:n(h,"bgcolor")||r.addOpacity(e.tinyColorHue,1),borderColor:n(h,"bordercolor"),fontFamily:n(h,"font.family"),fontSize:n(h,"font.size"),fontColor:n(h,"font.color"),idealAlign:o.event.x<k?"right":"left"},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:a});f(m,.65),g(m)},A=function(b,d,e){o.select(b).call(m.bind(0,d,e,!0)),a.emit("plotly_unhover",{event:o.event,points:[d.link]}),q.loneUnhover(c._hoverlayer.node())},B=function(b,c,d){var e=c.node;e.originalEvent=o.event,a._hoverdata=[e],o.select(b).call(k,c,d),q.click(a,{target:!0})},C=function(b,c,d){o.select(b).call(j,c,d),a.emit("plotly_hover",{event:o.event,points:[c.node]})},D=function(b,e){var h=e.node.trace,i=o.select(b).select("."+t.nodeRect),j=a._fullLayout._paperdiv.node().getBoundingClientRect(),k=i.node().getBoundingClientRect(),l=k.left-2-j.left,m=k.right+2-j.left,p=k.top+k.height/4-j.top,r=q.loneHover({x0:l,x1:m,y:p,name:o.format(e.valueFormat)(e.node.value)+e.valueSuffix,text:[e.node.label,x+e.node.targetLinks.length,y+e.node.sourceLinks.length].filter(d).join("<br>"),color:n(h,"bgcolor")||e.tinyColorHue,borderColor:n(h,"bordercolor"),fontFamily:n(h,"font.family"),fontSize:n(h,"font.size"),fontColor:n(h,"font.color"),idealAlign:"left"},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:a});f(r,.85),g(r)},E=function(b,d,e){o.select(b).call(k,d,e),a.emit("plotly_unhover",{event:o.event,points:[d.node]}),q.loneUnhover(c._hoverlayer.node())};p(e,b,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:s,follow:z,unhover:A,select:i},nodeEvents:{hover:C,follow:D,unhover:E,select:B}})}},{"../../components/color":613,"../../components/fx":655,"../../lib":738,"./constants":1048,"./render":1052,d3:123}],1052:[function(a,b,c){"use strict";function d(a){var b,c=[];for(b=0;b<a.length;b++)a[b].originalX=a[b].x,a[b].originalY=a[b].y,-1===c.indexOf(a[b].x)&&c.push(a[b].x);for(c.sort(function(a,b){return a-b}),b=0;b<a.length;b++)a[b].originalLayerIndex=c.indexOf(a[b].originalX),a[b].originalLayer=a[b].originalLayerIndex/(c.length-1)}function e(a){a.lastDraggedX=a.x,a.lastDraggedY=a.y}function f(a){return function(b){return b.node.originalX===a.node.originalX}}function g(a){for(var b=0;b<a.length;b++)a[b].y=a[b].y+a[b].dy/2}function h(a){for(var b=0;b<a.length;b++)a[b].y=a[b].y-a[b].dy/2}function i(a,b,c){for(var d,e=N(b).trace,f=e.domain,h=e.node,i=e.link,j=e.arrangement,k="h"===e.orientation,l=e.node.pad,m=e.node.thickness,n=e.node.line.color,o=e.node.line.width,p=e.link.line.color,q=e.link.line.width,r=e.valueformat,s=e.valuesuffix,t=e.textfont,u=a.width*(f.x[1]-f.x[0]),v=a.height*(f.y[1]-f.y[0]),w=h.label.map(function(a,b){return{pointNumber:b,
label:a,color:K.isArray(h.color)?h.color[b]:h.color}}),x=i.value.map(function(a,b){return{pointNumber:b,label:i.label[b],color:K.isArray(i.color)?i.color[b]:i.color,source:i.source[b],target:i.target[b],value:a}}),y=I().size(k?[u,v]:[v,u]).nodeWidth(m).nodePadding(l).nodes(w).links(x).layout(D.sankeyIterations),z=y.nodes(),A=0;A<z.length;A++)d=z[A],d.width=u,d.height=v;return g(w),{key:c,trace:e,guid:Math.floor(1e12*(1+Math.random())),horizontal:k,width:u,height:v,nodePad:l,nodeLineColor:n,nodeLineWidth:o,linkLineColor:p,linkLineWidth:q,valueFormat:r,valueSuffix:s,textFont:t,translateX:f.x[0]*u+a.margin.l,translateY:a.height-f.y[1]*a.height+a.margin.t,dragParallel:k?v:u,dragPerpendicular:k?u:v,nodes:w,links:x,arrangement:j,sankey:y,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function j(a,b,c){var d=F(c.color),e=c.source.label+"|"+c.target.label,f=a[e];a[e]=(f||0)+1;var g=e+"__"+a[e];return c.trace=b.trace,c.curveNumber=b.trace.index,{key:g,traceId:b.key,link:c,tinyColorHue:G.tinyRGB(d),tinyColorAlpha:d.getAlpha(),linkLineColor:b.linkLineColor,linkLineWidth:b.linkLineWidth,valueFormat:b.valueFormat,valueSuffix:b.valueSuffix,sankey:b.sankey,interactionState:b.interactionState}}function k(a,b,c){var d=F(c.color),e=D.nodePadAcross,f=b.nodePad/2,g=c.dx,h=Math.max(.5,c.dy),i=c.label,j=a[i];a[i]=(j||0)+1;var k=i+"__"+a[i];return c.trace=b.trace,c.curveNumber=b.trace.index,{key:k,traceId:b.key,node:c,nodePad:b.nodePad,nodeLineColor:b.nodeLineColor,nodeLineWidth:b.nodeLineWidth,textFont:b.textFont,size:b.horizontal?b.height:b.width,visibleWidth:Math.ceil(g),visibleHeight:h,zoneX:-e,zoneY:-f,zoneWidth:g+2*e,zoneHeight:h+2*f,labelY:b.horizontal?c.dy/2+1:c.dx/2+1,left:1===c.originalLayer,sizeAcross:b.width,forceLayouts:b.forceLayouts,horizontal:b.horizontal,darkBackground:d.getBrightness()<=128,tinyColorHue:G.tinyRGB(d),tinyColorAlpha:d.getAlpha(),valueFormat:b.valueFormat,valueSuffix:b.valueSuffix,sankey:b.sankey,arrangement:b.arrangement,uniqueNodeLabelPathId:[b.guid,b.key,k].join(" "),interactionState:b.interactionState}}function l(a){a.attr("transform",function(a){return"translate("+a.node.x.toFixed(3)+", "+(a.node.y-a.node.dy/2).toFixed(3)+")"})}function m(a){var b=a.sankey.nodes();h(b);var c=a.sankey.link()(a.link);return g(b),c}function n(a){a.call(l)}function o(a,b){a.call(n),b.attr("d",m)}function p(a){a.attr("width",function(a){return a.visibleWidth}).attr("height",function(a){return a.visibleHeight})}function q(a){return a.link.dy>1||a.linkLineWidth>0}function r(a){var b="translate("+a.translateX+","+a.translateY+")";return b+(a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function s(a){return"translate("+(a.horizontal?0:a.labelY)+" "+(a.horizontal?a.labelY:0)+")"}function t(a){return E.svg.line()([[a.horizontal?a.left?-a.sizeAcross:a.visibleWidth+D.nodeTextOffsetHorizontal:D.nodeTextOffsetHorizontal,0],[a.horizontal?a.left?-D.nodeTextOffsetHorizontal:a.sizeAcross:a.visibleHeight-D.nodeTextOffsetHorizontal,0]])}function u(a){return a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function v(a){return a.horizontal?"scale(1 1)":"scale(-1 1)"}function w(a){return a.darkBackground&&!a.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function x(a){return a.horizontal&&a.left?"100%":"0%"}function y(a,b,c){a.on(".basic",null).on("mouseover.basic",function(a){a.interactionState.dragInProgress||(c.hover(this,a,b),a.interactionState.hovered=[this,a])}).on("mousemove.basic",function(a){a.interactionState.dragInProgress||(c.follow(this,a),a.interactionState.hovered=[this,a])}).on("mouseout.basic",function(a){a.interactionState.dragInProgress||(c.unhover(this,a,b),a.interactionState.hovered=!1)}).on("click.basic",function(a){a.interactionState.hovered&&(c.unhover(this,a,b),a.interactionState.hovered=!1),a.interactionState.dragInProgress||c.select(this,a,b)})}function z(a,b,c){var d=E.behavior.drag().origin(function(a){return a.node}).on("dragstart",function(d){if("fixed"!==d.arrangement&&(K.raiseToTop(this),d.interactionState.dragInProgress=d.node,e(d.node),d.interactionState.hovered&&(c.nodeEvents.unhover.apply(0,d.interactionState.hovered),d.interactionState.hovered=!1),"snap"===d.arrangement)){var f=d.traceId+"|"+Math.floor(d.node.originalX);d.forceLayouts[f]?d.forceLayouts[f].alpha(1):A(a,f,d),B(a,b,d,f)}}).on("drag",function(c){if("fixed"!==c.arrangement){var d=E.event.x,g=E.event.y;"snap"===c.arrangement?(c.node.x=d,c.node.y=g):("freeform"===c.arrangement&&(c.node.x=d),c.node.y=Math.max(c.node.dy/2,Math.min(c.size-c.node.dy/2,g))),e(c.node),"snap"!==c.arrangement&&(c.sankey.relayout(),o(a.filter(f(c)),b))}}).on("dragend",function(a){a.interactionState.dragInProgress=!1});a.on(".drag",null).call(d)}function A(a,b,c){var d=c.sankey.nodes().filter(function(a){return a.originalX===c.node.originalX});c.forceLayouts[b]=J.forceSimulation(d).alphaDecay(0).force("collide",J.forceCollide().radius(function(a){return a.dy/2+c.nodePad/2}).strength(1).iterations(D.forceIterations)).force("constrain",C(a,b,d,c)).stop()}function B(a,b,c,d){window.requestAnimationFrame(function e(){for(var g=0;g<D.forceTicksPerFrame;g++)c.forceLayouts[d].tick();c.sankey.relayout(),o(a.filter(f(c)),b),c.forceLayouts[d].alpha()>0&&window.requestAnimationFrame(e)})}function C(a,b,c,d){return function(){for(var a=0,e=0;e<c.length;e++){var f=c[e];f===d.interactionState.dragInProgress?(f.x=f.lastDraggedX,f.y=f.lastDraggedY):(f.vx=(f.originalX-f.x)/D.forceTicksPerFrame,f.y=Math.min(d.size-f.dy/2,Math.max(f.dy/2,f.y))),a=Math.max(a,Math.abs(f.vx),Math.abs(f.vy))}!d.interactionState.dragInProgress&&.1>a&&d.forceLayouts[b].alpha()>0&&d.forceLayouts[b].alpha(0)}}var D=a("./constants"),E=a("d3"),F=a("tinycolor2"),G=a("../../components/color"),H=a("../../components/drawing"),I=a("@plotly/d3-sankey").sankey,J=a("d3-force"),K=a("../../lib"),L=a("../../lib/gup").keyFun,M=a("../../lib/gup").repeat,N=a("../../lib/gup").unwrap;b.exports=function(a,b,c,e){var f=a.selectAll("."+D.cn.sankey).data(b.filter(function(a){return N(a).trace.visible}).map(i.bind(null,c)),L);f.exit().remove(),f.enter().append("g").classed(D.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").style("box-sizing","content-box").attr("transform",r),f.transition().ease(D.ease).duration(D.duration).attr("transform",r);var g=f.selectAll("."+D.cn.sankeyLinks).data(M,L);g.enter().append("g").classed(D.cn.sankeyLinks,!0).style("fill","none");var h=g.selectAll("."+D.cn.sankeyLink).data(function(a){var b={};return a.sankey.links().filter(function(a){return a.value}).map(j.bind(null,b,a))},L);h.enter().append("path").classed(D.cn.sankeyLink,!0).attr("d",m).call(y,f,e.linkEvents),h.style("stroke",function(a){return q(a)?G.tinyRGB(F(a.linkLineColor)):a.tinyColorHue}).style("stroke-opacity",function(a){return q(a)?G.opacity(a.linkLineColor):a.tinyColorAlpha}).style("stroke-width",function(a){return q(a)?a.linkLineWidth:1}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha}),h.transition().ease(D.ease).duration(D.duration).attr("d",m),h.exit().transition().ease(D.ease).duration(D.duration).style("opacity",0).remove();var n=f.selectAll("."+D.cn.sankeyNodeSet).data(M,L);n.enter().append("g").classed(D.cn.sankeyNodeSet,!0),n.style("cursor",function(a){switch(a.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var o=n.selectAll("."+D.cn.sankeyNode).data(function(a){var b=a.sankey.nodes(),c={};return d(b),b.filter(function(a){return a.value}).map(k.bind(null,c,a))},L);o.enter().append("g").classed(D.cn.sankeyNode,!0).call(l).call(y,f,e.nodeEvents),o.call(z,h,e),o.transition().ease(D.ease).duration(D.duration).call(l),o.exit().transition().ease(D.ease).duration(D.duration).style("opacity",0).remove();var A=o.selectAll("."+D.cn.nodeRect).data(M);A.enter().append("rect").classed(D.cn.nodeRect,!0).call(p),A.style("stroke-width",function(a){return a.nodeLineWidth}).style("stroke",function(a){return G.tinyRGB(F(a.nodeLineColor))}).style("stroke-opacity",function(a){return G.opacity(a.nodeLineColor)}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha}),A.transition().ease(D.ease).duration(D.duration).call(p);var B=o.selectAll("."+D.cn.nodeCapture).data(M);B.enter().append("rect").classed(D.cn.nodeCapture,!0).style("fill-opacity",0),B.attr("x",function(a){return a.zoneX}).attr("y",function(a){return a.zoneY}).attr("width",function(a){return a.zoneWidth}).attr("height",function(a){return a.zoneHeight});var C=o.selectAll("."+D.cn.nodeCentered).data(M);C.enter().append("g").classed(D.cn.nodeCentered,!0).attr("transform",s),C.transition().ease(D.ease).duration(D.duration).attr("transform",s);var E=C.selectAll("."+D.cn.nodeLabelGuide).data(M);E.enter().append("path").classed(D.cn.nodeLabelGuide,!0).attr("id",function(a){return a.uniqueNodeLabelPathId}).attr("d",t).attr("transform",u),E.transition().ease(D.ease).duration(D.duration).attr("d",t).attr("transform",u);var I=C.selectAll("."+D.cn.nodeLabel).data(M);I.enter().append("text").classed(D.cn.nodeLabel,!0).attr("transform",v).style("user-select","none").style("cursor","default").style("fill","black"),I.style("text-shadow",function(a){return a.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(a){H.font(I,a.textFont)}),I.transition().ease(D.ease).duration(D.duration).attr("transform",v);var J=I.selectAll("."+D.cn.nodeLabelTextPath).data(M);J.enter().append("textPath").classed(D.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(a){return"#"+a.uniqueNodeLabelPathId}).attr("startOffset",x).style("fill",w),J.text(function(a){return a.horizontal||a.node.dy>5?a.node.label:""}).attr("text-anchor",function(a){return a.horizontal&&a.left?"end":"start"}),J.transition().ease(D.ease).duration(D.duration).attr("startOffset",x).style("fill",w)}},{"../../components/color":613,"../../components/drawing":638,"../../lib":738,"../../lib/gup":735,"./constants":1048,"@plotly/d3-sankey":39,d3:123,"d3-force":119,tinycolor2:543}],1053:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){for(var c=0;c<a.length;c++)a[c].i=c;d.mergeArray(b.text,a,"tx"),d.mergeArray(b.hovertext,a,"htx"),d.mergeArray(b.customdata,a,"data"),d.mergeArray(b.textposition,a,"tp"),b.textfont&&(d.mergeArray(b.textfont.size,a,"ts"),d.mergeArray(b.textfont.color,a,"tc"),d.mergeArray(b.textfont.family,a,"tf"));var e=b.marker;if(e){d.mergeArray(e.size,a,"ms"),d.mergeArray(e.opacity,a,"mo"),d.mergeArray(e.symbol,a,"mx"),d.mergeArray(e.color,a,"mc");var f=e.line;e.line&&(d.mergeArray(f.color,a,"mlc"),d.mergeArray(f.width,a,"mlw"));var g=e.gradient;g&&"none"!==g.type&&(d.mergeArray(g.type,a,"mgt"),d.mergeArray(g.color,a,"mgc"))}}},{"../../lib":738}],1054:[function(a,b,c){"use strict";var d=a("../../components/colorscale/color_attributes"),e=a("../../components/errorbars/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../plots/font_attributes"),h=a("../../components/drawing/attributes").dash,i=a("../../components/drawing"),j=(a("./constants"),a("../../lib/extend").extendFlat);b.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:j({},h,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:j({symbol:{valType:"enumerated",values:i.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:f,line:j({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},d("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},d("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:g({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"},error_y:e,error_x:e}},{"../../components/colorbar/attributes":614,"../../components/colorscale/color_attributes":621,"../../components/drawing":638,"../../components/drawing/attributes":637,"../../components/errorbars/attributes":640,"../../lib/extend":727,"../../plots/font_attributes":810,"./constants":1060}],1055:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../../constants/numerical").BADNUM,g=a("./subtypes"),h=a("./colorscale_calc"),i=a("./arrays_to_calcdata"),j=a("./calc_selection");b.exports=function(a,b){var c,k,l,m=e.getFromId(a,b.xaxis||"x"),n=e.getFromId(a,b.yaxis||"y"),o=m.makeCalcdata(b,"x"),p=n.makeCalcdata(b,"y"),q=Math.min(o.length,p.length);m._minDtick=0,n._minDtick=0,o.length>q&&o.splice(q,o.length-q),p.length>q&&p.splice(q,p.length-q);var r={padded:!0},s={padded:!0};if(g.hasMarkers(b)){if(c=b.marker,k=c.size,Array.isArray(k)){var t={type:"linear"};e.setConvert(t),k=t.makeCalcdata(b.marker,"size"),k.length>q&&k.splice(q,k.length-q)}var u,v=1.6*(b.marker.sizeref||1);u="area"===b.marker.sizemode?function(a){return Math.max(Math.sqrt((a||0)/v),3)}:function(a){return Math.max((a||0)/v,3)},r.ppad=s.ppad=Array.isArray(k)?k.map(u):u(k)}h(b),!("tozerox"===b.fill||"tonextx"===b.fill&&a.firstscatter)||o[0]===o[q-1]&&p[0]===p[q-1]?b.error_y.visible||-1===["tonexty","tozeroy"].indexOf(b.fill)&&(g.hasMarkers(b)||g.hasText(b))||(r.padded=!1,r.ppad=0):r.tozero=!0,!("tozeroy"===b.fill||"tonexty"===b.fill&&a.firstscatter)||o[0]===o[q-1]&&p[0]===p[q-1]?-1!==["tonextx","tozerox"].indexOf(b.fill)&&(s.padded=!1):s.tozero=!0,e.expand(m,o,r),e.expand(n,p,s);var w=new Array(q);for(l=0;q>l;l++)w[l]=d(o[l])&&d(p[l])?{x:o[l],y:p[l]}:{x:f,y:f},b.ids&&(w[l].id=String(b.ids[l]));return i(w,b),j(w,b),a.firstscatter=!1,w}},{"../../constants/numerical":717,"../../plots/cartesian/axes":785,"./arrays_to_calcdata":1053,"./calc_selection":1056,"./colorscale_calc":1059,"./subtypes":1076,"fast-isnumeric":132}],1056:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){Array.isArray(b.selectedpoints)&&d.tagSelected(a,b)}},{"../../lib":738}],1057:[function(a,b,c){"use strict";b.exports=function(a){for(var b=0;b<a.length;b++){var c=a[b];if("scatter"===c.type){var d=c.fill;if("none"!==d&&"toself"!==d&&(c.opacity=void 0,"tonexty"===d||"tonextx"===d))for(var e=b-1;e>=0;e--){var f=a[e];if("scatter"===f.type&&f.xaxis===c.xaxis&&f.yaxis===c.yaxis){f.opacity=void 0;break}}}}}},{}],1058:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i=c.marker,j="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+j).remove(),void 0===i||!i.showscale)return void f.autoMargin(a,j);var k=i.color,l=i.cmin,m=i.cmax;d(l)||(l=e.aggNums(Math.min,null,k)),d(m)||(m=e.aggNums(Math.max,null,k));var n=b[0].t.cb=h(a,j),o=g.makeColorScaleFunc(g.extractScale(i.colorscale,l,m),{noNumericCheck:!0});n.fillcolor(o).filllevels({start:l,end:m,size:(m-l)/254}).options(i.colorbar)()}},{"../../components/colorbar/draw":617,"../../components/colorscale":628,"../../lib":738,"../../plots/plots":846,"fast-isnumeric":132}],1059:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/calc"),f=a("./subtypes");b.exports=function(a){f.hasLines(a)&&d(a,"line")&&e(a,a.line.color,"line","c"),f.hasMarkers(a)&&(d(a,"marker")&&e(a,a.marker.color,"marker","c"),d(a,"marker.line")&&e(a,a.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":620,"../../components/colorscale/has_colorscale":627,"./subtypes":1076}],1060:[function(a,b,c){"use strict";b.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],1061:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes"),f=a("./constants"),g=a("./subtypes"),h=a("./xy_defaults"),i=a("./marker_defaults"),j=a("./line_defaults"),k=a("./line_shape_defaults"),l=a("./text_defaults"),m=a("./fillcolor_defaults"),n=a("../../components/errorbars/defaults");b.exports=function(a,b,c,o){function p(c,f){return d.coerce(a,b,e,c,f)}var q=h(a,b,o,p),r=q<f.PTS_LINESONLY?"lines+markers":"lines";if(!q)return void(b.visible=!1);p("text"),p("hovertext"),p("mode",r),g.hasLines(b)&&(j(a,b,c,o,p),k(a,b,p),p("connectgaps"),p("line.simplify")),g.hasMarkers(b)&&i(a,b,c,o,p,{gradient:!0}),g.hasText(b)&&l(a,b,o,p);var s=[];(g.hasMarkers(b)||g.hasText(b))&&(p("marker.maxdisplayed"),s.push("points")),p("fill"),"none"!==b.fill&&(m(a,b,c,p),g.hasLines(b)||k(a,b,p)),("tonext"===b.fill||"toself"===b.fill)&&s.push("fills"),p("hoveron",s.join("+")||"points"),n(a,b,c,{axis:"y"}),n(a,b,c,{axis:"x",inherit:"y"}),p("cliponaxis"),d.coerceSelectionMarkerOpacity(b,p)}},{"../../components/errorbars/defaults":643,"../../lib":738,"./attributes":1054,"./constants":1060,"./fillcolor_defaults":1063,"./line_defaults":1067,"./line_shape_defaults":1069,"./marker_defaults":1072,"./subtypes":1076,"./text_defaults":1077,"./xy_defaults":1078}],1062:[function(a,b,c){"use strict";function d(a){return a||0===a}var e=a("../../lib");b.exports=function(a,b,c){var f=Array.isArray(c)?function(a){c.push(a)}:function(a){c.text=a},g=e.extractOption(a,b,"htx","hovertext");if(d(g))return f(g);var h=e.extractOption(a,b,"tx","text");return d(h)?f(h):void 0}},{"../../lib":738}],1063:[function(a,b,c){"use strict";var d=a("../../components/color");b.exports=function(a,b,c,e){var f=!1;if(b.marker){var g=b.marker.color,h=(b.marker.line||{}).color;g&&!Array.isArray(g)?f=g:h&&!Array.isArray(h)&&(f=h)}e("fillcolor",d.addOpacity((b.line||{}).color||f||c,.5))}},{"../../components/color":613}],1064:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("./subtypes");b.exports=function(a,b){var c,f;if("lines"===a.mode)return c=a.line.color,c&&d.opacity(c)?c:a.fillcolor;if("none"===a.mode)return a.fill?a.fillcolor:"";var g=b.mcc||(a.marker||{}).color,h=b.mlcc||((a.marker||{}).line||{}).color;return f=g&&d.opacity(g)?g:h&&d.opacity(h)&&(b.mlw||((a.marker||{}).line||{}).width)?h:"",f?d.opacity(f)<.3?d.addOpacity(f,.3):f:(c=(a.line||{}).color,c&&d.opacity(c)&&e.hasLines(a)&&a.line.width?c:a.fillcolor)}},{"../../components/color":613,"./subtypes":1076}],1065:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/fx"),f=a("../../components/errorbars"),g=a("./get_trace_color"),h=a("../../components/color"),i=a("./fill_hover_text"),j=e.constants.MAXDIST;b.exports=function(a,b,c,k){var l=a.cd,m=l[0].trace,n=a.xa,o=a.ya,p=n.c2p(b),q=o.c2p(c),r=[p,q],s=m.hoveron||"",t=-1!==m.mode.indexOf("markers")?3:.5;if(-1!==s.indexOf("points")){var u=function(a){var b=Math.max(3,a.mrc||0),c=1-1/b,d=Math.abs(n.c2p(a.x)-p),e=b>d?c*d/b:d-b+c;return e},v=function(a){var b=Math.max(3,a.mrc||0),c=1-1/b,d=Math.abs(o.c2p(a.y)-q);return b>d?c*d/b:d-b+c},w=function(a){var b=Math.max(t,a.mrc||0),c=n.c2p(a.x)-p,d=o.c2p(a.y)-q;return Math.max(Math.sqrt(c*c+d*d)-b,1-t/b)},x=e.getDistanceFunction(k,u,v,w);if(e.getClosest(l,x,a),a.index!==!1){var y=l[a.index],z=n.c2p(y.x,!0),A=o.c2p(y.y,!0),B=y.mrc||1;return d.extendFlat(a,{color:g(m,y),x0:z-B,x1:z+B,xLabelVal:y.x,y0:A-B,y1:A+B,yLabelVal:y.y}),i(y,m,a),f.hoverInfo(y,m,a),[a]}}if(-1!==s.indexOf("fills")&&m._polygons){var C,D,E,F,G,H,I,J,K,L=m._polygons,M=[],N=!1,O=1/0,P=-(1/0),Q=1/0,R=-(1/0);for(C=0;C<L.length;C++)E=L[C],E.contains(r)&&(N=!N,M.push(E),Q=Math.min(Q,E.ymin),R=Math.max(R,E.ymax));if(N){Q=Math.max(Q,0),R=Math.min(R,o._length);var S=(Q+R)/2;for(C=0;C<M.length;C++)for(F=M[C].pts,D=1;D<F.length;D++)J=F[D-1][1],K=F[D][1],J>S!=K>=S&&(H=F[D-1][0],I=F[D][0],G=H+(I-H)*(S-J)/(K-J),O=Math.min(O,G),P=Math.max(P,G));O=Math.max(O,0),P=Math.min(P,n._length);var T=h.defaultLine;return h.opacity(m.fillcolor)?T=m.fillcolor:h.opacity((m.line||{}).color)&&(T=m.line.color),d.extendFlat(a,{distance:j+10,x0:O,x1:P,y0:S,y1:S,color:T}),delete a.index,m.text&&!Array.isArray(m.text)?a.text=String(m.text):a.text=m.name,[a]}}}},{"../../components/color":613,"../../components/errorbars":644,"../../components/fx":655,"../../lib":738,"./fill_hover_text":1062,"./get_trace_color":1064}],1066:[function(a,b,c){"use strict";var d={},e=a("./subtypes");d.hasLines=e.hasLines,d.hasMarkers=e.hasMarkers,d.hasText=e.hasText,d.isBubble=e.isBubble,d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.cleanData=a("./clean_data"),d.calc=a("./calc"),d.arraysToCalcdata=a("./arrays_to_calcdata"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.style=a("./style").style,d.hoverPoints=a("./hover"),d.selectPoints=a("./select"),d.animatable=!0,d.moduleType="trace",d.name="scatter",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"./arrays_to_calcdata":1053,"./attributes":1054,"./calc":1055,"./clean_data":1057,"./colorbar":1058,"./defaults":1061,"./hover":1065,"./plot":1073,"./select":1074,"./style":1075,"./subtypes":1076}],1067:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/defaults");b.exports=function(a,b,c,f,g,h){var i=(a.marker||{}).color;if(g("line.color",c),d(a,"line"))e(a,b,f,g,{prefix:"line.",cLetter:"c"});else{var j=(Array.isArray(i)?!1:i)||c;g("line.color",j)}g("line.width"),(h||{}).noDash||g("line.dash")}},{"../../components/colorscale/defaults":623,"../../components/colorscale/has_colorscale":627}],1068:[function(a,b,c){"use strict";var d=a("../../constants/numerical").BADNUM,e=a("../../lib"),f=e.segmentsIntersect,g=e.constrain,h=a("./constants");b.exports=function(a,b){function c(b){var c=J.c2p(a[b].x),e=K.c2p(a[b].y);return c===d||e===d?!1:[c,e]}function i(a){var b=a[0]/J._length,c=a[1]/K._length;return(1+h.toleranceGrowth*Math.max(0,-b,b-1,-c,c-1))*N}function j(a,b){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)}function k(a,b){for(var c=[],d=0,e=0;4>e;e++){var g=ea[e],h=f(a[0],a[1],b[0],b[1],g[0],g[1],g[2],g[3]);h&&(!d||Math.abs(h.x-c[0][0])>1||Math.abs(h.y-c[0][1])>1)&&(h=[h.x,h.y],d&&j(h,a)<j(c[0],a)?c.unshift(h):c.push(h),d++)}return c}function l(a){return a[0]<aa||a[0]>ba||a[1]<ca||a[1]>da?[g(a[0],aa,ba),g(a[1],ca,da)]:void 0}function m(a,b){return(a[0]!==b[0]||a[0]!==aa&&a[0]!==ba)&&(a[1]!==b[1]||a[1]!==ca&&a[1]!==da)?void 0:!0}function n(a,b){var c=[],d=l(a),e=l(b);return d&&e&&m(d,e)?c:(d&&c.push(d),e&&c.push(e),c)}function o(a,b,c){return function(d,f){var g=l(d),h=l(f),i=[];if(g&&h&&m(g,h))return i;g&&i.push(g),h&&i.push(h);var j=2*e.constrain((d[a]+f[a])/2,b,c)-((g||d)[a]+(h||f)[a]);if(j){var k;k=g&&h?j>0==g[a]>h[a]?g:h:g||h,k[a]+=j}return i}}function p(a,b){var c=b[0]-a[0],d=(b[1]-a[1])/c,e=(a[1]*b[0]-b[1]*a[0])/c;return e>0?[d>0?aa:ba,da]:[d>0?ba:aa,ca]}function q(a){var b=a[0],c=a[1],d=b===S[T-1][0],e=c===S[T-1][1];if(!d||!e)if(T>1){var f=b===S[T-2][0],g=c===S[T-2][1];d&&(b===aa||b===ba)&&f?g?T--:S[T-1]=a:e&&(c===ca||c===da)&&g?f?T--:S[T-1]=a:S[T++]=a}else S[T++]=a}function r(a){S[T-1][0]!==a[0]&&S[T-1][1]!==a[1]&&q([W,X]),q(a),Y=null,W=X=0}function s(a){if(U=a[0]<aa?aa:a[0]>ba?ba:0,V=a[1]<ca?ca:a[1]>da?da:0,U||V){if(T)if(Y){var b=$(Y,a);b.length>1&&(r(b[0]),S[T++]=b[1])}else Z=$(S[T-1],a)[0],S[T++]=Z;else S[T++]=[U||a[0],V||a[1]];var c=S[T-1];U&&V&&(c[0]!==U||c[1]!==V)?(Y&&(W!==U&&X!==V?q(W&&X?p(Y,a):[W||U,X||V]):W&&X&&q([W,X])),q([U,V])):W-U&&X-V&&q([U||W,V||X]),Y=a,W=U,X=V}else Y&&r($(Y,a)[0]),S[T++]=a}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=b.xaxis,K=b.yaxis,L=b.simplify,M=b.connectGaps,N=b.baseTolerance,O=b.shape,P="linear"===O,Q=[],R=h.minTolerance,S=new Array(a.length),T=0;L||(N=R=-1);var U,V,W,X,Y,Z,$,_=h.maxScreensAway,aa=-J._length*_,ba=J._length*(1+_),ca=-K._length*_,da=K._length*(1+_),ea=[[aa,ca,ba,ca],[ba,ca,ba,da],[ba,da,aa,da],[aa,da,aa,ca]];for("linear"===O||"spline"===O?$=k:"hv"===O||"vh"===O?$=n:"hvh"===O?$=o(0,aa,ba):"vhv"===O&&($=o(1,ca,da)),t=0;t<a.length;t++)if(u=c(t)){for(T=0,Y=null,s(u),t++;t<a.length;t++){if(w=c(t),!w){if(M)continue;break}if(P){if(C=j(w,u),!(C<i(w)*R)){for(A=[(w[0]-u[0])/C,(w[1]-u[1])/C],x=u,D=C,E=G=H=0,z=!1,v=w,t++;t<a.length;t++){if(y=c(t),!y){if(M)continue;break}if(B=[y[0]-u[0],y[1]-u[1]],I=B[0]*A[1]-B[1]*A[0],G=Math.min(G,I),H=Math.max(H,I),H-G>i(y))break;v=y,F=B[0]*A[0]+B[1]*A[1],F>D?(D=F,w=y,z=!1):E>F&&(E=F,x=y,z=!0)}if(z?(s(w),v!==x&&s(x)):(x!==u&&s(x),v!==w&&s(w)),s(v),t>=a.length||!y)break;s(y),u=y}}else s(w)}Y&&q([W||Y[0],X||Y[1]]),Q.push(S.slice(0,T))}return Q}},{"../../constants/numerical":717,"../../lib":738,"./constants":1060}],1069:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d=c("line.shape");"spline"===d&&c("line.smoothing")}},{}],1070:[function(a,b,c){"use strict";b.exports=function(a,b,c){for(var d,e,f=null,g=0;g<c.length;++g)d=c[g],e=d[0].trace,e.visible===!0?(e._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(e.fill)&&(e._prevtrace=f,f&&(f._nexttrace=e)),f=e):e._prevtrace=e._nexttrace=null}},{}],1071:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a){var b=a.marker,c=b.sizeref||1,e=b.sizemin||0,f="area"===b.sizemode?function(a){return Math.sqrt(a/c)}:function(a){return a/c};return function(a){var b=f(a/2);return d(b)&&b>0?Math.max(b,e):0}}},{"fast-isnumeric":132}],1072:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("../../components/colorscale/has_colorscale"),f=a("../../components/colorscale/defaults"),g=a("./subtypes");b.exports=function(a,b,c,h,i,j){var k,l=g.isBubble(a),m=(a.line||{}).color;if(j=j||{},m&&(c=m),i("marker.symbol"),i("marker.opacity",l?.7:1),i("marker.size"),i("marker.color",c),e(a,"marker")&&f(a,b,h,i,{prefix:"marker.",cLetter:"c"}),j.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),j.noLine||(k=m&&!Array.isArray(m)&&b.marker.color!==m?m:l?d.background:d.defaultLine,i("marker.line.color",k),e(a,"marker.line")&&f(a,b,h,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",l?1:0)),l&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),j.gradient){var n=i("marker.gradient.type");"none"!==n&&i("marker.gradient.color")}}},{"../../components/color":613,"../../components/colorscale/defaults":623,"../../components/colorscale/has_colorscale":627,"./subtypes":1076}],1073:[function(a,b,c){"use strict";function d(a,b,c){var d;b.selectAll("g.trace").each(function(a){var b=g.select(this);if(d=a[0].trace,d._nexttrace){if(d._nextFill=b.select(".js-fill.js-tonext"),!d._nextFill.size()){var e=":first-child";b.select(".js-fill.js-tozero").size()&&(e+=" + *"),d._nextFill=b.insert("path",e).attr("class","js-fill js-tonext")}}else b.selectAll(".js-fill.js-tonext").remove(),d._nextFill=null;d.fill&&("tozero"===d.fill.substr(0,6)||"toself"===d.fill||"to"===d.fill.substr(0,2)&&!d._prevtrace)?(d._ownFill=b.select(".js-fill.js-tozero"),d._ownFill.size()||(d._ownFill=b.insert("path",":first-child").attr("class","js-fill js-tozero"))):(b.selectAll(".js-fill.js-tozero").remove(),d._ownFill=null),b.selectAll(".js-fill").call(i.setClipUrl,c.layerClipId)})}function e(a,b,c,d,e,m,o){function p(a){return x?a.transition():a}function q(a){return a.filter(function(a){return a.vis})}function r(a){return a.id}function s(a){return a.ids?r:void 0}function t(){return!1}function u(b){var d,e,f,j=b[0].trace,l=g.select(this),m=k.hasMarkers(j),n=k.hasText(j),o=s(j),r=t,u=t;m&&(r=j.marker.maxdisplayed||j._needsCull?q:h.identity),n&&(u=j.marker.maxdisplayed||j._needsCull?q:h.identity),e=l.selectAll("path.point"),d=e.data(r,o);var v=d.enter().append("path").classed("point",!0);x&&v.call(i.pointStyle,j,a).call(i.translatePoints,y,z).style("opacity",0).transition().style("opacity",1);var w=m&&i.tryColorscale(j.marker,""),A=m&&i.tryColorscale(j.marker,"line");d.order(),d.each(function(b){var d=g.select(this),e=p(d);f=i.translatePoint(b,e,y,z),f?(i.singlePointStyle(b,e,j,w,A,a),c.layerClipId&&i.hideOutsideRangePoint(b,e,y,z,j.xcalendar,j.ycalendar),j.customdata&&d.classed("plotly-customdata",null!==b.data&&void 0!==b.data)):e.remove()}),x?d.exit().transition().style("opacity",0).remove():d.exit().remove(),e=l.selectAll("g"),d=e.data(u,o),d.enter().append("g").classed("textpoint",!0).append("text"),d.order(),d.each(function(a){var b=g.select(this),d=p(b.select("text"));f=i.translatePoint(a,d,y,z),f?c.layerClipId&&i.hideOutsideRangePoint(a,b,y,z,j.xcalendar,j.ycalendar):b.remove()}),d.selectAll("text").call(i.textPointStyle,j,a).each(function(a){var b=y.c2p(a.x),c=z.c2p(a.y);g.select(this).selectAll("tspan.line").each(function(){p(g.select(this)).attr({x:b,y:c})})}),d.exit().remove()}var v,w;f(a,b,c,d,e);var x=!!o&&o.duration>0,y=c.xaxis,z=c.yaxis,A=d[0].trace,B=A.line,C=g.select(m);if(C.call(j.plot,c,o),A.visible===!0){p(C).style("opacity",A.opacity);var D,E,F=A.fill.charAt(A.fill.length-1);"x"!==F&&"y"!==F&&(F=""),d[0].node3=C;var G="",H=[],I=A._prevtrace;I&&(G=I._prevRevpath||"",E=I._nextFill,H=I._polygons);var J,K,L,M,N,O,P,Q,R,S="",T="",U=[],V=h.noop;if(D=A._ownFill,k.hasLines(A)||"none"!==A.fill){for(E&&E.datum(d),-1!==["hv","vh","hvh","vhv"].indexOf(B.shape)?(L=i.steps(B.shape),M=i.steps(B.shape.split("").reverse().join(""))):L=M="spline"===B.shape?function(a){var b=a[a.length-1];return a.length>1&&a[0][0]===b[0]&&a[0][1]===b[1]?i.smoothclosed(a.slice(1),B.smoothing):i.smoothopen(a,B.smoothing)}:function(a){return"M"+a.join("L")},N=function(a){return M(a.reverse())},U=l(d,{xaxis:y,yaxis:z,connectGaps:A.connectgaps,baseTolerance:Math.max(B.width||1,3)/4,shape:B.shape,simplify:B.simplify}),R=A._polygons=new Array(U.length),
w=0;w<U.length;w++)A._polygons[w]=n(U[w]);U.length&&(O=U[0][0],P=U[U.length-1],Q=P[P.length-1]),V=function(a){return function(b){if(J=L(b),K=N(b),S?F?(S+="L"+J.substr(1),T=K+("L"+T.substr(1))):(S+="Z"+J,T=K+"Z"+T):(S=J,T=K),k.hasLines(A)&&b.length>1){var c=g.select(this);if(c.datum(d),a)p(c.style("opacity",0).attr("d",J).call(i.lineGroupStyle)).style("opacity",1);else{var e=p(c);e.attr("d",J),i.singleLineStyle(d,e)}}}}}var W=C.selectAll(".js-line").data(U);p(W.exit()).style("opacity",0).remove(),W.each(V(!1)),W.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(i.lineGroupStyle).each(V(!0)),i.setClipUrl(W,c.layerClipId),U.length&&(D?O&&Q&&(F?("y"===F?O[1]=Q[1]=z.c2p(0,!0):"x"===F&&(O[0]=Q[0]=y.c2p(0,!0)),p(D).attr("d","M"+Q+"L"+O+"L"+S.substr(1)).call(i.singleFillStyle)):p(D).attr("d",S+"Z").call(i.singleFillStyle)):"tonext"===A.fill.substr(0,6)&&S&&G&&("tonext"===A.fill?p(E).attr("d",S+"Z"+G+"Z").call(i.singleFillStyle):p(E).attr("d",S+"L"+G.substr(1)+"Z").call(i.singleFillStyle),A._polygons=A._polygons.concat(H)),A._prevRevpath=T,A._prevPolygons=R);var X=C.selectAll(".points");v=X.data([d]),X.each(u),v.enter().append("g").classed("points",!0).each(u),v.exit().remove(),v.each(function(a){var b=a[0].trace.cliponaxis===!1;i.setClipUrl(g.select(this),b?null:c.layerClipId)})}}function f(a,b,c,d,e){var f=c.xaxis,i=c.yaxis,j=g.extent(h.simpleMap(f.range,f.r2c)),l=g.extent(h.simpleMap(i.range,i.r2c)),m=d[0].trace;if(k.hasMarkers(m)){var n=m.marker.maxdisplayed;if(0!==n){var o=d.filter(function(a){return a.x>=j[0]&&a.x<=j[1]&&a.y>=l[0]&&a.y<=l[1]}),p=Math.ceil(o.length/n),q=0;e.forEach(function(a,c){var d=a[0].trace;k.hasMarkers(d)&&d.marker.maxdisplayed>0&&b>c&&q++});var r=Math.round(q*p/3+Math.floor(q/3)*p/7.1);d.forEach(function(a){delete a.vis}),o.forEach(function(a,b){0===Math.round((b+r)%p)&&(a.vis=!0)})}}}var g=a("d3"),h=a("../../lib"),i=a("../../components/drawing"),j=a("../../components/errorbars"),k=a("./subtypes"),l=a("./line_points"),m=a("./link_traces"),n=a("../../lib/polygon").tester;b.exports=function(a,b,c,f,h){var i,j,k,l,n,o=b.plot.select("g.scatterlayer"),p=!f,q=!!f&&f.duration>0;for(k=o.selectAll("g.trace"),l=k.data(c,function(a){return a[0].trace.uid}),l.enter().append("g").attr("class",function(a){return"trace scatter trace"+a[0].trace.uid}).style("stroke-miterlimit",2),m(a,b,c),d(a,o,b),i=0,j={};i<c.length;i++)j[c[i][0].trace.uid]=i;if(o.selectAll("g.trace").sort(function(a,b){var c=j[a[0].trace.uid],d=j[b[0].trace.uid];return c>d?1:-1}),q){h&&(n=h());var r=g.transition().duration(f.duration).ease(f.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()});r.each(function(){o.selectAll("g.trace").each(function(d,g){e(a,g,b,d,c,this,f)})})}else o.selectAll("g.trace").each(function(d,g){e(a,g,b,d,c,this,f)});p&&l.exit().remove(),o.selectAll("path:not([d])").remove()}},{"../../components/drawing":638,"../../components/errorbars":644,"../../lib":738,"../../lib/polygon":750,"./line_points":1068,"./link_traces":1070,"./subtypes":1076,d3:123}],1074:[function(a,b,c){"use strict";var d=a("./subtypes");b.exports=function(a,b){var c,e,f,g,h=a.cd,i=a.xaxis,j=a.yaxis,k=[],l=h[0].trace,m=!d.hasMarkers(l)&&!d.hasText(l);if(m)return[];if(b===!1)for(c=0;c<h.length;c++)h[c].selected=0;else for(c=0;c<h.length;c++)e=h[c],f=i.c2p(e.x),g=j.c2p(e.y),b.contains([f,g])?(k.push({pointNumber:c,x:i.c2d(e.x),y:j.c2d(e.y)}),e.selected=1):e.selected=0;return k}},{"./subtypes":1076}],1075:[function(a,b,c){"use strict";function d(a,b){var c=b?b[0].node3:f.select(a).selectAll("g.trace.scatter");c.style("opacity",function(a){return a[0].trace.opacity}),c.selectAll("g.points").each(function(b){var c=f.select(this),d=b.trace||b[0].trace;e(c,d,a)}),c.selectAll("g.trace path.js-line").call(g.lineGroupStyle),c.selectAll("g.trace path.js-fill").call(g.fillGroupStyle),c.call(h.style)}function e(a,b,c){var d=a.selectAll("path.point"),e=a.selectAll("text");g.pointStyle(d,b,c),g.textPointStyle(e,b,c),g.selectedPointStyle(d,b),g.selectedTextStyle(e,b)}var f=a("d3"),g=a("../../components/drawing"),h=a("../../components/errorbars");b.exports={style:d,stylePoints:e}},{"../../components/drawing":638,"../../components/errorbars":644,d3:123}],1076:[function(a,b,c){"use strict";var d=a("../../lib");b.exports={hasLines:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("lines")},hasMarkers:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("markers")},hasText:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("text")},isBubble:function(a){return d.isPlainObject(a.marker)&&Array.isArray(a.marker.size)}}},{"../../lib":738}],1077:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c,e,f){f=f||{},e("textposition"),d.coerceFont(e,"textfont",c.font),f.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":738}],1078:[function(a,b,c){"use strict";var d=a("../../registry");b.exports=function(a,b,c,e){var f,g=e("x"),h=e("y"),i=d.getComponentMethod("calendars","handleTraceDefaults");if(i(a,b,["x","y"],c),g)h?(f=Math.min(g.length,h.length),f<g.length&&(b.x=g.slice(0,f)),f<h.length&&(b.y=h.slice(0,f))):(f=g.length,e("y0"),e("dy"));else{if(!h)return 0;f=b.y.length,e("x0"),e("dx")}return f}},{"../../registry":861}],1079:[function(a,b,c){"use strict";function d(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var e=a("../scatter/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/errorbars/attributes"),h=a("../../constants/gl3d_dashes"),i=a("../../constants/gl3d_markers"),j=a("../../lib/extend").extendFlat,k=a("../../plot_api/edit_types").overrideAll,l=e.line,m=e.marker,n=m.line,o=b.exports=k({x:e.x,y:e.y,z:{valType:"data_array"},text:j({},e.text,{}),hovertext:j({},e.hovertext,{}),mode:j({},e.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:d("x"),y:d("y"),z:d("z")},connectgaps:e.connectgaps,line:j({width:l.width,dash:{valType:"enumerated",values:Object.keys(h),dflt:"solid"},showscale:{valType:"boolean",dflt:!1}},f("line")),marker:j({symbol:{valType:"enumerated",values:Object.keys(i),dflt:"circle",arrayOk:!0},size:j({},m.size,{dflt:8}),sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:j({},m.opacity,{arrayOk:!1}),showscale:m.showscale,colorbar:m.colorbar,line:j({width:j({},n.width,{arrayOk:!1})},f("marker.line"))},f("marker")),textposition:j({},e.textposition,{dflt:"top center"}),textfont:e.textfont,error_x:g,error_y:g,error_z:g},"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/color_attributes":621,"../../components/errorbars/attributes":640,"../../constants/gl3d_dashes":714,"../../constants/gl3d_markers":715,"../../lib/extend":727,"../../plot_api/edit_types":769,"../scatter/attributes":1054}],1080:[function(a,b,c){"use strict";var d=a("../scatter/arrays_to_calcdata"),e=a("../scatter/colorscale_calc");b.exports=function(a,b){var c=[{x:!1,y:!1,trace:b,t:{}}];return d(c,b),e(b),c}},{"../scatter/arrays_to_calcdata":1053,"../scatter/colorscale_calc":1059}],1081:[function(a,b,c){"use strict";function d(a,b,c){if(!b||!b.visible)return null;for(var d=g(b),e=new Array(a.length),f=0;f<a.length;f++){var h=d(+a[f],f);e[f]=[-h[0]*c,h[1]*c]}return e}function e(a){for(var b=0;b<a.length;b++)if(a[b])return a[b].length;return 0}function f(a,b){var c=[d(a.x,a.error_x,b[0]),d(a.y,a.error_y,b[1]),d(a.z,a.error_z,b[2])],f=e(c);if(0===f)return null;for(var g=new Array(f),h=0;f>h;h++){for(var i=[[0,0,0],[0,0,0]],j=0;3>j;j++)if(c[j])for(var k=0;2>k;k++)i[k][j]=c[j][h][k];g[h]=i}return g}var g=a("../../components/errorbars/compute_error");b.exports=f},{"../../components/errorbars/compute_error":642}],1082:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}function e(a,b,c){var d,e=(c+1)%3,f=(c+2)%3,g=[],h=[];for(d=0;d<a.length;++d){var i=a[d];!isNaN(i[e])&&isFinite(i[e])&&!isNaN(i[f])&&isFinite(i[f])&&(g.push([i[e],i[f]]),h.push(d))}var j=r(g);for(d=0;d<j.length;++d)for(var k=j[d],l=0;l<k.length;++l)k[l]=h[k[l]];return{positions:a,cells:j,meshColor:b}}function f(a){for(var b=[0,0,0],c=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0],e=0;3>e;e++){var f=a[e];f&&f.copy_zstyle!==!1&&(f=a[2]),f&&(b[e]=f.width/2,c[e]=t(f.color),d=f.thickness)}return{capSize:b,color:c,lineWidth:d}}function g(a){var b=[0,0];return Array.isArray(a)?[0,-1]:(a.indexOf("bottom")>=0&&(b[1]+=1),a.indexOf("top")>=0&&(b[1]-=1),a.indexOf("left")>=0&&(b[0]-=1),a.indexOf("right")>=0&&(b[0]+=1),b)}function h(a,b){return b(4*a)}function i(a){return x[a]}function j(a,b,c,d,e){var f=null;if(Array.isArray(a)){f=[];for(var g=0;b>g;g++)void 0===a[g]?f[g]=d:f[g]=c(a[g],e)}else f=c(a,s.identity);return f}function k(a,b){var c,d,e,k,l,m,n=[],o=a.fullSceneLayout,p=a.dataScale,q=o.xaxis,r=o.yaxis,w=o.zaxis,x=b.marker,z=b.line,A=b.x||[],B=b.y||[],C=b.z||[],D=A.length,E=b.xcalendar,F=b.ycalendar,G=b.zcalendar;for(d=0;D>d;d++)e=q.d2l(A[d],0,E)*p[0],k=r.d2l(B[d],0,F)*p[1],l=w.d2l(C[d],0,G)*p[2],n[d]=[e,k,l];if(Array.isArray(b.text))m=b.text;else if(void 0!==b.text)for(m=new Array(D),d=0;D>d;d++)m[d]=b.text;if(c={position:n,mode:b.mode,text:m},"line"in b&&(c.lineColor=u(z,1,D),c.lineWidth=z.width,c.lineDashes=z.dash),"marker"in b){var H=v(b);c.scatterColor=u(x,1,D),c.scatterSize=j(x.size,D,h,20,H),c.scatterMarker=j(x.symbol,D,i,"●"),c.scatterLineWidth=x.line.width,c.scatterLineColor=u(x.line,1,D),c.scatterAngle=0}"textposition"in b&&(c.textOffset=g(b.textposition),c.textColor=u(b.textfont,1,D),c.textSize=j(b.textfont.size,D,s.identity,12),c.textFont=b.textfont.family,c.textAngle=0);var I=["x","y","z"];for(c.project=[!1,!1,!1],c.projectScale=[1,1,1],c.projectOpacity=[1,1,1],d=0;3>d;++d){var J=b.projection[I[d]];(c.project[d]=J.show)&&(c.projectOpacity[d]=J.opacity,c.projectScale[d]=J.scale)}c.errorBounds=y(b,p);var K=f([b.error_x,b.error_y,b.error_z]);return c.errorColor=K.color,c.errorLineWidth=K.lineWidth,c.errorCapSize=K.capSize,c.delaunayAxis=b.surfaceaxis,c.delaunayColor=t(b.surfacecolor),c}function l(a){if(Array.isArray(a)){var b=a[0];return Array.isArray(b)&&(a=b),"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)})+")"}return null}function m(a,b){var c=new d(a,b.uid);return c.update(b),c}var n=a("gl-line3d"),o=a("gl-scatter3d"),p=a("gl-error3d"),q=a("gl-mesh3d"),r=a("delaunay-triangulate"),s=a("../../lib"),t=a("../../lib/str2rgbarray"),u=a("../../lib/gl_format_color"),v=a("../scatter/make_bubble_size_func"),w=a("../../constants/gl3d_dashes"),x=a("../../constants/gl3d_markers"),y=a("./calc_errors"),z=d.prototype;z.handlePick=function(a){if(a.object&&(a.object===this.linePlot||a.object===this.delaunayMesh||a.object===this.textMarkers||a.object===this.scatterPlot)){a.object.highlight&&a.object.highlight(null),this.scatterPlot&&(a.object=this.scatterPlot,this.scatterPlot.highlight(a.data)),this.textLabels?void 0!==this.textLabels[a.data.index]?a.textLabel=this.textLabels[a.data.index]:a.textLabel=this.textLabels:a.textLabel="";var b=a.index=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},z.update=function(a){var b,c,d,f,g=this.scene.glplot.gl,h=w.solid;this.data=a;var i=k(this.scene,a);"mode"in i&&(this.mode=i.mode),"lineDashes"in i&&i.lineDashes in w&&(h=w[i.lineDashes]),this.color=l(i.scatterColor)||l(i.lineColor),this.dataPoints=i.position,b={gl:g,position:i.position,color:i.lineColor,lineWidth:i.lineWidth||1,dashes:h[0],dashScale:h[1],opacity:a.opacity,connectGaps:a.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(b):(this.linePlot=n(b),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=a.opacity;if(a.marker&&a.marker.opacity&&(j*=a.marker.opacity),c={gl:g,position:i.position,color:i.scatterColor,size:i.scatterSize,glyph:i.scatterMarker,opacity:j,orthographic:!0,lineWidth:i.scatterLineWidth,lineColor:i.scatterLineColor,project:i.project,projectScale:i.projectScale,projectOpacity:i.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(c):(this.scatterPlot=o(c),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),f={gl:g,position:i.position,glyph:i.text,color:i.textColor,size:i.textSize,angle:i.textAngle,alignment:i.textOffset,font:i.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:a.opacity},this.textLabels=a.hovertext||a.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(f):(this.textMarkers=o(f),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),d={gl:g,position:i.position,color:i.errorColor,error:i.errorBounds,lineWidth:i.errorLineWidth,capSize:i.errorCapSize,opacity:a.opacity},this.errorBars?i.errorBounds?this.errorBars.update(d):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):i.errorBounds&&(this.errorBars=p(d),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),i.delaunayAxis>=0){var m=e(i.position,i.delaunayColor,i.delaunayAxis);m.opacity=a.opacity,this.delaunayMesh?this.delaunayMesh.update(m):(m.gl=g,this.delaunayMesh=q(m),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},z.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},b.exports=m},{"../../constants/gl3d_dashes":714,"../../constants/gl3d_markers":715,"../../lib":738,"../../lib/gl_format_color":734,"../../lib/str2rgbarray":760,"../scatter/make_bubble_size_func":1071,"./calc_errors":1081,"delaunay-triangulate":124,"gl-error3d":162,"gl-line3d":173,"gl-mesh3d":206,"gl-scatter3d":252}],1083:[function(a,b,c){"use strict";function d(a,b,c,d){var f=0,g=c("x"),h=c("y"),i=c("z"),j=e.getComponentMethod("calendars","handleTraceDefaults");return j(a,b,["x","y","z"],d),g&&h&&i&&(f=Math.min(g.length,h.length,i.length),f<g.length&&(b.x=g.slice(0,f)),f<h.length&&(b.y=h.slice(0,f)),f<i.length&&(b.z=i.slice(0,f))),f}var e=a("../../registry"),f=a("../../lib"),g=a("../scatter/subtypes"),h=a("../scatter/marker_defaults"),i=a("../scatter/line_defaults"),j=a("../scatter/text_defaults"),k=a("../../components/errorbars/defaults"),l=a("./attributes");b.exports=function(a,b,c,e){function m(c,d){return f.coerce(a,b,l,c,d)}var n=d(a,b,m,e);if(!n)return void(b.visible=!1);m("text"),m("hovertext"),m("mode"),g.hasLines(b)&&(m("connectgaps"),i(a,b,c,e,m)),g.hasMarkers(b)&&h(a,b,c,e,m,{noSelect:!0}),g.hasText(b)&&j(a,b,e,m,{noSelect:!0});var o=(b.line||{}).color,p=(b.marker||{}).color;m("surfaceaxis")>=0&&m("surfacecolor",o||p);for(var q=["x","y","z"],r=0;3>r;++r){var s="projection."+q[r];m(s+".show")&&(m(s+".opacity"),m(s+".scale"))}k(a,b,c,{axis:"z"}),k(a,b,c,{axis:"y",inherit:"z"}),k(a,b,c,{axis:"x",inherit:"z"})}},{"../../components/errorbars/defaults":643,"../../lib":738,"../../registry":861,"../scatter/line_defaults":1067,"../scatter/marker_defaults":1072,"../scatter/subtypes":1076,"../scatter/text_defaults":1077,"./attributes":1079}],1084:[function(a,b,c){"use strict";var d={};d.plot=a("./convert"),d.attributes=a("./attributes"),d.markerSymbols=a("../../constants/gl3d_markers"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.moduleType="trace",d.name="scatter3d",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d","symbols","markerColorscale","showLegend"],d.meta={},b.exports=d},{"../../constants/gl3d_markers":715,"../../plots/gl3d":826,"../scatter/colorbar":1058,"./attributes":1079,"./calc":1080,"./convert":1082,"./defaults":1083}],1085:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat,i=d.marker,j=d.line,k=i.line;b.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:h({},d.mode,{dflt:"markers"}),text:h({},d.text,{}),line:{color:j.color,width:j.width,dash:j.dash,shape:h({},j.shape,{values:["linear","spline"]}),smoothing:j.smoothing,editType:"calc"},connectgaps:d.connectgaps,fill:h({},d.fill,{values:["none","toself","tonext"]}),fillcolor:d.fillcolor,marker:h({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:h({width:k.width,editType:"calc"},f("marker".line)),gradient:i.gradient,editType:"calc"},f("marker"),{showscale:i.showscale,colorbar:g}),textfont:d.textfont,textposition:d.textposition,selected:d.selected,unselected:d.unselected,hoverinfo:h({},e.hoverinfo,{flags:["a","b","text","name"]}),hoveron:d.hoveron}},{"../../components/colorbar/attributes":614,"../../components/colorscale/color_attributes":621,"../../lib/extend":727,"../../plots/attributes":783,"../scatter/attributes":1054}],1086:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../scatter/subtypes"),g=a("../scatter/colorscale_calc"),h=a("../scatter/arrays_to_calcdata"),i=a("../scatter/calc_selection"),j=a("../carpet/lookup_carpetid");b.exports=function(a,b){var c=b.carpetTrace=j(a,b);if(c&&c.visible&&"legendonly"!==c.visible){var k;b.xaxis=c.xaxis,b.yaxis=c.yaxis;var l,m,n=b.a.length,o=new Array(n),p=!1;for(k=0;n>k;k++)if(l=b.a[k],m=b.b[k],d(l)&&d(m)){var q=c.ab2xy(+l,+m,!0),r=c.isVisible(+l,+m);r||(p=!0),o[k]={x:q[0],y:q[1],a:l,b:m,vis:r}}else o[k]={x:!1,y:!1};b._needsCull=p,o[0].carpet=c,o[0].trace=b;var s,t;if(f.hasMarkers(b)&&(s=b.marker,t=s.size,Array.isArray(t))){var u={type:"linear"};e.setConvert(u),t=u.makeCalcdata(b.marker,"size"),t.length>n&&t.splice(n,t.length-n)}return g(b),h(o,b),i(o,b),o}}},{"../../plots/cartesian/axes":785,"../carpet/lookup_carpetid":919,"../scatter/arrays_to_calcdata":1053,"../scatter/calc_selection":1056,"../scatter/colorscale_calc":1059,"../scatter/subtypes":1076,"fast-isnumeric":132}],1087:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/line_shape_defaults"),j=a("../scatter/text_defaults"),k=a("../scatter/fillcolor_defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}n("carpet"),b.xaxis="x",b.yaxis="y";var o,p=n("a"),q=n("b");if(o=Math.min(p.length,q.length),!o)return void(b.visible=!1);p&&o<p.length&&(b.a=p.slice(0,o)),q&&o<q.length&&(b.b=q.slice(0,o)),n("text");var r=o<e.PTS_LINESONLY?"lines+markers":"lines";n("mode",r),f.hasLines(b)&&(h(a,b,c,m,n),i(a,b,n),n("connectgaps")),f.hasMarkers(b)&&g(a,b,c,m,n,{gradient:!0}),f.hasText(b)&&j(a,b,m,n);var s=[];(f.hasMarkers(b)||f.hasText(b))&&(n("marker.maxdisplayed"),s.push("points")),n("fill"),"none"!==b.fill&&(k(a,b,c,n),f.hasLines(b)||i(a,b,n)),("tonext"===b.fill||"toself"===b.fill)&&s.push("fills"),n("hoveron",s.join("+")||"points"),d.coerceSelectionMarkerOpacity(b,n)}},{"../../lib":738,"../scatter/constants":1060,"../scatter/fillcolor_defaults":1063,"../scatter/line_defaults":1067,"../scatter/line_shape_defaults":1069,"../scatter/marker_defaults":1072,"../scatter/subtypes":1076,"../scatter/text_defaults":1077,"./attributes":1085}],1088:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=d[e];return a.a=f.a,a.b=f.b,a}},{}],1089:[function(a,b,c){"use strict";var d=a("../scatter/hover");b.exports=function(a,b,c,e){function f(a,b){var c;c=a.labelprefix&&a.labelprefix.length>0?a.labelprefix.replace(/ = $/,""):a._hovertitle,r.push(c+": "+b.toFixed(3)+a.labelsuffix)}var g=d(a,b,c,e);if(g&&g[0].index!==!1){var h=g[0];if(void 0===h.index){var i=1-h.y0/a.ya._length,j=a.xa._length,k=j*i/2,l=j-k;return h.x0=Math.max(Math.min(h.x0,l),k),h.x1=Math.max(Math.min(h.x1,l),k),g}var m=h.cd[h.index];h.a=m.a,h.b=m.b,h.xLabelVal=void 0,h.yLabelVal=void 0;var n=h.trace,o=n._carpet,p=m.hi||n.hoverinfo,q=p.split("+"),r=[];-1!==q.indexOf("all")&&(q=["a","b"]),-1!==q.indexOf("a")&&f(o.aaxis,m.a),-1!==q.indexOf("b")&&f(o.baxis,m.b);var s=o.ab2ij([m.a,m.b]),t=Math.floor(s[0]),u=s[0]-t,v=Math.floor(s[1]),w=s[1]-v,x=o.evalxy([],t,v,u,w);return r.push("y: "+x[1].toFixed(3)),h.extraText=r.join("<br>"),g}}},{"../scatter/hover":1065}],1090:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.selectPoints=a("../scatter/select"),d.eventData=a("./event_data"),d.moduleType="trace",d.name="scattercarpet",d.basePlotModule=a("../../plots/cartesian"),d.categories=["carpet","symbols","markerColorscale","showLegend","carpetDependent"],d.meta={},b.exports=d},{"../../plots/cartesian":796,"../scatter/colorbar":1058,"../scatter/select":1074,"./attributes":1085,"./calc":1086,"./defaults":1087,"./event_data":1088,"./hover":1089,"./plot":1091,"./style":1092}],1091:[function(a,b,c){"use strict";var d=a("../scatter/plot"),e=a("../../plots/cartesian/axes"),f=a("../../components/drawing");b.exports=function(a,b,c){var g,h,i,j=c[0][0].carpet,k={xaxis:e.getFromId(a,j.xaxis||"x"),yaxis:e.getFromId(a,j.yaxis||"y"),plot:b.plot};for(d(a,k,c),g=0;g<c.length;g++)h=c[g][0].trace,i=k.plot.selectAll("g.trace"+h.uid+" .js-line"),f.setClipUrl(i,j._clipPathId)}},{"../../components/drawing":638,"../../plots/cartesian/axes":785,"../scatter/plot":1073}],1092:[function(a,b,c){"use strict";var d=a("../scatter/style").style;b.exports=function(a,b){if(!b)for(var c=a._fullLayout._modules,e=0;e<c.length;e++)if("scatter"===c[e].name)return;d(a,b)}},{"../scatter/style":1075}],1093:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/drawing/attributes").dash,h=a("../../lib/extend").extendFlat,i=a("../../plot_api/edit_types").overrideAll,j=d.marker,k=d.line,l=j.line;b.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:h({},d.mode,{dflt:"markers"}),text:h({},d.text,{}),hovertext:h({},d.hovertext,{}),textfont:d.textfont,textposition:d.textposition,line:{color:k.color,width:k.width,dash:g},connectgaps:d.connectgaps,marker:h({symbol:j.symbol,opacity:j.opacity,size:j.size,sizeref:j.sizeref,sizemin:j.sizemin,sizemode:j.sizemode,showscale:j.showscale,colorbar:j.colorbar,line:h({width:l.width},f("marker.line")),gradient:j.gradient},f("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:d.fillcolor,selected:d.selected,unselected:d.unselected,hoverinfo:h({},e.hoverinfo,{flags:["lon","lat","location","text","name"]})},"calc","nested")},{"../../components/colorscale/color_attributes":621,"../../components/drawing/attributes":637,"../../lib/extend":727,"../../plot_api/edit_types":769,"../../plots/attributes":783,"../scatter/attributes":1054}],1094:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../constants/numerical").BADNUM,f=a("../scatter/colorscale_calc"),g=a("../scatter/arrays_to_calcdata"),h=a("../scatter/calc_selection"),i=a("../../lib")._;b.exports=function(a,b){for(var c=Array.isArray(b.locations),j=c?b.locations.length:b.lon.length,k=new Array(j),l=0;j>l;l++){var m=k[l]={};if(c){var n=b.locations[l];m.loc="string"==typeof n?n:null}else{var o=b.lon[l],p=b.lat[l];d(o)&&d(p)?m.lonlat=[+o,+p]:m.lonlat=[e,e]}}return g(k,b),f(b),h(k,b),j&&(k[0].t={labels:{lat:i(a,"lat:")+" ",lon:i(a,"lon:")+" "}}),k}},{"../../constants/numerical":717,"../../lib":738,"../scatter/arrays_to_calcdata":1053,"../scatter/calc_selection":1056,"../scatter/colorscale_calc":1059,"fast-isnumeric":132}],1095:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=0,g=c("locations");return g?(c("locationmode"),f=g.length):(d=c("lon")||[],e=c("lat")||[],f=Math.min(d.length,e.length),f<d.length&&(b.lon=d.slice(0,f)),f<e.length&&(b.lat=e.slice(0,f)),f)}var e=a("../../lib"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/text_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("./attributes");b.exports=function(a,b,c,l){function m(c,d){return e.coerce(a,b,k,c,d)}var n=d(a,b,m);return n?(m("text"),m("hovertext"),m("mode"),f.hasLines(b)&&(h(a,b,c,l,m),m("connectgaps")),f.hasMarkers(b)&&g(a,b,c,l,m,{gradient:!0}),f.hasText(b)&&i(a,b,l,m),m("fill"),void("none"!==b.fill&&j(a,b,c,m))):void(b.visible=!1)}},{"../../lib":738,"../scatter/fillcolor_defaults":1063,"../scatter/line_defaults":1067,"../scatter/marker_defaults":1072,"../scatter/subtypes":1076,"../scatter/text_defaults":1077,"./attributes":1093}],1096:[function(a,b,c){"use strict";b.exports=function(a,b){return a.lon=b.lon,a.lat=b.lat,a.location=b.loc?b.loc:null,a}},{}],1097:[function(a,b,c){"use strict";function d(a,b,c,d){function e(a){return f.tickText(c,c.c2l(a),"hover").text+"°"}var g=b.hi||a.hoverinfo,h="all"===g?j.hoverinfo.flags:g.split("+"),k=-1!==h.indexOf("location")&&Array.isArray(a.locations),l=-1!==h.indexOf("lon"),m=-1!==h.indexOf("lat"),n=-1!==h.indexOf("text"),o=[];return k?o.push(b.loc):l&&m?o.push("("+e(b.lonlat[0])+", "+e(b.lonlat[1])+")"):l?o.push(d.lon+e(b.lonlat[0])):m&&o.push(d.lat+e(b.lonlat[1])),n&&i(b,a,o),o.join("<br>")}var e=a("../../components/fx"),f=a("../../plots/cartesian/axes"),g=a("../../constants/numerical").BADNUM,h=a("../scatter/get_trace_color"),i=a("../scatter/fill_hover_text"),j=a("./attributes");b.exports=function(a,b,c){function f(a){var d=a.lonlat;if(d[0]===g)return 1/0;if(n(d))return 1/0;var e=o(d),f=o([b,c]),h=Math.abs(e[0]-f[0]),i=Math.abs(e[1]-f[1]),j=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(h*h+i*i)-j,1-3/j)}var i=a.cd,j=i[0].trace,k=a.xa,l=a.ya,m=a.subplot,n=m.projection.isLonLatOverEdges,o=m.project;if(e.getClosest(i,f,a),a.index!==!1){var p=i[a.index],q=p.lonlat,r=[k.c2p(q),l.c2p(q)],s=p.mrc||1;return a.x0=r[0]-s,a.x1=r[0]+s,a.y0=r[1]-s,a.y1=r[1]+s,a.loc=p.loc,a.lon=q[0],a.lat=q[1],a.color=h(j,p),a.extraText=d(j,p,m.mockAxis,i[0].t.labels),[a]}}},{"../../components/fx":655,"../../constants/numerical":717,"../../plots/cartesian/axes":785,"../scatter/fill_hover_text":1062,"../scatter/get_trace_color":1064,"./attributes":1093}],1098:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="scattergeo",d.basePlotModule=a("../../plots/geo"),d.categories=["geo","symbols","markerColorscale","showLegend","scatter-like"],d.meta={},b.exports=d},{"../../plots/geo":814,"../scatter/colorbar":1058,"./attributes":1093,"./calc":1094,"./defaults":1095,"./event_data":1096,"./hover":1097,"./plot":1099,"./select":1100,"./style":1101}],1099:[function(a,b,c){"use strict";function d(a,b){var c=a[0].trace;if(Array.isArray(c.locations))for(var d=h(c,b),e=c.locationmode,f=0;f<a.length;f++){var j=a[f],k=i(e,j.loc,d);j.lonlat=k?k.properties.ct:[g,g]}}var e=a("d3"),f=a("../../lib"),g=a("../../constants/numerical").BADNUM,h=a("../../lib/topojson_utils").getTopojsonFeatures,i=a("../../lib/geo_location_utils").locationToFeature,j=a("../../lib/geojson_utils"),k=a("../scatter/subtypes"),l=a("./style");b.exports=function(a,b){function c(a){return a[0].trace.uid}function h(a,b){a.lonlat[0]===g&&e.select(b).remove()}for(var i=0;i<b.length;i++)d(b[i],a.topojson);var m=a.layers.frontplot.select(".scatterlayer").selectAll("g.trace.scattergeo").data(b,c);m.enter().append("g").attr("class","trace scattergeo"),m.exit().remove(),m.selectAll("*").remove(),m.each(function(b){var c=b[0].node3=e.select(this),d=b[0].trace;if(k.hasLines(d)||"none"!==d.fill){var g=j.calcTraceToLineCoords(b),i="none"!==d.fill?j.makePolygon(g):j.makeLine(g);c.selectAll("path.js-line").data([{geojson:i,trace:d}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}k.hasMarkers(d)&&c.selectAll("path.point").data(f.identity).enter().append("path").classed("point",!0).each(function(a){h(a,this)}),k.hasText(d)&&c.selectAll("g").data(f.identity).enter().append("g").append("text").each(function(a){h(a,this)}),l(a.graphDiv,b)})}},{"../../constants/numerical":717,"../../lib":738,"../../lib/geo_location_utils":730,"../../lib/geojson_utils":731,"../../lib/topojson_utils":764,"../scatter/subtypes":1076,"./style":1101,d3:123}],1100:[function(a,b,c){"use strict";var d=a("../scatter/subtypes");b.exports=function(a,b){var c,e,f,g,h,i=a.cd,j=a.xaxis,k=a.yaxis,l=[],m=i[0].trace,n=!d.hasMarkers(m)&&!d.hasText(m);if(n)return[];if(b===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)c=i[h],e=c.lonlat,f=j.c2p(e),g=k.c2p(e),b.contains([f,g])?(l.push({pointNumber:h,lon:e[0],lat:e[1]}),c.selected=1):c.selected=0;return l}},{"../scatter/subtypes":1076}],1101:[function(a,b,c){"use strict";function d(a,b){var c=b[0].trace,d=b[0].node3;d.style("opacity",b[0].trace.opacity),h(d,c,a),d.selectAll("path.js-line").style("fill","none").each(function(a){var b=e.select(this),c=a.trace,d=c.line||{};b.call(g.stroke,d.color).call(f.dashLine,d.dash||"",d.width||0),"none"!==c.fill&&b.call(g.fill,c.fillcolor)})}var e=a("d3"),f=a("../../components/drawing"),g=a("../../components/color"),h=a("../scatter/style").stylePoints;b.exports=function(a,b){b&&d(a,b)}},{"../../components/color":613,"../../components/drawing":638,"../scatter/style":1075,d3:123}],1102:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/color_attributes"),f=a("../../constants/gl2d_dashes"),g=a("../../constants/gl2d_markers"),h=a("../../lib/extend").extendFlat,i=a("../../plot_api/edit_types").overrideAll,j=d.line,k=d.marker,l=k.line,m=b.exports=i({x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:h({},d.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:j.color,width:j.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},marker:h({},e("marker"),{symbol:{valType:"enumerated",values:Object.keys(g),dflt:"circle",arrayOk:!0},size:k.size,sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,opacity:k.opacity,showscale:k.showscale,colorbar:k.colorbar,line:h({},e("marker.line"),{width:l.width})}),connectgaps:d.connectgaps,fill:h({},d.fill,{values:["none","tozeroy","tozerox"]}),fillcolor:d.fillcolor,error_y:d.error_y,error_x:d.error_x},"calc","nested");m.x.editType=m.y.editType=m.x0.editType=m.y0.editType="calc+clearAxisTypes"},{"../../components/colorscale/color_attributes":621,"../../constants/gl2d_dashes":712,"../../constants/gl2d_markers":713,"../../lib/extend":727,"../../plot_api/edit_types":769,
"../scatter/attributes":1054}],1103:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../scatter/arrays_to_calcdata"),f=a("../scatter/colorscale_calc");b.exports=function(a,b){var c,g=a._fullLayout.dragmode;if("lasso"===g||"select"===g){var h,i=d.getFromId(a,b.xaxis||"x"),j=d.getFromId(a,b.yaxis||"y"),k=i.makeCalcdata(b,"x"),l=j.makeCalcdata(b,"y"),m=Math.min(k.length,l.length);for(c=new Array(m),h=0;m>h;h++)c[h]={x:k[h],y:l[h]}}else c=[{x:!1,y:!1,trace:b,t:{}}],e(c,b);return f(b),c}},{"../../plots/cartesian/axes":785,"../scatter/arrays_to_calcdata":1053,"../scatter/colorscale_calc":1059}],1104:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.type="scattergl",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.connectgaps=!0,this.index=null,this.idToIndex=[],this.bounds=[0,0,0,0],this.isVisible=!1,this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=!1,this.line=this.initObject(p,{positions:new Float64Array(0),color:[0,0,0,1],width:1,fill:[!1,!1,!1,!1],fillColor:[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],dashes:[1]},0),this.errorX=this.initObject(q,{positions:new Float64Array(0),errors:new Float64Array(0),lineWidth:1,capSize:0,color:[0,0,0,1]},1),this.errorY=this.initObject(q,{positions:new Float64Array(0),errors:new Float64Array(0),lineWidth:1,capSize:0,color:[0,0,0,1]},2);var c={positions:new Float64Array(0),sizes:[],colors:[],glyphs:[],borderWidths:[],borderColors:[],size:12,color:[0,0,0,1],borderSize:1,borderColor:[0,0,0,1],snapPoints:!0},d=s.extendFlat({},c,{snapPoints:!1});this.scatter=this.initObject(n,c,3),this.fancyScatter=this.initObject(o,c,4),this.selectScatter=this.initObject(n,d,5)}function e(a,b,c){return Array.isArray(b)||(b=[b]),f(a,b,c)}function f(a,b,c){for(var d=new Array(c),e=b[0],f=0;c>f;++f)d[f]=a(f>=b.length?e:b[f]);return d}function g(a,b,c){return i(J(a,c),I(b,c),c)}function h(a,b,c,d){var e=y(a,b,d);return e=Array.isArray(e[0])?e:f(s.identity,[e],d),i(e,I(c,d),d)}function i(a,b,c){for(var d=new Array(4*c),e=0;c>e;++e){for(var f=0;3>f;++f)d[4*e+f]=a[e][f];d[4*e+3]=a[e][3]*b[e]}return d}function j(a){return""===a.split("-open")[1]}function k(a,b,c,d,e){var f,g=e?E:1;for(f=0;3>f;f++)a[4*c+f]=b[4*d+f];a[4*c+f]=g*b[4*d+f]}function l(a){for(var b,c=a.length,d=Math.max(1,(c-1)/Math.min(Math.max(c,1),1e3)),e=0;c>e;e+=d)if(b=a[Math.floor(e)],!(r(b)||b instanceof Date))return!1;return!0}function m(a,b,c){var e=new d(a,b.uid);return e.update(b,c),e}var n=a("gl-scatter2d"),o=a("gl-scatter2d-sdf"),p=a("gl-line2d"),q=a("gl-error2d"),r=a("fast-isnumeric"),s=a("../../lib"),t=a("../../plots/cartesian/axes"),u=a("../../plots/cartesian/axis_autotype"),v=a("../../components/errorbars"),w=a("../../lib/str2rgbarray"),x=a("../../lib/typed_array_truncate"),y=a("../../lib/gl_format_color"),z=a("../scatter/subtypes"),A=a("../scatter/make_bubble_size_func"),B=a("../scatter/get_trace_color"),C=a("../../constants/gl2d_markers"),D=a("../../constants/gl2d_dashes"),E=a("../../constants/interactions").DESELECTDIM,F=["xaxis","yaxis"],G=[0,0,0,0],H=d.prototype;H.initObject=function(a,b,c){function d(){j||(j=a(h,b),j._trace=g,j._index=c),j.update(b)}function e(){j&&j.update(i)}function f(){j&&j.dispose()}var g=this,h=g.scene.glplot,i=s.extendFlat({},b),j=null;return{options:b,update:d,clear:e,dispose:f}},H.handlePick=function(a){var b=a.pointId;(a.object!==this.line||this.connectgaps)&&(b=this.idToIndex[a.pointId]);var c=this.pickXData[b];return{trace:this,dataCoord:a.dataCoord,traceCoord:[r(c)||!s.isDateTime(c)?c:s.dateTime2ms(c),this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:Array.isArray(this.color)?this.color[b]:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}},H.isFancy=function(a){if("linear"!==this.scene.xaxis.type&&"date"!==this.scene.xaxis.type)return!0;if("linear"!==this.scene.yaxis.type)return!0;if(!a.x||!a.y)return!0;if(this.hasMarkers){var b=a.marker||{};if(Array.isArray(b.symbol)||"circle"!==b.symbol||Array.isArray(b.size)||Array.isArray(b.color)||Array.isArray(b.line.width)||Array.isArray(b.line.color)||Array.isArray(b.opacity))return!0}return this.hasLines&&!this.connectgaps?!0:this.hasErrorX?!0:this.hasErrorY?!0:!1};var I=e.bind(null,function(a){return+a}),J=e.bind(null,w),K=e.bind(null,function(a){return C[a]?a:"circle"});H.update=function(a,b){a.visible!==!0?(this.isVisible=!1,this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=!1):(this.isVisible=!0,this.hasLines=z.hasLines(a),this.hasErrorX=a.error_x.visible===!0,this.hasErrorY=a.error_y.visible===!0,this.hasMarkers=z.hasMarkers(a)),this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.connectgaps=!!a.connectgaps,this.isVisible?this.isFancy(a)?this.updateFancy(a):this.updateFast(a):(this.line.clear(),this.errorX.clear(),this.errorY.clear(),this.scatter.clear(),this.fancyScatter.clear()),this.scene.glplot.objects.sort(function(a,b){return a._index-b._index}),this.index=a.index,this.color=B(a,{}),b&&b[0]&&!b[0]._glTrace&&(b[0]._glTrace=this)},H.updateFast=function(a){var b,c,d,e,f,g=this.xData=this.pickXData=a.x,h=this.yData=this.pickYData=a.y,i=g.length,j=new Array(i),k=new Float64Array(2*i),m=this.bounds,n=0,o=0,p=a.selection,q=a.xcalendar,t=l(g),v=!t&&"date"===u(g,q);if(t||v)for(b=0;i>b;++b)e=g[b],f=h[b],r(f)&&(t||(e=s.dateTime2ms(e,q)),k[o++]=e,k[o++]=f,j[n++]=b,m[0]=Math.min(m[0],e),m[1]=Math.min(m[1],f),m[2]=Math.max(m[2],e),m[3]=Math.max(m[3],f));if(k=x(k,o),this.idToIndex=j,p&&p.length)for(c=new Float64Array(2*p.length),b=0,d=p.length;d>b;b++)c[2*b+0]=p[b].x,c[2*b+1]=p[b].y;this.updateLines(a,k),this.updateError("X",a),this.updateError("Y",a);var y;if(this.hasMarkers){var z,A,B;c?(this.scatter.options.positions=null,z=w(a.marker.color),A=w(a.marker.line.color),B=a.opacity*a.marker.opacity*E,z[3]*=B,this.scatter.options.color=z,A[3]*=B,this.scatter.options.borderColor=A,y=a.marker.size,this.scatter.options.size=y,this.scatter.options.borderSize=a.marker.line.width,this.scatter.update(),this.scatter.options.positions=k,this.selectScatter.options.positions=c,z=w(a.marker.color),A=w(a.marker.line.color),B=a.opacity*a.marker.opacity,z[3]*=B,this.selectScatter.options.color=z,A[3]*=B,this.selectScatter.options.borderColor=A,y=a.marker.size,this.selectScatter.options.size=y,this.selectScatter.options.borderSize=a.marker.line.width,this.selectScatter.update()):(this.scatter.options.positions=k,z=w(a.marker.color),A=w(a.marker.line.color),B=a.opacity*a.marker.opacity,z[3]*=B,this.scatter.options.color=z,A[3]*=B,this.scatter.options.borderColor=A,y=a.marker.size,this.scatter.options.size=y,this.scatter.options.borderSize=a.marker.line.width,this.scatter.update())}else this.scatter.clear();this.fancyScatter.clear(),this.expandAxesFast(m,y)},H.updateFancy=function(a){var b=this.scene,c=b.xaxis,d=b.yaxis,f=this.bounds,g=a.selection,i=this.pickXData=c.makeCalcdata(a,"x").slice(),l=this.pickYData=d.makeCalcdata(a,"y").slice();this.xData=i.slice(),this.yData=l.slice();var m,n,o,p,q,r,s,t=v.calcFromTrace(a,b.fullLayout),u=i.length,w=new Array(u),y=new Float64Array(2*u),z=new Float64Array(4*u),B=new Float64Array(4*u),D=0,E=0,F=0,H=0,J="log"===c.type?c.d2l:function(a){return a},L="log"===d.type?d.d2l:function(a){return a};for(m=0;u>m;++m)this.xData[m]=n=J(i[m]),this.yData[m]=o=L(l[m]),isNaN(n)||isNaN(o)||(w[D++]=m,y[E++]=n,y[E++]=o,p=z[F++]=n-t[m].xs||0,q=z[F++]=t[m].xh-n||0,z[F++]=0,z[F++]=0,B[H++]=0,B[H++]=0,r=B[H++]=o-t[m].ys||0,s=B[H++]=t[m].yh-o||0,f[0]=Math.min(f[0],n-p),f[1]=Math.min(f[1],o-r),f[2]=Math.max(f[2],n+q),f[3]=Math.max(f[3],o+s));y=x(y,E),this.idToIndex=w,this.updateLines(a,y),this.updateError("X",a,y,z),this.updateError("Y",a,y,B);var M,N;if(g&&g.length)for(N={},m=0;m<g.length;m++)N[g[m].pointNumber]=!0;if(this.hasMarkers){this.scatter.options.positions=y,this.scatter.options.sizes=new Array(D),this.scatter.options.glyphs=new Array(D),this.scatter.options.borderWidths=new Array(D),this.scatter.options.colors=new Array(4*D),this.scatter.options.borderColors=new Array(4*D);var O,P,Q,R,S,T,U,V,W,X,Y=A(a),Z=a.marker,$=Z.opacity,_=a.opacity,aa=K(Z.symbol,u),ba=h(Z,$,_,u),ca=I(Z.line.width,u),da=h(Z.line,$,_,u);for(M=e(Y,Z.size,u),m=0;D>m;++m)O=w[m],Q=aa[O],R=C[Q],S=j(Q),T=N&&!N[O],U=R.noBorder&&!S?da:ba,V=S?ba:da,P=M[O],W=ca[O],X=R.noBorder||R.noFill?.1*P:0,this.scatter.options.sizes[m]=4*P,this.scatter.options.glyphs[m]=R.unicode,this.scatter.options.borderWidths[m]=.5*(W>X?W-X:0),!S||R.noBorder||R.noFill?k(this.scatter.options.colors,U,m,O,T):k(this.scatter.options.colors,G,m,0),k(this.scatter.options.borderColors,V,m,O,T);N?(this.scatter.options.positions=null,this.fancyScatter.update(),this.scatter.options.positions=y):this.fancyScatter.update()}else this.fancyScatter.clear();this.scatter.clear(),this.expandAxesFancy(i,l,M)},H.updateLines=function(a,b){var c;if(this.hasLines){var d=b;if(!a.connectgaps){var e=0,f=this.xData,h=this.yData;for(d=new Float64Array(2*f.length),c=0;c<f.length;++c)d[e++]=f[c],d[e++]=h[c]}this.line.options.positions=d;var i=g(a.line.color,a.opacity,1),j=Math.round(.5*this.line.options.width),k=(D[a.line.dash]||[1]).slice();for(c=0;c<k.length;++c)k[c]*=j;switch(a.fill){case"tozeroy":this.line.options.fill=[!1,!0,!1,!1];break;case"tozerox":this.line.options.fill=[!0,!1,!1,!1];break;default:this.line.options.fill=[!1,!1,!1,!1]}var l=w(a.fillcolor);this.line.options.color=i,this.line.options.width=2*a.line.width,this.line.options.dashes=k,this.line.options.fillColor=[l,l,l,l],this.line.update()}else this.line.clear()},H.updateError=function(a,b,c,d){var e=this["error"+a],f=b["error_"+a.toLowerCase()];"x"===a.toLowerCase()&&f.copy_ystyle&&(f=b.error_y),this["hasError"+a]?(e.options.positions=c,e.options.errors=d,e.options.capSize=f.width,e.options.lineWidth=f.thickness/2,e.options.color=g(f.color,1,1),e.update()):e.clear()},H.expandAxesFast=function(a,b){for(var c,d,e,f=b||10,g=0;2>g;g++)c=this.scene[F[g]],d=c._min,d||(d=[]),d.push({val:a[g],pad:f}),e=c._max,e||(e=[]),e.push({val:a[g+2],pad:f})},H.expandAxesFancy=function(a,b,c){var d=this.scene,e={padded:!0,ppad:c};t.expand(d.xaxis,a,e),t.expand(d.yaxis,b,e)},H.dispose=function(){this.line.dispose(),this.errorX.dispose(),this.errorY.dispose(),this.scatter.dispose(),this.fancyScatter.dispose()},b.exports=m},{"../../components/errorbars":644,"../../constants/gl2d_dashes":712,"../../constants/gl2d_markers":713,"../../constants/interactions":716,"../../lib":738,"../../lib/gl_format_color":734,"../../lib/str2rgbarray":760,"../../lib/typed_array_truncate":765,"../../plots/cartesian/axes":785,"../../plots/cartesian/axis_autotype":786,"../scatter/get_trace_color":1064,"../scatter/make_bubble_size_func":1071,"../scatter/subtypes":1076,"fast-isnumeric":132,"gl-error2d":160,"gl-line2d":171,"gl-scatter2d":249,"gl-scatter2d-sdf":244}],1105:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/xy_defaults"),h=a("../scatter/marker_defaults"),i=a("../scatter/line_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("../../components/errorbars/defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}var o=g(a,b,m,n);return o?(n("text"),n("mode",o<e.PTS_LINESONLY?"lines+markers":"lines"),f.hasLines(b)&&(n("connectgaps"),i(a,b,c,m,n)),f.hasMarkers(b)&&h(a,b,c,m,n,{noSelect:!0}),n("fill"),"none"!==b.fill&&j(a,b,c,n),k(a,b,c,{axis:"y"}),void k(a,b,c,{axis:"x",inherit:"y"})):void(b.visible=!1)}},{"../../components/errorbars/defaults":643,"../../lib":738,"../scatter/constants":1060,"../scatter/fillcolor_defaults":1063,"../scatter/line_defaults":1067,"../scatter/marker_defaults":1072,"../scatter/subtypes":1076,"../scatter/xy_defaults":1078,"./attributes":1102}],1106:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.hoverPoints=a("../scatter/hover"),d.calc=a("./calc"),d.plot=a("./convert"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="scattergl",d.basePlotModule=a("../../plots/gl2d"),d.categories=["gl","gl2d","symbols","errorBarsOK","markerColorscale","showLegend","scatter-like"],d.meta={},b.exports=d},{"../../plots/gl2d":823,"../scatter/colorbar":1058,"../scatter/hover":1065,"./attributes":1102,"./calc":1103,"./convert":1104,"./defaults":1105,"./select":1107}],1107:[function(a,b,c){"use strict";var d=a("../scatter/subtypes");b.exports=function(a,b){var c,e,f,g,h=a.cd,i=a.xaxis,j=a.yaxis,k=[],l=h[0].trace,m=h[0]._glTrace;if(m){var n=m.scene,o=!d.hasMarkers(l)&&!d.hasText(l);if(o)return[];if(b===!1)for(c=0;c<h.length;c++)h[c].dim=0;else for(c=0;c<h.length;c++)e=h[c],f=i.c2p(e.x),g=j.c2p(e.y),b.contains([f,g])?(k.push({pointNumber:c,x:i.c2d(e.x),y:j.c2d(e.y)}),e.dim=0):e.dim=1;return l.selection=k,m.update(l,h),n.glplot.setDirty(),k}}},{"../scatter/subtypes":1076}],1108:[function(a,b,c){"use strict";var d=a("../scattergeo/attributes"),e=a("../scatter/attributes"),f=a("../../plots/mapbox/layout_attributes"),g=a("../../plots/attributes"),h=a("../../components/colorbar/attributes"),i=a("../../lib/extend").extendFlat,j=a("../../plot_api/edit_types").overrideAll,k=d.line,l=d.marker;b.exports=j({lon:d.lon,lat:d.lat,mode:i({},e.mode,{dflt:"markers"}),text:i({},e.text,{}),hovertext:i({},e.hovertext,{}),line:{color:k.color,width:k.width},connectgaps:e.connectgaps,marker:{symbol:{valType:"string",dflt:"circle",arrayOk:!0},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,color:l.color,colorscale:l.colorscale,cauto:l.cauto,cmax:l.cmax,cmin:l.cmin,autocolorscale:l.autocolorscale,reversescale:l.reversescale,showscale:l.showscale,colorbar:h},fill:d.fill,fillcolor:e.fillcolor,textfont:f.layers.symbol.textfont,textposition:f.layers.symbol.textposition,selected:{marker:{opacity:e.selected.marker.opacity}},unselected:{marker:{opacity:e.unselected.marker.opacity}},hoverinfo:i({},g.hoverinfo,{flags:["lon","lat","text","name"]})},"calc","nested")},{"../../components/colorbar/attributes":614,"../../lib/extend":727,"../../plot_api/edit_types":769,"../../plots/attributes":783,"../../plots/mapbox/layout_attributes":842,"../scatter/attributes":1054,"../scattergeo/attributes":1093}],1109:[function(a,b,c){"use strict";function d(){return{geojson:q.makeBlank(),layout:{visibility:"none"},paint:{}}}function e(a,b){function c(a,c,d,e){void 0===b[c][d]&&(b[c][d]=e),a[c]=b[c][d]}var d,e=a[0].trace,f=e.marker;r.hasColorscale(e,"marker")?d=r.makeColorScaleFunc(r.extractScale(f.colorscale,f.cmin,f.cmax)):Array.isArray(f.color)&&(d=o.identity);var g;t.isBubble(e)&&(g=s(e));var h;h=e.selectedpoints?function(a,b){return e.opacity*b*(a.selected?1:v)}:function(a,b){return e.opacity*b};var i;Array.isArray(f.opacity)?i=function(a){var b=n(a.mo)?+o.constrain(a.mo,0,1):0;return h(a,b)}:e.selectedpoints&&(i=function(a){return h(a,f.opacity)});for(var j=[],k=0;k<a.length;k++){var l=a[k],p=l.lonlat;if(!m(p)){var q={};if(d){var u=l.mcc=d(l.mc);c(q,w,u,k)}g&&c(q,x,g(l.ms),k),i&&c(q,y,i(l),k),j.push({type:"Feature",geometry:{type:"Point",coordinates:p},properties:q})}}return{type:"FeatureCollection",features:j}}function f(a){for(var b=a[0].trace,c=b.marker||{},d=c.symbol,e=b.text,f="circle"!==d?j(d):k,g=t.hasText(b)?j(e):k,h=[],i=0;i<a.length;i++){var l=a[i];m(l.lonlat)||h.push({type:"Feature",geometry:{type:"Point",coordinates:l.lonlat},properties:{symbol:f(l.mx),text:g(l.tx)}})}return{type:"FeatureCollection",features:h}}function g(a,b){var c,d=a.marker;if(Array.isArray(d.color)){for(var e=Object.keys(b[w]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[w][h],h])}c={property:w,stops:f}}else c=d.color;return c}function h(a,b){var c,d=a.marker;if(Array.isArray(d.size)){for(var e=Object.keys(b[x]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[x][h],+h])}c={property:x,stops:f.sort(l)}}else c=d.size/2;return c}function i(a,b){var c,d=a.marker;if(Array.isArray(d.opacity)||a.selectedpoints){for(var e=Object.keys(b[y]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[y][h],+h])}c={property:y,stops:f.sort(l)}}else c=a.opacity*d.opacity;return c}function j(a){return Array.isArray(a)?function(a){return a}:a?function(){return a}:k}function k(){return""}function l(a,b){return a[0]-b[0]}function m(a){return a[0]===p}var n=a("fast-isnumeric"),o=a("../../lib"),p=a("../../constants/numerical").BADNUM,q=a("../../lib/geojson_utils"),r=a("../../components/colorscale"),s=a("../scatter/make_bubble_size_func"),t=a("../scatter/subtypes"),u=a("../../plots/mapbox/convert_text_opts"),v=a("../../constants/interactions").DESELECTDIM,w="circle-color",x="circle-radius",y="circle-opacity";b.exports=function(a){var b=a[0].trace,c=b.visible===!0,j="none"!==b.fill,k=t.hasLines(b),l=t.hasMarkers(b),m=t.hasText(b),n=l&&"circle"===b.marker.symbol,p=l&&"circle"!==b.marker.symbol,r=d(),s=d(),v=d(),z=d(),A={fill:r,line:s,circle:v,symbol:z};if(!c)return A;var B;if((j||k)&&(B=q.calcTraceToLineCoords(a)),j&&(r.geojson=q.makePolygon(B),r.layout.visibility="visible",o.extendFlat(r.paint,{"fill-color":b.fillcolor})),k&&(s.geojson=q.makeLine(B),s.layout.visibility="visible",o.extendFlat(s.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),n){var C={};C[w]={},C[x]={},C[y]={},v.geojson=e(a,C),v.layout.visibility="visible",o.extendFlat(v.paint,{"circle-opacity":i(b,C),"circle-color":g(b,C),"circle-radius":h(b,C)})}if((p||m)&&(z.geojson=f(a),o.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),p&&(o.extendFlat(z.layout,{"icon-size":b.marker.size/10}),o.extendFlat(z.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),m)){var D=(b.marker||{}).size,E=u(b.textposition,D);o.extendFlat(z.layout,{"text-size":b.textfont.size,"text-anchor":E.anchor,"text-offset":E.offset}),o.extendFlat(z.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return A}},{"../../components/colorscale":628,"../../constants/interactions":716,"../../constants/numerical":717,"../../lib":738,"../../lib/geojson_utils":731,"../../plots/mapbox/convert_text_opts":839,"../scatter/make_bubble_size_func":1071,"../scatter/subtypes":1076,"fast-isnumeric":132}],1110:[function(a,b,c){"use strict";function d(a,b,c){var d=c("lon")||[],e=c("lat")||[],f=Math.min(d.length,e.length);return f<d.length&&(b.lon=d.slice(0,f)),f<e.length&&(b.lat=e.slice(0,f)),f}var e=a("../../lib"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/text_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("./attributes");b.exports=function(a,b,c,l){function m(c,d){return e.coerce(a,b,k,c,d)}var n=d(a,b,m);if(!n)return void(b.visible=!1);if(m("text"),m("hovertext"),m("mode"),f.hasLines(b)&&(h(a,b,c,l,m,{noDash:!0}),m("connectgaps")),f.hasMarkers(b)){g(a,b,c,l,m,{noLine:!0,noSelect:!0});var o=b.marker;o.line={width:0},"circle"!==o.symbol&&(Array.isArray(o.size)&&(o.size=o.size[0]),Array.isArray(o.color)&&(o.color=o.color[0]))}f.hasText(b)&&i(a,b,l,m,{noSelect:!0}),m("fill"),"none"!==b.fill&&j(a,b,c,m),e.coerceSelectionMarkerOpacity(b,m)}},{"../../lib":738,"../scatter/fillcolor_defaults":1063,"../scatter/line_defaults":1067,"../scatter/marker_defaults":1072,"../scatter/subtypes":1076,"../scatter/text_defaults":1077,"./attributes":1108}],1111:[function(a,b,c){"use strict";b.exports=function(a,b){return a.lon=b.lon,a.lat=b.lat,a}},{}],1112:[function(a,b,c){"use strict";function d(a,b,c){function d(a){return a+"°"}var e=b.hi||a.hoverinfo,f=e.split("+"),h=-1!==f.indexOf("all"),i=-1!==f.indexOf("lon"),j=-1!==f.indexOf("lat"),k=b.lonlat,l=[];return h||i&&j?l.push("("+d(k[0])+", "+d(k[1])+")"):i?l.push(c.lon+d(k[0])):j&&l.push(c.lat+d(k[1])),(h||-1!==f.indexOf("text"))&&g(b,a,l),l.join("<br>")}var e=a("../../components/fx"),f=a("../scatter/get_trace_color"),g=a("../scatter/fill_hover_text"),h=a("../../constants/numerical").BADNUM;b.exports=function(a,b,c){function g(a){var b=a.lonlat;if(b[0]===h)return 1/0;var d=Math.abs(k.c2p(b)-k.c2p([o,b[1]])),e=Math.abs(l.c2p(b)-l.c2p([b[0],c])),f=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(d*d+e*e)-f,1-3/f)}var i=a.cd,j=i[0].trace,k=a.xa,l=a.ya,m=b>=0?Math.floor((b+180)/360):Math.ceil((b-180)/360),n=360*m,o=b-n;if(e.getClosest(i,g,a),a.index!==!1){var p=i[a.index],q=p.lonlat,r=[q[0]+n,q[1]],s=k.c2p(r),t=l.c2p(r),u=p.mrc||1;return a.x0=s-u,a.x1=s+u,a.y0=t-u,a.y1=t+u,a.color=f(j,p),a.extraText=d(j,p,i[0].t.labels),[a]}}},{"../../components/fx":655,"../../constants/numerical":717,"../scatter/fill_hover_text":1062,"../scatter/get_trace_color":1064}],1113:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("../scattergeo/calc"),d.plot=a("./plot"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.selectPoints=a("./select"),d.style=function(a,b){if(b){var c=b[0].trace;c._glTrace.update(b)}},d.moduleType="trace",d.name="scattermapbox",d.basePlotModule=a("../../plots/mapbox"),d.categories=["mapbox","gl","symbols","markerColorscale","showLegend","scatterlike"],d.meta={},b.exports=d},{"../../plots/mapbox":840,"../scatter/colorbar":1058,"../scattergeo/calc":1094,"./attributes":1108,"./defaults":1110,"./event_data":1111,"./hover":1112,"./plot":1114,"./select":1115}],1114:[function(a,b,c){"use strict";function d(a,b){this.mapbox=a,this.map=a.map,this.uid=b,this.idSourceFill=b+"-source-fill",this.idSourceLine=b+"-source-line",this.idSourceCircle=b+"-source-circle",this.idSourceSymbol=b+"-source-symbol",this.idLayerFill=b+"-layer-fill",this.idLayerLine=b+"-layer-line",this.idLayerCircle=b+"-layer-circle",this.idLayerSymbol=b+"-layer-symbol",this.mapbox.initSource(this.idSourceFill),this.mapbox.initSource(this.idSourceLine),this.mapbox.initSource(this.idSourceCircle),this.mapbox.initSource(this.idSourceSymbol),this.map.addLayer({id:this.idLayerFill,source:this.idSourceFill,type:"fill"}),this.map.addLayer({id:this.idLayerLine,source:this.idSourceLine,type:"line"}),this.map.addLayer({id:this.idLayerCircle,source:this.idSourceCircle,type:"circle"}),this.map.addLayer({id:this.idLayerSymbol,source:this.idSourceSymbol,type:"symbol"})}function e(a){return"visible"===a.layout.visibility}var f=a("./convert"),g=d.prototype;g.update=function(a){var b=this.mapbox,c=f(a);b.setOptions(this.idLayerFill,"setLayoutProperty",c.fill.layout),b.setOptions(this.idLayerLine,"setLayoutProperty",c.line.layout),b.setOptions(this.idLayerCircle,"setLayoutProperty",c.circle.layout),b.setOptions(this.idLayerSymbol,"setLayoutProperty",c.symbol.layout),e(c.fill)&&(b.setSourceData(this.idSourceFill,c.fill.geojson),b.setOptions(this.idLayerFill,"setPaintProperty",c.fill.paint)),e(c.line)&&(b.setSourceData(this.idSourceLine,c.line.geojson),b.setOptions(this.idLayerLine,"setPaintProperty",c.line.paint)),e(c.circle)&&(b.setSourceData(this.idSourceCircle,c.circle.geojson),b.setOptions(this.idLayerCircle,"setPaintProperty",c.circle.paint)),e(c.symbol)&&(b.setSourceData(this.idSourceSymbol,c.symbol.geojson),b.setOptions(this.idLayerSymbol,"setPaintProperty",c.symbol.paint)),a[0].trace._glTrace=this},g.dispose=function(){var a=this.map;a.removeLayer(this.idLayerFill),a.removeLayer(this.idLayerLine),a.removeLayer(this.idLayerCircle),a.removeLayer(this.idLayerSymbol),a.removeSource(this.idSourceFill),a.removeSource(this.idSourceLine),a.removeSource(this.idSourceCircle),a.removeSource(this.idSourceSymbol)},b.exports=function(a,b){var c=b[0].trace,e=new d(a,c.uid);return e.update(b),e}},{"./convert":1109}],1115:[function(a,b,c){"use strict";var d=a("../scatter/subtypes");b.exports=function(a,b){var c,e,f,g,h,i=a.cd,j=a.xaxis,k=a.yaxis,l=[],m=i[0].trace;if(!d.hasMarkers(m))return[];if(b===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)c=i[h],e=c.lonlat,f=j.c2p(e),g=k.c2p(e),b.contains([f,g])?(l.push({pointNumber:h,lon:e[0],lat:e[1]}),c.selected=1):c.selected=0;return l}},{"../scatter/subtypes":1076}],1116:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/colorbar/attributes"),h=a("../../components/drawing/attributes").dash,i=a("../../lib/extend").extendFlat,j=d.marker,k=d.line,l=j.line;b.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},d.mode,{dflt:"markers"}),text:i({},d.text,{}),hovertext:i({},d.hovertext,{}),line:{color:k.color,width:k.width,dash:h,shape:i({},k.shape,{values:["linear","spline"]}),smoothing:k.smoothing,editType:"calc"},connectgaps:d.connectgaps,cliponaxis:d.cliponaxis,fill:i({},d.fill,{values:["none","toself","tonext"]}),fillcolor:d.fillcolor,marker:i({symbol:j.symbol,opacity:j.opacity,maxdisplayed:j.maxdisplayed,size:j.size,sizeref:j.sizeref,sizemin:j.sizemin,sizemode:j.sizemode,line:i({width:l.width,editType:"calc"},f("marker.line")),gradient:j.gradient,editType:"calc"},f("marker"),{showscale:j.showscale,colorbar:g}),textfont:d.textfont,textposition:d.textposition,selected:d.selected,unselected:d.unselected,hoverinfo:i({},e.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:d.hoveron}},{"../../components/colorbar/attributes":614,"../../components/colorscale/color_attributes":621,"../../components/drawing/attributes":637,"../../lib/extend":727,"../../plots/attributes":783,"../scatter/attributes":1054}],1117:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../scatter/subtypes"),g=a("../scatter/colorscale_calc"),h=a("../scatter/arrays_to_calcdata"),i=a("../scatter/calc_selection"),j=["a","b","c"],k={a:["b","c"],b:["a","c"],c:["a","b"]};b.exports=function(a,b){var c,l,m,n,o,p,q=a._fullLayout[b.subplot],r=q.sum,s=b.sum||r;for(c=0;c<j.length;c++)if(m=j[c],!b[m]){for(o=b[k[m][0]],p=b[k[m][1]],n=new Array(o.length),l=0;l<o.length;l++)n[l]=s-o[l]-p[l];b[m]=n}var t,u,v,w,x,y,z=b.a.length,A=new Array(z);for(c=0;z>c;c++)t=b.a[c],u=b.b[c],v=b.c[c],d(t)&&d(u)&&d(v)?(t=+t,u=+u,v=+v,w=r/(t+u+v),1!==w&&(t*=w,u*=w,v*=w),y=t,x=v-u,A[c]={x:x,y:y,a:t,b:u,c:v}):A[c]={x:!1,y:!1};var B,C;if(f.hasMarkers(b)&&(B=b.marker,C=B.size,Array.isArray(C))){var D={type:"linear"};e.setConvert(D),C=D.makeCalcdata(b.marker,"size"),C.length>z&&C.splice(z,C.length-z)}return g(b),h(A,b),i(A,b),A}},{"../../plots/cartesian/axes":785,"../scatter/arrays_to_calcdata":1053,"../scatter/calc_selection":1056,"../scatter/colorscale_calc":1059,"../scatter/subtypes":1076,"fast-isnumeric":132}],1118:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/line_shape_defaults"),j=a("../scatter/text_defaults"),k=a("../scatter/fillcolor_defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}var o,p=n("a"),q=n("b"),r=n("c");if(p?(o=p.length,q?(o=Math.min(o,q.length),r&&(o=Math.min(o,r.length))):o=r?Math.min(o,r.length):0):q&&r&&(o=Math.min(q.length,r.length)),!o)return void(b.visible=!1);p&&o<p.length&&(b.a=p.slice(0,o)),q&&o<q.length&&(b.b=q.slice(0,o)),r&&o<r.length&&(b.c=r.slice(0,o)),n("sum"),n("text"),n("hovertext");var s=o<e.PTS_LINESONLY?"lines+markers":"lines";n("mode",s),f.hasLines(b)&&(h(a,b,c,m,n),i(a,b,n),n("connectgaps")),f.hasMarkers(b)&&g(a,b,c,m,n,{gradient:!0}),f.hasText(b)&&j(a,b,m,n);var t=[];(f.hasMarkers(b)||f.hasText(b))&&(n("marker.maxdisplayed"),t.push("points")),n("fill"),"none"!==b.fill&&(k(a,b,c,n),f.hasLines(b)||i(a,b,n)),("tonext"===b.fill||"toself"===b.fill)&&t.push("fills"),n("hoveron",t.join("+")||"points"),n("cliponaxis"),d.coerceSelectionMarkerOpacity(b,n)}},{"../../lib":738,"../scatter/constants":1060,"../scatter/fillcolor_defaults":1063,"../scatter/line_defaults":1067,"../scatter/line_shape_defaults":1069,"../scatter/marker_defaults":1072,"../scatter/subtypes":1076,"../scatter/text_defaults":1077,"./attributes":1116}],1119:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){if(b.xa&&(a.xaxis=b.xa),b.ya&&(a.yaxis=b.ya),d[e]){var f=d[e];a.a=f.a,a.b=f.b,a.c=f.c}else a.a=b.a,a.b=b.b,a.c=b.c;return a}},{}],1120:[function(a,b,c){"use strict";var d=a("../scatter/hover"),e=a("../../plots/cartesian/axes");b.exports=function(a,b,c,f){function g(a,b){s.push(a._hovertitle+": "+e.tickText(a,b,"hover").text)}var h=d(a,b,c,f);if(h&&h[0].index!==!1){var i=h[0];if(void 0===i.index){var j=1-i.y0/a.ya._length,k=a.xa._length,l=k*j/2,m=k-l;return i.x0=Math.max(Math.min(i.x0,m),l),i.x1=Math.max(Math.min(i.x1,m),l),h}var n=i.cd[i.index];i.a=n.a,i.b=n.b,i.c=n.c,i.xLabelVal=void 0,i.yLabelVal=void 0;var o=i.trace,p=o._ternary,q=n.hi||o.hoverinfo,r=q.split("+"),s=[];return-1!==r.indexOf("all")&&(r=["a","b","c"]),-1!==r.indexOf("a")&&g(p.aaxis,n.a),-1!==r.indexOf("b")&&g(p.baxis,n.b),-1!==r.indexOf("c")&&g(p.caxis,n.c),i.extraText=s.join("<br>"),h}}},{"../../plots/cartesian/axes":785,"../scatter/hover":1065}],1121:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.selectPoints=a("../scatter/select"),d.eventData=a("./event_data"),d.moduleType="trace",d.name="scatterternary",d.basePlotModule=a("../../plots/ternary"),d.categories=["ternary","symbols","markerColorscale","showLegend","scatter-like"],d.meta={},b.exports=d},{"../../plots/ternary":854,"../scatter/colorbar":1058,"../scatter/select":1074,"./attributes":1116,"./calc":1117,"./defaults":1118,"./event_data":1119,"./hover":1120,"./plot":1122,"./style":1123}],1122:[function(a,b,c){"use strict";var d=a("../scatter/plot");b.exports=function(a,b){var c=a.plotContainer;c.select(".scatterlayer").selectAll("*").remove();for(var e={xaxis:a.xaxis,yaxis:a.yaxis,plot:c,layerClipId:a._hasClipOnAxisFalse?a.clipIdRelative:null},f=0;f<b.length;f++)b[f][0].trace._ternary=a;d(a.graphDiv,e,b)}},{"../scatter/plot":1073}],1123:[function(a,b,c){arguments[4][1092][0].apply(c,arguments)},{"../scatter/style":1075,dup:1092}],1124:[function(a,b,c){"use strict";function d(a){return{valType:"boolean",dflt:!1}}function e(a){return{show:{valType:"boolean",dflt:!1},project:{x:d("x"),y:d("y"),z:d("z")},color:{valType:"color",dflt:f.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:f.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=a("../../components/color"),g=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),i=a("../../lib/extend").extendFlat,j=a("../../plot_api/edit_types").overrideAll,k=b.exports=j({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},surfacecolor:{valType:"data_array"},cauto:g.zauto,cmin:g.zmin,cmax:g.zmax,colorscale:g.colorscale,autocolorscale:i({},g.autocolorscale,{dflt:!1}),reversescale:g.reversescale,showscale:g.showscale,colorbar:h,contours:{x:e("x"),y:e("y"),z:e("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:i({},g.zauto,{}),zmin:i({},g.zmin,{}),zmax:i({},g.zmax,{})}},"calc","nested");k.x.editType=k.y.editType=k.z.editType="calc+clearAxisTypes"},{"../../components/color":613,
"../../components/colorbar/attributes":614,"../../components/colorscale/attributes":619,"../../lib/extend":727,"../../plot_api/edit_types":769}],1125:[function(a,b,c){"use strict";var d=a("../../components/colorscale/calc");b.exports=function(a,b){b.surfacecolor?d(b,b.surfacecolor,"","c"):d(b,b.z,"","c")}},{"../../components/colorscale/calc":620}],1126:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.cmin,k=c.cmax,l=c.surfacecolor||c.z;if(d(j)||(j=e.aggNums(Math.min,null,l)),d(k)||(k=e.aggNums(Math.max,null,l)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var m=b[0].t.cb=h(a,i),n=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});m.fillcolor(n).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":617,"../../components/colorscale":628,"../../lib":738,"../../plots/plots":846,"fast-isnumeric":132}],1127:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.surface=b,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function e(a,b){return void 0===b&&(b=1),a.map(function(a){var c=a[0],d=o(a[1]),e=d.toRgb();return{index:c,rgb:[e.r,e.g,e.b,b]}})}function f(a){var b=a[0].rgb,c=a[a.length-1].rgb;return b[0]===c[0]&&b[1]===c[1]&&b[2]===c[2]&&b[3]===c[3]}function g(a){var b=a.shape,c=[b[0]+2,b[1]+2],d=k(new Float32Array(c[0]*c[1]),c);return n.assign(d.lo(1,1).hi(b[0],b[1]),a),n.assign(d.lo(1).hi(b[0],1),a.hi(b[0],1)),n.assign(d.lo(1,c[1]-1).hi(b[0],1),a.lo(0,b[1]-1).hi(b[0],1)),n.assign(d.lo(0,1).hi(1,b[1]),a.hi(1)),n.assign(d.lo(c[0]-1,1).hi(1,b[1]),a.lo(b[0]-1)),d.set(0,0,a.get(0,0)),d.set(0,c[1]-1,a.get(0,b[1]-1)),d.set(c[0]-1,0,a.get(b[0]-1,0)),d.set(c[0]-1,c[1]-1,a.get(b[0]-1,b[1]-1)),d}function h(a){var b=Math.max(a[0].shape[0],a[0].shape[1]);if(q>b){for(var c=q/b,d=[0|Math.floor(a[0].shape[0]*c+1),0|Math.floor(a[0].shape[1]*c+1)],e=d[0]*d[1],f=0;f<a.length;++f){var h=g(a[f]),i=k(new Float32Array(e),d);l(i,h,[c,0,0,0,c,0,0,0,1]),a[f]=i}return c}return 1}function i(a,b){var c=a.glplot.gl,e=j({gl:c}),f=new d(a,e,b.uid);return e._trace=f,f.update(b),a.glplot.add(e),f}var j=a("gl-surface3d"),k=a("ndarray"),l=a("ndarray-homography"),m=a("ndarray-fill"),n=a("ndarray-ops"),o=a("tinycolor2"),p=a("../../lib/str2rgbarray"),q=128,r=d.prototype;r.handlePick=function(a){if(a.object===this.surface){var b=a.index=[Math.min(0|Math.round(a.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(a.data.index[1]/this.dataScale-1),this.data.z.length-1)],c=[0,0,0];Array.isArray(this.data.x[0])?c[0]=this.data.x[b[1]][b[0]]:c[0]=this.data.x[b[0]],Array.isArray(this.data.y[0])?c[1]=this.data.y[b[1]][b[0]]:c[1]=this.data.y[b[1]],c[2]=this.data.z[b[1]][b[0]],a.traceCoordinate=c;var d=this.scene.fullSceneLayout;a.dataCoordinate=[d.xaxis.d2l(c[0],0,this.data.xcalendar)*this.scene.dataScale[0],d.yaxis.d2l(c[1],0,this.data.ycalendar)*this.scene.dataScale[1],d.zaxis.d2l(c[2],0,this.data.zcalendar)*this.scene.dataScale[2]];var e=this.data.text;return e&&e[b[1]]&&void 0!==e[b[1]][b[0]]?a.textLabel=e[b[1]][b[0]]:a.textLabel="",a.data.dataCoordinate=a.dataCoordinate.slice(),this.surface.highlight(a.data),this.scene.glplot.spikes.position=a.dataCoordinate,!0}},r.setContourLevels=function(){for(var a=[[],[],[]],b=!1,c=0;3>c;++c)this.showContour[c]&&(b=!0,a[c]=this.scene.contourLevels[c]);b&&this.surface.update({levels:a})},r.update=function(a){var b,c=this.scene,d=c.fullSceneLayout,g=this.surface,i=a.opacity,j=e(a.colorscale,i),l=a.z,n=a.x,o=a.y,q=d.xaxis,r=d.yaxis,s=d.zaxis,t=c.dataScale,u=l[0].length,v=l.length,w=[k(new Float32Array(u*v),[u,v]),k(new Float32Array(u*v),[u,v]),k(new Float32Array(u*v),[u,v])],x=w[0],y=w[1],z=c.contourLevels;this.data=a;var A=a.xcalendar,B=a.ycalendar,C=a.zcalendar;m(w[2],function(a,b){return s.d2l(l[b][a],0,C)*t[2]}),Array.isArray(n[0])?m(x,function(a,b){return q.d2l(n[b][a],0,A)*t[0]}):m(x,function(a){return q.d2l(n[a],0,A)*t[0]}),Array.isArray(o[0])?m(y,function(a,b){return r.d2l(o[b][a],0,B)*t[1]}):m(y,function(a,b){return r.d2l(o[b],0,B)*t[1]});var D={colormap:j,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:a.opacity};if(D.intensityBounds=[a.cmin,a.cmax],a.surfacecolor){var E=k(new Float32Array(u*v),[u,v]);m(E,function(b,c){return a.surfacecolor[c][b]}),w.push(E)}else D.intensityBounds[0]*=t[2],D.intensityBounds[1]*=t[2];this.dataScale=h(w),a.surfacecolor&&(D.intensity=w.pop());var F=[!0,!0,!0],G=["x","y","z"];for(b=0;3>b;++b){var H=a.contours[G[b]];F[b]=H.highlight,D.showContour[b]=H.show||H.highlight,D.showContour[b]&&(D.contourProject[b]=[H.project.x,H.project.y,H.project.z],H.show?(this.showContour[b]=!0,D.levels[b]=z[b],g.highlightColor[b]=D.contourColor[b]=p(H.color),H.usecolormap?g.highlightTint[b]=D.contourTint[b]=0:g.highlightTint[b]=D.contourTint[b]=1,D.contourWidth[b]=H.width):this.showContour[b]=!1,H.highlight&&(D.dynamicColor[b]=p(H.highlightcolor),D.dynamicWidth[b]=H.highlightwidth))}f(j)&&(D.vertexColor=!0),D.coords=w,g.update(D),g.visible=a.visible,g.enableDynamic=F,g.snapToData=!0,"lighting"in a&&(g.ambientLight=a.lighting.ambient,g.diffuseLight=a.lighting.diffuse,g.specularLight=a.lighting.specular,g.roughness=a.lighting.roughness,g.fresnel=a.lighting.fresnel),"lightposition"in a&&(g.lightPosition=[a.lightposition.x,a.lightposition.y,a.lightposition.z]),i&&1>i&&(g.supportsTransparency=!0)},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},b.exports=i},{"../../lib/str2rgbarray":760,"gl-surface3d":267,ndarray:468,"ndarray-fill":458,"ndarray-homography":460,"ndarray-ops":462,tinycolor2:543}],1128:[function(a,b,c){"use strict";function d(a,b,c){b in a&&!(c in a)&&(a[c]=a[b])}var e=a("../../registry"),f=a("../../lib"),g=a("../../components/colorscale/defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,d){return f.coerce(a,b,h,c,d)}var k,l,m=j("z");if(!m)return void(b.visible=!1);var n=m[0].length,o=m.length;j("x"),j("y");var p=e.getComponentMethod("calendars","handleTraceDefaults");if(p(a,b,["x","y","z"],i),!Array.isArray(b.x))for(b.x=[],k=0;n>k;++k)b.x[k]=k;if(j("text"),!Array.isArray(b.y))for(b.y=[],k=0;o>k;++k)b.y[k]=k;["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","opacity"].forEach(function(a){j(a)});var q=j("surfacecolor");j("colorscale");var r=["x","y","z"];for(k=0;3>k;++k){var s="contours."+r[k],t=j(s+".show"),u=j(s+".highlight");if(t||u)for(l=0;3>l;++l)j(s+".project."+r[l]);t&&(j(s+".color"),j(s+".width"),j(s+".usecolormap")),u&&(j(s+".highlightcolor"),j(s+".highlightwidth"))}q||(d(a,"zmin","cmin"),d(a,"zmax","cmax"),d(a,"zauto","cauto")),g(a,b,i,j,{prefix:"",cLetter:"c"})}},{"../../components/colorscale/defaults":623,"../../lib":738,"../../registry":861,"./attributes":1124}],1129:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("./colorbar"),d.calc=a("./calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="surface",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d","2dMap","noOpacity"],d.meta={},b.exports=d},{"../../plots/gl3d":826,"./attributes":1124,"./calc":1125,"./colorbar":1126,"./convert":1127,"./defaults":1128}],1130:[function(a,b,c){"use strict";var d=a("../../components/annotations/attributes"),e=a("../../lib/extend").extendFlat,f=a("../../plot_api/edit_types").overrideAll,g=a("../../plots/font_attributes");b.exports=f({domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:e({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:e({},g({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:e({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:e({},g({arrayOk:!0}))}},"calc","from-root")},{"../../components/annotations/attributes":596,"../../lib/extend":727,"../../plot_api/edit_types":769,"../../plots/font_attributes":810}],1131:[function(a,b,c){"use strict";var d=a("../../plots/get_data").getModuleCalcData,e=a("./plot"),f="table";c.name=f,c.plot=function(a){var b=d(a.calcdata,f);b.length&&e(a,b)},c.clean=function(a,b,c,d){var e=d._has&&d._has(f),g=b._has&&b._has(f);e&&!g&&d._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":820,"./plot":1138}],1132:[function(a,b,c){"use strict";var d=a("../../lib/gup").wrap;b.exports=function(a,b){return d(b)}},{"../../lib/gup":735}],1133:[function(a,b,c){"use strict";b.exports={maxDimensionCount:60,overdrag:45,cellPad:8,latexCheck:/^\$.*\$$/,wrapSplitCharacter:" ",wrapSpacer:" ",lineBreaker:"<br>",uplift:5,goldenRatio:1.618,columnTitleOffset:28,columnExtentOffset:10,transitionEase:"cubic-out",transitionDuration:100,releaseTransitionEase:"cubic-out",releaseTransitionDuration:120,scrollbarWidth:8,scrollbarCaptureWidth:18,scrollbarOffset:5,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1134:[function(a,b,c){"use strict";function d(a){return a.calcdata.columns.reduce(function(b,c){return c.xIndex<a.xIndex?b+c.columnWidth:b},0)}function e(a,b){var c=Object.keys(a);return c.map(function(c){return i({},a[c],{auxiliaryBlocks:b})})}function f(a,b){for(var c,d={},e=0,f=0,h=g(),i=0,j=0,k=0;k<a.length;k++)c=a[k],h.rows.push({rowIndex:k,rowHeight:c}),f+=c,(f>=b||k===a.length-1)&&(d[e]=h,h.key=j++,h.firstRowIndex=i,h.lastRowIndex=k,h=g(),e+=f,i=k+1,f=0);return d}function g(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var h=a("./constants"),i=a("../../lib/extend").extendFlat,j=a("fast-isnumeric");b.exports=function(a,b){var c=b.header.values.map(function(a){return Array.isArray(a)?a:[a]}),g=b.cells.values,k=b.domain,l=Math.floor(a._fullLayout._size.w*(k.x[1]-k.x[0])),m=Math.floor(a._fullLayout._size.h*(k.y[1]-k.y[0])),n=c.length?c[0].map(function(){return b.header.height}):[],o=g.length?g[0].map(function(){return b.cells.height}):[],p=n.reduce(function(a,b){return a+b},0),q=m-p,r=q+h.uplift,s=f(o,r),t=f(n,p),u=e(t,[]),v=e(s,u),w={},x=b._fullInput.columnorder,y=c.map(function(a,c){var d=Array.isArray(b.columnwidth)?b.columnwidth[Math.min(c,b.columnwidth.length-1)]:b.columnwidth;return j(d)?Number(d):1}),z=y.reduce(function(a,b){return a+b},0);y=y.map(function(a){return a/z*l});var A={key:b.index,translateX:k.x[0]*a._fullLayout._size.w,translateY:a._fullLayout._size.h*(1-k.y[1]),size:a._fullLayout._size,width:l,height:m,columnOrder:x,groupHeight:m,rowBlocks:v,headerRowBlocks:u,scrollY:0,cells:b.cells,headerCells:i({},b.header,{values:c}),gdColumns:c.map(function(a){return a[0]}),gdColumnsOriginalOrder:c.map(function(a){return a[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:c.map(function(a,b){var c=w[a];w[a]=(c||0)+1;var e=a+"__"+w[a];return{key:e,label:a,specIndex:b,xIndex:x[b],xScale:d,x:void 0,calcdata:void 0,columnWidth:y[b]}})};return A.columns.forEach(function(a){a.calcdata=A,a.x=d(a)}),A}},{"../../lib/extend":727,"./constants":1133,"fast-isnumeric":132}],1135:[function(a,b,c){"use strict";function d(a){var b=a.rowBlocks[a.page],c=b?b.rows[0].rowIndex:0,d=b?c+b.rows.length:0;return[c,d]}var e=a("../../lib/extend").extendFlat;c.splitToPanels=function(a){var b=[0,0],c=e({},a,{key:"header",type:"header",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!0,values:a.calcdata.headerCells.values[a.specIndex],rowBlocks:a.calcdata.headerRowBlocks,calcdata:e({},a.calcdata,{cells:a.calcdata.headerCells})}),d=e({},a,{key:"cells1",type:"cells",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks}),f=e({},a,{key:"cells2",type:"cells",page:1,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks});return[d,f,c]},c.splitToCells=function(a){var b=d(a);return a.values.slice(b[0],b[1]).map(function(c,d){var e="string"==typeof c&&c.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:d+e,key:b[0]+d,column:a,calcdata:a.calcdata,page:a.page,rowBlocks:a.rowBlocks,value:c}})}},{"../../lib/extend":727}],1136:[function(a,b,c){"use strict";function d(a,b){for(var c=a.columnorder||[],d=a.header.values.length,e=c.slice(0,d),f=e.slice().sort(function(a,b){return a-b}),g=e.map(function(a){return f.indexOf(a)}),h=g.length;d>h;h++)g.push(h);b("columnorder",g)}var e=a("../../lib"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,d){return e.coerce(a,b,f,c,d)}h("domain.x"),h("domain.y"),h("columnwidth"),h("header.values"),h("header.format"),h("header.align"),h("header.prefix"),h("header.suffix"),h("header.height"),h("header.line.width"),h("header.line.color"),h("header.fill.color"),e.coerceFont(h,"header.font",e.extendFlat({},g.font)),d(b,h),h("cells.values"),h("cells.format"),h("cells.align"),h("cells.prefix"),h("cells.suffix"),h("cells.height"),h("cells.line.width"),h("cells.line.color"),h("cells.fill.color"),e.coerceFont(h,"cells.font",e.extendFlat({},g.font))}},{"../../lib":738,"./attributes":1130}],1137:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.moduleType="trace",d.name="table",d.basePlotModule=a("./base_plot"),d.categories=["noOpacity"],d.meta={},b.exports=d},{"./attributes":1130,"./base_plot":1131,"./calc":1132,"./defaults":1136,"./plot":1138}],1138:[function(a,b,c){"use strict";function d(a,b){return"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key}function e(a,b){return"clip"+a._fullLayout._uid+"_columnBoundaryClippath_"+b.calcdata.key+"_"+b.specIndex}function f(a){return[].concat.apply([],a.map(function(a){return a})).map(function(a){return a.__data__})}function g(a,b,c){function d(a){var b=a.rowBlocks;return H(b,b.length-1)+(b.length?I(b[b.length-1],1/0):1)}var e=a.selectAll("."+M.cn.scrollbarKit).data(O.repeat,O.keyFun);e.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),e.each(function(a){var b=a.scrollbarState;b.totalHeight=d(a),b.scrollableAreaHeight=a.groupHeight-y(a),b.currentlyVisibleHeight=Math.min(b.totalHeight,b.scrollableAreaHeight),b.ratio=b.currentlyVisibleHeight/b.totalHeight,b.barLength=Math.max(b.ratio*b.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),b.barWiggleRoom=b.currentlyVisibleHeight-b.barLength,b.wiggleRoom=Math.max(0,b.totalHeight-b.scrollableAreaHeight),b.topY=0===b.barWiggleRoom?0:a.scrollY/b.wiggleRoom*b.barWiggleRoom,b.bottomY=b.topY+b.barLength,b.dragMultiplier=b.wiggleRoom/b.barWiggleRoom}).attr("transform",function(a){var b=a.width+M.scrollbarWidth/2+M.scrollbarOffset;return"translate("+b+" "+y(a)+")"});var f=e.selectAll("."+M.cn.scrollbar).data(O.repeat,O.keyFun);f.enter().append("g").classed(M.cn.scrollbar,!0);var g=f.selectAll("."+M.cn.scrollbarSlider).data(O.repeat,O.keyFun);g.enter().append("g").classed(M.cn.scrollbarSlider,!0),g.attr("transform",function(a){return"translate(0 "+(a.scrollbarState.topY||0)+")"});var h=g.selectAll("."+M.cn.scrollbarGlyph).data(O.repeat,O.keyFun);h.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),h.attr("y2",function(a){return a.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(a){return a.columnDragInProgress||!a.scrollbarState.barWiggleRoom||c?0:.4}),h.transition().delay(0).duration(0),h.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var i=f.selectAll("."+M.cn.scrollbarCaptureZone).data(O.repeat,O.keyFun);i.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(c){var d=N.event.y,e=this.getBoundingClientRect(),f=c.scrollbarState,g=d-e.top,h=N.scale.linear().domain([0,f.scrollableAreaHeight]).range([0,f.totalHeight]).clamp(!0);f.topY<=g&&g<=f.bottomY||B(b,a,null,h(g-f.barLength/2))(c)}).call(N.behavior.drag().origin(function(a){return N.event.stopPropagation(),a.scrollbarState.scrollbarScrollInProgress=!0,a}).on("drag",B(b,a)).on("dragend",function(){})),i.attr("y2",function(a){return a.scrollbarState.scrollableAreaHeight})}function h(a,b,c,d){var e=i(c),f=j(e);n(f);var g=k(f);p(g);var h=m(f),r=l(h);o(r),q(r,b,d,a),G(f)}function i(a){var b=a.selectAll("."+M.cn.columnCells).data(O.repeat,O.keyFun);return b.enter().append("g").classed(M.cn.columnCells,!0),b.exit().remove(),b}function j(a){var b=a.selectAll("."+M.cn.columnCell).data(U.splitToCells,function(a){return a.keyWithinBlock});return b.enter().append("g").classed(M.cn.columnCell,!0),b.exit().remove(),b}function k(a){var b=a.selectAll("."+M.cn.cellRect).data(O.repeat,function(a){return a.keyWithinBlock});return b.enter().append("rect").classed(M.cn.cellRect,!0),b}function l(a){var b=a.selectAll("."+M.cn.cellText).data(O.repeat,function(a){return a.keyWithinBlock});return b.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){N.event.stopPropagation()}),b}function m(a){var b=a.selectAll("."+M.cn.cellTextHolder).data(O.repeat,function(a){return a.keyWithinBlock});return b.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),b}function n(a){a.each(function(a,b){var c=a.calcdata.cells.font,d=a.column.specIndex,e={size:u(c.size,d,b),color:u(c.color,d,b),family:u(c.family,d,b)};a.rowNumber=a.key,a.align=u(a.calcdata.cells.align,d,b),a.cellBorderWidth=u(a.calcdata.cells.line.width,d,b),a.font=e})}function o(a){a.each(function(a){P.font(N.select(this),a.font)})}function p(a){a.attr("width",function(a){return a.column.columnWidth}).attr("stroke-width",function(a){return a.cellBorderWidth}).each(function(a){var b=N.select(this);V.stroke(b,u(a.calcdata.cells.line.color,a.column.specIndex,a.rowNumber)),V.fill(b,u(a.calcdata.cells.fill.color,a.column.specIndex,a.rowNumber))})}function q(a,b,c,d){a.text(function(a){var b=a.column.specIndex,c=a.rowNumber,d=a.value,e="string"==typeof d,f=e&&d.match(/<br>/i),g=!e||f;a.mayHaveMarkup=e&&d.match(/[<&>]/);var h=r(d);a.latex=h;var i,j=h?"":u(a.calcdata.cells.prefix,b,c)||"",k=h?"":u(a.calcdata.cells.suffix,b,c)||"",l=h?null:u(a.calcdata.cells.format,b,c)||null,m=j+(l?N.format(l)(a.value):a.value)+k;a.wrappingNeeded=!a.wrapped&&!g&&!h&&(i=s(m)),a.cellHeightMayIncrease=f||h||a.mayHaveMarkup||(void 0===i?s(m):i),a.needsConvertToTspans=a.mayHaveMarkup||a.wrappingNeeded||a.latex;var n;if(a.wrappingNeeded){var o=" "===M.wrapSplitCharacter?m.replace(/<a href=/gi,"<a_href="):m,p=o.split(M.wrapSplitCharacter),q=" "===M.wrapSplitCharacter?p.map(function(a){return a.replace(/<a_href=/gi,"<a href=")}):p;a.fragments=q.map(function(a){return{text:a,width:null}}),a.fragments.push({fragment:M.wrapSpacer,width:null}),n=q.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete a.fragments,n=m;return n}).attr("dy",function(a){return a.needsConvertToTspans?0:"0.75em"}).each(function(a){var e=this,f=N.select(e),g=a.wrappingNeeded?D:E;a.needsConvertToTspans?Q.convertToTspans(f,d,g(c,e,b,d,a)):N.select(e.parentNode).attr("transform",function(a){return"translate("+F(a)+" "+M.cellPad+")"}).attr("text-anchor",function(a){return{left:"start",center:"middle",right:"end"}[a.align]})})}function r(a){return"string"==typeof a&&a.match(M.latexCheck)}function s(a){return-1!==a.indexOf(M.wrapSplitCharacter)}function t(a,b,c){var d=b.gdColumnsOriginalOrder;b.gdColumns.sort(function(a,b){return c[d.indexOf(a)]-c[d.indexOf(b)]}),b.columnorder=c,a.emit("plotly_restyle")}function u(a,b,c){if(Array.isArray(a)){var d=a[Math.min(b,a.length-1)];return Array.isArray(d)?d[Math.min(c,d.length-1)]:d}return a}function v(a,b,c){a.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform","translate("+b.x+" "+c+")")}function w(a){return"cells"===a.type}function x(a){return"header"===a.type}function y(a){var b=a.rowBlocks.length?a.rowBlocks[0].auxiliaryBlocks:[];return b.reduce(function(a,b){return a+I(b,1/0)},0)}function z(a,b,c){for(var d=[],e=0,f=0;f<a.length;f++){for(var g=a[f],h=g.rows,i=0,j=0;j<h.length;j++)i+=h[j].rowHeight;g.allRowsHeight=i;var k=e+i,l=b,m=l+c;k>l&&m>e&&d.push(f),e+=i}return d}function A(a,b,c){var d=f(b)[0];if(void 0!==d){var e=d.rowBlocks,h=d.calcdata,i=H(e,e.length),j=d.calcdata.groupHeight-y(d),k=h.scrollY=Math.max(0,Math.min(i-j,h.scrollY)),l=z(e,k,j);1===l.length&&(l[0]===e.length-1?l.unshift(l[0]-1):l.push(l[0]+1)),l[0]%2&&l.reverse(),b.each(function(a,b){a.page=l[b],a.scrollY=k}),b.attr("transform",function(a){var b=H(a.rowBlocks,a.page)-a.scrollY;return"translate(0 "+b+")"}),a&&(C(a,c,b,l,d.prevPages,d,0),C(a,c,b,l,d.prevPages,d,1),g(c,a))}}function B(a,b,c,d){return function(e){var f=e.calcdata?e.calcdata:e,g=b.filter(function(a){return f.key===a.key}),h=c||f.scrollbarState.dragMultiplier;f.scrollY=void 0===d?f.scrollY+h*N.event.dy:d;var i=g.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(w);A(a,i,g)}}function C(a,b,c,d,e,f,g){var i=d[g]!==e[g];i&&(clearTimeout(f.currentRepaint[g]),f.currentRepaint[g]=setTimeout(function(){var f=c.filter(function(a,b){return b===g&&d[b]!==e[b]});h(a,b,f,c),e[g]=d[g]}))}function D(a,b,c){return function(){var d=N.select(b.parentNode);d.each(function(a){var b=a.fragments;d.selectAll("tspan.line").each(function(a,c){b[c].width=this.getComputedTextLength()});var c,e,f=b[b.length-1].width,g=b.slice(0,-1),h=[],i=0,j=a.column.columnWidth-2*M.cellPad;for(a.value="";g.length;)c=g.shift(),e=c.width+f,i+e>j&&(a.value+=h.join(M.wrapSpacer)+M.lineBreaker,h=[],i=0),h.push(c.text),i+=e;i&&(a.value+=h.join(M.wrapSpacer)),a.wrapped=!0}),d.selectAll("tspan.line").remove(),q(d.select("."+M.cn.cellText),c,a),N.select(b.parentNode.parentNode).call(G)}}function E(a,b,c,d,e){return function(){if(!e.settledY){var f=N.select(b.parentNode),h=K(e),i=e.key-h.firstRowIndex,j=h.rows[i].rowHeight,k=e.cellHeightMayIncrease?b.parentNode.getBoundingClientRect().height+2*M.cellPad:j,l=Math.max(k,j),m=l-h.rows[i].rowHeight;m&&(h.rows[i].rowHeight=l,a.selectAll("."+M.cn.columnCell).call(G),A(null,a.filter(w),0),g(c,d,!0)),f.attr("transform",function(){var a=this,b=a.parentNode,c=b.getBoundingClientRect(),d=N.select(a.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),f=a.transform.baseVal.consolidate(),g=d.top-c.top+(f?f.matrix.f:M.cellPad);return"translate("+F(e,N.select(a.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+g+")"}),e.settledY=!0}}}function F(a,b){switch(a.align){case"left":return M.cellPad;case"right":return a.column.columnWidth-(b||0)-M.cellPad;case"center":return(a.column.columnWidth-(b||0))/2;default:return M.cellPad}}function G(a){a.attr("transform",function(a){var b=a.rowBlocks[0].auxiliaryBlocks.reduce(function(a,b){return a+I(b,1/0)},0),c=K(a),d=I(c,a.key),e=d+b;return"translate(0 "+e+")"}).selectAll("."+M.cn.cellRect).attr("height",function(a){return L(K(a),a.key).rowHeight})}function H(a,b){for(var c=0,d=b-1;d>=0;d--)c+=J(a[d]);return c}function I(a,b){for(var c=0,d=0;d<a.rows.length&&a.rows[d].rowIndex<b;d++)c+=a.rows[d].rowHeight;return c}function J(a){var b=a.allRowsHeight;if(void 0!==b)return b;for(var c=0,d=0;d<a.rows.length;d++)c+=a.rows[d].rowHeight;return a.allRowsHeight=c,c}function K(a){return a.rowBlocks[a.page]}function L(a,b){return a.rows[b-a.firstRowIndex]}var M=a("./constants"),N=a("d3"),O=a("../../lib/gup"),P=a("../../components/drawing"),Q=a("../../lib/svg_text_utils"),R=a("../../lib").raiseToTop,S=a("../../lib").cancelTransition,T=a("./data_preparation_helper"),U=a("./data_split_helpers"),V=a("../../components/color");b.exports=function(a,b){var c=a._fullLayout._paper.selectAll("."+M.cn.table).data(b.map(function(b){var c=O.unwrap(b),d=c.trace;return T(a,d)}),O.keyFun);c.exit().remove(),c.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),c.attr("width",function(a){return a.width+a.size.l+a.size.r}).attr("height",function(a){return a.height+a.size.t+a.size.b}).attr("transform",function(a){return"translate("+a.translateX+","+a.translateY+")"});var i=c.selectAll("."+M.cn.tableControlView).data(O.repeat,O.keyFun);i.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box").on("mousemove",function(b){i.filter(function(a){return b===a}).call(g,a)}).on("mousewheel",function(b){b.scrollbarState.wheeling||(b.scrollbarState.wheeling=!0,N.event.stopPropagation(),N.event.preventDefault(),B(a,i,null,b.scrollY+N.event.deltaY)(b),b.scrollbarState.wheeling=!1)}).call(g,a,!0),i.attr("transform",function(a){return"translate("+a.size.l+" "+a.size.t+")"});var j=i.selectAll("."+M.cn.scrollBackground).data(O.repeat,O.keyFun);j.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),j.attr("width",function(a){return a.width}).attr("height",function(a){return a.height}),i.each(function(b){P.setClipUrl(N.select(this),d(a,b))});var k=i.selectAll("."+M.cn.yColumn).data(function(a){return a.columns},O.keyFun);k.enter().append("g").classed(M.cn.yColumn,!0),k.exit().remove(),k.attr("transform",function(a){return"translate("+a.x+" 0)"}).call(N.behavior.drag().origin(function(b){var c=N.select(this);return v(c,b,-M.uplift),R(this),b.calcdata.columnDragInProgress=!0,g(i.filter(function(a){return b.calcdata.key===a.key}),a),b}).on("drag",function(a){var b=N.select(this),c=function(b){return(a===b?N.event.x:b.x)+b.columnWidth/2};a.x=Math.max(-M.overdrag,Math.min(a.calcdata.width+M.overdrag-a.columnWidth,N.event.x));var d=f(k).filter(function(b){return b.calcdata.key===a.calcdata.key}),e=d.sort(function(a,b){return c(a)-c(b)});e.forEach(function(b,c){b.xIndex=c,b.x=a===b?b.x:b.xScale(b)}),k.filter(function(b){return a!==b}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(a){return"translate("+a.x+" 0)"}),b.call(S).attr("transform","translate("+a.x+" -"+M.uplift+" )")}).on("dragend",function(b){var c=N.select(this),d=b.calcdata;b.x=b.xScale(b),b.calcdata.columnDragInProgress=!1,v(c,b,0),t(a,d,d.columns.map(function(a){return a.xIndex}))})),k.each(function(b){P.setClipUrl(N.select(this),e(a,b))});var l=k.selectAll("."+M.cn.columnBlock).data(U.splitToPanels,O.keyFun);l.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(a){return a.key}),l.style("cursor",function(a){return a.dragHandle?"ew-resize":a.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var m=l.filter(x),n=l.filter(w);n.call(N.behavior.drag().origin(function(a){return N.event.stopPropagation(),a}).on("drag",B(a,i,-1)).on("dragend",function(){})),h(a,i,m,l),h(a,i,n,l);var o=i.selectAll("."+M.cn.scrollAreaClip).data(O.repeat,O.keyFun);o.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(b){return d(a,b)});var p=o.selectAll("."+M.cn.scrollAreaClipRect).data(O.repeat,O.keyFun);p.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),p.attr("width",function(a){return a.width+2*M.overdrag}).attr("height",function(a){return a.height+M.uplift});var q=k.selectAll("."+M.cn.columnBoundary).data(O.repeat,O.keyFun);q.enter().append("g").classed(M.cn.columnBoundary,!0);var r=k.selectAll("."+M.cn.columnBoundaryClippath).data(O.repeat,O.keyFun);r.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),r.attr("id",function(b){return e(a,b)});var s=r.selectAll("."+M.cn.columnBoundaryRect).data(O.repeat,O.keyFun);s.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),s.attr("width",function(a){return a.columnWidth}).attr("height",function(a){return a.calcdata.height+M.uplift}),A(null,n,i)}},{"../../components/color":613,"../../components/drawing":638,"../../lib":738,"../../lib/gup":735,"../../lib/svg_text_utils":761,"./constants":1133,"./data_preparation_helper":1134,"./data_split_helpers":1135,d3:123}],1139:[function(a,b,c){"use strict";var d=a("../box/attributes"),e=a("../../lib/extend").extendFlat;b.exports={y:d.y,x:d.x,x0:d.x0,y0:d.y0,name:d.name,orientation:e({},d.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,points:e({},d.boxpoints,{}),jitter:e({},d.jitter,{}),pointpos:e({},d.pointpos,{}),marker:d.marker,text:d.text,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"plot"},selected:d.selected,unselected:d.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":727,"../box/attributes":884}],1140:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.min(b,c/1.349);return 1.059*d*Math.pow(a.length,-.2)}function e(a,b,c,d){function e(d){var e=i[d],f=c.d2c(e,0,a[b.valLetter+"calendar"]);return f===j?l[d]:f}var f,h=a.spanmode,i=a.span||[],k=[b.min,b.max],l=[b.min-2*d,b.max+2*d];f="soft"===h?l:"hard"===h?k:[e(0),e(1)];
var m={type:"linear",range:f};return g.setConvert(m),m.cleanRange(),f}var f=a("../../lib"),g=a("../../plots/cartesian/axes"),h=a("../box/calc"),i=a("./helpers"),j=a("../../constants/numerical").BADNUM;b.exports=function(a,b){var c=h(a,b);if(c[0].t.empty)return c;var j=a._fullLayout,k=g.getFromId(a,b["h"===b.orientation?"xaxis":"yaxis"]),l=j._violinScaleGroupStats,m=b.scalegroup,n=l[m];n||(n=l[m]={maxWidth:0,maxCount:0});for(var o=0;o<c.length;o++){var p=c[o],q=p.pts.map(i.extractVal),r=q.length,s=f.stdev(q,r-1,p.mean),t=d(q,s,p.q3-p.q1),u=p.bandwidth=b.bandwidth||t,v=p.span=e(b,p,k,u),w=v[1]-v[0],x=Math.ceil(w/(Math.min(t,u)/3)),y=w/x;if(!isFinite(y)||!isFinite(x))return f.error("Something went wrong with computing the violin span"),c[0].t.empty=!0,c;var z=i.makeKDE(p,b,q);p.density=new Array(x);for(var A=0,B=v[0];B<v[1]+y/2;A++,B+=y){var C=z(B);n.maxWidth=Math.max(n.maxWidth,C),p.density[A]={v:C,t:B}}g.expand(k,v,{padded:!0}),n.maxCount=Math.max(n.maxCount,q.length)}return c[0].t.labels.kde=f._(a,"kde:"),c}},{"../../constants/numerical":717,"../../lib":738,"../../plots/cartesian/axes":785,"../box/calc":885,"./helpers":1142}],1141:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("../box/defaults"),g=a("./attributes");b.exports=function(a,b,c,h){function i(c,e){return d.coerce(a,b,g,c,e)}function j(c,e){return d.coerce2(a,b,g,c,e)}if(f.handleSampleDefaults(a,b,i,h),b.visible!==!1){i("bandwidth"),i("scalegroup",b.name),i("scalemode"),i("side");var k,l=i("span");Array.isArray(l)&&(k="manual"),i("spanmode",k);var m=i("line.color",(a.marker||{}).color||c),n=i("line.width"),o=i("fillcolor",e.addOpacity(b.line.color,.5));f.handlePointsDefaults(a,b,i,{prefix:""});var p=j("box.width"),q=j("box.fillcolor",o),r=j("box.line.color",m),s=j("box.line.width",n),t=i("box.visible",Boolean(p||q||r||s));t||delete b.box;var u=j("meanline.color",m),v=j("meanline.width",n),w=i("meanline.visible",Boolean(u||v));w||delete b.meanline}}},{"../../components/color":613,"../../lib":738,"../box/defaults":886,"./attributes":1139}],1142:[function(a,b,c){"use strict";var d=a("../../lib"),e={gaussian:function(a){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*a*a)}};c.makeKDE=function(a,b,c){var d=c.length,f=e.gaussian,g=a.bandwidth,h=1/(d*g);return function(a){for(var b=0,e=0;d>e;e++)b+=f((a-c[e])/g);return h*b}},c.getPositionOnKdePath=function(a,b,c){var e,f;"h"===b.orientation?(e="y",f="x"):(e="x",f="y");var g=d.findPointOnPath(a.path,c,f,{pathLength:a.pathLength}),h=a.posCenterPx,i=g[e],j="both"===b.side?2*h-i:h;return[i,j]},c.getKdeValue=function(a,b,d){var e=a.pts.map(c.extractVal),f=c.makeKDE(a,b,e);return f(d)/a.posDensityScale},c.extractVal=function(a){return a.v}},{"../../lib":738}],1143:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("../box/hover"),g=a("./helpers");b.exports=function(a,b,c,h,i){var j,k,l=a.cd,m=l[0].trace,n=m.hoveron,o=-1!==n.indexOf("violins"),p=-1!==n.indexOf("kde"),q=[];if(o||p){var r=f.hoverOnBoxes(a,b,c,h);if(o&&(q=q.concat(r)),p&&r.length>0){var s,t,u,v,w,x=a.xa,y=a.ya;"h"===m.orientation?(w=b,s="y",u=y,t="x",v=x):(w=c,s="x",u=x,t="y",v=y);var z=l[a.index];if(w>=z.span[0]&&w<=z.span[1]){var A=d.extendFlat({},a),B=v.c2p(w,!0),C=g.getKdeValue(z,m,w),D=g.getPositionOnKdePath(z,m,B),E=u._offset,F=u._length;A[s+"0"]=D[0],A[s+"1"]=D[1],A[t+"0"]=A[t+"1"]=B,A[t+"Label"]=t+": "+e.hoverLabelText(v,w)+", "+l[0].t.labels.kde+" "+C.toFixed(3),q.push(A),k={stroke:a.color},k[s+"1"]=d.constrain(E+D[0],E,E+F),k[s+"2"]=d.constrain(E+D[1],E,E+F),k[t+"1"]=k[t+"2"]=v._offset+B}}}-1!==n.indexOf("points")&&(j=f.hoverOnPoints(a,b,c));var G=i.selectAll(".violinline-"+m.uid).data(k?[0]:[]);return G.enter().append("line").classed("violinline-"+m.uid,!0).attr("stroke-width",1.5),G.exit().remove(),G.attr(k),"closest"===h?j?[j]:q:j?(q.push(j),q):q}},{"../../lib":738,"../../plots/cartesian/axes":785,"../box/hover":887,"./helpers":1142}],1144:[function(a,b,c){"use strict";b.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),setPositions:a("./set_positions"),plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover"),selectPoints:a("../box/select"),moduleType:"trace",name:"violin",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","symbols","oriented","box-violin","showLegend"],meta:{}}},{"../../plots/cartesian":796,"../box/select":892,"./attributes":1139,"./calc":1140,"./defaults":1141,"./hover":1143,"./layout_attributes":1145,"./layout_defaults":1146,"./plot":1147,"./set_positions":1148,"./style":1149}],1145:[function(a,b,c){"use strict";var d=a("../box/layout_attributes"),e=a("../../lib").extendFlat;b.exports={violinmode:e({},d.boxmode,{}),violingap:e({},d.boxgap,{}),violingroupgap:e({},d.boxgroupgap,{})}},{"../../lib":738,"../box/layout_attributes":889}],1146:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes"),f=a("../box/layout_defaults");b.exports=function(a,b,c){function g(c,f){return d.coerce(a,b,e,c,f)}f._supply(a,b,c,g,"violin")}},{"../../lib":738,"../box/layout_defaults":890,"./layout_attributes":1145}],1147:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../lib"),f=a("../../components/drawing"),g=a("../box/plot"),h=a("../scatter/line_points"),i=a("./helpers");b.exports=function(a,b,c){function j(a){var b=h(a,{xaxis:l,yaxis:m,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0});return f.smoothopen(b[0],1)}var k=a._fullLayout,l=b.xaxis,m=b.yaxis,n=b.plot.select(".violinlayer").selectAll("g.trace.violins").data(c).enter().append("g").attr("class","trace violins");n.each(function(a){var c=a[0],f=c.t,h=c.trace,n=c.node3=d.select(this),o=k._numViolins,p="group"===k.violinmode&&o>1,q=f.bdPos=f.dPos*(1-k.violingap)*(1-k.violingroupgap)/(p?o:1),r=f.bPos=p?2*f.dPos*(-.5+(f.num+.5)/o)*(1-k.violingap):0;if(h.visible!==!0||f.empty)return void d.select(this).remove();var s=b[f.valLetter+"axis"],t=b[f.posLetter+"axis"],u="both"===h.side,v=u||"positive"===h.side,w=u||"negative"===h.side,x=h.box&&h.box.visible,y=h.meanline&&h.meanline.visible,z=k._violinScaleGroupStats[h.scalegroup];if(n.selectAll("path.violin").data(e.identity).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin").each(function(a){var b,c=d.select(this),e=a.density,g=e.length,i=a.pos+r,k=t.c2p(i);switch(h.scalemode){case"width":b=z.maxWidth/q;break;case"count":b=z.maxWidth/q*(z.maxCount/a.pts.length)}var l,m,n,o,p,x,y;if(v){for(x=new Array(g),o=0;g>o;o++)y=x[o]={},y[f.posLetter]=i+e[o].v/b,y[f.valLetter]=e[o].t;l=j(x)}if(w){for(x=new Array(g),p=0,o=g-1;g>p;p++,o--)y=x[p]={},y[f.posLetter]=i-e[o].v/b,y[f.valLetter]=e[o].t;m=j(x)}if(u)n=l+"L"+m.substr(1)+"Z";else{var A=[k,s.c2p(e[0].t)],B=[k,s.c2p(e[g-1].t)];"h"===h.orientation&&(A.reverse(),B.reverse()),n=v?"M"+A+"L"+l.substr(1)+"L"+B:"M"+B+"L"+m.substr(1)+"L"+A}c.attr("d",n),a.posCenterPx=k,a.posDensityScale=b*q,a.path=c.node(),a.pathLength=a.path.getTotalLength()/(u?2:1)}),x){var A,B,C=h.box.width,D=h.box.line.width;u?(A=q*C,B=0):v?(A=[0,q*C/2],B=-D):(A=[q*C/2,0],B=D),h.whiskerwidth=0,g.plotBoxAndWhiskers(n,{pos:t,val:s},h,{bPos:r,bdPos:A,bPosPxOffset:B}),y&&g.plotBoxMean(n,{pos:t,val:s},h,{bPos:r,bdPos:A,bPosPxOffset:B})}else y&&n.selectAll("path.mean").data(e.identity).enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}).each(function(a){var b=s.c2p(a.mean,!0),c=i.getPositionOnKdePath(a,h,b);d.select(this).attr("d","h"===h.orientation?"M"+b+","+c[0]+"V"+c[1]:"M"+c[0]+","+b+"H"+c[1])});h.points&&g.plotPoints(n,{x:l,y:m},h,f)})}},{"../../components/drawing":638,"../../lib":738,"../box/plot":891,"../scatter/line_points":1068,"./helpers":1142,d3:123}],1148:[function(a,b,c){"use strict";var d=a("../box/set_positions").setPositionOffset,e=["v","h"];b.exports=function(a,b){for(var c=a.calcdata,f=b.xaxis,g=b.yaxis,h=0;h<e.length;h++){for(var i=e[h],j="h"===i?g:f,k=[],l=0,m=0,n=0;n<c.length;n++){var o=c[n],p=o[0].t,q=o[0].trace;q.visible!==!0||"violin"!==q.type||p.empty||q.orientation!==i||q.xaxis!==f._id||q.yaxis!==g._id||(k.push(n),q.points!==!1&&(l=Math.max(l,q.jitter-q.pointpos-1),m=Math.max(m,q.jitter+q.pointpos-1)))}d("violin",a,k,j,[l,m])}}},{"../box/set_positions":893}],1149:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/color"),f=a("../scatter/style").stylePoints;b.exports=function(a,b){var c=b?b[0].node3:d.select(a).selectAll("g.trace.violins");c.style("opacity",function(a){return a[0].trace.opacity}),c.each(function(b){var c=b[0].trace,g=d.select(this),h=c.box||{},i=h.line||{},j=c.meanline||{},k=j.width;g.selectAll("path.violin").style("stroke-width",c.line.width+"px").call(e.stroke,c.line.color).call(e.fill,c.fillcolor),g.selectAll("path.box").style("stroke-width",i.width+"px").call(e.stroke,i.color).call(e.fill,h.fillcolor),g.selectAll("path.mean").style({"stroke-width":k+"px","stroke-dasharray":2*k+"px,"+k+"px"}).call(e.stroke,j.color),f(g,c,a)})}},{"../../components/color":613,"../scatter/style":1075,d3:123}],1150:[function(a,b,c){"use strict";function d(a,b,c,d){if(d.enabled){for(var f=d.target,g=j.nestedProperty(b,f),h=g.get(),k=i.getDataConversions(a,b,f,h),l=e(d,k),m=new Array(c.length),n=0;n<c.length;n++)m[n]=l(h,c[n]);g.set(m)}}function e(a,b){var c=a.func,d=b.d2c,e=b.c2d;switch(c){case"count":return f;case"first":return g;case"last":return h;case"sum":return function(a,b){for(var c=0,f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&(c+=g)}return e(c)};case"avg":return function(a,b){for(var c=0,f=0,g=0;g<b.length;g++){var h=d(a[b[g]]);h!==m&&(c+=h,f++)}return f?e(c/f):m};case"min":return function(a,b){for(var c=1/0,f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&(c=Math.min(c,g))}return c===1/0?m:e(c)};case"max":return function(a,b){for(var c=-(1/0),f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&(c=Math.max(c,g))}return c===-(1/0)?m:e(c)};case"median":return function(a,b){for(var c=[],f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&c.push(g)}if(!c.length)return m;c.sort();var h=(c.length-1)/2;return e((c[Math.floor(h)]+c[Math.ceil(h)])/2)};case"mode":return function(a,b){for(var c={},f=0,g=m,h=0;h<b.length;h++){var i=d(a[b[h]]);if(i!==m){var j=c[i]=(c[i]||0)+1;j>f&&(f=j,g=i)}}return f?e(g):m};case"rms":return function(a,b){for(var c=0,f=0,g=0;g<b.length;g++){var h=d(a[b[g]]);h!==m&&(c+=h*h,f++)}return f?e(Math.sqrt(c/f)):m};case"stddev":return function(b,c){var e,f=0,g=0,h=1,i=m;for(e=0;e<c.length&&i===m;e++)i=d(b[c[e]]);if(i===m)return m;for(;e<c.length;e++){var j=d(b[c[e]]);if(j!==m){var k=j-i;f+=k,g+=k*k,h++}}var l="sample"===a.funcmode?h-1:h;return l?Math.sqrt((g-f*f/h)/l):0}}}function f(a,b){return b.length}function g(a,b){return a[b[0]]}function h(a,b){return a[b[b.length-1]]}var i=a("../plots/cartesian/axes"),j=a("../lib"),k=a("../plot_api/plot_schema"),l=a("./helpers").pointsAccessorFunction,m=a("../constants/numerical").BADNUM;c.moduleType="transform",c.name="aggregate";var n=c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},o=n.aggregations;c.supplyDefaults=function(a,b){function c(b,c){return j.coerce(a,f,n,b,c)}function d(a,b){return j.coerce(p[e],m,o,a,b)}var e,f={},g=c("enabled");if(!g)return f;var h=k.findArrayAttributes(b),i={};for(e=0;e<h.length;e++)i[h[e]]=1;var l=c("groups");if(!Array.isArray(l)){if(!i[l])return void(f.enabled=!1);i[l]=0}var m,p=a.aggregations||[],q=f.aggregations=new Array(p.length);for(e=0;e<p.length;e++){m={_index:e};var r=d("target"),s=d("func"),t=d("enabled");t&&r&&(i[r]||"count"===s&&void 0===i[r])?("stddev"===s&&d("funcmode"),i[r]=0,q[e]=m):q[e]={enabled:!1,_index:e}}for(e=0;e<h.length;e++)i[h[e]]&&q.push({target:h[e],func:o.func.dflt,enabled:!0,_index:-1});return f},c.calcTransform=function(a,b,c){if(c.enabled){var e=c.groups,f=j.getTargetArray(b,{target:e});if(f){var g,h,i,k,m={},n={},o=[],p=l(b.transforms,c);for(g=0;g<f.length;g++)h=f[g],i=m[h],void 0===i?(m[h]=o.length,k=[g],o.push(k),n[m[h]]=p(g)):(o[i].push(g),n[m[h]]=(n[m[h]]||[]).concat(p(g)));c._indexToPoints=n;var q=c.aggregations;for(g=0;g<q.length;g++)d(a,b,o,q[g]);"string"==typeof e&&d(a,b,o,{target:e,func:"first",enabled:!0})}}}},{"../constants/numerical":717,"../lib":738,"../plot_api/plot_schema":774,"../plots/cartesian/axes":785,"./helpers":1153}],1151:[function(a,b,c){"use strict";function d(a,b,c){function d(a){return-1!==a.indexOf(f)}var e,f=a.operation,g=a.value,h=Array.isArray(g),l=function(c){return b(c,0,a.valuecalendar)},m=function(a){return b(a,0,c)};switch(d(i)?e=l(h?g[0]:g):d(j)?e=h?[l(g[0]),l(g[1])]:[l(g),l(g)]:d(k)&&(e=h?g.map(l):[l(g)]),f){case"=":return function(a){return m(a)===e};case"!=":return function(a){return m(a)!==e};case"<":return function(a){return m(a)<e};case"<=":return function(a){return m(a)<=e};case">":return function(a){return m(a)>e};case">=":return function(a){return m(a)>=e};case"[]":return function(a){var b=m(a);return b>=e[0]&&b<=e[1]};case"()":return function(a){var b=m(a);return b>e[0]&&b<e[1]};case"[)":return function(a){var b=m(a);return b>=e[0]&&b<e[1]};case"(]":return function(a){var b=m(a);return b>e[0]&&b<=e[1]};case"][":return function(a){var b=m(a);return b<=e[0]||b>=e[1]};case")(":return function(a){var b=m(a);return b<e[0]||b>e[1]};case"](":return function(a){var b=m(a);return b<=e[0]||b>e[1]};case")[":return function(a){var b=m(a);return b<e[0]||b>=e[1]};case"{}":return function(a){return-1!==e.indexOf(m(a))};case"}{":return function(a){return-1===e.indexOf(m(a))}}}var e=a("../lib"),f=a("../registry"),g=a("../plots/cartesian/axes"),h=a("./helpers").pointsAccessorFunction,i=["=","!=","<",">=",">","<="],j=["[]","()","[)","(]","][",")(","](",")["],k=["{}","}{"];c.moduleType="transform",c.name="filter",c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(i).concat(j).concat(k),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},c.supplyDefaults=function(a){function b(b,f){return e.coerce(a,d,c.attributes,b,f)}var d={},g=b("enabled");if(g){b("preservegaps"),b("operation"),b("value"),b("target");var h=f.getComponentMethod("calendars","handleDefaults");h(a,d,"valuecalendar",null),h(a,d,"targetcalendar",null)}return d},c.calcTransform=function(a,b,c){function f(a,c){for(var d=0;d<m.length;d++){var f=e.nestedProperty(b,m[d]);a(f,c)}}if(c.enabled){var i=e.getTargetArray(b,c);if(i){var j=c.target,k=i.length,l=c.targetcalendar,m=b._arrayAttrs;if("string"==typeof j){var n=e.nestedProperty(b,j+"calendar").get();n&&(l=n)}var o,p,q=g.getDataToCoordFunc(a,b,j,i),r=d(c,q,l),s={},t={},u=0;c.preservegaps?(o=function(a){s[a.astr]=e.extendDeep([],a.get()),a.set(new Array(k))},p=function(a,b){var c=s[a.astr][b];a.get()[b]=c}):(o=function(a){s[a.astr]=e.extendDeep([],a.get()),a.set([])},p=function(a,b){var c=s[a.astr][b];a.get().push(c)}),f(o);for(var v=h(b.transforms,c),w=0;k>w;w++){var x=r(i[w]);x&&(f(p,w),t[u++]=v(w))}c._indexToPoints=t}}}},{"../lib":738,"../plots/cartesian/axes":785,"../registry":861,"./helpers":1153}],1152:[function(a,b,c){"use strict";function d(a,b){var c,d,i,j,k,l,m,n,o,p,q=b.transform,r=a.transforms[b.transformIndex].groups,s=h(a.transforms,q);if(!Array.isArray(r)||0===r.length)return[a];var t=e.filterUnique(r),u=new Array(t.length),v=r.length,w=f.findArrayAttributes(a),x=q.styles||[],y={};for(c=0;c<x.length;c++)y[x[c].target]=x[c].value;q.styles&&(p=e.keyedContainer(q,"styles","target","value.name"));var z={},A={};for(c=0;c<t.length;c++){l=t[c],z[l]=c,A[l]=0,m=u[c]=e.extendDeepNoArrays({},a),m._group=l,m.transforms[b.transformIndex]._indexToPoints={};var B=null;for(p&&(B=p.get(l)),B?m.name=B:m.name=e.templateString(q.nameformat,{trace:a.name,group:l}),n=m.transforms,m.transforms=[],d=0;d<n.length;d++)m.transforms[d]=e.extendDeepNoArrays({},n[d]);for(d=0;d<w.length;d++)e.nestedProperty(m,w[d]).set([])}for(i=0;i<w.length;i++){for(j=w[i],d=0,o=[];d<t.length;d++)o[d]=e.nestedProperty(u[d],j).get();for(k=e.nestedProperty(a,j).get(),d=0;v>d;d++)o[z[r[d]]].push(k[d])}for(d=0;v>d;d++){m=u[z[r[d]]];var C=m.transforms[b.transformIndex]._indexToPoints;C[A[r[d]]]=s(d),A[r[d]]++}for(c=0;c<t.length;c++)l=t[c],m=u[c],g.clearExpandedTraceDefaultColors(m),m=e.extendDeepNoArrays(m,y[l]||{});return u}var e=a("../lib"),f=a("../plot_api/plot_schema"),g=a("../plots/plots"),h=a("./helpers").pointsAccessorFunction;c.moduleType="transform",c.name="groupby",c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc"},editType:"calc"},editType:"calc"},c.supplyDefaults=function(a,b,d){function f(b,d){return e.coerce(a,h,c.attributes,b,d)}var g,h={},i=f("enabled");if(!i)return h;f("groups"),f("nameformat",d._dataLength>1?"%{group} (%{trace})":"%{group}");var j=a.styles,k=h.styles=[];if(j)for(g=0;g<j.length;g++)k[g]={},e.coerce(j[g],k[g],c.attributes.styles,"target"),e.coerce(j[g],k[g],c.attributes.styles,"value");return h},c.transform=function(a,b){var c,e,f,g=[];for(e=0;e<a.length;e++)for(c=d(a[e],b),f=0;f<c.length;f++)g.push(c[f]);return g}},{"../lib":738,"../plot_api/plot_schema":774,"../plots/plots":846,"./helpers":1153}],1153:[function(a,b,c){"use strict";c.pointsAccessorFunction=function(a,b){for(var c,d,e=0;e<a.length&&(c=a[e],c!==b);e++)c._indexToPoints&&c.enabled!==!1&&(d=c._indexToPoints);var f=d?function(a){return d[a]}:function(a){return[a]};return f}},{}],1154:[function(a,b,c){"use strict";function d(a,b,c){for(var d=b.length,f=new Array(d),g=b.slice().sort(e(a,c)),h=0;d>h;h++)for(var i=b[h],j=0;d>j;j++){var k=g[j];if(i===k){f[j]=h,g[j]=null;break}}return f}function e(a,b){switch(a.order){case"ascending":return function(a,c){return b(a)-b(c)};case"descending":return function(a,c){return b(c)-b(a)}}}var f=a("../lib"),g=a("../plots/cartesian/axes"),h=a("./helpers").pointsAccessorFunction;c.moduleType="transform",c.name="sort",c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},c.supplyDefaults=function(a){function b(b,e){return f.coerce(a,d,c.attributes,b,e)}var d={},e=b("enabled");return e&&(b("target"),b("order")),d},c.calcTransform=function(a,b,c){if(c.enabled){var e=f.getTargetArray(b,c);if(e){var i,j,k=c.target,l=e.length,m=b._arrayAttrs,n=g.getDataToCoordFunc(a,b,k,e),o=d(c,e,n),p=h(b.transforms,c),q={};for(i=0;i<m.length;i++){var r=f.nestedProperty(b,m[i]),s=r.get(),t=new Array(l);for(j=0;l>j;j++)t[j]=s[o[j]];r.set(t)}for(j=0;l>j;j++)q[j]=p(o[j]);c._indexToPoints=q}}}},{"../lib":738,"../plots/cartesian/axes":785,"./helpers":1153}]},{},[20])(20)}),function(){"use strict";angular.module("plotly",[]).directive("plotly",["$window",function(a){return{restrict:"E",template:"<div></div>",scope:{plotlyData:"=",plotlyLayout:"=",plotlyOptions:"=",plotlyEvents:"="},link:function(b,c){function d(a){b.plotlyEvents(a)}function e(){return b.plotlyData?(h||(h=!0,Plotly.newPlot(g,b.plotlyData,b.plotlyLayout,b.plotlyOptions),b.plotlyEvents&&d(g)),g.layout=b.plotlyLayout,g.data=b.plotlyData,Plotly.redraw(g),void Plotly.Plots.resize(g)):void(h&&(Plotly.Plots.purge(g),g.innerHTML=""))}function f(){h&&b.plotlyData&&Plotly.Plots.resize(g)}var g=c[0].children[0],h=!1;b.$watch(function(a){return a.plotlyLayout},function(a,b){angular.equals(a,b)&&h||e()},!0),b.$watch(function(a){return a.plotlyData},function(a,b){angular.equals(a,b)&&h||e()},!0),b.$watch(function(){return{h:c[0].offsetHeight,w:c[0].offsetWidth}},function(a,b){angular.equals(a,b)||f()},!0),angular.element(a).bind("resize",f)}}}])}();